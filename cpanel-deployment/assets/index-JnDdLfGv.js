const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/secp256k1-DZPIMNOT.js","assets/sha2-CjUZHLVq.js","assets/embedded-wallet-BgK7AfOh.js","assets/if-defined-BvD-dsaf.js","assets/index-9LVO3A2f.js","assets/index-CwgC9Isa.js","assets/ref-BA0Uz3_C.js","assets/index-VgyyatP8.js","assets/index-CuOKs5Si.js","assets/index-DC5iFtsr.js","assets/index-DazpMZ18.js","assets/index-Dcv7hB9j.js","assets/index-BZ8L8zwL.js","assets/index-vJiGPCki.js","assets/email-C7XoooS7.js","assets/index-CL5s4Bee.js","assets/socials-zNe22VqY.js","assets/index-Bqy5taww.js","assets/ConstantsUtil-Dmg8YACJ.js","assets/index-DpHTHLNa.js","assets/index-UEjRgnzO.js","assets/index-Dbe-d7nu.js","assets/index-DWo465I2.js","assets/swaps-Cp9h8kX1.js","assets/index-BY1S3-vS.js","assets/index-DONXf2ey.js","assets/index-BtTYno7Y.js","assets/send-DWuK9CrJ.js","assets/index-DHi1aXem.js","assets/index-Cl0G-vlB.js","assets/receive-BPQg1HGF.js","assets/index-Lr1pz508.js","assets/onramp-CVFeakkK.js","assets/index-DI9FdF6x.js","assets/index-gg6ctbt8.js","assets/index-CufKICJi.js","assets/transactions-nBh1CwKf.js","assets/index-Cb5eoqj2.js","assets/index-BgMcmGav.js","assets/index-kSXIt5s-.js","assets/index-Ci0R3DWb.js","assets/index-U65T5kWL.js","assets/w3m-modal-BVCCbSdR.js","assets/SafeProvider-BbCM858c.js","assets/index-BsPl9DEt.js","assets/index-1R-463c5.js"])))=>i.map(i=>d[i]);
var S9=Object.defineProperty;var d5=t=>{throw TypeError(t)};var k9=(t,e,n)=>e in t?S9(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var W=(t,e,n)=>k9(t,typeof e!="symbol"?e+"":e,n),NE=(t,e,n)=>e.has(t)||d5("Cannot "+n);var C=(t,e,n)=>(NE(t,e,"read from private field"),n?n.call(t):e.get(t)),K=(t,e,n)=>e.has(t)?d5("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,n),B=(t,e,n,r)=>(NE(t,e,"write to private field"),r?r.call(t,n):e.set(t,n),n),ie=(t,e,n)=>(NE(t,e,"access private method"),n);var Cm=(t,e,n,r)=>({set _(s){B(t,e,s,n)},get _(){return C(t,e,r)}});function _9(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in t)){const i=Object.getOwnPropertyDescriptor(r,s);i&&Object.defineProperty(t,s,i.get?i:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();var wEe=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{};function Fy(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function I9(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var n=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var s=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,s.get?s:{enumerable:!0,get:function(){return t[r]}})}),n}var r4={exports:{}},s1={},s4={exports:{}},ot={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Hy=Symbol.for("react.element"),P9=Symbol.for("react.portal"),R9=Symbol.for("react.fragment"),j9=Symbol.for("react.strict_mode"),O9=Symbol.for("react.profiler"),D9=Symbol.for("react.provider"),U9=Symbol.for("react.context"),M9=Symbol.for("react.forward_ref"),L9=Symbol.for("react.suspense"),B9=Symbol.for("react.memo"),$9=Symbol.for("react.lazy"),h5=Symbol.iterator;function F9(t){return t===null||typeof t!="object"?null:(t=h5&&t[h5]||t["@@iterator"],typeof t=="function"?t:null)}var i4={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},a4=Object.assign,o4={};function sm(t,e,n){this.props=t,this.context=e,this.refs=o4,this.updater=n||i4}sm.prototype.isReactComponent={};sm.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};sm.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function c4(){}c4.prototype=sm.prototype;function kT(t,e,n){this.props=t,this.context=e,this.refs=o4,this.updater=n||i4}var _T=kT.prototype=new c4;_T.constructor=kT;a4(_T,sm.prototype);_T.isPureReactComponent=!0;var f5=Array.isArray,l4=Object.prototype.hasOwnProperty,IT={current:null},u4={key:!0,ref:!0,__self:!0,__source:!0};function d4(t,e,n){var r,s={},i=null,a=null;if(e!=null)for(r in e.ref!==void 0&&(a=e.ref),e.key!==void 0&&(i=""+e.key),e)l4.call(e,r)&&!u4.hasOwnProperty(r)&&(s[r]=e[r]);var o=arguments.length-2;if(o===1)s.children=n;else if(1<o){for(var l=Array(o),u=0;u<o;u++)l[u]=arguments[u+2];s.children=l}if(t&&t.defaultProps)for(r in o=t.defaultProps,o)s[r]===void 0&&(s[r]=o[r]);return{$$typeof:Hy,type:t,key:i,ref:a,props:s,_owner:IT.current}}function H9(t,e){return{$$typeof:Hy,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function PT(t){return typeof t=="object"&&t!==null&&t.$$typeof===Hy}function V9(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var p5=/\/+/g;function CE(t,e){return typeof t=="object"&&t!==null&&t.key!=null?V9(""+t.key):e.toString(36)}function Db(t,e,n,r,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var a=!1;if(t===null)a=!0;else switch(i){case"string":case"number":a=!0;break;case"object":switch(t.$$typeof){case Hy:case P9:a=!0}}if(a)return a=t,s=s(a),t=r===""?"."+CE(a,0):r,f5(s)?(n="",t!=null&&(n=t.replace(p5,"$&/")+"/"),Db(s,e,n,"",function(u){return u})):s!=null&&(PT(s)&&(s=H9(s,n+(!s.key||a&&a.key===s.key?"":(""+s.key).replace(p5,"$&/")+"/")+t)),e.push(s)),1;if(a=0,r=r===""?".":r+":",f5(t))for(var o=0;o<t.length;o++){i=t[o];var l=r+CE(i,o);a+=Db(i,e,n,l,s)}else if(l=F9(t),typeof l=="function")for(t=l.call(t),o=0;!(i=t.next()).done;)i=i.value,l=r+CE(i,o++),a+=Db(i,e,n,l,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return a}function Aw(t,e,n){if(t==null)return t;var r=[],s=0;return Db(t,r,"","",function(i){return e.call(n,i,s++)}),r}function z9(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var is={current:null},Ub={transition:null},W9={ReactCurrentDispatcher:is,ReactCurrentBatchConfig:Ub,ReactCurrentOwner:IT};function h4(){throw Error("act(...) is not supported in production builds of React.")}ot.Children={map:Aw,forEach:function(t,e,n){Aw(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Aw(t,function(){e++}),e},toArray:function(t){return Aw(t,function(e){return e})||[]},only:function(t){if(!PT(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};ot.Component=sm;ot.Fragment=R9;ot.Profiler=O9;ot.PureComponent=kT;ot.StrictMode=j9;ot.Suspense=L9;ot.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=W9;ot.act=h4;ot.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=a4({},t.props),s=t.key,i=t.ref,a=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,a=IT.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var o=t.type.defaultProps;for(l in e)l4.call(e,l)&&!u4.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&o!==void 0?o[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){o=Array(l);for(var u=0;u<l;u++)o[u]=arguments[u+2];r.children=o}return{$$typeof:Hy,type:t.type,key:s,ref:i,props:r,_owner:a}};ot.createContext=function(t){return t={$$typeof:U9,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:D9,_context:t},t.Consumer=t};ot.createElement=d4;ot.createFactory=function(t){var e=d4.bind(null,t);return e.type=t,e};ot.createRef=function(){return{current:null}};ot.forwardRef=function(t){return{$$typeof:M9,render:t}};ot.isValidElement=PT;ot.lazy=function(t){return{$$typeof:$9,_payload:{_status:-1,_result:t},_init:z9}};ot.memo=function(t,e){return{$$typeof:B9,type:t,compare:e===void 0?null:e}};ot.startTransition=function(t){var e=Ub.transition;Ub.transition={};try{t()}finally{Ub.transition=e}};ot.unstable_act=h4;ot.useCallback=function(t,e){return is.current.useCallback(t,e)};ot.useContext=function(t){return is.current.useContext(t)};ot.useDebugValue=function(){};ot.useDeferredValue=function(t){return is.current.useDeferredValue(t)};ot.useEffect=function(t,e){return is.current.useEffect(t,e)};ot.useId=function(){return is.current.useId()};ot.useImperativeHandle=function(t,e,n){return is.current.useImperativeHandle(t,e,n)};ot.useInsertionEffect=function(t,e){return is.current.useInsertionEffect(t,e)};ot.useLayoutEffect=function(t,e){return is.current.useLayoutEffect(t,e)};ot.useMemo=function(t,e){return is.current.useMemo(t,e)};ot.useReducer=function(t,e,n){return is.current.useReducer(t,e,n)};ot.useRef=function(t){return is.current.useRef(t)};ot.useState=function(t){return is.current.useState(t)};ot.useSyncExternalStore=function(t,e,n){return is.current.useSyncExternalStore(t,e,n)};ot.useTransition=function(){return is.current.useTransition()};ot.version="18.3.1";s4.exports=ot;var v=s4.exports;const Ht=Fy(v),Ap=_9({__proto__:null,default:Ht},[v]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var q9=v,K9=Symbol.for("react.element"),G9=Symbol.for("react.fragment"),Y9=Object.prototype.hasOwnProperty,Q9=q9.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,J9={key:!0,ref:!0,__self:!0,__source:!0};function f4(t,e,n){var r,s={},i=null,a=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(a=e.ref);for(r in e)Y9.call(e,r)&&!J9.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:K9,type:t,key:i,ref:a,props:s,_owner:Q9.current}}s1.Fragment=G9;s1.jsx=f4;s1.jsxs=f4;r4.exports=s1;var c=r4.exports;window.global=window;class Fc extends Uint8Array{static from(e,n){if(typeof e=="string"){const r=new TextEncoder;return new Fc(r.encode(e))}return e instanceof ArrayBuffer?new Fc(e):Array.isArray(e)?new Fc(e):new Fc(e)}static alloc(e,n){const r=new Fc(e);return n!==void 0&&r.fill(n),r}static isBuffer(e){return e instanceof Fc||e instanceof Uint8Array}toString(e){return e==="hex"?Array.from(this).map(r=>r.toString(16).padStart(2,"0")).join(""):new TextDecoder().decode(this)}}window.Buffer=Fc;window.process={env:{},version:"",platform:"browser",nextTick:t=>setTimeout(t,0)};var p4={exports:{}},ri={},m4={exports:{}},g4={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(D,L){var $=D.length;D.push(L);e:for(;0<$;){var V=$-1>>>1,q=D[V];if(0<s(q,L))D[V]=L,D[$]=q,$=V;else break e}}function n(D){return D.length===0?null:D[0]}function r(D){if(D.length===0)return null;var L=D[0],$=D.pop();if($!==L){D[0]=$;e:for(var V=0,q=D.length,G=q>>>1;V<G;){var Z=2*(V+1)-1,oe=D[Z],xe=Z+1,J=D[xe];if(0>s(oe,$))xe<q&&0>s(J,oe)?(D[V]=J,D[xe]=$,V=xe):(D[V]=oe,D[Z]=$,V=Z);else if(xe<q&&0>s(J,$))D[V]=J,D[xe]=$,V=xe;else break e}}return L}function s(D,L){var $=D.sortIndex-L.sortIndex;return $!==0?$:D.id-L.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var a=Date,o=a.now();t.unstable_now=function(){return a.now()-o}}var l=[],u=[],d=1,h=null,f=3,p=!1,g=!1,m=!1,y=typeof setTimeout=="function"?setTimeout:null,b=typeof clearTimeout=="function"?clearTimeout:null,w=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function x(D){for(var L=n(u);L!==null;){if(L.callback===null)r(u);else if(L.startTime<=D)r(u),L.sortIndex=L.expirationTime,e(l,L);else break;L=n(u)}}function A(D){if(m=!1,x(D),!g)if(n(l)!==null)g=!0,I(T);else{var L=n(u);L!==null&&M(A,L.startTime-D)}}function T(D,L){g=!1,m&&(m=!1,b(S),S=-1),p=!0;var $=f;try{for(x(L),h=n(l);h!==null&&(!(h.expirationTime>L)||D&&!R());){var V=h.callback;if(typeof V=="function"){h.callback=null,f=h.priorityLevel;var q=V(h.expirationTime<=L);L=t.unstable_now(),typeof q=="function"?h.callback=q:h===n(l)&&r(l),x(L)}else r(l);h=n(l)}if(h!==null)var G=!0;else{var Z=n(u);Z!==null&&M(A,Z.startTime-L),G=!1}return G}finally{h=null,f=$,p=!1}}var j=!1,P=null,S=-1,E=5,k=-1;function R(){return!(t.unstable_now()-k<E)}function O(){if(P!==null){var D=t.unstable_now();k=D;var L=!0;try{L=P(!0,D)}finally{L?F():(j=!1,P=null)}}else j=!1}var F;if(typeof w=="function")F=function(){w(O)};else if(typeof MessageChannel<"u"){var z=new MessageChannel,N=z.port2;z.port1.onmessage=O,F=function(){N.postMessage(null)}}else F=function(){y(O,0)};function I(D){P=D,j||(j=!0,F())}function M(D,L){S=y(function(){D(t.unstable_now())},L)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(D){D.callback=null},t.unstable_continueExecution=function(){g||p||(g=!0,I(T))},t.unstable_forceFrameRate=function(D){0>D||125<D?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):E=0<D?Math.floor(1e3/D):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(D){switch(f){case 1:case 2:case 3:var L=3;break;default:L=f}var $=f;f=L;try{return D()}finally{f=$}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(D,L){switch(D){case 1:case 2:case 3:case 4:case 5:break;default:D=3}var $=f;f=D;try{return L()}finally{f=$}},t.unstable_scheduleCallback=function(D,L,$){var V=t.unstable_now();switch(typeof $=="object"&&$!==null?($=$.delay,$=typeof $=="number"&&0<$?V+$:V):$=V,D){case 1:var q=-1;break;case 2:q=250;break;case 5:q=1073741823;break;case 4:q=1e4;break;default:q=5e3}return q=$+q,D={id:d++,callback:L,priorityLevel:D,startTime:$,expirationTime:q,sortIndex:-1},$>V?(D.sortIndex=$,e(u,D),n(l)===null&&D===n(u)&&(m?(b(S),S=-1):m=!0,M(A,$-V))):(D.sortIndex=q,e(l,D),g||p||(g=!0,I(T))),D},t.unstable_shouldYield=R,t.unstable_wrapCallback=function(D){var L=f;return function(){var $=f;f=L;try{return D.apply(this,arguments)}finally{f=$}}}})(g4);m4.exports=g4;var Z9=m4.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var X9=v,Xs=Z9;function ce(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var y4=new Set,o0={};function eh(t,e){Tp(t,e),Tp(t+"Capture",e)}function Tp(t,e){for(o0[t]=e,t=0;t<e.length;t++)y4.add(e[t])}var sc=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),CN=Object.prototype.hasOwnProperty,e7=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,m5={},g5={};function t7(t){return CN.call(g5,t)?!0:CN.call(m5,t)?!1:e7.test(t)?g5[t]=!0:(m5[t]=!0,!1)}function n7(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function r7(t,e,n,r){if(e===null||typeof e>"u"||n7(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function as(t,e,n,r,s,i,a){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=a}var hr={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){hr[t]=new as(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];hr[e]=new as(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){hr[t]=new as(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){hr[t]=new as(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){hr[t]=new as(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){hr[t]=new as(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){hr[t]=new as(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){hr[t]=new as(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){hr[t]=new as(t,5,!1,t.toLowerCase(),null,!1,!1)});var RT=/[\-:]([a-z])/g;function jT(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(RT,jT);hr[e]=new as(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(RT,jT);hr[e]=new as(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(RT,jT);hr[e]=new as(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){hr[t]=new as(t,1,!1,t.toLowerCase(),null,!1,!1)});hr.xlinkHref=new as("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){hr[t]=new as(t,1,!1,t.toLowerCase(),null,!0,!0)});function OT(t,e,n,r){var s=hr.hasOwnProperty(e)?hr[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(r7(e,n,s,r)&&(n=null),r||s===null?t7(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var wc=X9.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Tw=Symbol.for("react.element"),Zh=Symbol.for("react.portal"),Xh=Symbol.for("react.fragment"),DT=Symbol.for("react.strict_mode"),AN=Symbol.for("react.profiler"),w4=Symbol.for("react.provider"),b4=Symbol.for("react.context"),UT=Symbol.for("react.forward_ref"),TN=Symbol.for("react.suspense"),SN=Symbol.for("react.suspense_list"),MT=Symbol.for("react.memo"),Hc=Symbol.for("react.lazy"),x4=Symbol.for("react.offscreen"),y5=Symbol.iterator;function Am(t){return t===null||typeof t!="object"?null:(t=y5&&t[y5]||t["@@iterator"],typeof t=="function"?t:null)}var dn=Object.assign,AE;function cg(t){if(AE===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);AE=e&&e[1]||""}return`
`+AE+t}var TE=!1;function SE(t,e){if(!t||TE)return"";TE=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var r=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){r=u}t.call(e.prototype)}else{try{throw Error()}catch(u){r=u}t()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var s=u.stack.split(`
`),i=r.stack.split(`
`),a=s.length-1,o=i.length-1;1<=a&&0<=o&&s[a]!==i[o];)o--;for(;1<=a&&0<=o;a--,o--)if(s[a]!==i[o]){if(a!==1||o!==1)do if(a--,o--,0>o||s[a]!==i[o]){var l=`
`+s[a].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=a&&0<=o);break}}}finally{TE=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?cg(t):""}function s7(t){switch(t.tag){case 5:return cg(t.type);case 16:return cg("Lazy");case 13:return cg("Suspense");case 19:return cg("SuspenseList");case 0:case 2:case 15:return t=SE(t.type,!1),t;case 11:return t=SE(t.type.render,!1),t;case 1:return t=SE(t.type,!0),t;default:return""}}function kN(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Xh:return"Fragment";case Zh:return"Portal";case AN:return"Profiler";case DT:return"StrictMode";case TN:return"Suspense";case SN:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case b4:return(t.displayName||"Context")+".Consumer";case w4:return(t._context.displayName||"Context")+".Provider";case UT:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case MT:return e=t.displayName||null,e!==null?e:kN(t.type)||"Memo";case Hc:e=t._payload,t=t._init;try{return kN(t(e))}catch{}}return null}function i7(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return kN(e);case 8:return e===DT?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Hl(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function v4(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function a7(t){var e=v4(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(a){r=""+a,i.call(this,a)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(a){r=""+a},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Sw(t){t._valueTracker||(t._valueTracker=a7(t))}function E4(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=v4(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Tx(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function _N(t,e){var n=e.checked;return dn({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function w5(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Hl(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function N4(t,e){e=e.checked,e!=null&&OT(t,"checked",e,!1)}function IN(t,e){N4(t,e);var n=Hl(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?PN(t,e.type,n):e.hasOwnProperty("defaultValue")&&PN(t,e.type,Hl(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function b5(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function PN(t,e,n){(e!=="number"||Tx(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var lg=Array.isArray;function xf(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Hl(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function RN(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(ce(91));return dn({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function x5(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(ce(92));if(lg(n)){if(1<n.length)throw Error(ce(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Hl(n)}}function C4(t,e){var n=Hl(e.value),r=Hl(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function v5(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function A4(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function jN(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?A4(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var kw,T4=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(kw=kw||document.createElement("div"),kw.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=kw.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function c0(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Pg={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},o7=["Webkit","ms","Moz","O"];Object.keys(Pg).forEach(function(t){o7.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Pg[e]=Pg[t]})});function S4(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Pg.hasOwnProperty(t)&&Pg[t]?(""+e).trim():e+"px"}function k4(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=S4(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var c7=dn({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ON(t,e){if(e){if(c7[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(ce(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(ce(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(ce(61))}if(e.style!=null&&typeof e.style!="object")throw Error(ce(62))}}function DN(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var UN=null;function LT(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var MN=null,vf=null,Ef=null;function E5(t){if(t=Wy(t)){if(typeof MN!="function")throw Error(ce(280));var e=t.stateNode;e&&(e=l1(e),MN(t.stateNode,t.type,e))}}function _4(t){vf?Ef?Ef.push(t):Ef=[t]:vf=t}function I4(){if(vf){var t=vf,e=Ef;if(Ef=vf=null,E5(t),e)for(t=0;t<e.length;t++)E5(e[t])}}function P4(t,e){return t(e)}function R4(){}var kE=!1;function j4(t,e,n){if(kE)return t(e,n);kE=!0;try{return P4(t,e,n)}finally{kE=!1,(vf!==null||Ef!==null)&&(R4(),I4())}}function l0(t,e){var n=t.stateNode;if(n===null)return null;var r=l1(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(ce(231,e,typeof n));return n}var LN=!1;if(sc)try{var Tm={};Object.defineProperty(Tm,"passive",{get:function(){LN=!0}}),window.addEventListener("test",Tm,Tm),window.removeEventListener("test",Tm,Tm)}catch{LN=!1}function l7(t,e,n,r,s,i,a,o,l){var u=Array.prototype.slice.call(arguments,3);try{e.apply(n,u)}catch(d){this.onError(d)}}var Rg=!1,Sx=null,kx=!1,BN=null,u7={onError:function(t){Rg=!0,Sx=t}};function d7(t,e,n,r,s,i,a,o,l){Rg=!1,Sx=null,l7.apply(u7,arguments)}function h7(t,e,n,r,s,i,a,o,l){if(d7.apply(this,arguments),Rg){if(Rg){var u=Sx;Rg=!1,Sx=null}else throw Error(ce(198));kx||(kx=!0,BN=u)}}function th(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function O4(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function N5(t){if(th(t)!==t)throw Error(ce(188))}function f7(t){var e=t.alternate;if(!e){if(e=th(t),e===null)throw Error(ce(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return N5(s),t;if(i===r)return N5(s),e;i=i.sibling}throw Error(ce(188))}if(n.return!==r.return)n=s,r=i;else{for(var a=!1,o=s.child;o;){if(o===n){a=!0,n=s,r=i;break}if(o===r){a=!0,r=s,n=i;break}o=o.sibling}if(!a){for(o=i.child;o;){if(o===n){a=!0,n=i,r=s;break}if(o===r){a=!0,r=i,n=s;break}o=o.sibling}if(!a)throw Error(ce(189))}}if(n.alternate!==r)throw Error(ce(190))}if(n.tag!==3)throw Error(ce(188));return n.stateNode.current===n?t:e}function D4(t){return t=f7(t),t!==null?U4(t):null}function U4(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=U4(t);if(e!==null)return e;t=t.sibling}return null}var M4=Xs.unstable_scheduleCallback,C5=Xs.unstable_cancelCallback,p7=Xs.unstable_shouldYield,m7=Xs.unstable_requestPaint,wn=Xs.unstable_now,g7=Xs.unstable_getCurrentPriorityLevel,BT=Xs.unstable_ImmediatePriority,L4=Xs.unstable_UserBlockingPriority,_x=Xs.unstable_NormalPriority,y7=Xs.unstable_LowPriority,B4=Xs.unstable_IdlePriority,i1=null,Xa=null;function w7(t){if(Xa&&typeof Xa.onCommitFiberRoot=="function")try{Xa.onCommitFiberRoot(i1,t,void 0,(t.current.flags&128)===128)}catch{}}var oa=Math.clz32?Math.clz32:v7,b7=Math.log,x7=Math.LN2;function v7(t){return t>>>=0,t===0?32:31-(b7(t)/x7|0)|0}var _w=64,Iw=4194304;function ug(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Ix(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,i=t.pingedLanes,a=n&268435455;if(a!==0){var o=a&~s;o!==0?r=ug(o):(i&=a,i!==0&&(r=ug(i)))}else a=n&~s,a!==0?r=ug(a):i!==0&&(r=ug(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-oa(e),s=1<<n,r|=t[n],e&=~s;return r}function E7(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function N7(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var a=31-oa(i),o=1<<a,l=s[a];l===-1?(!(o&n)||o&r)&&(s[a]=E7(o,e)):l<=e&&(t.expiredLanes|=o),i&=~o}}function $N(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function $4(){var t=_w;return _w<<=1,!(_w&4194240)&&(_w=64),t}function _E(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Vy(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-oa(e),t[e]=n}function C7(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-oa(n),i=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~i}}function $T(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-oa(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var Lt=0;function F4(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var H4,FT,V4,z4,W4,FN=!1,Pw=[],Tl=null,Sl=null,kl=null,u0=new Map,d0=new Map,Qc=[],A7="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function A5(t,e){switch(t){case"focusin":case"focusout":Tl=null;break;case"dragenter":case"dragleave":Sl=null;break;case"mouseover":case"mouseout":kl=null;break;case"pointerover":case"pointerout":u0.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":d0.delete(e.pointerId)}}function Sm(t,e,n,r,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=Wy(e),e!==null&&FT(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function T7(t,e,n,r,s){switch(e){case"focusin":return Tl=Sm(Tl,t,e,n,r,s),!0;case"dragenter":return Sl=Sm(Sl,t,e,n,r,s),!0;case"mouseover":return kl=Sm(kl,t,e,n,r,s),!0;case"pointerover":var i=s.pointerId;return u0.set(i,Sm(u0.get(i)||null,t,e,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,d0.set(i,Sm(d0.get(i)||null,t,e,n,r,s)),!0}return!1}function q4(t){var e=Ru(t.target);if(e!==null){var n=th(e);if(n!==null){if(e=n.tag,e===13){if(e=O4(n),e!==null){t.blockedOn=e,W4(t.priority,function(){V4(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Mb(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=HN(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);UN=r,n.target.dispatchEvent(r),UN=null}else return e=Wy(n),e!==null&&FT(e),t.blockedOn=n,!1;e.shift()}return!0}function T5(t,e,n){Mb(t)&&n.delete(e)}function S7(){FN=!1,Tl!==null&&Mb(Tl)&&(Tl=null),Sl!==null&&Mb(Sl)&&(Sl=null),kl!==null&&Mb(kl)&&(kl=null),u0.forEach(T5),d0.forEach(T5)}function km(t,e){t.blockedOn===e&&(t.blockedOn=null,FN||(FN=!0,Xs.unstable_scheduleCallback(Xs.unstable_NormalPriority,S7)))}function h0(t){function e(s){return km(s,t)}if(0<Pw.length){km(Pw[0],t);for(var n=1;n<Pw.length;n++){var r=Pw[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Tl!==null&&km(Tl,t),Sl!==null&&km(Sl,t),kl!==null&&km(kl,t),u0.forEach(e),d0.forEach(e),n=0;n<Qc.length;n++)r=Qc[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Qc.length&&(n=Qc[0],n.blockedOn===null);)q4(n),n.blockedOn===null&&Qc.shift()}var Nf=wc.ReactCurrentBatchConfig,Px=!0;function k7(t,e,n,r){var s=Lt,i=Nf.transition;Nf.transition=null;try{Lt=1,HT(t,e,n,r)}finally{Lt=s,Nf.transition=i}}function _7(t,e,n,r){var s=Lt,i=Nf.transition;Nf.transition=null;try{Lt=4,HT(t,e,n,r)}finally{Lt=s,Nf.transition=i}}function HT(t,e,n,r){if(Px){var s=HN(t,e,n,r);if(s===null)BE(t,e,r,Rx,n),A5(t,r);else if(T7(s,t,e,n,r))r.stopPropagation();else if(A5(t,r),e&4&&-1<A7.indexOf(t)){for(;s!==null;){var i=Wy(s);if(i!==null&&H4(i),i=HN(t,e,n,r),i===null&&BE(t,e,r,Rx,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else BE(t,e,r,null,n)}}var Rx=null;function HN(t,e,n,r){if(Rx=null,t=LT(r),t=Ru(t),t!==null)if(e=th(t),e===null)t=null;else if(n=e.tag,n===13){if(t=O4(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Rx=t,null}function K4(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(g7()){case BT:return 1;case L4:return 4;case _x:case y7:return 16;case B4:return 536870912;default:return 16}default:return 16}}var xl=null,VT=null,Lb=null;function G4(){if(Lb)return Lb;var t,e=VT,n=e.length,r,s="value"in xl?xl.value:xl.textContent,i=s.length;for(t=0;t<n&&e[t]===s[t];t++);var a=n-t;for(r=1;r<=a&&e[n-r]===s[i-r];r++);return Lb=s.slice(t,1<r?1-r:void 0)}function Bb(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Rw(){return!0}function S5(){return!1}function si(t){function e(n,r,s,i,a){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=a,this.currentTarget=null;for(var o in t)t.hasOwnProperty(o)&&(n=t[o],this[o]=n?n(i):i[o]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Rw:S5,this.isPropagationStopped=S5,this}return dn(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Rw)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Rw)},persist:function(){},isPersistent:Rw}),e}var im={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},zT=si(im),zy=dn({},im,{view:0,detail:0}),I7=si(zy),IE,PE,_m,a1=dn({},zy,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:WT,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==_m&&(_m&&t.type==="mousemove"?(IE=t.screenX-_m.screenX,PE=t.screenY-_m.screenY):PE=IE=0,_m=t),IE)},movementY:function(t){return"movementY"in t?t.movementY:PE}}),k5=si(a1),P7=dn({},a1,{dataTransfer:0}),R7=si(P7),j7=dn({},zy,{relatedTarget:0}),RE=si(j7),O7=dn({},im,{animationName:0,elapsedTime:0,pseudoElement:0}),D7=si(O7),U7=dn({},im,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),M7=si(U7),L7=dn({},im,{data:0}),_5=si(L7),B7={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},$7={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},F7={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function H7(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=F7[t])?!!e[t]:!1}function WT(){return H7}var V7=dn({},zy,{key:function(t){if(t.key){var e=B7[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Bb(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?$7[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:WT,charCode:function(t){return t.type==="keypress"?Bb(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Bb(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),z7=si(V7),W7=dn({},a1,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),I5=si(W7),q7=dn({},zy,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:WT}),K7=si(q7),G7=dn({},im,{propertyName:0,elapsedTime:0,pseudoElement:0}),Y7=si(G7),Q7=dn({},a1,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),J7=si(Q7),Z7=[9,13,27,32],qT=sc&&"CompositionEvent"in window,jg=null;sc&&"documentMode"in document&&(jg=document.documentMode);var X7=sc&&"TextEvent"in window&&!jg,Y4=sc&&(!qT||jg&&8<jg&&11>=jg),P5=" ",R5=!1;function Q4(t,e){switch(t){case"keyup":return Z7.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function J4(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var ef=!1;function eF(t,e){switch(t){case"compositionend":return J4(e);case"keypress":return e.which!==32?null:(R5=!0,P5);case"textInput":return t=e.data,t===P5&&R5?null:t;default:return null}}function tF(t,e){if(ef)return t==="compositionend"||!qT&&Q4(t,e)?(t=G4(),Lb=VT=xl=null,ef=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Y4&&e.locale!=="ko"?null:e.data;default:return null}}var nF={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function j5(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!nF[t.type]:e==="textarea"}function Z4(t,e,n,r){_4(r),e=jx(e,"onChange"),0<e.length&&(n=new zT("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Og=null,f0=null;function rF(t){lj(t,0)}function o1(t){var e=rf(t);if(E4(e))return t}function sF(t,e){if(t==="change")return e}var X4=!1;if(sc){var jE;if(sc){var OE="oninput"in document;if(!OE){var O5=document.createElement("div");O5.setAttribute("oninput","return;"),OE=typeof O5.oninput=="function"}jE=OE}else jE=!1;X4=jE&&(!document.documentMode||9<document.documentMode)}function D5(){Og&&(Og.detachEvent("onpropertychange",ej),f0=Og=null)}function ej(t){if(t.propertyName==="value"&&o1(f0)){var e=[];Z4(e,f0,t,LT(t)),j4(rF,e)}}function iF(t,e,n){t==="focusin"?(D5(),Og=e,f0=n,Og.attachEvent("onpropertychange",ej)):t==="focusout"&&D5()}function aF(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return o1(f0)}function oF(t,e){if(t==="click")return o1(e)}function cF(t,e){if(t==="input"||t==="change")return o1(e)}function lF(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var fa=typeof Object.is=="function"?Object.is:lF;function p0(t,e){if(fa(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!CN.call(e,s)||!fa(t[s],e[s]))return!1}return!0}function U5(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function M5(t,e){var n=U5(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=U5(n)}}function tj(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?tj(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function nj(){for(var t=window,e=Tx();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Tx(t.document)}return e}function KT(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function uF(t){var e=nj(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&tj(n.ownerDocument.documentElement,n)){if(r!==null&&KT(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!t.extend&&i>r&&(s=r,r=i,i=s),s=M5(n,i);var a=M5(n,r);s&&a&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==a.node||t.focusOffset!==a.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(a.node,a.offset)):(e.setEnd(a.node,a.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var dF=sc&&"documentMode"in document&&11>=document.documentMode,tf=null,VN=null,Dg=null,zN=!1;function L5(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;zN||tf==null||tf!==Tx(r)||(r=tf,"selectionStart"in r&&KT(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Dg&&p0(Dg,r)||(Dg=r,r=jx(VN,"onSelect"),0<r.length&&(e=new zT("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=tf)))}function jw(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var nf={animationend:jw("Animation","AnimationEnd"),animationiteration:jw("Animation","AnimationIteration"),animationstart:jw("Animation","AnimationStart"),transitionend:jw("Transition","TransitionEnd")},DE={},rj={};sc&&(rj=document.createElement("div").style,"AnimationEvent"in window||(delete nf.animationend.animation,delete nf.animationiteration.animation,delete nf.animationstart.animation),"TransitionEvent"in window||delete nf.transitionend.transition);function c1(t){if(DE[t])return DE[t];if(!nf[t])return t;var e=nf[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in rj)return DE[t]=e[n];return t}var sj=c1("animationend"),ij=c1("animationiteration"),aj=c1("animationstart"),oj=c1("transitionend"),cj=new Map,B5="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Xl(t,e){cj.set(t,e),eh(e,[t])}for(var UE=0;UE<B5.length;UE++){var ME=B5[UE],hF=ME.toLowerCase(),fF=ME[0].toUpperCase()+ME.slice(1);Xl(hF,"on"+fF)}Xl(sj,"onAnimationEnd");Xl(ij,"onAnimationIteration");Xl(aj,"onAnimationStart");Xl("dblclick","onDoubleClick");Xl("focusin","onFocus");Xl("focusout","onBlur");Xl(oj,"onTransitionEnd");Tp("onMouseEnter",["mouseout","mouseover"]);Tp("onMouseLeave",["mouseout","mouseover"]);Tp("onPointerEnter",["pointerout","pointerover"]);Tp("onPointerLeave",["pointerout","pointerover"]);eh("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));eh("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));eh("onBeforeInput",["compositionend","keypress","textInput","paste"]);eh("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));eh("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));eh("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var dg="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),pF=new Set("cancel close invalid load scroll toggle".split(" ").concat(dg));function $5(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,h7(r,e,void 0,t),t.currentTarget=null}function lj(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var a=r.length-1;0<=a;a--){var o=r[a],l=o.instance,u=o.currentTarget;if(o=o.listener,l!==i&&s.isPropagationStopped())break e;$5(s,o,u),i=l}else for(a=0;a<r.length;a++){if(o=r[a],l=o.instance,u=o.currentTarget,o=o.listener,l!==i&&s.isPropagationStopped())break e;$5(s,o,u),i=l}}}if(kx)throw t=BN,kx=!1,BN=null,t}function Zt(t,e){var n=e[YN];n===void 0&&(n=e[YN]=new Set);var r=t+"__bubble";n.has(r)||(uj(e,t,2,!1),n.add(r))}function LE(t,e,n){var r=0;e&&(r|=4),uj(n,t,r,e)}var Ow="_reactListening"+Math.random().toString(36).slice(2);function m0(t){if(!t[Ow]){t[Ow]=!0,y4.forEach(function(n){n!=="selectionchange"&&(pF.has(n)||LE(n,!1,t),LE(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Ow]||(e[Ow]=!0,LE("selectionchange",!1,e))}}function uj(t,e,n,r){switch(K4(e)){case 1:var s=k7;break;case 4:s=_7;break;default:s=HT}n=s.bind(null,e,n,t),s=void 0,!LN||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function BE(t,e,n,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var a=r.tag;if(a===3||a===4){var o=r.stateNode.containerInfo;if(o===s||o.nodeType===8&&o.parentNode===s)break;if(a===4)for(a=r.return;a!==null;){var l=a.tag;if((l===3||l===4)&&(l=a.stateNode.containerInfo,l===s||l.nodeType===8&&l.parentNode===s))return;a=a.return}for(;o!==null;){if(a=Ru(o),a===null)return;if(l=a.tag,l===5||l===6){r=i=a;continue e}o=o.parentNode}}r=r.return}j4(function(){var u=i,d=LT(n),h=[];e:{var f=cj.get(t);if(f!==void 0){var p=zT,g=t;switch(t){case"keypress":if(Bb(n)===0)break e;case"keydown":case"keyup":p=z7;break;case"focusin":g="focus",p=RE;break;case"focusout":g="blur",p=RE;break;case"beforeblur":case"afterblur":p=RE;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":p=k5;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":p=R7;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":p=K7;break;case sj:case ij:case aj:p=D7;break;case oj:p=Y7;break;case"scroll":p=I7;break;case"wheel":p=J7;break;case"copy":case"cut":case"paste":p=M7;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":p=I5}var m=(e&4)!==0,y=!m&&t==="scroll",b=m?f!==null?f+"Capture":null:f;m=[];for(var w=u,x;w!==null;){x=w;var A=x.stateNode;if(x.tag===5&&A!==null&&(x=A,b!==null&&(A=l0(w,b),A!=null&&m.push(g0(w,A,x)))),y)break;w=w.return}0<m.length&&(f=new p(f,g,null,n,d),h.push({event:f,listeners:m}))}}if(!(e&7)){e:{if(f=t==="mouseover"||t==="pointerover",p=t==="mouseout"||t==="pointerout",f&&n!==UN&&(g=n.relatedTarget||n.fromElement)&&(Ru(g)||g[ic]))break e;if((p||f)&&(f=d.window===d?d:(f=d.ownerDocument)?f.defaultView||f.parentWindow:window,p?(g=n.relatedTarget||n.toElement,p=u,g=g?Ru(g):null,g!==null&&(y=th(g),g!==y||g.tag!==5&&g.tag!==6)&&(g=null)):(p=null,g=u),p!==g)){if(m=k5,A="onMouseLeave",b="onMouseEnter",w="mouse",(t==="pointerout"||t==="pointerover")&&(m=I5,A="onPointerLeave",b="onPointerEnter",w="pointer"),y=p==null?f:rf(p),x=g==null?f:rf(g),f=new m(A,w+"leave",p,n,d),f.target=y,f.relatedTarget=x,A=null,Ru(d)===u&&(m=new m(b,w+"enter",g,n,d),m.target=x,m.relatedTarget=y,A=m),y=A,p&&g)t:{for(m=p,b=g,w=0,x=m;x;x=yh(x))w++;for(x=0,A=b;A;A=yh(A))x++;for(;0<w-x;)m=yh(m),w--;for(;0<x-w;)b=yh(b),x--;for(;w--;){if(m===b||b!==null&&m===b.alternate)break t;m=yh(m),b=yh(b)}m=null}else m=null;p!==null&&F5(h,f,p,m,!1),g!==null&&y!==null&&F5(h,y,g,m,!0)}}e:{if(f=u?rf(u):window,p=f.nodeName&&f.nodeName.toLowerCase(),p==="select"||p==="input"&&f.type==="file")var T=sF;else if(j5(f))if(X4)T=cF;else{T=aF;var j=iF}else(p=f.nodeName)&&p.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(T=oF);if(T&&(T=T(t,u))){Z4(h,T,n,d);break e}j&&j(t,f,u),t==="focusout"&&(j=f._wrapperState)&&j.controlled&&f.type==="number"&&PN(f,"number",f.value)}switch(j=u?rf(u):window,t){case"focusin":(j5(j)||j.contentEditable==="true")&&(tf=j,VN=u,Dg=null);break;case"focusout":Dg=VN=tf=null;break;case"mousedown":zN=!0;break;case"contextmenu":case"mouseup":case"dragend":zN=!1,L5(h,n,d);break;case"selectionchange":if(dF)break;case"keydown":case"keyup":L5(h,n,d)}var P;if(qT)e:{switch(t){case"compositionstart":var S="onCompositionStart";break e;case"compositionend":S="onCompositionEnd";break e;case"compositionupdate":S="onCompositionUpdate";break e}S=void 0}else ef?Q4(t,n)&&(S="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(S="onCompositionStart");S&&(Y4&&n.locale!=="ko"&&(ef||S!=="onCompositionStart"?S==="onCompositionEnd"&&ef&&(P=G4()):(xl=d,VT="value"in xl?xl.value:xl.textContent,ef=!0)),j=jx(u,S),0<j.length&&(S=new _5(S,t,null,n,d),h.push({event:S,listeners:j}),P?S.data=P:(P=J4(n),P!==null&&(S.data=P)))),(P=X7?eF(t,n):tF(t,n))&&(u=jx(u,"onBeforeInput"),0<u.length&&(d=new _5("onBeforeInput","beforeinput",null,n,d),h.push({event:d,listeners:u}),d.data=P))}lj(h,e)})}function g0(t,e,n){return{instance:t,listener:e,currentTarget:n}}function jx(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=l0(t,n),i!=null&&r.unshift(g0(t,i,s)),i=l0(t,e),i!=null&&r.push(g0(t,i,s))),t=t.return}return r}function yh(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function F5(t,e,n,r,s){for(var i=e._reactName,a=[];n!==null&&n!==r;){var o=n,l=o.alternate,u=o.stateNode;if(l!==null&&l===r)break;o.tag===5&&u!==null&&(o=u,s?(l=l0(n,i),l!=null&&a.unshift(g0(n,l,o))):s||(l=l0(n,i),l!=null&&a.push(g0(n,l,o)))),n=n.return}a.length!==0&&t.push({event:e,listeners:a})}var mF=/\r\n?/g,gF=/\u0000|\uFFFD/g;function H5(t){return(typeof t=="string"?t:""+t).replace(mF,`
`).replace(gF,"")}function Dw(t,e,n){if(e=H5(e),H5(t)!==e&&n)throw Error(ce(425))}function Ox(){}var WN=null,qN=null;function KN(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var GN=typeof setTimeout=="function"?setTimeout:void 0,yF=typeof clearTimeout=="function"?clearTimeout:void 0,V5=typeof Promise=="function"?Promise:void 0,wF=typeof queueMicrotask=="function"?queueMicrotask:typeof V5<"u"?function(t){return V5.resolve(null).then(t).catch(bF)}:GN;function bF(t){setTimeout(function(){throw t})}function $E(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),h0(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);h0(e)}function _l(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function z5(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var am=Math.random().toString(36).slice(2),qa="__reactFiber$"+am,y0="__reactProps$"+am,ic="__reactContainer$"+am,YN="__reactEvents$"+am,xF="__reactListeners$"+am,vF="__reactHandles$"+am;function Ru(t){var e=t[qa];if(e)return e;for(var n=t.parentNode;n;){if(e=n[ic]||n[qa]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=z5(t);t!==null;){if(n=t[qa])return n;t=z5(t)}return e}t=n,n=t.parentNode}return null}function Wy(t){return t=t[qa]||t[ic],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function rf(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(ce(33))}function l1(t){return t[y0]||null}var QN=[],sf=-1;function eu(t){return{current:t}}function en(t){0>sf||(t.current=QN[sf],QN[sf]=null,sf--)}function Qt(t,e){sf++,QN[sf]=t.current,t.current=e}var Vl={},jr=eu(Vl),Ss=eu(!1),_d=Vl;function Sp(t,e){var n=t.type.contextTypes;if(!n)return Vl;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function ks(t){return t=t.childContextTypes,t!=null}function Dx(){en(Ss),en(jr)}function W5(t,e,n){if(jr.current!==Vl)throw Error(ce(168));Qt(jr,e),Qt(Ss,n)}function dj(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(ce(108,i7(t)||"Unknown",s));return dn({},n,r)}function Ux(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Vl,_d=jr.current,Qt(jr,t),Qt(Ss,Ss.current),!0}function q5(t,e,n){var r=t.stateNode;if(!r)throw Error(ce(169));n?(t=dj(t,e,_d),r.__reactInternalMemoizedMergedChildContext=t,en(Ss),en(jr),Qt(jr,t)):en(Ss),Qt(Ss,n)}var Po=null,u1=!1,FE=!1;function hj(t){Po===null?Po=[t]:Po.push(t)}function EF(t){u1=!0,hj(t)}function tu(){if(!FE&&Po!==null){FE=!0;var t=0,e=Lt;try{var n=Po;for(Lt=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Po=null,u1=!1}catch(s){throw Po!==null&&(Po=Po.slice(t+1)),M4(BT,tu),s}finally{Lt=e,FE=!1}}return null}var af=[],of=0,Mx=null,Lx=0,Ei=[],Ni=0,Id=null,Ko=1,Go="";function yu(t,e){af[of++]=Lx,af[of++]=Mx,Mx=t,Lx=e}function fj(t,e,n){Ei[Ni++]=Ko,Ei[Ni++]=Go,Ei[Ni++]=Id,Id=t;var r=Ko;t=Go;var s=32-oa(r)-1;r&=~(1<<s),n+=1;var i=32-oa(e)+s;if(30<i){var a=s-s%5;i=(r&(1<<a)-1).toString(32),r>>=a,s-=a,Ko=1<<32-oa(e)+s|n<<s|r,Go=i+t}else Ko=1<<i|n<<s|r,Go=t}function GT(t){t.return!==null&&(yu(t,1),fj(t,1,0))}function YT(t){for(;t===Mx;)Mx=af[--of],af[of]=null,Lx=af[--of],af[of]=null;for(;t===Id;)Id=Ei[--Ni],Ei[Ni]=null,Go=Ei[--Ni],Ei[Ni]=null,Ko=Ei[--Ni],Ei[Ni]=null}var Zs=null,Qs=null,sn=!1,ea=null;function pj(t,e){var n=Ci(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function K5(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Zs=t,Qs=_l(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Zs=t,Qs=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Id!==null?{id:Ko,overflow:Go}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Ci(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Zs=t,Qs=null,!0):!1;default:return!1}}function JN(t){return(t.mode&1)!==0&&(t.flags&128)===0}function ZN(t){if(sn){var e=Qs;if(e){var n=e;if(!K5(t,e)){if(JN(t))throw Error(ce(418));e=_l(n.nextSibling);var r=Zs;e&&K5(t,e)?pj(r,n):(t.flags=t.flags&-4097|2,sn=!1,Zs=t)}}else{if(JN(t))throw Error(ce(418));t.flags=t.flags&-4097|2,sn=!1,Zs=t}}}function G5(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Zs=t}function Uw(t){if(t!==Zs)return!1;if(!sn)return G5(t),sn=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!KN(t.type,t.memoizedProps)),e&&(e=Qs)){if(JN(t))throw mj(),Error(ce(418));for(;e;)pj(t,e),e=_l(e.nextSibling)}if(G5(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(ce(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Qs=_l(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Qs=null}}else Qs=Zs?_l(t.stateNode.nextSibling):null;return!0}function mj(){for(var t=Qs;t;)t=_l(t.nextSibling)}function kp(){Qs=Zs=null,sn=!1}function QT(t){ea===null?ea=[t]:ea.push(t)}var NF=wc.ReactCurrentBatchConfig;function Im(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(ce(309));var r=n.stateNode}if(!r)throw Error(ce(147,t));var s=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(a){var o=s.refs;a===null?delete o[i]:o[i]=a},e._stringRef=i,e)}if(typeof t!="string")throw Error(ce(284));if(!n._owner)throw Error(ce(290,t))}return t}function Mw(t,e){throw t=Object.prototype.toString.call(e),Error(ce(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Y5(t){var e=t._init;return e(t._payload)}function gj(t){function e(b,w){if(t){var x=b.deletions;x===null?(b.deletions=[w],b.flags|=16):x.push(w)}}function n(b,w){if(!t)return null;for(;w!==null;)e(b,w),w=w.sibling;return null}function r(b,w){for(b=new Map;w!==null;)w.key!==null?b.set(w.key,w):b.set(w.index,w),w=w.sibling;return b}function s(b,w){return b=jl(b,w),b.index=0,b.sibling=null,b}function i(b,w,x){return b.index=x,t?(x=b.alternate,x!==null?(x=x.index,x<w?(b.flags|=2,w):x):(b.flags|=2,w)):(b.flags|=1048576,w)}function a(b){return t&&b.alternate===null&&(b.flags|=2),b}function o(b,w,x,A){return w===null||w.tag!==6?(w=GE(x,b.mode,A),w.return=b,w):(w=s(w,x),w.return=b,w)}function l(b,w,x,A){var T=x.type;return T===Xh?d(b,w,x.props.children,A,x.key):w!==null&&(w.elementType===T||typeof T=="object"&&T!==null&&T.$$typeof===Hc&&Y5(T)===w.type)?(A=s(w,x.props),A.ref=Im(b,w,x),A.return=b,A):(A=qb(x.type,x.key,x.props,null,b.mode,A),A.ref=Im(b,w,x),A.return=b,A)}function u(b,w,x,A){return w===null||w.tag!==4||w.stateNode.containerInfo!==x.containerInfo||w.stateNode.implementation!==x.implementation?(w=YE(x,b.mode,A),w.return=b,w):(w=s(w,x.children||[]),w.return=b,w)}function d(b,w,x,A,T){return w===null||w.tag!==7?(w=yd(x,b.mode,A,T),w.return=b,w):(w=s(w,x),w.return=b,w)}function h(b,w,x){if(typeof w=="string"&&w!==""||typeof w=="number")return w=GE(""+w,b.mode,x),w.return=b,w;if(typeof w=="object"&&w!==null){switch(w.$$typeof){case Tw:return x=qb(w.type,w.key,w.props,null,b.mode,x),x.ref=Im(b,null,w),x.return=b,x;case Zh:return w=YE(w,b.mode,x),w.return=b,w;case Hc:var A=w._init;return h(b,A(w._payload),x)}if(lg(w)||Am(w))return w=yd(w,b.mode,x,null),w.return=b,w;Mw(b,w)}return null}function f(b,w,x,A){var T=w!==null?w.key:null;if(typeof x=="string"&&x!==""||typeof x=="number")return T!==null?null:o(b,w,""+x,A);if(typeof x=="object"&&x!==null){switch(x.$$typeof){case Tw:return x.key===T?l(b,w,x,A):null;case Zh:return x.key===T?u(b,w,x,A):null;case Hc:return T=x._init,f(b,w,T(x._payload),A)}if(lg(x)||Am(x))return T!==null?null:d(b,w,x,A,null);Mw(b,x)}return null}function p(b,w,x,A,T){if(typeof A=="string"&&A!==""||typeof A=="number")return b=b.get(x)||null,o(w,b,""+A,T);if(typeof A=="object"&&A!==null){switch(A.$$typeof){case Tw:return b=b.get(A.key===null?x:A.key)||null,l(w,b,A,T);case Zh:return b=b.get(A.key===null?x:A.key)||null,u(w,b,A,T);case Hc:var j=A._init;return p(b,w,x,j(A._payload),T)}if(lg(A)||Am(A))return b=b.get(x)||null,d(w,b,A,T,null);Mw(w,A)}return null}function g(b,w,x,A){for(var T=null,j=null,P=w,S=w=0,E=null;P!==null&&S<x.length;S++){P.index>S?(E=P,P=null):E=P.sibling;var k=f(b,P,x[S],A);if(k===null){P===null&&(P=E);break}t&&P&&k.alternate===null&&e(b,P),w=i(k,w,S),j===null?T=k:j.sibling=k,j=k,P=E}if(S===x.length)return n(b,P),sn&&yu(b,S),T;if(P===null){for(;S<x.length;S++)P=h(b,x[S],A),P!==null&&(w=i(P,w,S),j===null?T=P:j.sibling=P,j=P);return sn&&yu(b,S),T}for(P=r(b,P);S<x.length;S++)E=p(P,b,S,x[S],A),E!==null&&(t&&E.alternate!==null&&P.delete(E.key===null?S:E.key),w=i(E,w,S),j===null?T=E:j.sibling=E,j=E);return t&&P.forEach(function(R){return e(b,R)}),sn&&yu(b,S),T}function m(b,w,x,A){var T=Am(x);if(typeof T!="function")throw Error(ce(150));if(x=T.call(x),x==null)throw Error(ce(151));for(var j=T=null,P=w,S=w=0,E=null,k=x.next();P!==null&&!k.done;S++,k=x.next()){P.index>S?(E=P,P=null):E=P.sibling;var R=f(b,P,k.value,A);if(R===null){P===null&&(P=E);break}t&&P&&R.alternate===null&&e(b,P),w=i(R,w,S),j===null?T=R:j.sibling=R,j=R,P=E}if(k.done)return n(b,P),sn&&yu(b,S),T;if(P===null){for(;!k.done;S++,k=x.next())k=h(b,k.value,A),k!==null&&(w=i(k,w,S),j===null?T=k:j.sibling=k,j=k);return sn&&yu(b,S),T}for(P=r(b,P);!k.done;S++,k=x.next())k=p(P,b,S,k.value,A),k!==null&&(t&&k.alternate!==null&&P.delete(k.key===null?S:k.key),w=i(k,w,S),j===null?T=k:j.sibling=k,j=k);return t&&P.forEach(function(O){return e(b,O)}),sn&&yu(b,S),T}function y(b,w,x,A){if(typeof x=="object"&&x!==null&&x.type===Xh&&x.key===null&&(x=x.props.children),typeof x=="object"&&x!==null){switch(x.$$typeof){case Tw:e:{for(var T=x.key,j=w;j!==null;){if(j.key===T){if(T=x.type,T===Xh){if(j.tag===7){n(b,j.sibling),w=s(j,x.props.children),w.return=b,b=w;break e}}else if(j.elementType===T||typeof T=="object"&&T!==null&&T.$$typeof===Hc&&Y5(T)===j.type){n(b,j.sibling),w=s(j,x.props),w.ref=Im(b,j,x),w.return=b,b=w;break e}n(b,j);break}else e(b,j);j=j.sibling}x.type===Xh?(w=yd(x.props.children,b.mode,A,x.key),w.return=b,b=w):(A=qb(x.type,x.key,x.props,null,b.mode,A),A.ref=Im(b,w,x),A.return=b,b=A)}return a(b);case Zh:e:{for(j=x.key;w!==null;){if(w.key===j)if(w.tag===4&&w.stateNode.containerInfo===x.containerInfo&&w.stateNode.implementation===x.implementation){n(b,w.sibling),w=s(w,x.children||[]),w.return=b,b=w;break e}else{n(b,w);break}else e(b,w);w=w.sibling}w=YE(x,b.mode,A),w.return=b,b=w}return a(b);case Hc:return j=x._init,y(b,w,j(x._payload),A)}if(lg(x))return g(b,w,x,A);if(Am(x))return m(b,w,x,A);Mw(b,x)}return typeof x=="string"&&x!==""||typeof x=="number"?(x=""+x,w!==null&&w.tag===6?(n(b,w.sibling),w=s(w,x),w.return=b,b=w):(n(b,w),w=GE(x,b.mode,A),w.return=b,b=w),a(b)):n(b,w)}return y}var _p=gj(!0),yj=gj(!1),Bx=eu(null),$x=null,cf=null,JT=null;function ZT(){JT=cf=$x=null}function XT(t){var e=Bx.current;en(Bx),t._currentValue=e}function XN(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Cf(t,e){$x=t,JT=cf=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Cs=!0),t.firstContext=null)}function Si(t){var e=t._currentValue;if(JT!==t)if(t={context:t,memoizedValue:e,next:null},cf===null){if($x===null)throw Error(ce(308));cf=t,$x.dependencies={lanes:0,firstContext:t}}else cf=cf.next=t;return e}var ju=null;function e6(t){ju===null?ju=[t]:ju.push(t)}function wj(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,e6(e)):(n.next=s.next,s.next=n),e.interleaved=n,ac(t,r)}function ac(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Vc=!1;function t6(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function bj(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Zo(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Il(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,mt&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,ac(t,n)}return s=r.interleaved,s===null?(e.next=e,e6(r)):(e.next=s.next,s.next=e),r.interleaved=e,ac(t,n)}function $b(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,$T(t,n)}}function Q5(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=a:i=i.next=a,n=n.next}while(n!==null);i===null?s=i=e:i=i.next=e}else s=i=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Fx(t,e,n,r){var s=t.updateQueue;Vc=!1;var i=s.firstBaseUpdate,a=s.lastBaseUpdate,o=s.shared.pending;if(o!==null){s.shared.pending=null;var l=o,u=l.next;l.next=null,a===null?i=u:a.next=u,a=l;var d=t.alternate;d!==null&&(d=d.updateQueue,o=d.lastBaseUpdate,o!==a&&(o===null?d.firstBaseUpdate=u:o.next=u,d.lastBaseUpdate=l))}if(i!==null){var h=s.baseState;a=0,d=u=l=null,o=i;do{var f=o.lane,p=o.eventTime;if((r&f)===f){d!==null&&(d=d.next={eventTime:p,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var g=t,m=o;switch(f=e,p=n,m.tag){case 1:if(g=m.payload,typeof g=="function"){h=g.call(p,h,f);break e}h=g;break e;case 3:g.flags=g.flags&-65537|128;case 0:if(g=m.payload,f=typeof g=="function"?g.call(p,h,f):g,f==null)break e;h=dn({},h,f);break e;case 2:Vc=!0}}o.callback!==null&&o.lane!==0&&(t.flags|=64,f=s.effects,f===null?s.effects=[o]:f.push(o))}else p={eventTime:p,lane:f,tag:o.tag,payload:o.payload,callback:o.callback,next:null},d===null?(u=d=p,l=h):d=d.next=p,a|=f;if(o=o.next,o===null){if(o=s.shared.pending,o===null)break;f=o,o=f.next,f.next=null,s.lastBaseUpdate=f,s.shared.pending=null}}while(!0);if(d===null&&(l=h),s.baseState=l,s.firstBaseUpdate=u,s.lastBaseUpdate=d,e=s.shared.interleaved,e!==null){s=e;do a|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);Rd|=a,t.lanes=a,t.memoizedState=h}}function J5(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(ce(191,s));s.call(r)}}}var qy={},eo=eu(qy),w0=eu(qy),b0=eu(qy);function Ou(t){if(t===qy)throw Error(ce(174));return t}function n6(t,e){switch(Qt(b0,e),Qt(w0,t),Qt(eo,qy),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:jN(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=jN(e,t)}en(eo),Qt(eo,e)}function Ip(){en(eo),en(w0),en(b0)}function xj(t){Ou(b0.current);var e=Ou(eo.current),n=jN(e,t.type);e!==n&&(Qt(w0,t),Qt(eo,n))}function r6(t){w0.current===t&&(en(eo),en(w0))}var on=eu(0);function Hx(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var HE=[];function s6(){for(var t=0;t<HE.length;t++)HE[t]._workInProgressVersionPrimary=null;HE.length=0}var Fb=wc.ReactCurrentDispatcher,VE=wc.ReactCurrentBatchConfig,Pd=0,ln=null,jn=null,Hn=null,Vx=!1,Ug=!1,x0=0,CF=0;function gr(){throw Error(ce(321))}function i6(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!fa(t[n],e[n]))return!1;return!0}function a6(t,e,n,r,s,i){if(Pd=i,ln=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Fb.current=t===null||t.memoizedState===null?kF:_F,t=n(r,s),Ug){i=0;do{if(Ug=!1,x0=0,25<=i)throw Error(ce(301));i+=1,Hn=jn=null,e.updateQueue=null,Fb.current=IF,t=n(r,s)}while(Ug)}if(Fb.current=zx,e=jn!==null&&jn.next!==null,Pd=0,Hn=jn=ln=null,Vx=!1,e)throw Error(ce(300));return t}function o6(){var t=x0!==0;return x0=0,t}function Pa(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Hn===null?ln.memoizedState=Hn=t:Hn=Hn.next=t,Hn}function ki(){if(jn===null){var t=ln.alternate;t=t!==null?t.memoizedState:null}else t=jn.next;var e=Hn===null?ln.memoizedState:Hn.next;if(e!==null)Hn=e,jn=t;else{if(t===null)throw Error(ce(310));jn=t,t={memoizedState:jn.memoizedState,baseState:jn.baseState,baseQueue:jn.baseQueue,queue:jn.queue,next:null},Hn===null?ln.memoizedState=Hn=t:Hn=Hn.next=t}return Hn}function v0(t,e){return typeof e=="function"?e(t):e}function zE(t){var e=ki(),n=e.queue;if(n===null)throw Error(ce(311));n.lastRenderedReducer=t;var r=jn,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var a=s.next;s.next=i.next,i.next=a}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var o=a=null,l=null,u=i;do{var d=u.lane;if((Pd&d)===d)l!==null&&(l=l.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:t(r,u.action);else{var h={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};l===null?(o=l=h,a=r):l=l.next=h,ln.lanes|=d,Rd|=d}u=u.next}while(u!==null&&u!==i);l===null?a=r:l.next=o,fa(r,e.memoizedState)||(Cs=!0),e.memoizedState=r,e.baseState=a,e.baseQueue=l,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do i=s.lane,ln.lanes|=i,Rd|=i,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function WE(t){var e=ki(),n=e.queue;if(n===null)throw Error(ce(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,i=e.memoizedState;if(s!==null){n.pending=null;var a=s=s.next;do i=t(i,a.action),a=a.next;while(a!==s);fa(i,e.memoizedState)||(Cs=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function vj(){}function Ej(t,e){var n=ln,r=ki(),s=e(),i=!fa(r.memoizedState,s);if(i&&(r.memoizedState=s,Cs=!0),r=r.queue,c6(Aj.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||Hn!==null&&Hn.memoizedState.tag&1){if(n.flags|=2048,E0(9,Cj.bind(null,n,r,s,e),void 0,null),Yn===null)throw Error(ce(349));Pd&30||Nj(n,e,s)}return s}function Nj(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=ln.updateQueue,e===null?(e={lastEffect:null,stores:null},ln.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function Cj(t,e,n,r){e.value=n,e.getSnapshot=r,Tj(e)&&Sj(t)}function Aj(t,e,n){return n(function(){Tj(e)&&Sj(t)})}function Tj(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!fa(t,n)}catch{return!0}}function Sj(t){var e=ac(t,1);e!==null&&ca(e,t,1,-1)}function Z5(t){var e=Pa();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:v0,lastRenderedState:t},e.queue=t,t=t.dispatch=SF.bind(null,ln,t),[e.memoizedState,t]}function E0(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=ln.updateQueue,e===null?(e={lastEffect:null,stores:null},ln.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function kj(){return ki().memoizedState}function Hb(t,e,n,r){var s=Pa();ln.flags|=t,s.memoizedState=E0(1|e,n,void 0,r===void 0?null:r)}function d1(t,e,n,r){var s=ki();r=r===void 0?null:r;var i=void 0;if(jn!==null){var a=jn.memoizedState;if(i=a.destroy,r!==null&&i6(r,a.deps)){s.memoizedState=E0(e,n,i,r);return}}ln.flags|=t,s.memoizedState=E0(1|e,n,i,r)}function X5(t,e){return Hb(8390656,8,t,e)}function c6(t,e){return d1(2048,8,t,e)}function _j(t,e){return d1(4,2,t,e)}function Ij(t,e){return d1(4,4,t,e)}function Pj(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function Rj(t,e,n){return n=n!=null?n.concat([t]):null,d1(4,4,Pj.bind(null,e,t),n)}function l6(){}function jj(t,e){var n=ki();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&i6(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function Oj(t,e){var n=ki();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&i6(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function Dj(t,e,n){return Pd&21?(fa(n,e)||(n=$4(),ln.lanes|=n,Rd|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Cs=!0),t.memoizedState=n)}function AF(t,e){var n=Lt;Lt=n!==0&&4>n?n:4,t(!0);var r=VE.transition;VE.transition={};try{t(!1),e()}finally{Lt=n,VE.transition=r}}function Uj(){return ki().memoizedState}function TF(t,e,n){var r=Rl(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Mj(t))Lj(e,n);else if(n=wj(t,e,n,r),n!==null){var s=Zr();ca(n,t,r,s),Bj(n,e,r)}}function SF(t,e,n){var r=Rl(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Mj(t))Lj(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var a=e.lastRenderedState,o=i(a,n);if(s.hasEagerState=!0,s.eagerState=o,fa(o,a)){var l=e.interleaved;l===null?(s.next=s,e6(e)):(s.next=l.next,l.next=s),e.interleaved=s;return}}catch{}finally{}n=wj(t,e,s,r),n!==null&&(s=Zr(),ca(n,t,r,s),Bj(n,e,r))}}function Mj(t){var e=t.alternate;return t===ln||e!==null&&e===ln}function Lj(t,e){Ug=Vx=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function Bj(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,$T(t,n)}}var zx={readContext:Si,useCallback:gr,useContext:gr,useEffect:gr,useImperativeHandle:gr,useInsertionEffect:gr,useLayoutEffect:gr,useMemo:gr,useReducer:gr,useRef:gr,useState:gr,useDebugValue:gr,useDeferredValue:gr,useTransition:gr,useMutableSource:gr,useSyncExternalStore:gr,useId:gr,unstable_isNewReconciler:!1},kF={readContext:Si,useCallback:function(t,e){return Pa().memoizedState=[t,e===void 0?null:e],t},useContext:Si,useEffect:X5,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Hb(4194308,4,Pj.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Hb(4194308,4,t,e)},useInsertionEffect:function(t,e){return Hb(4,2,t,e)},useMemo:function(t,e){var n=Pa();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Pa();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=TF.bind(null,ln,t),[r.memoizedState,t]},useRef:function(t){var e=Pa();return t={current:t},e.memoizedState=t},useState:Z5,useDebugValue:l6,useDeferredValue:function(t){return Pa().memoizedState=t},useTransition:function(){var t=Z5(!1),e=t[0];return t=AF.bind(null,t[1]),Pa().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=ln,s=Pa();if(sn){if(n===void 0)throw Error(ce(407));n=n()}else{if(n=e(),Yn===null)throw Error(ce(349));Pd&30||Nj(r,e,n)}s.memoizedState=n;var i={value:n,getSnapshot:e};return s.queue=i,X5(Aj.bind(null,r,i,t),[t]),r.flags|=2048,E0(9,Cj.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=Pa(),e=Yn.identifierPrefix;if(sn){var n=Go,r=Ko;n=(r&~(1<<32-oa(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=x0++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=CF++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},_F={readContext:Si,useCallback:jj,useContext:Si,useEffect:c6,useImperativeHandle:Rj,useInsertionEffect:_j,useLayoutEffect:Ij,useMemo:Oj,useReducer:zE,useRef:kj,useState:function(){return zE(v0)},useDebugValue:l6,useDeferredValue:function(t){var e=ki();return Dj(e,jn.memoizedState,t)},useTransition:function(){var t=zE(v0)[0],e=ki().memoizedState;return[t,e]},useMutableSource:vj,useSyncExternalStore:Ej,useId:Uj,unstable_isNewReconciler:!1},IF={readContext:Si,useCallback:jj,useContext:Si,useEffect:c6,useImperativeHandle:Rj,useInsertionEffect:_j,useLayoutEffect:Ij,useMemo:Oj,useReducer:WE,useRef:kj,useState:function(){return WE(v0)},useDebugValue:l6,useDeferredValue:function(t){var e=ki();return jn===null?e.memoizedState=t:Dj(e,jn.memoizedState,t)},useTransition:function(){var t=WE(v0)[0],e=ki().memoizedState;return[t,e]},useMutableSource:vj,useSyncExternalStore:Ej,useId:Uj,unstable_isNewReconciler:!1};function Wi(t,e){if(t&&t.defaultProps){e=dn({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function eC(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:dn({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var h1={isMounted:function(t){return(t=t._reactInternals)?th(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Zr(),s=Rl(t),i=Zo(r,s);i.payload=e,n!=null&&(i.callback=n),e=Il(t,i,s),e!==null&&(ca(e,t,s,r),$b(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Zr(),s=Rl(t),i=Zo(r,s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=Il(t,i,s),e!==null&&(ca(e,t,s,r),$b(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Zr(),r=Rl(t),s=Zo(n,r);s.tag=2,e!=null&&(s.callback=e),e=Il(t,s,r),e!==null&&(ca(e,t,r,n),$b(e,t,r))}};function ek(t,e,n,r,s,i,a){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,a):e.prototype&&e.prototype.isPureReactComponent?!p0(n,r)||!p0(s,i):!0}function $j(t,e,n){var r=!1,s=Vl,i=e.contextType;return typeof i=="object"&&i!==null?i=Si(i):(s=ks(e)?_d:jr.current,r=e.contextTypes,i=(r=r!=null)?Sp(t,s):Vl),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=h1,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function tk(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&h1.enqueueReplaceState(e,e.state,null)}function tC(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},t6(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=Si(i):(i=ks(e)?_d:jr.current,s.context=Sp(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(eC(t,e,i,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&h1.enqueueReplaceState(s,s.state,null),Fx(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function Pp(t,e){try{var n="",r=e;do n+=s7(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function qE(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function nC(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var PF=typeof WeakMap=="function"?WeakMap:Map;function Fj(t,e,n){n=Zo(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){qx||(qx=!0,hC=r),nC(t,e)},n}function Hj(t,e,n){n=Zo(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){nC(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){nC(t,e),typeof r!="function"&&(Pl===null?Pl=new Set([this]):Pl.add(this));var a=e.stack;this.componentDidCatch(e.value,{componentStack:a!==null?a:""})}),n}function nk(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new PF;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=WF.bind(null,t,e,n),e.then(t,t))}function rk(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function sk(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Zo(-1,1),e.tag=2,Il(n,e,1))),n.lanes|=1),t)}var RF=wc.ReactCurrentOwner,Cs=!1;function Vr(t,e,n,r){e.child=t===null?yj(e,null,n,r):_p(e,t.child,n,r)}function ik(t,e,n,r,s){n=n.render;var i=e.ref;return Cf(e,s),r=a6(t,e,n,r,i,s),n=o6(),t!==null&&!Cs?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,oc(t,e,s)):(sn&&n&&GT(e),e.flags|=1,Vr(t,e,r,s),e.child)}function ak(t,e,n,r,s){if(t===null){var i=n.type;return typeof i=="function"&&!y6(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,Vj(t,e,i,r,s)):(t=qb(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var a=i.memoizedProps;if(n=n.compare,n=n!==null?n:p0,n(a,r)&&t.ref===e.ref)return oc(t,e,s)}return e.flags|=1,t=jl(i,r),t.ref=e.ref,t.return=e,e.child=t}function Vj(t,e,n,r,s){if(t!==null){var i=t.memoizedProps;if(p0(i,r)&&t.ref===e.ref)if(Cs=!1,e.pendingProps=r=i,(t.lanes&s)!==0)t.flags&131072&&(Cs=!0);else return e.lanes=t.lanes,oc(t,e,s)}return rC(t,e,n,r,s)}function zj(t,e,n){var r=e.pendingProps,s=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Qt(uf,qs),qs|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Qt(uf,qs),qs|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,Qt(uf,qs),qs|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,Qt(uf,qs),qs|=r;return Vr(t,e,s,n),e.child}function Wj(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function rC(t,e,n,r,s){var i=ks(n)?_d:jr.current;return i=Sp(e,i),Cf(e,s),n=a6(t,e,n,r,i,s),r=o6(),t!==null&&!Cs?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,oc(t,e,s)):(sn&&r&&GT(e),e.flags|=1,Vr(t,e,n,s),e.child)}function ok(t,e,n,r,s){if(ks(n)){var i=!0;Ux(e)}else i=!1;if(Cf(e,s),e.stateNode===null)Vb(t,e),$j(e,n,r),tC(e,n,r,s),r=!0;else if(t===null){var a=e.stateNode,o=e.memoizedProps;a.props=o;var l=a.context,u=n.contextType;typeof u=="object"&&u!==null?u=Si(u):(u=ks(n)?_d:jr.current,u=Sp(e,u));var d=n.getDerivedStateFromProps,h=typeof d=="function"||typeof a.getSnapshotBeforeUpdate=="function";h||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(o!==r||l!==u)&&tk(e,a,r,u),Vc=!1;var f=e.memoizedState;a.state=f,Fx(e,r,a,s),l=e.memoizedState,o!==r||f!==l||Ss.current||Vc?(typeof d=="function"&&(eC(e,n,d,r),l=e.memoizedState),(o=Vc||ek(e,n,o,r,f,l,u))?(h||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(e.flags|=4194308)):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),a.props=r,a.state=l,a.context=u,r=o):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{a=e.stateNode,bj(t,e),o=e.memoizedProps,u=e.type===e.elementType?o:Wi(e.type,o),a.props=u,h=e.pendingProps,f=a.context,l=n.contextType,typeof l=="object"&&l!==null?l=Si(l):(l=ks(n)?_d:jr.current,l=Sp(e,l));var p=n.getDerivedStateFromProps;(d=typeof p=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(o!==h||f!==l)&&tk(e,a,r,l),Vc=!1,f=e.memoizedState,a.state=f,Fx(e,r,a,s);var g=e.memoizedState;o!==h||f!==g||Ss.current||Vc?(typeof p=="function"&&(eC(e,n,p,r),g=e.memoizedState),(u=Vc||ek(e,n,u,r,f,g,l)||!1)?(d||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(r,g,l),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(r,g,l)),typeof a.componentDidUpdate=="function"&&(e.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof a.componentDidUpdate!="function"||o===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||o===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=g),a.props=r,a.state=g,a.context=l,r=u):(typeof a.componentDidUpdate!="function"||o===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||o===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),r=!1)}return sC(t,e,n,r,i,s)}function sC(t,e,n,r,s,i){Wj(t,e);var a=(e.flags&128)!==0;if(!r&&!a)return s&&q5(e,n,!1),oc(t,e,i);r=e.stateNode,RF.current=e;var o=a&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&a?(e.child=_p(e,t.child,null,i),e.child=_p(e,null,o,i)):Vr(t,e,o,i),e.memoizedState=r.state,s&&q5(e,n,!0),e.child}function qj(t){var e=t.stateNode;e.pendingContext?W5(t,e.pendingContext,e.pendingContext!==e.context):e.context&&W5(t,e.context,!1),n6(t,e.containerInfo)}function ck(t,e,n,r,s){return kp(),QT(s),e.flags|=256,Vr(t,e,n,r),e.child}var iC={dehydrated:null,treeContext:null,retryLane:0};function aC(t){return{baseLanes:t,cachePool:null,transitions:null}}function Kj(t,e,n){var r=e.pendingProps,s=on.current,i=!1,a=(e.flags&128)!==0,o;if((o=a)||(o=t!==null&&t.memoizedState===null?!1:(s&2)!==0),o?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),Qt(on,s&1),t===null)return ZN(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(a=r.children,t=r.fallback,i?(r=e.mode,i=e.child,a={mode:"hidden",children:a},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=a):i=m1(a,r,0,null),t=yd(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=aC(n),e.memoizedState=iC,t):u6(e,a));if(s=t.memoizedState,s!==null&&(o=s.dehydrated,o!==null))return jF(t,e,a,r,o,s,n);if(i){i=r.fallback,a=e.mode,s=t.child,o=s.sibling;var l={mode:"hidden",children:r.children};return!(a&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=jl(s,l),r.subtreeFlags=s.subtreeFlags&14680064),o!==null?i=jl(o,i):(i=yd(i,a,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,a=t.child.memoizedState,a=a===null?aC(n):{baseLanes:a.baseLanes|n,cachePool:null,transitions:a.transitions},i.memoizedState=a,i.childLanes=t.childLanes&~n,e.memoizedState=iC,r}return i=t.child,t=i.sibling,r=jl(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function u6(t,e){return e=m1({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Lw(t,e,n,r){return r!==null&&QT(r),_p(e,t.child,null,n),t=u6(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function jF(t,e,n,r,s,i,a){if(n)return e.flags&256?(e.flags&=-257,r=qE(Error(ce(422))),Lw(t,e,a,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=m1({mode:"visible",children:r.children},s,0,null),i=yd(i,s,a,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&_p(e,t.child,null,a),e.child.memoizedState=aC(a),e.memoizedState=iC,i);if(!(e.mode&1))return Lw(t,e,a,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var o=r.dgst;return r=o,i=Error(ce(419)),r=qE(i,r,void 0),Lw(t,e,a,r)}if(o=(a&t.childLanes)!==0,Cs||o){if(r=Yn,r!==null){switch(a&-a){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|a)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,ac(t,s),ca(r,t,s,-1))}return g6(),r=qE(Error(ce(421))),Lw(t,e,a,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=qF.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,Qs=_l(s.nextSibling),Zs=e,sn=!0,ea=null,t!==null&&(Ei[Ni++]=Ko,Ei[Ni++]=Go,Ei[Ni++]=Id,Ko=t.id,Go=t.overflow,Id=e),e=u6(e,r.children),e.flags|=4096,e)}function lk(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),XN(t.return,e,n)}function KE(t,e,n,r,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function Gj(t,e,n){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(Vr(t,e,r.children,n),r=on.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&lk(t,n,e);else if(t.tag===19)lk(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Qt(on,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&Hx(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),KE(e,!1,s,n,i);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&Hx(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}KE(e,!0,n,null,i);break;case"together":KE(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Vb(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function oc(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Rd|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(ce(153));if(e.child!==null){for(t=e.child,n=jl(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=jl(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function OF(t,e,n){switch(e.tag){case 3:qj(e),kp();break;case 5:xj(e);break;case 1:ks(e.type)&&Ux(e);break;case 4:n6(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;Qt(Bx,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Qt(on,on.current&1),e.flags|=128,null):n&e.child.childLanes?Kj(t,e,n):(Qt(on,on.current&1),t=oc(t,e,n),t!==null?t.sibling:null);Qt(on,on.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return Gj(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),Qt(on,on.current),r)break;return null;case 22:case 23:return e.lanes=0,zj(t,e,n)}return oc(t,e,n)}var Yj,oC,Qj,Jj;Yj=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};oC=function(){};Qj=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,Ou(eo.current);var i=null;switch(n){case"input":s=_N(t,s),r=_N(t,r),i=[];break;case"select":s=dn({},s,{value:void 0}),r=dn({},r,{value:void 0}),i=[];break;case"textarea":s=RN(t,s),r=RN(t,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Ox)}ON(n,r);var a;n=null;for(u in s)if(!r.hasOwnProperty(u)&&s.hasOwnProperty(u)&&s[u]!=null)if(u==="style"){var o=s[u];for(a in o)o.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(o0.hasOwnProperty(u)?i||(i=[]):(i=i||[]).push(u,null));for(u in r){var l=r[u];if(o=s!=null?s[u]:void 0,r.hasOwnProperty(u)&&l!==o&&(l!=null||o!=null))if(u==="style")if(o){for(a in o)!o.hasOwnProperty(a)||l&&l.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in l)l.hasOwnProperty(a)&&o[a]!==l[a]&&(n||(n={}),n[a]=l[a])}else n||(i||(i=[]),i.push(u,n)),n=l;else u==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,o=o?o.__html:void 0,l!=null&&o!==l&&(i=i||[]).push(u,l)):u==="children"?typeof l!="string"&&typeof l!="number"||(i=i||[]).push(u,""+l):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(o0.hasOwnProperty(u)?(l!=null&&u==="onScroll"&&Zt("scroll",t),i||o===l||(i=[])):(i=i||[]).push(u,l))}n&&(i=i||[]).push("style",n);var u=i;(e.updateQueue=u)&&(e.flags|=4)}};Jj=function(t,e,n,r){n!==r&&(e.flags|=4)};function Pm(t,e){if(!sn)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function yr(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function DF(t,e,n){var r=e.pendingProps;switch(YT(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return yr(e),null;case 1:return ks(e.type)&&Dx(),yr(e),null;case 3:return r=e.stateNode,Ip(),en(Ss),en(jr),s6(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Uw(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,ea!==null&&(mC(ea),ea=null))),oC(t,e),yr(e),null;case 5:r6(e);var s=Ou(b0.current);if(n=e.type,t!==null&&e.stateNode!=null)Qj(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(ce(166));return yr(e),null}if(t=Ou(eo.current),Uw(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[qa]=e,r[y0]=i,t=(e.mode&1)!==0,n){case"dialog":Zt("cancel",r),Zt("close",r);break;case"iframe":case"object":case"embed":Zt("load",r);break;case"video":case"audio":for(s=0;s<dg.length;s++)Zt(dg[s],r);break;case"source":Zt("error",r);break;case"img":case"image":case"link":Zt("error",r),Zt("load",r);break;case"details":Zt("toggle",r);break;case"input":w5(r,i),Zt("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},Zt("invalid",r);break;case"textarea":x5(r,i),Zt("invalid",r)}ON(n,i),s=null;for(var a in i)if(i.hasOwnProperty(a)){var o=i[a];a==="children"?typeof o=="string"?r.textContent!==o&&(i.suppressHydrationWarning!==!0&&Dw(r.textContent,o,t),s=["children",o]):typeof o=="number"&&r.textContent!==""+o&&(i.suppressHydrationWarning!==!0&&Dw(r.textContent,o,t),s=["children",""+o]):o0.hasOwnProperty(a)&&o!=null&&a==="onScroll"&&Zt("scroll",r)}switch(n){case"input":Sw(r),b5(r,i,!0);break;case"textarea":Sw(r),v5(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=Ox)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{a=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=A4(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=a.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=a.createElement(n,{is:r.is}):(t=a.createElement(n),n==="select"&&(a=t,r.multiple?a.multiple=!0:r.size&&(a.size=r.size))):t=a.createElementNS(t,n),t[qa]=e,t[y0]=r,Yj(t,e,!1,!1),e.stateNode=t;e:{switch(a=DN(n,r),n){case"dialog":Zt("cancel",t),Zt("close",t),s=r;break;case"iframe":case"object":case"embed":Zt("load",t),s=r;break;case"video":case"audio":for(s=0;s<dg.length;s++)Zt(dg[s],t);s=r;break;case"source":Zt("error",t),s=r;break;case"img":case"image":case"link":Zt("error",t),Zt("load",t),s=r;break;case"details":Zt("toggle",t),s=r;break;case"input":w5(t,r),s=_N(t,r),Zt("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=dn({},r,{value:void 0}),Zt("invalid",t);break;case"textarea":x5(t,r),s=RN(t,r),Zt("invalid",t);break;default:s=r}ON(n,s),o=s;for(i in o)if(o.hasOwnProperty(i)){var l=o[i];i==="style"?k4(t,l):i==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&T4(t,l)):i==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&c0(t,l):typeof l=="number"&&c0(t,""+l):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(o0.hasOwnProperty(i)?l!=null&&i==="onScroll"&&Zt("scroll",t):l!=null&&OT(t,i,l,a))}switch(n){case"input":Sw(t),b5(t,r,!1);break;case"textarea":Sw(t),v5(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Hl(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?xf(t,!!r.multiple,i,!1):r.defaultValue!=null&&xf(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=Ox)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return yr(e),null;case 6:if(t&&e.stateNode!=null)Jj(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(ce(166));if(n=Ou(b0.current),Ou(eo.current),Uw(e)){if(r=e.stateNode,n=e.memoizedProps,r[qa]=e,(i=r.nodeValue!==n)&&(t=Zs,t!==null))switch(t.tag){case 3:Dw(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Dw(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[qa]=e,e.stateNode=r}return yr(e),null;case 13:if(en(on),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(sn&&Qs!==null&&e.mode&1&&!(e.flags&128))mj(),kp(),e.flags|=98560,i=!1;else if(i=Uw(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error(ce(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(ce(317));i[qa]=e}else kp(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;yr(e),i=!1}else ea!==null&&(mC(ea),ea=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||on.current&1?Dn===0&&(Dn=3):g6())),e.updateQueue!==null&&(e.flags|=4),yr(e),null);case 4:return Ip(),oC(t,e),t===null&&m0(e.stateNode.containerInfo),yr(e),null;case 10:return XT(e.type._context),yr(e),null;case 17:return ks(e.type)&&Dx(),yr(e),null;case 19:if(en(on),i=e.memoizedState,i===null)return yr(e),null;if(r=(e.flags&128)!==0,a=i.rendering,a===null)if(r)Pm(i,!1);else{if(Dn!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(a=Hx(t),a!==null){for(e.flags|=128,Pm(i,!1),r=a.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,a=i.alternate,a===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=a.childLanes,i.lanes=a.lanes,i.child=a.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=a.memoizedProps,i.memoizedState=a.memoizedState,i.updateQueue=a.updateQueue,i.type=a.type,t=a.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Qt(on,on.current&1|2),e.child}t=t.sibling}i.tail!==null&&wn()>Rp&&(e.flags|=128,r=!0,Pm(i,!1),e.lanes=4194304)}else{if(!r)if(t=Hx(a),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Pm(i,!0),i.tail===null&&i.tailMode==="hidden"&&!a.alternate&&!sn)return yr(e),null}else 2*wn()-i.renderingStartTime>Rp&&n!==1073741824&&(e.flags|=128,r=!0,Pm(i,!1),e.lanes=4194304);i.isBackwards?(a.sibling=e.child,e.child=a):(n=i.last,n!==null?n.sibling=a:e.child=a,i.last=a)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=wn(),e.sibling=null,n=on.current,Qt(on,r?n&1|2:n&1),e):(yr(e),null);case 22:case 23:return m6(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?qs&1073741824&&(yr(e),e.subtreeFlags&6&&(e.flags|=8192)):yr(e),null;case 24:return null;case 25:return null}throw Error(ce(156,e.tag))}function UF(t,e){switch(YT(e),e.tag){case 1:return ks(e.type)&&Dx(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Ip(),en(Ss),en(jr),s6(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return r6(e),null;case 13:if(en(on),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(ce(340));kp()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return en(on),null;case 4:return Ip(),null;case 10:return XT(e.type._context),null;case 22:case 23:return m6(),null;case 24:return null;default:return null}}var Bw=!1,Sr=!1,MF=typeof WeakSet=="function"?WeakSet:Set,ke=null;function lf(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){pn(t,e,r)}else n.current=null}function cC(t,e,n){try{n()}catch(r){pn(t,e,r)}}var uk=!1;function LF(t,e){if(WN=Px,t=nj(),KT(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var a=0,o=-1,l=-1,u=0,d=0,h=t,f=null;t:for(;;){for(var p;h!==n||s!==0&&h.nodeType!==3||(o=a+s),h!==i||r!==0&&h.nodeType!==3||(l=a+r),h.nodeType===3&&(a+=h.nodeValue.length),(p=h.firstChild)!==null;)f=h,h=p;for(;;){if(h===t)break t;if(f===n&&++u===s&&(o=a),f===i&&++d===r&&(l=a),(p=h.nextSibling)!==null)break;h=f,f=h.parentNode}h=p}n=o===-1||l===-1?null:{start:o,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(qN={focusedElem:t,selectionRange:n},Px=!1,ke=e;ke!==null;)if(e=ke,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,ke=t;else for(;ke!==null;){e=ke;try{var g=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(g!==null){var m=g.memoizedProps,y=g.memoizedState,b=e.stateNode,w=b.getSnapshotBeforeUpdate(e.elementType===e.type?m:Wi(e.type,m),y);b.__reactInternalSnapshotBeforeUpdate=w}break;case 3:var x=e.stateNode.containerInfo;x.nodeType===1?x.textContent="":x.nodeType===9&&x.documentElement&&x.removeChild(x.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(ce(163))}}catch(A){pn(e,e.return,A)}if(t=e.sibling,t!==null){t.return=e.return,ke=t;break}ke=e.return}return g=uk,uk=!1,g}function Mg(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&cC(e,n,i)}s=s.next}while(s!==r)}}function f1(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function lC(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function Zj(t){var e=t.alternate;e!==null&&(t.alternate=null,Zj(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[qa],delete e[y0],delete e[YN],delete e[xF],delete e[vF])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function Xj(t){return t.tag===5||t.tag===3||t.tag===4}function dk(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Xj(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function uC(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Ox));else if(r!==4&&(t=t.child,t!==null))for(uC(t,e,n),t=t.sibling;t!==null;)uC(t,e,n),t=t.sibling}function dC(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(dC(t,e,n),t=t.sibling;t!==null;)dC(t,e,n),t=t.sibling}var rr=null,Xi=!1;function Ec(t,e,n){for(n=n.child;n!==null;)eO(t,e,n),n=n.sibling}function eO(t,e,n){if(Xa&&typeof Xa.onCommitFiberUnmount=="function")try{Xa.onCommitFiberUnmount(i1,n)}catch{}switch(n.tag){case 5:Sr||lf(n,e);case 6:var r=rr,s=Xi;rr=null,Ec(t,e,n),rr=r,Xi=s,rr!==null&&(Xi?(t=rr,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):rr.removeChild(n.stateNode));break;case 18:rr!==null&&(Xi?(t=rr,n=n.stateNode,t.nodeType===8?$E(t.parentNode,n):t.nodeType===1&&$E(t,n),h0(t)):$E(rr,n.stateNode));break;case 4:r=rr,s=Xi,rr=n.stateNode.containerInfo,Xi=!0,Ec(t,e,n),rr=r,Xi=s;break;case 0:case 11:case 14:case 15:if(!Sr&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,a=i.destroy;i=i.tag,a!==void 0&&(i&2||i&4)&&cC(n,e,a),s=s.next}while(s!==r)}Ec(t,e,n);break;case 1:if(!Sr&&(lf(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(o){pn(n,e,o)}Ec(t,e,n);break;case 21:Ec(t,e,n);break;case 22:n.mode&1?(Sr=(r=Sr)||n.memoizedState!==null,Ec(t,e,n),Sr=r):Ec(t,e,n);break;default:Ec(t,e,n)}}function hk(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new MF),e.forEach(function(r){var s=KF.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function Di(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=t,a=e,o=a;e:for(;o!==null;){switch(o.tag){case 5:rr=o.stateNode,Xi=!1;break e;case 3:rr=o.stateNode.containerInfo,Xi=!0;break e;case 4:rr=o.stateNode.containerInfo,Xi=!0;break e}o=o.return}if(rr===null)throw Error(ce(160));eO(i,a,s),rr=null,Xi=!1;var l=s.alternate;l!==null&&(l.return=null),s.return=null}catch(u){pn(s,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)tO(e,t),e=e.sibling}function tO(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Di(e,t),xa(t),r&4){try{Mg(3,t,t.return),f1(3,t)}catch(m){pn(t,t.return,m)}try{Mg(5,t,t.return)}catch(m){pn(t,t.return,m)}}break;case 1:Di(e,t),xa(t),r&512&&n!==null&&lf(n,n.return);break;case 5:if(Di(e,t),xa(t),r&512&&n!==null&&lf(n,n.return),t.flags&32){var s=t.stateNode;try{c0(s,"")}catch(m){pn(t,t.return,m)}}if(r&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,a=n!==null?n.memoizedProps:i,o=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{o==="input"&&i.type==="radio"&&i.name!=null&&N4(s,i),DN(o,a);var u=DN(o,i);for(a=0;a<l.length;a+=2){var d=l[a],h=l[a+1];d==="style"?k4(s,h):d==="dangerouslySetInnerHTML"?T4(s,h):d==="children"?c0(s,h):OT(s,d,h,u)}switch(o){case"input":IN(s,i);break;case"textarea":C4(s,i);break;case"select":var f=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var p=i.value;p!=null?xf(s,!!i.multiple,p,!1):f!==!!i.multiple&&(i.defaultValue!=null?xf(s,!!i.multiple,i.defaultValue,!0):xf(s,!!i.multiple,i.multiple?[]:"",!1))}s[y0]=i}catch(m){pn(t,t.return,m)}}break;case 6:if(Di(e,t),xa(t),r&4){if(t.stateNode===null)throw Error(ce(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(m){pn(t,t.return,m)}}break;case 3:if(Di(e,t),xa(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{h0(e.containerInfo)}catch(m){pn(t,t.return,m)}break;case 4:Di(e,t),xa(t);break;case 13:Di(e,t),xa(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(f6=wn())),r&4&&hk(t);break;case 22:if(d=n!==null&&n.memoizedState!==null,t.mode&1?(Sr=(u=Sr)||d,Di(e,t),Sr=u):Di(e,t),xa(t),r&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!d&&t.mode&1)for(ke=t,d=t.child;d!==null;){for(h=ke=d;ke!==null;){switch(f=ke,p=f.child,f.tag){case 0:case 11:case 14:case 15:Mg(4,f,f.return);break;case 1:lf(f,f.return);var g=f.stateNode;if(typeof g.componentWillUnmount=="function"){r=f,n=f.return;try{e=r,g.props=e.memoizedProps,g.state=e.memoizedState,g.componentWillUnmount()}catch(m){pn(r,n,m)}}break;case 5:lf(f,f.return);break;case 22:if(f.memoizedState!==null){pk(h);continue}}p!==null?(p.return=f,ke=p):pk(h)}d=d.sibling}e:for(d=null,h=t;;){if(h.tag===5){if(d===null){d=h;try{s=h.stateNode,u?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(o=h.stateNode,l=h.memoizedProps.style,a=l!=null&&l.hasOwnProperty("display")?l.display:null,o.style.display=S4("display",a))}catch(m){pn(t,t.return,m)}}}else if(h.tag===6){if(d===null)try{h.stateNode.nodeValue=u?"":h.memoizedProps}catch(m){pn(t,t.return,m)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===t)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===t)break e;for(;h.sibling===null;){if(h.return===null||h.return===t)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:Di(e,t),xa(t),r&4&&hk(t);break;case 21:break;default:Di(e,t),xa(t)}}function xa(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(Xj(n)){var r=n;break e}n=n.return}throw Error(ce(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(c0(s,""),r.flags&=-33);var i=dk(t);dC(t,i,s);break;case 3:case 4:var a=r.stateNode.containerInfo,o=dk(t);uC(t,o,a);break;default:throw Error(ce(161))}}catch(l){pn(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function BF(t,e,n){ke=t,nO(t)}function nO(t,e,n){for(var r=(t.mode&1)!==0;ke!==null;){var s=ke,i=s.child;if(s.tag===22&&r){var a=s.memoizedState!==null||Bw;if(!a){var o=s.alternate,l=o!==null&&o.memoizedState!==null||Sr;o=Bw;var u=Sr;if(Bw=a,(Sr=l)&&!u)for(ke=s;ke!==null;)a=ke,l=a.child,a.tag===22&&a.memoizedState!==null?mk(s):l!==null?(l.return=a,ke=l):mk(s);for(;i!==null;)ke=i,nO(i),i=i.sibling;ke=s,Bw=o,Sr=u}fk(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,ke=i):fk(t)}}function fk(t){for(;ke!==null;){var e=ke;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Sr||f1(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Sr)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:Wi(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&J5(e,i,r);break;case 3:var a=e.updateQueue;if(a!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}J5(e,a,n)}break;case 5:var o=e.stateNode;if(n===null&&e.flags&4){n=o;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var d=u.memoizedState;if(d!==null){var h=d.dehydrated;h!==null&&h0(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(ce(163))}Sr||e.flags&512&&lC(e)}catch(f){pn(e,e.return,f)}}if(e===t){ke=null;break}if(n=e.sibling,n!==null){n.return=e.return,ke=n;break}ke=e.return}}function pk(t){for(;ke!==null;){var e=ke;if(e===t){ke=null;break}var n=e.sibling;if(n!==null){n.return=e.return,ke=n;break}ke=e.return}}function mk(t){for(;ke!==null;){var e=ke;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{f1(4,e)}catch(l){pn(e,n,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(l){pn(e,s,l)}}var i=e.return;try{lC(e)}catch(l){pn(e,i,l)}break;case 5:var a=e.return;try{lC(e)}catch(l){pn(e,a,l)}}}catch(l){pn(e,e.return,l)}if(e===t){ke=null;break}var o=e.sibling;if(o!==null){o.return=e.return,ke=o;break}ke=e.return}}var $F=Math.ceil,Wx=wc.ReactCurrentDispatcher,d6=wc.ReactCurrentOwner,Ti=wc.ReactCurrentBatchConfig,mt=0,Yn=null,An=null,lr=0,qs=0,uf=eu(0),Dn=0,N0=null,Rd=0,p1=0,h6=0,Lg=null,Es=null,f6=0,Rp=1/0,ko=null,qx=!1,hC=null,Pl=null,$w=!1,vl=null,Kx=0,Bg=0,fC=null,zb=-1,Wb=0;function Zr(){return mt&6?wn():zb!==-1?zb:zb=wn()}function Rl(t){return t.mode&1?mt&2&&lr!==0?lr&-lr:NF.transition!==null?(Wb===0&&(Wb=$4()),Wb):(t=Lt,t!==0||(t=window.event,t=t===void 0?16:K4(t.type)),t):1}function ca(t,e,n,r){if(50<Bg)throw Bg=0,fC=null,Error(ce(185));Vy(t,n,r),(!(mt&2)||t!==Yn)&&(t===Yn&&(!(mt&2)&&(p1|=n),Dn===4&&Jc(t,lr)),_s(t,r),n===1&&mt===0&&!(e.mode&1)&&(Rp=wn()+500,u1&&tu()))}function _s(t,e){var n=t.callbackNode;N7(t,e);var r=Ix(t,t===Yn?lr:0);if(r===0)n!==null&&C5(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&C5(n),e===1)t.tag===0?EF(gk.bind(null,t)):hj(gk.bind(null,t)),wF(function(){!(mt&6)&&tu()}),n=null;else{switch(F4(r)){case 1:n=BT;break;case 4:n=L4;break;case 16:n=_x;break;case 536870912:n=B4;break;default:n=_x}n=uO(n,rO.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function rO(t,e){if(zb=-1,Wb=0,mt&6)throw Error(ce(327));var n=t.callbackNode;if(Af()&&t.callbackNode!==n)return null;var r=Ix(t,t===Yn?lr:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Gx(t,r);else{e=r;var s=mt;mt|=2;var i=iO();(Yn!==t||lr!==e)&&(ko=null,Rp=wn()+500,gd(t,e));do try{VF();break}catch(o){sO(t,o)}while(!0);ZT(),Wx.current=i,mt=s,An!==null?e=0:(Yn=null,lr=0,e=Dn)}if(e!==0){if(e===2&&(s=$N(t),s!==0&&(r=s,e=pC(t,s))),e===1)throw n=N0,gd(t,0),Jc(t,r),_s(t,wn()),n;if(e===6)Jc(t,r);else{if(s=t.current.alternate,!(r&30)&&!FF(s)&&(e=Gx(t,r),e===2&&(i=$N(t),i!==0&&(r=i,e=pC(t,i))),e===1))throw n=N0,gd(t,0),Jc(t,r),_s(t,wn()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(ce(345));case 2:wu(t,Es,ko);break;case 3:if(Jc(t,r),(r&130023424)===r&&(e=f6+500-wn(),10<e)){if(Ix(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){Zr(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=GN(wu.bind(null,t,Es,ko),e);break}wu(t,Es,ko);break;case 4:if(Jc(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var a=31-oa(r);i=1<<a,a=e[a],a>s&&(s=a),r&=~i}if(r=s,r=wn()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*$F(r/1960))-r,10<r){t.timeoutHandle=GN(wu.bind(null,t,Es,ko),r);break}wu(t,Es,ko);break;case 5:wu(t,Es,ko);break;default:throw Error(ce(329))}}}return _s(t,wn()),t.callbackNode===n?rO.bind(null,t):null}function pC(t,e){var n=Lg;return t.current.memoizedState.isDehydrated&&(gd(t,e).flags|=256),t=Gx(t,e),t!==2&&(e=Es,Es=n,e!==null&&mC(e)),t}function mC(t){Es===null?Es=t:Es.push.apply(Es,t)}function FF(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!fa(i(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Jc(t,e){for(e&=~h6,e&=~p1,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-oa(e),r=1<<n;t[n]=-1,e&=~r}}function gk(t){if(mt&6)throw Error(ce(327));Af();var e=Ix(t,0);if(!(e&1))return _s(t,wn()),null;var n=Gx(t,e);if(t.tag!==0&&n===2){var r=$N(t);r!==0&&(e=r,n=pC(t,r))}if(n===1)throw n=N0,gd(t,0),Jc(t,e),_s(t,wn()),n;if(n===6)throw Error(ce(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,wu(t,Es,ko),_s(t,wn()),null}function p6(t,e){var n=mt;mt|=1;try{return t(e)}finally{mt=n,mt===0&&(Rp=wn()+500,u1&&tu())}}function jd(t){vl!==null&&vl.tag===0&&!(mt&6)&&Af();var e=mt;mt|=1;var n=Ti.transition,r=Lt;try{if(Ti.transition=null,Lt=1,t)return t()}finally{Lt=r,Ti.transition=n,mt=e,!(mt&6)&&tu()}}function m6(){qs=uf.current,en(uf)}function gd(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,yF(n)),An!==null)for(n=An.return;n!==null;){var r=n;switch(YT(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Dx();break;case 3:Ip(),en(Ss),en(jr),s6();break;case 5:r6(r);break;case 4:Ip();break;case 13:en(on);break;case 19:en(on);break;case 10:XT(r.type._context);break;case 22:case 23:m6()}n=n.return}if(Yn=t,An=t=jl(t.current,null),lr=qs=e,Dn=0,N0=null,h6=p1=Rd=0,Es=Lg=null,ju!==null){for(e=0;e<ju.length;e++)if(n=ju[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var a=i.next;i.next=s,r.next=a}n.pending=r}ju=null}return t}function sO(t,e){do{var n=An;try{if(ZT(),Fb.current=zx,Vx){for(var r=ln.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}Vx=!1}if(Pd=0,Hn=jn=ln=null,Ug=!1,x0=0,d6.current=null,n===null||n.return===null){Dn=1,N0=e,An=null;break}e:{var i=t,a=n.return,o=n,l=e;if(e=lr,o.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var u=l,d=o,h=d.tag;if(!(d.mode&1)&&(h===0||h===11||h===15)){var f=d.alternate;f?(d.updateQueue=f.updateQueue,d.memoizedState=f.memoizedState,d.lanes=f.lanes):(d.updateQueue=null,d.memoizedState=null)}var p=rk(a);if(p!==null){p.flags&=-257,sk(p,a,o,i,e),p.mode&1&&nk(i,u,e),e=p,l=u;var g=e.updateQueue;if(g===null){var m=new Set;m.add(l),e.updateQueue=m}else g.add(l);break e}else{if(!(e&1)){nk(i,u,e),g6();break e}l=Error(ce(426))}}else if(sn&&o.mode&1){var y=rk(a);if(y!==null){!(y.flags&65536)&&(y.flags|=256),sk(y,a,o,i,e),QT(Pp(l,o));break e}}i=l=Pp(l,o),Dn!==4&&(Dn=2),Lg===null?Lg=[i]:Lg.push(i),i=a;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var b=Fj(i,l,e);Q5(i,b);break e;case 1:o=l;var w=i.type,x=i.stateNode;if(!(i.flags&128)&&(typeof w.getDerivedStateFromError=="function"||x!==null&&typeof x.componentDidCatch=="function"&&(Pl===null||!Pl.has(x)))){i.flags|=65536,e&=-e,i.lanes|=e;var A=Hj(i,o,e);Q5(i,A);break e}}i=i.return}while(i!==null)}oO(n)}catch(T){e=T,An===n&&n!==null&&(An=n=n.return);continue}break}while(!0)}function iO(){var t=Wx.current;return Wx.current=zx,t===null?zx:t}function g6(){(Dn===0||Dn===3||Dn===2)&&(Dn=4),Yn===null||!(Rd&268435455)&&!(p1&268435455)||Jc(Yn,lr)}function Gx(t,e){var n=mt;mt|=2;var r=iO();(Yn!==t||lr!==e)&&(ko=null,gd(t,e));do try{HF();break}catch(s){sO(t,s)}while(!0);if(ZT(),mt=n,Wx.current=r,An!==null)throw Error(ce(261));return Yn=null,lr=0,Dn}function HF(){for(;An!==null;)aO(An)}function VF(){for(;An!==null&&!p7();)aO(An)}function aO(t){var e=lO(t.alternate,t,qs);t.memoizedProps=t.pendingProps,e===null?oO(t):An=e,d6.current=null}function oO(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=UF(n,e),n!==null){n.flags&=32767,An=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Dn=6,An=null;return}}else if(n=DF(n,e,qs),n!==null){An=n;return}if(e=e.sibling,e!==null){An=e;return}An=e=t}while(e!==null);Dn===0&&(Dn=5)}function wu(t,e,n){var r=Lt,s=Ti.transition;try{Ti.transition=null,Lt=1,zF(t,e,n,r)}finally{Ti.transition=s,Lt=r}return null}function zF(t,e,n,r){do Af();while(vl!==null);if(mt&6)throw Error(ce(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(ce(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(C7(t,i),t===Yn&&(An=Yn=null,lr=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||$w||($w=!0,uO(_x,function(){return Af(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=Ti.transition,Ti.transition=null;var a=Lt;Lt=1;var o=mt;mt|=4,d6.current=null,LF(t,n),tO(n,t),uF(qN),Px=!!WN,qN=WN=null,t.current=n,BF(n),m7(),mt=o,Lt=a,Ti.transition=i}else t.current=n;if($w&&($w=!1,vl=t,Kx=s),i=t.pendingLanes,i===0&&(Pl=null),w7(n.stateNode),_s(t,wn()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(qx)throw qx=!1,t=hC,hC=null,t;return Kx&1&&t.tag!==0&&Af(),i=t.pendingLanes,i&1?t===fC?Bg++:(Bg=0,fC=t):Bg=0,tu(),null}function Af(){if(vl!==null){var t=F4(Kx),e=Ti.transition,n=Lt;try{if(Ti.transition=null,Lt=16>t?16:t,vl===null)var r=!1;else{if(t=vl,vl=null,Kx=0,mt&6)throw Error(ce(331));var s=mt;for(mt|=4,ke=t.current;ke!==null;){var i=ke,a=i.child;if(ke.flags&16){var o=i.deletions;if(o!==null){for(var l=0;l<o.length;l++){var u=o[l];for(ke=u;ke!==null;){var d=ke;switch(d.tag){case 0:case 11:case 15:Mg(8,d,i)}var h=d.child;if(h!==null)h.return=d,ke=h;else for(;ke!==null;){d=ke;var f=d.sibling,p=d.return;if(Zj(d),d===u){ke=null;break}if(f!==null){f.return=p,ke=f;break}ke=p}}}var g=i.alternate;if(g!==null){var m=g.child;if(m!==null){g.child=null;do{var y=m.sibling;m.sibling=null,m=y}while(m!==null)}}ke=i}}if(i.subtreeFlags&2064&&a!==null)a.return=i,ke=a;else e:for(;ke!==null;){if(i=ke,i.flags&2048)switch(i.tag){case 0:case 11:case 15:Mg(9,i,i.return)}var b=i.sibling;if(b!==null){b.return=i.return,ke=b;break e}ke=i.return}}var w=t.current;for(ke=w;ke!==null;){a=ke;var x=a.child;if(a.subtreeFlags&2064&&x!==null)x.return=a,ke=x;else e:for(a=w;ke!==null;){if(o=ke,o.flags&2048)try{switch(o.tag){case 0:case 11:case 15:f1(9,o)}}catch(T){pn(o,o.return,T)}if(o===a){ke=null;break e}var A=o.sibling;if(A!==null){A.return=o.return,ke=A;break e}ke=o.return}}if(mt=s,tu(),Xa&&typeof Xa.onPostCommitFiberRoot=="function")try{Xa.onPostCommitFiberRoot(i1,t)}catch{}r=!0}return r}finally{Lt=n,Ti.transition=e}}return!1}function yk(t,e,n){e=Pp(n,e),e=Fj(t,e,1),t=Il(t,e,1),e=Zr(),t!==null&&(Vy(t,1,e),_s(t,e))}function pn(t,e,n){if(t.tag===3)yk(t,t,n);else for(;e!==null;){if(e.tag===3){yk(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Pl===null||!Pl.has(r))){t=Pp(n,t),t=Hj(e,t,1),e=Il(e,t,1),t=Zr(),e!==null&&(Vy(e,1,t),_s(e,t));break}}e=e.return}}function WF(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Zr(),t.pingedLanes|=t.suspendedLanes&n,Yn===t&&(lr&n)===n&&(Dn===4||Dn===3&&(lr&130023424)===lr&&500>wn()-f6?gd(t,0):h6|=n),_s(t,e)}function cO(t,e){e===0&&(t.mode&1?(e=Iw,Iw<<=1,!(Iw&130023424)&&(Iw=4194304)):e=1);var n=Zr();t=ac(t,e),t!==null&&(Vy(t,e,n),_s(t,n))}function qF(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),cO(t,n)}function KF(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(ce(314))}r!==null&&r.delete(e),cO(t,n)}var lO;lO=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Ss.current)Cs=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Cs=!1,OF(t,e,n);Cs=!!(t.flags&131072)}else Cs=!1,sn&&e.flags&1048576&&fj(e,Lx,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Vb(t,e),t=e.pendingProps;var s=Sp(e,jr.current);Cf(e,n),s=a6(null,e,r,t,s,n);var i=o6();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,ks(r)?(i=!0,Ux(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,t6(e),s.updater=h1,e.stateNode=s,s._reactInternals=e,tC(e,r,t,n),e=sC(null,e,r,!0,i,n)):(e.tag=0,sn&&i&&GT(e),Vr(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Vb(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=YF(r),t=Wi(r,t),s){case 0:e=rC(null,e,r,t,n);break e;case 1:e=ok(null,e,r,t,n);break e;case 11:e=ik(null,e,r,t,n);break e;case 14:e=ak(null,e,r,Wi(r.type,t),n);break e}throw Error(ce(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Wi(r,s),rC(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Wi(r,s),ok(t,e,r,s,n);case 3:e:{if(qj(e),t===null)throw Error(ce(387));r=e.pendingProps,i=e.memoizedState,s=i.element,bj(t,e),Fx(e,r,null,n);var a=e.memoizedState;if(r=a.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=Pp(Error(ce(423)),e),e=ck(t,e,r,n,s);break e}else if(r!==s){s=Pp(Error(ce(424)),e),e=ck(t,e,r,n,s);break e}else for(Qs=_l(e.stateNode.containerInfo.firstChild),Zs=e,sn=!0,ea=null,n=yj(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(kp(),r===s){e=oc(t,e,n);break e}Vr(t,e,r,n)}e=e.child}return e;case 5:return xj(e),t===null&&ZN(e),r=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,a=s.children,KN(r,s)?a=null:i!==null&&KN(r,i)&&(e.flags|=32),Wj(t,e),Vr(t,e,a,n),e.child;case 6:return t===null&&ZN(e),null;case 13:return Kj(t,e,n);case 4:return n6(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=_p(e,null,r,n):Vr(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Wi(r,s),ik(t,e,r,s,n);case 7:return Vr(t,e,e.pendingProps,n),e.child;case 8:return Vr(t,e,e.pendingProps.children,n),e.child;case 12:return Vr(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,a=s.value,Qt(Bx,r._currentValue),r._currentValue=a,i!==null)if(fa(i.value,a)){if(i.children===s.children&&!Ss.current){e=oc(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var o=i.dependencies;if(o!==null){a=i.child;for(var l=o.firstContext;l!==null;){if(l.context===r){if(i.tag===1){l=Zo(-1,n&-n),l.tag=2;var u=i.updateQueue;if(u!==null){u=u.shared;var d=u.pending;d===null?l.next=l:(l.next=d.next,d.next=l),u.pending=l}}i.lanes|=n,l=i.alternate,l!==null&&(l.lanes|=n),XN(i.return,n,e),o.lanes|=n;break}l=l.next}}else if(i.tag===10)a=i.type===e.type?null:i.child;else if(i.tag===18){if(a=i.return,a===null)throw Error(ce(341));a.lanes|=n,o=a.alternate,o!==null&&(o.lanes|=n),XN(a,n,e),a=i.sibling}else a=i.child;if(a!==null)a.return=i;else for(a=i;a!==null;){if(a===e){a=null;break}if(i=a.sibling,i!==null){i.return=a.return,a=i;break}a=a.return}i=a}Vr(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,Cf(e,n),s=Si(s),r=r(s),e.flags|=1,Vr(t,e,r,n),e.child;case 14:return r=e.type,s=Wi(r,e.pendingProps),s=Wi(r.type,s),ak(t,e,r,s,n);case 15:return Vj(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Wi(r,s),Vb(t,e),e.tag=1,ks(r)?(t=!0,Ux(e)):t=!1,Cf(e,n),$j(e,r,s),tC(e,r,s,n),sC(null,e,r,!0,t,n);case 19:return Gj(t,e,n);case 22:return zj(t,e,n)}throw Error(ce(156,e.tag))};function uO(t,e){return M4(t,e)}function GF(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ci(t,e,n,r){return new GF(t,e,n,r)}function y6(t){return t=t.prototype,!(!t||!t.isReactComponent)}function YF(t){if(typeof t=="function")return y6(t)?1:0;if(t!=null){if(t=t.$$typeof,t===UT)return 11;if(t===MT)return 14}return 2}function jl(t,e){var n=t.alternate;return n===null?(n=Ci(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function qb(t,e,n,r,s,i){var a=2;if(r=t,typeof t=="function")y6(t)&&(a=1);else if(typeof t=="string")a=5;else e:switch(t){case Xh:return yd(n.children,s,i,e);case DT:a=8,s|=8;break;case AN:return t=Ci(12,n,e,s|2),t.elementType=AN,t.lanes=i,t;case TN:return t=Ci(13,n,e,s),t.elementType=TN,t.lanes=i,t;case SN:return t=Ci(19,n,e,s),t.elementType=SN,t.lanes=i,t;case x4:return m1(n,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case w4:a=10;break e;case b4:a=9;break e;case UT:a=11;break e;case MT:a=14;break e;case Hc:a=16,r=null;break e}throw Error(ce(130,t==null?t:typeof t,""))}return e=Ci(a,n,e,s),e.elementType=t,e.type=r,e.lanes=i,e}function yd(t,e,n,r){return t=Ci(7,t,r,e),t.lanes=n,t}function m1(t,e,n,r){return t=Ci(22,t,r,e),t.elementType=x4,t.lanes=n,t.stateNode={isHidden:!1},t}function GE(t,e,n){return t=Ci(6,t,null,e),t.lanes=n,t}function YE(t,e,n){return e=Ci(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function QF(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=_E(0),this.expirationTimes=_E(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=_E(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function w6(t,e,n,r,s,i,a,o,l){return t=new QF(t,e,n,o,l),e===1?(e=1,i===!0&&(e|=8)):e=0,i=Ci(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},t6(i),t}function JF(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Zh,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function dO(t){if(!t)return Vl;t=t._reactInternals;e:{if(th(t)!==t||t.tag!==1)throw Error(ce(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(ks(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(ce(171))}if(t.tag===1){var n=t.type;if(ks(n))return dj(t,n,e)}return e}function hO(t,e,n,r,s,i,a,o,l){return t=w6(n,r,!0,t,s,i,a,o,l),t.context=dO(null),n=t.current,r=Zr(),s=Rl(n),i=Zo(r,s),i.callback=e??null,Il(n,i,s),t.current.lanes=s,Vy(t,s,r),_s(t,r),t}function g1(t,e,n,r){var s=e.current,i=Zr(),a=Rl(s);return n=dO(n),e.context===null?e.context=n:e.pendingContext=n,e=Zo(i,a),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Il(s,e,a),t!==null&&(ca(t,s,a,i),$b(t,s,a)),a}function Yx(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function wk(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function b6(t,e){wk(t,e),(t=t.alternate)&&wk(t,e)}function ZF(){return null}var fO=typeof reportError=="function"?reportError:function(t){console.error(t)};function x6(t){this._internalRoot=t}y1.prototype.render=x6.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(ce(409));g1(t,e,null,null)};y1.prototype.unmount=x6.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;jd(function(){g1(null,t,null,null)}),e[ic]=null}};function y1(t){this._internalRoot=t}y1.prototype.unstable_scheduleHydration=function(t){if(t){var e=z4();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Qc.length&&e!==0&&e<Qc[n].priority;n++);Qc.splice(n,0,t),n===0&&q4(t)}};function v6(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function w1(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function bk(){}function XF(t,e,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var u=Yx(a);i.call(u)}}var a=hO(e,r,t,0,null,!1,!1,"",bk);return t._reactRootContainer=a,t[ic]=a.current,m0(t.nodeType===8?t.parentNode:t),jd(),a}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var o=r;r=function(){var u=Yx(l);o.call(u)}}var l=w6(t,0,!1,null,null,!1,!1,"",bk);return t._reactRootContainer=l,t[ic]=l.current,m0(t.nodeType===8?t.parentNode:t),jd(function(){g1(e,l,n,r)}),l}function b1(t,e,n,r,s){var i=n._reactRootContainer;if(i){var a=i;if(typeof s=="function"){var o=s;s=function(){var l=Yx(a);o.call(l)}}g1(e,a,t,s)}else a=XF(n,e,t,s,r);return Yx(a)}H4=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=ug(e.pendingLanes);n!==0&&($T(e,n|1),_s(e,wn()),!(mt&6)&&(Rp=wn()+500,tu()))}break;case 13:jd(function(){var r=ac(t,1);if(r!==null){var s=Zr();ca(r,t,1,s)}}),b6(t,1)}};FT=function(t){if(t.tag===13){var e=ac(t,134217728);if(e!==null){var n=Zr();ca(e,t,134217728,n)}b6(t,134217728)}};V4=function(t){if(t.tag===13){var e=Rl(t),n=ac(t,e);if(n!==null){var r=Zr();ca(n,t,e,r)}b6(t,e)}};z4=function(){return Lt};W4=function(t,e){var n=Lt;try{return Lt=t,e()}finally{Lt=n}};MN=function(t,e,n){switch(e){case"input":if(IN(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=l1(r);if(!s)throw Error(ce(90));E4(r),IN(r,s)}}}break;case"textarea":C4(t,n);break;case"select":e=n.value,e!=null&&xf(t,!!n.multiple,e,!1)}};P4=p6;R4=jd;var eH={usingClientEntryPoint:!1,Events:[Wy,rf,l1,_4,I4,p6]},Rm={findFiberByHostInstance:Ru,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},tH={bundleType:Rm.bundleType,version:Rm.version,rendererPackageName:Rm.rendererPackageName,rendererConfig:Rm.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:wc.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=D4(t),t===null?null:t.stateNode},findFiberByHostInstance:Rm.findFiberByHostInstance||ZF,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Fw=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Fw.isDisabled&&Fw.supportsFiber)try{i1=Fw.inject(tH),Xa=Fw}catch{}}ri.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=eH;ri.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!v6(e))throw Error(ce(200));return JF(t,e,null,n)};ri.createRoot=function(t,e){if(!v6(t))throw Error(ce(299));var n=!1,r="",s=fO;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=w6(t,1,!1,null,null,n,!1,r,s),t[ic]=e.current,m0(t.nodeType===8?t.parentNode:t),new x6(e)};ri.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(ce(188)):(t=Object.keys(t).join(","),Error(ce(268,t)));return t=D4(e),t=t===null?null:t.stateNode,t};ri.flushSync=function(t){return jd(t)};ri.hydrate=function(t,e,n){if(!w1(e))throw Error(ce(200));return b1(null,t,e,!0,n)};ri.hydrateRoot=function(t,e,n){if(!v6(t))throw Error(ce(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",a=fO;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(a=n.onRecoverableError)),e=hO(e,null,t,1,n??null,s,!1,i,a),t[ic]=e.current,m0(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new y1(e)};ri.render=function(t,e,n){if(!w1(e))throw Error(ce(200));return b1(null,t,e,!1,n)};ri.unmountComponentAtNode=function(t){if(!w1(t))throw Error(ce(40));return t._reactRootContainer?(jd(function(){b1(null,null,t,!1,function(){t._reactRootContainer=null,t[ic]=null})}),!0):!1};ri.unstable_batchedUpdates=p6;ri.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!w1(n))throw Error(ce(200));if(t==null||t._reactInternals===void 0)throw Error(ce(38));return b1(t,e,n,!1,r)};ri.version="18.3.1-next-f1338f8080-20240426";function pO(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(pO)}catch(t){console.error(t)}}pO(),p4.exports=ri;var mO=p4.exports,gO,xk=mO;gO=xk.createRoot,xk.hydrateRoot;/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function C0(){return C0=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},C0.apply(this,arguments)}var El;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(El||(El={}));const vk="popstate";function nH(t){t===void 0&&(t={});function e(r,s){let{pathname:i,search:a,hash:o}=r.location;return gC("",{pathname:i,search:a,hash:o},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(r,s){return typeof s=="string"?s:Qx(s)}return sH(e,n,null,t)}function Sn(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function yO(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function rH(){return Math.random().toString(36).substr(2,8)}function Ek(t,e){return{usr:t.state,key:t.key,idx:e}}function gC(t,e,n,r){return n===void 0&&(n=null),C0({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?om(e):e,{state:n,key:e&&e.key||r||rH()})}function Qx(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function om(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function sH(t,e,n,r){r===void 0&&(r={});let{window:s=document.defaultView,v5Compat:i=!1}=r,a=s.history,o=El.Pop,l=null,u=d();u==null&&(u=0,a.replaceState(C0({},a.state,{idx:u}),""));function d(){return(a.state||{idx:null}).idx}function h(){o=El.Pop;let y=d(),b=y==null?null:y-u;u=y,l&&l({action:o,location:m.location,delta:b})}function f(y,b){o=El.Push;let w=gC(m.location,y,b);u=d()+1;let x=Ek(w,u),A=m.createHref(w);try{a.pushState(x,"",A)}catch(T){if(T instanceof DOMException&&T.name==="DataCloneError")throw T;s.location.assign(A)}i&&l&&l({action:o,location:m.location,delta:1})}function p(y,b){o=El.Replace;let w=gC(m.location,y,b);u=d();let x=Ek(w,u),A=m.createHref(w);a.replaceState(x,"",A),i&&l&&l({action:o,location:m.location,delta:0})}function g(y){let b=s.location.origin!=="null"?s.location.origin:s.location.href,w=typeof y=="string"?y:Qx(y);return w=w.replace(/ $/,"%20"),Sn(b,"No window.location.(origin|href) available to create URL for href: "+w),new URL(w,b)}let m={get action(){return o},get location(){return t(s,a)},listen(y){if(l)throw new Error("A history only accepts one active listener");return s.addEventListener(vk,h),l=y,()=>{s.removeEventListener(vk,h),l=null}},createHref(y){return e(s,y)},createURL:g,encodeLocation(y){let b=g(y);return{pathname:b.pathname,search:b.search,hash:b.hash}},push:f,replace:p,go(y){return a.go(y)}};return m}var Nk;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(Nk||(Nk={}));function iH(t,e,n){return n===void 0&&(n="/"),aH(t,e,n)}function aH(t,e,n,r){let s=typeof e=="string"?om(e):e,i=E6(s.pathname||"/",n);if(i==null)return null;let a=wO(t);oH(a);let o=null;for(let l=0;o==null&&l<a.length;++l){let u=bH(i);o=gH(a[l],u)}return o}function wO(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let s=(i,a,o)=>{let l={relativePath:o===void 0?i.path||"":o,caseSensitive:i.caseSensitive===!0,childrenIndex:a,route:i};l.relativePath.startsWith("/")&&(Sn(l.relativePath.startsWith(r),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(r.length));let u=Ol([r,l.relativePath]),d=n.concat(l);i.children&&i.children.length>0&&(Sn(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+u+'".')),wO(i.children,e,d,u)),!(i.path==null&&!i.index)&&e.push({path:u,score:pH(u,i.index),routesMeta:d})};return t.forEach((i,a)=>{var o;if(i.path===""||!((o=i.path)!=null&&o.includes("?")))s(i,a);else for(let l of bO(i.path))s(i,a,l)}),e}function bO(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,s=n.endsWith("?"),i=n.replace(/\?$/,"");if(r.length===0)return s?[i,""]:[i];let a=bO(r.join("/")),o=[];return o.push(...a.map(l=>l===""?i:[i,l].join("/"))),s&&o.push(...a),o.map(l=>t.startsWith("/")&&l===""?"/":l)}function oH(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:mH(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const cH=/^:[\w-]+$/,lH=3,uH=2,dH=1,hH=10,fH=-2,Ck=t=>t==="*";function pH(t,e){let n=t.split("/"),r=n.length;return n.some(Ck)&&(r+=fH),e&&(r+=uH),n.filter(s=>!Ck(s)).reduce((s,i)=>s+(cH.test(i)?lH:i===""?dH:hH),r)}function mH(t,e){return t.length===e.length&&t.slice(0,-1).every((r,s)=>r===e[s])?t[t.length-1]-e[e.length-1]:0}function gH(t,e,n){let{routesMeta:r}=t,s={},i="/",a=[];for(let o=0;o<r.length;++o){let l=r[o],u=o===r.length-1,d=i==="/"?e:e.slice(i.length)||"/",h=yH({path:l.relativePath,caseSensitive:l.caseSensitive,end:u},d),f=l.route;if(!h)return null;Object.assign(s,h.params),a.push({params:s,pathname:Ol([i,h.pathname]),pathnameBase:NH(Ol([i,h.pathnameBase])),route:f}),h.pathnameBase!=="/"&&(i=Ol([i,h.pathnameBase]))}return a}function yH(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=wH(t.path,t.caseSensitive,t.end),s=e.match(n);if(!s)return null;let i=s[0],a=i.replace(/(.)\/+$/,"$1"),o=s.slice(1);return{params:r.reduce((u,d,h)=>{let{paramName:f,isOptional:p}=d;if(f==="*"){let m=o[h]||"";a=i.slice(0,i.length-m.length).replace(/(.)\/+$/,"$1")}const g=o[h];return p&&!g?u[f]=void 0:u[f]=(g||"").replace(/%2F/g,"/"),u},{}),pathname:i,pathnameBase:a,pattern:t}}function wH(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),yO(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(a,o,l)=>(r.push({paramName:o,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function bH(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return yO(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function E6(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function xH(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:s=""}=typeof t=="string"?om(t):t;return{pathname:n?n.startsWith("/")?n:vH(n,e):e,search:CH(r),hash:AH(s)}}function vH(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function QE(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function EH(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function xO(t,e){let n=EH(t);return e?n.map((r,s)=>s===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function vO(t,e,n,r){r===void 0&&(r=!1);let s;typeof t=="string"?s=om(t):(s=C0({},t),Sn(!s.pathname||!s.pathname.includes("?"),QE("?","pathname","search",s)),Sn(!s.pathname||!s.pathname.includes("#"),QE("#","pathname","hash",s)),Sn(!s.search||!s.search.includes("#"),QE("#","search","hash",s)));let i=t===""||s.pathname==="",a=i?"/":s.pathname,o;if(a==null)o=n;else{let h=e.length-1;if(!r&&a.startsWith("..")){let f=a.split("/");for(;f[0]==="..";)f.shift(),h-=1;s.pathname=f.join("/")}o=h>=0?e[h]:"/"}let l=xH(s,o),u=a&&a!=="/"&&a.endsWith("/"),d=(i||a===".")&&n.endsWith("/");return!l.pathname.endsWith("/")&&(u||d)&&(l.pathname+="/"),l}const Ol=t=>t.join("/").replace(/\/\/+/g,"/"),NH=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),CH=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,AH=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function TH(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const EO=["post","put","patch","delete"];new Set(EO);const SH=["get",...EO];new Set(SH);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function A0(){return A0=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},A0.apply(this,arguments)}const N6=v.createContext(null),kH=v.createContext(null),nh=v.createContext(null),x1=v.createContext(null),rh=v.createContext({outlet:null,matches:[],isDataRoute:!1}),NO=v.createContext(null);function _H(t,e){let{relative:n}=e===void 0?{}:e;Ky()||Sn(!1);let{basename:r,navigator:s}=v.useContext(nh),{hash:i,pathname:a,search:o}=AO(t,{relative:n}),l=a;return r!=="/"&&(l=a==="/"?r:Ol([r,a])),s.createHref({pathname:l,search:o,hash:i})}function Ky(){return v.useContext(x1)!=null}function cm(){return Ky()||Sn(!1),v.useContext(x1).location}function CO(t){v.useContext(nh).static||v.useLayoutEffect(t)}function IH(){let{isDataRoute:t}=v.useContext(rh);return t?VH():PH()}function PH(){Ky()||Sn(!1);let t=v.useContext(N6),{basename:e,future:n,navigator:r}=v.useContext(nh),{matches:s}=v.useContext(rh),{pathname:i}=cm(),a=JSON.stringify(xO(s,n.v7_relativeSplatPath)),o=v.useRef(!1);return CO(()=>{o.current=!0}),v.useCallback(function(u,d){if(d===void 0&&(d={}),!o.current)return;if(typeof u=="number"){r.go(u);return}let h=vO(u,JSON.parse(a),i,d.relative==="path");t==null&&e!=="/"&&(h.pathname=h.pathname==="/"?e:Ol([e,h.pathname])),(d.replace?r.replace:r.push)(h,d.state,d)},[e,r,a,i,t])}function AO(t,e){let{relative:n}=e===void 0?{}:e,{future:r}=v.useContext(nh),{matches:s}=v.useContext(rh),{pathname:i}=cm(),a=JSON.stringify(xO(s,r.v7_relativeSplatPath));return v.useMemo(()=>vO(t,JSON.parse(a),i,n==="path"),[t,a,i,n])}function RH(t,e){return jH(t,e)}function jH(t,e,n,r){Ky()||Sn(!1);let{navigator:s}=v.useContext(nh),{matches:i}=v.useContext(rh),a=i[i.length-1],o=a?a.params:{};a&&a.pathname;let l=a?a.pathnameBase:"/";a&&a.route;let u=cm(),d;if(e){var h;let y=typeof e=="string"?om(e):e;l==="/"||(h=y.pathname)!=null&&h.startsWith(l)||Sn(!1),d=y}else d=u;let f=d.pathname||"/",p=f;if(l!=="/"){let y=l.replace(/^\//,"").split("/");p="/"+f.replace(/^\//,"").split("/").slice(y.length).join("/")}let g=iH(t,{pathname:p}),m=LH(g&&g.map(y=>Object.assign({},y,{params:Object.assign({},o,y.params),pathname:Ol([l,s.encodeLocation?s.encodeLocation(y.pathname).pathname:y.pathname]),pathnameBase:y.pathnameBase==="/"?l:Ol([l,s.encodeLocation?s.encodeLocation(y.pathnameBase).pathname:y.pathnameBase])})),i,n,r);return e&&m?v.createElement(x1.Provider,{value:{location:A0({pathname:"/",search:"",hash:"",state:null,key:"default"},d),navigationType:El.Pop}},m):m}function OH(){let t=HH(),e=TH(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return v.createElement(v.Fragment,null,v.createElement("h2",null,"Unexpected Application Error!"),v.createElement("h3",{style:{fontStyle:"italic"}},e),n?v.createElement("pre",{style:s},n):null,null)}const DH=v.createElement(OH,null);class UH extends v.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?v.createElement(rh.Provider,{value:this.props.routeContext},v.createElement(NO.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function MH(t){let{routeContext:e,match:n,children:r}=t,s=v.useContext(N6);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),v.createElement(rh.Provider,{value:e},r)}function LH(t,e,n,r){var s;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var i;if(!n)return null;if(n.errors)t=n.matches;else if((i=r)!=null&&i.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let a=t,o=(s=n)==null?void 0:s.errors;if(o!=null){let d=a.findIndex(h=>h.route.id&&(o==null?void 0:o[h.route.id])!==void 0);d>=0||Sn(!1),a=a.slice(0,Math.min(a.length,d+1))}let l=!1,u=-1;if(n&&r&&r.v7_partialHydration)for(let d=0;d<a.length;d++){let h=a[d];if((h.route.HydrateFallback||h.route.hydrateFallbackElement)&&(u=d),h.route.id){let{loaderData:f,errors:p}=n,g=h.route.loader&&f[h.route.id]===void 0&&(!p||p[h.route.id]===void 0);if(h.route.lazy||g){l=!0,u>=0?a=a.slice(0,u+1):a=[a[0]];break}}}return a.reduceRight((d,h,f)=>{let p,g=!1,m=null,y=null;n&&(p=o&&h.route.id?o[h.route.id]:void 0,m=h.route.errorElement||DH,l&&(u<0&&f===0?(zH("route-fallback"),g=!0,y=null):u===f&&(g=!0,y=h.route.hydrateFallbackElement||null)));let b=e.concat(a.slice(0,f+1)),w=()=>{let x;return p?x=m:g?x=y:h.route.Component?x=v.createElement(h.route.Component,null):h.route.element?x=h.route.element:x=d,v.createElement(MH,{match:h,routeContext:{outlet:d,matches:b,isDataRoute:n!=null},children:x})};return n&&(h.route.ErrorBoundary||h.route.errorElement||f===0)?v.createElement(UH,{location:n.location,revalidation:n.revalidation,component:m,error:p,children:w(),routeContext:{outlet:null,matches:b,isDataRoute:!0}}):w()},null)}var TO=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(TO||{}),SO=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(SO||{});function BH(t){let e=v.useContext(N6);return e||Sn(!1),e}function $H(t){let e=v.useContext(kH);return e||Sn(!1),e}function FH(t){let e=v.useContext(rh);return e||Sn(!1),e}function kO(t){let e=FH(),n=e.matches[e.matches.length-1];return n.route.id||Sn(!1),n.route.id}function HH(){var t;let e=v.useContext(NO),n=$H(),r=kO();return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function VH(){let{router:t}=BH(TO.UseNavigateStable),e=kO(SO.UseNavigateStable),n=v.useRef(!1);return CO(()=>{n.current=!0}),v.useCallback(function(s,i){i===void 0&&(i={}),n.current&&(typeof s=="number"?t.navigate(s):t.navigate(s,A0({fromRouteId:e},i)))},[t,e])}const Ak={};function zH(t,e,n){Ak[t]||(Ak[t]=!0)}function WH(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function _a(t){Sn(!1)}function qH(t){let{basename:e="/",children:n=null,location:r,navigationType:s=El.Pop,navigator:i,static:a=!1,future:o}=t;Ky()&&Sn(!1);let l=e.replace(/^\/*/,"/"),u=v.useMemo(()=>({basename:l,navigator:i,static:a,future:A0({v7_relativeSplatPath:!1},o)}),[l,o,i,a]);typeof r=="string"&&(r=om(r));let{pathname:d="/",search:h="",hash:f="",state:p=null,key:g="default"}=r,m=v.useMemo(()=>{let y=E6(d,l);return y==null?null:{location:{pathname:y,search:h,hash:f,state:p,key:g},navigationType:s}},[l,d,h,f,p,g,s]);return m==null?null:v.createElement(nh.Provider,{value:u},v.createElement(x1.Provider,{children:n,value:m}))}function KH(t){let{children:e,location:n}=t;return RH(yC(e),n)}new Promise(()=>{});function yC(t,e){e===void 0&&(e=[]);let n=[];return v.Children.forEach(t,(r,s)=>{if(!v.isValidElement(r))return;let i=[...e,s];if(r.type===v.Fragment){n.push.apply(n,yC(r.props.children,i));return}r.type!==_a&&Sn(!1),!r.props.index||!r.props.children||Sn(!1);let a={id:r.props.id||i.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(a.children=yC(r.props.children,i)),n.push(a)}),n}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function wC(){return wC=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},wC.apply(this,arguments)}function GH(t,e){if(t==null)return{};var n={},r=Object.keys(t),s,i;for(i=0;i<r.length;i++)s=r[i],!(e.indexOf(s)>=0)&&(n[s]=t[s]);return n}function YH(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function QH(t,e){return t.button===0&&(!e||e==="_self")&&!YH(t)}const JH=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],ZH="6";try{window.__reactRouterVersion=ZH}catch{}const XH="startTransition",Tk=Ap[XH];function eV(t){let{basename:e,children:n,future:r,window:s}=t,i=v.useRef();i.current==null&&(i.current=nH({window:s,v5Compat:!0}));let a=i.current,[o,l]=v.useState({action:a.action,location:a.location}),{v7_startTransition:u}=r||{},d=v.useCallback(h=>{u&&Tk?Tk(()=>l(h)):l(h)},[l,u]);return v.useLayoutEffect(()=>a.listen(d),[a,d]),v.useEffect(()=>WH(r),[r]),v.createElement(qH,{basename:e,children:n,location:o.location,navigationType:o.action,navigator:a,future:r})}const tV=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",nV=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Lr=v.forwardRef(function(e,n){let{onClick:r,relative:s,reloadDocument:i,replace:a,state:o,target:l,to:u,preventScrollReset:d,viewTransition:h}=e,f=GH(e,JH),{basename:p}=v.useContext(nh),g,m=!1;if(typeof u=="string"&&nV.test(u)&&(g=u,tV))try{let x=new URL(window.location.href),A=u.startsWith("//")?new URL(x.protocol+u):new URL(u),T=E6(A.pathname,p);A.origin===x.origin&&T!=null?u=T+A.search+A.hash:m=!0}catch{}let y=_H(u,{relative:s}),b=rV(u,{replace:a,state:o,target:l,preventScrollReset:d,relative:s,viewTransition:h});function w(x){r&&r(x),x.defaultPrevented||b(x)}return v.createElement("a",wC({},f,{href:g||y,onClick:m||i?r:w,ref:n,target:l}))});var Sk;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(Sk||(Sk={}));var kk;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(kk||(kk={}));function rV(t,e){let{target:n,replace:r,state:s,preventScrollReset:i,relative:a,viewTransition:o}=e===void 0?{}:e,l=IH(),u=cm(),d=AO(t,{relative:a});return v.useCallback(h=>{if(QH(h,n)){h.preventDefault();let f=r!==void 0?r:Qx(u)===Qx(d);l(t,{replace:f,state:s,preventScrollReset:i,relative:a,viewTransition:o})}},[u,l,d,r,s,n,t,i,a,o])}const sV="6.15.0";function iV(t,e,n){const r=e.split("|").map(i=>i.trim());for(let i=0;i<r.length;i++)switch(e){case"any":return;case"bigint":case"boolean":case"number":case"string":if(typeof t===e)return}const s=new Error(`invalid value for type ${e}`);throw s.code="INVALID_ARGUMENT",s.argument=`value.${n}`,s.value=t,s}async function zr(t){const e=Object.keys(t);return(await Promise.all(e.map(r=>Promise.resolve(t[r])))).reduce((r,s,i)=>(r[e[i]]=s,r),{})}function Fe(t,e,n){for(let r in e){let s=e[r];const i=n?n[r]:null;i&&iV(s,i,r),Object.defineProperty(t,r,{enumerable:!0,value:s,writable:!1})}}function df(t,e){if(t==null)return"null";if(e==null&&(e=new Set),typeof t=="object"){if(e.has(t))return"[Circular]";e.add(t)}if(Array.isArray(t))return"[ "+t.map(n=>df(n,e)).join(", ")+" ]";if(t instanceof Uint8Array){const n="0123456789abcdef";let r="0x";for(let s=0;s<t.length;s++)r+=n[t[s]>>4],r+=n[t[s]&15];return r}if(typeof t=="object"&&typeof t.toJSON=="function")return df(t.toJSON(),e);switch(typeof t){case"boolean":case"number":case"symbol":return t.toString();case"bigint":return BigInt(t).toString();case"string":return JSON.stringify(t);case"object":{const n=Object.keys(t);return n.sort(),"{ "+n.map(r=>`${df(r,e)}: ${df(t[r],e)}`).join(", ")+" }"}}return"[ COULD NOT SERIALIZE ]"}function or(t,e){return t&&t.code===e}function C6(t){return or(t,"CALL_EXCEPTION")}function nn(t,e,n){let r=t;{const i=[];if(n){if("message"in n||"code"in n||"name"in n)throw new Error(`value will overwrite populated values: ${df(n)}`);for(const a in n){if(a==="shortMessage")continue;const o=n[a];i.push(a+"="+df(o))}}i.push(`code=${e}`),i.push(`version=${sV}`),i.length&&(t+=" ("+i.join(", ")+")")}let s;switch(e){case"INVALID_ARGUMENT":s=new TypeError(t);break;case"NUMERIC_FAULT":case"BUFFER_OVERRUN":s=new RangeError(t);break;default:s=new Error(t)}return Fe(s,{code:e}),n&&Object.assign(s,n),s.shortMessage==null&&Fe(s,{shortMessage:r}),s}function ee(t,e,n,r){if(!t)throw nn(e,n,r)}function H(t,e,n,r){ee(t,e,"INVALID_ARGUMENT",{argument:n,value:r})}function _O(t,e,n){n==null&&(n=""),n&&(n=": "+n),ee(t>=e,"missing argument"+n,"MISSING_ARGUMENT",{count:t,expectedCount:e}),ee(t<=e,"too many arguments"+n,"UNEXPECTED_ARGUMENT",{count:t,expectedCount:e})}["NFD","NFC","NFKD","NFKC"].reduce((t,e)=>{try{if("test".normalize(e)!=="test")throw new Error("bad");if(e==="NFD"&&"".normalize("NFD")!=="e")throw new Error("broken");t.push(e)}catch{}return t},[]);function Gy(t,e,n){if(n==null&&(n=""),t!==e){let r=n,s="new";n&&(r+=".",s+=" "+n),ee(!1,`private constructor; use ${r}from* methods`,"UNSUPPORTED_OPERATION",{operation:s})}}function IO(t,e,n){if(t instanceof Uint8Array)return n?new Uint8Array(t):t;if(typeof t=="string"&&t.match(/^0x(?:[0-9a-f][0-9a-f])*$/i)){const r=new Uint8Array((t.length-2)/2);let s=2;for(let i=0;i<r.length;i++)r[i]=parseInt(t.substring(s,s+2),16),s+=2;return r}H(!1,"invalid BytesLike value",e||"value",t)}function it(t,e){return IO(t,e,!1)}function qr(t,e){return IO(t,e,!0)}function qt(t,e){return!(typeof t!="string"||!t.match(/^0x[0-9A-Fa-f]*$/)||typeof e=="number"&&t.length!==2+2*e||e===!0&&t.length%2!==0)}function A6(t){return qt(t,!0)||t instanceof Uint8Array}const _k="0123456789abcdef";function we(t){const e=it(t);let n="0x";for(let r=0;r<e.length;r++){const s=e[r];n+=_k[(s&240)>>4]+_k[s&15]}return n}function gn(t){return"0x"+t.map(e=>we(e).substring(2)).join("")}function Tf(t){return qt(t,!0)?(t.length-2)/2:it(t).length}function fn(t,e,n){const r=it(t);return n!=null&&n>r.length&&ee(!1,"cannot slice beyond data bounds","BUFFER_OVERRUN",{buffer:r,length:r.length,offset:n}),we(r.slice(e??0,n??r.length))}function PO(t,e,n){const r=it(t);ee(e>=r.length,"padding exceeds data length","BUFFER_OVERRUN",{buffer:new Uint8Array(r),length:e,offset:e+1});const s=new Uint8Array(e);return s.fill(0),n?s.set(r,e-r.length):s.set(r,0),we(s)}function cc(t,e){return PO(t,e,!0)}function RO(t,e){return PO(t,e,!1)}const v1=BigInt(0),ra=BigInt(1),hf=9007199254740991;function Jx(t,e){const n=E1(t,"value"),r=BigInt(Xe(e,"width"));if(ee(n>>r===v1,"overflow","NUMERIC_FAULT",{operation:"fromTwos",fault:"overflow",value:t}),n>>r-ra){const s=(ra<<r)-ra;return-((~n&s)+ra)}return n}function jO(t,e){let n=Ie(t,"value");const r=BigInt(Xe(e,"width")),s=ra<<r-ra;if(n<v1){n=-n,ee(n<=s,"too low","NUMERIC_FAULT",{operation:"toTwos",fault:"overflow",value:t});const i=(ra<<r)-ra;return(~n&i)+ra}else ee(n<s,"too high","NUMERIC_FAULT",{operation:"toTwos",fault:"overflow",value:t});return n}function Du(t,e){const n=E1(t,"value"),r=BigInt(Xe(e,"bits"));return n&(ra<<r)-ra}function Ie(t,e){switch(typeof t){case"bigint":return t;case"number":return H(Number.isInteger(t),"underflow",e||"value",t),H(t>=-hf&&t<=hf,"overflow",e||"value",t),BigInt(t);case"string":try{if(t==="")throw new Error("empty string");return t[0]==="-"&&t[1]!=="-"?-BigInt(t.substring(1)):BigInt(t)}catch(n){H(!1,`invalid BigNumberish string: ${n.message}`,e||"value",t)}}H(!1,"invalid BigNumberish value",e||"value",t)}function E1(t,e){const n=Ie(t,e);return ee(n>=v1,"unsigned value cannot be negative","NUMERIC_FAULT",{fault:"overflow",operation:"getUint",value:t}),n}const Ik="0123456789abcdef";function N1(t){if(t instanceof Uint8Array){let e="0x0";for(const n of t)e+=Ik[n>>4],e+=Ik[n&15];return BigInt(e)}return Ie(t)}function Xe(t,e){switch(typeof t){case"bigint":return H(t>=-hf&&t<=hf,"overflow",e||"value",t),Number(t);case"number":return H(Number.isInteger(t),"underflow",e||"value",t),H(t>=-hf&&t<=hf,"overflow",e||"value",t),t;case"string":try{if(t==="")throw new Error("empty string");return Xe(BigInt(t),e)}catch(n){H(!1,`invalid numeric string: ${n.message}`,e||"value",t)}}H(!1,"invalid numeric value",e||"value",t)}function aV(t){return Xe(N1(t))}function zl(t,e){let r=E1(t,"value").toString(16);if(e==null)r.length%2&&(r="0"+r);else{const s=Xe(e,"width");for(ee(s*2>=r.length,`value exceeds width (${s} bytes)`,"NUMERIC_FAULT",{operation:"toBeHex",fault:"overflow",value:t});r.length<s*2;)r="0"+r}return"0x"+r}function Un(t){const e=E1(t,"value");if(e===v1)return new Uint8Array([]);let n=e.toString(16);n.length%2&&(n="0"+n);const r=new Uint8Array(n.length/2);for(let s=0;s<r.length;s++){const i=s*2;r[s]=parseInt(n.substring(i,i+2),16)}return r}function ta(t){let e=we(A6(t)?t:Un(t)).substring(2);for(;e.startsWith("0");)e=e.substring(1);return e===""&&(e="0"),"0x"+e}const Pk="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";BigInt(0);const Rk=BigInt(58);function oV(t){const e=it(t);let n=N1(e),r="";for(;n;)r=Pk[Number(n%Rk)]+r,n/=Rk;for(let s=0;s<e.length&&!e[s];s++)r=Pk[0]+r;return r}function cV(t){t=atob(t);const e=new Uint8Array(t.length);for(let n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return it(e)}function lV(t){const e=it(t);let n="";for(let r=0;r<e.length;r++)n+=String.fromCharCode(e[r]);return btoa(n)}var Lf;class OO{constructor(e,n,r){W(this,"filter");W(this,"emitter");K(this,Lf);B(this,Lf,n),Fe(this,{emitter:e,filter:r})}async removeListener(){C(this,Lf)!=null&&await this.emitter.off(this.filter,C(this,Lf))}}Lf=new WeakMap;function uV(t,e,n,r,s){H(!1,`invalid codepoint at offset ${e}; ${t}`,"bytes",n)}function DO(t,e,n,r,s){if(t==="BAD_PREFIX"||t==="UNEXPECTED_CONTINUE"){let i=0;for(let a=e+1;a<n.length&&n[a]>>6===2;a++)i++;return i}return t==="OVERRUN"?n.length-e-1:0}function dV(t,e,n,r,s){return t==="OVERLONG"?(H(typeof s=="number","invalid bad code point for replacement","badCodepoint",s),r.push(s),0):(r.push(65533),DO(t,e,n))}const hV=Object.freeze({error:uV,ignore:DO,replace:dV});function fV(t,e){e==null&&(e=hV.error);const n=it(t,"bytes"),r=[];let s=0;for(;s<n.length;){const i=n[s++];if(!(i>>7)){r.push(i);continue}let a=null,o=null;if((i&224)===192)a=1,o=127;else if((i&240)===224)a=2,o=2047;else if((i&248)===240)a=3,o=65535;else{(i&192)===128?s+=e("UNEXPECTED_CONTINUE",s-1,n,r):s+=e("BAD_PREFIX",s-1,n,r);continue}if(s-1+a>=n.length){s+=e("OVERRUN",s-1,n,r);continue}let l=i&(1<<8-a-1)-1;for(let u=0;u<a;u++){let d=n[s];if((d&192)!=128){s+=e("MISSING_CONTINUE",s,n,r),l=null;break}l=l<<6|d&63,s++}if(l!==null){if(l>1114111){s+=e("OUT_OF_RANGE",s-1-a,n,r,l);continue}if(l>=55296&&l<=57343){s+=e("UTF16_SURROGATE",s-1-a,n,r,l);continue}if(l<=o){s+=e("OVERLONG",s-1-a,n,r,l);continue}r.push(l)}}return r}function la(t,e){H(typeof t=="string","invalid string value","str",t);let n=[];for(let r=0;r<t.length;r++){const s=t.charCodeAt(r);if(s<128)n.push(s);else if(s<2048)n.push(s>>6|192),n.push(s&63|128);else if((s&64512)==55296){r++;const i=t.charCodeAt(r);H(r<t.length&&(i&64512)===56320,"invalid surrogate pair","str",t);const a=65536+((s&1023)<<10)+(i&1023);n.push(a>>18|240),n.push(a>>12&63|128),n.push(a>>6&63|128),n.push(a&63|128)}else n.push(s>>12|224),n.push(s>>6&63|128),n.push(s&63|128)}return new Uint8Array(n)}function pV(t){return t.map(e=>e<=65535?String.fromCharCode(e):(e-=65536,String.fromCharCode((e>>10&1023)+55296,(e&1023)+56320))).join("")}function Zx(t,e){return pV(fV(t,e))}function UO(t){async function e(n,r){ee(r==null||!r.cancelled,"request cancelled before sending","CANCELLED");const s=n.url.split(":")[0].toLowerCase();ee(s==="http"||s==="https",`unsupported protocol ${s}`,"UNSUPPORTED_OPERATION",{info:{protocol:s},operation:"request"}),ee(s==="https"||!n.credentials||n.allowInsecureAuthentication,"insecure authorized connections unsupported","UNSUPPORTED_OPERATION",{operation:"request"});let i=null;const a=new AbortController,o=setTimeout(()=>{i=nn("request timeout","TIMEOUT"),a.abort()},n.timeout);r&&r.addListener(()=>{i=nn("request cancelled","CANCELLED"),a.abort()});const l=Object.assign({},t,{method:n.method,headers:new Headers(Array.from(n)),body:n.body||void 0,signal:a.signal});let u;try{u=await fetch(n.url,l)}catch(p){throw clearTimeout(o),i||p}clearTimeout(o);const d={};u.headers.forEach((p,g)=>{d[g.toLowerCase()]=p});const h=await u.arrayBuffer(),f=h==null?null:new Uint8Array(h);return{statusCode:u.status,statusMessage:u.statusText,headers:d,body:f}}return e}const mV=12,gV=250;let jk=UO();const yV=new RegExp("^data:([^;:]*)?(;base64)?,(.*)$","i"),wV=new RegExp("^ipfs://(ipfs/)?(.*)$","i");let JE=!1;async function MO(t,e){try{const n=t.match(yV);if(!n)throw new Error("invalid data");return new Dl(200,"OK",{"content-type":n[1]||"text/plain"},n[2]?cV(n[3]):xV(n[3]))}catch{return new Dl(599,"BAD REQUEST (invalid data: URI)",{},null,new lc(t))}}function LO(t){async function e(n,r){try{const s=n.match(wV);if(!s)throw new Error("invalid link");return new lc(`${t}${s[2]}`)}catch{return new Dl(599,"BAD REQUEST (invalid IPFS URI)",{},null,new lc(n))}}return e}const Hw={data:MO,ipfs:LO("https://gateway.ipfs.io/ipfs/")},BO=new WeakMap;var Qu,rl;class bV{constructor(e){K(this,Qu);K(this,rl);B(this,Qu,[]),B(this,rl,!1),BO.set(e,()=>{if(!C(this,rl)){B(this,rl,!0);for(const n of C(this,Qu))setTimeout(()=>{n()},0);B(this,Qu,[])}})}addListener(e){ee(!C(this,rl),"singal already cancelled","UNSUPPORTED_OPERATION",{operation:"fetchCancelSignal.addCancelListener"}),C(this,Qu).push(e)}get cancelled(){return C(this,rl)}checkSignal(){ee(!this.cancelled,"cancelled","CANCELLED",{})}}Qu=new WeakMap,rl=new WeakMap;function Vw(t){if(t==null)throw new Error("missing signal; should not happen");return t.checkSignal(),t}var Bf,$f,Ki,Do,Ff,Hf,Fn,Hs,Uo,Ju,Zu,Xu,Da,Gi,sl,ed,hg;const Jv=class Jv{constructor(e){K(this,ed);K(this,Bf);K(this,$f);K(this,Ki);K(this,Do);K(this,Ff);K(this,Hf);K(this,Fn);K(this,Hs);K(this,Uo);K(this,Ju);K(this,Zu);K(this,Xu);K(this,Da);K(this,Gi);K(this,sl);B(this,Hf,String(e)),B(this,Bf,!1),B(this,$f,!0),B(this,Ki,{}),B(this,Do,""),B(this,Ff,3e5),B(this,Gi,{slotInterval:gV,maxAttempts:mV}),B(this,sl,null)}get url(){return C(this,Hf)}set url(e){B(this,Hf,String(e))}get body(){return C(this,Fn)==null?null:new Uint8Array(C(this,Fn))}set body(e){if(e==null)B(this,Fn,void 0),B(this,Hs,void 0);else if(typeof e=="string")B(this,Fn,la(e)),B(this,Hs,"text/plain");else if(e instanceof Uint8Array)B(this,Fn,e),B(this,Hs,"application/octet-stream");else if(typeof e=="object")B(this,Fn,la(JSON.stringify(e))),B(this,Hs,"application/json");else throw new Error("invalid body")}hasBody(){return C(this,Fn)!=null}get method(){return C(this,Do)?C(this,Do):this.hasBody()?"POST":"GET"}set method(e){e==null&&(e=""),B(this,Do,String(e).toUpperCase())}get headers(){const e=Object.assign({},C(this,Ki));return C(this,Uo)&&(e.authorization=`Basic ${lV(la(C(this,Uo)))}`),this.allowGzip&&(e["accept-encoding"]="gzip"),e["content-type"]==null&&C(this,Hs)&&(e["content-type"]=C(this,Hs)),this.body&&(e["content-length"]=String(this.body.length)),e}getHeader(e){return this.headers[e.toLowerCase()]}setHeader(e,n){C(this,Ki)[String(e).toLowerCase()]=String(n)}clearHeaders(){B(this,Ki,{})}[Symbol.iterator](){const e=this.headers,n=Object.keys(e);let r=0;return{next:()=>{if(r<n.length){const s=n[r++];return{value:[s,e[s]],done:!1}}return{value:void 0,done:!0}}}}get credentials(){return C(this,Uo)||null}setCredentials(e,n){H(!e.match(/:/),"invalid basic authentication username","username","[REDACTED]"),B(this,Uo,`${e}:${n}`)}get allowGzip(){return C(this,$f)}set allowGzip(e){B(this,$f,!!e)}get allowInsecureAuthentication(){return!!C(this,Bf)}set allowInsecureAuthentication(e){B(this,Bf,!!e)}get timeout(){return C(this,Ff)}set timeout(e){H(e>=0,"timeout must be non-zero","timeout",e),B(this,Ff,e)}get preflightFunc(){return C(this,Ju)||null}set preflightFunc(e){B(this,Ju,e)}get processFunc(){return C(this,Zu)||null}set processFunc(e){B(this,Zu,e)}get retryFunc(){return C(this,Xu)||null}set retryFunc(e){B(this,Xu,e)}get getUrlFunc(){return C(this,sl)||jk}set getUrlFunc(e){B(this,sl,e)}toString(){return`<FetchRequest method=${JSON.stringify(this.method)} url=${JSON.stringify(this.url)} headers=${JSON.stringify(this.headers)} body=${C(this,Fn)?we(C(this,Fn)):"null"}>`}setThrottleParams(e){e.slotInterval!=null&&(C(this,Gi).slotInterval=e.slotInterval),e.maxAttempts!=null&&(C(this,Gi).maxAttempts=e.maxAttempts)}send(){return ee(C(this,Da)==null,"request already sent","UNSUPPORTED_OPERATION",{operation:"fetchRequest.send"}),B(this,Da,new bV(this)),ie(this,ed,hg).call(this,0,Ok()+this.timeout,0,this,new Dl(0,"",{},null,this))}cancel(){ee(C(this,Da)!=null,"request has not been sent","UNSUPPORTED_OPERATION",{operation:"fetchRequest.cancel"});const e=BO.get(this);if(!e)throw new Error("missing signal; should not happen");e()}redirect(e){const n=this.url.split(":")[0].toLowerCase(),r=e.split(":")[0].toLowerCase();ee(this.method==="GET"&&(n!=="https"||r!=="http")&&e.match(/^https?:/),"unsupported redirect","UNSUPPORTED_OPERATION",{operation:`redirect(${this.method} ${JSON.stringify(this.url)} => ${JSON.stringify(e)})`});const s=new Jv(e);return s.method="GET",s.allowGzip=this.allowGzip,s.timeout=this.timeout,B(s,Ki,Object.assign({},C(this,Ki))),C(this,Fn)&&B(s,Fn,new Uint8Array(C(this,Fn))),B(s,Hs,C(this,Hs)),s}clone(){const e=new Jv(this.url);return B(e,Do,C(this,Do)),C(this,Fn)&&B(e,Fn,C(this,Fn)),B(e,Hs,C(this,Hs)),B(e,Ki,Object.assign({},C(this,Ki))),B(e,Uo,C(this,Uo)),this.allowGzip&&(e.allowGzip=!0),e.timeout=this.timeout,this.allowInsecureAuthentication&&(e.allowInsecureAuthentication=!0),B(e,Ju,C(this,Ju)),B(e,Zu,C(this,Zu)),B(e,Xu,C(this,Xu)),B(e,Gi,Object.assign({},C(this,Gi))),B(e,sl,C(this,sl)),e}static lockConfig(){JE=!0}static getGateway(e){return Hw[e.toLowerCase()]||null}static registerGateway(e,n){if(e=e.toLowerCase(),e==="http"||e==="https")throw new Error(`cannot intercept ${e}; use registerGetUrl`);if(JE)throw new Error("gateways locked");Hw[e]=n}static registerGetUrl(e){if(JE)throw new Error("gateways locked");jk=e}static createGetUrlFunc(e){return UO(e)}static createDataGateway(){return MO}static createIpfsGatewayFunc(e){return LO(e)}};Bf=new WeakMap,$f=new WeakMap,Ki=new WeakMap,Do=new WeakMap,Ff=new WeakMap,Hf=new WeakMap,Fn=new WeakMap,Hs=new WeakMap,Uo=new WeakMap,Ju=new WeakMap,Zu=new WeakMap,Xu=new WeakMap,Da=new WeakMap,Gi=new WeakMap,sl=new WeakMap,ed=new WeakSet,hg=async function(e,n,r,s,i){var d,h,f;if(e>=C(this,Gi).maxAttempts)return i.makeServerError("exceeded maximum retry limit");ee(Ok()<=n,"timeout","TIMEOUT",{operation:"request.send",reason:"timeout",request:s}),r>0&&await vV(r);let a=this.clone();const o=(a.url.split(":")[0]||"").toLowerCase();if(o in Hw){const p=await Hw[o](a.url,Vw(C(s,Da)));if(p instanceof Dl){let g=p;if(this.processFunc){Vw(C(s,Da));try{g=await this.processFunc(a,g)}catch(m){(m.throttle==null||typeof m.stall!="number")&&g.makeServerError("error in post-processing function",m).assertOk()}}return g}a=p}this.preflightFunc&&(a=await this.preflightFunc(a));const l=await this.getUrlFunc(a,Vw(C(s,Da)));let u=new Dl(l.statusCode,l.statusMessage,l.headers,l.body,s);if(u.statusCode===301||u.statusCode===302){try{const p=u.headers.location||"";return ie(d=a.redirect(p),ed,hg).call(d,e+1,n,0,s,u)}catch{}return u}else if(u.statusCode===429&&(this.retryFunc==null||await this.retryFunc(a,u,e))){const p=u.headers["retry-after"];let g=C(this,Gi).slotInterval*Math.trunc(Math.random()*Math.pow(2,e));return typeof p=="string"&&p.match(/^[1-9][0-9]*$/)&&(g=parseInt(p)),ie(h=a.clone(),ed,hg).call(h,e+1,n,g,s,u)}if(this.processFunc){Vw(C(s,Da));try{u=await this.processFunc(a,u)}catch(p){(p.throttle==null||typeof p.stall!="number")&&u.makeServerError("error in post-processing function",p).assertOk();let g=C(this,Gi).slotInterval*Math.trunc(Math.random()*Math.pow(2,e));return p.stall>=0&&(g=p.stall),ie(f=a.clone(),ed,hg).call(f,e+1,n,g,s,u)}}return u};let lc=Jv;var _y,Iy,Py,Vs,Vf,td;const n5=class n5{constructor(e,n,r,s,i){K(this,_y);K(this,Iy);K(this,Py);K(this,Vs);K(this,Vf);K(this,td);B(this,_y,e),B(this,Iy,n),B(this,Py,Object.keys(r).reduce((a,o)=>(a[o.toLowerCase()]=String(r[o]),a),{})),B(this,Vs,s==null?null:new Uint8Array(s)),B(this,Vf,i||null),B(this,td,{message:""})}toString(){return`<FetchResponse status=${this.statusCode} body=${C(this,Vs)?we(C(this,Vs)):"null"}>`}get statusCode(){return C(this,_y)}get statusMessage(){return C(this,Iy)}get headers(){return Object.assign({},C(this,Py))}get body(){return C(this,Vs)==null?null:new Uint8Array(C(this,Vs))}get bodyText(){try{return C(this,Vs)==null?"":Zx(C(this,Vs))}catch{ee(!1,"response body is not valid UTF-8 data","UNSUPPORTED_OPERATION",{operation:"bodyText",info:{response:this}})}}get bodyJson(){try{return JSON.parse(this.bodyText)}catch{ee(!1,"response body is not valid JSON","UNSUPPORTED_OPERATION",{operation:"bodyJson",info:{response:this}})}}[Symbol.iterator](){const e=this.headers,n=Object.keys(e);let r=0;return{next:()=>{if(r<n.length){const s=n[r++];return{value:[s,e[s]],done:!1}}return{value:void 0,done:!0}}}}makeServerError(e,n){let r;e?r=`CLIENT ESCALATED SERVER ERROR (${this.statusCode} ${this.statusMessage}; ${e})`:(e=`${this.statusCode} ${this.statusMessage}`,r=`CLIENT ESCALATED SERVER ERROR (${e})`);const s=new n5(599,r,this.headers,this.body,C(this,Vf)||void 0);return B(s,td,{message:e,error:n}),s}throwThrottleError(e,n){n==null?n=-1:H(Number.isInteger(n)&&n>=0,"invalid stall timeout","stall",n);const r=new Error(e||"throttling requests");throw Fe(r,{stall:n,throttle:!0}),r}getHeader(e){return this.headers[e.toLowerCase()]}hasBody(){return C(this,Vs)!=null}get request(){return C(this,Vf)}ok(){return C(this,td).message===""&&this.statusCode>=200&&this.statusCode<300}assertOk(){if(this.ok())return;let{message:e,error:n}=C(this,td);e===""&&(e=`server response ${this.statusCode} ${this.statusMessage}`);let r=null;this.request&&(r=this.request.url);let s=null;try{C(this,Vs)&&(s=Zx(C(this,Vs)))}catch{}ee(!1,e,"SERVER_ERROR",{request:this.request||"unknown request",response:this,error:n,info:{requestUrl:r,responseBody:s,responseStatus:`${this.statusCode} ${this.statusMessage}`}})}};_y=new WeakMap,Iy=new WeakMap,Py=new WeakMap,Vs=new WeakMap,Vf=new WeakMap,td=new WeakMap;let Dl=n5;function Ok(){return new Date().getTime()}function xV(t){return la(t.replace(/%([0-9a-f][0-9a-f])/gi,(e,n)=>String.fromCharCode(parseInt(n,16))))}function vV(t){return new Promise(e=>setTimeout(e,t))}const EV=BigInt(-1),Hi=BigInt(0),ff=BigInt(1),NV=BigInt(5),wh={};let Sf="0000";for(;Sf.length<80;)Sf+=Sf;function au(t){let e=Sf;for(;e.length<t;)e+=e;return BigInt("1"+e.substring(0,t))}function jm(t,e,n){const r=BigInt(e.width);if(e.signed){const s=ff<<r-ff;ee(n==null||t>=-s&&t<s,"overflow","NUMERIC_FAULT",{operation:n,fault:"overflow",value:t}),t>Hi?t=Jx(Du(t,r),r):t=-Jx(Du(-t,r),r)}else{const s=ff<<r;ee(n==null||t>=0&&t<s,"overflow","NUMERIC_FAULT",{operation:n,fault:"overflow",value:t}),t=(t%s+s)%s&s-ff}return t}function ZE(t){typeof t=="number"&&(t=`fixed128x${t}`);let e=!0,n=128,r=18;if(typeof t=="string"){if(t!=="fixed")if(t==="ufixed")e=!1;else{const i=t.match(/^(u?)fixed([0-9]+)x([0-9]+)$/);H(i,"invalid fixed format","format",t),e=i[1]!=="u",n=parseInt(i[2]),r=parseInt(i[3])}}else if(t){const i=t,a=(o,l,u)=>i[o]==null?u:(H(typeof i[o]===l,"invalid fixed format ("+o+" not "+l+")","format."+o,i[o]),i[o]);e=a("signed","boolean",e),n=a("width","number",n),r=a("decimals","number",r)}H(n%8===0,"invalid FixedNumber width (not byte aligned)","format.width",n),H(r<=80,"invalid FixedNumber decimals (too large)","format.decimals",r);const s=(e?"":"u")+"fixed"+String(n)+"x"+String(r);return{signed:e,width:n,decimals:r,name:s}}function CV(t,e){let n="";t<Hi&&(n="-",t*=EV);let r=t.toString();if(e===0)return n+r;for(;r.length<=e;)r=Sf+r;const s=r.length-e;for(r=r.substring(0,s)+"."+r.substring(s);r[0]==="0"&&r[1]!==".";)r=r.substring(1);for(;r[r.length-1]==="0"&&r[r.length-2]!==".";)r=r.substring(0,r.length-1);return n+r}var Yi,Ft,$r,Ot,bu,Ao,bC,xC,vC,EC;const Yc=class Yc{constructor(e,n,r){K(this,Ot);W(this,"format");K(this,Yi);K(this,Ft);K(this,$r);W(this,"_value");Gy(e,wh,"FixedNumber"),B(this,Ft,n),B(this,Yi,r);const s=CV(n,r.decimals);Fe(this,{format:r.name,_value:s}),B(this,$r,au(r.decimals))}get signed(){return C(this,Yi).signed}get width(){return C(this,Yi).width}get decimals(){return C(this,Yi).decimals}get value(){return C(this,Ft)}addUnsafe(e){return ie(this,Ot,bC).call(this,e)}add(e){return ie(this,Ot,bC).call(this,e,"add")}subUnsafe(e){return ie(this,Ot,xC).call(this,e)}sub(e){return ie(this,Ot,xC).call(this,e,"sub")}mulUnsafe(e){return ie(this,Ot,vC).call(this,e)}mul(e){return ie(this,Ot,vC).call(this,e,"mul")}mulSignal(e){ie(this,Ot,bu).call(this,e);const n=C(this,Ft)*C(e,Ft);return ee(n%C(this,$r)===Hi,"precision lost during signalling mul","NUMERIC_FAULT",{operation:"mulSignal",fault:"underflow",value:this}),ie(this,Ot,Ao).call(this,n/C(this,$r),"mulSignal")}divUnsafe(e){return ie(this,Ot,EC).call(this,e)}div(e){return ie(this,Ot,EC).call(this,e,"div")}divSignal(e){ee(C(e,Ft)!==Hi,"division by zero","NUMERIC_FAULT",{operation:"div",fault:"divide-by-zero",value:this}),ie(this,Ot,bu).call(this,e);const n=C(this,Ft)*C(this,$r);return ee(n%C(e,Ft)===Hi,"precision lost during signalling div","NUMERIC_FAULT",{operation:"divSignal",fault:"underflow",value:this}),ie(this,Ot,Ao).call(this,n/C(e,Ft),"divSignal")}cmp(e){let n=this.value,r=e.value;const s=this.decimals-e.decimals;return s>0?r*=au(s):s<0&&(n*=au(-s)),n<r?-1:n>r?1:0}eq(e){return this.cmp(e)===0}lt(e){return this.cmp(e)<0}lte(e){return this.cmp(e)<=0}gt(e){return this.cmp(e)>0}gte(e){return this.cmp(e)>=0}floor(){let e=C(this,Ft);return C(this,Ft)<Hi&&(e-=C(this,$r)-ff),e=C(this,Ft)/C(this,$r)*C(this,$r),ie(this,Ot,Ao).call(this,e,"floor")}ceiling(){let e=C(this,Ft);return C(this,Ft)>Hi&&(e+=C(this,$r)-ff),e=C(this,Ft)/C(this,$r)*C(this,$r),ie(this,Ot,Ao).call(this,e,"ceiling")}round(e){if(e==null&&(e=0),e>=this.decimals)return this;const n=this.decimals-e,r=NV*au(n-1);let s=this.value+r;const i=au(n);return s=s/i*i,jm(s,C(this,Yi),"round"),new Yc(wh,s,C(this,Yi))}isZero(){return C(this,Ft)===Hi}isNegative(){return C(this,Ft)<Hi}toString(){return this._value}toUnsafeFloat(){return parseFloat(this.toString())}toFormat(e){return Yc.fromString(this.toString(),e)}static fromValue(e,n,r){const s=n==null?0:Xe(n),i=ZE(r);let a=Ie(e,"value");const o=s-i.decimals;if(o>0){const l=au(o);ee(a%l===Hi,"value loses precision for format","NUMERIC_FAULT",{operation:"fromValue",fault:"underflow",value:e}),a/=l}else o<0&&(a*=au(-o));return jm(a,i,"fromValue"),new Yc(wh,a,i)}static fromString(e,n){const r=e.match(/^(-?)([0-9]*)\.?([0-9]*)$/);H(r&&r[2].length+r[3].length>0,"invalid FixedNumber string value","value",e);const s=ZE(n);let i=r[2]||"0",a=r[3]||"";for(;a.length<s.decimals;)a+=Sf;ee(a.substring(s.decimals).match(/^0*$/),"too many decimals for format","NUMERIC_FAULT",{operation:"fromString",fault:"underflow",value:e}),a=a.substring(0,s.decimals);const o=BigInt(r[1]+i+a);return jm(o,s,"fromString"),new Yc(wh,o,s)}static fromBytes(e,n){let r=N1(it(e,"value"));const s=ZE(n);return s.signed&&(r=Jx(r,s.width)),jm(r,s,"fromBytes"),new Yc(wh,r,s)}};Yi=new WeakMap,Ft=new WeakMap,$r=new WeakMap,Ot=new WeakSet,bu=function(e){H(this.format===e.format,"incompatible format; use fixedNumber.toFormat","other",e)},Ao=function(e,n){return e=jm(e,C(this,Yi),n),new Yc(wh,e,C(this,Yi))},bC=function(e,n){return ie(this,Ot,bu).call(this,e),ie(this,Ot,Ao).call(this,C(this,Ft)+C(e,Ft),n)},xC=function(e,n){return ie(this,Ot,bu).call(this,e),ie(this,Ot,Ao).call(this,C(this,Ft)-C(e,Ft),n)},vC=function(e,n){return ie(this,Ot,bu).call(this,e),ie(this,Ot,Ao).call(this,C(this,Ft)*C(e,Ft)/C(this,$r),n)},EC=function(e,n){return ee(C(e,Ft)!==Hi,"division by zero","NUMERIC_FAULT",{operation:"div",fault:"divide-by-zero",value:this}),ie(this,Ot,bu).call(this,e),ie(this,Ot,Ao).call(this,C(this,Ft)*C(this,$r)/C(e,Ft),n)};let Xx=Yc;function AV(t){let e=t.toString(16);for(;e.length<2;)e="0"+e;return"0x"+e}function Dk(t,e,n){let r=0;for(let s=0;s<n;s++)r=r*256+t[e+s];return r}function Uk(t,e,n,r){const s=[];for(;n<e+1+r;){const i=$O(t,n);s.push(i.result),n+=i.consumed,ee(n<=e+1+r,"child data too short","BUFFER_OVERRUN",{buffer:t,length:r,offset:e})}return{consumed:1+r,result:s}}function $O(t,e){ee(t.length!==0,"data too short","BUFFER_OVERRUN",{buffer:t,length:0,offset:1});const n=r=>{ee(r<=t.length,"data short segment too short","BUFFER_OVERRUN",{buffer:t,length:t.length,offset:r})};if(t[e]>=248){const r=t[e]-247;n(e+1+r);const s=Dk(t,e+1,r);return n(e+1+r+s),Uk(t,e,e+1+r,r+s)}else if(t[e]>=192){const r=t[e]-192;return n(e+1+r),Uk(t,e,e+1,r)}else if(t[e]>=184){const r=t[e]-183;n(e+1+r);const s=Dk(t,e+1,r);n(e+1+r+s);const i=we(t.slice(e+1+r,e+1+r+s));return{consumed:1+r+s,result:i}}else if(t[e]>=128){const r=t[e]-128;n(e+1+r);const s=we(t.slice(e+1,e+1+r));return{consumed:1+r,result:s}}return{consumed:1,result:AV(t[e])}}function Yy(t){const e=it(t,"data"),n=$O(e,0);return H(n.consumed===e.length,"unexpected junk after rlp payload","data",t),n.result}function Mk(t){const e=[];for(;t;)e.unshift(t&255),t>>=8;return e}function FO(t){if(Array.isArray(t)){let r=[];if(t.forEach(function(i){r=r.concat(FO(i))}),r.length<=55)return r.unshift(192+r.length),r;const s=Mk(r.length);return s.unshift(247+s.length),s.concat(r)}const e=Array.prototype.slice.call(it(t,"object"));if(e.length===1&&e[0]<=127)return e;if(e.length<=55)return e.unshift(128+e.length),e;const n=Mk(e.length);return n.unshift(183+n.length),n.concat(e)}const Lk="0123456789abcdef";function Wl(t){let e="0x";for(const n of FO(t))e+=Lk[n>>4],e+=Lk[n&15];return e}const HO=["wei","kwei","mwei","gwei","szabo","finney","ether"];function rt(t,e){let n=18;if(typeof e=="string"){const r=HO.indexOf(e);H(r>=0,"invalid unit","unit",e),n=3*r}else e!=null&&(n=Xe(e,"unit"));return Xx.fromValue(t,n,{decimals:n,width:512}).toString()}function Ir(t,e){H(typeof t=="string","value must be a string","value",t);let n=18;if(typeof e=="string"){const r=HO.indexOf(e);H(r>=0,"invalid unit","unit",e),n=3*r}else e!=null&&(n=Xe(e,"unit"));return Xx.fromString(t,{decimals:n,width:512}).value}function Uu(t){return rt(t,18)}function fg(t){return Ir(t,18)}const Kr=32,NC=new Uint8Array(Kr),TV=["then"],zw={},VO=new WeakMap;function Nu(t){return VO.get(t)}function Bk(t,e){VO.set(t,e)}function Om(t,e){const n=new Error(`deferred error during ABI decoding triggered accessing ${t}`);throw n.error=e,n}function CC(t,e,n){return t.indexOf(null)>=0?e.map((r,s)=>r instanceof jp?CC(Nu(r),r,n):r):t.reduce((r,s,i)=>{let a=e.getValue(s);return s in r||(n&&a instanceof jp&&(a=CC(Nu(a),a,n)),r[s]=a),r},{})}var zf;const yf=class yf extends Array{constructor(...n){const r=n[0];let s=n[1],i=(n[2]||[]).slice(),a=!0;r!==zw&&(s=n,i=[],a=!1);super(s.length);K(this,zf);s.forEach((u,d)=>{this[d]=u});const o=i.reduce((u,d)=>(typeof d=="string"&&u.set(d,(u.get(d)||0)+1),u),new Map);if(Bk(this,Object.freeze(s.map((u,d)=>{const h=i[d];return h!=null&&o.get(h)===1?h:null}))),B(this,zf,[]),C(this,zf)==null&&C(this,zf),!a)return;Object.freeze(this);const l=new Proxy(this,{get:(u,d,h)=>{if(typeof d=="string"){if(d.match(/^[0-9]+$/)){const p=Xe(d,"%index");if(p<0||p>=this.length)throw new RangeError("out of result range");const g=u[p];return g instanceof Error&&Om(`index ${p}`,g),g}if(TV.indexOf(d)>=0)return Reflect.get(u,d,h);const f=u[d];if(f instanceof Function)return function(...p){return f.apply(this===h?u:this,p)};if(!(d in u))return u.getValue.apply(this===h?u:this,[d])}return Reflect.get(u,d,h)}});return Bk(l,Nu(this)),l}toArray(n){const r=[];return this.forEach((s,i)=>{s instanceof Error&&Om(`index ${i}`,s),n&&s instanceof yf&&(s=s.toArray(n)),r.push(s)}),r}toObject(n){const r=Nu(this);return r.reduce((s,i,a)=>(ee(i!=null,`value at index ${a} unnamed`,"UNSUPPORTED_OPERATION",{operation:"toObject()"}),CC(r,this,n)),{})}slice(n,r){n==null&&(n=0),n<0&&(n+=this.length,n<0&&(n=0)),r==null&&(r=this.length),r<0&&(r+=this.length,r<0&&(r=0)),r>this.length&&(r=this.length);const s=Nu(this),i=[],a=[];for(let o=n;o<r;o++)i.push(this[o]),a.push(s[o]);return new yf(zw,i,a)}filter(n,r){const s=Nu(this),i=[],a=[];for(let o=0;o<this.length;o++){const l=this[o];l instanceof Error&&Om(`index ${o}`,l),n.call(r,l,o,this)&&(i.push(l),a.push(s[o]))}return new yf(zw,i,a)}map(n,r){const s=[];for(let i=0;i<this.length;i++){const a=this[i];a instanceof Error&&Om(`index ${i}`,a),s.push(n.call(r,a,i,this))}return s}getValue(n){const r=Nu(this).indexOf(n);if(r===-1)return;const s=this[r];return s instanceof Error&&Om(`property ${JSON.stringify(n)}`,s.error),s}static fromItems(n,r){return new yf(zw,n,r)}};zf=new WeakMap;let jp=yf;function $k(t){let e=Un(t);return ee(e.length<=Kr,"value out-of-bounds","BUFFER_OVERRUN",{buffer:e,length:Kr,offset:e.length}),e.length!==Kr&&(e=qr(gn([NC.slice(e.length%Kr),e]))),e}class bc{constructor(e,n,r,s){W(this,"name");W(this,"type");W(this,"localName");W(this,"dynamic");Fe(this,{name:e,type:n,localName:r,dynamic:s},{name:"string",type:"string",localName:"string",dynamic:"boolean"})}_throwError(e,n){H(!1,e,this.localName,n)}}var Mo,nd,Wf,Kb;class AC{constructor(){K(this,Wf);K(this,Mo);K(this,nd);B(this,Mo,[]),B(this,nd,0)}get data(){return gn(C(this,Mo))}get length(){return C(this,nd)}appendWriter(e){return ie(this,Wf,Kb).call(this,qr(e.data))}writeBytes(e){let n=qr(e);const r=n.length%Kr;return r&&(n=qr(gn([n,NC.slice(r)]))),ie(this,Wf,Kb).call(this,n)}writeValue(e){return ie(this,Wf,Kb).call(this,$k(e))}writeUpdatableValue(){const e=C(this,Mo).length;return C(this,Mo).push(NC),B(this,nd,C(this,nd)+Kr),n=>{C(this,Mo)[e]=$k(n)}}}Mo=new WeakMap,nd=new WeakMap,Wf=new WeakSet,Kb=function(e){return C(this,Mo).push(e),B(this,nd,C(this,nd)+e.length),e.length};var gs,zs,rd,sd,il,Xd,SC,zO;const r5=class r5{constructor(e,n,r){K(this,Xd);W(this,"allowLoose");K(this,gs);K(this,zs);K(this,rd);K(this,sd);K(this,il);Fe(this,{allowLoose:!!n}),B(this,gs,qr(e)),B(this,rd,0),B(this,sd,null),B(this,il,r??1024),B(this,zs,0)}get data(){return we(C(this,gs))}get dataLength(){return C(this,gs).length}get consumed(){return C(this,zs)}get bytes(){return new Uint8Array(C(this,gs))}subReader(e){const n=new r5(C(this,gs).slice(C(this,zs)+e),this.allowLoose,C(this,il));return B(n,sd,this),n}readBytes(e,n){let r=ie(this,Xd,zO).call(this,0,e,!!n);return ie(this,Xd,SC).call(this,e),B(this,zs,C(this,zs)+r.length),r.slice(0,e)}readValue(){return N1(this.readBytes(Kr))}readIndex(){return aV(this.readBytes(Kr))}};gs=new WeakMap,zs=new WeakMap,rd=new WeakMap,sd=new WeakMap,il=new WeakMap,Xd=new WeakSet,SC=function(e){var n;if(C(this,sd))return ie(n=C(this,sd),Xd,SC).call(n,e);B(this,rd,C(this,rd)+e),ee(C(this,il)<1||C(this,rd)<=C(this,il)*this.dataLength,`compressed ABI data exceeds inflation ratio of ${C(this,il)} ( see: https://github.com/ethers-io/ethers.js/issues/4537 )`,"BUFFER_OVERRUN",{buffer:qr(C(this,gs)),offset:C(this,zs),length:e,info:{bytesRead:C(this,rd),dataLength:this.dataLength}})},zO=function(e,n,r){let s=Math.ceil(n/Kr)*Kr;return C(this,zs)+s>C(this,gs).length&&(this.allowLoose&&r&&C(this,zs)+n<=C(this,gs).length?s=n:ee(!1,"data out-of-bounds","BUFFER_OVERRUN",{buffer:qr(C(this,gs)),length:C(this,gs).length,offset:C(this,zs)+s})),C(this,gs).slice(C(this,zs),C(this,zs)+s)};let TC=r5;function ev(t){if(!Number.isSafeInteger(t)||t<0)throw new Error(`Wrong positive integer: ${t}`)}function T6(t,...e){if(!(t instanceof Uint8Array))throw new Error("Expected Uint8Array");if(e.length>0&&!e.includes(t.length))throw new Error(`Expected Uint8Array of length ${e}, not of length=${t.length}`)}function SV(t){if(typeof t!="function"||typeof t.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");ev(t.outputLen),ev(t.blockLen)}function Op(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function WO(t,e){T6(t);const n=e.outputLen;if(t.length<n)throw new Error(`digestInto() expects output buffer of length at least ${n}`)}const XE=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */const qO=t=>t instanceof Uint8Array,kV=t=>new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4)),e2=t=>new DataView(t.buffer,t.byteOffset,t.byteLength),va=(t,e)=>t<<32-e|t>>>e,_V=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!_V)throw new Error("Non little-endian hardware is not supported");function IV(t){if(typeof t!="string")throw new Error(`utf8ToBytes expected string, got ${typeof t}`);return new Uint8Array(new TextEncoder().encode(t))}function C1(t){if(typeof t=="string"&&(t=IV(t)),!qO(t))throw new Error(`expected Uint8Array, got ${typeof t}`);return t}function PV(...t){const e=new Uint8Array(t.reduce((r,s)=>r+s.length,0));let n=0;return t.forEach(r=>{if(!qO(r))throw new Error("Uint8Array expected");e.set(r,n),n+=r.length}),e}let S6=class{clone(){return this._cloneInto()}};function k6(t){const e=r=>t().update(C1(r)).digest(),n=t();return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=()=>t(),e}function RV(t=32){if(XE&&typeof XE.getRandomValues=="function")return XE.getRandomValues(new Uint8Array(t));throw new Error("crypto.getRandomValues must be defined")}class KO extends S6{constructor(e,n){super(),this.finished=!1,this.destroyed=!1,SV(e);const r=C1(n);if(this.iHash=e.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const s=this.blockLen,i=new Uint8Array(s);i.set(r.length>s?e.create().update(r).digest():r);for(let a=0;a<i.length;a++)i[a]^=54;this.iHash.update(i),this.oHash=e.create();for(let a=0;a<i.length;a++)i[a]^=106;this.oHash.update(i),i.fill(0)}update(e){return Op(this),this.iHash.update(e),this}digestInto(e){Op(this),T6(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:n,iHash:r,finished:s,destroyed:i,blockLen:a,outputLen:o}=this;return e=e,e.finished=s,e.destroyed=i,e.blockLen=a,e.outputLen=o,e.oHash=n._cloneInto(e.oHash),e.iHash=r._cloneInto(e.iHash),e}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const GO=(t,e,n)=>new KO(t,e).update(n).digest();GO.create=(t,e)=>new KO(t,e);function jV(t,e,n,r){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,n,r);const s=BigInt(32),i=BigInt(4294967295),a=Number(n>>s&i),o=Number(n&i),l=r?4:0,u=r?0:4;t.setUint32(e+l,a,r),t.setUint32(e+u,o,r)}class YO extends S6{constructor(e,n,r,s){super(),this.blockLen=e,this.outputLen=n,this.padOffset=r,this.isLE=s,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=e2(this.buffer)}update(e){Op(this);const{view:n,buffer:r,blockLen:s}=this;e=C1(e);const i=e.length;for(let a=0;a<i;){const o=Math.min(s-this.pos,i-a);if(o===s){const l=e2(e);for(;s<=i-a;a+=s)this.process(l,a);continue}r.set(e.subarray(a,a+o),this.pos),this.pos+=o,a+=o,this.pos===s&&(this.process(n,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){Op(this),WO(e,this),this.finished=!0;const{buffer:n,view:r,blockLen:s,isLE:i}=this;let{pos:a}=this;n[a++]=128,this.buffer.subarray(a).fill(0),this.padOffset>s-a&&(this.process(r,0),a=0);for(let h=a;h<s;h++)n[h]=0;jV(r,s-8,BigInt(this.length*8),i),this.process(r,0);const o=e2(e),l=this.outputLen;if(l%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const u=l/4,d=this.get();if(u>d.length)throw new Error("_sha2: outputLen bigger than state");for(let h=0;h<u;h++)o.setUint32(4*h,d[h],i)}digest(){const{buffer:e,outputLen:n}=this;this.digestInto(e);const r=e.slice(0,n);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:n,buffer:r,length:s,finished:i,destroyed:a,pos:o}=this;return e.length=s,e.pos=o,e.finished=i,e.destroyed=a,s%n&&e.buffer.set(r),e}}const OV=(t,e,n)=>t&e^~t&n,DV=(t,e,n)=>t&e^t&n^e&n,UV=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Nc=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),Cc=new Uint32Array(64);class MV extends YO{constructor(){super(64,32,8,!1),this.A=Nc[0]|0,this.B=Nc[1]|0,this.C=Nc[2]|0,this.D=Nc[3]|0,this.E=Nc[4]|0,this.F=Nc[5]|0,this.G=Nc[6]|0,this.H=Nc[7]|0}get(){const{A:e,B:n,C:r,D:s,E:i,F:a,G:o,H:l}=this;return[e,n,r,s,i,a,o,l]}set(e,n,r,s,i,a,o,l){this.A=e|0,this.B=n|0,this.C=r|0,this.D=s|0,this.E=i|0,this.F=a|0,this.G=o|0,this.H=l|0}process(e,n){for(let h=0;h<16;h++,n+=4)Cc[h]=e.getUint32(n,!1);for(let h=16;h<64;h++){const f=Cc[h-15],p=Cc[h-2],g=va(f,7)^va(f,18)^f>>>3,m=va(p,17)^va(p,19)^p>>>10;Cc[h]=m+Cc[h-7]+g+Cc[h-16]|0}let{A:r,B:s,C:i,D:a,E:o,F:l,G:u,H:d}=this;for(let h=0;h<64;h++){const f=va(o,6)^va(o,11)^va(o,25),p=d+f+OV(o,l,u)+UV[h]+Cc[h]|0,m=(va(r,2)^va(r,13)^va(r,22))+DV(r,s,i)|0;d=u,u=l,l=o,o=a+p|0,a=i,i=s,s=r,r=p+m|0}r=r+this.A|0,s=s+this.B|0,i=i+this.C|0,a=a+this.D|0,o=o+this.E|0,l=l+this.F|0,u=u+this.G|0,d=d+this.H|0,this.set(r,s,i,a,o,l,u,d)}roundClean(){Cc.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}const QO=k6(()=>new MV),Ww=BigInt(2**32-1),kC=BigInt(32);function JO(t,e=!1){return e?{h:Number(t&Ww),l:Number(t>>kC&Ww)}:{h:Number(t>>kC&Ww)|0,l:Number(t&Ww)|0}}function ZO(t,e=!1){let n=new Uint32Array(t.length),r=new Uint32Array(t.length);for(let s=0;s<t.length;s++){const{h:i,l:a}=JO(t[s],e);[n[s],r[s]]=[i,a]}return[n,r]}const LV=(t,e)=>BigInt(t>>>0)<<kC|BigInt(e>>>0),BV=(t,e,n)=>t>>>n,$V=(t,e,n)=>t<<32-n|e>>>n,FV=(t,e,n)=>t>>>n|e<<32-n,HV=(t,e,n)=>t<<32-n|e>>>n,VV=(t,e,n)=>t<<64-n|e>>>n-32,zV=(t,e,n)=>t>>>n-32|e<<64-n,WV=(t,e)=>e,qV=(t,e)=>t,XO=(t,e,n)=>t<<n|e>>>32-n,e8=(t,e,n)=>e<<n|t>>>32-n,t8=(t,e,n)=>e<<n-32|t>>>64-n,n8=(t,e,n)=>t<<n-32|e>>>64-n;function KV(t,e,n,r){const s=(e>>>0)+(r>>>0);return{h:t+n+(s/2**32|0)|0,l:s|0}}const GV=(t,e,n)=>(t>>>0)+(e>>>0)+(n>>>0),YV=(t,e,n,r)=>e+n+r+(t/2**32|0)|0,QV=(t,e,n,r)=>(t>>>0)+(e>>>0)+(n>>>0)+(r>>>0),JV=(t,e,n,r,s)=>e+n+r+s+(t/2**32|0)|0,ZV=(t,e,n,r,s)=>(t>>>0)+(e>>>0)+(n>>>0)+(r>>>0)+(s>>>0),XV=(t,e,n,r,s,i)=>e+n+r+s+i+(t/2**32|0)|0,tt={fromBig:JO,split:ZO,toBig:LV,shrSH:BV,shrSL:$V,rotrSH:FV,rotrSL:HV,rotrBH:VV,rotrBL:zV,rotr32H:WV,rotr32L:qV,rotlSH:XO,rotlSL:e8,rotlBH:t8,rotlBL:n8,add:KV,add3L:GV,add3H:YV,add4L:QV,add4H:JV,add5H:XV,add5L:ZV},[ez,tz]=tt.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(t=>BigInt(t))),Ac=new Uint32Array(80),Tc=new Uint32Array(80);class nz extends YO{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){const{Ah:e,Al:n,Bh:r,Bl:s,Ch:i,Cl:a,Dh:o,Dl:l,Eh:u,El:d,Fh:h,Fl:f,Gh:p,Gl:g,Hh:m,Hl:y}=this;return[e,n,r,s,i,a,o,l,u,d,h,f,p,g,m,y]}set(e,n,r,s,i,a,o,l,u,d,h,f,p,g,m,y){this.Ah=e|0,this.Al=n|0,this.Bh=r|0,this.Bl=s|0,this.Ch=i|0,this.Cl=a|0,this.Dh=o|0,this.Dl=l|0,this.Eh=u|0,this.El=d|0,this.Fh=h|0,this.Fl=f|0,this.Gh=p|0,this.Gl=g|0,this.Hh=m|0,this.Hl=y|0}process(e,n){for(let x=0;x<16;x++,n+=4)Ac[x]=e.getUint32(n),Tc[x]=e.getUint32(n+=4);for(let x=16;x<80;x++){const A=Ac[x-15]|0,T=Tc[x-15]|0,j=tt.rotrSH(A,T,1)^tt.rotrSH(A,T,8)^tt.shrSH(A,T,7),P=tt.rotrSL(A,T,1)^tt.rotrSL(A,T,8)^tt.shrSL(A,T,7),S=Ac[x-2]|0,E=Tc[x-2]|0,k=tt.rotrSH(S,E,19)^tt.rotrBH(S,E,61)^tt.shrSH(S,E,6),R=tt.rotrSL(S,E,19)^tt.rotrBL(S,E,61)^tt.shrSL(S,E,6),O=tt.add4L(P,R,Tc[x-7],Tc[x-16]),F=tt.add4H(O,j,k,Ac[x-7],Ac[x-16]);Ac[x]=F|0,Tc[x]=O|0}let{Ah:r,Al:s,Bh:i,Bl:a,Ch:o,Cl:l,Dh:u,Dl:d,Eh:h,El:f,Fh:p,Fl:g,Gh:m,Gl:y,Hh:b,Hl:w}=this;for(let x=0;x<80;x++){const A=tt.rotrSH(h,f,14)^tt.rotrSH(h,f,18)^tt.rotrBH(h,f,41),T=tt.rotrSL(h,f,14)^tt.rotrSL(h,f,18)^tt.rotrBL(h,f,41),j=h&p^~h&m,P=f&g^~f&y,S=tt.add5L(w,T,P,tz[x],Tc[x]),E=tt.add5H(S,b,A,j,ez[x],Ac[x]),k=S|0,R=tt.rotrSH(r,s,28)^tt.rotrBH(r,s,34)^tt.rotrBH(r,s,39),O=tt.rotrSL(r,s,28)^tt.rotrBL(r,s,34)^tt.rotrBL(r,s,39),F=r&i^r&o^i&o,z=s&a^s&l^a&l;b=m|0,w=y|0,m=p|0,y=g|0,p=h|0,g=f|0,{h,l:f}=tt.add(u|0,d|0,E|0,k|0),u=o|0,d=l|0,o=i|0,l=a|0,i=r|0,a=s|0;const N=tt.add3L(k,O,z);r=tt.add3H(N,E,R,F),s=N|0}({h:r,l:s}=tt.add(this.Ah|0,this.Al|0,r|0,s|0)),{h:i,l:a}=tt.add(this.Bh|0,this.Bl|0,i|0,a|0),{h:o,l}=tt.add(this.Ch|0,this.Cl|0,o|0,l|0),{h:u,l:d}=tt.add(this.Dh|0,this.Dl|0,u|0,d|0),{h,l:f}=tt.add(this.Eh|0,this.El|0,h|0,f|0),{h:p,l:g}=tt.add(this.Fh|0,this.Fl|0,p|0,g|0),{h:m,l:y}=tt.add(this.Gh|0,this.Gl|0,m|0,y|0),{h:b,l:w}=tt.add(this.Hh|0,this.Hl|0,b|0,w|0),this.set(r,s,i,a,o,l,u,d,h,f,p,g,m,y,b,w)}roundClean(){Ac.fill(0),Tc.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}const rz=k6(()=>new nz);function sz(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof globalThis<"u")return globalThis;throw new Error("unable to locate global object")}const Fk=sz();Fk.crypto||Fk.msCrypto;function iz(t){switch(t){case"sha256":return QO.create();case"sha512":return rz.create()}H(!1,"invalid hashing algorithm name","algorithm",t)}const[r8,s8,i8]=[[],[],[]],az=BigInt(0),Dm=BigInt(1),oz=BigInt(2),cz=BigInt(7),lz=BigInt(256),uz=BigInt(113);for(let t=0,e=Dm,n=1,r=0;t<24;t++){[n,r]=[r,(2*n+3*r)%5],r8.push(2*(5*r+n)),s8.push((t+1)*(t+2)/2%64);let s=az;for(let i=0;i<7;i++)e=(e<<Dm^(e>>cz)*uz)%lz,e&oz&&(s^=Dm<<(Dm<<BigInt(i))-Dm);i8.push(s)}const[dz,hz]=ZO(i8,!0),Hk=(t,e,n)=>n>32?t8(t,e,n):XO(t,e,n),Vk=(t,e,n)=>n>32?n8(t,e,n):e8(t,e,n);function fz(t,e=24){const n=new Uint32Array(10);for(let r=24-e;r<24;r++){for(let a=0;a<10;a++)n[a]=t[a]^t[a+10]^t[a+20]^t[a+30]^t[a+40];for(let a=0;a<10;a+=2){const o=(a+8)%10,l=(a+2)%10,u=n[l],d=n[l+1],h=Hk(u,d,1)^n[o],f=Vk(u,d,1)^n[o+1];for(let p=0;p<50;p+=10)t[a+p]^=h,t[a+p+1]^=f}let s=t[2],i=t[3];for(let a=0;a<24;a++){const o=s8[a],l=Hk(s,i,o),u=Vk(s,i,o),d=r8[a];s=t[d],i=t[d+1],t[d]=l,t[d+1]=u}for(let a=0;a<50;a+=10){for(let o=0;o<10;o++)n[o]=t[a+o];for(let o=0;o<10;o++)t[a+o]^=~n[(o+2)%10]&n[(o+4)%10]}t[0]^=dz[r],t[1]^=hz[r]}n.fill(0)}let pz=class a8 extends S6{constructor(e,n,r,s=!1,i=24){if(super(),this.blockLen=e,this.suffix=n,this.outputLen=r,this.enableXOF=s,this.rounds=i,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,ev(r),0>=this.blockLen||this.blockLen>=200)throw new Error("Sha3 supports only keccak-f1600 function");this.state=new Uint8Array(200),this.state32=kV(this.state)}keccak(){fz(this.state32,this.rounds),this.posOut=0,this.pos=0}update(e){Op(this);const{blockLen:n,state:r}=this;e=C1(e);const s=e.length;for(let i=0;i<s;){const a=Math.min(n-this.pos,s-i);for(let o=0;o<a;o++)r[this.pos++]^=e[i++];this.pos===n&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:e,suffix:n,pos:r,blockLen:s}=this;e[r]^=n,n&128&&r===s-1&&this.keccak(),e[s-1]^=128,this.keccak()}writeInto(e){Op(this,!1),T6(e),this.finish();const n=this.state,{blockLen:r}=this;for(let s=0,i=e.length;s<i;){this.posOut>=r&&this.keccak();const a=Math.min(r-this.posOut,i-s);e.set(n.subarray(this.posOut,this.posOut+a),s),this.posOut+=a,s+=a}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return ev(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(WO(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(e){const{blockLen:n,suffix:r,outputLen:s,rounds:i,enableXOF:a}=this;return e||(e=new a8(n,r,s,a,i)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=i,e.suffix=r,e.outputLen=s,e.enableXOF=a,e.destroyed=this.destroyed,e}};const mz=(t,e,n)=>k6(()=>new pz(e,t,n)),gz=mz(1,136,256/8);let o8=!1;const c8=function(t){return gz(t)};let l8=c8;function Tn(t){const e=it(t,"data");return we(l8(e))}Tn._=c8;Tn.lock=function(){o8=!0};Tn.register=function(t){if(o8)throw new TypeError("keccak256 is locked");l8=t};Object.freeze(Tn);const u8=function(t){return iz("sha256").update(t).digest()};let d8=u8,h8=!1;function lm(t){const e=it(t,"data");return we(d8(e))}lm._=u8;lm.lock=function(){h8=!0};lm.register=function(t){if(h8)throw new Error("sha256 is locked");d8=t};Object.freeze(lm);Object.freeze(lm);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const f8=BigInt(0),A1=BigInt(1),yz=BigInt(2),T1=t=>t instanceof Uint8Array,wz=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function Dp(t){if(!T1(t))throw new Error("Uint8Array expected");let e="";for(let n=0;n<t.length;n++)e+=wz[t[n]];return e}function p8(t){const e=t.toString(16);return e.length&1?`0${e}`:e}function _6(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);return BigInt(t===""?"0":`0x${t}`)}function Up(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);const e=t.length;if(e%2)throw new Error("padded hex string expected, got unpadded hex of length "+e);const n=new Uint8Array(e/2);for(let r=0;r<n.length;r++){const s=r*2,i=t.slice(s,s+2),a=Number.parseInt(i,16);if(Number.isNaN(a)||a<0)throw new Error("Invalid byte sequence");n[r]=a}return n}function wd(t){return _6(Dp(t))}function I6(t){if(!T1(t))throw new Error("Uint8Array expected");return _6(Dp(Uint8Array.from(t).reverse()))}function Mp(t,e){return Up(t.toString(16).padStart(e*2,"0"))}function P6(t,e){return Mp(t,e).reverse()}function bz(t){return Up(p8(t))}function qi(t,e,n){let r;if(typeof e=="string")try{r=Up(e)}catch(i){throw new Error(`${t} must be valid hex string, got "${e}". Cause: ${i}`)}else if(T1(e))r=Uint8Array.from(e);else throw new Error(`${t} must be hex string or Uint8Array`);const s=r.length;if(typeof n=="number"&&s!==n)throw new Error(`${t} expected ${n} bytes, got ${s}`);return r}function T0(...t){const e=new Uint8Array(t.reduce((r,s)=>r+s.length,0));let n=0;return t.forEach(r=>{if(!T1(r))throw new Error("Uint8Array expected");e.set(r,n),n+=r.length}),e}function xz(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}function vz(t){if(typeof t!="string")throw new Error(`utf8ToBytes expected string, got ${typeof t}`);return new Uint8Array(new TextEncoder().encode(t))}function Ez(t){let e;for(e=0;t>f8;t>>=A1,e+=1);return e}function Nz(t,e){return t>>BigInt(e)&A1}const Cz=(t,e,n)=>t|(n?A1:f8)<<BigInt(e),R6=t=>(yz<<BigInt(t-1))-A1,t2=t=>new Uint8Array(t),zk=t=>Uint8Array.from(t);function m8(t,e,n){if(typeof t!="number"||t<2)throw new Error("hashLen must be a number");if(typeof e!="number"||e<2)throw new Error("qByteLen must be a number");if(typeof n!="function")throw new Error("hmacFn must be a function");let r=t2(t),s=t2(t),i=0;const a=()=>{r.fill(1),s.fill(0),i=0},o=(...h)=>n(s,r,...h),l=(h=t2())=>{s=o(zk([0]),h),r=o(),h.length!==0&&(s=o(zk([1]),h),r=o())},u=()=>{if(i++>=1e3)throw new Error("drbg: tried 1000 values");let h=0;const f=[];for(;h<e;){r=o();const p=r.slice();f.push(p),h+=r.length}return T0(...f)};return(h,f)=>{a(),l(h);let p;for(;!(p=f(u()));)l();return a(),p}}const Az={bigint:t=>typeof t=="bigint",function:t=>typeof t=="function",boolean:t=>typeof t=="boolean",string:t=>typeof t=="string",stringOrUint8Array:t=>typeof t=="string"||t instanceof Uint8Array,isSafeInteger:t=>Number.isSafeInteger(t),array:t=>Array.isArray(t),field:(t,e)=>e.Fp.isValid(t),hash:t=>typeof t=="function"&&Number.isSafeInteger(t.outputLen)};function Qy(t,e,n={}){const r=(s,i,a)=>{const o=Az[i];if(typeof o!="function")throw new Error(`Invalid validator "${i}", expected function`);const l=t[s];if(!(a&&l===void 0)&&!o(l,t))throw new Error(`Invalid param ${String(s)}=${l} (${typeof l}), expected ${i}`)};for(const[s,i]of Object.entries(e))r(s,i,!1);for(const[s,i]of Object.entries(n))r(s,i,!0);return t}const Tz=Object.freeze(Object.defineProperty({__proto__:null,bitGet:Nz,bitLen:Ez,bitMask:R6,bitSet:Cz,bytesToHex:Dp,bytesToNumberBE:wd,bytesToNumberLE:I6,concatBytes:T0,createHmacDrbg:m8,ensureBytes:qi,equalBytes:xz,hexToBytes:Up,hexToNumber:_6,numberToBytesBE:Mp,numberToBytesLE:P6,numberToHexUnpadded:p8,numberToVarBytesBE:bz,utf8ToBytes:vz,validateObject:Qy},Symbol.toStringTag,{value:"Module"}));/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Kn=BigInt(0),bn=BigInt(1),Cu=BigInt(2),Sz=BigInt(3),_C=BigInt(4),Wk=BigInt(5),qk=BigInt(8);BigInt(9);BigInt(16);function xs(t,e){const n=t%e;return n>=Kn?n:e+n}function kz(t,e,n){if(n<=Kn||e<Kn)throw new Error("Expected power/modulo > 0");if(n===bn)return Kn;let r=bn;for(;e>Kn;)e&bn&&(r=r*t%n),t=t*t%n,e>>=bn;return r}function oi(t,e,n){let r=t;for(;e-- >Kn;)r*=r,r%=n;return r}function IC(t,e){if(t===Kn||e<=Kn)throw new Error(`invert: expected positive integers, got n=${t} mod=${e}`);let n=xs(t,e),r=e,s=Kn,i=bn;for(;n!==Kn;){const o=r/n,l=r%n,u=s-i*o;r=n,n=l,s=i,i=u}if(r!==bn)throw new Error("invert: does not exist");return xs(s,e)}function _z(t){const e=(t-bn)/Cu;let n,r,s;for(n=t-bn,r=0;n%Cu===Kn;n/=Cu,r++);for(s=Cu;s<t&&kz(s,e,t)!==t-bn;s++);if(r===1){const a=(t+bn)/_C;return function(l,u){const d=l.pow(u,a);if(!l.eql(l.sqr(d),u))throw new Error("Cannot find square root");return d}}const i=(n+bn)/Cu;return function(o,l){if(o.pow(l,e)===o.neg(o.ONE))throw new Error("Cannot find square root");let u=r,d=o.pow(o.mul(o.ONE,s),n),h=o.pow(l,i),f=o.pow(l,n);for(;!o.eql(f,o.ONE);){if(o.eql(f,o.ZERO))return o.ZERO;let p=1;for(let m=o.sqr(f);p<u&&!o.eql(m,o.ONE);p++)m=o.sqr(m);const g=o.pow(d,bn<<BigInt(u-p-1));d=o.sqr(g),h=o.mul(h,g),f=o.mul(f,d),u=p}return h}}function Iz(t){if(t%_C===Sz){const e=(t+bn)/_C;return function(r,s){const i=r.pow(s,e);if(!r.eql(r.sqr(i),s))throw new Error("Cannot find square root");return i}}if(t%qk===Wk){const e=(t-Wk)/qk;return function(r,s){const i=r.mul(s,Cu),a=r.pow(i,e),o=r.mul(s,a),l=r.mul(r.mul(o,Cu),a),u=r.mul(o,r.sub(l,r.ONE));if(!r.eql(r.sqr(u),s))throw new Error("Cannot find square root");return u}}return _z(t)}const Pz=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function Rz(t){const e={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},n=Pz.reduce((r,s)=>(r[s]="function",r),e);return Qy(t,n)}function jz(t,e,n){if(n<Kn)throw new Error("Expected power > 0");if(n===Kn)return t.ONE;if(n===bn)return e;let r=t.ONE,s=e;for(;n>Kn;)n&bn&&(r=t.mul(r,s)),s=t.sqr(s),n>>=bn;return r}function Oz(t,e){const n=new Array(e.length),r=e.reduce((i,a,o)=>t.is0(a)?i:(n[o]=i,t.mul(i,a)),t.ONE),s=t.inv(r);return e.reduceRight((i,a,o)=>t.is0(a)?i:(n[o]=t.mul(i,n[o]),t.mul(i,a)),s),n}function g8(t,e){const n=e!==void 0?e:t.toString(2).length,r=Math.ceil(n/8);return{nBitLength:n,nByteLength:r}}function Dz(t,e,n=!1,r={}){if(t<=Kn)throw new Error(`Expected Field ORDER > 0, got ${t}`);const{nBitLength:s,nByteLength:i}=g8(t,e);if(i>2048)throw new Error("Field lengths over 2048 bytes are not supported");const a=Iz(t),o=Object.freeze({ORDER:t,BITS:s,BYTES:i,MASK:R6(s),ZERO:Kn,ONE:bn,create:l=>xs(l,t),isValid:l=>{if(typeof l!="bigint")throw new Error(`Invalid field element: expected bigint, got ${typeof l}`);return Kn<=l&&l<t},is0:l=>l===Kn,isOdd:l=>(l&bn)===bn,neg:l=>xs(-l,t),eql:(l,u)=>l===u,sqr:l=>xs(l*l,t),add:(l,u)=>xs(l+u,t),sub:(l,u)=>xs(l-u,t),mul:(l,u)=>xs(l*u,t),pow:(l,u)=>jz(o,l,u),div:(l,u)=>xs(l*IC(u,t),t),sqrN:l=>l*l,addN:(l,u)=>l+u,subN:(l,u)=>l-u,mulN:(l,u)=>l*u,inv:l=>IC(l,t),sqrt:r.sqrt||(l=>a(o,l)),invertBatch:l=>Oz(o,l),cmov:(l,u,d)=>d?u:l,toBytes:l=>n?P6(l,i):Mp(l,i),fromBytes:l=>{if(l.length!==i)throw new Error(`Fp.fromBytes: expected ${i}, got ${l.length}`);return n?I6(l):wd(l)}});return Object.freeze(o)}function y8(t){if(typeof t!="bigint")throw new Error("field order must be bigint");const e=t.toString(2).length;return Math.ceil(e/8)}function w8(t){const e=y8(t);return e+Math.ceil(e/2)}function Uz(t,e,n=!1){const r=t.length,s=y8(e),i=w8(e);if(r<16||r<i||r>1024)throw new Error(`expected ${i}-1024 bytes of input, got ${r}`);const a=n?wd(t):I6(t),o=xs(a,e-bn)+bn;return n?P6(o,s):Mp(o,s)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Mz=BigInt(0),n2=BigInt(1);function Lz(t,e){const n=(s,i)=>{const a=i.negate();return s?a:i},r=s=>{const i=Math.ceil(e/s)+1,a=2**(s-1);return{windows:i,windowSize:a}};return{constTimeNegate:n,unsafeLadder(s,i){let a=t.ZERO,o=s;for(;i>Mz;)i&n2&&(a=a.add(o)),o=o.double(),i>>=n2;return a},precomputeWindow(s,i){const{windows:a,windowSize:o}=r(i),l=[];let u=s,d=u;for(let h=0;h<a;h++){d=u,l.push(d);for(let f=1;f<o;f++)d=d.add(u),l.push(d);u=d.double()}return l},wNAF(s,i,a){const{windows:o,windowSize:l}=r(s);let u=t.ZERO,d=t.BASE;const h=BigInt(2**s-1),f=2**s,p=BigInt(s);for(let g=0;g<o;g++){const m=g*l;let y=Number(a&h);a>>=p,y>l&&(y-=f,a+=n2);const b=m,w=m+Math.abs(y)-1,x=g%2!==0,A=y<0;y===0?d=d.add(n(x,i[b])):u=u.add(n(A,i[w]))}return{p:u,f:d}},wNAFCached(s,i,a,o){const l=s._WINDOW_SIZE||1;let u=i.get(s);return u||(u=this.precomputeWindow(s,l),l!==1&&i.set(s,o(u))),this.wNAF(l,u,a)}}}function b8(t){return Rz(t.Fp),Qy(t,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...g8(t.n,t.nBitLength),...t,p:t.Fp.ORDER})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function Bz(t){const e=b8(t);Qy(e,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});const{endo:n,Fp:r,a:s}=e;if(n){if(!r.eql(s,r.ZERO))throw new Error("Endomorphism can only be defined for Koblitz curves that have a=0");if(typeof n!="object"||typeof n.beta!="bigint"||typeof n.splitScalar!="function")throw new Error("Expected endomorphism with beta: bigint and splitScalar: function")}return Object.freeze({...e})}const{bytesToNumberBE:$z,hexToBytes:Fz}=Tz,Mu={Err:class extends Error{constructor(e=""){super(e)}},_parseInt(t){const{Err:e}=Mu;if(t.length<2||t[0]!==2)throw new e("Invalid signature integer tag");const n=t[1],r=t.subarray(2,n+2);if(!n||r.length!==n)throw new e("Invalid signature integer: wrong length");if(r[0]&128)throw new e("Invalid signature integer: negative");if(r[0]===0&&!(r[1]&128))throw new e("Invalid signature integer: unnecessary leading zero");return{d:$z(r),l:t.subarray(n+2)}},toSig(t){const{Err:e}=Mu,n=typeof t=="string"?Fz(t):t;if(!(n instanceof Uint8Array))throw new Error("ui8a expected");let r=n.length;if(r<2||n[0]!=48)throw new e("Invalid signature tag");if(n[1]!==r-2)throw new e("Invalid signature: incorrect length");const{d:s,l:i}=Mu._parseInt(n.subarray(2)),{d:a,l:o}=Mu._parseInt(i);if(o.length)throw new e("Invalid signature: left bytes after parsing");return{r:s,s:a}},hexFromSig(t){const e=u=>Number.parseInt(u[0],16)&8?"00"+u:u,n=u=>{const d=u.toString(16);return d.length&1?`0${d}`:d},r=e(n(t.s)),s=e(n(t.r)),i=r.length/2,a=s.length/2,o=n(i),l=n(a);return`30${n(a+i+4)}02${l}${s}02${o}${r}`}},qo=BigInt(0),bi=BigInt(1);BigInt(2);const Kk=BigInt(3);BigInt(4);function Hz(t){const e=Bz(t),{Fp:n}=e,r=e.toBytes||((g,m,y)=>{const b=m.toAffine();return T0(Uint8Array.from([4]),n.toBytes(b.x),n.toBytes(b.y))}),s=e.fromBytes||(g=>{const m=g.subarray(1),y=n.fromBytes(m.subarray(0,n.BYTES)),b=n.fromBytes(m.subarray(n.BYTES,2*n.BYTES));return{x:y,y:b}});function i(g){const{a:m,b:y}=e,b=n.sqr(g),w=n.mul(b,g);return n.add(n.add(w,n.mul(g,m)),y)}if(!n.eql(n.sqr(e.Gy),i(e.Gx)))throw new Error("bad generator point: equation left != right");function a(g){return typeof g=="bigint"&&qo<g&&g<e.n}function o(g){if(!a(g))throw new Error("Expected valid bigint: 0 < bigint < curve.n")}function l(g){const{allowedPrivateKeyLengths:m,nByteLength:y,wrapPrivateKey:b,n:w}=e;if(m&&typeof g!="bigint"){if(g instanceof Uint8Array&&(g=Dp(g)),typeof g!="string"||!m.includes(g.length))throw new Error("Invalid key");g=g.padStart(y*2,"0")}let x;try{x=typeof g=="bigint"?g:wd(qi("private key",g,y))}catch{throw new Error(`private key must be ${y} bytes, hex or bigint, not ${typeof g}`)}return b&&(x=xs(x,w)),o(x),x}const u=new Map;function d(g){if(!(g instanceof h))throw new Error("ProjectivePoint expected")}class h{constructor(m,y,b){if(this.px=m,this.py=y,this.pz=b,m==null||!n.isValid(m))throw new Error("x required");if(y==null||!n.isValid(y))throw new Error("y required");if(b==null||!n.isValid(b))throw new Error("z required")}static fromAffine(m){const{x:y,y:b}=m||{};if(!m||!n.isValid(y)||!n.isValid(b))throw new Error("invalid affine point");if(m instanceof h)throw new Error("projective point not allowed");const w=x=>n.eql(x,n.ZERO);return w(y)&&w(b)?h.ZERO:new h(y,b,n.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(m){const y=n.invertBatch(m.map(b=>b.pz));return m.map((b,w)=>b.toAffine(y[w])).map(h.fromAffine)}static fromHex(m){const y=h.fromAffine(s(qi("pointHex",m)));return y.assertValidity(),y}static fromPrivateKey(m){return h.BASE.multiply(l(m))}_setWindowSize(m){this._WINDOW_SIZE=m,u.delete(this)}assertValidity(){if(this.is0()){if(e.allowInfinityPoint&&!n.is0(this.py))return;throw new Error("bad point: ZERO")}const{x:m,y}=this.toAffine();if(!n.isValid(m)||!n.isValid(y))throw new Error("bad point: x or y not FE");const b=n.sqr(y),w=i(m);if(!n.eql(b,w))throw new Error("bad point: equation left != right");if(!this.isTorsionFree())throw new Error("bad point: not in prime-order subgroup")}hasEvenY(){const{y:m}=this.toAffine();if(n.isOdd)return!n.isOdd(m);throw new Error("Field doesn't support isOdd")}equals(m){d(m);const{px:y,py:b,pz:w}=this,{px:x,py:A,pz:T}=m,j=n.eql(n.mul(y,T),n.mul(x,w)),P=n.eql(n.mul(b,T),n.mul(A,w));return j&&P}negate(){return new h(this.px,n.neg(this.py),this.pz)}double(){const{a:m,b:y}=e,b=n.mul(y,Kk),{px:w,py:x,pz:A}=this;let T=n.ZERO,j=n.ZERO,P=n.ZERO,S=n.mul(w,w),E=n.mul(x,x),k=n.mul(A,A),R=n.mul(w,x);return R=n.add(R,R),P=n.mul(w,A),P=n.add(P,P),T=n.mul(m,P),j=n.mul(b,k),j=n.add(T,j),T=n.sub(E,j),j=n.add(E,j),j=n.mul(T,j),T=n.mul(R,T),P=n.mul(b,P),k=n.mul(m,k),R=n.sub(S,k),R=n.mul(m,R),R=n.add(R,P),P=n.add(S,S),S=n.add(P,S),S=n.add(S,k),S=n.mul(S,R),j=n.add(j,S),k=n.mul(x,A),k=n.add(k,k),S=n.mul(k,R),T=n.sub(T,S),P=n.mul(k,E),P=n.add(P,P),P=n.add(P,P),new h(T,j,P)}add(m){d(m);const{px:y,py:b,pz:w}=this,{px:x,py:A,pz:T}=m;let j=n.ZERO,P=n.ZERO,S=n.ZERO;const E=e.a,k=n.mul(e.b,Kk);let R=n.mul(y,x),O=n.mul(b,A),F=n.mul(w,T),z=n.add(y,b),N=n.add(x,A);z=n.mul(z,N),N=n.add(R,O),z=n.sub(z,N),N=n.add(y,w);let I=n.add(x,T);return N=n.mul(N,I),I=n.add(R,F),N=n.sub(N,I),I=n.add(b,w),j=n.add(A,T),I=n.mul(I,j),j=n.add(O,F),I=n.sub(I,j),S=n.mul(E,N),j=n.mul(k,F),S=n.add(j,S),j=n.sub(O,S),S=n.add(O,S),P=n.mul(j,S),O=n.add(R,R),O=n.add(O,R),F=n.mul(E,F),N=n.mul(k,N),O=n.add(O,F),F=n.sub(R,F),F=n.mul(E,F),N=n.add(N,F),R=n.mul(O,N),P=n.add(P,R),R=n.mul(I,N),j=n.mul(z,j),j=n.sub(j,R),R=n.mul(z,O),S=n.mul(I,S),S=n.add(S,R),new h(j,P,S)}subtract(m){return this.add(m.negate())}is0(){return this.equals(h.ZERO)}wNAF(m){return p.wNAFCached(this,u,m,y=>{const b=n.invertBatch(y.map(w=>w.pz));return y.map((w,x)=>w.toAffine(b[x])).map(h.fromAffine)})}multiplyUnsafe(m){const y=h.ZERO;if(m===qo)return y;if(o(m),m===bi)return this;const{endo:b}=e;if(!b)return p.unsafeLadder(this,m);let{k1neg:w,k1:x,k2neg:A,k2:T}=b.splitScalar(m),j=y,P=y,S=this;for(;x>qo||T>qo;)x&bi&&(j=j.add(S)),T&bi&&(P=P.add(S)),S=S.double(),x>>=bi,T>>=bi;return w&&(j=j.negate()),A&&(P=P.negate()),P=new h(n.mul(P.px,b.beta),P.py,P.pz),j.add(P)}multiply(m){o(m);let y=m,b,w;const{endo:x}=e;if(x){const{k1neg:A,k1:T,k2neg:j,k2:P}=x.splitScalar(y);let{p:S,f:E}=this.wNAF(T),{p:k,f:R}=this.wNAF(P);S=p.constTimeNegate(A,S),k=p.constTimeNegate(j,k),k=new h(n.mul(k.px,x.beta),k.py,k.pz),b=S.add(k),w=E.add(R)}else{const{p:A,f:T}=this.wNAF(y);b=A,w=T}return h.normalizeZ([b,w])[0]}multiplyAndAddUnsafe(m,y,b){const w=h.BASE,x=(T,j)=>j===qo||j===bi||!T.equals(w)?T.multiplyUnsafe(j):T.multiply(j),A=x(this,y).add(x(m,b));return A.is0()?void 0:A}toAffine(m){const{px:y,py:b,pz:w}=this,x=this.is0();m==null&&(m=x?n.ONE:n.inv(w));const A=n.mul(y,m),T=n.mul(b,m),j=n.mul(w,m);if(x)return{x:n.ZERO,y:n.ZERO};if(!n.eql(j,n.ONE))throw new Error("invZ was invalid");return{x:A,y:T}}isTorsionFree(){const{h:m,isTorsionFree:y}=e;if(m===bi)return!0;if(y)return y(h,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:m,clearCofactor:y}=e;return m===bi?this:y?y(h,this):this.multiplyUnsafe(e.h)}toRawBytes(m=!0){return this.assertValidity(),r(h,this,m)}toHex(m=!0){return Dp(this.toRawBytes(m))}}h.BASE=new h(e.Gx,e.Gy,n.ONE),h.ZERO=new h(n.ZERO,n.ONE,n.ZERO);const f=e.nBitLength,p=Lz(h,e.endo?Math.ceil(f/2):f);return{CURVE:e,ProjectivePoint:h,normPrivateKeyToScalar:l,weierstrassEquation:i,isWithinCurveOrder:a}}function Vz(t){const e=b8(t);return Qy(e,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...e})}function zz(t){const e=Vz(t),{Fp:n,n:r}=e,s=n.BYTES+1,i=2*n.BYTES+1;function a(N){return qo<N&&N<n.ORDER}function o(N){return xs(N,r)}function l(N){return IC(N,r)}const{ProjectivePoint:u,normPrivateKeyToScalar:d,weierstrassEquation:h,isWithinCurveOrder:f}=Hz({...e,toBytes(N,I,M){const D=I.toAffine(),L=n.toBytes(D.x),$=T0;return M?$(Uint8Array.from([I.hasEvenY()?2:3]),L):$(Uint8Array.from([4]),L,n.toBytes(D.y))},fromBytes(N){const I=N.length,M=N[0],D=N.subarray(1);if(I===s&&(M===2||M===3)){const L=wd(D);if(!a(L))throw new Error("Point is not on curve");const $=h(L);let V=n.sqrt($);const q=(V&bi)===bi;return(M&1)===1!==q&&(V=n.neg(V)),{x:L,y:V}}else if(I===i&&M===4){const L=n.fromBytes(D.subarray(0,n.BYTES)),$=n.fromBytes(D.subarray(n.BYTES,2*n.BYTES));return{x:L,y:$}}else throw new Error(`Point of length ${I} was invalid. Expected ${s} compressed bytes or ${i} uncompressed bytes`)}}),p=N=>Dp(Mp(N,e.nByteLength));function g(N){const I=r>>bi;return N>I}function m(N){return g(N)?o(-N):N}const y=(N,I,M)=>wd(N.slice(I,M));class b{constructor(I,M,D){this.r=I,this.s=M,this.recovery=D,this.assertValidity()}static fromCompact(I){const M=e.nByteLength;return I=qi("compactSignature",I,M*2),new b(y(I,0,M),y(I,M,2*M))}static fromDER(I){const{r:M,s:D}=Mu.toSig(qi("DER",I));return new b(M,D)}assertValidity(){if(!f(this.r))throw new Error("r must be 0 < r < CURVE.n");if(!f(this.s))throw new Error("s must be 0 < s < CURVE.n")}addRecoveryBit(I){return new b(this.r,this.s,I)}recoverPublicKey(I){const{r:M,s:D,recovery:L}=this,$=P(qi("msgHash",I));if(L==null||![0,1,2,3].includes(L))throw new Error("recovery id invalid");const V=L===2||L===3?M+e.n:M;if(V>=n.ORDER)throw new Error("recovery id 2 or 3 invalid");const q=L&1?"03":"02",G=u.fromHex(q+p(V)),Z=l(V),oe=o(-$*Z),xe=o(D*Z),J=u.BASE.multiplyAndAddUnsafe(G,oe,xe);if(!J)throw new Error("point at infinify");return J.assertValidity(),J}hasHighS(){return g(this.s)}normalizeS(){return this.hasHighS()?new b(this.r,o(-this.s),this.recovery):this}toDERRawBytes(){return Up(this.toDERHex())}toDERHex(){return Mu.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return Up(this.toCompactHex())}toCompactHex(){return p(this.r)+p(this.s)}}const w={isValidPrivateKey(N){try{return d(N),!0}catch{return!1}},normPrivateKeyToScalar:d,randomPrivateKey:()=>{const N=w8(e.n);return Uz(e.randomBytes(N),e.n)},precompute(N=8,I=u.BASE){return I._setWindowSize(N),I.multiply(BigInt(3)),I}};function x(N,I=!0){return u.fromPrivateKey(N).toRawBytes(I)}function A(N){const I=N instanceof Uint8Array,M=typeof N=="string",D=(I||M)&&N.length;return I?D===s||D===i:M?D===2*s||D===2*i:N instanceof u}function T(N,I,M=!0){if(A(N))throw new Error("first arg must be private key");if(!A(I))throw new Error("second arg must be public key");return u.fromHex(I).multiply(d(N)).toRawBytes(M)}const j=e.bits2int||function(N){const I=wd(N),M=N.length*8-e.nBitLength;return M>0?I>>BigInt(M):I},P=e.bits2int_modN||function(N){return o(j(N))},S=R6(e.nBitLength);function E(N){if(typeof N!="bigint")throw new Error("bigint expected");if(!(qo<=N&&N<S))throw new Error(`bigint expected < 2^${e.nBitLength}`);return Mp(N,e.nByteLength)}function k(N,I,M=R){if(["recovered","canonical"].some(ge=>ge in M))throw new Error("sign() legacy options not supported");const{hash:D,randomBytes:L}=e;let{lowS:$,prehash:V,extraEntropy:q}=M;$==null&&($=!0),N=qi("msgHash",N),V&&(N=qi("prehashed msgHash",D(N)));const G=P(N),Z=d(I),oe=[E(Z),E(G)];if(q!=null){const ge=q===!0?L(n.BYTES):q;oe.push(qi("extraEntropy",ge))}const xe=T0(...oe),J=G;function ve(ge){const Le=j(ge);if(!f(Le))return;const je=l(Le),kt=u.BASE.multiply(Le).toAffine(),et=o(kt.x);if(et===qo)return;const De=o(je*o(J+et*Z));if(De===qo)return;let Dt=(kt.x===et?0:2)|Number(kt.y&bi),Mr=De;return $&&g(De)&&(Mr=m(De),Dt^=1),new b(et,Mr,Dt)}return{seed:xe,k2sig:ve}}const R={lowS:e.lowS,prehash:!1},O={lowS:e.lowS,prehash:!1};function F(N,I,M=R){const{seed:D,k2sig:L}=k(N,I,M),$=e;return m8($.hash.outputLen,$.nByteLength,$.hmac)(D,L)}u.BASE._setWindowSize(8);function z(N,I,M,D=O){var kt;const L=N;if(I=qi("msgHash",I),M=qi("publicKey",M),"strict"in D)throw new Error("options.strict was renamed to lowS");const{lowS:$,prehash:V}=D;let q,G;try{if(typeof L=="string"||L instanceof Uint8Array)try{q=b.fromDER(L)}catch(et){if(!(et instanceof Mu.Err))throw et;q=b.fromCompact(L)}else if(typeof L=="object"&&typeof L.r=="bigint"&&typeof L.s=="bigint"){const{r:et,s:De}=L;q=new b(et,De)}else throw new Error("PARSE");G=u.fromHex(M)}catch(et){if(et.message==="PARSE")throw new Error("signature must be Signature instance, Uint8Array or hex string");return!1}if($&&q.hasHighS())return!1;V&&(I=e.hash(I));const{r:Z,s:oe}=q,xe=P(I),J=l(oe),ve=o(xe*J),ge=o(Z*J),Le=(kt=u.BASE.multiplyAndAddUnsafe(G,ve,ge))==null?void 0:kt.toAffine();return Le?o(Le.x)===Z:!1}return{CURVE:e,getPublicKey:x,getSharedSecret:T,sign:F,verify:z,ProjectivePoint:u,Signature:b,utils:w}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function Wz(t){return{hash:t,hmac:(e,...n)=>GO(t,e,PV(...n)),randomBytes:RV}}function qz(t,e){const n=r=>zz({...t,...Wz(r)});return Object.freeze({...n(e),create:n})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const x8=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),Gk=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),Kz=BigInt(1),PC=BigInt(2),Yk=(t,e)=>(t+e/PC)/e;function Gz(t){const e=x8,n=BigInt(3),r=BigInt(6),s=BigInt(11),i=BigInt(22),a=BigInt(23),o=BigInt(44),l=BigInt(88),u=t*t*t%e,d=u*u*t%e,h=oi(d,n,e)*d%e,f=oi(h,n,e)*d%e,p=oi(f,PC,e)*u%e,g=oi(p,s,e)*p%e,m=oi(g,i,e)*g%e,y=oi(m,o,e)*m%e,b=oi(y,l,e)*y%e,w=oi(b,o,e)*m%e,x=oi(w,n,e)*d%e,A=oi(x,a,e)*g%e,T=oi(A,r,e)*u%e,j=oi(T,PC,e);if(!RC.eql(RC.sqr(j),t))throw new Error("Cannot find square root");return j}const RC=Dz(x8,void 0,void 0,{sqrt:Gz}),$c=qz({a:BigInt(0),b:BigInt(7),Fp:RC,n:Gk,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:t=>{const e=Gk,n=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),r=-Kz*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),s=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),i=n,a=BigInt("0x100000000000000000000000000000000"),o=Yk(i*t,e),l=Yk(-r*t,e);let u=xs(t-o*n-l*s,e),d=xs(-o*r-l*i,e);const h=u>a,f=d>a;if(h&&(u=e-u),f&&(d=e-d),u>a||d>a)throw new Error("splitScalar: Endomorphism failed, k="+t);return{k1neg:h,k1:u,k2neg:f,k2:d}}}},QO);BigInt(0);$c.ProjectivePoint;const co="0x0000000000000000000000000000000000000000",Qk="0x0000000000000000000000000000000000000000000000000000000000000000";BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141");BigInt("1000000000000000000");const Jk=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");BigInt("0x8000000000000000000000000000000000000000000000000000000000000000")*BigInt(-1);BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");const Zk=BigInt(0),Xk=BigInt(1),e_=BigInt(2),t_=BigInt(27),n_=BigInt(28),qw=BigInt(35),bh={};function r_(t){return cc(Un(t),32)}var qf,Ua,Kf,id;const zi=class zi{constructor(e,n,r,s){K(this,qf);K(this,Ua);K(this,Kf);K(this,id);Gy(e,bh,"Signature"),B(this,qf,n),B(this,Ua,r),B(this,Kf,s),B(this,id,null)}get r(){return C(this,qf)}set r(e){H(Tf(e)===32,"invalid r","value",e),B(this,qf,we(e))}get s(){return H(parseInt(C(this,Ua).substring(0,3))<8,"non-canonical s; use ._s","s",C(this,Ua)),C(this,Ua)}set s(e){H(Tf(e)===32,"invalid s","value",e),B(this,Ua,we(e))}get _s(){return C(this,Ua)}isValid(){return parseInt(C(this,Ua).substring(0,3))<8}get v(){return C(this,Kf)}set v(e){const n=Xe(e,"value");H(n===27||n===28,"invalid v","v",e),B(this,Kf,n)}get networkV(){return C(this,id)}get legacyChainId(){const e=this.networkV;return e==null?null:zi.getChainId(e)}get yParity(){return this.v===27?0:1}get yParityAndS(){const e=it(this.s);return this.yParity&&(e[0]|=128),we(e)}get compactSerialized(){return gn([this.r,this.yParityAndS])}get serialized(){return gn([this.r,this.s,this.yParity?"0x1c":"0x1b"])}[Symbol.for("nodejs.util.inspect.custom")](){return`Signature { r: "${this.r}", s: "${this._s}"${this.isValid()?"":', valid: "false"'}, yParity: ${this.yParity}, networkV: ${this.networkV} }`}clone(){const e=new zi(bh,this.r,this._s,this.v);return this.networkV&&B(e,id,this.networkV),e}toJSON(){const e=this.networkV;return{_type:"signature",networkV:e!=null?e.toString():null,r:this.r,s:this._s,v:this.v}}static getChainId(e){const n=Ie(e,"v");return n==t_||n==n_?Zk:(H(n>=qw,"invalid EIP-155 v","v",e),(n-qw)/e_)}static getChainIdV(e,n){return Ie(e)*e_+BigInt(35+n-27)}static getNormalizedV(e){const n=Ie(e);return n===Zk||n===t_?27:n===Xk||n===n_?28:(H(n>=qw,"invalid v","v",e),n&Xk?27:28)}static from(e){function n(u,d){H(u,d,"signature",e)}if(e==null)return new zi(bh,Qk,Qk,27);if(typeof e=="string"){const u=it(e,"signature");if(u.length===64){const d=we(u.slice(0,32)),h=u.slice(32,64),f=h[0]&128?28:27;return h[0]&=127,new zi(bh,d,we(h),f)}if(u.length===65){const d=we(u.slice(0,32)),h=we(u.slice(32,64)),f=zi.getNormalizedV(u[64]);return new zi(bh,d,h,f)}n(!1,"invalid raw signature length")}if(e instanceof zi)return e.clone();const r=e.r;n(r!=null,"missing r");const s=r_(r),i=function(u,d){if(u!=null)return r_(u);if(d!=null){n(qt(d,32),"invalid yParityAndS");const h=it(d);return h[0]&=127,we(h)}n(!1,"missing s")}(e.s,e.yParityAndS),{networkV:a,v:o}=function(u,d,h){if(u!=null){const f=Ie(u);return{networkV:f>=qw?f:void 0,v:zi.getNormalizedV(f)}}if(d!=null)return n(qt(d,32),"invalid yParityAndS"),{v:it(d)[0]&128?28:27};if(h!=null){switch(Xe(h,"sig.yParity")){case 0:return{v:27};case 1:return{v:28}}n(!1,"invalid yParity")}n(!1,"missing v")}(e.v,e.yParityAndS,e.yParity),l=new zi(bh,s,i,o);return a&&B(l,id,a),n(e.yParity==null||Xe(e.yParity,"sig.yParity")===l.yParity,"yParity mismatch"),n(e.yParityAndS==null||e.yParityAndS===l.yParityAndS,"yParityAndS mismatch"),l}};qf=new WeakMap,Ua=new WeakMap,Kf=new WeakMap,id=new WeakMap;let Is=zi;var Lo;const _u=class _u{constructor(e){K(this,Lo);H(Tf(e)===32,"invalid private key","privateKey","[REDACTED]"),B(this,Lo,we(e))}get privateKey(){return C(this,Lo)}get publicKey(){return _u.computePublicKey(C(this,Lo))}get compressedPublicKey(){return _u.computePublicKey(C(this,Lo),!0)}sign(e){H(Tf(e)===32,"invalid digest length","digest",e);const n=$c.sign(qr(e),qr(C(this,Lo)),{lowS:!0});return Is.from({r:zl(n.r,32),s:zl(n.s,32),v:n.recovery?28:27})}computeSharedSecret(e){const n=_u.computePublicKey(e);return we($c.getSharedSecret(qr(C(this,Lo)),it(n),!1))}static computePublicKey(e,n){let r=it(e,"key");if(r.length===32){const i=$c.getPublicKey(r,!!n);return we(i)}if(r.length===64){const i=new Uint8Array(65);i[0]=4,i.set(r,1),r=i}const s=$c.ProjectivePoint.fromHex(r);return we(s.toRawBytes(n))}static recoverPublicKey(e,n){H(Tf(e)===32,"invalid digest length","digest",e);const r=Is.from(n);let s=$c.Signature.fromCompact(qr(gn([r.r,r.s])));s=s.addRecoveryBit(r.yParity);const i=s.recoverPublicKey(qr(e));return H(i!=null,"invalid signature for digest","signature",n),"0x"+i.toHex(!1)}static addPoints(e,n,r){const s=$c.ProjectivePoint.fromHex(_u.computePublicKey(e).substring(2)),i=$c.ProjectivePoint.fromHex(_u.computePublicKey(n).substring(2));return"0x"+s.add(i).toHex(!!r)}};Lo=new WeakMap;let S0=_u;const Yz=BigInt(0),Qz=BigInt(36);function s_(t){t=t.toLowerCase();const e=t.substring(2).split(""),n=new Uint8Array(40);for(let s=0;s<40;s++)n[s]=e[s].charCodeAt(0);const r=it(Tn(n));for(let s=0;s<40;s+=2)r[s>>1]>>4>=8&&(e[s]=e[s].toUpperCase()),(r[s>>1]&15)>=8&&(e[s+1]=e[s+1].toUpperCase());return"0x"+e.join("")}const j6={};for(let t=0;t<10;t++)j6[String(t)]=String(t);for(let t=0;t<26;t++)j6[String.fromCharCode(65+t)]=String(10+t);const i_=15;function Jz(t){t=t.toUpperCase(),t=t.substring(4)+t.substring(0,2)+"00";let e=t.split("").map(r=>j6[r]).join("");for(;e.length>=i_;){let r=e.substring(0,i_);e=parseInt(r,10)%97+e.substring(r.length)}let n=String(98-parseInt(e,10)%97);for(;n.length<2;)n="0"+n;return n}const Zz=function(){const t={};for(let e=0;e<36;e++){const n="0123456789abcdefghijklmnopqrstuvwxyz"[e];t[n]=BigInt(e)}return t}();function Xz(t){t=t.toLowerCase();let e=Yz;for(let n=0;n<t.length;n++)e=e*Qz+Zz[t[n]];return e}function Pt(t){if(H(typeof t=="string","invalid address","address",t),t.match(/^(0x)?[0-9a-fA-F]{40}$/)){t.startsWith("0x")||(t="0x"+t);const e=s_(t);return H(!t.match(/([A-F].*[a-f])|([a-f].*[A-F])/)||e===t,"bad address checksum","address",t),e}if(t.match(/^XE[0-9]{2}[0-9A-Za-z]{30,31}$/)){H(t.substring(2,4)===Jz(t),"bad icap checksum","address",t);let e=Xz(t.substring(4)).toString(16);for(;e.length<40;)e="0"+e;return s_("0x"+e)}H(!1,"invalid address","address",t)}function eW(t){const e=Pt(t.from);let r=Ie(t.nonce,"tx.nonce").toString(16);return r==="0"?r="0x":r.length%2?r="0x0"+r:r="0x"+r,Pt(fn(Tn(Wl([e,r])),12))}function v8(t){return t&&typeof t.getAddress=="function"}function Jy(t){try{return Pt(t),!0}catch{}return!1}async function r2(t,e){const n=await e;return(n==null||n==="0x0000000000000000000000000000000000000000")&&(ee(typeof t!="string","unconfigured name","UNCONFIGURED_NAME",{value:t}),H(!1,"invalid AddressLike value; did not resolve to a value address","target",t)),Pt(n)}function Gr(t,e){if(typeof t=="string")return t.match(/^0x[0-9a-f]{40}$/i)?Pt(t):(ee(e!=null,"ENS resolution requires a provider","UNSUPPORTED_OPERATION",{operation:"resolveName"}),r2(t,e.resolveName(t)));if(v8(t))return r2(t,t.getAddress());if(t&&typeof t.then=="function")return r2(t,t);H(!1,"unsupported addressable value","target",t)}const _o={};function Se(t,e){let n=!1;return e<0&&(n=!0,e*=-1),new Pr(_o,`${n?"":"u"}int${e}`,t,{signed:n,width:e})}function gt(t,e){return new Pr(_o,`bytes${e||""}`,t,{size:e})}const a_=Symbol.for("_ethers_typed");var ad;const Io=class Io{constructor(e,n,r,s){W(this,"type");W(this,"value");K(this,ad);W(this,"_typedSymbol");s==null&&(s=null),Gy(_o,e,"Typed"),Fe(this,{_typedSymbol:a_,type:n,value:r}),B(this,ad,s),this.format()}format(){if(this.type==="array")throw new Error("");if(this.type==="dynamicArray")throw new Error("");return this.type==="tuple"?`tuple(${this.value.map(e=>e.format()).join(",")})`:this.type}defaultValue(){return 0}minValue(){return 0}maxValue(){return 0}isBigInt(){return!!this.type.match(/^u?int[0-9]+$/)}isData(){return this.type.startsWith("bytes")}isString(){return this.type==="string"}get tupleName(){if(this.type!=="tuple")throw TypeError("not a tuple");return C(this,ad)}get arrayLength(){if(this.type!=="array")throw TypeError("not an array");return C(this,ad)===!0?-1:C(this,ad)===!1?this.value.length:null}static from(e,n){return new Io(_o,e,n)}static uint8(e){return Se(e,8)}static uint16(e){return Se(e,16)}static uint24(e){return Se(e,24)}static uint32(e){return Se(e,32)}static uint40(e){return Se(e,40)}static uint48(e){return Se(e,48)}static uint56(e){return Se(e,56)}static uint64(e){return Se(e,64)}static uint72(e){return Se(e,72)}static uint80(e){return Se(e,80)}static uint88(e){return Se(e,88)}static uint96(e){return Se(e,96)}static uint104(e){return Se(e,104)}static uint112(e){return Se(e,112)}static uint120(e){return Se(e,120)}static uint128(e){return Se(e,128)}static uint136(e){return Se(e,136)}static uint144(e){return Se(e,144)}static uint152(e){return Se(e,152)}static uint160(e){return Se(e,160)}static uint168(e){return Se(e,168)}static uint176(e){return Se(e,176)}static uint184(e){return Se(e,184)}static uint192(e){return Se(e,192)}static uint200(e){return Se(e,200)}static uint208(e){return Se(e,208)}static uint216(e){return Se(e,216)}static uint224(e){return Se(e,224)}static uint232(e){return Se(e,232)}static uint240(e){return Se(e,240)}static uint248(e){return Se(e,248)}static uint256(e){return Se(e,256)}static uint(e){return Se(e,256)}static int8(e){return Se(e,-8)}static int16(e){return Se(e,-16)}static int24(e){return Se(e,-24)}static int32(e){return Se(e,-32)}static int40(e){return Se(e,-40)}static int48(e){return Se(e,-48)}static int56(e){return Se(e,-56)}static int64(e){return Se(e,-64)}static int72(e){return Se(e,-72)}static int80(e){return Se(e,-80)}static int88(e){return Se(e,-88)}static int96(e){return Se(e,-96)}static int104(e){return Se(e,-104)}static int112(e){return Se(e,-112)}static int120(e){return Se(e,-120)}static int128(e){return Se(e,-128)}static int136(e){return Se(e,-136)}static int144(e){return Se(e,-144)}static int152(e){return Se(e,-152)}static int160(e){return Se(e,-160)}static int168(e){return Se(e,-168)}static int176(e){return Se(e,-176)}static int184(e){return Se(e,-184)}static int192(e){return Se(e,-192)}static int200(e){return Se(e,-200)}static int208(e){return Se(e,-208)}static int216(e){return Se(e,-216)}static int224(e){return Se(e,-224)}static int232(e){return Se(e,-232)}static int240(e){return Se(e,-240)}static int248(e){return Se(e,-248)}static int256(e){return Se(e,-256)}static int(e){return Se(e,-256)}static bytes1(e){return gt(e,1)}static bytes2(e){return gt(e,2)}static bytes3(e){return gt(e,3)}static bytes4(e){return gt(e,4)}static bytes5(e){return gt(e,5)}static bytes6(e){return gt(e,6)}static bytes7(e){return gt(e,7)}static bytes8(e){return gt(e,8)}static bytes9(e){return gt(e,9)}static bytes10(e){return gt(e,10)}static bytes11(e){return gt(e,11)}static bytes12(e){return gt(e,12)}static bytes13(e){return gt(e,13)}static bytes14(e){return gt(e,14)}static bytes15(e){return gt(e,15)}static bytes16(e){return gt(e,16)}static bytes17(e){return gt(e,17)}static bytes18(e){return gt(e,18)}static bytes19(e){return gt(e,19)}static bytes20(e){return gt(e,20)}static bytes21(e){return gt(e,21)}static bytes22(e){return gt(e,22)}static bytes23(e){return gt(e,23)}static bytes24(e){return gt(e,24)}static bytes25(e){return gt(e,25)}static bytes26(e){return gt(e,26)}static bytes27(e){return gt(e,27)}static bytes28(e){return gt(e,28)}static bytes29(e){return gt(e,29)}static bytes30(e){return gt(e,30)}static bytes31(e){return gt(e,31)}static bytes32(e){return gt(e,32)}static address(e){return new Io(_o,"address",e)}static bool(e){return new Io(_o,"bool",!!e)}static bytes(e){return new Io(_o,"bytes",e)}static string(e){return new Io(_o,"string",e)}static array(e,n){throw new Error("not implemented yet")}static tuple(e,n){throw new Error("not implemented yet")}static overrides(e){return new Io(_o,"overrides",Object.assign({},e))}static isTyped(e){return e&&typeof e=="object"&&"_typedSymbol"in e&&e._typedSymbol===a_}static dereference(e,n){if(Io.isTyped(e)){if(e.type!==n)throw new Error(`invalid type: expecetd ${n}, got ${e.type}`);return e.value}return e}};ad=new WeakMap;let Pr=Io;class tW extends bc{constructor(e){super("address","address",e,!1)}defaultValue(){return"0x0000000000000000000000000000000000000000"}encode(e,n){let r=Pr.dereference(n,"string");try{r=Pt(r)}catch(s){return this._throwError(s.message,n)}return e.writeValue(r)}decode(e){return Pt(zl(e.readValue(),20))}}class nW extends bc{constructor(n){super(n.name,n.type,"_",n.dynamic);W(this,"coder");this.coder=n}defaultValue(){return this.coder.defaultValue()}encode(n,r){return this.coder.encode(n,r)}decode(n){return this.coder.decode(n)}}function E8(t,e,n){let r=[];if(Array.isArray(n))r=n;else if(n&&typeof n=="object"){let l={};r=e.map(u=>{const d=u.localName;return ee(d,"cannot encode object for signature with missing names","INVALID_ARGUMENT",{argument:"values",info:{coder:u},value:n}),ee(!l[d],"cannot encode object for signature with duplicate names","INVALID_ARGUMENT",{argument:"values",info:{coder:u},value:n}),l[d]=!0,n[d]})}else H(!1,"invalid tuple value","tuple",n);H(e.length===r.length,"types/value length mismatch","tuple",n);let s=new AC,i=new AC,a=[];e.forEach((l,u)=>{let d=r[u];if(l.dynamic){let h=i.length;l.encode(i,d);let f=s.writeUpdatableValue();a.push(p=>{f(p+h)})}else l.encode(s,d)}),a.forEach(l=>{l(s.length)});let o=t.appendWriter(s);return o+=t.appendWriter(i),o}function N8(t,e){let n=[],r=[],s=t.subReader(0);return e.forEach(i=>{let a=null;if(i.dynamic){let o=t.readIndex(),l=s.subReader(o);try{a=i.decode(l)}catch(u){if(or(u,"BUFFER_OVERRUN"))throw u;a=u,a.baseType=i.name,a.name=i.localName,a.type=i.type}}else try{a=i.decode(t)}catch(o){if(or(o,"BUFFER_OVERRUN"))throw o;a=o,a.baseType=i.name,a.name=i.localName,a.type=i.type}if(a==null)throw new Error("investigate");n.push(a),r.push(i.localName||null)}),jp.fromItems(n,r)}class rW extends bc{constructor(n,r,s){const i=n.type+"["+(r>=0?r:"")+"]",a=r===-1||n.dynamic;super("array",i,s,a);W(this,"coder");W(this,"length");Fe(this,{coder:n,length:r})}defaultValue(){const n=this.coder.defaultValue(),r=[];for(let s=0;s<this.length;s++)r.push(n);return r}encode(n,r){const s=Pr.dereference(r,"array");Array.isArray(s)||this._throwError("expected array value",s);let i=this.length;i===-1&&(i=s.length,n.writeValue(s.length)),_O(s.length,i,"coder array"+(this.localName?" "+this.localName:""));let a=[];for(let o=0;o<s.length;o++)a.push(this.coder);return E8(n,a,s)}decode(n){let r=this.length;r===-1&&(r=n.readIndex(),ee(r*Kr<=n.dataLength,"insufficient data length","BUFFER_OVERRUN",{buffer:n.bytes,offset:r*Kr,length:n.dataLength}));let s=[];for(let i=0;i<r;i++)s.push(new nW(this.coder));return N8(n,s)}}class sW extends bc{constructor(e){super("bool","bool",e,!1)}defaultValue(){return!1}encode(e,n){const r=Pr.dereference(n,"bool");return e.writeValue(r?1:0)}decode(e){return!!e.readValue()}}class C8 extends bc{constructor(e,n){super(e,e,n,!0)}defaultValue(){return"0x"}encode(e,n){n=qr(n);let r=e.writeValue(n.length);return r+=e.writeBytes(n),r}decode(e){return e.readBytes(e.readIndex(),!0)}}class iW extends C8{constructor(e){super("bytes",e)}decode(e){return we(super.decode(e))}}class aW extends bc{constructor(n,r){let s="bytes"+String(n);super(s,s,r,!1);W(this,"size");Fe(this,{size:n},{size:"number"})}defaultValue(){return"0x0000000000000000000000000000000000000000000000000000000000000000".substring(0,2+this.size*2)}encode(n,r){let s=qr(Pr.dereference(r,this.type));return s.length!==this.size&&this._throwError("incorrect data length",r),n.writeBytes(s)}decode(n){return we(n.readBytes(this.size))}}const oW=new Uint8Array([]);class cW extends bc{constructor(e){super("null","",e,!1)}defaultValue(){return null}encode(e,n){return n!=null&&this._throwError("not null",n),e.writeBytes(oW)}decode(e){return e.readBytes(0),null}}const lW=BigInt(0),uW=BigInt(1),dW=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");class hW extends bc{constructor(n,r,s){const i=(r?"int":"uint")+n*8;super(i,i,s,!1);W(this,"size");W(this,"signed");Fe(this,{size:n,signed:r},{size:"number",signed:"boolean"})}defaultValue(){return 0}encode(n,r){let s=Ie(Pr.dereference(r,this.type)),i=Du(dW,Kr*8);if(this.signed){let a=Du(i,this.size*8-1);(s>a||s<-(a+uW))&&this._throwError("value out-of-bounds",r),s=jO(s,8*Kr)}else(s<lW||s>Du(i,this.size*8))&&this._throwError("value out-of-bounds",r);return n.writeValue(s)}decode(n){let r=Du(n.readValue(),this.size*8);return this.signed&&(r=Jx(r,this.size*8)),r}}class fW extends C8{constructor(e){super("string",e)}defaultValue(){return""}encode(e,n){return super.encode(e,la(Pr.dereference(n,"string")))}decode(e){return Zx(super.decode(e))}}class Kw extends bc{constructor(n,r){let s=!1;const i=[];n.forEach(o=>{o.dynamic&&(s=!0),i.push(o.type)});const a="tuple("+i.join(",")+")";super("tuple",a,r,s);W(this,"coders");Fe(this,{coders:Object.freeze(n.slice())})}defaultValue(){const n=[];this.coders.forEach(s=>{n.push(s.defaultValue())});const r=this.coders.reduce((s,i)=>{const a=i.localName;return a&&(s[a]||(s[a]=0),s[a]++),s},{});return this.coders.forEach((s,i)=>{let a=s.localName;!a||r[a]!==1||(a==="length"&&(a="_length"),n[a]==null&&(n[a]=n[i]))}),Object.freeze(n)}encode(n,r){const s=Pr.dereference(r,"tuple");return E8(n,this.coders,s)}decode(n){return N8(n,this.coders)}}function s2(t,e){return{address:Pt(t),storageKeys:e.map((n,r)=>(H(qt(n,32),"invalid slot",`storageKeys[${r}]`,n),n.toLowerCase()))}}function sh(t){if(Array.isArray(t))return t.map((n,r)=>Array.isArray(n)?(H(n.length===2,"invalid slot set",`value[${r}]`,n),s2(n[0],n[1])):(H(n!=null&&typeof n=="object","invalid address-slot set","value",t),s2(n.address,n.storageKeys)));H(t!=null&&typeof t=="object","invalid access list","value",t);const e=Object.keys(t).map(n=>{const r=t[n].reduce((s,i)=>(s[i]=!0,s),{});return s2(n,Object.keys(r).sort())});return e.sort((n,r)=>n.address.localeCompare(r.address)),e}function A8(t){return{address:Pt(t.address),nonce:Ie(t.nonce!=null?t.nonce:0),chainId:Ie(t.chainId!=null?t.chainId:0),signature:Is.from(t.signature)}}function pW(t){let e;return typeof t=="string"?e=S0.computePublicKey(t,!1):e=t.publicKey,Pt(Tn("0x"+e.substring(4)).substring(26))}function mW(t,e){return pW(S0.recoverPublicKey(t,e))}const Vn=BigInt(0),gW=BigInt(2),yW=BigInt(27),wW=BigInt(28),bW=BigInt(35),xW=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),i2=4096*32;function vW(t){return{blobToKzgCommitment:r=>{if("computeBlobProof"in t){if("blobToKzgCommitment"in t&&typeof t.blobToKzgCommitment=="function")return it(t.blobToKzgCommitment(we(r)))}else if("blobToKzgCommitment"in t&&typeof t.blobToKzgCommitment=="function")return it(t.blobToKzgCommitment(r));if("blobToKZGCommitment"in t&&typeof t.blobToKZGCommitment=="function")return it(t.blobToKZGCommitment(we(r)));H(!1,"unsupported KZG library","kzg",t)},computeBlobKzgProof:(r,s)=>{if("computeBlobProof"in t&&typeof t.computeBlobProof=="function")return it(t.computeBlobProof(we(r),we(s)));if("computeBlobKzgProof"in t&&typeof t.computeBlobKzgProof=="function")return t.computeBlobKzgProof(r,s);if("computeBlobKZGProof"in t&&typeof t.computeBlobKZGProof=="function")return it(t.computeBlobKZGProof(we(r),we(s)));H(!1,"unsupported KZG library","kzg",t)}}}function o_(t,e){let n=t.toString(16);for(;n.length<2;)n="0"+n;return n+=lm(e).substring(4),"0x"+n}function um(t){return t==="0x"?null:Pt(t)}function S1(t,e){try{return sh(t)}catch(n){H(!1,n.message,e,t)}}function EW(t,e){try{if(!Array.isArray(t))throw new Error("authorizationList: invalid array");const n=[];for(let r=0;r<t.length;r++){const s=t[r];if(!Array.isArray(s))throw new Error(`authorization[${r}]: invalid array`);if(s.length!==6)throw new Error(`authorization[${r}]: wrong length`);if(!s[1])throw new Error(`authorization[${r}]: null address`);n.push({address:um(s[1]),nonce:Vt(s[2],"nonce"),chainId:Vt(s[0],"chainId"),signature:Is.from({yParity:ih(s[3],"yParity"),r:cc(s[4],32),s:cc(s[5],32)})})}return n}catch(n){H(!1,n.message,e,t)}}function ih(t,e){return t==="0x"?0:Xe(t,e)}function Vt(t,e){if(t==="0x")return Vn;const n=Ie(t,e);return H(n<=xW,"value exceeds uint size",e,n),n}function dt(t,e){const n=Ie(t,"value"),r=Un(n);return H(r.length<=32,"value too large",`tx.${e}`,n),r}function k1(t){return sh(t).map(e=>[e.address,e.storageKeys])}function NW(t){return t.map(e=>[dt(e.chainId,"chainId"),e.address,dt(e.nonce,"nonce"),dt(e.signature.yParity,"yParity"),Un(e.signature.r),Un(e.signature.s)])}function CW(t,e){H(Array.isArray(t),`invalid ${e}`,"value",t);for(let n=0;n<t.length;n++)H(qt(t[n],32),"invalid ${ param } hash",`value[${n}]`,t[n]);return t}function AW(t){const e=Yy(t);H(Array.isArray(e)&&(e.length===9||e.length===6),"invalid field count for legacy transaction","data",t);const n={type:0,nonce:ih(e[0],"nonce"),gasPrice:Vt(e[1],"gasPrice"),gasLimit:Vt(e[2],"gasLimit"),to:um(e[3]),value:Vt(e[4],"value"),data:we(e[5]),chainId:Vn};if(e.length===6)return n;const r=Vt(e[6],"v"),s=Vt(e[7],"r"),i=Vt(e[8],"s");if(s===Vn&&i===Vn)n.chainId=r;else{let a=(r-bW)/gW;a<Vn&&(a=Vn),n.chainId=a,H(a!==Vn||r===yW||r===wW,"non-canonical legacy v","v",e[6]),n.signature=Is.from({r:cc(e[7],32),s:cc(e[8],32),v:r})}return n}function TW(t,e){const n=[dt(t.nonce,"nonce"),dt(t.gasPrice||0,"gasPrice"),dt(t.gasLimit,"gasLimit"),t.to||"0x",dt(t.value,"value"),t.data];let r=Vn;if(t.chainId!=Vn)r=Ie(t.chainId,"tx.chainId"),H(!e||e.networkV==null||e.legacyChainId===r,"tx.chainId/sig.v mismatch","sig",e);else if(t.signature){const i=t.signature.legacyChainId;i!=null&&(r=i)}if(!e)return r!==Vn&&(n.push(Un(r)),n.push("0x"),n.push("0x")),Wl(n);let s=BigInt(27+e.yParity);return r!==Vn?s=Is.getChainIdV(r,e.v):BigInt(e.v)!==s&&H(!1,"tx.chainId/sig.v mismatch","sig",e),n.push(Un(s)),n.push(Un(e.r)),n.push(Un(e.s)),Wl(n)}function _1(t,e){let n;try{if(n=ih(e[0],"yParity"),n!==0&&n!==1)throw new Error("bad yParity")}catch{H(!1,"invalid yParity","yParity",e[0])}const r=cc(e[1],32),s=cc(e[2],32),i=Is.from({r,s,yParity:n});t.signature=i}function SW(t){const e=Yy(it(t).slice(1));H(Array.isArray(e)&&(e.length===9||e.length===12),"invalid field count for transaction type: 2","data",we(t));const n={type:2,chainId:Vt(e[0],"chainId"),nonce:ih(e[1],"nonce"),maxPriorityFeePerGas:Vt(e[2],"maxPriorityFeePerGas"),maxFeePerGas:Vt(e[3],"maxFeePerGas"),gasPrice:null,gasLimit:Vt(e[4],"gasLimit"),to:um(e[5]),value:Vt(e[6],"value"),data:we(e[7]),accessList:S1(e[8],"accessList")};return e.length===9||_1(n,e.slice(9)),n}function kW(t,e){const n=[dt(t.chainId,"chainId"),dt(t.nonce,"nonce"),dt(t.maxPriorityFeePerGas||0,"maxPriorityFeePerGas"),dt(t.maxFeePerGas||0,"maxFeePerGas"),dt(t.gasLimit,"gasLimit"),t.to||"0x",dt(t.value,"value"),t.data,k1(t.accessList||[])];return e&&(n.push(dt(e.yParity,"yParity")),n.push(Un(e.r)),n.push(Un(e.s))),gn(["0x02",Wl(n)])}function _W(t){const e=Yy(it(t).slice(1));H(Array.isArray(e)&&(e.length===8||e.length===11),"invalid field count for transaction type: 1","data",we(t));const n={type:1,chainId:Vt(e[0],"chainId"),nonce:ih(e[1],"nonce"),gasPrice:Vt(e[2],"gasPrice"),gasLimit:Vt(e[3],"gasLimit"),to:um(e[4]),value:Vt(e[5],"value"),data:we(e[6]),accessList:S1(e[7],"accessList")};return e.length===8||_1(n,e.slice(8)),n}function IW(t,e){const n=[dt(t.chainId,"chainId"),dt(t.nonce,"nonce"),dt(t.gasPrice||0,"gasPrice"),dt(t.gasLimit,"gasLimit"),t.to||"0x",dt(t.value,"value"),t.data,k1(t.accessList||[])];return e&&(n.push(dt(e.yParity,"recoveryParam")),n.push(Un(e.r)),n.push(Un(e.s))),gn(["0x01",Wl(n)])}function PW(t){let e=Yy(it(t).slice(1)),n="3",r=null;if(e.length===4&&Array.isArray(e[0])){n="3 (network format)";const i=e[1],a=e[2],o=e[3];H(Array.isArray(i),"invalid network format: blobs not an array","fields[1]",i),H(Array.isArray(a),"invalid network format: commitments not an array","fields[2]",a),H(Array.isArray(o),"invalid network format: proofs not an array","fields[3]",o),H(i.length===a.length,"invalid network format: blobs/commitments length mismatch","fields",e),H(i.length===o.length,"invalid network format: blobs/proofs length mismatch","fields",e),r=[];for(let l=0;l<e[1].length;l++)r.push({data:i[l],commitment:a[l],proof:o[l]});e=e[0]}H(Array.isArray(e)&&(e.length===11||e.length===14),`invalid field count for transaction type: ${n}`,"data",we(t));const s={type:3,chainId:Vt(e[0],"chainId"),nonce:ih(e[1],"nonce"),maxPriorityFeePerGas:Vt(e[2],"maxPriorityFeePerGas"),maxFeePerGas:Vt(e[3],"maxFeePerGas"),gasPrice:null,gasLimit:Vt(e[4],"gasLimit"),to:um(e[5]),value:Vt(e[6],"value"),data:we(e[7]),accessList:S1(e[8],"accessList"),maxFeePerBlobGas:Vt(e[9],"maxFeePerBlobGas"),blobVersionedHashes:e[10]};r&&(s.blobs=r),H(s.to!=null,`invalid address for transaction type: ${n}`,"data",t),H(Array.isArray(s.blobVersionedHashes),"invalid blobVersionedHashes: must be an array","data",t);for(let i=0;i<s.blobVersionedHashes.length;i++)H(qt(s.blobVersionedHashes[i],32),`invalid blobVersionedHash at index ${i}: must be length 32`,"data",t);return e.length===11||_1(s,e.slice(11)),s}function RW(t,e,n){const r=[dt(t.chainId,"chainId"),dt(t.nonce,"nonce"),dt(t.maxPriorityFeePerGas||0,"maxPriorityFeePerGas"),dt(t.maxFeePerGas||0,"maxFeePerGas"),dt(t.gasLimit,"gasLimit"),t.to||co,dt(t.value,"value"),t.data,k1(t.accessList||[]),dt(t.maxFeePerBlobGas||0,"maxFeePerBlobGas"),CW(t.blobVersionedHashes||[],"blobVersionedHashes")];return e&&(r.push(dt(e.yParity,"yParity")),r.push(Un(e.r)),r.push(Un(e.s)),n)?gn(["0x03",Wl([r,n.map(s=>s.data),n.map(s=>s.commitment),n.map(s=>s.proof)])]):gn(["0x03",Wl(r)])}function jW(t){const e=Yy(it(t).slice(1));H(Array.isArray(e)&&(e.length===10||e.length===13),"invalid field count for transaction type: 4","data",we(t));const n={type:4,chainId:Vt(e[0],"chainId"),nonce:ih(e[1],"nonce"),maxPriorityFeePerGas:Vt(e[2],"maxPriorityFeePerGas"),maxFeePerGas:Vt(e[3],"maxFeePerGas"),gasPrice:null,gasLimit:Vt(e[4],"gasLimit"),to:um(e[5]),value:Vt(e[6],"value"),data:we(e[7]),accessList:S1(e[8],"accessList"),authorizationList:EW(e[9],"authorizationList")};return e.length===10||_1(n,e.slice(10)),n}function OW(t,e){const n=[dt(t.chainId,"chainId"),dt(t.nonce,"nonce"),dt(t.maxPriorityFeePerGas||0,"maxPriorityFeePerGas"),dt(t.maxFeePerGas||0,"maxFeePerGas"),dt(t.gasLimit,"gasLimit"),t.to||"0x",dt(t.value,"value"),t.data,k1(t.accessList||[]),NW(t.authorizationList||[])];return e&&(n.push(dt(e.yParity,"yParity")),n.push(Un(e.r)),n.push(Un(e.s))),gn(["0x04",Wl(n)])}var Qi,Gf,Yf,Qf,Jf,Zf,Xf,ep,tp,np,rp,sp,od,al,Ma,ol,ip,ap,Gb;const Oa=class Oa{constructor(){K(this,ap);K(this,Qi);K(this,Gf);K(this,Yf);K(this,Qf);K(this,Jf);K(this,Zf);K(this,Xf);K(this,ep);K(this,tp);K(this,np);K(this,rp);K(this,sp);K(this,od);K(this,al);K(this,Ma);K(this,ol);K(this,ip);B(this,Qi,null),B(this,Gf,null),B(this,Qf,0),B(this,Jf,Vn),B(this,Zf,null),B(this,Xf,null),B(this,ep,null),B(this,Yf,"0x"),B(this,tp,Vn),B(this,np,Vn),B(this,rp,null),B(this,sp,null),B(this,od,null),B(this,al,null),B(this,Ma,null),B(this,ol,null),B(this,ip,null)}get type(){return C(this,Qi)}set type(e){switch(e){case null:B(this,Qi,null);break;case 0:case"legacy":B(this,Qi,0);break;case 1:case"berlin":case"eip-2930":B(this,Qi,1);break;case 2:case"london":case"eip-1559":B(this,Qi,2);break;case 3:case"cancun":case"eip-4844":B(this,Qi,3);break;case 4:case"pectra":case"eip-7702":B(this,Qi,4);break;default:H(!1,"unsupported transaction type","type",e)}}get typeName(){switch(this.type){case 0:return"legacy";case 1:return"eip-2930";case 2:return"eip-1559";case 3:return"eip-4844";case 4:return"eip-7702"}return null}get to(){const e=C(this,Gf);return e==null&&this.type===3?co:e}set to(e){B(this,Gf,e==null?null:Pt(e))}get nonce(){return C(this,Qf)}set nonce(e){B(this,Qf,Xe(e,"value"))}get gasLimit(){return C(this,Jf)}set gasLimit(e){B(this,Jf,Ie(e))}get gasPrice(){const e=C(this,Zf);return e==null&&(this.type===0||this.type===1)?Vn:e}set gasPrice(e){B(this,Zf,e==null?null:Ie(e,"gasPrice"))}get maxPriorityFeePerGas(){const e=C(this,Xf);return e??(this.type===2||this.type===3?Vn:null)}set maxPriorityFeePerGas(e){B(this,Xf,e==null?null:Ie(e,"maxPriorityFeePerGas"))}get maxFeePerGas(){const e=C(this,ep);return e??(this.type===2||this.type===3?Vn:null)}set maxFeePerGas(e){B(this,ep,e==null?null:Ie(e,"maxFeePerGas"))}get data(){return C(this,Yf)}set data(e){B(this,Yf,we(e))}get value(){return C(this,tp)}set value(e){B(this,tp,Ie(e,"value"))}get chainId(){return C(this,np)}set chainId(e){B(this,np,Ie(e))}get signature(){return C(this,rp)||null}set signature(e){B(this,rp,e==null?null:Is.from(e))}get accessList(){const e=C(this,sp)||null;return e??(this.type===1||this.type===2||this.type===3?[]:null)}set accessList(e){B(this,sp,e==null?null:sh(e))}get authorizationList(){const e=C(this,ip)||null;return e==null&&this.type===4?[]:e}set authorizationList(e){B(this,ip,e==null?null:e.map(n=>A8(n)))}get maxFeePerBlobGas(){const e=C(this,od);return e==null&&this.type===3?Vn:e}set maxFeePerBlobGas(e){B(this,od,e==null?null:Ie(e,"maxFeePerBlobGas"))}get blobVersionedHashes(){let e=C(this,al);return e==null&&this.type===3?[]:e}set blobVersionedHashes(e){if(e!=null){H(Array.isArray(e),"blobVersionedHashes must be an Array","value",e),e=e.slice();for(let n=0;n<e.length;n++)H(qt(e[n],32),"invalid blobVersionedHash",`value[${n}]`,e[n])}B(this,al,e)}get blobs(){return C(this,ol)==null?null:C(this,ol).map(e=>Object.assign({},e))}set blobs(e){if(e==null){B(this,ol,null);return}const n=[],r=[];for(let s=0;s<e.length;s++){const i=e[s];if(A6(i)){ee(C(this,Ma),"adding a raw blob requires a KZG library","UNSUPPORTED_OPERATION",{operation:"set blobs()"});let a=it(i);if(H(a.length<=i2,"blob is too large",`blobs[${s}]`,i),a.length!==i2){const u=new Uint8Array(i2);u.set(a),a=u}const o=C(this,Ma).blobToKzgCommitment(a),l=we(C(this,Ma).computeBlobKzgProof(a,o));n.push({data:we(a),commitment:we(o),proof:l}),r.push(o_(1,o))}else{const a=we(i.commitment);n.push({data:we(i.data),commitment:a,proof:we(i.proof)}),r.push(o_(1,a))}}B(this,ol,n),B(this,al,r)}get kzg(){return C(this,Ma)}set kzg(e){e==null?B(this,Ma,null):B(this,Ma,vW(e))}get hash(){return this.signature==null?null:Tn(ie(this,ap,Gb).call(this,!0,!1))}get unsignedHash(){return Tn(this.unsignedSerialized)}get from(){return this.signature==null?null:mW(this.unsignedHash,this.signature)}get fromPublicKey(){return this.signature==null?null:S0.recoverPublicKey(this.unsignedHash,this.signature)}isSigned(){return this.signature!=null}get serialized(){return ie(this,ap,Gb).call(this,!0,!0)}get unsignedSerialized(){return ie(this,ap,Gb).call(this,!1,!1)}inferType(){const e=this.inferTypes();return e.indexOf(2)>=0?2:e.pop()}inferTypes(){const e=this.gasPrice!=null,n=this.maxFeePerGas!=null||this.maxPriorityFeePerGas!=null,r=this.accessList!=null,s=C(this,od)!=null||C(this,al);this.maxFeePerGas!=null&&this.maxPriorityFeePerGas!=null&&ee(this.maxFeePerGas>=this.maxPriorityFeePerGas,"priorityFee cannot be more than maxFee","BAD_DATA",{value:this}),ee(!n||this.type!==0&&this.type!==1,"transaction type cannot have maxFeePerGas or maxPriorityFeePerGas","BAD_DATA",{value:this}),ee(this.type!==0||!r,"legacy transaction cannot have accessList","BAD_DATA",{value:this});const i=[];return this.type!=null?i.push(this.type):this.authorizationList&&this.authorizationList.length?i.push(4):n?i.push(2):e?(i.push(1),r||i.push(0)):r?(i.push(1),i.push(2)):(s&&this.to||(i.push(0),i.push(1),i.push(2)),i.push(3)),i.sort(),i}isLegacy(){return this.type===0}isBerlin(){return this.type===1}isLondon(){return this.type===2}isCancun(){return this.type===3}clone(){return Oa.from(this)}toJSON(){const e=n=>n==null?null:n.toString();return{type:this.type,to:this.to,data:this.data,nonce:this.nonce,gasLimit:e(this.gasLimit),gasPrice:e(this.gasPrice),maxPriorityFeePerGas:e(this.maxPriorityFeePerGas),maxFeePerGas:e(this.maxFeePerGas),value:e(this.value),chainId:e(this.chainId),sig:this.signature?this.signature.toJSON():null,accessList:this.accessList}}static from(e){if(e==null)return new Oa;if(typeof e=="string"){const r=it(e);if(r[0]>=127)return Oa.from(AW(r));switch(r[0]){case 1:return Oa.from(_W(r));case 2:return Oa.from(SW(r));case 3:return Oa.from(PW(r));case 4:return Oa.from(jW(r))}ee(!1,"unsupported transaction type","UNSUPPORTED_OPERATION",{operation:"from"})}const n=new Oa;return e.type!=null&&(n.type=e.type),e.to!=null&&(n.to=e.to),e.nonce!=null&&(n.nonce=e.nonce),e.gasLimit!=null&&(n.gasLimit=e.gasLimit),e.gasPrice!=null&&(n.gasPrice=e.gasPrice),e.maxPriorityFeePerGas!=null&&(n.maxPriorityFeePerGas=e.maxPriorityFeePerGas),e.maxFeePerGas!=null&&(n.maxFeePerGas=e.maxFeePerGas),e.maxFeePerBlobGas!=null&&(n.maxFeePerBlobGas=e.maxFeePerBlobGas),e.data!=null&&(n.data=e.data),e.value!=null&&(n.value=e.value),e.chainId!=null&&(n.chainId=e.chainId),e.signature!=null&&(n.signature=Is.from(e.signature)),e.accessList!=null&&(n.accessList=e.accessList),e.authorizationList!=null&&(n.authorizationList=e.authorizationList),e.blobVersionedHashes!=null&&(n.blobVersionedHashes=e.blobVersionedHashes),e.kzg!=null&&(n.kzg=e.kzg),e.blobs!=null&&(n.blobs=e.blobs),e.hash!=null&&(H(n.isSigned(),"unsigned transaction cannot define '.hash'","tx",e),H(n.hash===e.hash,"hash mismatch","tx",e)),e.from!=null&&(H(n.isSigned(),"unsigned transaction cannot define '.from'","tx",e),H(n.from.toLowerCase()===(e.from||"").toLowerCase(),"from mismatch","tx",e)),n}};Qi=new WeakMap,Gf=new WeakMap,Yf=new WeakMap,Qf=new WeakMap,Jf=new WeakMap,Zf=new WeakMap,Xf=new WeakMap,ep=new WeakMap,tp=new WeakMap,np=new WeakMap,rp=new WeakMap,sp=new WeakMap,od=new WeakMap,al=new WeakMap,Ma=new WeakMap,ol=new WeakMap,ip=new WeakMap,ap=new WeakSet,Gb=function(e,n){ee(!e||this.signature!=null,"cannot serialize unsigned transaction; maybe you meant .unsignedSerialized","UNSUPPORTED_OPERATION",{operation:".serialized"});const r=e?this.signature:null;switch(this.inferType()){case 0:return TW(this,r);case 1:return IW(this,r);case 2:return kW(this,r);case 3:return RW(this,r,n?this.blobs:null);case 4:return OW(this,r)}ee(!1,"unsupported transaction type","UNSUPPORTED_OPERATION",{operation:".serialized"})};let tv=Oa;function Od(t){return Tn(la(t))}var DW="AEEUdwmgDS8BxQKKAP4BOgDjATAAngDUAIMAoABoAOAAagCOAEQAhABMAHIAOwA9ACsANgAmAGIAHgAuACgAJwAXAC0AGgAjAB8ALwAUACkAEgAeAAkAGwARABkAFgA5ACgALQArADcAFQApABAAHgAiABAAGgAeABMAGAUhBe8BFxREN8sF2wC5AK5HAW8ArQkDzQCuhzc3NzcBP68NEfMABQdHBuw5BV8FYAA9MzkI9r4ZBg7QyQAWA9CeOwLNCjcCjqkChuA/lm+RAsXTAoP6ASfnEQDytQFJAjWVCkeXAOsA6godAB/cwdAUE0WlBCN/AQUCQRjFD/MRBjHxDQSJbw0jBzUAswBxme+tnIcAYwabAysG8QAjAEMMmxcDqgPKQyDXCMMxA7kUQwD3NXOrAKmFIAAfBC0D3x4BJQDBGdUFAhEgVD8JnwmQJiNWYUzrg0oAGwAUAB0AFnNcACkAFgBP9h3gPfsDOWDKneY2ChglX1UDYD30ABsAFAAdABZzIGRAnwDD8wAjAEEMzRbDqgMB2sAFYwXqAtCnAsS4AwpUJKRtFHsadUz9AMMVbwLpABM1NJEX0ZkCgYMBEyMAxRVvAukAEzUBUFAtmUwSAy4DBTER33EftQHfSwB5MxJ/AjkWKQLzL8E/cwBB6QH9LQDPDtO9ASNriQC5DQANAwCK21EFI91zHwCoL9kBqQcHBwcHKzUDowBvAQohPvU3fAQgHwCyAc8CKQMA5zMSezr7ULgFmDp/LzVQBgEGAi8FYQVgt8AFcTtlQhpCWEmfe5tmZ6IAExsDzQ8t+X8rBKtTAltbAn0jsy8Bl6utPWMDTR8Ei2kRANkDBrNHNysDBzECQWUAcwFpJ3kAiyUhAJ0BUb8AL3EfAbfNAz81KUsFWwF3YQZtAm0A+VEfAzEJDQBRSQCzAQBlAHsAM70GD/v3IZWHBwARKQAxALsjTwHZAeMPEzmXgIHwABIAGQA8AEUAQDt3gdvIEGcQZAkGTRFMdEIVEwK0D64L7REdDNkq09PgADSxB/MDWwfzA1sDWwfzB/MDWwfzA1sDWwNbA1scEvAi28gQZw9QBHUFlgWTBN4IiyZREYkHMAjaVBV0JhxPA00BBCMtSSQ7mzMTJUpMFE0LCAQ2SmyvfUADTzGzVP2QqgPTMlc5dAkGHnkSqAAyD3skNb1OhnpPcagKU0+2tYdJak5vAsY6sEAACikJm2/Dd1YGRRAfJ6kQ+ww3AbkBPw3xS9wE9QY/BM0fgRkdD9GVoAipLeEM8SbnLqWAXiP5KocF8Uv4POELUVFsD10LaQnnOmeBUgMlAREijwrhDT0IcRD3Cs1vDekRSQc9A9lJngCpBwULFR05FbkmFGKwCw05ewb/GvoLkyazEy17AAXXGiUGUQEtGwMA0y7rhbRaNVwgT2MGBwspI8sUrFAkDSlAu3hMGh8HGSWtApVDdEqLUToelyH6PEENai4XUYAH+TwJGVMLhTyiRq9FEhHWPpE9TCJNTDAEOYMsMyePCdMPiQy9fHYBXQklCbUMdRM1ERs3yQg9Bx0xlygnGQglRplgngT7owP3E9UDDwVDCUUHFwO5HDETMhUtBRGBKNsC9zbZLrcCk1aEARsFzw8pH+MQVEfkDu0InwJpA4cl7wAxFSUAGyKfCEdnAGOP3FMJLs8Iy2pwI3gDaxTrZRF3B5UOWwerHDcVwxzlcMxeD4YMKKezCV8BeQmdAWME5wgNNV+MpCBFZ1eLXBifIGVBQ14AAjUMaRWjRMGHfAKPD28SHwE5AXcHPQ0FAnsR8RFvEJkI74YINbkz/DopBFMhhyAVCisDU2zSCysm/Qz8bQGnEmYDEDRBd/Jnr2C6KBgBBx0yyUFkIfULlk/RDKAaxRhGVDIZ6AfDA/ca9yfuQVsGAwOnBxc6UTPyBMELbQiPCUMATQ6nGwfbGG4KdYzUATWPAbudA1uVhwJzkwY7Bw8Aaw+LBX3pACECqwinAAkA0wNbAD0CsQehAB0AiUUBQQMrMwEl6QKTA5cINc8BmTMB9y0EH8cMGQD7O25OAsO1AoBuZqYF4VwCkgJNOQFRKQQJUktVA7N15QDfAE8GF+NLARmvTs8e50cB43MvAMsA/wAJOQcJRQHRAfdxALsBYws1Caa3uQFR7S0AhwAZbwHbAo0A4QA5AIP1AVcAUQVd/QXXAlNNARU1HC9bZQG/AyMBNwERAH0Gz5GpzQsjBHEH1wIQHxXlAu8yB7kFAyLjE9FCyQK94lkAMhoKPAqrCqpgX2Q3CjV2PVQAEh+sPss/UgVVO1c7XDtXO1w7VztcO1c7XDtXO1wDm8Pmw+YKcF9JYe8Mqg3YRMw6TRPfYFVgNhPMLbsUxRXSJVoZQRrAJwkl6FUNDwgt12Y0CDA0eRfAAEMpbINFY4oeNApPHOtTlVT8LR8AtUumM7MNsBsZREQFS3XxYi4WEgomAmSFAmJGX1GzAV83JAKh+wJonAJmDQKfiDgfDwJmPwJmKgRyBIMDfxcDfpY5Cjl7GzmGOicnAmwhAjI6OA4CbcsCbbLzjgM3a0kvAWsA4gDlAE4JB5wMkQECD8YAEbkCdzMCdqZDAnlPRwJ4viFg30WyRvcCfEMCeswCfQ0CfPRIBEiBZygALxlJXEpfGRtK0ALRBQLQ0EsrA4hTA4fqRMmRNgLypV0HAwOyS9JMMSkH001QTbMCi0MCitzFHwshR2sJuwKOOwKOYESbhQKO3QKOYHxRuFM5AQ5S2FSJApP/ApMQAO0AIFUiVbNV1AosHymZijLleGpFPz0Cl6MC77ZYJawAXSkClpMCloCgAK1ZsFoNhVEAPwKWuQKWUlxIXNUCmc8CmWhczl0LHQKcnznGOqECnBoCn58CnryOACETNS4TAp31Ap6WALlBYThh8wKe1wKgcgGtAp6jIwKeUqljzGQrKS8CJ7MCJoICoP8CoFDbAqYzAqXSAqgDAIECp/ZogGi1AAdNaiBq1QKs5wKssgKtawKtBgJXIQJV4AKx5dsDH1JsmwKywRECsuwbbORtZ21MYwMl0QK2YD9DbpQDKUkCuGICuUsZArkue3A6cOUCvR0DLbYDMhUCvoxyBgMzdQK+HnMmc1MCw88CwwhzhnRPOUl05AM8qwEDPJ4DPcMCxYACxksCxhSNAshtVQLISALJUwLJMgJkoQLd1nh9ZXiyeSlL1AMYp2cGAmH4GfeVKHsPXpZevxUCz28Cz3AzT1fW9xejAMqxAs93AS3uA04Wfk8JAtwrAtuOAtJTA1JgA1NjAQUDVZCAjUMEzxrxZEl5A4LSg5EC2ssC2eKEFIRNp0ADhqkAMwNkEoZ1Xf0AWQLfaQLevHd7AuIz7RgB8zQrAfSfAfLWiwLr9wLpdH0DAur9AuroAP1LAb0C7o0C66CWrpcHAu5DA4XkmH1w5HGlAvMHAG0DjhqZlwL3FwORcgOSiwL3nAL53QL4apogmq+/O5siA52HAv7+AR8APZ8gAZ+3AwWRA6ZuA6bdANXJAwZuoYyiCQ0DDE0BEwEjB3EGZb1rCQC/BG/DFY8etxEAG3k9ACcDNxJRA42DAWcrJQCM8wAlAOanC6OVCLsGI6fJBgCvBRnDBvElRUYFFoAFcD9GSDNCKUK8X3kZX8QAls0FOgCQVCGbwTsuYDoZutcONxjOGJHJ/gVfBWAFXwVgBWsFYAVfBWAFXwVgBV8FYAVfBWBOHQjfjW8KCgoKbF7xMwTRA7kGN8PDAMMEr8MA70gxFroFTj5xPnhCR0K+X30/X/AAWBkzswCNBsxzzASm70aCRS4rDDMeLz49fnXfcsH5GcoscQFz13Y4HwVnBXLJycnACNdRYwgICAqEXoWTxgA7P4kACxbZBu21Kw0AjMsTAwkVAOVtJUUsJ1JCuULESUArXy9gPi9AKwnJRQYKTD9LPoA+iT54PnkCkULEUUpDX9NWV3JVEjQAc1w3A3IBE3YnX+g7QiMJb6MKaiszRCUuQrNCxDPMCcwEX9EWJzYREBEEBwIHKn6l33JCNVIfybPJtAltydPUCmhBZw/tEKsZAJOVJU1CLRuxbUHOQAo7P0s+eEJHHA8SJVRPdGM0NVrpvBoKhfUlM0JHHGUQUhEWO1xLSj8MO0ucNAqJIzVCRxv9EFsqKyA4OQgNj2nwZgp5ZNFgE2A1K3YHS2AhQQojJmC7DgpzGG1WYFUZCQYHZO9gHWCdYIVgu2BTYJlwFh8GvRbcXbG8YgtDHrMBwzPVyQonHQgkCyYBgQJ0Ajc4nVqIAwGSCsBPIgDsK3SWEtIVBa5N8gGjAo+kVwVIZwD/AEUSCDweX4ITrRQsJ8K3TwBXFDwEAB0TvzVcAtoTS20RIwDgVgZ9BBImYgA5AL4Coi8LFnezOkCnIQFjAY4KBAPh9RcGsgZSBsEAJctdsWIRu2kTkQstRw7DAcMBKgpPBGIGMDAwKCYnKTQaLg4AKRSVAFwCdl+YUZ0JdicFD3lPAdt1F9ZZKCGxuE3yBxkFVGcA/wBFEgiCBwAOLHQSjxOtQDg1z7deFRMAZ8QTAGtKb1ApIiPHADkAvgKiLy1DFtYCmBiDAlDDWNB0eo7fpaMO/aEVRRv0ATEQZBIODyMEAc8JQhCbDRgzFD4TAEMAu9YBCgCsAOkAm5I3ABwAYxvONnR+MhXJAxgKQyxL2+kkJhMbhQKDBMkSsvF0AD9BNQ6uQC7WqSQHwxEAEEIu1hkhAH2z4iQPwyJPHNWpdyYBRSpnJALzoBAEVPPsH20MxA0CCEQKRgAFyAtFAlMNwwjEDUQJRArELtapMg7DDZgJIw+TGukEIwvDFkMAqAtDEMMMBhioe+QAO3MMRAACrgnEBSPY9Q0FDnbSBoMAB8MSYxkSxAEJAPIJAAB8FWMOFtMc/HcXwxhDAC7DAvOowwAewwJdKDKHAAHDAALrFUQVwwAbwyvzpWMWv8wA/ABpAy++bcYDUKPD0KhDCwKmJ1MAAmMA5+UZwxAagwipBRL/eADfw6fDGOMCGsOjk3l6BwOpo4sAEsMOGxMAA5sAbcMOAAvDp0MJGkMDwgipnNIPAwfIqUMGAOGDAAPzABXDAAcDAAnDAGmTABrDAA7DChjDjnEWAwABYwAOcwAuUyYABsMAF8MIKQANUgC6wy4AA8MADqMq8wCyYgAcIwAB8wqpAAXOCx0V4wAHowBCwwEKAGnDAAuDAB3DAAjDCakABdIAbqcZ3QCZCCkABdIAAAFDAAfjAB2jCCkABqIACYMAGzMAbSMA5sOIAAhjAAhDABTDBAkpAAbSAOOTAAlDC6kOzPtnAAdDAG6kQFAATwAKwwwAA0MACbUDPwAHIwAZgwACE6cDAAojAApDAAoDp/MGwwAJIwADEwAQQwgAFEMAEXMAD5MADfMADcMAGRMOFiMAFUMAbqMWuwHDAMIAE0MLAGkzEgDhUwACQwAEWgAXgwUjAAbYABjDBSYBgzBaAEFNALcQBxUMegAwMngBrA0IZgJ0KxQHBREPd1N0ZzKRJwaIHAZqNT4DqQq8BwngAB4DAwt2AX56T1ocKQNXAh1GATQGC3tOxYNagkgAMQA5CQADAQEAWxLjAIOYNAEzAH7tFRk6TglSAF8NAAlYAQ+S1ACAQwQorQBiAN4dAJ1wPyeTANVzuQDX3AIeEMp9eyMgXiUAEdkBkJizKltbVVAaRMqRAAEAhyQ/SDEz6BmfVwB6ATEsOClKIRcDOF0E/832AFNt5AByAnkCRxGCOs94NjXdAwINGBonDBwPALW2AwICAgAAAAAAAAYDBQMDARrUAwAtAAAAAgEGBgYGBgYFBQUFBQUEBQYHCAkEBQUFBQQAAAICAAAAIgCNAJAAlT0A6gC7ANwApEQAwgCyAK0AqADuAKYA2gCjAOcBCAEDAMcAgQBiANIA1AEDAN4A8gCQAKkBMQDqAN8A3AsBCQ8yO9ra2tq8xuLT1tRJOB0BUgFcNU0BWgFpAWgBWwFMUUlLbhMBUxsNEAs6PhMOACcUKy0vMj5AQENDQ0RFFEYGJFdXV1dZWVhZL1pbXVxcI2NnZ2ZoZypsbnZ1eHh4eHh4enp6enp6enp6enp8fH18e2IARPIASQCaAHgAMgBm+ACOAFcAVwA3AnbvAIsABfj4AGQAk/IAnwBPAGIAZP//sACFAIUAaQBWALEAJAC2AIMCQAJDAPwA5wD+AP4A6AD/AOkA6QDoAOYALwJ7AVEBQAE+AVQBPgE+AT4BOQE4ATgBOAEcAVgXADEQCAEAUx8SHgsdHhYAjgCWAKYAUQBqIAIxAHYAbwCXAxUDJzIDIUlGTzEAkQJPAMcCVwKkAMAClgKWApYClgKWApYCiwKWApYClgKWApYClgKVApUCmAKgApcClgKWApQClAKUApQCkgKVAnUB1AKXAp8ClgKWApUeAIETBQD+DQOfAmECOh8BVBg9AuIZEjMbAU4/G1WZAXusRAFpYQEFA0FPAQYAmTEeIJdyADFoAHEANgCRA5zMk/C2jGINwjMWygIZCaXdfDILBCs5dAE7YnQBugDlhoiHhoiGiYqKhouOjIaNkI6Ij4qQipGGkoaThpSSlYaWhpeKmIaZhpqGm4aci52QnoqfhuIC4XTpAt90AIp0LHSoAIsAdHQEQwRABEIERQRDBEkERgRBBEcESQRIBEQERgRJAJ5udACrA490ALxuAQ10ANFZdHQA13QCFHQA/mJ0AP4BIQD+APwA/AD9APwDhGZ03ASMK23HAP4A/AD8AP0A/CR0dACRYnQA/gCRASEA/gCRAvQA/gCRA4RmdNwEjCttxyR0AP9idAEhAP4A/gD8APwA/QD8AP8A/AD8AP0A/AOEZnTcBIwrbcckdHQAkWJ0ASEA/gCRAP4AkQL0AP4AkQOEZnTcBIwrbcckdAJLAT50AlIBQXQCU8l0dAJfdHQDpgL0A6YDpgOnA6cDpwOnA4RmdNwEjCttxyR0dACRYnQBIQOmAJEDpgCRAvQDpgCRA4RmdNwEjCttxyR0BDh0AJEEOQCRDpU5dSgCADR03gV2CwArdAEFAM5iCnR0AF1iAAYcOgp0dACRCnQAXAEIwWZ0CnRmdHQAkWZ0CnRmdEXgAFF03gp0dEY0tlT2u3SOAQTwscwhjZZKrhYcBSfFp9XNbKiVDOD2b+cpe4/Z17mQnbtzzhaeQtE2GGj0IDNTjRUSyTxxw/RPHW/+vS7d1NfRt9z9QPZg4X7QFfhCnkvgNPIItOsC2eV6hPannZNHlZ9xrwZXIMOlu3jSoQSq78WEjwLjw1ELSlF1aBvfzwk5ZX7AUvQzjPQKbDuQ+sm4wNOp4A6AdVuRS0t1y/DZpg4R6m7FNjM9HgvW7Bi88zaMjOo6lM8wtBBdj8LP4ylv3zCXPhebMKJc066o9sF71oFW/8JXu86HJbwDID5lzw5GWLR/LhT0Qqnp2JQxNZNfcbLIzPy+YypqRm/lBmGmex+82+PisxUumSeJkALIT6rJezxMH+CTJmQtt5uwTVbL3ptmjDUQzlSIvWi8Tl7ng1NpuRn1Ng4n14Qc+3Iil7OwkvNWogLSPkn3pihIFytyIGmMhOe3n1tWsuMy9BdKyqF4Z3v2SgggTL9KVvMXPnCbRe+oOuFFP3HejBG/w9gvmfNYvg6JuWia2lcSSN1uIjBktzoIazOHPJZ7kKHPz8mRWVdW3lA8WGF9dQF6Bm673boov3BUWDU2JNcahR23GtfHKLOz/viZ+rYnZFaIznXO67CYEJ1fXuTRpZhYZkKe54xeoagkNGLs+NTZHE0rX45/XvQ2RGADX6vcAvdxIUBV27wxGm2zjZo4X3ILgAlrOFheuZ6wtsvaIj4yLY7qqawlliaIcrz2G+c3vscAnCkCuMzMmZvMfu9lLwTvfX+3cVSyPdN9ZwgDZhfjRgNJcLiJ67b9xx8JHswprbiE3v9UphotAPIgnXVIN5KmMc0piXhc6cChPnN+MRhG9adtdttQTTwSIpl8I4/j//d3sz1326qTBTpPRM/Hgh3kzqEXs8ZAk4ErQhNO8hzrQ0DLkWMA/N+91tn2MdOJnWC2FCZehkQrwzwbKOjhvZsbM95QoeL9skYyMf4srVPVJSgg7pOLUtr/n9eT99oe9nLtFRpjA9okV2Kj8h9k5HaC0oivRD8VyXkJ81tcd4fHNXPCfloIQasxsuO18/46dR2jgul/UIet2G0kRvnyONMKhHs6J26FEoqSqd+rfYjeEGwHWVDpX1fh1jBBcKGMqRepju9Y00mDVHC+Xdij/j44rKfvfjGinNs1jO/0F3jB83XCDINN/HB84axlP+3E/klktRo+vl3U/aiyMJbIodE1XSsDn6UAzIoMtUObY2+k/4gY/l+AkZJ5Sj2vQrkyLm3FoxjhDX+31UXBFf9XrAH31fFqoBmDEZvhvvpnZ87N+oZEu7U9O/nnk+QWj3x8uyoRbEnf+O5UMr9i0nHP38IF5AvzrBW8YWBUR0mIAzIvndQq9N3v/Jto3aPjPXUPl8ASdPPyAp7jENf8bk7VMM9ol9XGmlBmeDMuGqt+WzuL6CXAxXjIhCPM5vACchgMJ/8XBGLO/D1isVvGhwwHHr1DLaI5mn2Jr/b1pUD90uciDaS8cXNDzCWvNmT/PhQe5e8nTnnnkt8Ds/SIjibcum/fqDhKopxAY8AkSrPn+IGDEKOO+U3XOP6djFs2H5N9+orhOahiQk5KnEUWa+CzkVzhp8bMHRbg81qhjjXuIKbHjSLSIBKWqockGtKinY+z4/RdBUF6pcc3JmnlxVcNgrI4SEzKUZSwcD2QCyxzKve+gAmg6ZuSRkpPFa6mfThu7LJNu3H5K42uCpNvPAsoedolKV/LHe/eJ+BbaG5MG0NaSGVPRUmNFMFFSSpXEcXwbVh7UETOZZtoVNRGOIbbkig3McEtR68cG0RZAoJevWYo7Dg/lZ1CQzblWeUvVHmr8fY4Nqd9JJiH/zEX24mJviH60fAyFr0A3c4bC1j3yZU60VgJxXn8JgJXLUIsiBnmKmMYz+7yBQFBvqb2eYnuW59joZBf56/wXvWIR4R8wTmV80i1mZy+S4+BUES+hzjk0uXpC///z/IlqHZ1monzlXp8aCfhGKMti73FI1KbL1q6IKO4fuBuZ59gagjn5xU79muMpHXg6S+e+gDM/U9BKLHbl9l6o8czQKl4RUkJJiqftQG2i3BMg/TQlUYFkJDYBOOvAugYuzYSDnZbDDd/aSd9x0Oe6F+bJcHfl9+gp6L5/TgA+BdFFovbfCrQ40s5vMPw8866pNX8zyFGeFWdxIpPVp9Rg1UPOVFbFZrvaFq/YAzHQgqMWpahMYfqHpmwXfHL1/kpYmGuHFwT55mQu0dylfNuq2Oq0hTMCPwqfxnuBIPLXfci4Y1ANy+1CUipQxld/izVh16WyG2Q0CQQ9NqtAnx1HCHwDj7sYxOSB0wopZSnOzxQOcExmxrVTF2BkOthVpGfuhaGECfCJpJKpjnihY+xOT2QJxN61+9K6QSqtv2Shr82I3jgJrqBg0wELFZPjvHpvzTtaJnLK6Vb97Yn933koO/saN7fsjwNKzp4l2lJVx2orjCGzC/4ZL4zCver6aQYtC5sdoychuFE6ufOiog+VWi5UDkbmvmtah/3aArEBIi39s5ILUnlFLgilcGuz9CQshEY7fw2ouoILAYPVT/gyAIq3TFAIwVsl+ktkRz/qGfnCDGrm5gsl/l9QdvCWGsjPz3dU7XuqKfdUrr/6XIgjp4rey6AJBmCmUJMjITHVdFb5m1p+dLMCL8t55zD42cmftmLEJC0Da04YiRCVUBLLa8D071/N5UBNBXDh0LFsmhV/5B5ExOB4j3WVG/S3lfK5o+V6ELHvy6RR9n4ac+VsK4VE4yphPvV+kG9FegTBH4ZRXL2HytUHCduJazB/KykjfetYxOXTLws267aGOd+I+JhKP//+VnXmS90OD/jvLcVu0asyqcuYN1mSb6XTlCkqv1vigZPIYwNF/zpWcT1GR/6aEIRjkh0yhg4LXJfaGobYJTY4JI58KiAKgmmgAKWdl5nYCeLqavRJGQNuYuZtZFGx+IkI4w4NS2xwbetNMunOjBu/hmKCI/w7tfiiyUd//4rbTeWt4izBY8YvGIN6vyKYmP/8X8wHKCeN+WRcKM70+tXKNGyevU9H2Dg5BsljnTf8YbsJ1TmMs74Ce2XlHisleguhyeg44rQOHZuw/6HTkhnnurK2d62q6yS7210SsAIaR+jXMQA+svkrLpsUY+F30Uw89uOdGAR6vo4FIME0EfVVeHTu6eKicfhSqOeXJhbftcd08sWEnNUL1C9fnprTgd83IMut8onVUF0hvqzZfHduPjbjwEXIcoYmy+P6tcJZHmeOv6VrvEdkHDJecjHuHeWANe79VG662qTjA/HCvumVv3qL+LrOcpqGps2ZGwQdFJ7PU4iuyRlBrwfO+xnPyr47s2cXVbWzAyznDiBGjCM3ksxjjqM62GE9C8f5U38kB3VjtabKp/nRdvMESPGDG90bWRLAt1Qk5DyLuazRR1YzdC1c+hZXvAWV8xA72S4A8B67vjVhbba3MMop293FeEXpe7zItMWrJG/LOH9ByOXmYnNJfjmfuX9KbrpgLOba4nZ+fl8Gbdv/ihv+6wFGKHCYrVwmhFC0J3V2bn2tIB1wCc1CST3d3X2OyxhguXcs4sm679UngzofuSeBewMFJboIQHbUh/m2JhW2hG9DIvG2t7yZIzKBTz9wBtnNC+2pCRYhSIuQ1j8xsz5VvqnyUIthvuoyyu7fNIrg/KQUVmGQaqkqZk/Vx5b33/gsEs8yX7SC1J+NV4icz6bvIE7C5G6McBaI8rVg56q5QBJWxn/87Q1sPK4+sQa8fLU5gXo4paaq4cOcQ4wR0VBHPGjKh+UlPCbA1nLXyEUX45qZ8J7/Ln4FPJE2TdzD0Z8MLSNQiykMMmSyOCiFfy84Rq60emYB2vD09KjYwsoIpeDcBDTElBbXxND72yhd9pC/1CMid/5HUMvAL27OtcIJDzNKpRPNqPOpyt2aPGz9QWIs9hQ9LiX5s8m9hjTUu/f7MyIatjjd+tSfQ3ufZxPpmJhTaBtZtKLUcfOCUqADuO+QoH8B9v6U+P0HV1GLQmtoNFTb3s74ivZgjES0qfK+8RdGgBbcCMSy8eBvh98+et1KIFqSe1KQPyXULBMTsIYnysIwiZBJYdI20vseV+wuJkcqGemehKjaAb9L57xZm3g2zX0bZ2xk/fU+bCo7TlnbW7JuF1YdURo/2Gw7VclDG1W7LOtas2LX4upifZ/23rzpsnY/ALfRgrcWP5hYmV9VxVOQA1fZvp9F2UNU+7d7xRyVm5wiLp3/0dlV7vdw1PMiZrbDAYzIVqEjRY2YU03sJhPnlwIPcZUG5ltL6S8XCxU1eYS5cjr34veBmXAvy7yN4ZjArIG0dfD/5UpBNlX1ZPoxJOwyqRi3wQWtOzd4oNKh0LkoTm8cwqgIfKhqqGOhwo71I+zXnMemTv2B2AUzABWyFztGgGULjDDzWYwJUVBTjKCn5K2QGMK1CQT7SzziOjo+BhAmqBjzuc3xYym2eedGeOIRJVyTwDw37iCMe4g5Vbnsb5ZBdxOAnMT7HU4DHpxWGuQ7GeiY30Cpbvzss55+5Km1YsbD5ea3NI9QNYIXol5apgSu9dZ8f8xS5dtHpido5BclDuLWY4lhik0tbJa07yJhH0BOyEut/GRbYTS6RfiTYWGMCkNpfSHi7HvdiTglEVHKZXaVhezH4kkXiIvKopYAlPusftpE4a5IZwvw1x/eLvoDIh/zpo9FiQInsTb2SAkKHV42XYBjpJDg4374XiVb3ws4qM0s9eSQ5HzsMU4OZJKuopFjBM+dAZEl8RUMx5uU2N486Kr141tVsGQfGjORYMCJAMsxELeNT4RmWjRcpdTGBwcx6XN9drWqPmJzcrGrH4+DRc7+n1w3kPZwu0BkNr6hQrqgo7JTB9A5kdJ/H7P4cWBMwsmuixAzJB3yrQpnGIq90lxAXLzDCdn1LPibsRt7rHNjgQBklRgPZ8vTbjXdgXrTWQsK5MdrXXQVPp0Rinq3frzZKJ0qD6Qhc40VzAraUXlob1gvkhK3vpmHgI6FRlQZNx6eRqkp0zy4AQlX813fAPtL3jMRaitGFFjo0zmErloC+h+YYdVQ6k4F/epxAoF0BmqEoKNTt6j4vQZNQ2BoqF9Vj53TOIoNmDiu9Xp15RkIgQIGcoLpfoIbenzpGUAtqFJp5W+LLnx38jHeECTJ/navKY1NWfN0sY1T8/pB8kIH3DU3DX+u6W3YwpypBMYOhbSxGjq84RZ84fWJow8pyHqn4S/9J15EcCMsXqrfwyd9mhiu3+rEo9pPpoJkdZqHjra4NvzFwuThNKy6hao/SlLw3ZADUcUp3w3SRVfW2rhl80zOgTYnKE0Hs2qp1J6H3xqPqIkvUDRMFDYyRbsFI3M9MEyovPk8rlw7/0a81cDVLmBsR2ze2pBuKb23fbeZC0uXoIvDppfTwIDxk1Oq2dGesGc+oJXWJLGkOha3CX+DUnzgAp9HGH9RsPZN63Hn4RMA5eSVhPHO+9RcRb/IOgtW31V1Q5IPGtoxPjC+MEJbVlIMYADd9aHYWUIQKopuPOHmoqSkubnAKnzgKHqgIOfW5RdAgotN6BN+O2ZYHkuemLnvQ8U9THVrS1RtLmKbcC7PeeDsYznvqzeg6VCNwmr0Yyx1wnLjyT84BZz3EJyCptD3yeueAyDWIs0L2qs/VQ3HUyqfrja0V1LdDzqAikeWuV4sc7RLIB69jEIBjCkyZedoUHqCrOvShVzyd73OdrJW0hPOuQv2qOoHDc9xVb6Yu6uq3Xqp2ZaH46A7lzevbxQEmfrzvAYSJuZ4WDk1Hz3QX1LVdiUK0EvlAGAYlG3Md30r7dcPN63yqBCIj25prpvZP0nI4+EgWoFG95V596CurXpKRBGRjQlHCvy5Ib/iW8nZJWwrET3mgd6mEhfP4KCuaLjopWs7h+MdXFdIv8dHQJgg1xi1eYqB0uDYjxwVmri0Sv5XKut/onqapC+FQiC2C1lvYJ9MVco6yDYsS3AANUfMtvtbYI2hfwZatiSsnoUeMZd34GVjkMMKA+XnjJpXgRW2SHTZplVowPmJsvXy6w3cfO1AK2dvtZEKTkC/TY9LFiKHCG0DnrMQdGm2lzlBHM9iEYynH2UcVMhUEjsc0oDBTgo2ZSQ1gzkAHeWeBXYFjYLuuf8yzTCy7/RFR81WDjXMbq2BOH5dURnxo6oivmxL3cKzKInlZkD31nvpHB9Kk7GfcfE1t+1V64b9LtgeJGlpRFxQCAqWJ5DoY77ski8gsOEOr2uywZaoO/NGa0X0y1pNQHBi3b2SUGNpcZxDT7rLbBf1FSnQ8guxGW3W+36BW0gBje4DOz6Ba6SVk0xiKgt+q2JOFyr4SYfnu+Ic1QZYIuwHBrgzr6UvOcSCzPTOo7D6IC4ISeS7zkl4h+2VoeHpnG/uWR3+ysNgPcOIXQbv0n4mr3BwQcdKJxgPSeyuP/z1Jjg4e9nUvoXegqQVIE30EHx5GHv+FAVUNTowYDJgyFhf5IvlYmEqRif6+WN1MkEJmDcQITx9FX23a4mxy1AQRsOHO/+eImX9l8EMJI3oPWzVXxSOeHU1dUWYr2uAA7AMb+vAEZSbU3qob9ibCyXeypEMpZ6863o6QPqlqGHZkuWABSTVNd4cOh9hv3qEpSx2Zy/DJMP6cItEmiBJ5PFqQnDEIt3NrA3COlOSgz43D7gpNFNJ5MBh4oFzhDPiglC2ypsNU4ISywY2erkyb1NC3Qh/IfWj0eDgZI4/ln8WPfBsT3meTjq1Uqt1E7Zl/qftqkx6aM9KueMCekSnMrcHj1CqTWWzEzPsZGcDe3Ue4Ws+XFYVxNbOFF8ezkvQGR6ZOtOLU2lQEnMBStx47vE6Pb7AYMBRj2OOfZXfisjJnpTfSNjo6sZ6qSvNxZNmDeS7Gk3yYyCk1HtKN2UnhMIjOXUzAqDv90lx9O/q/AT1ZMnit5XQe9wmQxnE/WSH0CqZ9/2Hy+Sfmpeg8RwsHI5Z8kC8H293m/LHVVM/BA7HaTJYg5Enk7M/xWpq0192ACfBai2LA/qrCjCr6Dh1BIMzMXINBmX96MJ5Hn2nxln/RXPFhwHxUmSV0EV2V0jm86/dxxuYSU1W7sVkEbN9EzkG0QFwPhyHKyb3t+Fj5WoUUTErcazE/N6EW6Lvp0d//SDPj7EV9UdJN+Amnf3Wwk3A0SlJ9Z00yvXZ7n3z70G47Hfsow8Wq1JXcfwnA+Yxa5mFsgV464KKP4T31wqIgzFPd3eCe3j5ory5fBF2hgCFyVFrLzI9eetNXvM7oQqyFgDo4CTp/hDV9NMX9JDHQ/nyHTLvZLNLF6ftn2OxjGm8+PqOwhxnPHWipkE/8wbtyri80Sr7pMNkQGMfo4ZYK9OcCC4ESVFFbLMIvlxSoRqWie0wxqnLfcLSXMSpMMQEJYDVObYsXIQNv4TGNwjq1kvT1UOkicTrG3IaBZ3XdScS3u8sgeZPVpOLkbiF940FjbCeNRINNvDbd01EPBrTCPpm12m43ze1bBB59Ia6Ovhnur/Nvx3IxwSWol+3H2qfCJR8df6aQf4v6WiONxkK+IqT4pKQrZK/LplgDI/PJZbOep8dtbV7oCr6CgfpWa8NczOkPx81iSHbsNhVSJBOtrLIMrL31LK9TqHqAbAHe0RLmmV806kRLDLNEhUEJfm9u0sxpkL93Zgd6rw+tqBfTMi59xqXHLXSHwSbSBl0EK0+loECOPtrl+/nsaFe197di4yUgoe4jKoAJDXc6DGDjrQOoFDWZJ9HXwt8xDrQP+7aRwWKWI1GF8s8O4KzxWBBcwnl3vnl1Oez3oh6Ea1vjR7/z7DDTrFtqU2W/KAEzAuXDNZ7MY73MF216dzdSbWmUp4lcm7keJfWaMHgut9x5C9mj66Z0lJ+yhsjVvyiWrfk1lzPOTdhG15Y7gQlXtacvI7qv/XNSscDwqkgwHT/gUsD5yB7LdRRvJxQGYINn9hTpodKFVSTPrtGvyQw+HlRFXIkodErAGu9Iy1YpfSPc3jkFh5CX3lPxv7aqjE/JAfTIpEjGb/H7MO0e2vsViSW1qa/Lmi4/n4DEI3g7lYrcanspDfEpKkdV1OjSLOy0BCUqVoECaB55vs06rXl4jqmLsPsFM/7vYJ0vrBhDCm/00A/H81l1uekJ/6Lml3Hb9+NKiLqATJmDpyzfYZFHumEjC662L0Bwkxi7E9U4cQA0XMVDuMYAIeLMPgQaMVOd8fmt5SflFIfuBoszeAw7ow5gXPE2Y/yBc/7jExARUf/BxIHQBF5Sn3i61w4z5xJdCyO1F1X3+3ax+JSvMeZ7S6QSKp1Fp/sjYz6Z+VgCZzibGeEoujryfMulH7Rai5kAft9ebcW50DyJr2uo2z97mTWIu45YsSnNSMrrNUuG1XsYBtD9TDYzQffKB87vWbkM4EbPAFgoBV4GQS+vtFDUqOFAoi1nTtmIOvg38N4hT2Sn8r8clmBCXspBlMBYTnrqFJGBT3wZOzAyJDre9dHH7+x7qaaKDOB4UQALD5ecS0DE4obubQEiuJZ0EpBVpLuYcce8Aa4PYd/V4DLDAJBYKQPCWTcrEaZ5HYbJi11Gd6hjGom1ii18VHYnG28NKpkz2UKVPxlhYSp8uZr367iOmoy7zsxehW9wzcy2zG0a80PBMCRQMb32hnaHeOR8fnNDzZhaNYhkOdDsBUZ3loDMa1YP0uS0cjUP3b/6DBlqmZOeNABDsLl5BI5QJups8uxAuWJdkUB/pO6Zax6tsg7fN5mjjDgMGngO+DPcKqiHIDbFIGudxtPTIyDi9SFMKBDcfdGQRv41q1AqmxgkVfJMnP8w/Bc7N9/TR6C7mGObFqFkIEom8sKi2xYqJLTCHK7cxzaZvqODo22c3wisBCP4HeAgcRbNPAsBkNRhSmD48dHupdBRw4mIvtS5oeF6zeT1KMCyhMnmhpkFAGWnGscoNkwvQ8ZM5lE/vgTHFYL99OuNxdFBxTEDd5v2qLR8y9WkXsWgG6kZNndFG+pO/UAkOCipqIhL3hq7cRSdrCq7YhUsTocEcnaFa6nVkhnSeRYUA1YO0z5itF9Sly3VlxYDw239TJJH6f3EUfYO5lb7bcFcz8Bp7Oo8QmnsUHOz/fagVUBtKEw1iT88j+aKkv8cscKNkMxjYr8344D1kFoZ7/td1W6LCNYN594301tUGRmFjAzeRg5vyoM1F6+bJZ/Q54jN/k8SFd3DxPTYaAUsivsBfgTn7Mx8H2SpPt4GOdYRnEJOH6jHM2p6SgB0gzIRq6fHxGMmSmqaPCmlfwxiuloaVIitLGN8wie2CDWhkzLoCJcODh7KIOAqbHEvXdUxaS4TTTs07Clzj/6GmVs9kiZDerMxEnhUB6QQPlcfqkG9882RqHoLiHGBoHfQuXIsAG8GTAtao2KVwRnvvam8jo1e312GQAKWEa4sUVEAMG4G6ckcONDwRcg1e2D3+ohXgY4UAWF8wHKQMrSnzCgfFpsxh+aHXMGtPQroQasRY4U6UdG0rz1Vjbka0MekOGRZQEvqQFlxseFor8zWFgHek3v29+WqN6gaK5gZOTOMZzpQIC1201LkMCXild3vWXSc5UX9xcFYfbRPzGFa1FDcPfPB/jUEq/FeGt419CI3YmBlVoHsa4KdcwQP5ZSwHHhFJ7/Ph/Rap/4vmG91eDwPP0lDfCDRCLszTqfzM71xpmiKi2HwS4WlqvGNwtvwF5Dqpn6KTq8ax00UMPkxDcZrEEEsIvHiUXXEphdb4GB4FymlPwBz4Gperqq5pW7TQ6/yNRhW8VT5NhuP0udlxo4gILq5ZxAZk8ZGh3g4CqxJlPKY7AQxupfUcVpWT5VItp1+30UqoyP4wWsRo3olRRgkWZZ2ZN6VC3OZFeXB8NbnUrSdikNptD1QiGuKkr8EmSR/AK9Rw+FF3s5uwuPbvHGiPeFOViltMK7AUaOsq9+x9cndk3iJEE5LKZRlWJbKOZweROzmPNVPkjE3K/TyA57Rs68TkZ3MR8akKpm7cFjnjPd/DdkWjgYoKHSr5Wu5ssoBYU4acRs5g2DHxUmdq8VXOXRbunD8QN0LhgkssgahcdoYsNvuXGUK/KXD/7oFb+VGdhqIn02veuM5bLudJOc2Ky0GMaG4W/xWBxIJcL7yliJOXOpx0AkBqUgzlDczmLT4iILXDxxtRR1oZa2JWFgiAb43obrJnG/TZC2KSK2wqOzRZTXavZZFMb1f3bXvVaNaK828w9TO610gk8JNf3gMfETzXXsbcvRGCG9JWQZ6+cDPqc4466Yo2RcKH+PILeKOqtnlbInR3MmBeGG3FH10yzkybuqEC2HSQwpA0An7d9+73BkDUTm30bZmoP/RGbgFN+GrCOfADgqr0WbI1a1okpFms8iHYw9hm0zUvlEMivBRxModrbJJ+9/p3jUdQQ9BCtQdxnOGrT5dzRUmw0593/mbRSdBg0nRvRZM5/E16m7ZHmDEtWhwvfdZCZ8J8M12W0yRMszXamWfQTwIZ4ayYktrnscQuWr8idp3PjT2eF/jmtdhIfcpMnb+IfZY2FebW6UY/AK3jP4u3Tu4zE4qlnQgLFbM19EBIsNf7KhjdbqQ/D6yiDb+NlEi2SKD+ivXVUK8ib0oBo366gXkR8ZxGjpJIDcEgZPa9TcYe0TIbiPl/rPUQDu3XBJ9X/GNq3FAUsKsll57DzaGMrjcT+gctp+9MLYXCq+sqP81eVQ0r9lt+gcQfZbACRbEjvlMskztZG8gbC8Qn9tt26Q7y7nDrbZq/LEz7kR6Jc6pg3N9rVX8Y5MJrGlML9p9lU4jbTkKqCveeZUJjHB03m2KRKR2TytoFkTXOLg7keU1s1lrPMQJpoOKLuAAC+y1HlJucU6ysB5hsXhvSPPLq5J7JtnqHKZ4vYjC4Vy8153QY+6780xDuGARsGbOs1WqzH0QS765rnSKEbbKlkO8oI/VDwUd0is13tKpqILu1mDJFNy/iJAWcvDgjxvusIT+PGz3ST/J9r9Mtfd0jpaGeiLYIqXc7DiHSS8TcjFVksi66PEkxW1z6ujbLLUGNNYnzOWpH8BZGK4bCK7iR+MbIv8ncDAz1u4StN3vTTzewr9IQjk9wxFxn+6N1ddKs0vffJiS08N3a4G1SVrlZ97Q/M+8G9fe5AP6d9/Qq4WRnORVhofPIKEdCr3llspUfE0oKIIYoByBRPh+bX1HLS3JWGJRhIvE1aW4NTd8ePi4Z+kXb+Z8snYfSNcqijhAgVsx4RCM54cXUiYkjeBmmC4ajOHrChoELscJJC7+9jjMjw5BagZKlgRMiSNYz7h7vvZIoQqbtQmspc0cUk1G/73iXtSpROl5wtLgQi0mW2Ex8i3WULhcggx6E1LMVHUsdc9GHI1PH3U2Ko0PyGdn9KdVOLm7FPBui0i9a0HpA60MsewVE4z8CAt5d401Gv6zXlIT5Ybit1VIA0FCs7wtvYreru1fUyW3oLAZ/+aTnZrOcYRNVA8spoRtlRoWflsRClFcgzkqiHOrf0/SVw+EpVaFlJ0g4Kxq1MMOmiQdpMNpte8lMMQqm6cIFXlnGbfJllysKDi+0JJMotkqgIxOSQgU9dn/lWkeVf8nUm3iwX2Nl3WDw9i6AUK3vBAbZZrcJpDQ/N64AVwjT07Jef30GSSmtNu2WlW7YoyW2FlWfZFQUwk867EdLYKk9VG6JgEnBiBxkY7LMo4YLQJJlAo9l/oTvJkSARDF/XtyAzM8O2t3eT/iXa6wDN3WewNmQHdPfsxChU/KtLG2Mn8i4ZqKdSlIaBZadxJmRzVS/o4yA65RTSViq60oa395Lqw0pzY4SipwE0SXXsKV+GZraGSkr/RW08wPRvqvSUkYBMA9lPx4m24az+IHmCbXA+0faxTRE9wuGeO06DIXa6QlKJ3puIyiuAVfPr736vzo2pBirS+Vxel3TMm3JKhz9o2ZoRvaFVpIkykb0Hcm4oHFBMcNSNj7/4GJt43ogonY2Vg4nsDQIWxAcorpXACzgBqQPjYsE/VUpXpwNManEru4NwMCFPkXvMoqvoeLN3qyu/N1eWEHttMD65v19l/0kH2mR35iv/FI+yjoHJ9gPMz67af3Mq/BoWXqu3rphiWMXVkmnPSEkpGpUI2h1MThideGFEOK6YZHPwYzMBvpNC7+ZHxPb7epfefGyIB4JzO9DTNEYnDLVVHdQyvOEVefrk6Uv5kTQYVYWWdqrdcIl7yljwwIWdfQ/y+2QB3eR/qxYObuYyB4gTbo2in4PzarU1sO9nETkmj9/AoxDA+JM3GMqQtJR4jtduHtnoCLxd1gQUscHRB/MoRYIEsP2pDZ9KvHgtlk1iTbWWbHhohwFEYX7y51fUV2nuUmnoUcqnWIQAAgl9LTVX+Bc0QGNEhChxHR4YjfE51PUdGfsSFE6ck7BL3/hTf9jLq4G1IafINxOLKeAtO7quulYvH5YOBc+zX7CrMgWnW47/jfRsWnJjYYoE7xMfWV2HN2iyIqLI";const c_=new Map([[8217,"apostrophe"],[8260,"fraction slash"],[12539,"middle dot"]]),l_=4;function UW(t){let e=0;function n(){return t[e++]<<8|t[e++]}let r=n(),s=1,i=[0,1];for(let T=1;T<r;T++)i.push(s+=n());let a=n(),o=e;e+=a;let l=0,u=0;function d(){return l==0&&(u=u<<8|t[e++],l=8),u>>--l&1}const h=31,f=2**h,p=f>>>1,g=p>>1,m=f-1;let y=0;for(let T=0;T<h;T++)y=y<<1|d();let b=[],w=0,x=f;for(;;){let T=Math.floor(((y-w+1)*s-1)/x),j=0,P=r;for(;P-j>1;){let k=j+P>>>1;T<i[k]?P=k:j=k}if(j==0)break;b.push(j);let S=w+Math.floor(x*i[j]/s),E=w+Math.floor(x*i[j+1]/s)-1;for(;!((S^E)&p);)y=y<<1&m|d(),S=S<<1&m,E=E<<1&m|1;for(;S&~E&g;)y=y&p|y<<1&m>>>1|d(),S=S<<1^p,E=(E^p)<<1|p|1;w=S,x=1+E-S}let A=r-4;return b.map(T=>{switch(T-A){case 3:return A+65792+(t[o++]<<16|t[o++]<<8|t[o++]);case 2:return A+256+(t[o++]<<8|t[o++]);case 1:return A+t[o++];default:return T-1}})}function MW(t){let e=0;return()=>t[e++]}function T8(t){return MW(UW(LW(t)))}function LW(t){let e=[];[..."ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"].forEach((s,i)=>e[s.charCodeAt(0)]=i);let n=t.length,r=new Uint8Array(6*n>>3);for(let s=0,i=0,a=0,o=0;s<n;s++)o=o<<6|e[t.charCodeAt(s)],a+=6,a>=8&&(r[i++]=o>>(a-=8));return r}function BW(t){return t&1?~t>>1:t>>1}function $W(t,e){let n=Array(t);for(let r=0,s=0;r<t;r++)n[r]=s+=BW(e());return n}function k0(t,e=0){let n=[];for(;;){let r=t(),s=t();if(!s)break;e+=r;for(let i=0;i<s;i++)n.push(e+i);e+=s+1}return n}function S8(t){return _0(()=>{let e=k0(t);if(e.length)return e})}function k8(t){let e=[];for(;;){let n=t();if(n==0)break;e.push(FW(n,t))}for(;;){let n=t()-1;if(n<0)break;e.push(HW(n,t))}return e.flat()}function _0(t){let e=[];for(;;){let n=t(e.length);if(!n)break;e.push(n)}return e}function _8(t,e,n){let r=Array(t).fill().map(()=>[]);for(let s=0;s<e;s++)$W(t,n).forEach((i,a)=>r[a].push(i));return r}function FW(t,e){let n=1+e(),r=e(),s=_0(e);return _8(s.length,1+t,e).flatMap((a,o)=>{let[l,...u]=a;return Array(s[o]).fill().map((d,h)=>{let f=h*r;return[l+h*n,u.map(p=>p+f)]})})}function HW(t,e){let n=1+e();return _8(n,1+t,e).map(s=>[s[0],s.slice(1)])}function VW(t){let e=[],n=k0(t);return s(r([]),[]),e;function r(i){let a=t(),o=_0(()=>{let l=k0(t).map(u=>n[u]);if(l.length)return r(l)});return{S:a,B:o,Q:i}}function s({S:i,B:a},o,l){if(!(i&4&&l===o[o.length-1])){i&2&&(l=o[o.length-1]),i&1&&e.push(o);for(let u of a)for(let d of u.Q)s(u,[...o,d],l)}}}function zW(t){return t.toString(16).toUpperCase().padStart(2,"0")}function I8(t){return`{${zW(t)}}`}function WW(t){let e=[];for(let n=0,r=t.length;n<r;){let s=t.codePointAt(n);n+=s<65536?1:2,e.push(s)}return e}function Lp(t){let n=t.length;if(n<4096)return String.fromCodePoint(...t);let r=[];for(let s=0;s<n;)r.push(String.fromCodePoint(...t.slice(s,s+=4096)));return r.join("")}function qW(t,e){let n=t.length,r=n-e.length;for(let s=0;r==0&&s<n;s++)r=t[s]-e[s];return r}var KW="AEUDTAHBCFQATQDRADAAcgAgADQAFAAsABQAHwAOACQADQARAAoAFwAHABIACAAPAAUACwAFAAwABAAQAAMABwAEAAoABQAIAAIACgABAAQAFAALAAIACwABAAIAAQAHAAMAAwAEAAsADAAMAAwACgANAA0AAwAKAAkABAAdAAYAZwDSAdsDJgC0CkMB8xhZAqfoC190UGcThgBurwf7PT09Pb09AjgJum8OjDllxHYUKXAPxzq6tABAxgK8ysUvWAgMPT09PT09PSs6LT2HcgWXWwFLoSMEEEl5RFVMKvO0XQ8ExDdJMnIgsj26PTQyy8FfEQ8AY8IPAGcEbwRwBHEEcgRzBHQEdQR2BHcEeAR6BHsEfAR+BIAEgfndBQoBYgULAWIFDAFiBNcE2ATZBRAFEQUvBdALFAsVDPcNBw13DYcOMA4xDjMB4BllHI0B2grbAMDpHLkQ7QHVAPRNQQFnGRUEg0yEB2uaJF8AJpIBpob5AERSMAKNoAXqaQLUBMCzEiACnwRZEkkVsS7tANAsBG0RuAQLEPABv9HICTUBXigPZwRBApMDOwAamhtaABqEAY8KvKx3LQ4ArAB8UhwEBAVSagD8AEFZADkBIadVj2UMUgx5Il4ANQC9AxIB1BlbEPMAs30CGxlXAhwZKQIECBc6EbsCoxngzv7UzRQA8M0BawL6ZwkN7wABAD33OQRcsgLJCjMCjqUChtw/km+NAsXPAoP2BT84PwURAK0RAvptb6cApQS/OMMey5HJS84UdxpxTPkCogVFITaTOwERAK5pAvkNBOVyA7q3BKlOJSALAgUIBRcEdASpBXqzABXFSWZOawLCOqw//AolCZdvv3dSBkEQGyelEPcMMwG1ATsN7UvYBPEGOwTJH30ZGQ/NlZwIpS3dDO0m4y6hgFoj9SqDBe1L9DzdC01RaA9ZC2UJ4zpjgU4DIQENIosK3Q05CG0Q8wrJaw3lEUUHOQPVSZoApQcBCxEdNRW1JhBirAsJOXcG+xr2C48mrxMpevwF0xohBk0BKRr/AM8u54WwWjFcHE9fBgMLJSPHFKhQIA0lQLd4SBobBxUlqQKRQ3BKh1E2HpMh9jw9DWYuE1F8B/U8BRlPC4E8nkarRQ4R0j6NPUgiSUwsBDV/LC8niwnPD4UMuXxyAVkJIQmxDHETMREXN8UIOQcZLZckJxUIIUaVYJoE958D8xPRAwsFPwlBBxMDtRwtEy4VKQUNgSTXAvM21S6zAo9WgAEXBcsPJR/fEFBH4A7pCJsCZQODJesALRUhABcimwhDYwBfj9hTBS7LCMdqbCN0A2cU52ERcweRDlcHpxwzFb8c4XDIXguGCCijrwlbAXUJmQFfBOMICTVbjKAgQWdTi1gYmyBhQT9d/AIxDGUVn0S9h3gCiw9rEhsBNQFzBzkNAQJ3Ee0RaxCVCOuGBDW1M/g6JQRPIYMgEQonA09szgsnJvkM+GkBoxJiAww0PXfuZ6tgtiQX/QcZMsVBYCHxC5JPzQycGsEYQlQuGeQHvwPzGvMn6kFXBf8DowMTOk0z7gS9C2kIiwk/AEkOoxcH1xhqCnGM0AExiwG3mQNXkYMCb48GNwcLAGcLhwV55QAdAqcIowAFAM8DVwA5Aq0HnQAZAIVBAT0DJy8BIeUCjwOTCDHLAZUvAfMpBBvDDBUA9zduSgLDsQKAamaiBd1YAo4CSTUBTSUEBU5HUQOvceEA2wBLBhPfRwEVq0rLGuNDAd9vKwDHAPsABTUHBUEBzQHzbQC3AV8LMQmis7UBTekpAIMAFWsB1wKJAN0ANQB/8QFTAE0FWfkF0wJPSQERMRgrV2EBuwMfATMBDQB5BsuNpckHHwRtB9MCEBsV4QLvLge1AQMi3xPNQsUCvd5VoWACZIECYkJbTa9bNyACofcCaJgCZgkCn4Q4GwsCZjsCZiYEbgR/A38TA36SOQY5dxc5gjojIwJsHQIyNjgKAm3HAm2u74ozZ0UrAWcA3gDhAEoFB5gMjQD+C8IADbUCdy8CdqI/AnlLQwJ4uh1c20WuRtcCfD8CesgCfQkCfPAFWQUgSABIfWMkAoFtAoAAAoAFAn+uSVhKWxUXSswC0QEC0MxLJwOITwOH5kTFkTIC8qFdAwMDrkvOTC0lA89NTE2vAos/AorYwRsHHUNnBbcCjjcCjlxAl4ECjtkCjlx4UbRTNQpS1FSFApP7ApMMAOkAHFUeVa9V0AYsGymVhjLheGZFOzkCl58C77JYIagAWSUClo8ClnycAKlZrFoJgU0AOwKWtQKWTlxEXNECmcsCmWRcyl0HGQKcmznCOp0CnBYCn5sCnriKAB0PMSoPAp3xAp6SALU9YTRh7wKe0wKgbgGpAp6fHwKeTqVjyGQnJSsCJ68CJn4CoPsCoEwCot0CocQCpi8Cpc4Cp/8AfQKn8mh8aLEAA0lqHGrRAqzjAqyuAq1nAq0CAlcdAlXcArHh1wMfTmyXArK9DQKy6Bds4G1jbUhfAyXNArZcOz9ukAMpRQK4XgK5RxUCuSp3cDZw4QK9GQK72nCWAzIRAr6IcgIDM3ECvhpzInNPAsPLAsMEc4J0SzVFdOADPKcDPJoDPb8CxXwCxkcCxhCJAshpUQLIRALJTwLJLgJknQLd0nh5YXiueSVL0AMYo2cCAmH0GfOVJHsLXpJeuxECz2sCz2wvS1PS8xOfAMatAs9zASnqA04SfksFAtwnAtuKAtJPA1JcA1NfAQEDVYyAiT8AyxbtYEWCHILTgs6DjQLaxwLZ3oQQhEmnPAOGpQAvA2QOhnFZ+QBVAt9lAt64c3cC4i/tFAHzMCcB9JsB8tKHAuvzAulweQLq+QLq5AD5RwG5Au6JAuuclqqXAwLuPwOF4Jh5cOBxoQLzAwBpA44WmZMC9xMDkW4DkocC95gC+dkC+GaaHJqruzebHgOdgwL++gEbADmfHJ+zAwWNA6ZqA6bZANHFAwZqoYiiBQkDDEkCwAA/AwDhQRdTARHzA2sHl2cFAJMtK7evvdsBiZkUfxEEOQH7KQUhDp0JnwCS/SlXxQL3AZ0AtwW5AG8LbUEuFCaNLgFDAYD8AbUmAHUDDgRtACwCFgyhAAAKAj0CagPdA34EkQEgRQUhfAoABQBEABMANhICdwEABdUDa+8KxQIA9wqfJ7+xt+UBkSFBQgHpFH8RNMCJAAQAGwBaAkUChIsABjpTOpSNbQC4Oo860ACNOME63AClAOgAywE6gTo7Ofw5+Tt2iTpbO56JOm85GAFWATMBbAUvNV01njWtNWY1dTW2NcU1gjWRNdI14TWeNa017jX9NbI1wTYCNhE1xjXVNhY2JzXeNe02LjY9Ni41LSE2OjY9Njw2yTcIBJA8VzY4Nt03IDcPNsogN4k3MAoEsDxnNiQ3GTdsOo03IULUQwdC4EMLHA8PCZsobShRVQYA6X8A6bABFCnXAukBowC9BbcAbwNzBL8MDAMMAQgDAAkKCwsLCQoGBAVVBI/DvwDz9b29kaUCb0QtsRTNLt4eGBcSHAMZFhYZEhYEARAEBUEcQRxBHEEcQRxBHEEaQRxBHEFCSTxBPElISUhBNkM2QTYbNklISVmBVIgBFLWZAu0BhQCjBcEAbykBvwGJAaQcEZ0ePCklMAAhMvAIMAL54gC7Bm8EescjzQMpARQpKgDUABavAj626xQAJP0A3etzuf4NNRA7efy2Z9NQrCnC0OSyANz5BBIbJ5IFDR6miIavYS6tprjjmuKebxm5C74Q225X1pkaYYPb6f1DK4k3xMEBb9S2WMjEibTNWhsRJIA+vwNVEiXTE5iXs/wezV66oFLfp9NZGYW+Gk19J2+bCT6Ye2w6LDYdgzKMUabk595eLBCXANz9HUpWbATq9vqXVx9XDg+Pc9Xp4+bsS005SVM/BJBM4687WUuf+Uj9dEi8aDNaPxtpbDxcG1THTImUMZq4UCaaNYpsVqraNyKLJXDYsFZ/5jl7bLRtO88t7P3xZaAxhb5OdPMXqsSkp1WCieG8jXm1U99+blvLlXzPCS+M93VnJCiK+09LfaSaBAVBomyDgJua8dfUzR7ga34IvR2Nvj+A9heJ6lsl1KG4NkI1032Cnff1m1wof2B9oHJK4bi6JkEdSqeNeiuo6QoZZincoc73/TH9SXF8sCE7XyuYyW8WSgbGFCjPV0ihLKhdPs08Tx82fYAkLLc4I2wdl4apY7GU5lHRFzRWJep7Ww3wbeA3qmd59/86P4xuNaqDpygXt6M85glSBHOCGgJDnt+pN9bK7HApMguX6+06RZNjzVmcZJ+wcUrJ9//bpRNxNuKpNl9uFds+S9tdx7LaM5ZkIrPj6nIU9mnbFtVbs9s/uLgl8MVczAwet+iOEzzBlYW7RCMgE6gyNLeq6+1tIx4dpgZnd0DksJS5f+JNDpwwcPNXaaVspq1fbQajOrJgK0ofKtJ1Ne90L6VO4MOl5S886p7u6xo7OLjG8TGL+HU1JXGJgppg4nNbNJ5nlzSpuPYy21JUEcUA94PoFiZfjZue+QnyQ80ekOuZVkxx4g+cvhJfHgNl4hy1/a6+RKcKlar/J29y//EztlbVPHVUeQ1zX86eQVAjR/M3dA9w4W8LfaXp4EgM85wOWasli837PzVMOnsLzR+k3o75/lRPAJSE1xAKQzEi5v10ke+VBvRt1cwQRMd+U5mLCTGVd6XiZtgBG5cDi0w22GKcVNvHiu5LQbZEDVtz0onn7k5+heuKXVsZtSzilkLRAUmjMXEMB3J9YC50XBxPiz53SC+EhnPl9WsKCv92SM/OFFIMJZYfl0WW8tIO3UxYcwdMAj7FSmgrsZ2aAZO03BOhP1bNNZItyXYQFTpC3SG1VuPDqH9GkiCDmE+JwxyIVSO5siDErAOpEXFgjy6PQtOVDj+s6e1r8heWVvmZnTciuf4EiNZzCAd7SOMhXERIOlsHIMG399i9aLTy3m2hRLZjJVDNLS53iGIK11dPqQt0zBDyg6qc7YqkDm2M5Ve6dCWCaCbTXX2rToaIgz6+zh4lYUi/+6nqcFMAkQJKHYLK0wYk5N9szV6xihDbDDFr45lN1K4aCXBq/FitPSud9gLt5ZVn+ZqGX7cwm2z5EGMgfFpIFyhGGuDPmso6TItTMwny+7uPnLCf4W6goFQFV0oQSsc9VfMmVLcLr6ZetDZbaSFTLqnSO/bIPjA3/zAUoqgGFAEQS4IhuMzEp2I3jJzbzkk/IEmyax+rhZTwd6f+CGtwPixu8IvzACquPWPREu9ZvGkUzpRwvRRuaNN6cr0W1wWits9ICdYJ7ltbgMiSL3sTPeufgNcVqMVWFkCPDH4jG2jA0XcVgQj62Cb29v9f/z/+2KbYvIv/zzjpQAPkliaVDzNrW57TZ/ZOyZD0nlfMmAIBIAGAI0D3k/mdN4xr9v85ZbZbbqfH2jGd5hUqNZWwl5SPfoGmfElmazUIeNL1j/mkF7VNAzTq4jNt8JoQ11NQOcmhprXoxSxfRGJ9LDEOAQ+dmxAQH90iti9e2u/MoeuaGcDTHoC+xsmEeWmxEKefQuIzHbpw5Tc5cEocboAD09oipWQhtTO1wivf/O+DRe2rpl/E9wlrzBorjJsOeG1B/XPW4EaJEFdNlECEZga5ZoGRHXgYouGRuVkm8tDESiEyFNo+3s5M5puSdTyUL2llnINVHEt91XUNW4ewdMgJ4boJfEyt/iY5WXqbA+A2Fkt5Z0lutiWhe9nZIyIUjyXDC3UsaG1t+eNx6z4W/OYoTB7A6x+dNSTOi9AInctbESqm5gvOLww7OWXPrmHwVZasrl4eD113pm+JtT7JVOvnCXqdzzdTRHgJ0PiGTFYW5Gvt9R9LD6Lzfs0v/TZZHSmyVNq7viIHE6DBK7Qp07Iz55EM8SYtQvZf/obBniTWi5C2/ovHfw4VndkE5XYdjOhCMRjDeOEfXeN/CwfGduiUIfsoFeUxXeQXba7c7972XNv8w+dTjjUM0QeNAReW+J014dKAD/McQYXT7c0GQPIkn3Ll6R7gGjuiQoZD0TEeEqQpKoZ15g/0OPQI17QiSv9AUROa/V/TQN3dvLArec3RrsYlvBm1b8LWzltdugsC50lNKYLEp2a+ZZYqPejULRlOJh5zj/LVMyTDvwKhMxxwuDkxJ1QpoNI0OTWLom4Z71SNzI9TV1iXJrIu9Wcnd+MCaAw8o1jSXd94YU/1gnkrC9BUEOtQvEIQ7g0i6h+KL2JKk8Ydl7HruvgWMSAmNe+LshGhV4qnWHhO9/RIPQzY1tHRj2VqOyNsDpK0cww+56AdDC4gsWwY0XxoucIWIqs/GcwnWqlaT0KPr8mbK5U94/301i1WLt4YINTVvCFBrFZbIbY8eycOdeJ2teD5IfPLCRg7jjcFTwlMFNl9zdh/o3E/hHPwj7BWg0MU09pPrBLbrCgm54A6H+I6v27+jL5gkjWg/iYdks9jbfVP5y/n0dlgWEMlKasl7JvFZd56LfybW1eeaVO0gxTfXZwD8G4SI116yx7UKVRgui6Ya1YpixqXeNLc8IxtAwCU5IhwQgn+NqHnRaDv61CxKhOq4pOX7M6pkA+Pmpd4j1vn6ACUALoLLc4vpXci8VidLxzm7qFBe7s+quuJs6ETYmnpgS3LwSZxPIltgBDXz8M1k/W2ySNv2f9/NPhxLGK2D21dkHeSGmenRT3Yqcdl0m/h3OYr8V+lXNYGf8aCCpd4bWjE4QIPj7vUKN4Nrfs7ML6Y2OyS830JCnofg/k7lpFpt4SqZc5HGg1HCOrHvOdC8bP6FGDbE/VV0mX4IakzbdS/op+Kt3G24/8QbBV7y86sGSQ/vZzU8FXs7u6jIvwchsEP2BpIhW3G8uWNwa3HmjfH/ZjhhCWvluAcF+nMf14ClKg5hGgtPLJ98ueNAkc5Hs2WZlk2QHvfreCK1CCGO6nMZVSb99VM/ajr8WHTte9JSmkXq/i/U943HEbdzW6Re/S88dKgg8pGOLlAeNiqrcLkUR3/aClFpMXcOUP3rmETcWSfMXZE3TUOi8i+fqRnTYLflVx/Vb/6GJ7eIRZUA6k3RYR3iFSK9c4iDdNwJuZL2FKz/IK5VimcNWEqdXjSoxSgmF0UPlDoUlNrPcM7ftmA8Y9gKiqKEHuWN+AZRIwtVSxye2Kf8rM3lhJ5XcBXU9n4v0Oy1RU2M+4qM8AQPVwse8ErNSob5oFPWxuqZnVzo1qB/IBxkM3EVUKFUUlO3e51259GgNcJbCmlvrdjtoTW7rChm1wyCKzpCTwozUUEOIcWLneRLgMXh+SjGSFkAllzbGS5HK7LlfCMRNRDSvbQPjcXaenNYxCvu2Qyznz6StuxVj66SgI0T8B6/sfHAJYZaZ78thjOSIFumNWLQbeZixDCCC+v0YBtkxiBB3jefHqZ/dFHU+crbj6OvS1x/JDD7vlm7zOVPwpUC01nhxZuY/63E7g";const I0=44032,nv=4352,rv=4449,sv=4519,P8=19,R8=21,Bp=28,iv=R8*Bp,GW=P8*iv,YW=I0+GW,QW=nv+P8,JW=rv+R8,ZW=sv+Bp;function pg(t){return t>>24&255}function j8(t){return t&16777215}let jC,u_,OC,Yb;function XW(){let t=T8(KW);jC=new Map(S8(t).flatMap((e,n)=>e.map(r=>[r,n+1<<24]))),u_=new Set(k0(t)),OC=new Map,Yb=new Map;for(let[e,n]of k8(t)){if(!u_.has(e)&&n.length==2){let[r,s]=n,i=Yb.get(r);i||(i=new Map,Yb.set(r,i)),i.set(s,e)}OC.set(e,n.reverse())}}function O8(t){return t>=I0&&t<YW}function eq(t,e){if(t>=nv&&t<QW&&e>=rv&&e<JW)return I0+(t-nv)*iv+(e-rv)*Bp;if(O8(t)&&e>sv&&e<ZW&&(t-I0)%Bp==0)return t+(e-sv);{let n=Yb.get(t);return n&&(n=n.get(e),n)?n:-1}}function D8(t){jC||XW();let e=[],n=[],r=!1;function s(i){let a=jC.get(i);a&&(r=!0,i|=a),e.push(i)}for(let i of t)for(;;){if(i<128)e.push(i);else if(O8(i)){let a=i-I0,o=a/iv|0,l=a%iv/Bp|0,u=a%Bp;s(nv+o),s(rv+l),u>0&&s(sv+u)}else{let a=OC.get(i);a?n.push(...a):s(i)}if(!n.length)break;i=n.pop()}if(r&&e.length>1){let i=pg(e[0]);for(let a=1;a<e.length;a++){let o=pg(e[a]);if(o==0||i<=o){i=o;continue}let l=a-1;for(;;){let u=e[l+1];if(e[l+1]=e[l],e[l]=u,!l||(i=pg(e[--l]),i<=o))break}i=pg(e[a])}}return e}function tq(t){let e=[],n=[],r=-1,s=0;for(let i of t){let a=pg(i),o=j8(i);if(r==-1)a==0?r=o:e.push(o);else if(s>0&&s>=a)a==0?(e.push(r,...n),n.length=0,r=o):n.push(o),s=a;else{let l=eq(r,o);l>=0?r=l:s==0&&a==0?(e.push(r),r=o):(n.push(o),s=a)}}return r>=0&&e.push(r,...n),e}function U8(t){return D8(t).map(j8)}function nq(t){return tq(D8(t))}const d_=45,M8=".",L8=65039,B8=1,av=t=>Array.from(t);function P0(t,e){return t.P.has(e)||t.Q.has(e)}class rq extends Array{get is_emoji(){return!0}}let DC,$8,Lu,UC,F8,kf,a2,zh,xu,h_,MC;function O6(){if(DC)return;let t=T8(DW);const e=()=>k0(t),n=()=>new Set(e()),r=(d,h)=>h.forEach(f=>d.add(f));DC=new Map(k8(t)),$8=n(),Lu=e(),UC=new Set(e().map(d=>Lu[d])),Lu=new Set(Lu),F8=n(),n();let s=S8(t),i=t();const a=()=>{let d=new Set;return e().forEach(h=>r(d,s[h])),r(d,e()),d};kf=_0(d=>{let h=_0(t).map(f=>f+96);if(h.length){let f=d>=i;h[0]-=32,h=Lp(h),f&&(h=`Restricted[${h}]`);let p=a(),g=a(),m=!t();return{N:h,P:p,Q:g,M:m,R:f}}}),a2=n(),zh=new Map;let o=e().concat(av(a2)).sort((d,h)=>d-h);o.forEach((d,h)=>{let f=t(),p=o[h]=f?o[h-f]:{V:[],M:new Map};p.V.push(d),a2.has(d)||zh.set(d,p)});for(let{V:d,M:h}of new Set(zh.values())){let f=[];for(let g of d){let m=kf.filter(b=>P0(b,g)),y=f.find(({G:b})=>m.some(w=>b.has(w)));y||(y={G:new Set,V:[]},f.push(y)),y.V.push(g),r(y.G,m)}let p=f.flatMap(g=>av(g.G));for(let{G:g,V:m}of f){let y=new Set(p.filter(b=>!g.has(b)));for(let b of m)h.set(b,y)}}xu=new Set;let l=new Set;const u=d=>xu.has(d)?l.add(d):xu.add(d);for(let d of kf){for(let h of d.P)u(h);for(let h of d.Q)u(h)}for(let d of xu)!zh.has(d)&&!l.has(d)&&zh.set(d,B8);r(xu,U8(xu)),h_=VW(t).map(d=>rq.from(d)).sort(qW),MC=new Map;for(let d of h_){let h=[MC];for(let f of d){let p=h.map(g=>{let m=g.get(f);return m||(m=new Map,g.set(f,m)),m});f===L8?h.push(...p):h=p}for(let f of h)f.V=d}}function D6(t){return(H8(t)?"":`${U6(I1([t]))} `)+I8(t)}function U6(t){return`"${t}"`}function sq(t){if(t.length>=4&&t[2]==d_&&t[3]==d_)throw new Error(`invalid label extension: "${Lp(t.slice(0,4))}"`)}function iq(t){for(let n=t.lastIndexOf(95);n>0;)if(t[--n]!==95)throw new Error("underscore allowed only at start")}function aq(t){let e=t[0],n=c_.get(e);if(n)throw $g(`leading ${n}`);let r=t.length,s=-1;for(let i=1;i<r;i++){e=t[i];let a=c_.get(e);if(a){if(s==i)throw $g(`${n} + ${a}`);s=i+1,n=a}}if(s==r)throw $g(`trailing ${n}`)}function I1(t,e=1/0,n=I8){let r=[];oq(t[0])&&r.push(""),t.length>e&&(e>>=1,t=[...t.slice(0,e),8230,...t.slice(-e)]);let s=0,i=t.length;for(let a=0;a<i;a++){let o=t[a];H8(o)&&(r.push(Lp(t.slice(s,a))),r.push(n(o)),s=a+1)}return r.push(Lp(t.slice(s,i))),r.join("")}function oq(t){return O6(),Lu.has(t)}function H8(t){return O6(),F8.has(t)}function cq(t){return hq(lq(t,nq,mq))}function lq(t,e,n){if(!t)return[];O6();let r=0;return t.split(M8).map(s=>{let i=WW(s),a={input:i,offset:r};r+=i.length+1;try{let o=a.tokens=pq(i,e,n),l=o.length,u;if(!l)throw new Error("empty label");let d=a.output=o.flat();if(iq(d),!(a.emoji=l>1||o[0].is_emoji)&&d.every(f=>f<128))sq(d),u="ASCII";else{let f=o.flatMap(p=>p.is_emoji?[]:p);if(!f.length)u="Emoji";else{if(Lu.has(d[0]))throw $g("leading combining mark");for(let m=1;m<l;m++){let y=o[m];if(!y.is_emoji&&Lu.has(y[0]))throw $g(`emoji + combining mark: "${Lp(o[m-1])} + ${I1([y[0]])}"`)}aq(d);let p=av(new Set(f)),[g]=dq(p);fq(g,f),uq(g,p),u=g.N}}a.type=u}catch(o){a.error=o}return a})}function uq(t,e){let n,r=[];for(let s of e){let i=zh.get(s);if(i===B8)return;if(i){let a=i.M.get(s);if(n=n?n.filter(o=>a.has(o)):av(a),!n.length)return}else r.push(s)}if(n){for(let s of n)if(r.every(i=>P0(s,i)))throw new Error(`whole-script confusable: ${t.N}/${s.N}`)}}function dq(t){let e=kf;for(let n of t){let r=e.filter(s=>P0(s,n));if(!r.length)throw kf.some(s=>P0(s,n))?z8(e[0],n):V8(n);if(e=r,r.length==1)break}return e}function hq(t){return t.map(({input:e,error:n,output:r})=>{if(n){let s=n.message;throw new Error(t.length==1?s:`Invalid label ${U6(I1(e,63))}: ${s}`)}return Lp(r)}).join(M8)}function V8(t){return new Error(`disallowed character: ${D6(t)}`)}function z8(t,e){let n=D6(e),r=kf.find(s=>s.P.has(e));return r&&(n=`${r.N} ${n}`),new Error(`illegal mixture: ${t.N} + ${n}`)}function $g(t){return new Error(`illegal placement: ${t}`)}function fq(t,e){for(let n of e)if(!P0(t,n))throw z8(t,n);if(t.M){let n=U8(e);for(let r=1,s=n.length;r<s;r++)if(UC.has(n[r])){let i=r+1;for(let a;i<s&&UC.has(a=n[i]);i++)for(let o=r;o<i;o++)if(n[o]==a)throw new Error(`duplicate non-spacing marks: ${D6(a)}`);if(i-r>l_)throw new Error(`excessive non-spacing marks: ${U6(I1(n.slice(r-1,i)))} (${i-r}/${l_})`);r=i}}}function pq(t,e,n){let r=[],s=[];for(t=t.slice().reverse();t.length;){let i=gq(t);if(i)s.length&&(r.push(e(s)),s=[]),r.push(n(i));else{let a=t.pop();if(xu.has(a))s.push(a);else{let o=DC.get(a);if(o)s.push(...o);else if(!$8.has(a))throw V8(a)}}}return s.length&&r.push(e(s)),r}function mq(t){return t.filter(e=>e!=L8)}function gq(t,e){let n=MC,r,s=t.length;for(;s&&(n=n.get(t[--s]),!!n);){let{V:i}=n;i&&(r=i,t.length=s)}return r}const W8=new Uint8Array(32);W8.fill(0);function f_(t){return H(t.length!==0,"invalid ENS name; empty component","comp",t),t}function q8(t){const e=la(yq(t)),n=[];if(t.length===0)return n;let r=0;for(let s=0;s<e.length;s++)e[s]===46&&(n.push(f_(e.slice(r,s))),r=s+1);return H(r<e.length,"invalid ENS name; empty component","name",t),n.push(f_(e.slice(r))),n}function yq(t){try{if(t.length===0)throw new Error("empty label");return cq(t)}catch(e){H(!1,`invalid ENS name (${e.message})`,"name",t)}}function LC(t){H(typeof t=="string","invalid ENS name; not a string","name",t),H(t.length,"invalid ENS name (empty label)","name",t);let e=W8;const n=q8(t);for(;n.length;)e=Tn(gn([e,Tn(n.pop())]));return we(e)}function wq(t,e){const n=e;return H(n<=255,"DNS encoded label cannot exceed 255","length",n),we(gn(q8(t).map(r=>{H(r.length<=n,`label ${JSON.stringify(t)} exceeds ${n} bytes`,"name",t);const s=new Uint8Array(r.length+1);return s.set(r,1),s[0]=s.length-1,s})))+"00"}const K8=new Uint8Array(32);K8.fill(0);const bq=BigInt(-1),G8=BigInt(0),Y8=BigInt(1),xq=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");function vq(t){const e=it(t),n=e.length%32;return n?gn([e,K8.slice(n)]):we(e)}const Eq=zl(Y8,32),Nq=zl(G8,32),p_={name:"string",version:"string",chainId:"uint256",verifyingContract:"address",salt:"bytes32"},o2=["name","version","chainId","verifyingContract","salt"];function m_(t){return function(e){return H(typeof e=="string",`invalid domain value for ${JSON.stringify(t)}`,`domain.${t}`,e),e}}const Cq={name:m_("name"),version:m_("version"),chainId:function(t){const e=Ie(t,"domain.chainId");return H(e>=0,"invalid chain ID","domain.chainId",t),Number.isSafeInteger(e)?Number(e):ta(e)},verifyingContract:function(t){try{return Pt(t).toLowerCase()}catch{}H(!1,'invalid domain value "verifyingContract"',"domain.verifyingContract",t)},salt:function(t){const e=it(t,"domain.salt");return H(e.length===32,'invalid domain value "salt"',"domain.salt",t),we(e)}};function c2(t){{const e=t.match(/^(u?)int(\d+)$/);if(e){const n=e[1]==="",r=parseInt(e[2]);H(r%8===0&&r!==0&&r<=256&&e[2]===String(r),"invalid numeric width","type",t);const s=Du(xq,n?r-1:r),i=n?(s+Y8)*bq:G8;return function(a){const o=Ie(a,"value");return H(o>=i&&o<=s,`value out-of-bounds for ${t}`,"value",o),zl(n?jO(o,256):o,32)}}}{const e=t.match(/^bytes(\d+)$/);if(e){const n=parseInt(e[1]);return H(n!==0&&n<=32&&e[1]===String(n),"invalid bytes width","type",t),function(r){const s=it(r);return H(s.length===n,`invalid length for ${t}`,"value",r),vq(r)}}}switch(t){case"address":return function(e){return cc(Pt(e),32)};case"bool":return function(e){return e?Eq:Nq};case"bytes":return function(e){return Tn(e)};case"string":return function(e){return Od(e)}}return null}function g_(t,e){return`${t}(${e.map(({name:n,type:r})=>r+" "+n).join(",")})`}function Gw(t){const e=t.match(/^([^\x5b]*)((\x5b\d*\x5d)*)(\x5b(\d*)\x5d)$/);return e?{base:e[1],index:e[2]+e[4],array:{base:e[1],prefix:e[1]+e[2],count:e[5]?parseInt(e[5]):-1}}:{base:t}}var Ry,Bo,op,Zv,Q8;const fi=class fi{constructor(e){K(this,Zv);W(this,"primaryType");K(this,Ry);K(this,Bo);K(this,op);B(this,Bo,new Map),B(this,op,new Map);const n=new Map,r=new Map,s=new Map,i={};Object.keys(e).forEach(l=>{i[l]=e[l].map(({name:u,type:d})=>{let{base:h,index:f}=Gw(d);return h==="int"&&!e.int&&(h="int256"),h==="uint"&&!e.uint&&(h="uint256"),{name:u,type:h+(f||"")}}),n.set(l,new Set),r.set(l,[]),s.set(l,new Set)}),B(this,Ry,JSON.stringify(i));for(const l in i){const u=new Set;for(const d of i[l]){H(!u.has(d.name),`duplicate variable name ${JSON.stringify(d.name)} in ${JSON.stringify(l)}`,"types",e),u.add(d.name);const h=Gw(d.type).base;H(h!==l,`circular type reference to ${JSON.stringify(h)}`,"types",e),!c2(h)&&(H(r.has(h),`unknown type ${JSON.stringify(h)}`,"types",e),r.get(h).push(l),n.get(l).add(h))}}const a=Array.from(r.keys()).filter(l=>r.get(l).length===0);H(a.length!==0,"missing primary type","types",e),H(a.length===1,`ambiguous primary types or unused types: ${a.map(l=>JSON.stringify(l)).join(", ")}`,"types",e),Fe(this,{primaryType:a[0]});function o(l,u){H(!u.has(l),`circular type reference to ${JSON.stringify(l)}`,"types",e),u.add(l);for(const d of n.get(l))if(r.has(d)){o(d,u);for(const h of u)s.get(h).add(d)}u.delete(l)}o(this.primaryType,new Set);for(const[l,u]of s){const d=Array.from(u);d.sort(),C(this,Bo).set(l,g_(l,i[l])+d.map(h=>g_(h,i[h])).join(""))}}get types(){return JSON.parse(C(this,Ry))}getEncoder(e){let n=C(this,op).get(e);return n||(n=ie(this,Zv,Q8).call(this,e),C(this,op).set(e,n)),n}encodeType(e){const n=C(this,Bo).get(e);return H(n,`unknown type: ${JSON.stringify(e)}`,"name",e),n}encodeData(e,n){return this.getEncoder(e)(n)}hashStruct(e,n){return Tn(this.encodeData(e,n))}encode(e){return this.encodeData(this.primaryType,e)}hash(e){return this.hashStruct(this.primaryType,e)}_visit(e,n,r){if(c2(e))return r(e,n);const s=Gw(e).array;if(s)return H(s.count===-1||s.count===n.length,`array length mismatch; expected length ${s.count}`,"value",n),n.map(a=>this._visit(s.prefix,a,r));const i=this.types[e];if(i)return i.reduce((a,{name:o,type:l})=>(a[o]=this._visit(l,n[o],r),a),{});H(!1,`unknown type: ${e}`,"type",e)}visit(e,n){return this._visit(this.primaryType,e,n)}static from(e){return new fi(e)}static getPrimaryType(e){return fi.from(e).primaryType}static hashStruct(e,n,r){return fi.from(n).hashStruct(e,r)}static hashDomain(e){const n=[];for(const r in e){if(e[r]==null)continue;const s=p_[r];H(s,`invalid typed-data domain key: ${JSON.stringify(r)}`,"domain",e),n.push({name:r,type:s})}return n.sort((r,s)=>o2.indexOf(r.name)-o2.indexOf(s.name)),fi.hashStruct("EIP712Domain",{EIP712Domain:n},e)}static encode(e,n,r){return gn(["0x1901",fi.hashDomain(e),fi.from(n).hash(r)])}static hash(e,n,r){return Tn(fi.encode(e,n,r))}static async resolveNames(e,n,r,s){e=Object.assign({},e);for(const o in e)e[o]==null&&delete e[o];const i={};e.verifyingContract&&!qt(e.verifyingContract,20)&&(i[e.verifyingContract]="0x");const a=fi.from(n);a.visit(r,(o,l)=>(o==="address"&&!qt(l,20)&&(i[l]="0x"),l));for(const o in i)i[o]=await s(o);return e.verifyingContract&&i[e.verifyingContract]&&(e.verifyingContract=i[e.verifyingContract]),r=a.visit(r,(o,l)=>o==="address"&&i[l]?i[l]:l),{domain:e,value:r}}static getPayload(e,n,r){fi.hashDomain(e);const s={},i=[];o2.forEach(l=>{const u=e[l];u!=null&&(s[l]=Cq[l](u),i.push({name:l,type:p_[l]}))});const a=fi.from(n);n=a.types;const o=Object.assign({},n);return H(o.EIP712Domain==null,"types must not contain EIP712Domain type","types.EIP712Domain",n),o.EIP712Domain=i,a.encode(r),{types:o,domain:s,primaryType:a.primaryType,message:a.visit(r,(l,u)=>{if(l.match(/^bytes(\d*)/))return we(it(u));if(l.match(/^u?int/))return Ie(u).toString();switch(l){case"address":return u.toLowerCase();case"bool":return!!u;case"string":return H(typeof u=="string","invalid string","value",u),u}H(!1,"unsupported type","type",l)})}}};Ry=new WeakMap,Bo=new WeakMap,op=new WeakMap,Zv=new WeakSet,Q8=function(e){{const s=c2(e);if(s)return s}const n=Gw(e).array;if(n){const s=n.prefix,i=this.getEncoder(s);return a=>{H(n.count===-1||n.count===a.length,`array length mismatch; expected length ${n.count}`,"value",a);let o=a.map(i);return C(this,Bo).has(s)&&(o=o.map(Tn)),Tn(gn(o))}}const r=this.types[e];if(r){const s=Od(C(this,Bo).get(e));return i=>{const a=r.map(({name:o,type:l})=>{const u=this.getEncoder(l)(i[o]);return C(this,Bo).has(l)?Tn(u):u});return a.unshift(s),gn(a)}}H(!1,`unknown type: ${e}`,"type",e)};let ov=fi;function Yr(t){const e=new Set;return t.forEach(n=>e.add(n)),Object.freeze(e)}const Aq="external public payable override",Tq=Yr(Aq.split(" ")),J8="constant external internal payable private public pure view override",Sq=Yr(J8.split(" ")),Z8="constructor error event fallback function receive struct",X8=Yr(Z8.split(" ")),eD="calldata memory storage payable indexed",kq=Yr(eD.split(" ")),_q="tuple returns",Iq=[Z8,eD,_q,J8].join(" "),Pq=Yr(Iq.split(" ")),Rq={"(":"OPEN_PAREN",")":"CLOSE_PAREN","[":"OPEN_BRACKET","]":"CLOSE_BRACKET",",":"COMMA","@":"AT"},jq=new RegExp("^(\\s*)"),Oq=new RegExp("^([0-9]+)"),Dq=new RegExp("^([a-zA-Z$_][a-zA-Z0-9$_]*)"),tD=new RegExp("^([a-zA-Z$_][a-zA-Z0-9$_]*)$"),nD=new RegExp("^(address|bool|bytes([0-9]*)|string|u?int([0-9]*))$");var nr,Ji,jy,BC;const Xv=class Xv{constructor(e){K(this,jy);K(this,nr);K(this,Ji);B(this,nr,0),B(this,Ji,e.slice())}get offset(){return C(this,nr)}get length(){return C(this,Ji).length-C(this,nr)}clone(){return new Xv(C(this,Ji))}reset(){B(this,nr,0)}popKeyword(e){const n=this.peek();if(n.type!=="KEYWORD"||!e.has(n.text))throw new Error(`expected keyword ${n.text}`);return this.pop().text}popType(e){if(this.peek().type!==e){const n=this.peek();throw new Error(`expected ${e}; got ${n.type} ${JSON.stringify(n.text)}`)}return this.pop().text}popParen(){const e=this.peek();if(e.type!=="OPEN_PAREN")throw new Error("bad start");const n=ie(this,jy,BC).call(this,C(this,nr)+1,e.match+1);return B(this,nr,e.match+1),n}popParams(){const e=this.peek();if(e.type!=="OPEN_PAREN")throw new Error("bad start");const n=[];for(;C(this,nr)<e.match-1;){const r=this.peek().linkNext;n.push(ie(this,jy,BC).call(this,C(this,nr)+1,r)),B(this,nr,r)}return B(this,nr,e.match+1),n}peek(){if(C(this,nr)>=C(this,Ji).length)throw new Error("out-of-bounds");return C(this,Ji)[C(this,nr)]}peekKeyword(e){const n=this.peekType("KEYWORD");return n!=null&&e.has(n)?n:null}peekType(e){if(this.length===0)return null;const n=this.peek();return n.type===e?n.text:null}pop(){const e=this.peek();return Cm(this,nr)._++,e}toString(){const e=[];for(let n=C(this,nr);n<C(this,Ji).length;n++){const r=C(this,Ji)[n];e.push(`${r.type}:${r.text}`)}return`<TokenString ${e.join(" ")}>`}};nr=new WeakMap,Ji=new WeakMap,jy=new WeakSet,BC=function(e=0,n=0){return new Xv(C(this,Ji).slice(e,n).map(r=>Object.freeze(Object.assign({},r,{match:r.match-e,linkBack:r.linkBack-e,linkNext:r.linkNext-e}))))};let pa=Xv;function nu(t){const e=[],n=a=>{const o=i<t.length?JSON.stringify(t[i]):"$EOI";throw new Error(`invalid token ${o} at ${i}: ${a}`)};let r=[],s=[],i=0;for(;i<t.length;){let a=t.substring(i),o=a.match(jq);o&&(i+=o[1].length,a=t.substring(i));const l={depth:r.length,linkBack:-1,linkNext:-1,match:-1,type:"",text:"",offset:i,value:-1};e.push(l);let u=Rq[a[0]]||"";if(u){if(l.type=u,l.text=a[0],i++,u==="OPEN_PAREN")r.push(e.length-1),s.push(e.length-1);else if(u=="CLOSE_PAREN")r.length===0&&n("no matching open bracket"),l.match=r.pop(),e[l.match].match=e.length-1,l.depth--,l.linkBack=s.pop(),e[l.linkBack].linkNext=e.length-1;else if(u==="COMMA")l.linkBack=s.pop(),e[l.linkBack].linkNext=e.length-1,s.push(e.length-1);else if(u==="OPEN_BRACKET")l.type="BRACKET";else if(u==="CLOSE_BRACKET"){let d=e.pop().text;if(e.length>0&&e[e.length-1].type==="NUMBER"){const h=e.pop().text;d=h+d,e[e.length-1].value=Xe(h)}if(e.length===0||e[e.length-1].type!=="BRACKET")throw new Error("missing opening bracket");e[e.length-1].text+=d}continue}if(o=a.match(Dq),o){if(l.text=o[1],i+=l.text.length,Pq.has(l.text)){l.type="KEYWORD";continue}if(l.text.match(nD)){l.type="TYPE";continue}l.type="ID";continue}if(o=a.match(Oq),o){l.text=o[1],l.type="NUMBER",i+=l.text.length;continue}throw new Error(`unexpected token ${JSON.stringify(a[0])} at position ${i}`)}return new pa(e.map(a=>Object.freeze(a)))}function y_(t,e){let n=[];for(const r in e.keys())t.has(r)&&n.push(r);if(n.length>1)throw new Error(`conflicting types: ${n.join(", ")}`)}function P1(t,e){if(e.peekKeyword(X8)){const n=e.pop().text;if(n!==t)throw new Error(`expected ${t}, got ${n}`)}return e.popType("ID")}function uc(t,e){const n=new Set;for(;;){const r=t.peekType("KEYWORD");if(r==null||e&&!e.has(r))break;if(t.pop(),n.has(r))throw new Error(`duplicate keywords: ${JSON.stringify(r)}`);n.add(r)}return Object.freeze(n)}function rD(t){let e=uc(t,Sq);return y_(e,Yr("constant payable nonpayable".split(" "))),y_(e,Yr("pure view payable nonpayable".split(" "))),e.has("view")?"view":e.has("pure")?"pure":e.has("payable")?"payable":e.has("nonpayable")?"nonpayable":e.has("constant")?"view":"nonpayable"}function Xo(t,e){return t.popParams().map(n=>ur.from(n,e))}function sD(t){if(t.peekType("AT")){if(t.pop(),t.peekType("NUMBER"))return Ie(t.pop().text);throw new Error("invalid gas")}return null}function Dd(t){if(t.length)throw new Error(`unexpected tokens at offset ${t.offset}: ${t.toString()}`)}const Uq=new RegExp(/^(.*)\[([0-9]*)\]$/);function w_(t){const e=t.match(nD);if(H(e,"invalid type","type",t),t==="uint")return"uint256";if(t==="int")return"int256";if(e[2]){const n=parseInt(e[2]);H(n!==0&&n<=32,"invalid bytes length","type",t)}else if(e[3]){const n=parseInt(e[3]);H(n!==0&&n<=256&&n%8===0,"invalid numeric width","type",t)}return t}const cn={},Os=Symbol.for("_ethers_internal"),b_="_ParamTypeInternal",x_="_ErrorInternal",v_="_EventInternal",E_="_ConstructorInternal",N_="_FallbackInternal",C_="_FunctionInternal",A_="_StructInternal";var cp,Qb;const pi=class pi{constructor(e,n,r,s,i,a,o,l){K(this,cp);W(this,"name");W(this,"type");W(this,"baseType");W(this,"indexed");W(this,"components");W(this,"arrayLength");W(this,"arrayChildren");if(Gy(e,cn,"ParamType"),Object.defineProperty(this,Os,{value:b_}),a&&(a=Object.freeze(a.slice())),s==="array"){if(o==null||l==null)throw new Error("")}else if(o!=null||l!=null)throw new Error("");if(s==="tuple"){if(a==null)throw new Error("")}else if(a!=null)throw new Error("");Fe(this,{name:n,type:r,baseType:s,indexed:i,components:a,arrayLength:o,arrayChildren:l})}format(e){if(e==null&&(e="sighash"),e==="json"){const r=this.name||"";if(this.isArray()){const i=JSON.parse(this.arrayChildren.format("json"));return i.name=r,i.type+=`[${this.arrayLength<0?"":String(this.arrayLength)}]`,JSON.stringify(i)}const s={type:this.baseType==="tuple"?"tuple":this.type,name:r};return typeof this.indexed=="boolean"&&(s.indexed=this.indexed),this.isTuple()&&(s.components=this.components.map(i=>JSON.parse(i.format(e)))),JSON.stringify(s)}let n="";return this.isArray()?(n+=this.arrayChildren.format(e),n+=`[${this.arrayLength<0?"":String(this.arrayLength)}]`):this.isTuple()?n+="("+this.components.map(r=>r.format(e)).join(e==="full"?", ":",")+")":n+=this.type,e!=="sighash"&&(this.indexed===!0&&(n+=" indexed"),e==="full"&&this.name&&(n+=" "+this.name)),n}isArray(){return this.baseType==="array"}isTuple(){return this.baseType==="tuple"}isIndexable(){return this.indexed!=null}walk(e,n){if(this.isArray()){if(!Array.isArray(e))throw new Error("invalid array value");if(this.arrayLength!==-1&&e.length!==this.arrayLength)throw new Error("array is wrong length");const r=this;return e.map(s=>r.arrayChildren.walk(s,n))}if(this.isTuple()){if(!Array.isArray(e))throw new Error("invalid tuple value");if(e.length!==this.components.length)throw new Error("array is wrong length");const r=this;return e.map((s,i)=>r.components[i].walk(s,n))}return n(this.type,e)}async walkAsync(e,n){const r=[],s=[e];return ie(this,cp,Qb).call(this,r,e,n,i=>{s[0]=i}),r.length&&await Promise.all(r),s[0]}static from(e,n){if(pi.isParamType(e))return e;if(typeof e=="string")try{return pi.from(nu(e),n)}catch{H(!1,"invalid param type","obj",e)}else if(e instanceof pa){let o="",l="",u=null;uc(e,Yr(["tuple"])).has("tuple")||e.peekType("OPEN_PAREN")?(l="tuple",u=e.popParams().map(m=>pi.from(m)),o=`tuple(${u.map(m=>m.format()).join(",")})`):(o=w_(e.popType("TYPE")),l=o);let d=null,h=null;for(;e.length&&e.peekType("BRACKET");){const m=e.pop();d=new pi(cn,"",o,l,null,u,h,d),h=m.value,o+=m.text,l="array",u=null}let f=null;if(uc(e,kq).has("indexed")){if(!n)throw new Error("");f=!0}const g=e.peekType("ID")?e.pop().text:"";if(e.length)throw new Error("leftover tokens");return new pi(cn,g,o,l,f,u,h,d)}const r=e.name;H(!r||typeof r=="string"&&r.match(tD),"invalid name","obj.name",r);let s=e.indexed;s!=null&&(H(n,"parameter cannot be indexed","obj.indexed",e.indexed),s=!!s);let i=e.type,a=i.match(Uq);if(a){const o=parseInt(a[2]||"-1"),l=pi.from({type:a[1],components:e.components});return new pi(cn,r||"",i,"array",s,null,o,l)}if(i==="tuple"||i.startsWith("tuple(")||i.startsWith("(")){const o=e.components!=null?e.components.map(u=>pi.from(u)):null;return new pi(cn,r||"",i,"tuple",s,o,null,null)}return i=w_(e.type),new pi(cn,r||"",i,i,s,null,null,null)}static isParamType(e){return e&&e[Os]===b_}};cp=new WeakSet,Qb=function(e,n,r,s){if(this.isArray()){if(!Array.isArray(n))throw new Error("invalid array value");if(this.arrayLength!==-1&&n.length!==this.arrayLength)throw new Error("array is wrong length");const a=this.arrayChildren,o=n.slice();o.forEach((l,u)=>{var d;ie(d=a,cp,Qb).call(d,e,l,r,h=>{o[u]=h})}),s(o);return}if(this.isTuple()){const a=this.components;let o;if(Array.isArray(n))o=n.slice();else{if(n==null||typeof n!="object")throw new Error("invalid tuple value");o=a.map(l=>{if(!l.name)throw new Error("cannot use object value with unnamed components");if(!(l.name in n))throw new Error(`missing value for component ${l.name}`);return n[l.name]})}if(o.length!==this.components.length)throw new Error("array is wrong length");o.forEach((l,u)=>{var d;ie(d=a[u],cp,Qb).call(d,e,l,r,h=>{o[u]=h})}),s(o);return}const i=r(this.type,n);i.then?e.push(async function(){s(await i)}()):s(i)};let ur=pi;class Ud{constructor(e,n,r){W(this,"type");W(this,"inputs");Gy(e,cn,"Fragment"),r=Object.freeze(r.slice()),Fe(this,{type:n,inputs:r})}static from(e){if(typeof e=="string"){try{Ud.from(JSON.parse(e))}catch{}return Ud.from(nu(e))}if(e instanceof pa)switch(e.peekKeyword(X8)){case"constructor":return Yo.from(e);case"error":return Ns.from(e);case"event":return Ka.from(e);case"fallback":case"receive":return Ro.from(e);case"function":return Ga.from(e);case"struct":return bd.from(e)}else if(typeof e=="object"){switch(e.type){case"constructor":return Yo.from(e);case"error":return Ns.from(e);case"event":return Ka.from(e);case"fallback":case"receive":return Ro.from(e);case"function":return Ga.from(e);case"struct":return bd.from(e)}ee(!1,`unsupported type: ${e.type}`,"UNSUPPORTED_OPERATION",{operation:"Fragment.from"})}H(!1,"unsupported frgament object","obj",e)}static isConstructor(e){return Yo.isFragment(e)}static isError(e){return Ns.isFragment(e)}static isEvent(e){return Ka.isFragment(e)}static isFunction(e){return Ga.isFragment(e)}static isStruct(e){return bd.isFragment(e)}}class R1 extends Ud{constructor(n,r,s,i){super(n,r,i);W(this,"name");H(typeof s=="string"&&s.match(tD),"invalid identifier","name",s),i=Object.freeze(i.slice()),Fe(this,{name:s})}}function R0(t,e){return"("+e.map(n=>n.format(t)).join(t==="full"?", ":",")+")"}class Ns extends R1{constructor(e,n,r){super(e,"error",n,r),Object.defineProperty(this,Os,{value:x_})}get selector(){return Od(this.format("sighash")).substring(0,10)}format(e){if(e==null&&(e="sighash"),e==="json")return JSON.stringify({type:"error",name:this.name,inputs:this.inputs.map(r=>JSON.parse(r.format(e)))});const n=[];return e!=="sighash"&&n.push("error"),n.push(this.name+R0(e,this.inputs)),n.join(" ")}static from(e){if(Ns.isFragment(e))return e;if(typeof e=="string")return Ns.from(nu(e));if(e instanceof pa){const n=P1("error",e),r=Xo(e);return Dd(e),new Ns(cn,n,r)}return new Ns(cn,e.name,e.inputs?e.inputs.map(ur.from):[])}static isFragment(e){return e&&e[Os]===x_}}class Ka extends R1{constructor(n,r,s,i){super(n,"event",r,s);W(this,"anonymous");Object.defineProperty(this,Os,{value:v_}),Fe(this,{anonymous:i})}get topicHash(){return Od(this.format("sighash"))}format(n){if(n==null&&(n="sighash"),n==="json")return JSON.stringify({type:"event",anonymous:this.anonymous,name:this.name,inputs:this.inputs.map(s=>JSON.parse(s.format(n)))});const r=[];return n!=="sighash"&&r.push("event"),r.push(this.name+R0(n,this.inputs)),n!=="sighash"&&this.anonymous&&r.push("anonymous"),r.join(" ")}static getTopicHash(n,r){return r=(r||[]).map(i=>ur.from(i)),new Ka(cn,n,r,!1).topicHash}static from(n){if(Ka.isFragment(n))return n;if(typeof n=="string")try{return Ka.from(nu(n))}catch{H(!1,"invalid event fragment","obj",n)}else if(n instanceof pa){const r=P1("event",n),s=Xo(n,!0),i=!!uc(n,Yr(["anonymous"])).has("anonymous");return Dd(n),new Ka(cn,r,s,i)}return new Ka(cn,n.name,n.inputs?n.inputs.map(r=>ur.from(r,!0)):[],!!n.anonymous)}static isFragment(n){return n&&n[Os]===v_}}class Yo extends Ud{constructor(n,r,s,i,a){super(n,r,s);W(this,"payable");W(this,"gas");Object.defineProperty(this,Os,{value:E_}),Fe(this,{payable:i,gas:a})}format(n){if(ee(n!=null&&n!=="sighash","cannot format a constructor for sighash","UNSUPPORTED_OPERATION",{operation:"format(sighash)"}),n==="json")return JSON.stringify({type:"constructor",stateMutability:this.payable?"payable":"undefined",payable:this.payable,gas:this.gas!=null?this.gas:void 0,inputs:this.inputs.map(s=>JSON.parse(s.format(n)))});const r=[`constructor${R0(n,this.inputs)}`];return this.payable&&r.push("payable"),this.gas!=null&&r.push(`@${this.gas.toString()}`),r.join(" ")}static from(n){if(Yo.isFragment(n))return n;if(typeof n=="string")try{return Yo.from(nu(n))}catch{H(!1,"invalid constuctor fragment","obj",n)}else if(n instanceof pa){uc(n,Yr(["constructor"]));const r=Xo(n),s=!!uc(n,Tq).has("payable"),i=sD(n);return Dd(n),new Yo(cn,"constructor",r,s,i)}return new Yo(cn,"constructor",n.inputs?n.inputs.map(ur.from):[],!!n.payable,n.gas!=null?n.gas:null)}static isFragment(n){return n&&n[Os]===E_}}class Ro extends Ud{constructor(n,r,s){super(n,"fallback",r);W(this,"payable");Object.defineProperty(this,Os,{value:N_}),Fe(this,{payable:s})}format(n){const r=this.inputs.length===0?"receive":"fallback";if(n==="json"){const s=this.payable?"payable":"nonpayable";return JSON.stringify({type:r,stateMutability:s})}return`${r}()${this.payable?" payable":""}`}static from(n){if(Ro.isFragment(n))return n;if(typeof n=="string")try{return Ro.from(nu(n))}catch{H(!1,"invalid fallback fragment","obj",n)}else if(n instanceof pa){const r=n.toString(),s=n.peekKeyword(Yr(["fallback","receive"]));if(H(s,"type must be fallback or receive","obj",r),n.popKeyword(Yr(["fallback","receive"]))==="receive"){const l=Xo(n);return H(l.length===0,"receive cannot have arguments","obj.inputs",l),uc(n,Yr(["payable"])),Dd(n),new Ro(cn,[],!0)}let a=Xo(n);a.length?H(a.length===1&&a[0].type==="bytes","invalid fallback inputs","obj.inputs",a.map(l=>l.format("minimal")).join(", ")):a=[ur.from("bytes")];const o=rD(n);if(H(o==="nonpayable"||o==="payable","fallback cannot be constants","obj.stateMutability",o),uc(n,Yr(["returns"])).has("returns")){const l=Xo(n);H(l.length===1&&l[0].type==="bytes","invalid fallback outputs","obj.outputs",l.map(u=>u.format("minimal")).join(", "))}return Dd(n),new Ro(cn,a,o==="payable")}if(n.type==="receive")return new Ro(cn,[],!0);if(n.type==="fallback"){const r=[ur.from("bytes")],s=n.stateMutability==="payable";return new Ro(cn,r,s)}H(!1,"invalid fallback description","obj",n)}static isFragment(n){return n&&n[Os]===N_}}class Ga extends R1{constructor(n,r,s,i,a,o){super(n,"function",r,i);W(this,"constant");W(this,"outputs");W(this,"stateMutability");W(this,"payable");W(this,"gas");Object.defineProperty(this,Os,{value:C_}),a=Object.freeze(a.slice()),Fe(this,{constant:s==="view"||s==="pure",gas:o,outputs:a,payable:s==="payable",stateMutability:s})}get selector(){return Od(this.format("sighash")).substring(0,10)}format(n){if(n==null&&(n="sighash"),n==="json")return JSON.stringify({type:"function",name:this.name,constant:this.constant,stateMutability:this.stateMutability!=="nonpayable"?this.stateMutability:void 0,payable:this.payable,gas:this.gas!=null?this.gas:void 0,inputs:this.inputs.map(s=>JSON.parse(s.format(n))),outputs:this.outputs.map(s=>JSON.parse(s.format(n)))});const r=[];return n!=="sighash"&&r.push("function"),r.push(this.name+R0(n,this.inputs)),n!=="sighash"&&(this.stateMutability!=="nonpayable"&&r.push(this.stateMutability),this.outputs&&this.outputs.length&&(r.push("returns"),r.push(R0(n,this.outputs))),this.gas!=null&&r.push(`@${this.gas.toString()}`)),r.join(" ")}static getSelector(n,r){return r=(r||[]).map(i=>ur.from(i)),new Ga(cn,n,"view",r,[],null).selector}static from(n){if(Ga.isFragment(n))return n;if(typeof n=="string")try{return Ga.from(nu(n))}catch{H(!1,"invalid function fragment","obj",n)}else if(n instanceof pa){const s=P1("function",n),i=Xo(n),a=rD(n);let o=[];uc(n,Yr(["returns"])).has("returns")&&(o=Xo(n));const l=sD(n);return Dd(n),new Ga(cn,s,a,i,o,l)}let r=n.stateMutability;return r==null&&(r="payable",typeof n.constant=="boolean"?(r="view",n.constant||(r="payable",typeof n.payable=="boolean"&&!n.payable&&(r="nonpayable"))):typeof n.payable=="boolean"&&!n.payable&&(r="nonpayable")),new Ga(cn,n.name,r,n.inputs?n.inputs.map(ur.from):[],n.outputs?n.outputs.map(ur.from):[],n.gas!=null?n.gas:null)}static isFragment(n){return n&&n[Os]===C_}}class bd extends R1{constructor(e,n,r){super(e,"struct",n,r),Object.defineProperty(this,Os,{value:A_})}format(){throw new Error("@TODO")}static from(e){if(typeof e=="string")try{return bd.from(nu(e))}catch{H(!1,"invalid struct fragment","obj",e)}else if(e instanceof pa){const n=P1("struct",e),r=Xo(e);return Dd(e),new bd(cn,n,r)}return new bd(cn,e.name,e.inputs?e.inputs.map(ur.from):[])}static isFragment(e){return e&&e[Os]===A_}}const ga=new Map;ga.set(0,"GENERIC_PANIC");ga.set(1,"ASSERT_FALSE");ga.set(17,"OVERFLOW");ga.set(18,"DIVIDE_BY_ZERO");ga.set(33,"ENUM_RANGE_ERROR");ga.set(34,"BAD_STORAGE_DATA");ga.set(49,"STACK_UNDERFLOW");ga.set(50,"ARRAY_RANGE_ERROR");ga.set(65,"OUT_OF_MEMORY");ga.set(81,"UNINITIALIZED_FUNCTION_CALL");const Mq=new RegExp(/^bytes([0-9]*)$/),Lq=new RegExp(/^(u?int)([0-9]*)$/);let l2=null,T_=1024;function Bq(t,e,n,r){let s="missing revert data",i=null;const a=null;let o=null;if(n){s="execution reverted";const u=it(n);if(n=we(n),u.length===0)s+=" (no data present; likely require(false) occurred",i="require(false)";else if(u.length%32!==4)s+=" (could not decode reason; invalid data length)";else if(we(u.slice(0,4))==="0x08c379a0")try{i=r.decode(["string"],u.slice(4))[0],o={signature:"Error(string)",name:"Error",args:[i]},s+=`: ${JSON.stringify(i)}`}catch{s+=" (could not decode reason; invalid string data)"}else if(we(u.slice(0,4))==="0x4e487b71")try{const d=Number(r.decode(["uint256"],u.slice(4))[0]);o={signature:"Panic(uint256)",name:"Panic",args:[d]},i=`Panic due to ${ga.get(d)||"UNKNOWN"}(${d})`,s+=`: ${i}`}catch{s+=" (could not decode panic code)"}else s+=" (unknown custom error)"}const l={to:e.to?Pt(e.to):null,data:e.data||"0x"};return e.from&&(l.from=Pt(e.from)),nn(s,"CALL_EXCEPTION",{action:t,data:n,reason:i,transaction:l,invocation:a,revert:o})}var cl,Wh;const e1=class e1{constructor(){K(this,cl)}getDefaultValue(e){const n=e.map(s=>ie(this,cl,Wh).call(this,ur.from(s)));return new Kw(n,"_").defaultValue()}encode(e,n){_O(n.length,e.length,"types/values length mismatch");const r=e.map(a=>ie(this,cl,Wh).call(this,ur.from(a))),s=new Kw(r,"_"),i=new AC;return s.encode(i,n),i.data}decode(e,n,r){const s=e.map(a=>ie(this,cl,Wh).call(this,ur.from(a)));return new Kw(s,"_").decode(new TC(n,r,T_))}static _setDefaultMaxInflation(e){H(typeof e=="number"&&Number.isInteger(e),"invalid defaultMaxInflation factor","value",e),T_=e}static defaultAbiCoder(){return l2==null&&(l2=new e1),l2}static getBuiltinCallException(e,n,r){return Bq(e,n,r,e1.defaultAbiCoder())}};cl=new WeakSet,Wh=function(e){if(e.isArray())return new rW(ie(this,cl,Wh).call(this,e.arrayChildren),e.arrayLength,e.name);if(e.isTuple())return new Kw(e.components.map(r=>ie(this,cl,Wh).call(this,r)),e.name);switch(e.baseType){case"address":return new tW(e.name);case"bool":return new sW(e.name);case"string":return new fW(e.name);case"bytes":return new iW(e.name);case"":return new cW(e.name)}let n=e.type.match(Lq);if(n){let r=parseInt(n[2]||"256");return H(r!==0&&r<=256&&r%8===0,"invalid "+n[1]+" bit length","param",e),new hW(r/8,n[1]==="int",e.name)}if(n=e.type.match(Mq),n){let r=parseInt(n[1]);return H(r!==0&&r<=32,"invalid bytes length","param",e),new aW(r,e.name)}H(!1,"invalid type","type",e.type)};let j0=e1;function u2(t){const e=la(t);if(e.length>31)throw new Error("bytes32 string must be less than 32 bytes");return RO(e,32)}class $q{constructor(e,n,r){W(this,"fragment");W(this,"name");W(this,"signature");W(this,"topic");W(this,"args");const s=e.name,i=e.format();Fe(this,{fragment:e,name:s,signature:i,topic:n,args:r})}}class Fq{constructor(e,n,r,s){W(this,"fragment");W(this,"name");W(this,"args");W(this,"signature");W(this,"selector");W(this,"value");const i=e.name,a=e.format();Fe(this,{fragment:e,name:i,args:r,signature:a,selector:n,value:s})}}class Hq{constructor(e,n,r){W(this,"fragment");W(this,"name");W(this,"args");W(this,"signature");W(this,"selector");const s=e.name,i=e.format();Fe(this,{fragment:e,name:s,args:r,signature:i,selector:n})}}class S_{constructor(e){W(this,"hash");W(this,"_isIndexed");Fe(this,{hash:e,_isIndexed:!0})}static isIndexed(e){return!!(e&&e._isIndexed)}}const k_={0:"generic panic",1:"assert(false)",17:"arithmetic overflow",18:"division or modulo by zero",33:"enum overflow",34:"invalid encoded storage byte array accessed",49:"out-of-bounds array access; popping on an empty array",50:"out-of-bounds access of an array or bytesN",65:"out of memory",81:"uninitialized function"},__={"0x08c379a0":{signature:"Error(string)",name:"Error",inputs:["string"],reason:t=>`reverted with reason string ${JSON.stringify(t)}`},"0x4e487b71":{signature:"Panic(uint256)",name:"Panic",inputs:["uint256"],reason:t=>{let e="unknown panic code";return t>=0&&t<=255&&k_[t.toString()]&&(e=k_[t.toString()]),`reverted with panic code 0x${t.toString(16)} (${e})`}}};var La,Ba,$a,Cr,oo,Jb,Zb;const Iu=class Iu{constructor(e){K(this,oo);W(this,"fragments");W(this,"deploy");W(this,"fallback");W(this,"receive");K(this,La);K(this,Ba);K(this,$a);K(this,Cr);let n=[];typeof e=="string"?n=JSON.parse(e):n=e,B(this,$a,new Map),B(this,La,new Map),B(this,Ba,new Map);const r=[];for(const a of n)try{r.push(Ud.from(a))}catch(o){console.log(`[Warning] Invalid Fragment ${JSON.stringify(a)}:`,o.message)}Fe(this,{fragments:Object.freeze(r)});let s=null,i=!1;B(this,Cr,this.getAbiCoder()),this.fragments.forEach((a,o)=>{let l;switch(a.type){case"constructor":if(this.deploy){console.log("duplicate definition - constructor");return}Fe(this,{deploy:a});return;case"fallback":a.inputs.length===0?i=!0:(H(!s||a.payable!==s.payable,"conflicting fallback fragments",`fragments[${o}]`,a),s=a,i=s.payable);return;case"function":l=C(this,$a);break;case"event":l=C(this,Ba);break;case"error":l=C(this,La);break;default:return}const u=a.format();l.has(u)||l.set(u,a)}),this.deploy||Fe(this,{deploy:Yo.from("constructor()")}),Fe(this,{fallback:s,receive:i})}format(e){const n=e?"minimal":"full";return this.fragments.map(s=>s.format(n))}formatJson(){const e=this.fragments.map(n=>n.format("json"));return JSON.stringify(e.map(n=>JSON.parse(n)))}getAbiCoder(){return j0.defaultAbiCoder()}getFunctionName(e){const n=ie(this,oo,Jb).call(this,e,null,!1);return H(n,"no matching function","key",e),n.name}hasFunction(e){return!!ie(this,oo,Jb).call(this,e,null,!1)}getFunction(e,n){return ie(this,oo,Jb).call(this,e,n||null,!0)}forEachFunction(e){const n=Array.from(C(this,$a).keys());n.sort((r,s)=>r.localeCompare(s));for(let r=0;r<n.length;r++){const s=n[r];e(C(this,$a).get(s),r)}}getEventName(e){const n=ie(this,oo,Zb).call(this,e,null,!1);return H(n,"no matching event","key",e),n.name}hasEvent(e){return!!ie(this,oo,Zb).call(this,e,null,!1)}getEvent(e,n){return ie(this,oo,Zb).call(this,e,n||null,!0)}forEachEvent(e){const n=Array.from(C(this,Ba).keys());n.sort((r,s)=>r.localeCompare(s));for(let r=0;r<n.length;r++){const s=n[r];e(C(this,Ba).get(s),r)}}getError(e,n){if(qt(e)){const s=e.toLowerCase();if(__[s])return Ns.from(__[s].signature);for(const i of C(this,La).values())if(s===i.selector)return i;return null}if(e.indexOf("(")===-1){const s=[];for(const[i,a]of C(this,La))i.split("(")[0]===e&&s.push(a);if(s.length===0)return e==="Error"?Ns.from("error Error(string)"):e==="Panic"?Ns.from("error Panic(uint256)"):null;if(s.length>1){const i=s.map(a=>JSON.stringify(a.format())).join(", ");H(!1,`ambiguous error description (i.e. ${i})`,"name",e)}return s[0]}if(e=Ns.from(e).format(),e==="Error(string)")return Ns.from("error Error(string)");if(e==="Panic(uint256)")return Ns.from("error Panic(uint256)");const r=C(this,La).get(e);return r||null}forEachError(e){const n=Array.from(C(this,La).keys());n.sort((r,s)=>r.localeCompare(s));for(let r=0;r<n.length;r++){const s=n[r];e(C(this,La).get(s),r)}}_decodeParams(e,n){return C(this,Cr).decode(e,n)}_encodeParams(e,n){return C(this,Cr).encode(e,n)}encodeDeploy(e){return this._encodeParams(this.deploy.inputs,e||[])}decodeErrorResult(e,n){if(typeof e=="string"){const r=this.getError(e);H(r,"unknown error","fragment",e),e=r}return H(fn(n,0,4)===e.selector,`data signature does not match error ${e.name}.`,"data",n),this._decodeParams(e.inputs,fn(n,4))}encodeErrorResult(e,n){if(typeof e=="string"){const r=this.getError(e);H(r,"unknown error","fragment",e),e=r}return gn([e.selector,this._encodeParams(e.inputs,n||[])])}decodeFunctionData(e,n){if(typeof e=="string"){const r=this.getFunction(e);H(r,"unknown function","fragment",e),e=r}return H(fn(n,0,4)===e.selector,`data signature does not match function ${e.name}.`,"data",n),this._decodeParams(e.inputs,fn(n,4))}encodeFunctionData(e,n){if(typeof e=="string"){const r=this.getFunction(e);H(r,"unknown function","fragment",e),e=r}return gn([e.selector,this._encodeParams(e.inputs,n||[])])}decodeFunctionResult(e,n){if(typeof e=="string"){const i=this.getFunction(e);H(i,"unknown function","fragment",e),e=i}let r="invalid length for result data";const s=qr(n);if(s.length%32===0)try{return C(this,Cr).decode(e.outputs,s)}catch{r="could not decode result data"}ee(!1,r,"BAD_DATA",{value:we(s),info:{method:e.name,signature:e.format()}})}makeError(e,n){const r=it(e,"data"),s=j0.getBuiltinCallException("call",n,r);if(s.message.startsWith("execution reverted (unknown custom error)")){const o=we(r.slice(0,4)),l=this.getError(o);if(l)try{const u=C(this,Cr).decode(l.inputs,r.slice(4));s.revert={name:l.name,signature:l.format(),args:u},s.reason=s.revert.signature,s.message=`execution reverted: ${s.reason}`}catch{s.message="execution reverted (coult not decode custom error)"}}const a=this.parseTransaction(n);return a&&(s.invocation={method:a.name,signature:a.signature,args:a.args}),s}encodeFunctionResult(e,n){if(typeof e=="string"){const r=this.getFunction(e);H(r,"unknown function","fragment",e),e=r}return we(C(this,Cr).encode(e.outputs,n||[]))}encodeFilterTopics(e,n){if(typeof e=="string"){const i=this.getEvent(e);H(i,"unknown event","eventFragment",e),e=i}ee(n.length<=e.inputs.length,`too many arguments for ${e.format()}`,"UNEXPECTED_ARGUMENT",{count:n.length,expectedCount:e.inputs.length});const r=[];e.anonymous||r.push(e.topicHash);const s=(i,a)=>i.type==="string"?Od(a):i.type==="bytes"?Tn(we(a)):(i.type==="bool"&&typeof a=="boolean"?a=a?"0x01":"0x00":i.type.match(/^u?int/)?a=zl(a):i.type.match(/^bytes/)?a=RO(a,32):i.type==="address"&&C(this,Cr).encode(["address"],[a]),cc(we(a),32));for(n.forEach((i,a)=>{const o=e.inputs[a];if(!o.indexed){H(i==null,"cannot filter non-indexed parameters; must be null","contract."+o.name,i);return}i==null?r.push(null):o.baseType==="array"||o.baseType==="tuple"?H(!1,"filtering with tuples or arrays not supported","contract."+o.name,i):Array.isArray(i)?r.push(i.map(l=>s(o,l))):r.push(s(o,i))});r.length&&r[r.length-1]===null;)r.pop();return r}encodeEventLog(e,n){if(typeof e=="string"){const a=this.getEvent(e);H(a,"unknown event","eventFragment",e),e=a}const r=[],s=[],i=[];return e.anonymous||r.push(e.topicHash),H(n.length===e.inputs.length,"event arguments/values mismatch","values",n),e.inputs.forEach((a,o)=>{const l=n[o];if(a.indexed)if(a.type==="string")r.push(Od(l));else if(a.type==="bytes")r.push(Tn(l));else{if(a.baseType==="tuple"||a.baseType==="array")throw new Error("not implemented");r.push(C(this,Cr).encode([a.type],[l]))}else s.push(a),i.push(l)}),{data:C(this,Cr).encode(s,i),topics:r}}decodeEventLog(e,n,r){if(typeof e=="string"){const p=this.getEvent(e);H(p,"unknown event","eventFragment",e),e=p}if(r!=null&&!e.anonymous){const p=e.topicHash;H(qt(r[0],32)&&r[0].toLowerCase()===p,"fragment/topic mismatch","topics[0]",r[0]),r=r.slice(1)}const s=[],i=[],a=[];e.inputs.forEach((p,g)=>{p.indexed?p.type==="string"||p.type==="bytes"||p.baseType==="tuple"||p.baseType==="array"?(s.push(ur.from({type:"bytes32",name:p.name})),a.push(!0)):(s.push(p),a.push(!1)):(i.push(p),a.push(!1))});const o=r!=null?C(this,Cr).decode(s,gn(r)):null,l=C(this,Cr).decode(i,n,!0),u=[],d=[];let h=0,f=0;return e.inputs.forEach((p,g)=>{let m=null;if(p.indexed)if(o==null)m=new S_(null);else if(a[g])m=new S_(o[f++]);else try{m=o[f++]}catch(y){m=y}else try{m=l[h++]}catch(y){m=y}u.push(m),d.push(p.name||null)}),jp.fromItems(u,d)}parseTransaction(e){const n=it(e.data,"tx.data"),r=Ie(e.value!=null?e.value:0,"tx.value"),s=this.getFunction(we(n.slice(0,4)));if(!s)return null;const i=C(this,Cr).decode(s.inputs,n.slice(4));return new Fq(s,s.selector,i,r)}parseCallResult(e){throw new Error("@TODO")}parseLog(e){const n=this.getEvent(e.topics[0]);return!n||n.anonymous?null:new $q(n,n.topicHash,this.decodeEventLog(n,e.data,e.topics))}parseError(e){const n=we(e),r=this.getError(fn(n,0,4));if(!r)return null;const s=C(this,Cr).decode(r.inputs,fn(n,4));return new Hq(r,r.selector,s)}static from(e){return e instanceof Iu?e:typeof e=="string"?new Iu(JSON.parse(e)):typeof e.formatJson=="function"?new Iu(e.formatJson()):typeof e.format=="function"?new Iu(e.format("json")):new Iu(e)}};La=new WeakMap,Ba=new WeakMap,$a=new WeakMap,Cr=new WeakMap,oo=new WeakSet,Jb=function(e,n,r){if(qt(e)){const i=e.toLowerCase();for(const a of C(this,$a).values())if(i===a.selector)return a;return null}if(e.indexOf("(")===-1){const i=[];for(const[a,o]of C(this,$a))a.split("(")[0]===e&&i.push(o);if(n){const a=n.length>0?n[n.length-1]:null;let o=n.length,l=!0;Pr.isTyped(a)&&a.type==="overrides"&&(l=!1,o--);for(let u=i.length-1;u>=0;u--){const d=i[u].inputs.length;d!==o&&(!l||d!==o-1)&&i.splice(u,1)}for(let u=i.length-1;u>=0;u--){const d=i[u].inputs;for(let h=0;h<n.length;h++)if(Pr.isTyped(n[h])){if(h>=d.length){if(n[h].type==="overrides")continue;i.splice(u,1);break}if(n[h].type!==d[h].baseType){i.splice(u,1);break}}}}if(i.length===1&&n&&n.length!==i[0].inputs.length){const a=n[n.length-1];(a==null||Array.isArray(a)||typeof a!="object")&&i.splice(0,1)}if(i.length===0)return null;if(i.length>1&&r){const a=i.map(o=>JSON.stringify(o.format())).join(", ");H(!1,`ambiguous function description (i.e. matches ${a})`,"key",e)}return i[0]}const s=C(this,$a).get(Ga.from(e).format());return s||null},Zb=function(e,n,r){if(qt(e)){const i=e.toLowerCase();for(const a of C(this,Ba).values())if(i===a.topicHash)return a;return null}if(e.indexOf("(")===-1){const i=[];for(const[a,o]of C(this,Ba))a.split("(")[0]===e&&i.push(o);if(n){for(let a=i.length-1;a>=0;a--)i[a].inputs.length<n.length&&i.splice(a,1);for(let a=i.length-1;a>=0;a--){const o=i[a].inputs;for(let l=0;l<n.length;l++)if(Pr.isTyped(n[l])&&n[l].type!==o[l].baseType){i.splice(a,1);break}}}if(i.length===0)return null;if(i.length>1&&r){const a=i.map(o=>JSON.stringify(o.format())).join(", ");H(!1,`ambiguous event description (i.e. matches ${a})`,"key",e)}return i[0]}const s=C(this,Ba).get(Ka.from(e).format());return s||null};let $C=Iu;const iD=BigInt(0);function _f(t){return t??null}function yn(t){return t==null?null:t.toString()}class I_{constructor(e,n,r){W(this,"gasPrice");W(this,"maxFeePerGas");W(this,"maxPriorityFeePerGas");Fe(this,{gasPrice:_f(e),maxFeePerGas:_f(n),maxPriorityFeePerGas:_f(r)})}toJSON(){const{gasPrice:e,maxFeePerGas:n,maxPriorityFeePerGas:r}=this;return{_type:"FeeData",gasPrice:yn(e),maxFeePerGas:yn(n),maxPriorityFeePerGas:yn(r)}}}function cv(t){const e={};t.to&&(e.to=t.to),t.from&&(e.from=t.from),t.data&&(e.data=we(t.data));const n="chainId,gasLimit,gasPrice,maxFeePerBlobGas,maxFeePerGas,maxPriorityFeePerGas,value".split(/,/);for(const s of n)!(s in t)||t[s]==null||(e[s]=Ie(t[s],`request.${s}`));const r="type,nonce".split(/,/);for(const s of r)!(s in t)||t[s]==null||(e[s]=Xe(t[s],`request.${s}`));return t.accessList&&(e.accessList=sh(t.accessList)),t.authorizationList&&(e.authorizationList=t.authorizationList.slice()),"blockTag"in t&&(e.blockTag=t.blockTag),"enableCcipRead"in t&&(e.enableCcipRead=!!t.enableCcipRead),"customData"in t&&(e.customData=t.customData),"blobVersionedHashes"in t&&t.blobVersionedHashes&&(e.blobVersionedHashes=t.blobVersionedHashes.slice()),"kzg"in t&&(e.kzg=t.kzg),"blobs"in t&&t.blobs&&(e.blobs=t.blobs.map(s=>A6(s)?we(s):Object.assign({},s))),e}var $o;class Vq{constructor(e,n){W(this,"provider");W(this,"number");W(this,"hash");W(this,"timestamp");W(this,"parentHash");W(this,"parentBeaconBlockRoot");W(this,"nonce");W(this,"difficulty");W(this,"gasLimit");W(this,"gasUsed");W(this,"stateRoot");W(this,"receiptsRoot");W(this,"blobGasUsed");W(this,"excessBlobGas");W(this,"miner");W(this,"prevRandao");W(this,"extraData");W(this,"baseFeePerGas");K(this,$o);B(this,$o,e.transactions.map(r=>typeof r!="string"?new O0(r,n):r)),Fe(this,{provider:n,hash:_f(e.hash),number:e.number,timestamp:e.timestamp,parentHash:e.parentHash,parentBeaconBlockRoot:e.parentBeaconBlockRoot,nonce:e.nonce,difficulty:e.difficulty,gasLimit:e.gasLimit,gasUsed:e.gasUsed,blobGasUsed:e.blobGasUsed,excessBlobGas:e.excessBlobGas,miner:e.miner,prevRandao:_f(e.prevRandao),extraData:e.extraData,baseFeePerGas:_f(e.baseFeePerGas),stateRoot:e.stateRoot,receiptsRoot:e.receiptsRoot})}get transactions(){return C(this,$o).map(e=>typeof e=="string"?e:e.hash)}get prefetchedTransactions(){const e=C(this,$o).slice();return e.length===0?[]:(ee(typeof e[0]=="object","transactions were not prefetched with block request","UNSUPPORTED_OPERATION",{operation:"transactionResponses()"}),e)}toJSON(){const{baseFeePerGas:e,difficulty:n,extraData:r,gasLimit:s,gasUsed:i,hash:a,miner:o,prevRandao:l,nonce:u,number:d,parentHash:h,parentBeaconBlockRoot:f,stateRoot:p,receiptsRoot:g,timestamp:m,transactions:y}=this;return{_type:"Block",baseFeePerGas:yn(e),difficulty:yn(n),extraData:r,gasLimit:yn(s),gasUsed:yn(i),blobGasUsed:yn(this.blobGasUsed),excessBlobGas:yn(this.excessBlobGas),hash:a,miner:o,prevRandao:l,nonce:u,number:d,parentHash:h,timestamp:m,parentBeaconBlockRoot:f,stateRoot:p,receiptsRoot:g,transactions:y}}[Symbol.iterator](){let e=0;const n=this.transactions;return{next:()=>e<this.length?{value:n[e++],done:!1}:{value:void 0,done:!0}}}get length(){return C(this,$o).length}get date(){return this.timestamp==null?null:new Date(this.timestamp*1e3)}async getTransaction(e){let n;if(typeof e=="number")n=C(this,$o)[e];else{const r=e.toLowerCase();for(const s of C(this,$o))if(typeof s=="string"){if(s!==r)continue;n=s;break}else{if(s.hash!==r)continue;n=s;break}}if(n==null)throw new Error("no such tx");return typeof n=="string"?await this.provider.getTransaction(n):n}getPrefetchedTransaction(e){const n=this.prefetchedTransactions;if(typeof e=="number")return n[e];e=e.toLowerCase();for(const r of n)if(r.hash===e)return r;H(!1,"no matching transaction","indexOrHash",e)}isMined(){return!!this.hash}isLondon(){return!!this.baseFeePerGas}orphanedEvent(){if(!this.isMined())throw new Error("");return zq(this)}}$o=new WeakMap;class Zy{constructor(e,n){W(this,"provider");W(this,"transactionHash");W(this,"blockHash");W(this,"blockNumber");W(this,"removed");W(this,"address");W(this,"data");W(this,"topics");W(this,"index");W(this,"transactionIndex");this.provider=n;const r=Object.freeze(e.topics.slice());Fe(this,{transactionHash:e.transactionHash,blockHash:e.blockHash,blockNumber:e.blockNumber,removed:e.removed,address:e.address,data:e.data,topics:r,index:e.index,transactionIndex:e.transactionIndex})}toJSON(){const{address:e,blockHash:n,blockNumber:r,data:s,index:i,removed:a,topics:o,transactionHash:l,transactionIndex:u}=this;return{_type:"log",address:e,blockHash:n,blockNumber:r,data:s,index:i,removed:a,topics:o,transactionHash:l,transactionIndex:u}}async getBlock(){const e=await this.provider.getBlock(this.blockHash);return ee(!!e,"failed to find transaction","UNKNOWN_ERROR",{}),e}async getTransaction(){const e=await this.provider.getTransaction(this.transactionHash);return ee(!!e,"failed to find transaction","UNKNOWN_ERROR",{}),e}async getTransactionReceipt(){const e=await this.provider.getTransactionReceipt(this.transactionHash);return ee(!!e,"failed to find transaction receipt","UNKNOWN_ERROR",{}),e}removedEvent(){return Wq(this)}}var Oy;class aD{constructor(e,n){W(this,"provider");W(this,"to");W(this,"from");W(this,"contractAddress");W(this,"hash");W(this,"index");W(this,"blockHash");W(this,"blockNumber");W(this,"logsBloom");W(this,"gasUsed");W(this,"blobGasUsed");W(this,"cumulativeGasUsed");W(this,"gasPrice");W(this,"blobGasPrice");W(this,"type");W(this,"status");W(this,"root");K(this,Oy);B(this,Oy,Object.freeze(e.logs.map(s=>new Zy(s,n))));let r=iD;e.effectiveGasPrice!=null?r=e.effectiveGasPrice:e.gasPrice!=null&&(r=e.gasPrice),Fe(this,{provider:n,to:e.to,from:e.from,contractAddress:e.contractAddress,hash:e.hash,index:e.index,blockHash:e.blockHash,blockNumber:e.blockNumber,logsBloom:e.logsBloom,gasUsed:e.gasUsed,cumulativeGasUsed:e.cumulativeGasUsed,blobGasUsed:e.blobGasUsed,gasPrice:r,blobGasPrice:e.blobGasPrice,type:e.type,status:e.status,root:e.root})}get logs(){return C(this,Oy)}toJSON(){const{to:e,from:n,contractAddress:r,hash:s,index:i,blockHash:a,blockNumber:o,logsBloom:l,logs:u,status:d,root:h}=this;return{_type:"TransactionReceipt",blockHash:a,blockNumber:o,contractAddress:r,cumulativeGasUsed:yn(this.cumulativeGasUsed),from:n,gasPrice:yn(this.gasPrice),blobGasUsed:yn(this.blobGasUsed),blobGasPrice:yn(this.blobGasPrice),gasUsed:yn(this.gasUsed),hash:s,index:i,logs:u,logsBloom:l,root:h,status:d,to:e}}get length(){return this.logs.length}[Symbol.iterator](){let e=0;return{next:()=>e<this.length?{value:this.logs[e++],done:!1}:{value:void 0,done:!0}}}get fee(){return this.gasUsed*this.gasPrice}async getBlock(){const e=await this.provider.getBlock(this.blockHash);if(e==null)throw new Error("TODO");return e}async getTransaction(){const e=await this.provider.getTransaction(this.hash);if(e==null)throw new Error("TODO");return e}async getResult(){return await this.provider.getTransactionResult(this.hash)}async confirmations(){return await this.provider.getBlockNumber()-this.blockNumber+1}removedEvent(){return cD(this)}reorderedEvent(e){return ee(!e||e.isMined(),"unmined 'other' transction cannot be orphaned","UNSUPPORTED_OPERATION",{operation:"reorderedEvent(other)"}),oD(this,e)}}Oy=new WeakMap;var ll;const s5=class s5{constructor(e,n){W(this,"provider");W(this,"blockNumber");W(this,"blockHash");W(this,"index");W(this,"hash");W(this,"type");W(this,"to");W(this,"from");W(this,"nonce");W(this,"gasLimit");W(this,"gasPrice");W(this,"maxPriorityFeePerGas");W(this,"maxFeePerGas");W(this,"maxFeePerBlobGas");W(this,"data");W(this,"value");W(this,"chainId");W(this,"signature");W(this,"accessList");W(this,"blobVersionedHashes");W(this,"authorizationList");K(this,ll);this.provider=n,this.blockNumber=e.blockNumber!=null?e.blockNumber:null,this.blockHash=e.blockHash!=null?e.blockHash:null,this.hash=e.hash,this.index=e.index,this.type=e.type,this.from=e.from,this.to=e.to||null,this.gasLimit=e.gasLimit,this.nonce=e.nonce,this.data=e.data,this.value=e.value,this.gasPrice=e.gasPrice,this.maxPriorityFeePerGas=e.maxPriorityFeePerGas!=null?e.maxPriorityFeePerGas:null,this.maxFeePerGas=e.maxFeePerGas!=null?e.maxFeePerGas:null,this.maxFeePerBlobGas=e.maxFeePerBlobGas!=null?e.maxFeePerBlobGas:null,this.chainId=e.chainId,this.signature=e.signature,this.accessList=e.accessList!=null?e.accessList:null,this.blobVersionedHashes=e.blobVersionedHashes!=null?e.blobVersionedHashes:null,this.authorizationList=e.authorizationList!=null?e.authorizationList:null,B(this,ll,-1)}toJSON(){const{blockNumber:e,blockHash:n,index:r,hash:s,type:i,to:a,from:o,nonce:l,data:u,signature:d,accessList:h,blobVersionedHashes:f}=this;return{_type:"TransactionResponse",accessList:h,blockNumber:e,blockHash:n,blobVersionedHashes:f,chainId:yn(this.chainId),data:u,from:o,gasLimit:yn(this.gasLimit),gasPrice:yn(this.gasPrice),hash:s,maxFeePerGas:yn(this.maxFeePerGas),maxPriorityFeePerGas:yn(this.maxPriorityFeePerGas),maxFeePerBlobGas:yn(this.maxFeePerBlobGas),nonce:l,signature:d,to:a,index:r,type:i,value:yn(this.value)}}async getBlock(){let e=this.blockNumber;if(e==null){const r=await this.getTransaction();r&&(e=r.blockNumber)}if(e==null)return null;const n=this.provider.getBlock(e);if(n==null)throw new Error("TODO");return n}async getTransaction(){return this.provider.getTransaction(this.hash)}async confirmations(){if(this.blockNumber==null){const{tx:n,blockNumber:r}=await zr({tx:this.getTransaction(),blockNumber:this.provider.getBlockNumber()});return n==null||n.blockNumber==null?0:r-n.blockNumber+1}return await this.provider.getBlockNumber()-this.blockNumber+1}async wait(e,n){const r=e??1,s=n??0;let i=C(this,ll),a=-1,o=i===-1;const l=async()=>{if(o)return null;const{blockNumber:f,nonce:p}=await zr({blockNumber:this.provider.getBlockNumber(),nonce:this.provider.getTransactionCount(this.from)});if(p<this.nonce){i=f;return}if(o)return null;const g=await this.getTransaction();if(!(g&&g.blockNumber!=null))for(a===-1&&(a=i-3,a<C(this,ll)&&(a=C(this,ll)));a<=f;){if(o)return null;const m=await this.provider.getBlock(a,!0);if(m==null)return;for(const y of m)if(y===this.hash)return;for(let y=0;y<m.length;y++){const b=await m.getTransaction(y);if(b.from===this.from&&b.nonce===this.nonce){if(o)return null;const w=await this.provider.getTransactionReceipt(b.hash);if(w==null||f-w.blockNumber+1<r)return;let x="replaced";b.data===this.data&&b.to===this.to&&b.value===this.value?x="repriced":b.data==="0x"&&b.from===b.to&&b.value===iD&&(x="cancelled"),ee(!1,"transaction was replaced","TRANSACTION_REPLACED",{cancelled:x==="replaced"||x==="cancelled",reason:x,replacement:b.replaceableTransaction(i),hash:b.hash,receipt:w})}}a++}},u=f=>{if(f==null||f.status!==0)return f;ee(!1,"transaction execution reverted","CALL_EXCEPTION",{action:"sendTransaction",data:null,reason:null,invocation:null,revert:null,transaction:{to:f.to,from:f.from,data:""},receipt:f})},d=await this.provider.getTransactionReceipt(this.hash);if(r===0)return u(d);if(d){if(r===1||await d.confirmations()>=r)return u(d)}else if(await l(),r===0)return null;return await new Promise((f,p)=>{const g=[],m=()=>{g.forEach(b=>b())};if(g.push(()=>{o=!0}),s>0){const b=setTimeout(()=>{m(),p(nn("wait for transaction timeout","TIMEOUT"))},s);g.push(()=>{clearTimeout(b)})}const y=async b=>{if(await b.confirmations()>=r){m();try{f(u(b))}catch(w){p(w)}}};if(g.push(()=>{this.provider.off(this.hash,y)}),this.provider.on(this.hash,y),i>=0){const b=async()=>{try{await l()}catch(w){if(or(w,"TRANSACTION_REPLACED")){m(),p(w);return}}o||this.provider.once("block",b)};g.push(()=>{this.provider.off("block",b)}),this.provider.once("block",b)}})}isMined(){return this.blockHash!=null}isLegacy(){return this.type===0}isBerlin(){return this.type===1}isLondon(){return this.type===2}isCancun(){return this.type===3}removedEvent(){return ee(this.isMined(),"unmined transaction canot be orphaned","UNSUPPORTED_OPERATION",{operation:"removeEvent()"}),cD(this)}reorderedEvent(e){return ee(this.isMined(),"unmined transaction canot be orphaned","UNSUPPORTED_OPERATION",{operation:"removeEvent()"}),ee(!e||e.isMined(),"unmined 'other' transaction canot be orphaned","UNSUPPORTED_OPERATION",{operation:"removeEvent()"}),oD(this,e)}replaceableTransaction(e){H(Number.isInteger(e)&&e>=0,"invalid startBlock","startBlock",e);const n=new s5(this,this.provider);return B(n,ll,e),n}};ll=new WeakMap;let O0=s5;function zq(t){return{orphan:"drop-block",hash:t.hash,number:t.number}}function oD(t,e){return{orphan:"reorder-transaction",tx:t,other:e}}function cD(t){return{orphan:"drop-transaction",tx:t}}function Wq(t){return{orphan:"drop-log",log:{transactionHash:t.transactionHash,blockHash:t.blockHash,blockNumber:t.blockNumber,address:t.address,data:t.data,topics:Object.freeze(t.topics.slice()),index:t.index}}}class M6 extends Zy{constructor(n,r,s){super(n,n.provider);W(this,"interface");W(this,"fragment");W(this,"args");const i=r.decodeEventLog(s,n.data,n.topics);Fe(this,{args:i,fragment:s,interface:r})}get eventName(){return this.fragment.name}get eventSignature(){return this.fragment.format()}}class lD extends Zy{constructor(n,r){super(n,n.provider);W(this,"error");Fe(this,{error:r})}}var lp;class qq extends aD{constructor(n,r,s){super(s,r);K(this,lp);B(this,lp,n)}get logs(){return super.logs.map(n=>{const r=n.topics.length?C(this,lp).getEvent(n.topics[0]):null;if(r)try{return new M6(n,C(this,lp),r)}catch(s){return new lD(n,s)}return n})}}lp=new WeakMap;var Dy;class L6 extends O0{constructor(n,r,s){super(s,r);K(this,Dy);B(this,Dy,n)}async wait(n,r){const s=await super.wait(n,r);return s==null?null:new qq(C(this,Dy),this.provider,s)}}Dy=new WeakMap;class uD extends OO{constructor(n,r,s,i){super(n,r,s);W(this,"log");Fe(this,{log:i})}async getBlock(){return await this.log.getBlock()}async getTransaction(){return await this.log.getTransaction()}async getTransactionReceipt(){return await this.log.getTransactionReceipt()}}class Kq extends uD{constructor(e,n,r,s,i){super(e,n,r,new M6(i,e.interface,s));const a=e.interface.decodeEventLog(s,this.log.data,this.log.topics);Fe(this,{args:a,fragment:s})}get eventName(){return this.fragment.name}get eventSignature(){return this.fragment.format()}}const P_=BigInt(0);function dD(t){return t&&typeof t.call=="function"}function hD(t){return t&&typeof t.estimateGas=="function"}function j1(t){return t&&typeof t.resolveName=="function"}function fD(t){return t&&typeof t.sendTransaction=="function"}function pD(t){if(t!=null){if(j1(t))return t;if(t.provider)return t.provider}}var Uy;class Gq{constructor(e,n,r){K(this,Uy);W(this,"fragment");if(Fe(this,{fragment:n}),n.inputs.length<r.length)throw new Error("too many arguments");const s=Md(e.runner,"resolveName"),i=j1(s)?s:null;B(this,Uy,async function(){const a=await Promise.all(n.inputs.map((o,l)=>r[l]==null?null:o.walkAsync(r[l],(d,h)=>d==="address"?Array.isArray(h)?Promise.all(h.map(f=>Gr(f,i))):Gr(h,i):h)));return e.interface.encodeFilterTopics(n,a)}())}getTopicFilter(){return C(this,Uy)}}Uy=new WeakMap;function Md(t,e){return t==null?null:typeof t[e]=="function"?t:t.provider&&typeof t.provider[e]=="function"?t.provider:null}function Bu(t){return t==null?null:t.provider||null}async function mD(t,e){const n=Pr.dereference(t,"overrides");H(typeof n=="object","invalid overrides parameter","overrides",t);const r=cv(n);return H(r.to==null||(e||[]).indexOf("to")>=0,"cannot override to","overrides.to",r.to),H(r.data==null||(e||[]).indexOf("data")>=0,"cannot override data","overrides.data",r.data),r.from&&(r.from=r.from),r}async function Yq(t,e,n){const r=Md(t,"resolveName"),s=j1(r)?r:null;return await Promise.all(e.map((i,a)=>i.walkAsync(n[a],(o,l)=>(l=Pr.dereference(l,o),o==="address"?Gr(l,s):l))))}function Qq(t){const e=async function(a){const o=await mD(a,["data"]);o.to=await t.getAddress(),o.from&&(o.from=await Gr(o.from,pD(t.runner)));const l=t.interface,u=Ie(o.value||P_,"overrides.value")===P_,d=(o.data||"0x")==="0x";l.fallback&&!l.fallback.payable&&l.receive&&!d&&!u&&H(!1,"cannot send data to receive or send value to non-payable fallback","overrides",a),H(l.fallback||d,"cannot send data to receive-only contract","overrides.data",o.data);const h=l.receive||l.fallback&&l.fallback.payable;return H(h||u,"cannot send value to non-payable fallback","overrides.value",o.value),H(l.fallback||d,"cannot send data to receive-only contract","overrides.data",o.data),o},n=async function(a){const o=Md(t.runner,"call");ee(dD(o),"contract runner does not support calling","UNSUPPORTED_OPERATION",{operation:"call"});const l=await e(a);try{return await o.call(l)}catch(u){throw C6(u)&&u.data?t.interface.makeError(u.data,l):u}},r=async function(a){const o=t.runner;ee(fD(o),"contract runner does not support sending transactions","UNSUPPORTED_OPERATION",{operation:"sendTransaction"});const l=await o.sendTransaction(await e(a)),u=Bu(t.runner);return new L6(t.interface,u,l)},s=async function(a){const o=Md(t.runner,"estimateGas");return ee(hD(o),"contract runner does not support gas estimation","UNSUPPORTED_OPERATION",{operation:"estimateGas"}),await o.estimateGas(await e(a))},i=async a=>await r(a);return Fe(i,{_contract:t,estimateGas:s,populateTransaction:e,send:r,staticCall:n}),i}function Jq(t,e){const n=function(...u){const d=t.interface.getFunction(e,u);return ee(d,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:e,args:u}}),d},r=async function(...u){const d=n(...u);let h={};if(d.inputs.length+1===u.length&&(h=await mD(u.pop()),h.from&&(h.from=await Gr(h.from,pD(t.runner)))),d.inputs.length!==u.length)throw new Error("internal error: fragment inputs doesn't match arguments; should not happen");const f=await Yq(t.runner,d.inputs,u);return Object.assign({},h,await zr({to:t.getAddress(),data:t.interface.encodeFunctionData(d,f)}))},s=async function(...u){const d=await o(...u);return d.length===1?d[0]:d},i=async function(...u){const d=t.runner;ee(fD(d),"contract runner does not support sending transactions","UNSUPPORTED_OPERATION",{operation:"sendTransaction"});const h=await d.sendTransaction(await r(...u)),f=Bu(t.runner);return new L6(t.interface,f,h)},a=async function(...u){const d=Md(t.runner,"estimateGas");return ee(hD(d),"contract runner does not support gas estimation","UNSUPPORTED_OPERATION",{operation:"estimateGas"}),await d.estimateGas(await r(...u))},o=async function(...u){const d=Md(t.runner,"call");ee(dD(d),"contract runner does not support calling","UNSUPPORTED_OPERATION",{operation:"call"});const h=await r(...u);let f="0x";try{f=await d.call(h)}catch(g){throw C6(g)&&g.data?t.interface.makeError(g.data,h):g}const p=n(...u);return t.interface.decodeFunctionResult(p,f)},l=async(...u)=>n(...u).constant?await s(...u):await i(...u);return Fe(l,{name:t.interface.getFunctionName(e),_contract:t,_key:e,getFragment:n,estimateGas:a,populateTransaction:r,send:i,staticCall:s,staticCallResult:o}),Object.defineProperty(l,"fragment",{configurable:!1,enumerable:!0,get:()=>{const u=t.interface.getFunction(e);return ee(u,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:e}}),u}}),l}function Zq(t,e){const n=function(...s){const i=t.interface.getEvent(e,s);return ee(i,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:e,args:s}}),i},r=function(...s){return new Gq(t,n(...s),s)};return Fe(r,{name:t.interface.getEventName(e),_contract:t,_key:e,getFragment:n}),Object.defineProperty(r,"fragment",{configurable:!1,enumerable:!0,get:()=>{const s=t.interface.getEvent(e);return ee(s,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:e}}),s}}),r}const lv=Symbol.for("_ethersInternal_contract"),gD=new WeakMap;function Xq(t,e){gD.set(t[lv],e)}function Fs(t){return gD.get(t[lv])}function eK(t){return t&&typeof t=="object"&&"getTopicFilter"in t&&typeof t.getTopicFilter=="function"&&t.fragment}async function B6(t,e){let n,r=null;if(Array.isArray(e)){const i=function(a){if(qt(a,32))return a;const o=t.interface.getEvent(a);return H(o,"unknown fragment","name",a),o.topicHash};n=e.map(a=>a==null?null:Array.isArray(a)?a.map(i):i(a))}else e==="*"?n=[null]:typeof e=="string"?qt(e,32)?n=[e]:(r=t.interface.getEvent(e),H(r,"unknown fragment","event",e),n=[r.topicHash]):eK(e)?n=await e.getTopicFilter():"fragment"in e?(r=e.fragment,n=[r.topicHash]):H(!1,"unknown event name","event",e);n=n.map(i=>{if(i==null)return null;if(Array.isArray(i)){const a=Array.from(new Set(i.map(o=>o.toLowerCase())).values());return a.length===1?a[0]:(a.sort(),a)}return i.toLowerCase()});const s=n.map(i=>i==null?"null":Array.isArray(i)?i.join("|"):i).join("&");return{fragment:r,tag:s,topics:n}}async function mg(t,e){const{subs:n}=Fs(t);return n.get((await B6(t,e)).tag)||null}async function R_(t,e,n){const r=Bu(t.runner);ee(r,"contract runner does not support subscribing","UNSUPPORTED_OPERATION",{operation:e});const{fragment:s,tag:i,topics:a}=await B6(t,n),{addr:o,subs:l}=Fs(t);let u=l.get(i);if(!u){const h={address:o||t,topics:a},f=y=>{let b=s;if(b==null)try{b=t.interface.getEvent(y.topics[0])}catch{}if(b){const w=b,x=s?t.interface.decodeEventLog(s,y.data,y.topics):[];HC(t,n,x,A=>new Kq(t,A,n,w,y))}else HC(t,n,[],w=>new uD(t,w,n,y))};let p=[];u={tag:i,listeners:[],start:()=>{p.length||p.push(r.on(h,f))},stop:async()=>{if(p.length==0)return;let y=p;p=[],await Promise.all(y),r.off(h,f)}},l.set(i,u)}return u}let FC=Promise.resolve();async function tK(t,e,n,r){await FC;const s=await mg(t,e);if(!s)return!1;const i=s.listeners.length;return s.listeners=s.listeners.filter(({listener:a,once:o})=>{const l=Array.from(n);r&&l.push(r(o?null:a));try{a.call(t,...l)}catch{}return!o}),s.listeners.length===0&&(s.stop(),Fs(t).subs.delete(s.tag)),i>0}async function HC(t,e,n,r){try{await FC}catch{}const s=tK(t,e,n,r);return FC=s,await s}const Yw=["then"];var t4;t4=lv;const a0=class a0{constructor(e,n,r,s){W(this,"target");W(this,"interface");W(this,"runner");W(this,"filters");W(this,t4);W(this,"fallback");H(typeof e=="string"||v8(e),"invalid value for Contract target","target",e),r==null&&(r=null);const i=$C.from(n);Fe(this,{target:e,runner:r,interface:i}),Object.defineProperty(this,lv,{value:{}});let a,o=null,l=null;if(s){const h=Bu(r);l=new L6(this.interface,h,s)}let u=new Map;if(typeof e=="string")if(qt(e))o=e,a=Promise.resolve(e);else{const h=Md(r,"resolveName");if(!j1(h))throw nn("contract runner does not support name resolution","UNSUPPORTED_OPERATION",{operation:"resolveName"});a=h.resolveName(e).then(f=>{if(f==null)throw nn("an ENS name used for a contract target must be correctly configured","UNCONFIGURED_NAME",{value:e});return Fs(this).addr=f,f})}else a=e.getAddress().then(h=>{if(h==null)throw new Error("TODO");return Fs(this).addr=h,h});Xq(this,{addrPromise:a,addr:o,deployTx:l,subs:u});const d=new Proxy({},{get:(h,f,p)=>{if(typeof f=="symbol"||Yw.indexOf(f)>=0)return Reflect.get(h,f,p);try{return this.getEvent(f)}catch(g){if(!or(g,"INVALID_ARGUMENT")||g.argument!=="key")throw g}},has:(h,f)=>Yw.indexOf(f)>=0?Reflect.has(h,f):Reflect.has(h,f)||this.interface.hasEvent(String(f))});return Fe(this,{filters:d}),Fe(this,{fallback:i.receive||i.fallback?Qq(this):null}),new Proxy(this,{get:(h,f,p)=>{if(typeof f=="symbol"||f in h||Yw.indexOf(f)>=0)return Reflect.get(h,f,p);try{return h.getFunction(f)}catch(g){if(!or(g,"INVALID_ARGUMENT")||g.argument!=="key")throw g}},has:(h,f)=>typeof f=="symbol"||f in h||Yw.indexOf(f)>=0?Reflect.has(h,f):h.interface.hasFunction(f)})}connect(e){return new a0(this.target,this.interface,e)}attach(e){return new a0(e,this.interface,this.runner)}async getAddress(){return await Fs(this).addrPromise}async getDeployedCode(){const e=Bu(this.runner);ee(e,"runner does not support .provider","UNSUPPORTED_OPERATION",{operation:"getDeployedCode"});const n=await e.getCode(await this.getAddress());return n==="0x"?null:n}async waitForDeployment(){const e=this.deploymentTransaction();if(e)return await e.wait(),this;if(await this.getDeployedCode()!=null)return this;const r=Bu(this.runner);return ee(r!=null,"contract runner does not support .provider","UNSUPPORTED_OPERATION",{operation:"waitForDeployment"}),new Promise((s,i)=>{const a=async()=>{try{if(await this.getDeployedCode()!=null)return s(this);r.once("block",a)}catch(o){i(o)}};a()})}deploymentTransaction(){return Fs(this).deployTx}getFunction(e){return typeof e!="string"&&(e=e.format()),Jq(this,e)}getEvent(e){return typeof e!="string"&&(e=e.format()),Zq(this,e)}async queryTransaction(e){throw new Error("@TODO")}async queryFilter(e,n,r){n==null&&(n=0),r==null&&(r="latest");const{addr:s,addrPromise:i}=Fs(this),a=s||await i,{fragment:o,topics:l}=await B6(this,e),u={address:a,topics:l,fromBlock:n,toBlock:r},d=Bu(this.runner);return ee(d,"contract runner does not have a provider","UNSUPPORTED_OPERATION",{operation:"queryFilter"}),(await d.getLogs(u)).map(h=>{let f=o;if(f==null)try{f=this.interface.getEvent(h.topics[0])}catch{}if(f)try{return new M6(h,this.interface,f)}catch(p){return new lD(h,p)}return new Zy(h,d)})}async on(e,n){const r=await R_(this,"on",e);return r.listeners.push({listener:n,once:!1}),r.start(),this}async once(e,n){const r=await R_(this,"once",e);return r.listeners.push({listener:n,once:!0}),r.start(),this}async emit(e,...n){return await HC(this,e,n,null)}async listenerCount(e){if(e){const s=await mg(this,e);return s?s.listeners.length:0}const{subs:n}=Fs(this);let r=0;for(const{listeners:s}of n.values())r+=s.length;return r}async listeners(e){if(e){const s=await mg(this,e);return s?s.listeners.map(({listener:i})=>i):[]}const{subs:n}=Fs(this);let r=[];for(const{listeners:s}of n.values())r=r.concat(s.map(({listener:i})=>i));return r}async off(e,n){const r=await mg(this,e);if(!r)return this;if(n){const s=r.listeners.map(({listener:i})=>i).indexOf(n);s>=0&&r.listeners.splice(s,1)}return(n==null||r.listeners.length===0)&&(r.stop(),Fs(this).subs.delete(r.tag)),this}async removeAllListeners(e){if(e){const n=await mg(this,e);if(!n)return this;n.stop(),Fs(this).subs.delete(n.tag)}else{const{subs:n}=Fs(this);for(const{tag:r,stop:s}of n.values())s(),n.delete(r)}return this}async addListener(e,n){return await this.on(e,n)}async removeListener(e,n){return await this.off(e,n)}static buildClass(e){class n extends a0{constructor(s,i=null){super(s,e,i)}}return n}static from(e,n,r){return r==null&&(r=null),new this(e,n,r)}};let VC=a0;function nK(){return VC}class mn extends nK(){}function d2(t){return t.match(/^ipfs:\/\/ipfs\//i)?t=t.substring(12):t.match(/^ipfs:\/\//i)?t=t.substring(7):H(!1,"unsupported IPFS format","link",t),`https://gateway.ipfs.io/ipfs/${t}`}class rK{constructor(e){W(this,"name");Fe(this,{name:e})}connect(e){return this}supportsCoinType(e){return!1}async encodeAddress(e,n){throw new Error("unsupported coin")}async decodeAddress(e,n){throw new Error("unsupported coin")}}const yD=new RegExp("^(ipfs)://(.*)$","i"),j_=[new RegExp("^(https)://(.*)$","i"),new RegExp("^(data):(.*)$","i"),yD,new RegExp("^eip155:[0-9]+/(erc[0-9]+):(.*)$","i")];var ul,cd,dl,qh,t1,wD;const wf=class wf{constructor(e,n,r){K(this,dl);W(this,"provider");W(this,"address");W(this,"name");K(this,ul);K(this,cd);Fe(this,{provider:e,address:n,name:r}),B(this,ul,null),B(this,cd,new mn(n,["function supportsInterface(bytes4) view returns (bool)","function resolve(bytes, bytes) view returns (bytes)","function addr(bytes32) view returns (address)","function addr(bytes32, uint) view returns (bytes)","function text(bytes32, string) view returns (string)","function contenthash(bytes32) view returns (bytes)"],e))}async supportsWildcard(){return C(this,ul)==null&&B(this,ul,(async()=>{try{return await C(this,cd).supportsInterface("0x9061b923")}catch(e){if(or(e,"CALL_EXCEPTION"))return!1;throw B(this,ul,null),e}})()),await C(this,ul)}async getAddress(e){if(e==null&&(e=60),e===60)try{const i=await ie(this,dl,qh).call(this,"addr(bytes32)");return i==null||i===co?null:i}catch(i){if(or(i,"CALL_EXCEPTION"))return null;throw i}if(e>=0&&e<2147483648){let i=e+2147483648;const a=await ie(this,dl,qh).call(this,"addr(bytes32,uint)",[i]);if(qt(a,20))return Pt(a)}let n=null;for(const i of this.provider.plugins)if(i instanceof rK&&i.supportsCoinType(e)){n=i;break}if(n==null)return null;const r=await ie(this,dl,qh).call(this,"addr(bytes32,uint)",[e]);if(r==null||r==="0x")return null;const s=await n.decodeAddress(e,r);if(s!=null)return s;ee(!1,"invalid coin data","UNSUPPORTED_OPERATION",{operation:`getAddress(${e})`,info:{coinType:e,data:r}})}async getText(e){const n=await ie(this,dl,qh).call(this,"text(bytes32,string)",[e]);return n==null||n==="0x"?null:n}async getContentHash(){const e=await ie(this,dl,qh).call(this,"contenthash(bytes32)");if(e==null||e==="0x")return null;const n=e.match(/^0x(e3010170|e5010172)(([0-9a-f][0-9a-f])([0-9a-f][0-9a-f])([0-9a-f]*))$/);if(n){const s=n[1]==="e3010170"?"ipfs":"ipns",i=parseInt(n[4],16);if(n[5].length===i*2)return`${s}://${oV("0x"+n[2])}`}const r=e.match(/^0xe40101fa011b20([0-9a-f]*)$/);if(r&&r[1].length===64)return`bzz://${r[1]}`;ee(!1,"invalid or unsupported content hash data","UNSUPPORTED_OPERATION",{operation:"getContentHash()",info:{data:e}})}async getAvatar(){return(await this._getAvatar()).url}async _getAvatar(){const e=[{type:"name",value:this.name}];try{const n=await this.getText("avatar");if(n==null)return e.push({type:"!avatar",value:""}),{url:null,linkage:e};e.push({type:"avatar",value:n});for(let r=0;r<j_.length;r++){const s=n.match(j_[r]);if(s==null)continue;const i=s[1].toLowerCase();switch(i){case"https":case"data":return e.push({type:"url",value:n}),{linkage:e,url:n};case"ipfs":{const a=d2(n);return e.push({type:"ipfs",value:n}),e.push({type:"url",value:a}),{linkage:e,url:a}}case"erc721":case"erc1155":{const a=i==="erc721"?"tokenURI(uint256)":"uri(uint256)";e.push({type:i,value:n});const o=await this.getAddress();if(o==null)return e.push({type:"!owner",value:""}),{url:null,linkage:e};const l=(s[2]||"").split("/");if(l.length!==2)return e.push({type:`!${i}caip`,value:s[2]||""}),{url:null,linkage:e};const u=l[1],d=new mn(l[0],["function tokenURI(uint) view returns (string)","function ownerOf(uint) view returns (address)","function uri(uint) view returns (string)","function balanceOf(address, uint256) view returns (uint)"],this.provider);if(i==="erc721"){const m=await d.ownerOf(u);if(o!==m)return e.push({type:"!owner",value:m}),{url:null,linkage:e};e.push({type:"owner",value:m})}else if(i==="erc1155"){const m=await d.balanceOf(o,u);if(!m)return e.push({type:"!balance",value:"0"}),{url:null,linkage:e};e.push({type:"balance",value:m.toString()})}let h=await d[a](u);if(h==null||h==="0x")return e.push({type:"!metadata-url",value:""}),{url:null,linkage:e};e.push({type:"metadata-url-base",value:h}),i==="erc1155"&&(h=h.replace("{id}",zl(u,32).substring(2)),e.push({type:"metadata-url-expanded",value:h})),h.match(/^ipfs:/i)&&(h=d2(h)),e.push({type:"metadata-url",value:h});let f={};const p=await new lc(h).send();p.assertOk();try{f=p.bodyJson}catch{try{e.push({type:"!metadata",value:p.bodyText})}catch{const b=p.body;return b&&e.push({type:"!metadata",value:we(b)}),{url:null,linkage:e}}return{url:null,linkage:e}}if(!f)return e.push({type:"!metadata",value:""}),{url:null,linkage:e};e.push({type:"metadata",value:JSON.stringify(f)});let g=f.image;if(typeof g!="string")return e.push({type:"!imageUrl",value:""}),{url:null,linkage:e};if(!g.match(/^(https:\/\/|data:)/i)){if(g.match(yD)==null)return e.push({type:"!imageUrl-ipfs",value:g}),{url:null,linkage:e};e.push({type:"imageUrl-ipfs",value:g}),g=d2(g)}return e.push({type:"url",value:g}),{linkage:e,url:g}}}}}catch{}return{linkage:e,url:null}}static async getEnsAddress(e){const n=await e.getNetwork(),r=n.getPlugin("org.ethers.plugins.network.Ens");return ee(r,"network does not support ENS","UNSUPPORTED_OPERATION",{operation:"getEnsAddress",info:{network:n}}),r.address}static async fromName(e,n){var s;let r=n;for(;;){if(r===""||r==="."||n!=="eth"&&r==="eth")return null;const i=await ie(s=wf,t1,wD).call(s,e,r);if(i!=null){const a=new wf(e,i,n);return r!==n&&!await a.supportsWildcard()?null:a}r=r.split(".").slice(1).join(".")}}};ul=new WeakMap,cd=new WeakMap,dl=new WeakSet,qh=async function(e,n){n=(n||[]).slice();const r=C(this,cd).interface;n.unshift(LC(this.name));let s=null;await this.supportsWildcard()&&(s=r.getFunction(e),ee(s,"missing fragment","UNKNOWN_ERROR",{info:{funcName:e}}),n=[wq(this.name,255),r.encodeFunctionData(s,n)],e="resolve(bytes,bytes)"),n.push({enableCcipRead:!0});try{const i=await C(this,cd)[e](...n);return s?r.decodeFunctionResult(s,i)[0]:i}catch(i){if(!or(i,"CALL_EXCEPTION"))throw i}return null},t1=new WeakSet,wD=async function(e,n){const r=await wf.getEnsAddress(e);try{const i=await new mn(r,["function resolver(bytes32) view returns (address)"],e).resolver(LC(n),{enableCcipRead:!0});return i===co?null:i}catch(s){throw s}return null},K(wf,t1);let uv=wf;const O_=BigInt(0);function ut(t,e){return function(n){return n==null?e:t(n)}}function D0(t,e){return n=>{if(e&&n==null)return null;if(!Array.isArray(n))throw new Error("not an array");return n.map(r=>t(r))}}function Xy(t,e){return n=>{const r={};for(const s in t){let i=s;if(e&&s in e&&!(i in n)){for(const a of e[s])if(a in n){i=a;break}}try{const a=t[s](n[i]);a!==void 0&&(r[s]=a)}catch(a){const o=a instanceof Error?a.message:"not-an-error";ee(!1,`invalid value for value.${s} (${o})`,"BAD_DATA",{value:n})}}return r}}function sK(t){switch(t){case!0:case"true":return!0;case!1:case"false":return!1}H(!1,`invalid boolean; ${JSON.stringify(t)}`,"value",t)}function $p(t){return H(qt(t,!0),"invalid data","value",t),t}function ar(t){return H(qt(t,32),"invalid hash","value",t),t}const iK=Xy({address:Pt,blockHash:ar,blockNumber:Xe,data:$p,index:Xe,removed:ut(sK,!1),topics:D0(ar),transactionHash:ar,transactionIndex:Xe},{index:["logIndex"]});function aK(t){return iK(t)}const oK=Xy({hash:ut(ar),parentHash:ar,parentBeaconBlockRoot:ut(ar,null),number:Xe,timestamp:Xe,nonce:ut($p),difficulty:Ie,gasLimit:Ie,gasUsed:Ie,stateRoot:ut(ar,null),receiptsRoot:ut(ar,null),blobGasUsed:ut(Ie,null),excessBlobGas:ut(Ie,null),miner:ut(Pt),prevRandao:ut(ar,null),extraData:$p,baseFeePerGas:ut(Ie)},{prevRandao:["mixHash"]});function cK(t){const e=oK(t);return e.transactions=t.transactions.map(n=>typeof n=="string"?n:bD(n)),e}const lK=Xy({transactionIndex:Xe,blockNumber:Xe,transactionHash:ar,address:Pt,topics:D0(ar),data:$p,index:Xe,blockHash:ar},{index:["logIndex"]});function uK(t){return lK(t)}const dK=Xy({to:ut(Pt,null),from:ut(Pt,null),contractAddress:ut(Pt,null),index:Xe,root:ut(we),gasUsed:Ie,blobGasUsed:ut(Ie,null),logsBloom:ut($p),blockHash:ar,hash:ar,logs:D0(uK),blockNumber:Xe,cumulativeGasUsed:Ie,effectiveGasPrice:ut(Ie),blobGasPrice:ut(Ie,null),status:ut(Xe),type:ut(Xe,0)},{effectiveGasPrice:["gasPrice"],hash:["transactionHash"],index:["transactionIndex"]});function hK(t){return dK(t)}function bD(t){t.to&&Ie(t.to)===O_&&(t.to="0x0000000000000000000000000000000000000000");const e=Xy({hash:ar,index:ut(Xe,void 0),type:n=>n==="0x"||n==null?0:Xe(n),accessList:ut(sh,null),blobVersionedHashes:ut(D0(ar,!0),null),authorizationList:ut(D0(n=>{let r;if(n.signature)r=n.signature;else{let s=n.yParity;s==="0x1b"?s=0:s==="0x1c"&&(s=1),r=Object.assign({},n,{yParity:s})}return{address:Pt(n.address),chainId:Ie(n.chainId),nonce:Ie(n.nonce),signature:Is.from(r)}},!1),null),blockHash:ut(ar,null),blockNumber:ut(Xe,null),transactionIndex:ut(Xe,null),from:Pt,gasPrice:ut(Ie),maxPriorityFeePerGas:ut(Ie),maxFeePerGas:ut(Ie),maxFeePerBlobGas:ut(Ie,null),gasLimit:Ie,to:ut(Pt,null),value:Ie,nonce:Xe,data:$p,creates:ut(Pt,null),chainId:ut(Ie,null)},{data:["input"],gasLimit:["gas"],index:["transactionIndex"]})(t);if(e.to==null&&e.creates==null&&(e.creates=eW(e)),(t.type===1||t.type===2)&&t.accessList==null&&(e.accessList=[]),t.signature?e.signature=Is.from(t.signature):e.signature=Is.from(t),e.chainId==null){const n=e.signature.legacyChainId;n!=null&&(e.chainId=n)}return e.blockHash&&Ie(e.blockHash)===O_&&(e.blockHash=null),e}const fK="0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e";class ew{constructor(e){W(this,"name");Fe(this,{name:e})}clone(){return new ew(this.name)}}class O1 extends ew{constructor(n,r){n==null&&(n=0);super(`org.ethers.network.plugins.GasCost#${n||0}`);W(this,"effectiveBlock");W(this,"txBase");W(this,"txCreate");W(this,"txDataZero");W(this,"txDataNonzero");W(this,"txAccessListStorageKey");W(this,"txAccessListAddress");const s={effectiveBlock:n};function i(a,o){let l=(r||{})[a];l==null&&(l=o),H(typeof l=="number",`invalud value for ${a}`,"costs",r),s[a]=l}i("txBase",21e3),i("txCreate",32e3),i("txDataZero",4),i("txDataNonzero",16),i("txAccessListStorageKey",1900),i("txAccessListAddress",2400),Fe(this,s)}clone(){return new O1(this.effectiveBlock,this)}}class D1 extends ew{constructor(n,r){super("org.ethers.plugins.network.Ens");W(this,"address");W(this,"targetNetwork");Fe(this,{address:n||fK,targetNetwork:r??1})}clone(){return new D1(this.address,this.targetNetwork)}}var My,Ly;class pK extends ew{constructor(n,r){super("org.ethers.plugins.network.FetchUrlFeeDataPlugin");K(this,My);K(this,Ly);B(this,My,n),B(this,Ly,r)}get url(){return C(this,My)}get processFunc(){return C(this,Ly)}clone(){return this}}My=new WeakMap,Ly=new WeakMap;const h2=new Map;var up,dp,hl;const bf=class bf{constructor(e,n){K(this,up);K(this,dp);K(this,hl);B(this,up,e),B(this,dp,Ie(n)),B(this,hl,new Map)}toJSON(){return{name:this.name,chainId:String(this.chainId)}}get name(){return C(this,up)}set name(e){B(this,up,e)}get chainId(){return C(this,dp)}set chainId(e){B(this,dp,Ie(e,"chainId"))}matches(e){if(e==null)return!1;if(typeof e=="string"){try{return this.chainId===Ie(e)}catch{}return this.name===e}if(typeof e=="number"||typeof e=="bigint"){try{return this.chainId===Ie(e)}catch{}return!1}if(typeof e=="object"){if(e.chainId!=null){try{return this.chainId===Ie(e.chainId)}catch{}return!1}return e.name!=null?this.name===e.name:!1}return!1}get plugins(){return Array.from(C(this,hl).values())}attachPlugin(e){if(C(this,hl).get(e.name))throw new Error(`cannot replace existing plugin: ${e.name} `);return C(this,hl).set(e.name,e.clone()),this}getPlugin(e){return C(this,hl).get(e)||null}getPlugins(e){return this.plugins.filter(n=>n.name.split("#")[0]===e)}clone(){const e=new bf(this.name,this.chainId);return this.plugins.forEach(n=>{e.attachPlugin(n.clone())}),e}computeIntrinsicGas(e){const n=this.getPlugin("org.ethers.plugins.network.GasCost")||new O1;let r=n.txBase;if(e.to==null&&(r+=n.txCreate),e.data)for(let s=2;s<e.data.length;s+=2)e.data.substring(s,s+2)==="00"?r+=n.txDataZero:r+=n.txDataNonzero;if(e.accessList){const s=sh(e.accessList);for(const i in s)r+=n.txAccessListAddress+n.txAccessListStorageKey*s[i].storageKeys.length}return r}static from(e){if(mK(),e==null)return bf.from("mainnet");if(typeof e=="number"&&(e=BigInt(e)),typeof e=="string"||typeof e=="bigint"){const n=h2.get(e);if(n)return n();if(typeof e=="bigint")return new bf("unknown",e);H(!1,"unknown network","network",e)}if(typeof e.clone=="function")return e.clone();if(typeof e=="object"){H(typeof e.name=="string"&&typeof e.chainId=="number","invalid network object name or chainId","network",e);const n=new bf(e.name,e.chainId);return(e.ensAddress||e.ensNetwork!=null)&&n.attachPlugin(new D1(e.ensAddress,e.ensNetwork)),n}H(!1,"invalid network","network",e)}static register(e,n){typeof e=="number"&&(e=BigInt(e));const r=h2.get(e);r&&H(!1,`conflicting network for ${JSON.stringify(r.name)}`,"nameOrChainId",e),h2.set(e,n)}};up=new WeakMap,dp=new WeakMap,hl=new WeakMap;let Qa=bf;function D_(t,e){const n=String(t);if(!n.match(/^[0-9.]+$/))throw new Error(`invalid gwei value: ${t}`);const r=n.split(".");if(r.length===1&&r.push(""),r.length!==2)throw new Error(`invalid gwei value: ${t}`);for(;r[1].length<e;)r[1]+="0";if(r[1].length>9){let s=BigInt(r[1].substring(0,9));r[1].substring(9).match(/^0+$/)||s++,r[1]=s.toString()}return BigInt(r[0]+r[1])}function U_(t){return new pK(t,async(e,n,r)=>{r.setHeader("User-Agent","ethers");let s;try{const[i,a]=await Promise.all([r.send(),e()]);s=i;const o=s.bodyJson.standard;return{gasPrice:a.gasPrice,maxFeePerGas:D_(o.maxFee,9),maxPriorityFeePerGas:D_(o.maxPriorityFee,9)}}catch(i){ee(!1,`error encountered with polygon gas station (${JSON.stringify(r.url)})`,"SERVER_ERROR",{request:r,response:s,error:i})}})}let M_=!1;function mK(){if(M_)return;M_=!0;function t(e,n,r){const s=function(){const i=new Qa(e,n);return r.ensNetwork!=null&&i.attachPlugin(new D1(null,r.ensNetwork)),i.attachPlugin(new O1),(r.plugins||[]).forEach(a=>{i.attachPlugin(a)}),i};Qa.register(e,s),Qa.register(n,s),r.altNames&&r.altNames.forEach(i=>{Qa.register(i,s)})}t("mainnet",1,{ensNetwork:1,altNames:["homestead"]}),t("ropsten",3,{ensNetwork:3}),t("rinkeby",4,{ensNetwork:4}),t("goerli",5,{ensNetwork:5}),t("kovan",42,{ensNetwork:42}),t("sepolia",11155111,{ensNetwork:11155111}),t("holesky",17e3,{ensNetwork:17e3}),t("classic",61,{}),t("classicKotti",6,{}),t("arbitrum",42161,{ensNetwork:1}),t("arbitrum-goerli",421613,{}),t("arbitrum-sepolia",421614,{}),t("base",8453,{ensNetwork:1}),t("base-goerli",84531,{}),t("base-sepolia",84532,{}),t("bnb",56,{ensNetwork:1}),t("bnbt",97,{}),t("linea",59144,{ensNetwork:1}),t("linea-goerli",59140,{}),t("linea-sepolia",59141,{}),t("matic",137,{ensNetwork:1,plugins:[U_("https://gasstation.polygon.technology/v2")]}),t("matic-amoy",80002,{}),t("matic-mumbai",80001,{altNames:["maticMumbai","maticmum"],plugins:[U_("https://gasstation-testnet.polygon.technology/v2")]}),t("optimism",10,{ensNetwork:1,plugins:[]}),t("optimism-goerli",420,{}),t("optimism-sepolia",11155420,{}),t("xdai",100,{ensNetwork:1})}function zC(t){return JSON.parse(JSON.stringify(t))}var Fo,mi,fl,Fa,hp,Xb;class gK{constructor(e){K(this,hp);K(this,Fo);K(this,mi);K(this,fl);K(this,Fa);B(this,Fo,e),B(this,mi,null),B(this,fl,4e3),B(this,Fa,-2)}get pollingInterval(){return C(this,fl)}set pollingInterval(e){B(this,fl,e)}start(){C(this,mi)||(B(this,mi,C(this,Fo)._setTimeout(ie(this,hp,Xb).bind(this),C(this,fl))),ie(this,hp,Xb).call(this))}stop(){C(this,mi)&&(C(this,Fo)._clearTimeout(C(this,mi)),B(this,mi,null))}pause(e){this.stop(),e&&B(this,Fa,-2)}resume(){this.start()}}Fo=new WeakMap,mi=new WeakMap,fl=new WeakMap,Fa=new WeakMap,hp=new WeakSet,Xb=async function(){try{const e=await C(this,Fo).getBlockNumber();if(C(this,Fa)===-2){B(this,Fa,e);return}if(e!==C(this,Fa)){for(let n=C(this,Fa)+1;n<=e;n++){if(C(this,mi)==null)return;await C(this,Fo).emit("block",n)}B(this,Fa,e)}}catch{}C(this,mi)!=null&&B(this,mi,C(this,Fo)._setTimeout(ie(this,hp,Xb).bind(this),C(this,fl)))};var ld,ud,pl;class $6{constructor(e){K(this,ld);K(this,ud);K(this,pl);B(this,ld,e),B(this,pl,!1),B(this,ud,n=>{this._poll(n,C(this,ld))})}async _poll(e,n){throw new Error("sub-classes must override this")}start(){C(this,pl)||(B(this,pl,!0),C(this,ud).call(this,-2),C(this,ld).on("block",C(this,ud)))}stop(){C(this,pl)&&(B(this,pl,!1),C(this,ld).off("block",C(this,ud)))}pause(e){this.stop()}resume(){this.start()}}ld=new WeakMap,ud=new WeakMap,pl=new WeakMap;var fp,Ho;class yK extends $6{constructor(n,r){super(n);K(this,fp);K(this,Ho);B(this,fp,r),B(this,Ho,-2)}pause(n){n&&B(this,Ho,-2),super.pause(n)}async _poll(n,r){const s=await r.getBlock(C(this,fp));s!=null&&(C(this,Ho)===-2?B(this,Ho,s.number):s.number>C(this,Ho)&&(r.emit(C(this,fp),s.number),B(this,Ho,s.number)))}}fp=new WeakMap,Ho=new WeakMap;var n1;class wK extends $6{constructor(n,r){super(n);K(this,n1);B(this,n1,zC(r))}async _poll(n,r){throw new Error("@TODO")}}n1=new WeakMap;var pp;class bK extends $6{constructor(n,r){super(n);K(this,pp);B(this,pp,r)}async _poll(n,r){const s=await r.getTransactionReceipt(C(this,pp));s&&r.emit(C(this,pp),s)}}pp=new WeakMap;var Vo,mp,gp,ml,gi,r1,xD;class F6{constructor(e,n){K(this,r1);K(this,Vo);K(this,mp);K(this,gp);K(this,ml);K(this,gi);B(this,Vo,e),B(this,mp,zC(n)),B(this,gp,ie(this,r1,xD).bind(this)),B(this,ml,!1),B(this,gi,-2)}start(){C(this,ml)||(B(this,ml,!0),C(this,gi)===-2&&C(this,Vo).getBlockNumber().then(e=>{B(this,gi,e)}),C(this,Vo).on("block",C(this,gp)))}stop(){C(this,ml)&&(B(this,ml,!1),C(this,Vo).off("block",C(this,gp)))}pause(e){this.stop(),e&&B(this,gi,-2)}resume(){this.start()}}Vo=new WeakMap,mp=new WeakMap,gp=new WeakMap,ml=new WeakMap,gi=new WeakMap,r1=new WeakSet,xD=async function(e){if(C(this,gi)===-2)return;const n=zC(C(this,mp));n.fromBlock=C(this,gi)+1,n.toBlock=e;const r=await C(this,Vo).getLogs(n);if(r.length===0){C(this,gi)<e-60&&B(this,gi,e-60);return}for(const s of r)C(this,Vo).emit(C(this,mp),s),B(this,gi,s.blockNumber)};const xK=BigInt(2),vK=10;function Qw(t){return t&&typeof t.then=="function"}function ex(t,e){return t+":"+JSON.stringify(e,(n,r)=>{if(r==null)return"null";if(typeof r=="bigint")return`bigint:${r.toString()}`;if(typeof r=="string")return r.toLowerCase();if(typeof r=="object"&&!Array.isArray(r)){const s=Object.keys(r);return s.sort(),s.reduce((i,a)=>(i[a]=r[a],i),{})}return r})}class vD{constructor(e){W(this,"name");Fe(this,{name:e})}start(){}stop(){}pause(e){}resume(){}}function EK(t){return JSON.parse(JSON.stringify(t))}function WC(t){return t=Array.from(new Set(t).values()),t.sort(),t}async function f2(t,e){if(t==null)throw new Error("invalid event");if(Array.isArray(t)&&(t={topics:t}),typeof t=="string")switch(t){case"block":case"debug":case"error":case"finalized":case"network":case"pending":case"safe":return{type:t,tag:t}}if(qt(t,32)){const n=t.toLowerCase();return{type:"transaction",tag:ex("tx",{hash:n}),hash:n}}if(t.orphan){const n=t;return{type:"orphan",tag:ex("orphan",n),filter:EK(n)}}if(t.address||t.topics){const n=t,r={topics:(n.topics||[]).map(s=>s==null?null:Array.isArray(s)?WC(s.map(i=>i.toLowerCase())):s.toLowerCase())};if(n.address){const s=[],i=[],a=o=>{qt(o)?s.push(o):i.push((async()=>{s.push(await Gr(o,e))})())};Array.isArray(n.address)?n.address.forEach(a):a(n.address),i.length&&await Promise.all(i),r.address=WC(s.map(o=>o.toLowerCase()))}return{filter:r,tag:ex("event",r),type:"event"}}H(!1,"unknown ProviderEvent","event",t)}function p2(){return new Date().getTime()}const NK={cacheTimeout:250,pollingInterval:4e3};var Ar,gl,Tr,yp,Ws,dd,yl,zo,By,yi,wp,bp,at,Bs,qC,KC,gg,GC,yg,tx;class CK{constructor(e,n){K(this,at);K(this,Ar);K(this,gl);K(this,Tr);K(this,yp);K(this,Ws);K(this,dd);K(this,yl);K(this,zo);K(this,By);K(this,yi);K(this,wp);K(this,bp);if(B(this,bp,Object.assign({},NK,n||{})),e==="any")B(this,dd,!0),B(this,Ws,null);else if(e){const r=Qa.from(e);B(this,dd,!1),B(this,Ws,Promise.resolve(r)),setTimeout(()=>{this.emit("network",r,null)},0)}else B(this,dd,!1),B(this,Ws,null);B(this,zo,-1),B(this,yl,new Map),B(this,Ar,new Map),B(this,gl,new Map),B(this,Tr,null),B(this,yp,!1),B(this,By,1),B(this,yi,new Map),B(this,wp,!1)}get pollingInterval(){return C(this,bp).pollingInterval}get provider(){return this}get plugins(){return Array.from(C(this,gl).values())}attachPlugin(e){if(C(this,gl).get(e.name))throw new Error(`cannot replace existing plugin: ${e.name} `);return C(this,gl).set(e.name,e.connect(this)),this}getPlugin(e){return C(this,gl).get(e)||null}get disableCcipRead(){return C(this,wp)}set disableCcipRead(e){B(this,wp,!!e)}async ccipReadFetch(e,n,r){if(this.disableCcipRead||r.length===0||e.to==null)return null;const s=e.to.toLowerCase(),i=n.toLowerCase(),a=[];for(let o=0;o<r.length;o++){const l=r[o],u=l.replace("{sender}",s).replace("{data}",i),d=new lc(u);l.indexOf("{data}")===-1&&(d.body={data:i,sender:s}),this.emit("debug",{action:"sendCcipReadFetchRequest",request:d,index:o,urls:r});let h="unknown error",f;try{f=await d.send()}catch(p){a.push(p.message),this.emit("debug",{action:"receiveCcipReadFetchError",request:d,result:{error:p}});continue}try{const p=f.bodyJson;if(p.data)return this.emit("debug",{action:"receiveCcipReadFetchResult",request:d,result:p}),p.data;p.message&&(h=p.message),this.emit("debug",{action:"receiveCcipReadFetchError",request:d,result:p})}catch{}ee(f.statusCode<400||f.statusCode>=500,`response not found during CCIP fetch: ${h}`,"OFFCHAIN_FAULT",{reason:"404_MISSING_RESOURCE",transaction:e,info:{url:l,errorMessage:h}}),a.push(h)}ee(!1,`error encountered during CCIP fetch: ${a.map(o=>JSON.stringify(o)).join(", ")}`,"OFFCHAIN_FAULT",{reason:"500_SERVER_ERROR",transaction:e,info:{urls:r,errorMessages:a}})}_wrapBlock(e,n){return new Vq(cK(e),this)}_wrapLog(e,n){return new Zy(aK(e),this)}_wrapTransactionReceipt(e,n){return new aD(hK(e),this)}_wrapTransactionResponse(e,n){return new O0(bD(e),this)}_detectNetwork(){ee(!1,"sub-classes must implement this","UNSUPPORTED_OPERATION",{operation:"_detectNetwork"})}async _perform(e){ee(!1,`unsupported method: ${e.method}`,"UNSUPPORTED_OPERATION",{operation:e.method,info:e})}async getBlockNumber(){const e=Xe(await ie(this,at,Bs).call(this,{method:"getBlockNumber"}),"%response");return C(this,zo)>=0&&B(this,zo,e),e}_getAddress(e){return Gr(e,this)}_getBlockTag(e){if(e==null)return"latest";switch(e){case"earliest":return"0x0";case"finalized":case"latest":case"pending":case"safe":return e}if(qt(e))return qt(e,32)?e:ta(e);if(typeof e=="bigint"&&(e=Xe(e,"blockTag")),typeof e=="number")return e>=0?ta(e):C(this,zo)>=0?ta(C(this,zo)+e):this.getBlockNumber().then(n=>ta(n+e));H(!1,"invalid blockTag","blockTag",e)}_getFilter(e){const n=(e.topics||[]).map(l=>l==null?null:Array.isArray(l)?WC(l.map(u=>u.toLowerCase())):l.toLowerCase()),r="blockHash"in e?e.blockHash:void 0,s=(l,u,d)=>{let h;switch(l.length){case 0:break;case 1:h=l[0];break;default:l.sort(),h=l}if(r&&(u!=null||d!=null))throw new Error("invalid filter");const f={};return h&&(f.address=h),n.length&&(f.topics=n),u&&(f.fromBlock=u),d&&(f.toBlock=d),r&&(f.blockHash=r),f};let i=[];if(e.address)if(Array.isArray(e.address))for(const l of e.address)i.push(this._getAddress(l));else i.push(this._getAddress(e.address));let a;"fromBlock"in e&&(a=this._getBlockTag(e.fromBlock));let o;return"toBlock"in e&&(o=this._getBlockTag(e.toBlock)),i.filter(l=>typeof l!="string").length||a!=null&&typeof a!="string"||o!=null&&typeof o!="string"?Promise.all([Promise.all(i),a,o]).then(l=>s(l[0],l[1],l[2])):s(i,a,o)}_getTransactionRequest(e){const n=cv(e),r=[];if(["to","from"].forEach(s=>{if(n[s]==null)return;const i=Gr(n[s],this);Qw(i)?r.push(async function(){n[s]=await i}()):n[s]=i}),n.blockTag!=null){const s=this._getBlockTag(n.blockTag);Qw(s)?r.push(async function(){n.blockTag=await s}()):n.blockTag=s}return r.length?async function(){return await Promise.all(r),n}():n}async getNetwork(){if(C(this,Ws)==null){const s=(async()=>{try{const i=await this._detectNetwork();return this.emit("network",i,null),i}catch(i){throw C(this,Ws)===s&&B(this,Ws,null),i}})();return B(this,Ws,s),(await s).clone()}const e=C(this,Ws),[n,r]=await Promise.all([e,this._detectNetwork()]);return n.chainId!==r.chainId&&(C(this,dd)?(this.emit("network",r,n),C(this,Ws)===e&&B(this,Ws,Promise.resolve(r))):ee(!1,`network changed: ${n.chainId} => ${r.chainId} `,"NETWORK_ERROR",{event:"changed"})),n.clone()}async getFeeData(){const e=await this.getNetwork(),n=async()=>{const{_block:s,gasPrice:i,priorityFee:a}=await zr({_block:ie(this,at,GC).call(this,"latest",!1),gasPrice:(async()=>{try{const d=await ie(this,at,Bs).call(this,{method:"getGasPrice"});return Ie(d,"%response")}catch{}return null})(),priorityFee:(async()=>{try{const d=await ie(this,at,Bs).call(this,{method:"getPriorityFee"});return Ie(d,"%response")}catch{}return null})()});let o=null,l=null;const u=this._wrapBlock(s,e);return u&&u.baseFeePerGas&&(l=a??BigInt("1000000000"),o=u.baseFeePerGas*xK+l),new I_(i,o,l)},r=e.getPlugin("org.ethers.plugins.network.FetchUrlFeeDataPlugin");if(r){const s=new lc(r.url),i=await r.processFunc(n,this,s);return new I_(i.gasPrice,i.maxFeePerGas,i.maxPriorityFeePerGas)}return await n()}async estimateGas(e){let n=this._getTransactionRequest(e);return Qw(n)&&(n=await n),Ie(await ie(this,at,Bs).call(this,{method:"estimateGas",transaction:n}),"%response")}async call(e){const{tx:n,blockTag:r}=await zr({tx:this._getTransactionRequest(e),blockTag:this._getBlockTag(e.blockTag)});return await ie(this,at,KC).call(this,ie(this,at,qC).call(this,n,r,e.enableCcipRead?0:-1))}async getBalance(e,n){return Ie(await ie(this,at,gg).call(this,{method:"getBalance"},e,n),"%response")}async getTransactionCount(e,n){return Xe(await ie(this,at,gg).call(this,{method:"getTransactionCount"},e,n),"%response")}async getCode(e,n){return we(await ie(this,at,gg).call(this,{method:"getCode"},e,n))}async getStorage(e,n,r){const s=Ie(n,"position");return we(await ie(this,at,gg).call(this,{method:"getStorage",position:s},e,r))}async broadcastTransaction(e){const{blockNumber:n,hash:r,network:s}=await zr({blockNumber:this.getBlockNumber(),hash:this._perform({method:"broadcastTransaction",signedTransaction:e}),network:this.getNetwork()}),i=tv.from(e);if(i.hash!==r)throw new Error("@TODO: the returned hash did not match");return this._wrapTransactionResponse(i,s).replaceableTransaction(n)}async getBlock(e,n){const{network:r,params:s}=await zr({network:this.getNetwork(),params:ie(this,at,GC).call(this,e,!!n)});return s==null?null:this._wrapBlock(s,r)}async getTransaction(e){const{network:n,params:r}=await zr({network:this.getNetwork(),params:ie(this,at,Bs).call(this,{method:"getTransaction",hash:e})});return r==null?null:this._wrapTransactionResponse(r,n)}async getTransactionReceipt(e){const{network:n,params:r}=await zr({network:this.getNetwork(),params:ie(this,at,Bs).call(this,{method:"getTransactionReceipt",hash:e})});if(r==null)return null;if(r.gasPrice==null&&r.effectiveGasPrice==null){const s=await ie(this,at,Bs).call(this,{method:"getTransaction",hash:e});if(s==null)throw new Error("report this; could not find tx or effectiveGasPrice");r.effectiveGasPrice=s.gasPrice}return this._wrapTransactionReceipt(r,n)}async getTransactionResult(e){const{result:n}=await zr({network:this.getNetwork(),result:ie(this,at,Bs).call(this,{method:"getTransactionResult",hash:e})});return n==null?null:we(n)}async getLogs(e){let n=this._getFilter(e);Qw(n)&&(n=await n);const{network:r,params:s}=await zr({network:this.getNetwork(),params:ie(this,at,Bs).call(this,{method:"getLogs",filter:n})});return s.map(i=>this._wrapLog(i,r))}_getProvider(e){ee(!1,"provider cannot connect to target network","UNSUPPORTED_OPERATION",{operation:"_getProvider()"})}async getResolver(e){return await uv.fromName(this,e)}async getAvatar(e){const n=await this.getResolver(e);return n?await n.getAvatar():null}async resolveName(e){const n=await this.getResolver(e);return n?await n.getAddress():null}async lookupAddress(e){e=Pt(e);const n=LC(e.substring(2).toLowerCase()+".addr.reverse");try{const r=await uv.getEnsAddress(this),i=await new mn(r,["function resolver(bytes32) view returns (address)"],this).resolver(n);if(i==null||i===co)return null;const o=await new mn(i,["function name(bytes32) view returns (string)"],this).name(n);return await this.resolveName(o)!==e?null:o}catch(r){if(or(r,"BAD_DATA")&&r.value==="0x"||or(r,"CALL_EXCEPTION"))return null;throw r}return null}async waitForTransaction(e,n,r){const s=n??1;return s===0?this.getTransactionReceipt(e):new Promise(async(i,a)=>{let o=null;const l=async u=>{try{const d=await this.getTransactionReceipt(e);if(d!=null&&u-d.blockNumber+1>=s){i(d),o&&(clearTimeout(o),o=null);return}}catch(d){console.log("EEE",d)}this.once("block",l)};r!=null&&(o=setTimeout(()=>{o!=null&&(o=null,this.off("block",l),a(nn("timeout","TIMEOUT",{reason:"timeout"})))},r)),l(await this.getBlockNumber())})}async waitForBlock(e){ee(!1,"not implemented yet","NOT_IMPLEMENTED",{operation:"waitForBlock"})}_clearTimeout(e){const n=C(this,yi).get(e);n&&(n.timer&&clearTimeout(n.timer),C(this,yi).delete(e))}_setTimeout(e,n){n==null&&(n=0);const r=Cm(this,By)._++,s=()=>{C(this,yi).delete(r),e()};if(this.paused)C(this,yi).set(r,{timer:null,func:s,time:n});else{const i=setTimeout(s,n);C(this,yi).set(r,{timer:i,func:s,time:p2()})}return r}_forEachSubscriber(e){for(const n of C(this,Ar).values())e(n.subscriber)}_getSubscriber(e){switch(e.type){case"debug":case"error":case"network":return new vD(e.type);case"block":{const n=new gK(this);return n.pollingInterval=this.pollingInterval,n}case"safe":case"finalized":return new yK(this,e.type);case"event":return new F6(this,e.filter);case"transaction":return new bK(this,e.hash);case"orphan":return new wK(this,e.filter)}throw new Error(`unsupported event: ${e.type}`)}_recoverSubscriber(e,n){for(const r of C(this,Ar).values())if(r.subscriber===e){r.started&&r.subscriber.stop(),r.subscriber=n,r.started&&n.start(),C(this,Tr)!=null&&n.pause(C(this,Tr));break}}async on(e,n){const r=await ie(this,at,tx).call(this,e);return r.listeners.push({listener:n,once:!1}),r.started||(r.subscriber.start(),r.started=!0,C(this,Tr)!=null&&r.subscriber.pause(C(this,Tr))),this}async once(e,n){const r=await ie(this,at,tx).call(this,e);return r.listeners.push({listener:n,once:!0}),r.started||(r.subscriber.start(),r.started=!0,C(this,Tr)!=null&&r.subscriber.pause(C(this,Tr))),this}async emit(e,...n){const r=await ie(this,at,yg).call(this,e,n);if(!r||r.listeners.length===0)return!1;const s=r.listeners.length;return r.listeners=r.listeners.filter(({listener:i,once:a})=>{const o=new OO(this,a?null:i,e);try{i.call(this,...n,o)}catch{}return!a}),r.listeners.length===0&&(r.started&&r.subscriber.stop(),C(this,Ar).delete(r.tag)),s>0}async listenerCount(e){if(e){const r=await ie(this,at,yg).call(this,e);return r?r.listeners.length:0}let n=0;for(const{listeners:r}of C(this,Ar).values())n+=r.length;return n}async listeners(e){if(e){const r=await ie(this,at,yg).call(this,e);return r?r.listeners.map(({listener:s})=>s):[]}let n=[];for(const{listeners:r}of C(this,Ar).values())n=n.concat(r.map(({listener:s})=>s));return n}async off(e,n){const r=await ie(this,at,yg).call(this,e);if(!r)return this;if(n){const s=r.listeners.map(({listener:i})=>i).indexOf(n);s>=0&&r.listeners.splice(s,1)}return(!n||r.listeners.length===0)&&(r.started&&r.subscriber.stop(),C(this,Ar).delete(r.tag)),this}async removeAllListeners(e){if(e){const{tag:n,started:r,subscriber:s}=await ie(this,at,tx).call(this,e);r&&s.stop(),C(this,Ar).delete(n)}else for(const[n,{started:r,subscriber:s}]of C(this,Ar))r&&s.stop(),C(this,Ar).delete(n);return this}async addListener(e,n){return await this.on(e,n)}async removeListener(e,n){return this.off(e,n)}get destroyed(){return C(this,yp)}destroy(){this.removeAllListeners();for(const e of C(this,yi).keys())this._clearTimeout(e);B(this,yp,!0)}get paused(){return C(this,Tr)!=null}set paused(e){!!e!==this.paused&&(this.paused?this.resume():this.pause(!1))}pause(e){if(B(this,zo,-1),C(this,Tr)!=null){if(C(this,Tr)==!!e)return;ee(!1,"cannot change pause type; resume first","UNSUPPORTED_OPERATION",{operation:"pause"})}this._forEachSubscriber(n=>n.pause(e)),B(this,Tr,!!e);for(const n of C(this,yi).values())n.timer&&clearTimeout(n.timer),n.time=p2()-n.time}resume(){if(C(this,Tr)!=null){this._forEachSubscriber(e=>e.resume()),B(this,Tr,null);for(const e of C(this,yi).values()){let n=e.time;n<0&&(n=0),e.time=p2(),setTimeout(e.func,n)}}}}Ar=new WeakMap,gl=new WeakMap,Tr=new WeakMap,yp=new WeakMap,Ws=new WeakMap,dd=new WeakMap,yl=new WeakMap,zo=new WeakMap,By=new WeakMap,yi=new WeakMap,wp=new WeakMap,bp=new WeakMap,at=new WeakSet,Bs=async function(e){const n=C(this,bp).cacheTimeout;if(n<0)return await this._perform(e);const r=ex(e.method,e);let s=C(this,yl).get(r);return s||(s=this._perform(e),C(this,yl).set(r,s),setTimeout(()=>{C(this,yl).get(r)===s&&C(this,yl).delete(r)},n)),await s},qC=async function(e,n,r){ee(r<vK,"CCIP read exceeded maximum redirections","OFFCHAIN_FAULT",{reason:"TOO_MANY_REDIRECTS",transaction:Object.assign({},e,{blockTag:n,enableCcipRead:!0})});const s=cv(e);try{return we(await this._perform({method:"call",transaction:s,blockTag:n}))}catch(i){if(!this.disableCcipRead&&C6(i)&&i.data&&r>=0&&n==="latest"&&s.to!=null&&fn(i.data,0,4)==="0x556f1830"){const a=i.data,o=await Gr(s.to,this);let l;try{l=_K(fn(i.data,4))}catch(h){ee(!1,h.message,"OFFCHAIN_FAULT",{reason:"BAD_DATA",transaction:s,info:{data:a}})}ee(l.sender.toLowerCase()===o.toLowerCase(),"CCIP Read sender mismatch","CALL_EXCEPTION",{action:"call",data:a,reason:"OffchainLookup",transaction:s,invocation:null,revert:{signature:"OffchainLookup(address,string[],bytes,bytes4,bytes)",name:"OffchainLookup",args:l.errorArgs}});const u=await this.ccipReadFetch(s,l.calldata,l.urls);ee(u!=null,"CCIP Read failed to fetch data","OFFCHAIN_FAULT",{reason:"FETCH_FAILED",transaction:s,info:{data:i.data,errorArgs:l.errorArgs}});const d={to:o,data:gn([l.selector,kK([u,l.extraData])])};this.emit("debug",{action:"sendCcipReadCall",transaction:d});try{const h=await ie(this,at,qC).call(this,d,n,r+1);return this.emit("debug",{action:"receiveCcipReadCallResult",transaction:Object.assign({},d),result:h}),h}catch(h){throw this.emit("debug",{action:"receiveCcipReadCallError",transaction:Object.assign({},d),error:h}),h}}throw i}},KC=async function(e){const{value:n}=await zr({network:this.getNetwork(),value:e});return n},gg=async function(e,n,r){let s=this._getAddress(n),i=this._getBlockTag(r);return(typeof s!="string"||typeof i!="string")&&([s,i]=await Promise.all([s,i])),await ie(this,at,KC).call(this,ie(this,at,Bs).call(this,Object.assign(e,{address:s,blockTag:i})))},GC=async function(e,n){if(qt(e,32))return await ie(this,at,Bs).call(this,{method:"getBlock",blockHash:e,includeTransactions:n});let r=this._getBlockTag(e);return typeof r!="string"&&(r=await r),await ie(this,at,Bs).call(this,{method:"getBlock",blockTag:r,includeTransactions:n})},yg=async function(e,n){let r=await f2(e,this);return r.type==="event"&&n&&n.length>0&&n[0].removed===!0&&(r=await f2({orphan:"drop-log",log:n[0]},this)),C(this,Ar).get(r.tag)||null},tx=async function(e){const n=await f2(e,this),r=n.tag;let s=C(this,Ar).get(r);return s||(s={subscriber:this._getSubscriber(n),tag:r,addressableMap:new WeakMap,nameMap:new Map,started:!1,listeners:[]},C(this,Ar).set(r,s)),s};function AK(t,e){try{const n=YC(t,e);if(n)return Zx(n)}catch{}return null}function YC(t,e){if(t==="0x")return null;try{const n=Xe(fn(t,e,e+32)),r=Xe(fn(t,n,n+32));return fn(t,n+32,n+32+r)}catch{}return null}function L_(t){const e=Un(t);if(e.length>32)throw new Error("internal; should not happen");const n=new Uint8Array(32);return n.set(e,32-e.length),n}function TK(t){if(t.length%32===0)return t;const e=new Uint8Array(Math.ceil(t.length/32)*32);return e.set(t),e}const SK=new Uint8Array([]);function kK(t){const e=[];let n=0;for(let r=0;r<t.length;r++)e.push(SK),n+=32;for(let r=0;r<t.length;r++){const s=it(t[r]);e[r]=L_(n),e.push(L_(s.length)),e.push(TK(s)),n+=32+Math.ceil(s.length/32)*32}return gn(e)}const B_="0x0000000000000000000000000000000000000000000000000000000000000000";function _K(t){const e={sender:"",urls:[],calldata:"",selector:"",extraData:"",errorArgs:[]};ee(Tf(t)>=5*32,"insufficient OffchainLookup data","OFFCHAIN_FAULT",{reason:"insufficient OffchainLookup data"});const n=fn(t,0,32);ee(fn(n,0,12)===fn(B_,0,12),"corrupt OffchainLookup sender","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup sender"}),e.sender=fn(n,12);try{const r=[],s=Xe(fn(t,32,64)),i=Xe(fn(t,s,s+32)),a=fn(t,s+32);for(let o=0;o<i;o++){const l=AK(a,o*32);if(l==null)throw new Error("abort");r.push(l)}e.urls=r}catch{ee(!1,"corrupt OffchainLookup urls","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup urls"})}try{const r=YC(t,64);if(r==null)throw new Error("abort");e.calldata=r}catch{ee(!1,"corrupt OffchainLookup calldata","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup calldata"})}ee(fn(t,100,128)===fn(B_,0,28),"corrupt OffchainLookup callbaackSelector","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup callbaackSelector"}),e.selector=fn(t,96,100);try{const r=YC(t,128);if(r==null)throw new Error("abort");e.extraData=r}catch{ee(!1,"corrupt OffchainLookup extraData","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup extraData"})}return e.errorArgs="sender,urls,calldata,selector,extraData".split(/,/).map(r=>e[r]),e}function ou(t,e){if(t.provider)return t.provider;ee(!1,"missing provider","UNSUPPORTED_OPERATION",{operation:e})}async function $_(t,e){let n=cv(e);if(n.to!=null&&(n.to=Gr(n.to,t)),n.from!=null){const r=n.from;n.from=Promise.all([t.getAddress(),Gr(r,t)]).then(([s,i])=>(H(s.toLowerCase()===i.toLowerCase(),"transaction from mismatch","tx.from",i),s))}else n.from=t.getAddress();return await zr(n)}class IK{constructor(e){W(this,"provider");Fe(this,{provider:e||null})}async getNonce(e){return ou(this,"getTransactionCount").getTransactionCount(await this.getAddress(),e)}async populateCall(e){return await $_(this,e)}async populateTransaction(e){const n=ou(this,"populateTransaction"),r=await $_(this,e);r.nonce==null&&(r.nonce=await this.getNonce("pending")),r.gasLimit==null&&(r.gasLimit=await this.estimateGas(r));const s=await this.provider.getNetwork();if(r.chainId!=null){const a=Ie(r.chainId);H(a===s.chainId,"transaction chainId mismatch","tx.chainId",e.chainId)}else r.chainId=s.chainId;const i=r.maxFeePerGas!=null||r.maxPriorityFeePerGas!=null;if(r.gasPrice!=null&&(r.type===2||i)?H(!1,"eip-1559 transaction do not support gasPrice","tx",e):(r.type===0||r.type===1)&&i&&H(!1,"pre-eip-1559 transaction do not support maxFeePerGas/maxPriorityFeePerGas","tx",e),(r.type===2||r.type==null)&&r.maxFeePerGas!=null&&r.maxPriorityFeePerGas!=null)r.type=2;else if(r.type===0||r.type===1){const a=await n.getFeeData();ee(a.gasPrice!=null,"network does not support gasPrice","UNSUPPORTED_OPERATION",{operation:"getGasPrice"}),r.gasPrice==null&&(r.gasPrice=a.gasPrice)}else{const a=await n.getFeeData();if(r.type==null)if(a.maxFeePerGas!=null&&a.maxPriorityFeePerGas!=null)if(r.authorizationList&&r.authorizationList.length?r.type=4:r.type=2,r.gasPrice!=null){const o=r.gasPrice;delete r.gasPrice,r.maxFeePerGas=o,r.maxPriorityFeePerGas=o}else r.maxFeePerGas==null&&(r.maxFeePerGas=a.maxFeePerGas),r.maxPriorityFeePerGas==null&&(r.maxPriorityFeePerGas=a.maxPriorityFeePerGas);else a.gasPrice!=null?(ee(!i,"network does not support EIP-1559","UNSUPPORTED_OPERATION",{operation:"populateTransaction"}),r.gasPrice==null&&(r.gasPrice=a.gasPrice),r.type=0):ee(!1,"failed to get consistent fee data","UNSUPPORTED_OPERATION",{operation:"signer.getFeeData"});else(r.type===2||r.type===3||r.type===4)&&(r.maxFeePerGas==null&&(r.maxFeePerGas=a.maxFeePerGas),r.maxPriorityFeePerGas==null&&(r.maxPriorityFeePerGas=a.maxPriorityFeePerGas))}return await zr(r)}async populateAuthorization(e){const n=Object.assign({},e);return n.chainId==null&&(n.chainId=(await ou(this,"getNetwork").getNetwork()).chainId),n.nonce==null&&(n.nonce=await this.getNonce()),n}async estimateGas(e){return ou(this,"estimateGas").estimateGas(await this.populateCall(e))}async call(e){return ou(this,"call").call(await this.populateCall(e))}async resolveName(e){return await ou(this,"resolveName").resolveName(e)}async sendTransaction(e){const n=ou(this,"sendTransaction"),r=await this.populateTransaction(e);delete r.from;const s=tv.from(r);return await n.broadcastTransaction(await this.signTransaction(s))}authorize(e){ee(!1,"authorization not implemented for this signer","UNSUPPORTED_OPERATION",{operation:"authorize"})}}function PK(t){return JSON.parse(JSON.stringify(t))}var Fr,Ha,hd,wl,fd,xp,Zl,QC,JC;class ED{constructor(e){K(this,Zl);K(this,Fr);K(this,Ha);K(this,hd);K(this,wl);K(this,fd);K(this,xp);B(this,Fr,e),B(this,Ha,null),B(this,hd,ie(this,Zl,QC).bind(this)),B(this,wl,!1),B(this,fd,null),B(this,xp,!1)}_subscribe(e){throw new Error("subclasses must override this")}_emitResults(e,n){throw new Error("subclasses must override this")}_recover(e){throw new Error("subclasses must override this")}start(){C(this,wl)||(B(this,wl,!0),ie(this,Zl,QC).call(this,-2))}stop(){C(this,wl)&&(B(this,wl,!1),B(this,xp,!0),ie(this,Zl,JC).call(this),C(this,Fr).off("block",C(this,hd)))}pause(e){e&&ie(this,Zl,JC).call(this),C(this,Fr).off("block",C(this,hd))}resume(){this.start()}}Fr=new WeakMap,Ha=new WeakMap,hd=new WeakMap,wl=new WeakMap,fd=new WeakMap,xp=new WeakMap,Zl=new WeakSet,QC=async function(e){try{C(this,Ha)==null&&B(this,Ha,this._subscribe(C(this,Fr)));let n=null;try{n=await C(this,Ha)}catch(i){if(!or(i,"UNSUPPORTED_OPERATION")||i.operation!=="eth_newFilter")throw i}if(n==null){B(this,Ha,null),C(this,Fr)._recoverSubscriber(this,this._recover(C(this,Fr)));return}const r=await C(this,Fr).getNetwork();if(C(this,fd)||B(this,fd,r),C(this,fd).chainId!==r.chainId)throw new Error("chaid changed");if(C(this,xp))return;const s=await C(this,Fr).send("eth_getFilterChanges",[n]);await this._emitResults(C(this,Fr),s)}catch(n){console.log("@TODO",n)}C(this,Fr).once("block",C(this,hd))},JC=function(){const e=C(this,Ha);e&&(B(this,Ha,null),e.then(n=>{C(this,Fr).destroyed||C(this,Fr).send("eth_uninstallFilter",[n])}))};var pd;class RK extends ED{constructor(n,r){super(n);K(this,pd);B(this,pd,PK(r))}_recover(n){return new F6(n,C(this,pd))}async _subscribe(n){return await n.send("eth_newFilter",[C(this,pd)])}async _emitResults(n,r){for(const s of r)n.emit(C(this,pd),n._wrapLog(s,n._network))}}pd=new WeakMap;class jK extends ED{async _subscribe(e){return await e.send("eth_newPendingTransactionFilter",[])}async _emitResults(e,n){for(const r of n)e.emit("pending",r)}}const OK="bigint,boolean,function,number,string,symbol".split(/,/g);function nx(t){if(t==null||OK.indexOf(typeof t)>=0||typeof t.getAddress=="function")return t;if(Array.isArray(t))return t.map(nx);if(typeof t=="object")return Object.keys(t).reduce((e,n)=>(e[n]=t[n],e),{});throw new Error(`should not happen: ${t} (${typeof t})`)}function DK(t){return new Promise(e=>{setTimeout(e,t)})}function xh(t){return t&&t.toLowerCase()}function F_(t){return t&&typeof t.pollingInterval=="number"}const ND={polling:!1,staticNetwork:null,batchStallTime:10,batchMaxSize:1<<20,batchMaxCount:100,cacheTimeout:250,pollingInterval:4e3};class If extends IK{constructor(n,r){super(n);W(this,"address");r=Pt(r),Fe(this,{address:r})}connect(n){ee(!1,"cannot reconnect JsonRpcSigner","UNSUPPORTED_OPERATION",{operation:"signer.connect"})}async getAddress(){return this.address}async populateTransaction(n){return await this.populateCall(n)}async sendUncheckedTransaction(n){const r=nx(n),s=[];if(r.from){const a=r.from;s.push((async()=>{const o=await Gr(a,this.provider);H(o!=null&&o.toLowerCase()===this.address.toLowerCase(),"from address mismatch","transaction",n),r.from=o})())}else r.from=this.address;if(r.gasLimit==null&&s.push((async()=>{r.gasLimit=await this.provider.estimateGas({...r,from:this.address})})()),r.to!=null){const a=r.to;s.push((async()=>{r.to=await Gr(a,this.provider)})())}s.length&&await Promise.all(s);const i=this.provider.getRpcTransaction(r);return this.provider.send("eth_sendTransaction",[i])}async sendTransaction(n){const r=await this.provider.getBlockNumber(),s=await this.sendUncheckedTransaction(n);return await new Promise((i,a)=>{const o=[1e3,100];let l=0;const u=async()=>{try{const d=await this.provider.getTransaction(s);if(d!=null){i(d.replaceableTransaction(r));return}}catch(d){if(or(d,"CANCELLED")||or(d,"BAD_DATA")||or(d,"NETWORK_ERROR")||or(d,"UNSUPPORTED_OPERATION")){d.info==null&&(d.info={}),d.info.sendTransactionHash=s,a(d);return}if(or(d,"INVALID_ARGUMENT")&&(l++,d.info==null&&(d.info={}),d.info.sendTransactionHash=s,l>10)){a(d);return}this.provider.emit("error",nn("failed to fetch transation after sending (will try again)","UNKNOWN_ERROR",{error:d}))}this.provider._setTimeout(()=>{u()},o.pop()||4e3)};u()})}async signTransaction(n){const r=nx(n);if(r.from){const i=await Gr(r.from,this.provider);H(i!=null&&i.toLowerCase()===this.address.toLowerCase(),"from address mismatch","transaction",n),r.from=i}else r.from=this.address;const s=this.provider.getRpcTransaction(r);return await this.provider.send("eth_signTransaction",[s])}async signMessage(n){const r=typeof n=="string"?la(n):n;return await this.provider.send("personal_sign",[we(r),this.address.toLowerCase()])}async signTypedData(n,r,s){const i=nx(s),a=await ov.resolveNames(n,r,i,async o=>{const l=await Gr(o);return H(l!=null,"TypedData does not support null address","value",o),l});return await this.provider.send("eth_signTypedData_v4",[this.address.toLowerCase(),JSON.stringify(ov.getPayload(a.domain,r,a.value))])}async unlock(n){return this.provider.send("personal_unlockAccount",[this.address.toLowerCase(),n,null])}async _legacySignMessage(n){const r=typeof n=="string"?la(n):n;return await this.provider.send("eth_sign",[this.address.toLowerCase(),we(r)])}}var md,vp,Wo,Va,Zi,wi,ys,$y,ZC;class UK extends CK{constructor(n,r){super(n,r);K(this,$y);K(this,md);K(this,vp);K(this,Wo);K(this,Va);K(this,Zi);K(this,wi);K(this,ys);B(this,vp,1),B(this,md,Object.assign({},ND,r||{})),B(this,Wo,[]),B(this,Va,null),B(this,wi,null),B(this,ys,null);{let i=null;const a=new Promise(o=>{i=o});B(this,Zi,{promise:a,resolve:i})}const s=this._getOption("staticNetwork");typeof s=="boolean"?(H(!s||n!=="any","staticNetwork cannot be used on special network 'any'","options",r),s&&n!=null&&B(this,wi,Qa.from(n))):s&&(H(n==null||s.matches(n),"staticNetwork MUST match network object","options",r),B(this,wi,s))}_getOption(n){return C(this,md)[n]}get _network(){return ee(C(this,wi),"network is not available yet","NETWORK_ERROR"),C(this,wi)}async _perform(n){if(n.method==="call"||n.method==="estimateGas"){let s=n.transaction;if(s&&s.type!=null&&Ie(s.type)&&s.maxFeePerGas==null&&s.maxPriorityFeePerGas==null){const i=await this.getFeeData();i.maxFeePerGas==null&&i.maxPriorityFeePerGas==null&&(n=Object.assign({},n,{transaction:Object.assign({},s,{type:void 0})}))}}const r=this.getRpcRequest(n);return r!=null?await this.send(r.method,r.args):super._perform(n)}async _detectNetwork(){const n=this._getOption("staticNetwork");if(n)if(n===!0){if(C(this,wi))return C(this,wi)}else return n;return C(this,ys)?await C(this,ys):this.ready?(B(this,ys,(async()=>{try{const r=Qa.from(Ie(await this.send("eth_chainId",[])));return B(this,ys,null),r}catch(r){throw B(this,ys,null),r}})()),await C(this,ys)):(B(this,ys,(async()=>{const r={id:Cm(this,vp)._++,method:"eth_chainId",params:[],jsonrpc:"2.0"};this.emit("debug",{action:"sendRpcPayload",payload:r});let s;try{s=(await this._send(r))[0],B(this,ys,null)}catch(i){throw B(this,ys,null),this.emit("debug",{action:"receiveRpcError",error:i}),i}if(this.emit("debug",{action:"receiveRpcResult",result:s}),"result"in s)return Qa.from(Ie(s.result));throw this.getRpcError(r,s)})()),await C(this,ys))}_start(){C(this,Zi)==null||C(this,Zi).resolve==null||(C(this,Zi).resolve(),B(this,Zi,null),(async()=>{for(;C(this,wi)==null&&!this.destroyed;)try{B(this,wi,await this._detectNetwork())}catch(n){if(this.destroyed)break;console.log("JsonRpcProvider failed to detect network and cannot start up; retry in 1s (perhaps the URL is wrong or the node is not started)"),this.emit("error",nn("failed to bootstrap network detection","NETWORK_ERROR",{event:"initial-network-discovery",info:{error:n}})),await DK(1e3)}ie(this,$y,ZC).call(this)})())}async _waitUntilReady(){if(C(this,Zi)!=null)return await C(this,Zi).promise}_getSubscriber(n){return n.type==="pending"?new jK(this):n.type==="event"?this._getOption("polling")?new F6(this,n.filter):new RK(this,n.filter):n.type==="orphan"&&n.filter.orphan==="drop-log"?new vD("orphan"):super._getSubscriber(n)}get ready(){return C(this,Zi)==null}getRpcTransaction(n){const r={};return["chainId","gasLimit","gasPrice","type","maxFeePerGas","maxPriorityFeePerGas","nonce","value"].forEach(s=>{if(n[s]==null)return;let i=s;s==="gasLimit"&&(i="gas"),r[i]=ta(Ie(n[s],`tx.${s}`))}),["from","to","data"].forEach(s=>{n[s]!=null&&(r[s]=we(n[s]))}),n.accessList&&(r.accessList=sh(n.accessList)),n.blobVersionedHashes&&(r.blobVersionedHashes=n.blobVersionedHashes.map(s=>s.toLowerCase())),n.authorizationList&&(r.authorizationList=n.authorizationList.map(s=>{const i=A8(s);return{address:i.address,nonce:ta(i.nonce),chainId:ta(i.chainId),yParity:ta(i.signature.yParity),r:ta(i.signature.r),s:ta(i.signature.s)}})),r}getRpcRequest(n){switch(n.method){case"chainId":return{method:"eth_chainId",args:[]};case"getBlockNumber":return{method:"eth_blockNumber",args:[]};case"getGasPrice":return{method:"eth_gasPrice",args:[]};case"getPriorityFee":return{method:"eth_maxPriorityFeePerGas",args:[]};case"getBalance":return{method:"eth_getBalance",args:[xh(n.address),n.blockTag]};case"getTransactionCount":return{method:"eth_getTransactionCount",args:[xh(n.address),n.blockTag]};case"getCode":return{method:"eth_getCode",args:[xh(n.address),n.blockTag]};case"getStorage":return{method:"eth_getStorageAt",args:[xh(n.address),"0x"+n.position.toString(16),n.blockTag]};case"broadcastTransaction":return{method:"eth_sendRawTransaction",args:[n.signedTransaction]};case"getBlock":if("blockTag"in n)return{method:"eth_getBlockByNumber",args:[n.blockTag,!!n.includeTransactions]};if("blockHash"in n)return{method:"eth_getBlockByHash",args:[n.blockHash,!!n.includeTransactions]};break;case"getTransaction":return{method:"eth_getTransactionByHash",args:[n.hash]};case"getTransactionReceipt":return{method:"eth_getTransactionReceipt",args:[n.hash]};case"call":return{method:"eth_call",args:[this.getRpcTransaction(n.transaction),n.blockTag]};case"estimateGas":return{method:"eth_estimateGas",args:[this.getRpcTransaction(n.transaction)]};case"getLogs":return n.filter&&n.filter.address!=null&&(Array.isArray(n.filter.address)?n.filter.address=n.filter.address.map(xh):n.filter.address=xh(n.filter.address)),{method:"eth_getLogs",args:[n.filter]}}return null}getRpcError(n,r){const{method:s}=n,{error:i}=r;if(s==="eth_estimateGas"&&i.message){const l=i.message;if(!l.match(/revert/i)&&l.match(/insufficient funds/i))return nn("insufficient funds","INSUFFICIENT_FUNDS",{transaction:n.params[0],info:{payload:n,error:i}});if(l.match(/nonce/i)&&l.match(/too low/i))return nn("nonce has already been used","NONCE_EXPIRED",{transaction:n.params[0],info:{payload:n,error:i}})}if(s==="eth_call"||s==="eth_estimateGas"){const l=XC(i),u=j0.getBuiltinCallException(s==="eth_call"?"call":"estimateGas",n.params[0],l?l.data:null);return u.info={error:i,payload:n},u}const a=JSON.stringify(MK(i));if(typeof i.message=="string"&&i.message.match(/user denied|ethers-user-denied/i))return nn("user rejected action","ACTION_REJECTED",{action:{eth_sign:"signMessage",personal_sign:"signMessage",eth_signTypedData_v4:"signTypedData",eth_signTransaction:"signTransaction",eth_sendTransaction:"sendTransaction",eth_requestAccounts:"requestAccess",wallet_requestAccounts:"requestAccess"}[s]||"unknown",reason:"rejected",info:{payload:n,error:i}});if(s==="eth_sendRawTransaction"||s==="eth_sendTransaction"){const l=n.params[0];if(a.match(/insufficient funds|base fee exceeds gas limit/i))return nn("insufficient funds for intrinsic transaction cost","INSUFFICIENT_FUNDS",{transaction:l,info:{error:i}});if(a.match(/nonce/i)&&a.match(/too low/i))return nn("nonce has already been used","NONCE_EXPIRED",{transaction:l,info:{error:i}});if(a.match(/replacement transaction/i)&&a.match(/underpriced/i))return nn("replacement fee too low","REPLACEMENT_UNDERPRICED",{transaction:l,info:{error:i}});if(a.match(/only replay-protected/i))return nn("legacy pre-eip-155 transactions not supported","UNSUPPORTED_OPERATION",{operation:s,info:{transaction:l,info:{error:i}}})}let o=!!a.match(/the method .* does not exist/i);return o||i&&i.details&&i.details.startsWith("Unauthorized method:")&&(o=!0),o?nn("unsupported operation","UNSUPPORTED_OPERATION",{operation:n.method,info:{error:i,payload:n}}):nn("could not coalesce error","UNKNOWN_ERROR",{error:i,payload:n})}send(n,r){if(this.destroyed)return Promise.reject(nn("provider destroyed; cancelled request","UNSUPPORTED_OPERATION",{operation:n}));const s=Cm(this,vp)._++,i=new Promise((a,o)=>{C(this,Wo).push({resolve:a,reject:o,payload:{method:n,params:r,id:s,jsonrpc:"2.0"}})});return ie(this,$y,ZC).call(this),i}async getSigner(n){n==null&&(n=0);const r=this.send("eth_accounts",[]);if(typeof n=="number"){const i=await r;if(n>=i.length)throw new Error("no such account");return new If(this,i[n])}const{accounts:s}=await zr({network:this.getNetwork(),accounts:r});n=Pt(n);for(const i of s)if(Pt(i)===n)return new If(this,n);throw new Error("invalid account")}async listAccounts(){return(await this.send("eth_accounts",[])).map(r=>new If(this,r))}destroy(){C(this,Va)&&(clearTimeout(C(this,Va)),B(this,Va,null));for(const{payload:n,reject:r}of C(this,Wo))r(nn("provider destroyed; cancelled request","UNSUPPORTED_OPERATION",{operation:n.method}));B(this,Wo,[]),super.destroy()}}md=new WeakMap,vp=new WeakMap,Wo=new WeakMap,Va=new WeakMap,Zi=new WeakMap,wi=new WeakMap,ys=new WeakMap,$y=new WeakSet,ZC=function(){if(C(this,Va))return;const n=this._getOption("batchMaxCount")===1?0:this._getOption("batchStallTime");B(this,Va,setTimeout(()=>{B(this,Va,null);const r=C(this,Wo);for(B(this,Wo,[]);r.length;){const s=[r.shift()];for(;r.length&&s.length!==C(this,md).batchMaxCount;)if(s.push(r.shift()),JSON.stringify(s.map(a=>a.payload)).length>C(this,md).batchMaxSize){r.unshift(s.pop());break}(async()=>{const i=s.length===1?s[0].payload:s.map(a=>a.payload);this.emit("debug",{action:"sendRpcPayload",payload:i});try{const a=await this._send(i);this.emit("debug",{action:"receiveRpcResult",result:a});for(const{resolve:o,reject:l,payload:u}of s){if(this.destroyed){l(nn("provider destroyed; cancelled request","UNSUPPORTED_OPERATION",{operation:u.method}));continue}const d=a.filter(h=>h.id===u.id)[0];if(d==null){const h=nn("missing response for request","BAD_DATA",{value:a,info:{payload:u}});this.emit("error",h),l(h);continue}if("error"in d){l(this.getRpcError(u,d));continue}o(d.result)}}catch(a){this.emit("debug",{action:"receiveRpcError",error:a});for(const{reject:o}of s)o(a)}})()}},n))};var bl;class CD extends UK{constructor(n,r){super(n,r);K(this,bl);let s=this._getOption("pollingInterval");s==null&&(s=ND.pollingInterval),B(this,bl,s)}_getSubscriber(n){const r=super._getSubscriber(n);return F_(r)&&(r.pollingInterval=C(this,bl)),r}get pollingInterval(){return C(this,bl)}set pollingInterval(n){if(!Number.isInteger(n)||n<0)throw new Error("invalid interval");B(this,bl,n),this._forEachSubscriber(r=>{F_(r)&&(r.pollingInterval=C(this,bl))})}}bl=new WeakMap;var Ep;class AD extends CD{constructor(n,r,s){n==null&&(n="http://localhost:8545");super(r,s);K(this,Ep);typeof n=="string"?B(this,Ep,new lc(n)):B(this,Ep,n.clone())}_getConnection(){return C(this,Ep).clone()}async send(n,r){return await this._start(),await super.send(n,r)}async _send(n){const r=this._getConnection();r.body=JSON.stringify(n),r.setHeader("content-type","application/json");const s=await r.send();s.assertOk();let i=s.bodyJson;return Array.isArray(i)||(i=[i]),i}}Ep=new WeakMap;function XC(t){if(t==null)return null;if(typeof t.message=="string"&&t.message.match(/revert/i)&&qt(t.data))return{message:t.message,data:t.data};if(typeof t=="object"){for(const e in t){const n=XC(t[e]);if(n)return n}return null}if(typeof t=="string")try{return XC(JSON.parse(t))}catch{}return null}function eA(t,e){if(t!=null){if(typeof t.message=="string"&&e.push(t.message),typeof t=="object")for(const n in t)eA(t[n],e);if(typeof t=="string")try{return eA(JSON.parse(t),e)}catch{}}}function MK(t){const e=[];return eA(t,e),e}var Np,Cp;const Pu=class Pu extends CD{constructor(n,r,s){const i=Object.assign({},s??{},{batchMaxCount:1});H(n&&n.request,"invalid EIP-1193 provider","ethereum",n);super(r,i);K(this,Np);K(this,Cp);B(this,Cp,null),s&&s.providerInfo&&B(this,Cp,s.providerInfo),B(this,Np,async(a,o)=>{const l={method:a,params:o};this.emit("debug",{action:"sendEip1193Request",payload:l});try{const u=await n.request(l);return this.emit("debug",{action:"receiveEip1193Result",result:u}),u}catch(u){const d=new Error(u.message);throw d.code=u.code,d.data=u.data,d.payload=l,this.emit("debug",{action:"receiveEip1193Error",error:d}),d}})}get providerInfo(){return C(this,Cp)}async send(n,r){return await this._start(),await super.send(n,r)}async _send(n){H(!Array.isArray(n),"EIP-1193 does not support batch request","payload",n);try{const r=await C(this,Np).call(this,n.method,n.params||[]);return[{id:n.id,result:r}]}catch(r){return[{id:n.id,error:{code:r.code,data:r.data,message:r.message}}]}}getRpcError(n,r){switch(r=JSON.parse(JSON.stringify(r)),r.error.code||-1){case 4001:r.error.message=`ethers-user-denied: ${r.error.message}`;break;case 4200:r.error.message=`ethers-unsupported: ${r.error.message}`;break}return super.getRpcError(n,r)}async hasSigner(n){n==null&&(n=0);const r=await this.send("eth_accounts",[]);return typeof n=="number"?r.length>n:(n=n.toLowerCase(),r.filter(s=>s.toLowerCase()===n).length!==0)}async getSigner(n){if(n==null&&(n=0),!await this.hasSigner(n))try{await C(this,Np).call(this,"eth_requestAccounts",[])}catch(r){const s=r.payload;throw this.getRpcError(s,{id:s.id,error:r})}return await super.getSigner(n)}static async discover(n){if(n==null&&(n={}),n.provider)return new Pu(n.provider);const r=n.window?n.window:typeof window<"u"?window:null;if(r==null)return null;const s=n.anyProvider;if(s&&r.ethereum)return new Pu(r.ethereum);if(!("addEventListener"in r&&"dispatchEvent"in r&&"removeEventListener"in r))return null;const i=n.timeout?n.timeout:300;return i===0?null:await new Promise((a,o)=>{let l=[];const u=f=>{l.push(f.detail),s&&d()},d=()=>{if(clearTimeout(h),l.length)if(n&&n.filter){const f=n.filter(l.map(p=>Object.assign({},p.info)));if(f==null)a(null);else if(f instanceof Pu)a(f);else{let p=null;if(f.uuid&&(p=l.filter(m=>f.uuid===m.info.uuid)[0]),p){const{provider:g,info:m}=p;a(new Pu(g,void 0,{providerInfo:m}))}else o(nn("filter returned unknown info","UNSUPPORTED_OPERATION",{value:f}))}}else{const{provider:f,info:p}=l[0];a(new Pu(f,void 0,{providerInfo:p}))}else a(null);r.removeEventListener("eip6963:announceProvider",u)},h=setTimeout(()=>{d()},i);r.addEventListener("eip6963:announceProvider",u),r.dispatchEvent(new Event("eip6963:requestProvider"))})}};Np=new WeakMap,Cp=new WeakMap;let xd=Pu;const LK=Symbol(),H6=Symbol(),Um="a",Fg="w";let BK=(t,e)=>new Proxy(t,e);const tA=Object.getPrototypeOf,nA=new WeakMap,TD=t=>t&&(nA.has(t)?nA.get(t):tA(t)===Object.prototype||tA(t)===Array.prototype),dv=t=>typeof t=="object"&&t!==null,$K=t=>{if(Array.isArray(t))return Array.from(t);const e=Object.getOwnPropertyDescriptors(t);return Object.values(e).forEach(n=>{n.configurable=!0}),Object.create(tA(t),e)},V6=t=>t[H6]||t,SD=(t,e,n,r)=>{if(!TD(t))return t;let s=r&&r.get(t);if(!s){const l=V6(t);s=(u=>Object.values(Object.getOwnPropertyDescriptors(u)).some(d=>!d.configurable&&!d.writable))(l)?[l,$K(l)]:[l],r==null||r.set(t,s)}const[i,a]=s;let o=n&&n.get(i);return o&&o[1].f===!!a||(o=((l,u)=>{const d={f:u};let h=!1;const f=(g,m)=>{if(!h){let y=d[Um].get(l);if(y||(y={},d[Um].set(l,y)),g===Fg)y[Fg]=!0;else{let b=y[g];b||(b=new Set,y[g]=b),b.add(m)}}},p={get:(g,m)=>m===H6?l:(f("k",m),SD(Reflect.get(g,m),d[Um],d.c,d.t)),has:(g,m)=>m===LK?(h=!0,d[Um].delete(l),!0):(f("h",m),Reflect.has(g,m)),getOwnPropertyDescriptor:(g,m)=>(f("o",m),Reflect.getOwnPropertyDescriptor(g,m)),ownKeys:g=>(f(Fg),Reflect.ownKeys(g))};return u&&(p.set=p.deleteProperty=()=>!1),[p,d]})(i,!!a),o[1].p=BK(a||i,o[0]),n&&n.set(i,o)),o[1][Um]=e,o[1].c=n,o[1].t=r,o[1].p},kD=(t,e,n,r,s=Object.is)=>{if(s(t,e))return!1;if(!dv(t)||!dv(e))return!0;const i=n.get(V6(t));if(!i)return!0;if(r){const o=r.get(t);if(o&&o.n===e)return o.g;r.set(t,{n:e,g:!1})}let a=null;try{for(const o of i.h||[])if(a=Reflect.has(t,o)!==Reflect.has(e,o),a)return a;if(i[Fg]===!0){if(a=((o,l)=>{const u=Reflect.ownKeys(o),d=Reflect.ownKeys(l);return u.length!==d.length||u.some((h,f)=>h!==d[f])})(t,e),a)return a}else for(const o of i.o||[])if(a=!!Reflect.getOwnPropertyDescriptor(t,o)!=!!Reflect.getOwnPropertyDescriptor(e,o),a)return a;for(const o of i.k||[])if(a=kD(t[o],e[o],n,r,s),a)return a;return a===null&&(a=!0),a}finally{r&&r.set(t,{n:e,g:a})}},FK=t=>TD(t)&&t[H6]||null,H_=(t,e=!0)=>{nA.set(t,e)},HK=(t,e,n)=>{const r=[],s=new WeakSet,i=(a,o)=>{if(s.has(a))return;dv(a)&&s.add(a);const l=dv(a)&&e.get(V6(a));if(l){var u,d;if((u=l.h)==null||u.forEach(f=>{const p=`:has(${String(f)})`;r.push(o?[...o,p]:[p])}),l[Fg]===!0){const f=":ownKeys";r.push(o?[...o,f]:[f])}else{var h;(h=l.o)==null||h.forEach(f=>{const p=`:hasOwn(${String(f)})`;r.push(o?[...o,p]:[p])})}(d=l.k)==null||d.forEach(f=>{!("value"in(Object.getOwnPropertyDescriptor(a,f)||{}))||i(a[f],o?[...o,f]:[f])})}else o&&r.push(o)};return i(t),r},hv={},m2=t=>typeof t=="object"&&t!==null,zc=new WeakMap,wg=new WeakSet,VK=(t=Object.is,e=(u,d)=>new Proxy(u,d),n=u=>m2(u)&&!wg.has(u)&&(Array.isArray(u)||!(Symbol.iterator in u))&&!(u instanceof WeakMap)&&!(u instanceof WeakSet)&&!(u instanceof Error)&&!(u instanceof Number)&&!(u instanceof Date)&&!(u instanceof String)&&!(u instanceof RegExp)&&!(u instanceof ArrayBuffer),r=u=>{switch(u.status){case"fulfilled":return u.value;case"rejected":throw u.reason;default:throw u}},s=new WeakMap,i=(u,d,h=r)=>{const f=s.get(u);if((f==null?void 0:f[0])===d)return f[1];const p=Array.isArray(u)?[]:Object.create(Object.getPrototypeOf(u));return H_(p,!0),s.set(u,[d,p]),Reflect.ownKeys(u).forEach(g=>{if(Object.getOwnPropertyDescriptor(p,g))return;const m=Reflect.get(u,g),{enumerable:y}=Reflect.getOwnPropertyDescriptor(u,g),b={value:m,enumerable:y,configurable:!0};if(wg.has(m))H_(m,!1);else if(m instanceof Promise)delete b.value,b.get=()=>h(m);else if(zc.has(m)){const[w,x]=zc.get(m);b.value=i(w,x(),h)}Object.defineProperty(p,g,b)}),Object.preventExtensions(p)},a=new WeakMap,o=[1,1],l=u=>{if(!m2(u))throw new Error("object required");const d=a.get(u);if(d)return d;let h=o[0];const f=new Set,p=(E,k=++o[0])=>{h!==k&&(h=k,f.forEach(R=>R(E,k)))};let g=o[1];const m=(E=++o[1])=>(g!==E&&!f.size&&(g=E,b.forEach(([k])=>{const R=k[1](E);R>h&&(h=R)})),h),y=E=>(k,R)=>{const O=[...k];O[1]=[E,...O[1]],p(O,R)},b=new Map,w=(E,k)=>{if((hv?"production":void 0)!=="production"&&b.has(E))throw new Error("prop listener already exists");if(f.size){const R=k[3](y(E));b.set(E,[k,R])}else b.set(E,[k])},x=E=>{var k;const R=b.get(E);R&&(b.delete(E),(k=R[1])==null||k.call(R))},A=E=>(f.add(E),f.size===1&&b.forEach(([R,O],F)=>{if((hv?"production":void 0)!=="production"&&O)throw new Error("remove already exists");const z=R[3](y(F));b.set(F,[R,z])}),()=>{f.delete(E),f.size===0&&b.forEach(([R,O],F)=>{O&&(O(),b.set(F,[R]))})}),T=Array.isArray(u)?[]:Object.create(Object.getPrototypeOf(u)),P=e(T,{deleteProperty(E,k){const R=Reflect.get(E,k);x(k);const O=Reflect.deleteProperty(E,k);return O&&p(["delete",[k],R]),O},set(E,k,R,O){const F=Reflect.has(E,k),z=Reflect.get(E,k,O);if(F&&(t(z,R)||a.has(R)&&t(z,a.get(R))))return!0;x(k),m2(R)&&(R=FK(R)||R);let N=R;if(R instanceof Promise)R.then(I=>{R.status="fulfilled",R.value=I,p(["resolve",[k],I])}).catch(I=>{R.status="rejected",R.reason=I,p(["reject",[k],I])});else{!zc.has(R)&&n(R)&&(N=l(R));const I=!wg.has(N)&&zc.get(N);I&&w(k,I)}return Reflect.set(E,k,N,O),p(["set",[k],R,z]),!0}});a.set(u,P);const S=[T,m,i,A];return zc.set(P,S),Reflect.ownKeys(u).forEach(E=>{const k=Object.getOwnPropertyDescriptor(u,E);"value"in k&&(P[E]=u[E],delete k.value,delete k.writable),Object.defineProperty(T,E,k)}),P})=>[l,zc,wg,t,e,n,r,s,i,a,o],[zK]=VK();function tn(t={}){return zK(t)}function Qn(t,e,n){const r=zc.get(t);(hv?"production":void 0)!=="production"&&!r&&console.warn("Please use proxy object");let s;const i=[],a=r[3];let o=!1;const u=a(d=>{i.push(d),s||(s=Promise.resolve().then(()=>{s=void 0,o&&e(i.splice(0))}))});return o=!0,()=>{o=!1,u()}}function Ld(t,e){const n=zc.get(t);(hv?"production":void 0)!=="production"&&!n&&console.warn("Please use proxy object");const[r,s,i]=n;return i(r,s(),e)}function Bd(t){return wg.add(t),t}function Dr(t,e,n,r){let s=t[e];return Qn(t,()=>{const i=t[e];Object.is(s,i)||n(s=i)})}function WK(t){const e=tn({data:Array.from([]),has(n){return this.data.some(r=>r[0]===n)},set(n,r){const s=this.data.find(i=>i[0]===n);return s?s[1]=r:this.data.push([n,r]),this},get(n){var r;return(r=this.data.find(s=>s[0]===n))==null?void 0:r[1]},delete(n){const r=this.data.findIndex(s=>s[0]===n);return r===-1?!1:(this.data.splice(r,1),!0)},clear(){this.data.splice(0)},get size(){return this.data.length},toJSON(){return new Map(this.data)},forEach(n){this.data.forEach(r=>{n(r[1],r[0],this)})},keys(){return this.data.map(n=>n[0]).values()},values(){return this.data.map(n=>n[1]).values()},entries(){return new Map(this.data).entries()},get[Symbol.toStringTag](){return"Map"},[Symbol.iterator](){return this.entries()}});return Object.defineProperties(e,{data:{enumerable:!1},size:{enumerable:!1},toJSON:{enumerable:!1}}),Object.seal(e),e}var V_={};const Y={WC_NAME_SUFFIX:".reown.id",WC_NAME_SUFFIX_LEGACY:".wcn.id",BLOCKCHAIN_API_RPC_URL:"https://rpc.walletconnect.org",PULSE_API_URL:"https://pulse.walletconnect.org",W3M_API_URL:"https://api.web3modal.org",CONNECTOR_ID:{WALLET_CONNECT:"walletConnect",INJECTED:"injected",WALLET_STANDARD:"announced",COINBASE:"coinbaseWallet",COINBASE_SDK:"coinbaseWalletSDK",SAFE:"safe",LEDGER:"ledger",OKX:"okx",EIP6963:"eip6963",AUTH:"ID_AUTH"},CONNECTOR_NAMES:{AUTH:"Auth"},AUTH_CONNECTOR_SUPPORTED_CHAINS:["eip155","solana"],LIMITS:{PENDING_TRANSACTIONS:99},CHAIN:{EVM:"eip155",SOLANA:"solana",POLKADOT:"polkadot",BITCOIN:"bip122"},CHAIN_NAME_MAP:{eip155:"EVM Networks",solana:"Solana",polkadot:"Polkadot",bip122:"Bitcoin",cosmos:"Cosmos"},ADAPTER_TYPES:{BITCOIN:"bitcoin",SOLANA:"solana",WAGMI:"wagmi",ETHERS:"ethers",ETHERS5:"ethers5"},USDT_CONTRACT_ADDRESSES:["0xdac17f958d2ee523a2206206994597c13d831ec7","0xc2132d05d31c914a87c6611c10748aeb04b58e8f","0x9702230a8ea53601f5cd2dc00fdbc13d4df4a8c7","0x919C1c267BC06a7039e03fcc2eF738525769109c","0x48065fbBE25f71C9282ddf5e1cD6D6A887483D5e","0x55d398326f99059fF775485246999027B3197955","0xfd086bc7cd5c481dcc9c85ebe478a1c0b69fcbb9"],HTTP_STATUS_CODES:{SERVER_ERROR:500,TOO_MANY_REQUESTS:429,SERVICE_UNAVAILABLE:503,FORBIDDEN:403},UNSUPPORTED_NETWORK_NAME:"Unknown Network",SECURE_SITE_SDK_ORIGIN:(typeof process<"u"&&typeof V_<"u"?V_.NEXT_PUBLIC_SECURE_SITE_ORIGIN:void 0)||"https://secure.walletconnect.org",REMOTE_FEATURES_ALERTS:{MULTI_WALLET_NOT_ENABLED:{DEFAULT:{shortMessage:"Multi-Wallet Not Enabled",longMessage:"Multi-wallet support is not enabled. Please enable it in your AppKit configuration at cloud.reown.com."},CONNECTIONS_HOOK:{shortMessage:"Multi-Wallet Not Enabled",longMessage:"Multi-wallet support is not enabled. Please enable it in your AppKit configuration at cloud.reown.com to use the useAppKitConnections hook."},CONNECTION_HOOK:{shortMessage:"Multi-Wallet Not Enabled",longMessage:"Multi-wallet support is not enabled. Please enable it in your AppKit configuration at cloud.reown.com to use the useAppKitConnection hook."}}}},_D={caipNetworkIdToNumber(t){return t?Number(t.split(":")[1]):void 0},parseEvmChainId(t){return typeof t=="string"?this.caipNetworkIdToNumber(t):t},getNetworksByNamespace(t,e){return(t==null?void 0:t.filter(n=>n.chainNamespace===e))||[]},getFirstNetworkByNamespace(t,e){return this.getNetworksByNamespace(t,e)[0]},getNetworkNameByCaipNetworkId(t,e){var s;if(!e)return;const n=t.find(i=>i.caipNetworkId===e);if(n)return n.name;const[r]=e.split(":");return((s=Y.CHAIN_NAME_MAP)==null?void 0:s[r])||void 0}};var qK=20,KK=1,$d=1e6,z_=1e6,GK=-7,YK=21,QK=!1,tw="[big.js] ",ah=tw+"Invalid ",U1=ah+"decimal places",JK=ah+"rounding mode",ID=tw+"Division by zero",Bt={},to=void 0,ZK=/^-?(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i;function PD(){function t(e){var n=this;if(!(n instanceof t))return e===to?PD():new t(e);if(e instanceof t)n.s=e.s,n.e=e.e,n.c=e.c.slice();else{if(typeof e!="string"){if(t.strict===!0&&typeof e!="bigint")throw TypeError(ah+"value");e=e===0&&1/e<0?"-0":String(e)}XK(n,e)}n.constructor=t}return t.prototype=Bt,t.DP=qK,t.RM=KK,t.NE=GK,t.PE=YK,t.strict=QK,t.roundDown=0,t.roundHalfUp=1,t.roundHalfEven=2,t.roundUp=3,t}function XK(t,e){var n,r,s;if(!ZK.test(e))throw Error(ah+"number");for(t.s=e.charAt(0)=="-"?(e=e.slice(1),-1):1,(n=e.indexOf("."))>-1&&(e=e.replace(".","")),(r=e.search(/e/i))>0?(n<0&&(n=r),n+=+e.slice(r+1),e=e.substring(0,r)):n<0&&(n=e.length),s=e.length,r=0;r<s&&e.charAt(r)=="0";)++r;if(r==s)t.c=[t.e=0];else{for(;s>0&&e.charAt(--s)=="0";);for(t.e=n-r-1,t.c=[],n=0;r<=s;)t.c[n++]=+e.charAt(r++)}return t}function oh(t,e,n,r){var s=t.c;if(n===to&&(n=t.constructor.RM),n!==0&&n!==1&&n!==2&&n!==3)throw Error(JK);if(e<1)r=n===3&&(r||!!s[0])||e===0&&(n===1&&s[0]>=5||n===2&&(s[0]>5||s[0]===5&&(r||s[1]!==to))),s.length=1,r?(t.e=t.e-e+1,s[0]=1):s[0]=t.e=0;else if(e<s.length){if(r=n===1&&s[e]>=5||n===2&&(s[e]>5||s[e]===5&&(r||s[e+1]!==to||s[e-1]&1))||n===3&&(r||!!s[0]),s.length=e,r){for(;++s[--e]>9;)if(s[e]=0,e===0){++t.e,s.unshift(1);break}}for(e=s.length;!s[--e];)s.pop()}return t}function ch(t,e,n){var r=t.e,s=t.c.join(""),i=s.length;if(e)s=s.charAt(0)+(i>1?"."+s.slice(1):"")+(r<0?"e":"e+")+r;else if(r<0){for(;++r;)s="0"+s;s="0."+s}else if(r>0)if(++r>i)for(r-=i;r--;)s+="0";else r<i&&(s=s.slice(0,r)+"."+s.slice(r));else i>1&&(s=s.charAt(0)+"."+s.slice(1));return t.s<0&&n?"-"+s:s}Bt.abs=function(){var t=new this.constructor(this);return t.s=1,t};Bt.cmp=function(t){var e,n=this,r=n.c,s=(t=new n.constructor(t)).c,i=n.s,a=t.s,o=n.e,l=t.e;if(!r[0]||!s[0])return r[0]?i:s[0]?-a:0;if(i!=a)return i;if(e=i<0,o!=l)return o>l^e?1:-1;for(a=(o=r.length)<(l=s.length)?o:l,i=-1;++i<a;)if(r[i]!=s[i])return r[i]>s[i]^e?1:-1;return o==l?0:o>l^e?1:-1};Bt.div=function(t){var e=this,n=e.constructor,r=e.c,s=(t=new n(t)).c,i=e.s==t.s?1:-1,a=n.DP;if(a!==~~a||a<0||a>$d)throw Error(U1);if(!s[0])throw Error(ID);if(!r[0])return t.s=i,t.c=[t.e=0],t;var o,l,u,d,h,f=s.slice(),p=o=s.length,g=r.length,m=r.slice(0,o),y=m.length,b=t,w=b.c=[],x=0,A=a+(b.e=e.e-t.e)+1;for(b.s=i,i=A<0?0:A,f.unshift(0);y++<o;)m.push(0);do{for(u=0;u<10;u++){if(o!=(y=m.length))d=o>y?1:-1;else for(h=-1,d=0;++h<o;)if(s[h]!=m[h]){d=s[h]>m[h]?1:-1;break}if(d<0){for(l=y==o?s:f;y;){if(m[--y]<l[y]){for(h=y;h&&!m[--h];)m[h]=9;--m[h],m[y]+=10}m[y]-=l[y]}for(;!m[0];)m.shift()}else break}w[x++]=d?u:++u,m[0]&&d?m[y]=r[p]||0:m=[r[p]]}while((p++<g||m[0]!==to)&&i--);return!w[0]&&x!=1&&(w.shift(),b.e--,A--),x>A&&oh(b,A,n.RM,m[0]!==to),b};Bt.eq=function(t){return this.cmp(t)===0};Bt.gt=function(t){return this.cmp(t)>0};Bt.gte=function(t){return this.cmp(t)>-1};Bt.lt=function(t){return this.cmp(t)<0};Bt.lte=function(t){return this.cmp(t)<1};Bt.minus=Bt.sub=function(t){var e,n,r,s,i=this,a=i.constructor,o=i.s,l=(t=new a(t)).s;if(o!=l)return t.s=-l,i.plus(t);var u=i.c.slice(),d=i.e,h=t.c,f=t.e;if(!u[0]||!h[0])return h[0]?t.s=-l:u[0]?t=new a(i):t.s=1,t;if(o=d-f){for((s=o<0)?(o=-o,r=u):(f=d,r=h),r.reverse(),l=o;l--;)r.push(0);r.reverse()}else for(n=((s=u.length<h.length)?u:h).length,o=l=0;l<n;l++)if(u[l]!=h[l]){s=u[l]<h[l];break}if(s&&(r=u,u=h,h=r,t.s=-t.s),(l=(n=h.length)-(e=u.length))>0)for(;l--;)u[e++]=0;for(l=e;n>o;){if(u[--n]<h[n]){for(e=n;e&&!u[--e];)u[e]=9;--u[e],u[n]+=10}u[n]-=h[n]}for(;u[--l]===0;)u.pop();for(;u[0]===0;)u.shift(),--f;return u[0]||(t.s=1,u=[f=0]),t.c=u,t.e=f,t};Bt.mod=function(t){var e,n=this,r=n.constructor,s=n.s,i=(t=new r(t)).s;if(!t.c[0])throw Error(ID);return n.s=t.s=1,e=t.cmp(n)==1,n.s=s,t.s=i,e?new r(n):(s=r.DP,i=r.RM,r.DP=r.RM=0,n=n.div(t),r.DP=s,r.RM=i,this.minus(n.times(t)))};Bt.neg=function(){var t=new this.constructor(this);return t.s=-t.s,t};Bt.plus=Bt.add=function(t){var e,n,r,s=this,i=s.constructor;if(t=new i(t),s.s!=t.s)return t.s=-t.s,s.minus(t);var a=s.e,o=s.c,l=t.e,u=t.c;if(!o[0]||!u[0])return u[0]||(o[0]?t=new i(s):t.s=s.s),t;if(o=o.slice(),e=a-l){for(e>0?(l=a,r=u):(e=-e,r=o),r.reverse();e--;)r.push(0);r.reverse()}for(o.length-u.length<0&&(r=u,u=o,o=r),e=u.length,n=0;e;o[e]%=10)n=(o[--e]=o[e]+u[e]+n)/10|0;for(n&&(o.unshift(n),++l),e=o.length;o[--e]===0;)o.pop();return t.c=o,t.e=l,t};Bt.pow=function(t){var e=this,n=new e.constructor("1"),r=n,s=t<0;if(t!==~~t||t<-z_||t>z_)throw Error(ah+"exponent");for(s&&(t=-t);t&1&&(r=r.times(e)),t>>=1,!!t;)e=e.times(e);return s?n.div(r):r};Bt.prec=function(t,e){if(t!==~~t||t<1||t>$d)throw Error(ah+"precision");return oh(new this.constructor(this),t,e)};Bt.round=function(t,e){if(t===to)t=0;else if(t!==~~t||t<-$d||t>$d)throw Error(U1);return oh(new this.constructor(this),t+this.e+1,e)};Bt.sqrt=function(){var t,e,n,r=this,s=r.constructor,i=r.s,a=r.e,o=new s("0.5");if(!r.c[0])return new s(r);if(i<0)throw Error(tw+"No square root");i=Math.sqrt(+ch(r,!0,!0)),i===0||i===1/0?(e=r.c.join(""),e.length+a&1||(e+="0"),i=Math.sqrt(e),a=((a+1)/2|0)-(a<0||a&1),t=new s((i==1/0?"5e":(i=i.toExponential()).slice(0,i.indexOf("e")+1))+a)):t=new s(i+""),a=t.e+(s.DP+=4);do n=t,t=o.times(n.plus(r.div(n)));while(n.c.slice(0,a).join("")!==t.c.slice(0,a).join(""));return oh(t,(s.DP-=4)+t.e+1,s.RM)};Bt.times=Bt.mul=function(t){var e,n=this,r=n.constructor,s=n.c,i=(t=new r(t)).c,a=s.length,o=i.length,l=n.e,u=t.e;if(t.s=n.s==t.s?1:-1,!s[0]||!i[0])return t.c=[t.e=0],t;for(t.e=l+u,a<o&&(e=s,s=i,i=e,u=a,a=o,o=u),e=new Array(u=a+o);u--;)e[u]=0;for(l=o;l--;){for(o=0,u=a+l;u>l;)o=e[u]+i[l]*s[u-l-1]+o,e[u--]=o%10,o=o/10|0;e[u]=o}for(o?++t.e:e.shift(),l=e.length;!e[--l];)e.pop();return t.c=e,t};Bt.toExponential=function(t,e){var n=this,r=n.c[0];if(t!==to){if(t!==~~t||t<0||t>$d)throw Error(U1);for(n=oh(new n.constructor(n),++t,e);n.c.length<t;)n.c.push(0)}return ch(n,!0,!!r)};Bt.toFixed=function(t,e){var n=this,r=n.c[0];if(t!==to){if(t!==~~t||t<0||t>$d)throw Error(U1);for(n=oh(new n.constructor(n),t+n.e+1,e),t=t+n.e+1;n.c.length<t;)n.c.push(0)}return ch(n,!1,!!r)};Bt[Symbol.for("nodejs.util.inspect.custom")]=Bt.toJSON=Bt.toString=function(){var t=this,e=t.constructor;return ch(t,t.e<=e.NE||t.e>=e.PE,!!t.c[0])};Bt.toNumber=function(){var t=+ch(this,!0,!0);if(this.constructor.strict===!0&&!this.eq(t.toString()))throw Error(tw+"Imprecise conversion");return t};Bt.toPrecision=function(t,e){var n=this,r=n.constructor,s=n.c[0];if(t!==to){if(t!==~~t||t<1||t>$d)throw Error(ah+"precision");for(n=oh(new r(n),t,e);n.c.length<t;)n.c.push(0)}return ch(n,t<=n.e||n.e<=r.NE||n.e>=r.PE,!!s)};Bt.valueOf=function(){var t=this,e=t.constructor;if(e.strict===!0)throw Error(tw+"valueOf disallowed");return ch(t,t.e<=e.NE||t.e>=e.PE,!0)};var Mm=PD();const eG={bigNumber(t){return t?new Mm(t):new Mm(0)},multiply(t,e){if(t===void 0||e===void 0)return new Mm(0);const n=new Mm(t),r=new Mm(e);return n.times(r)},formatNumberToLocalString(t,e=2){return t===void 0?"0.00":typeof t=="number"?t.toLocaleString("en-US",{maximumFractionDigits:e,minimumFractionDigits:e}):parseFloat(t).toLocaleString("en-US",{maximumFractionDigits:e,minimumFractionDigits:e})},parseLocalStringToNumber(t){return t===void 0?0:parseFloat(t.replace(/,/gu,""))}},tG=[{type:"function",name:"transfer",stateMutability:"nonpayable",inputs:[{name:"_to",type:"address"},{name:"_value",type:"uint256"}],outputs:[{name:"",type:"bool"}]},{type:"function",name:"transferFrom",stateMutability:"nonpayable",inputs:[{name:"_from",type:"address"},{name:"_to",type:"address"},{name:"_value",type:"uint256"}],outputs:[{name:"",type:"bool"}]}],nG=[{type:"function",name:"approve",stateMutability:"nonpayable",inputs:[{name:"spender",type:"address"},{name:"amount",type:"uint256"}],outputs:[{type:"bool"}]}],rG=[{type:"function",name:"transfer",stateMutability:"nonpayable",inputs:[{name:"recipient",type:"address"},{name:"amount",type:"uint256"}],outputs:[]},{type:"function",name:"transferFrom",stateMutability:"nonpayable",inputs:[{name:"sender",type:"address"},{name:"recipient",type:"address"},{name:"amount",type:"uint256"}],outputs:[{name:"",type:"bool"}]}],sG={getERC20Abi:t=>Y.USDT_CONTRACT_ADDRESSES.includes(t)?rG:tG,getSwapAbi:()=>nG},Wr={validateCaipAddress(t){var e;if(((e=t.split(":"))==null?void 0:e.length)!==3)throw new Error("Invalid CAIP Address");return t},parseCaipAddress(t){const e=t.split(":");if(e.length!==3)throw new Error(`Invalid CAIP-10 address: ${t}`);const[n,r,s]=e;if(!n||!r||!s)throw new Error(`Invalid CAIP-10 address: ${t}`);return{chainNamespace:n,chainId:r,address:s}},parseCaipNetworkId(t){const e=t.split(":");if(e.length!==2)throw new Error(`Invalid CAIP-2 network id: ${t}`);const[n,r]=e;if(!n||!r)throw new Error(`Invalid CAIP-2 network id: ${t}`);return{chainNamespace:n,chainId:r}}},We={WALLET_ID:"@appkit/wallet_id",WALLET_NAME:"@appkit/wallet_name",SOLANA_WALLET:"@appkit/solana_wallet",SOLANA_CAIP_CHAIN:"@appkit/solana_caip_chain",ACTIVE_CAIP_NETWORK_ID:"@appkit/active_caip_network_id",CONNECTED_SOCIAL:"@appkit/connected_social",CONNECTED_SOCIAL_USERNAME:"@appkit-wallet/SOCIAL_USERNAME",RECENT_WALLETS:"@appkit/recent_wallets",DEEPLINK_CHOICE:"WALLETCONNECT_DEEPLINK_CHOICE",ACTIVE_NAMESPACE:"@appkit/active_namespace",CONNECTED_NAMESPACES:"@appkit/connected_namespaces",CONNECTION_STATUS:"@appkit/connection_status",SIWX_AUTH_TOKEN:"@appkit/siwx-auth-token",SIWX_NONCE_TOKEN:"@appkit/siwx-nonce-token",TELEGRAM_SOCIAL_PROVIDER:"@appkit/social_provider",NATIVE_BALANCE_CACHE:"@appkit/native_balance_cache",PORTFOLIO_CACHE:"@appkit/portfolio_cache",ENS_CACHE:"@appkit/ens_cache",IDENTITY_CACHE:"@appkit/identity_cache",PREFERRED_ACCOUNT_TYPES:"@appkit/preferred_account_types",CONNECTIONS:"@appkit/connections",DISCONNECTED_CONNECTOR_IDS:"@appkit/disconnected_connector_ids"};function g2(t){if(!t)throw new Error("Namespace is required for CONNECTED_CONNECTOR_ID");return`@appkit/${t}:connected_connector_id`}const He={setItem(t,e){bg()&&e!==void 0&&localStorage.setItem(t,e)},getItem(t){if(bg())return localStorage.getItem(t)||void 0},removeItem(t){bg()&&localStorage.removeItem(t)},clear(){bg()&&localStorage.clear()}};function bg(){return typeof window<"u"&&typeof localStorage<"u"}function Qo(t,e){return e==="light"?{"--w3m-accent":(t==null?void 0:t["--w3m-accent"])||"hsla(231, 100%, 70%, 1)","--w3m-background":"#fff"}:{"--w3m-accent":(t==null?void 0:t["--w3m-accent"])||"hsla(230, 100%, 67%, 1)","--w3m-background":"#121313"}}var W_={};const y2=(typeof process<"u"&&typeof W_<"u"?W_.NEXT_PUBLIC_SECURE_SITE_ORIGIN:void 0)||"https://secure.walletconnect.org",RD=[{label:"Meld.io",name:"meld",feeRange:"1-2%",url:"https://meldcrypto.com",supportedChains:["eip155","solana"]},{label:"Coinbase",name:"coinbase",feeRange:"1-2%",url:"",supportedChains:["eip155"]}],iG="WXETMuFUQmqqybHuRkSgxv:25B8LJHSfpG6LVjR2ytU5Cwh7Z4Sch2ocoU",It={FOUR_MINUTES_MS:24e4,TEN_SEC_MS:1e4,FIVE_SEC_MS:5e3,THREE_SEC_MS:3e3,ONE_SEC_MS:1e3,SECURE_SITE:y2,SECURE_SITE_DASHBOARD:`${y2}/dashboard`,SECURE_SITE_FAVICON:`${y2}/images/favicon.png`,RESTRICTED_TIMEZONES:["ASIA/SHANGHAI","ASIA/URUMQI","ASIA/CHONGQING","ASIA/HARBIN","ASIA/KASHGAR","ASIA/MACAU","ASIA/HONG_KONG","ASIA/MACAO","ASIA/BEIJING","ASIA/HARBIN"],WC_COINBASE_PAY_SDK_CHAINS:["ethereum","arbitrum","polygon","berachain","avalanche-c-chain","optimism","celo","base"],WC_COINBASE_PAY_SDK_FALLBACK_CHAIN:"ethereum",WC_COINBASE_PAY_SDK_CHAIN_NAME_MAP:{Ethereum:"ethereum","Arbitrum One":"arbitrum",Polygon:"polygon",Berachain:"berachain",Avalanche:"avalanche-c-chain","OP Mainnet":"optimism",Celo:"celo",Base:"base"},WC_COINBASE_ONRAMP_APP_ID:"bf18c88d-495a-463b-b249-0b9d3656cf5e",SWAP_SUGGESTED_TOKENS:["ETH","UNI","1INCH","AAVE","SOL","ADA","AVAX","DOT","LINK","NITRO","GAIA","MILK","TRX","NEAR","GNO","WBTC","DAI","WETH","USDC","USDT","ARB","BAL","BICO","CRV","ENS","MATIC","OP"],SWAP_POPULAR_TOKENS:["ETH","UNI","1INCH","AAVE","SOL","ADA","AVAX","DOT","LINK","NITRO","GAIA","MILK","TRX","NEAR","GNO","WBTC","DAI","WETH","USDC","USDT","ARB","BAL","BICO","CRV","ENS","MATIC","OP","METAL","DAI","CHAMP","WOLF","SALE","BAL","BUSD","MUST","BTCpx","ROUTE","HEX","WELT","amDAI","VSQ","VISION","AURUM","pSP","SNX","VC","LINK","CHP","amUSDT","SPHERE","FOX","GIDDY","GFC","OMEN","OX_OLD","DE","WNT"],BALANCE_SUPPORTED_CHAINS:["eip155","solana"],SWAP_SUPPORTED_NETWORKS:["eip155:1","eip155:42161","eip155:10","eip155:324","eip155:8453","eip155:56","eip155:137","eip155:100","eip155:43114","eip155:250","eip155:8217","eip155:1313161554"],NAMES_SUPPORTED_CHAIN_NAMESPACES:["eip155"],ONRAMP_SUPPORTED_CHAIN_NAMESPACES:["eip155","solana"],ACTIVITY_ENABLED_CHAIN_NAMESPACES:["eip155"],NATIVE_TOKEN_ADDRESS:{eip155:"0xeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee",solana:"So11111111111111111111111111111111111111111",polkadot:"0x",bip122:"0x",cosmos:"0x"},CONVERT_SLIPPAGE_TOLERANCE:1,CONNECT_LABELS:{MOBILE:"Open and continue in the wallet app",WEB:"Open and continue in the wallet app"},SEND_SUPPORTED_NAMESPACES:["eip155","solana"],DEFAULT_REMOTE_FEATURES:{swaps:["1inch"],onramp:["meld","coinbase"],email:!0,socials:["google","x","discord","farcaster","github","apple","facebook"],activity:!0,reownBranding:!0,multiWallet:!1},DEFAULT_REMOTE_FEATURES_DISABLED:{email:!1,socials:!1,swaps:!1,onramp:!1,activity:!1,reownBranding:!1},DEFAULT_FEATURES:{receive:!0,send:!0,emailShowWallets:!0,connectorTypeOrder:["walletConnect","recent","injected","featured","custom","external","recommended"],analytics:!0,allWallets:!0,legalCheckbox:!1,smartSessions:!1,collapseWallets:!1,walletFeaturesOrder:["onramp","swaps","receive","send"],connectMethodsOrder:void 0,pay:!1},DEFAULT_SOCIALS:["google","x","farcaster","discord","apple","github","facebook"],DEFAULT_ACCOUNT_TYPES:{bip122:"payment",eip155:"smartAccount",polkadot:"eoa",solana:"eoa"},ADAPTER_TYPES:{UNIVERSAL:"universal",SOLANA:"solana",WAGMI:"wagmi",ETHERS:"ethers",ETHERS5:"ethers5",BITCOIN:"bitcoin"},SIWX_DEFAULTS:{signOutOnDisconnect:!0}},le={cacheExpiry:{portfolio:3e4,nativeBalance:3e4,ens:3e5,identity:3e5},isCacheExpired(t,e){return Date.now()-t>e},getActiveNetworkProps(){const t=le.getActiveNamespace(),e=le.getActiveCaipNetworkId(),n=e?e.split(":")[1]:void 0,r=n?isNaN(Number(n))?n:Number(n):void 0;return{namespace:t,caipNetworkId:e,chainId:r}},setWalletConnectDeepLink({name:t,href:e}){try{He.setItem(We.DEEPLINK_CHOICE,JSON.stringify({href:e,name:t}))}catch{console.info("Unable to set WalletConnect deep link")}},getWalletConnectDeepLink(){try{const t=He.getItem(We.DEEPLINK_CHOICE);if(t)return JSON.parse(t)}catch{console.info("Unable to get WalletConnect deep link")}},deleteWalletConnectDeepLink(){try{He.removeItem(We.DEEPLINK_CHOICE)}catch{console.info("Unable to delete WalletConnect deep link")}},setActiveNamespace(t){try{He.setItem(We.ACTIVE_NAMESPACE,t)}catch{console.info("Unable to set active namespace")}},setActiveCaipNetworkId(t){try{He.setItem(We.ACTIVE_CAIP_NETWORK_ID,t),le.setActiveNamespace(t.split(":")[0])}catch{console.info("Unable to set active caip network id")}},getActiveCaipNetworkId(){try{return He.getItem(We.ACTIVE_CAIP_NETWORK_ID)}catch{console.info("Unable to get active caip network id");return}},deleteActiveCaipNetworkId(){try{He.removeItem(We.ACTIVE_CAIP_NETWORK_ID)}catch{console.info("Unable to delete active caip network id")}},deleteConnectedConnectorId(t){try{const e=g2(t);He.removeItem(e)}catch{console.info("Unable to delete connected connector id")}},setAppKitRecent(t){try{const e=le.getRecentWallets();e.find(r=>r.id===t.id)||(e.unshift(t),e.length>2&&e.pop(),He.setItem(We.RECENT_WALLETS,JSON.stringify(e)))}catch{console.info("Unable to set AppKit recent")}},getRecentWallets(){try{const t=He.getItem(We.RECENT_WALLETS);return t?JSON.parse(t):[]}catch{console.info("Unable to get AppKit recent")}return[]},setConnectedConnectorId(t,e){try{const n=g2(t);He.setItem(n,e)}catch{console.info("Unable to set Connected Connector Id")}},getActiveNamespace(){try{return He.getItem(We.ACTIVE_NAMESPACE)}catch{console.info("Unable to get active namespace")}},getConnectedConnectorId(t){if(t)try{const e=g2(t);return He.getItem(e)}catch{console.info("Unable to get connected connector id in namespace",t)}},setConnectedSocialProvider(t){try{He.setItem(We.CONNECTED_SOCIAL,t)}catch{console.info("Unable to set connected social provider")}},getConnectedSocialProvider(){try{return He.getItem(We.CONNECTED_SOCIAL)}catch{console.info("Unable to get connected social provider")}},deleteConnectedSocialProvider(){try{He.removeItem(We.CONNECTED_SOCIAL)}catch{console.info("Unable to delete connected social provider")}},getConnectedSocialUsername(){try{return He.getItem(We.CONNECTED_SOCIAL_USERNAME)}catch{console.info("Unable to get connected social username")}},getStoredActiveCaipNetworkId(){var n;const t=He.getItem(We.ACTIVE_CAIP_NETWORK_ID);return(n=t==null?void 0:t.split(":"))==null?void 0:n[1]},setConnectionStatus(t){try{He.setItem(We.CONNECTION_STATUS,t)}catch{console.info("Unable to set connection status")}},getConnectionStatus(){try{return He.getItem(We.CONNECTION_STATUS)}catch{return}},getConnectedNamespaces(){try{const t=He.getItem(We.CONNECTED_NAMESPACES);return t!=null&&t.length?t.split(","):[]}catch{return[]}},setConnectedNamespaces(t){try{const e=Array.from(new Set(t));He.setItem(We.CONNECTED_NAMESPACES,e.join(","))}catch{console.info("Unable to set namespaces in storage")}},addConnectedNamespace(t){try{const e=le.getConnectedNamespaces();e.includes(t)||(e.push(t),le.setConnectedNamespaces(e))}catch{console.info("Unable to add connected namespace")}},removeConnectedNamespace(t){try{const e=le.getConnectedNamespaces(),n=e.indexOf(t);n>-1&&(e.splice(n,1),le.setConnectedNamespaces(e))}catch{console.info("Unable to remove connected namespace")}},getTelegramSocialProvider(){try{return He.getItem(We.TELEGRAM_SOCIAL_PROVIDER)}catch{return console.info("Unable to get telegram social provider"),null}},setTelegramSocialProvider(t){try{He.setItem(We.TELEGRAM_SOCIAL_PROVIDER,t)}catch{console.info("Unable to set telegram social provider")}},removeTelegramSocialProvider(){try{He.removeItem(We.TELEGRAM_SOCIAL_PROVIDER)}catch{console.info("Unable to remove telegram social provider")}},getBalanceCache(){let t={};try{const e=He.getItem(We.PORTFOLIO_CACHE);t=e?JSON.parse(e):{}}catch{console.info("Unable to get balance cache")}return t},removeAddressFromBalanceCache(t){try{const e=le.getBalanceCache();He.setItem(We.PORTFOLIO_CACHE,JSON.stringify({...e,[t]:void 0}))}catch{console.info("Unable to remove address from balance cache",t)}},getBalanceCacheForCaipAddress(t){try{const n=le.getBalanceCache()[t];if(n&&!this.isCacheExpired(n.timestamp,this.cacheExpiry.portfolio))return n.balance;le.removeAddressFromBalanceCache(t)}catch{console.info("Unable to get balance cache for address",t)}},updateBalanceCache(t){try{const e=le.getBalanceCache();e[t.caipAddress]=t,He.setItem(We.PORTFOLIO_CACHE,JSON.stringify(e))}catch{console.info("Unable to update balance cache",t)}},getNativeBalanceCache(){let t={};try{const e=He.getItem(We.NATIVE_BALANCE_CACHE);t=e?JSON.parse(e):{}}catch{console.info("Unable to get balance cache")}return t},removeAddressFromNativeBalanceCache(t){try{const e=le.getBalanceCache();He.setItem(We.NATIVE_BALANCE_CACHE,JSON.stringify({...e,[t]:void 0}))}catch{console.info("Unable to remove address from balance cache",t)}},getNativeBalanceCacheForCaipAddress(t){try{const n=le.getNativeBalanceCache()[t];if(n&&!this.isCacheExpired(n.timestamp,this.cacheExpiry.nativeBalance))return n;console.info("Discarding cache for address",t),le.removeAddressFromBalanceCache(t)}catch{console.info("Unable to get balance cache for address",t)}},updateNativeBalanceCache(t){try{const e=le.getNativeBalanceCache();e[t.caipAddress]=t,He.setItem(We.NATIVE_BALANCE_CACHE,JSON.stringify(e))}catch{console.info("Unable to update balance cache",t)}},getEnsCache(){let t={};try{const e=He.getItem(We.ENS_CACHE);t=e?JSON.parse(e):{}}catch{console.info("Unable to get ens name cache")}return t},getEnsFromCacheForAddress(t){try{const n=le.getEnsCache()[t];if(n&&!this.isCacheExpired(n.timestamp,this.cacheExpiry.ens))return n.ens;le.removeEnsFromCache(t)}catch{console.info("Unable to get ens name from cache",t)}},updateEnsCache(t){try{const e=le.getEnsCache();e[t.address]=t,He.setItem(We.ENS_CACHE,JSON.stringify(e))}catch{console.info("Unable to update ens name cache",t)}},removeEnsFromCache(t){try{const e=le.getEnsCache();He.setItem(We.ENS_CACHE,JSON.stringify({...e,[t]:void 0}))}catch{console.info("Unable to remove ens name from cache",t)}},getIdentityCache(){let t={};try{const e=He.getItem(We.IDENTITY_CACHE);t=e?JSON.parse(e):{}}catch{console.info("Unable to get identity cache")}return t},getIdentityFromCacheForAddress(t){try{const n=le.getIdentityCache()[t];if(n&&!this.isCacheExpired(n.timestamp,this.cacheExpiry.identity))return n.identity;le.removeIdentityFromCache(t)}catch{console.info("Unable to get identity from cache",t)}},updateIdentityCache(t){try{const e=le.getIdentityCache();e[t.address]={identity:t.identity,timestamp:t.timestamp},He.setItem(We.IDENTITY_CACHE,JSON.stringify(e))}catch{console.info("Unable to update identity cache",t)}},removeIdentityFromCache(t){try{const e=le.getIdentityCache();He.setItem(We.IDENTITY_CACHE,JSON.stringify({...e,[t]:void 0}))}catch{console.info("Unable to remove identity from cache",t)}},clearAddressCache(){try{He.removeItem(We.PORTFOLIO_CACHE),He.removeItem(We.NATIVE_BALANCE_CACHE),He.removeItem(We.ENS_CACHE),He.removeItem(We.IDENTITY_CACHE)}catch{console.info("Unable to clear address cache")}},setPreferredAccountTypes(t){try{He.setItem(We.PREFERRED_ACCOUNT_TYPES,JSON.stringify(t))}catch{console.info("Unable to set preferred account types",t)}},getPreferredAccountTypes(){try{const t=He.getItem(We.PREFERRED_ACCOUNT_TYPES);return t?JSON.parse(t):{}}catch{console.info("Unable to get preferred account types")}return{}},setConnections(t,e){try{const n=le.getConnections(),r=n[e]??[],s=new Map;for(const a of r)s.set(a.connectorId,{...a});for(const a of t){const o=s.get(a.connectorId),l=a.connectorId===Y.CONNECTOR_ID.AUTH;if(o&&!l){const u=new Set(o.accounts.map(h=>h.address.toLowerCase())),d=a.accounts.filter(h=>!u.has(h.address.toLowerCase()));o.accounts.push(...d)}else s.set(a.connectorId,{...a})}const i={...n,[e]:Array.from(s.values())};He.setItem(We.CONNECTIONS,JSON.stringify(i))}catch(n){console.error("Unable to sync connections to storage",n)}},getConnections(){try{const t=He.getItem(We.CONNECTIONS);return t?JSON.parse(t):{}}catch(t){return console.error("Unable to get connections from storage",t),{}}},deleteAddressFromConnection({connectorId:t,address:e,namespace:n}){try{const r=le.getConnections(),s=r[n]??[],i=new Map(s.map(o=>[o.connectorId,o])),a=i.get(t);a&&(a.accounts.filter(l=>l.address.toLowerCase()!==e.toLowerCase()).length===0?i.delete(t):i.set(t,{...a,accounts:a.accounts.filter(l=>l.address.toLowerCase()!==e.toLowerCase())})),He.setItem(We.CONNECTIONS,JSON.stringify({...r,[n]:Array.from(i.values())}))}catch{console.error(`Unable to remove address "${e}" from connector "${t}" in namespace "${n}"`)}},getDisconnectedConnectorIds(){try{const t=He.getItem(We.DISCONNECTED_CONNECTOR_IDS);return t?JSON.parse(t):{}}catch{console.info("Unable to get disconnected connector ids")}return{}},addDisconnectedConnectorId(t,e){try{const n=le.getDisconnectedConnectorIds(),r=n[e]??[];r.push(t),He.setItem(We.DISCONNECTED_CONNECTOR_IDS,JSON.stringify({...n,[e]:Array.from(new Set(r))}))}catch{console.error(`Unable to set disconnected connector id "${t}" for namespace "${e}"`)}},removeDisconnectedConnectorId(t,e){try{const n=le.getDisconnectedConnectorIds();let r=n[e]??[];r=r.filter(s=>s.toLowerCase()!==t.toLowerCase()),He.setItem(We.DISCONNECTED_CONNECTOR_IDS,JSON.stringify({...n,[e]:Array.from(new Set(r))}))}catch{console.error(`Unable to remove disconnected connector id "${t}" for namespace "${e}"`)}},isConnectorDisconnected(t,e){try{return(le.getDisconnectedConnectorIds()[e]??[]).some(s=>s.toLowerCase()===t.toLowerCase())}catch{console.info(`Unable to get disconnected connector id "${t}" for namespace "${e}"`)}return!1}},Ae={isMobile(){var t;return this.isClient()?!!(window!=null&&window.matchMedia&&typeof window.matchMedia=="function"&&((t=window.matchMedia("(pointer:coarse)"))!=null&&t.matches)||/Android|webOS|iPhone|iPad|iPod|BlackBerry|Opera Mini/u.test(navigator.userAgent)):!1},checkCaipNetwork(t,e=""){return t==null?void 0:t.caipNetworkId.toLocaleLowerCase().includes(e.toLowerCase())},isAndroid(){if(!this.isMobile())return!1;const t=window==null?void 0:window.navigator.userAgent.toLowerCase();return Ae.isMobile()&&t.includes("android")},isIos(){if(!this.isMobile())return!1;const t=window==null?void 0:window.navigator.userAgent.toLowerCase();return t.includes("iphone")||t.includes("ipad")},isSafari(){return this.isClient()?(window==null?void 0:window.navigator.userAgent.toLowerCase()).includes("safari"):!1},isClient(){return typeof window<"u"},isPairingExpired(t){return t?t-Date.now()<=It.TEN_SEC_MS:!0},isAllowedRetry(t,e=It.ONE_SEC_MS){return Date.now()-t>=e},copyToClopboard(t){navigator.clipboard.writeText(t)},isIframe(){try{return(window==null?void 0:window.self)!==(window==null?void 0:window.top)}catch{return!1}},isSafeApp(){var t,e;if(Ae.isClient()&&window.self!==window.top)try{const n=(e=(t=window==null?void 0:window.location)==null?void 0:t.ancestorOrigins)==null?void 0:e[0],r="https://app.safe.global";if(n){const s=new URL(n),i=new URL(r);return s.hostname===i.hostname}}catch{return!1}return!1},getPairingExpiry(){return Date.now()+It.FOUR_MINUTES_MS},getNetworkId(t){return t==null?void 0:t.split(":")[1]},getPlainAddress(t){return t==null?void 0:t.split(":")[2]},async wait(t){return new Promise(e=>{setTimeout(e,t)})},debounce(t,e=500){let n;return(...r)=>{function s(){t(...r)}n&&clearTimeout(n),n=setTimeout(s,e)}},isHttpUrl(t){return t.startsWith("http://")||t.startsWith("https://")},formatNativeUrl(t,e,n=null){if(Ae.isHttpUrl(t))return this.formatUniversalUrl(t,e);let r=t,s=n;r.includes("://")||(r=t.replaceAll("/","").replaceAll(":",""),r=`${r}://`),r.endsWith("/")||(r=`${r}/`),s&&!(s!=null&&s.endsWith("/"))&&(s=`${s}/`),this.isTelegram()&&this.isAndroid()&&(e=encodeURIComponent(e));const i=encodeURIComponent(e);return{redirect:`${r}wc?uri=${i}`,redirectUniversalLink:s?`${s}wc?uri=${i}`:void 0,href:r}},formatUniversalUrl(t,e){if(!Ae.isHttpUrl(t))return this.formatNativeUrl(t,e);let n=t;n.endsWith("/")||(n=`${n}/`);const r=encodeURIComponent(e);return{redirect:`${n}wc?uri=${r}`,href:n}},getOpenTargetForPlatform(t){return t==="popupWindow"?t:this.isTelegram()?le.getTelegramSocialProvider()?"_top":"_blank":t},openHref(t,e,n){window==null||window.open(t,this.getOpenTargetForPlatform(e),n||"noreferrer noopener")},returnOpenHref(t,e,n){return window==null?void 0:window.open(t,this.getOpenTargetForPlatform(e),n||"noreferrer noopener")},isTelegram(){return typeof window<"u"&&(!!window.TelegramWebviewProxy||!!window.Telegram||!!window.TelegramWebviewProxyProto)},isPWA(){var n,r;if(typeof window>"u")return!1;const t=window!=null&&window.matchMedia&&typeof window.matchMedia=="function"?(n=window.matchMedia("(display-mode: standalone)"))==null?void 0:n.matches:!1,e=(r=window==null?void 0:window.navigator)==null?void 0:r.standalone;return!!(t||e)},async preloadImage(t){const e=new Promise((n,r)=>{const s=new Image;s.onload=n,s.onerror=r,s.crossOrigin="anonymous",s.src=t});return Promise.race([e,Ae.wait(2e3)])},formatBalance(t,e){let n="0.000";if(typeof t=="string"){const r=Number(t);if(r){const s=Math.floor(r*1e3)/1e3;s&&(n=s.toString())}}return`${n}${e?` ${e}`:""}`},formatBalance2(t,e){var r;let n;if(t==="0")n="0";else if(typeof t=="string"){const s=Number(t);s&&(n=(r=s.toString().match(/^-?\d+(?:\.\d{0,3})?/u))==null?void 0:r[0])}return{value:n??"0",rest:n==="0"?"000":"",symbol:e}},getApiUrl(){return Y.W3M_API_URL},getBlockchainApiUrl(){return Y.BLOCKCHAIN_API_RPC_URL},getAnalyticsUrl(){return Y.PULSE_API_URL},getUUID(){return crypto!=null&&crypto.randomUUID?crypto.randomUUID():"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/gu,t=>{const e=Math.random()*16|0;return(t==="x"?e:e&3|8).toString(16)})},parseError(t){var e,n;return typeof t=="string"?t:typeof((n=(e=t==null?void 0:t.issues)==null?void 0:e[0])==null?void 0:n.message)=="string"?t.issues[0].message:t instanceof Error?t.message:"Unknown error"},sortRequestedNetworks(t,e=[]){const n={};return e&&t&&(t.forEach((r,s)=>{n[r]=s}),e.sort((r,s)=>{const i=n[r.id],a=n[s.id];return i!==void 0&&a!==void 0?i-a:i!==void 0?-1:a!==void 0?1:0})),e},calculateBalance(t){let e=0;for(const n of t)e+=n.value??0;return e},formatTokenBalance(t){const e=t.toFixed(2),[n,r]=e.split(".");return{dollars:n,pennies:r}},isAddress(t,e="eip155"){switch(e){case"eip155":if(/^(?:0x)?[0-9a-f]{40}$/iu.test(t)){if(/^(?:0x)?[0-9a-f]{40}$/iu.test(t)||/^(?:0x)?[0-9A-F]{40}$/iu.test(t))return!0}else return!1;return!1;case"solana":return/[1-9A-HJ-NP-Za-km-z]{32,44}$/iu.test(t);default:return!1}},uniqueBy(t,e){const n=new Set;return t.filter(r=>{const s=r[e];return n.has(s)?!1:(n.add(s),!0)})},generateSdkVersion(t,e,n){const s=t.length===0?It.ADAPTER_TYPES.UNIVERSAL:t.map(i=>i.adapterType).join(",");return`${e}-${s}-${n}`},createAccount(t,e,n,r,s){return{namespace:t,address:e,type:n,publicKey:r,path:s}},isCaipAddress(t){if(typeof t!="string")return!1;const e=t.split(":"),n=e[0];return e.filter(Boolean).length===3&&n in Y.CHAIN_NAME_MAP},getAccount(t){return t?typeof t=="string"?{address:t,chainId:void 0}:{address:t.address,chainId:t.chainId}:{address:void 0,chainId:void 0}},isMac(){const t=window==null?void 0:window.navigator.userAgent.toLowerCase();return t.includes("macintosh")&&!t.includes("safari")},formatTelegramSocialLoginUrl(t){const e=`--${encodeURIComponent(window==null?void 0:window.location.href)}`,n="state=";if(new URL(t).host==="auth.magic.link"){const s="provider_authorization_url=",i=t.substring(t.indexOf(s)+s.length),a=this.injectIntoUrl(decodeURIComponent(i),n,e);return t.replace(i,encodeURIComponent(a))}return this.injectIntoUrl(t,n,e)},injectIntoUrl(t,e,n){const r=t.indexOf(e);if(r===-1)throw new Error(`${e} parameter not found in the URL: ${t}`);const s=t.indexOf("&",r),i=e.length,a=s!==-1?s:t.length,o=t.substring(0,r+i),l=t.substring(r+i,a),u=t.substring(s),d=l+n;return o+d+u}};async function Lm(...t){const e=await fetch(...t);if(!e.ok)throw new Error(`HTTP status code: ${e.status}`,{cause:e});return e}class nw{constructor({baseUrl:e,clientId:n}){this.baseUrl=e,this.clientId=n}async get({headers:e,signal:n,cache:r,...s}){const i=this.createUrl(s);return(await Lm(i,{method:"GET",headers:e,signal:n,cache:r})).json()}async getBlob({headers:e,signal:n,...r}){const s=this.createUrl(r);return(await Lm(s,{method:"GET",headers:e,signal:n})).blob()}async post({body:e,headers:n,signal:r,...s}){const i=this.createUrl(s);return(await Lm(i,{method:"POST",headers:n,body:e?JSON.stringify(e):void 0,signal:r})).json()}async put({body:e,headers:n,signal:r,...s}){const i=this.createUrl(s);return(await Lm(i,{method:"PUT",headers:n,body:e?JSON.stringify(e):void 0,signal:r})).json()}async delete({body:e,headers:n,signal:r,...s}){const i=this.createUrl(s);return(await Lm(i,{method:"DELETE",headers:n,body:e?JSON.stringify(e):void 0,signal:r})).json()}createUrl({path:e,params:n}){const r=new URL(e,this.baseUrl);return n&&Object.entries(n).forEach(([s,i])=>{i&&r.searchParams.append(s,i)}),this.clientId&&r.searchParams.append("clientId",this.clientId),r}}const aG={getFeatureValue(t,e){const n=e==null?void 0:e[t];return n===void 0?It.DEFAULT_FEATURES[t]:n},filterSocialsByPlatform(t){if(!t||!t.length)return t;if(Ae.isTelegram()){if(Ae.isIos())return t.filter(e=>e!=="google");if(Ae.isMac())return t.filter(e=>e!=="x");if(Ae.isAndroid())return t.filter(e=>!["facebook","x"].includes(e))}return t}},Be=tn({features:It.DEFAULT_FEATURES,projectId:"",sdkType:"appkit",sdkVersion:"html-wagmi-undefined",defaultAccountTypes:It.DEFAULT_ACCOUNT_TYPES,enableNetworkSwitch:!0,experimental_preferUniversalLinks:!1,remoteFeatures:{}}),te={state:Be,subscribeKey(t,e){return Dr(Be,t,e)},setOptions(t){Object.assign(Be,t)},setRemoteFeatures(t){var n;if(!t)return;const e={...Be.remoteFeatures,...t};Be.remoteFeatures=e,(n=Be.remoteFeatures)!=null&&n.socials&&(Be.remoteFeatures.socials=aG.filterSocialsByPlatform(Be.remoteFeatures.socials))},setFeatures(t){if(!t)return;Be.features||(Be.features=It.DEFAULT_FEATURES);const e={...Be.features,...t};Be.features=e},setProjectId(t){Be.projectId=t},setCustomRpcUrls(t){Be.customRpcUrls=t},setAllWallets(t){Be.allWallets=t},setIncludeWalletIds(t){Be.includeWalletIds=t},setExcludeWalletIds(t){Be.excludeWalletIds=t},setFeaturedWalletIds(t){Be.featuredWalletIds=t},setTokens(t){Be.tokens=t},setTermsConditionsUrl(t){Be.termsConditionsUrl=t},setPrivacyPolicyUrl(t){Be.privacyPolicyUrl=t},setCustomWallets(t){Be.customWallets=t},setIsSiweEnabled(t){Be.isSiweEnabled=t},setIsUniversalProvider(t){Be.isUniversalProvider=t},setSdkVersion(t){Be.sdkVersion=t},setMetadata(t){Be.metadata=t},setDisableAppend(t){Be.disableAppend=t},setEIP6963Enabled(t){Be.enableEIP6963=t},setDebug(t){Be.debug=t},setEnableWalletConnect(t){Be.enableWalletConnect=t},setEnableWalletGuide(t){Be.enableWalletGuide=t},setEnableAuthLogger(t){Be.enableAuthLogger=t},setEnableWallets(t){Be.enableWallets=t},setPreferUniversalLinks(t){Be.experimental_preferUniversalLinks=t},setSIWX(t){if(t)for(const[e,n]of Object.entries(It.SIWX_DEFAULTS))t[e]??(t[e]=n);Be.siwx=t},setConnectMethodsOrder(t){Be.features={...Be.features,connectMethodsOrder:t}},setWalletFeaturesOrder(t){Be.features={...Be.features,walletFeaturesOrder:t}},setSocialsOrder(t){Be.remoteFeatures={...Be.remoteFeatures,socials:t}},setCollapseWallets(t){Be.features={...Be.features,collapseWallets:t}},setEnableEmbedded(t){Be.enableEmbedded=t},setAllowUnsupportedChain(t){Be.allowUnsupportedChain=t},setManualWCControl(t){Be.manualWCControl=t},setEnableNetworkSwitch(t){Be.enableNetworkSwitch=t},setEnableReconnect(t){Be.enableReconnect=t},setDefaultAccountTypes(t={}){Object.entries(t).forEach(([e,n])=>{n&&(Be.defaultAccountTypes[e]=n)})},setUniversalProviderConfigOverride(t){Be.universalProviderConfigOverride=t},getUniversalProviderConfigOverride(){return Be.universalProviderConfigOverride},getSnapshot(){return Ld(Be)}},oG=Object.freeze({enabled:!0,events:[]}),cG=new nw({baseUrl:Ae.getAnalyticsUrl(),clientId:null}),lG=5,uG=60*1e3,Sc=tn({...oG}),dG={state:Sc,subscribeKey(t,e){return Dr(Sc,t,e)},async sendError(t,e){if(!Sc.enabled)return;const n=Date.now();if(Sc.events.filter(i=>{const a=new Date(i.properties.timestamp||"").getTime();return n-a<uG}).length>=lG)return;const s={type:"error",event:e,properties:{errorType:t.name,errorMessage:t.message,stackTrace:t.stack,timestamp:new Date().toISOString()}};Sc.events.push(s);try{if(typeof window>"u")return;const{projectId:i,sdkType:a,sdkVersion:o}=te.state;await cG.post({path:"/e",params:{projectId:i,st:a,sv:o||"html-wagmi-4.2.2"},body:{eventId:Ae.getUUID(),url:window.location.href,domain:window.location.hostname,timestamp:new Date().toISOString(),props:{type:"error",event:e,errorType:t.name,errorMessage:t.message,stackTrace:t.stack}}})}catch{}},enable(){Sc.enabled=!0},disable(){Sc.enabled=!1},clearEvents(){Sc.events=[]}};class Fp extends Error{constructor(e,n,r){super(e),this.name="AppKitError",this.category=n,this.originalError=r,Object.setPrototypeOf(this,Fp.prototype);let s=!1;if(r instanceof Error&&typeof r.stack=="string"&&r.stack){const i=r.stack,a=i.indexOf(`
`);if(a>-1){const o=i.substring(a+1);this.stack=`${this.name}: ${this.message}
${o}`,s=!0}}s||(Error.captureStackTrace?Error.captureStackTrace(this,Fp):this.stack||(this.stack=`${this.name}: ${this.message}`))}}function q_(t,e){const n=t instanceof Fp?t:new Fp(t instanceof Error?t.message:String(t),e,t);throw dG.sendError(n,n.category),n}function ii(t,e="INTERNAL_SDK_ERROR"){const n={};return Object.keys(t).forEach(r=>{const s=t[r];if(typeof s=="function"){let i=s;s.constructor.name==="AsyncFunction"?i=async(...a)=>{try{return await s(...a)}catch(o){return q_(o,e)}}:i=(...a)=>{try{return s(...a)}catch(o){return q_(o,e)}},n[r]=i}else n[r]=s}),n}var Hp={};const hG="https://secure.walletconnect.org/sdk",fG=(typeof process<"u"&&typeof Hp<"u"?Hp.NEXT_PUBLIC_SECURE_SITE_SDK_URL:void 0)||hG,pG=(typeof process<"u"&&typeof Hp<"u"?Hp.NEXT_PUBLIC_DEFAULT_LOG_LEVEL:void 0)||"error",mG=(typeof process<"u"&&typeof Hp<"u"?Hp.NEXT_PUBLIC_SECURE_SITE_SDK_VERSION:void 0)||"4",Pe={APP_EVENT_KEY:"@w3m-app/",FRAME_EVENT_KEY:"@w3m-frame/",RPC_METHOD_KEY:"RPC_",STORAGE_KEY:"@appkit-wallet/",SESSION_TOKEN_KEY:"SESSION_TOKEN_KEY",EMAIL_LOGIN_USED_KEY:"EMAIL_LOGIN_USED_KEY",LAST_USED_CHAIN_KEY:"LAST_USED_CHAIN_KEY",LAST_EMAIL_LOGIN_TIME:"LAST_EMAIL_LOGIN_TIME",EMAIL:"EMAIL",PREFERRED_ACCOUNT_TYPE:"PREFERRED_ACCOUNT_TYPE",SMART_ACCOUNT_ENABLED:"SMART_ACCOUNT_ENABLED",SMART_ACCOUNT_ENABLED_NETWORKS:"SMART_ACCOUNT_ENABLED_NETWORKS",SOCIAL_USERNAME:"SOCIAL_USERNAME",APP_SWITCH_NETWORK:"@w3m-app/SWITCH_NETWORK",APP_CONNECT_EMAIL:"@w3m-app/CONNECT_EMAIL",APP_CONNECT_DEVICE:"@w3m-app/CONNECT_DEVICE",APP_CONNECT_OTP:"@w3m-app/CONNECT_OTP",APP_CONNECT_SOCIAL:"@w3m-app/CONNECT_SOCIAL",APP_GET_SOCIAL_REDIRECT_URI:"@w3m-app/GET_SOCIAL_REDIRECT_URI",APP_GET_USER:"@w3m-app/GET_USER",APP_SIGN_OUT:"@w3m-app/SIGN_OUT",APP_IS_CONNECTED:"@w3m-app/IS_CONNECTED",APP_GET_CHAIN_ID:"@w3m-app/GET_CHAIN_ID",APP_RPC_REQUEST:"@w3m-app/RPC_REQUEST",APP_UPDATE_EMAIL:"@w3m-app/UPDATE_EMAIL",APP_UPDATE_EMAIL_PRIMARY_OTP:"@w3m-app/UPDATE_EMAIL_PRIMARY_OTP",APP_UPDATE_EMAIL_SECONDARY_OTP:"@w3m-app/UPDATE_EMAIL_SECONDARY_OTP",APP_AWAIT_UPDATE_EMAIL:"@w3m-app/AWAIT_UPDATE_EMAIL",APP_SYNC_THEME:"@w3m-app/SYNC_THEME",APP_SYNC_DAPP_DATA:"@w3m-app/SYNC_DAPP_DATA",APP_GET_SMART_ACCOUNT_ENABLED_NETWORKS:"@w3m-app/GET_SMART_ACCOUNT_ENABLED_NETWORKS",APP_INIT_SMART_ACCOUNT:"@w3m-app/INIT_SMART_ACCOUNT",APP_SET_PREFERRED_ACCOUNT:"@w3m-app/SET_PREFERRED_ACCOUNT",APP_CONNECT_FARCASTER:"@w3m-app/CONNECT_FARCASTER",APP_GET_FARCASTER_URI:"@w3m-app/GET_FARCASTER_URI",APP_RELOAD:"@w3m-app/RELOAD",APP_RPC_ABORT:"@w3m-app/RPC_ABORT",FRAME_SWITCH_NETWORK_ERROR:"@w3m-frame/SWITCH_NETWORK_ERROR",FRAME_SWITCH_NETWORK_SUCCESS:"@w3m-frame/SWITCH_NETWORK_SUCCESS",FRAME_CONNECT_EMAIL_ERROR:"@w3m-frame/CONNECT_EMAIL_ERROR",FRAME_CONNECT_EMAIL_SUCCESS:"@w3m-frame/CONNECT_EMAIL_SUCCESS",FRAME_CONNECT_DEVICE_ERROR:"@w3m-frame/CONNECT_DEVICE_ERROR",FRAME_CONNECT_DEVICE_SUCCESS:"@w3m-frame/CONNECT_DEVICE_SUCCESS",FRAME_CONNECT_OTP_SUCCESS:"@w3m-frame/CONNECT_OTP_SUCCESS",FRAME_CONNECT_OTP_ERROR:"@w3m-frame/CONNECT_OTP_ERROR",FRAME_CONNECT_SOCIAL_SUCCESS:"@w3m-frame/CONNECT_SOCIAL_SUCCESS",FRAME_CONNECT_SOCIAL_ERROR:"@w3m-frame/CONNECT_SOCIAL_ERROR",FRAME_CONNECT_FARCASTER_SUCCESS:"@w3m-frame/CONNECT_FARCASTER_SUCCESS",FRAME_CONNECT_FARCASTER_ERROR:"@w3m-frame/CONNECT_FARCASTER_ERROR",FRAME_GET_FARCASTER_URI_SUCCESS:"@w3m-frame/GET_FARCASTER_URI_SUCCESS",FRAME_GET_FARCASTER_URI_ERROR:"@w3m-frame/GET_FARCASTER_URI_ERROR",FRAME_GET_SOCIAL_REDIRECT_URI_SUCCESS:"@w3m-frame/GET_SOCIAL_REDIRECT_URI_SUCCESS",FRAME_GET_SOCIAL_REDIRECT_URI_ERROR:"@w3m-frame/GET_SOCIAL_REDIRECT_URI_ERROR",FRAME_GET_USER_SUCCESS:"@w3m-frame/GET_USER_SUCCESS",FRAME_GET_USER_ERROR:"@w3m-frame/GET_USER_ERROR",FRAME_SIGN_OUT_SUCCESS:"@w3m-frame/SIGN_OUT_SUCCESS",FRAME_SIGN_OUT_ERROR:"@w3m-frame/SIGN_OUT_ERROR",FRAME_IS_CONNECTED_SUCCESS:"@w3m-frame/IS_CONNECTED_SUCCESS",FRAME_IS_CONNECTED_ERROR:"@w3m-frame/IS_CONNECTED_ERROR",FRAME_GET_CHAIN_ID_SUCCESS:"@w3m-frame/GET_CHAIN_ID_SUCCESS",FRAME_GET_CHAIN_ID_ERROR:"@w3m-frame/GET_CHAIN_ID_ERROR",FRAME_RPC_REQUEST_SUCCESS:"@w3m-frame/RPC_REQUEST_SUCCESS",FRAME_RPC_REQUEST_ERROR:"@w3m-frame/RPC_REQUEST_ERROR",FRAME_SESSION_UPDATE:"@w3m-frame/SESSION_UPDATE",FRAME_UPDATE_EMAIL_SUCCESS:"@w3m-frame/UPDATE_EMAIL_SUCCESS",FRAME_UPDATE_EMAIL_ERROR:"@w3m-frame/UPDATE_EMAIL_ERROR",FRAME_UPDATE_EMAIL_PRIMARY_OTP_SUCCESS:"@w3m-frame/UPDATE_EMAIL_PRIMARY_OTP_SUCCESS",FRAME_UPDATE_EMAIL_PRIMARY_OTP_ERROR:"@w3m-frame/UPDATE_EMAIL_PRIMARY_OTP_ERROR",FRAME_UPDATE_EMAIL_SECONDARY_OTP_SUCCESS:"@w3m-frame/UPDATE_EMAIL_SECONDARY_OTP_SUCCESS",FRAME_UPDATE_EMAIL_SECONDARY_OTP_ERROR:"@w3m-frame/UPDATE_EMAIL_SECONDARY_OTP_ERROR",FRAME_SYNC_THEME_SUCCESS:"@w3m-frame/SYNC_THEME_SUCCESS",FRAME_SYNC_THEME_ERROR:"@w3m-frame/SYNC_THEME_ERROR",FRAME_SYNC_DAPP_DATA_SUCCESS:"@w3m-frame/SYNC_DAPP_DATA_SUCCESS",FRAME_SYNC_DAPP_DATA_ERROR:"@w3m-frame/SYNC_DAPP_DATA_ERROR",FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_SUCCESS:"@w3m-frame/GET_SMART_ACCOUNT_ENABLED_NETWORKS_SUCCESS",FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_ERROR:"@w3m-frame/GET_SMART_ACCOUNT_ENABLED_NETWORKS_ERROR",FRAME_INIT_SMART_ACCOUNT_SUCCESS:"@w3m-frame/INIT_SMART_ACCOUNT_SUCCESS",FRAME_INIT_SMART_ACCOUNT_ERROR:"@w3m-frame/INIT_SMART_ACCOUNT_ERROR",FRAME_SET_PREFERRED_ACCOUNT_SUCCESS:"@w3m-frame/SET_PREFERRED_ACCOUNT_SUCCESS",FRAME_SET_PREFERRED_ACCOUNT_ERROR:"@w3m-frame/SET_PREFERRED_ACCOUNT_ERROR",FRAME_READY:"@w3m-frame/READY",FRAME_RELOAD_SUCCESS:"@w3m-frame/RELOAD_SUCCESS",FRAME_RELOAD_ERROR:"@w3m-frame/RELOAD_ERROR",FRAME_RPC_ABORT_SUCCESS:"@w3m-frame/RPC_ABORT_SUCCESS",FRAME_RPC_ABORT_ERROR:"@w3m-frame/RPC_ABORT_ERROR",RPC_RESPONSE_TYPE_ERROR:"RPC_RESPONSE_ERROR",RPC_RESPONSE_TYPE_TX:"RPC_RESPONSE_TRANSACTION_HASH",RPC_RESPONSE_TYPE_OBJECT:"RPC_RESPONSE_OBJECT"},Mn={SAFE_RPC_METHODS:["eth_accounts","eth_blockNumber","eth_call","eth_chainId","eth_estimateGas","eth_feeHistory","eth_gasPrice","eth_getAccount","eth_getBalance","eth_getBlockByHash","eth_getBlockByNumber","eth_getBlockReceipts","eth_getBlockTransactionCountByHash","eth_getBlockTransactionCountByNumber","eth_getCode","eth_getFilterChanges","eth_getFilterLogs","eth_getLogs","eth_getProof","eth_getStorageAt","eth_getTransactionByBlockHashAndIndex","eth_getTransactionByBlockNumberAndIndex","eth_getTransactionByHash","eth_getTransactionCount","eth_getTransactionReceipt","eth_getUncleCountByBlockHash","eth_getUncleCountByBlockNumber","eth_maxPriorityFeePerGas","eth_newBlockFilter","eth_newFilter","eth_newPendingTransactionFilter","eth_sendRawTransaction","eth_syncing","eth_uninstallFilter","wallet_getCapabilities","wallet_getCallsStatus","eth_getUserOperationReceipt","eth_estimateUserOperationGas","eth_getUserOperationByHash","eth_supportedEntryPoints","wallet_getAssets"],NOT_SAFE_RPC_METHODS:["personal_sign","eth_signTypedData_v4","eth_sendTransaction","solana_signMessage","solana_signTransaction","solana_signAllTransactions","solana_signAndSendTransaction","wallet_sendCalls","wallet_grantPermissions","wallet_revokePermissions","eth_sendUserOperation"],GET_CHAIN_ID:"eth_chainId",RPC_METHOD_NOT_ALLOWED_MESSAGE:"Requested RPC call is not allowed",RPC_METHOD_NOT_ALLOWED_UI_MESSAGE:"Action not allowed",ACCOUNT_TYPES:{EOA:"eoa",SMART_ACCOUNT:"smartAccount"}},za={PHANTOM:{id:"a797aa35c0fadbfc1a53e7f675162ed5226968b44a19ee3d24385c64d1d3c393",url:"https://phantom.app"},SOLFLARE:{id:"1ca0bdd4747578705b1939af023d120677c64fe6ca76add81fda36e350605e79",url:"https://solflare.com"},COINBASE:{id:"fd20dc426fb37566d803205b19bbc1d4096b248ac04548e3cfb6b3a38bd033aa",url:"https://go.cb-w.com"}},gG={handleMobileDeeplinkRedirect(t,e){const n=window.location.href,r=encodeURIComponent(n);if(t===za.PHANTOM.id&&!("phantom"in window)){const s=n.startsWith("https")?"https":"http",i=n.split("/")[2],a=encodeURIComponent(`${s}://${i}`);window.location.href=`${za.PHANTOM.url}/ul/browse/${r}?ref=${a}`}t===za.SOLFLARE.id&&!("solflare"in window)&&(window.location.href=`${za.SOLFLARE.url}/ul/v1/browse/${r}?ref=${r}`),e===Y.CHAIN.SOLANA&&t===za.COINBASE.id&&!("coinbaseSolana"in window)&&(window.location.href=`${za.COINBASE.url}/dapp?cb_url=${r}`)}},Ms=tn({walletImages:{},networkImages:{},chainImages:{},connectorImages:{},tokenImages:{},currencyImages:{}}),yG={state:Ms,subscribeNetworkImages(t){return Qn(Ms.networkImages,()=>t(Ms.networkImages))},subscribeKey(t,e){return Dr(Ms,t,e)},subscribe(t){return Qn(Ms,()=>t(Ms))},setWalletImage(t,e){Ms.walletImages[t]=e},setNetworkImage(t,e){Ms.networkImages[t]=e},setChainImage(t,e){Ms.chainImages[t]=e},setConnectorImage(t,e){Ms.connectorImages={...Ms.connectorImages,[t]:e}},setTokenImage(t,e){Ms.tokenImages[t]=e},setCurrencyImage(t,e){Ms.currencyImages[t]=e}},na=ii(yG),wG={eip155:"ba0ba0cd-17c6-4806-ad93-f9d174f17900",solana:"a1b58899-f671-4276-6a5e-56ca5bd59700",polkadot:"",bip122:"0b4838db-0161-4ffe-022d-532bf03dba00",cosmos:""},w2=tn({networkImagePromises:{}}),jD={async fetchWalletImage(t){if(t)return await Ue._fetchWalletImage(t),this.getWalletImageById(t)},async fetchNetworkImage(t){if(!t)return;const e=this.getNetworkImageById(t);return e||(w2.networkImagePromises[t]||(w2.networkImagePromises[t]=Ue._fetchNetworkImage(t)),await w2.networkImagePromises[t],this.getNetworkImageById(t))},getWalletImageById(t){if(t)return na.state.walletImages[t]},getWalletImage(t){if(t!=null&&t.image_url)return t==null?void 0:t.image_url;if(t!=null&&t.image_id)return na.state.walletImages[t.image_id]},getNetworkImage(t){var e,n,r;if((e=t==null?void 0:t.assets)!=null&&e.imageUrl)return(n=t==null?void 0:t.assets)==null?void 0:n.imageUrl;if((r=t==null?void 0:t.assets)!=null&&r.imageId)return na.state.networkImages[t.assets.imageId]},getNetworkImageById(t){if(t)return na.state.networkImages[t]},getConnectorImage(t){var e;if(t!=null&&t.imageUrl)return t.imageUrl;if((e=t==null?void 0:t.info)!=null&&e.icon)return t.info.icon;if(t!=null&&t.imageId)return na.state.connectorImages[t.imageId]},getChainImage(t){return na.state.networkImages[wG[t]]}},kc=tn({message:"",variant:"info",open:!1}),bG={state:kc,subscribeKey(t,e){return Dr(kc,t,e)},open(t,e){const{debug:n}=te.state,{shortMessage:r,longMessage:s}=t;n&&(kc.message=r,kc.variant=e,kc.open=!0),s&&console.error(typeof s=="function"?s():s)},close(){kc.open=!1,kc.message="",kc.variant="info"}},In=ii(bG),xG=Ae.getAnalyticsUrl(),vG=new nw({baseUrl:xG,clientId:null}),EG=["MODAL_CREATED"],go=tn({timestamp:Date.now(),reportedErrors:{},data:{type:"track",event:"MODAL_CREATED"}}),Mt={state:go,subscribe(t){return Qn(go,()=>t(go))},getSdkProperties(){const{projectId:t,sdkType:e,sdkVersion:n}=te.state;return{projectId:t,st:e,sv:n||"html-wagmi-4.2.2"}},async _sendAnalyticsEvent(t){try{const e=_e.state.address;if(EG.includes(t.data.event)||typeof window>"u")return;await vG.post({path:"/e",params:Mt.getSdkProperties(),body:{eventId:Ae.getUUID(),url:window.location.href,domain:window.location.hostname,timestamp:t.timestamp,props:{...t.data,address:e}}}),go.reportedErrors.FORBIDDEN=!1}catch(e){e instanceof Error&&e.cause instanceof Response&&e.cause.status===Y.HTTP_STATUS_CODES.FORBIDDEN&&!go.reportedErrors.FORBIDDEN&&(In.open({shortMessage:"Invalid App Configuration",longMessage:`Origin ${bg()?window.origin:"uknown"} not found on Allowlist - update configuration on cloud.reown.com`},"error"),go.reportedErrors.FORBIDDEN=!0)}},sendEvent(t){var e;go.timestamp=Date.now(),go.data=t,(e=te.state.features)!=null&&e.analytics&&Mt._sendAnalyticsEvent(go)}},NG=Ae.getApiUrl(),os=new nw({baseUrl:NG,clientId:null}),CG=40,K_=4,AG=20,Ke=tn({promises:{},page:1,count:0,featured:[],allFeatured:[],recommended:[],allRecommended:[],wallets:[],filteredWallets:[],search:[],isAnalyticsEnabled:!1,excludedWallets:[],isFetchingRecommendedWallets:!1}),Ue={state:Ke,subscribeKey(t,e){return Dr(Ke,t,e)},_getSdkProperties(){const{projectId:t,sdkType:e,sdkVersion:n}=te.state;return{projectId:t,st:e||"appkit",sv:n||"html-wagmi-4.2.2"}},_filterOutExtensions(t){return te.state.isUniversalProvider?t.filter(e=>!!(e.mobile_link||e.desktop_link||e.webapp_link)):t},async _fetchWalletImage(t){const e=`${os.baseUrl}/getWalletImage/${t}`,n=await os.getBlob({path:e,params:Ue._getSdkProperties()});na.setWalletImage(t,URL.createObjectURL(n))},async _fetchNetworkImage(t){const e=`${os.baseUrl}/public/getAssetImage/${t}`,n=await os.getBlob({path:e,params:Ue._getSdkProperties()});na.setNetworkImage(t,URL.createObjectURL(n))},async _fetchConnectorImage(t){const e=`${os.baseUrl}/public/getAssetImage/${t}`,n=await os.getBlob({path:e,params:Ue._getSdkProperties()});na.setConnectorImage(t,URL.createObjectURL(n))},async _fetchCurrencyImage(t){const e=`${os.baseUrl}/public/getCurrencyImage/${t}`,n=await os.getBlob({path:e,params:Ue._getSdkProperties()});na.setCurrencyImage(t,URL.createObjectURL(n))},async _fetchTokenImage(t){const e=`${os.baseUrl}/public/getTokenImage/${t}`,n=await os.getBlob({path:e,params:Ue._getSdkProperties()});na.setTokenImage(t,URL.createObjectURL(n))},_filterWalletsByPlatform(t){return Ae.isMobile()?t==null?void 0:t.filter(n=>n.mobile_link||n.id===za.COINBASE.id?!0:U.state.activeChain==="solana"&&(n.id===za.SOLFLARE.id||n.id===za.PHANTOM.id)):t},async fetchProjectConfig(){return(await os.get({path:"/appkit/v1/config",params:Ue._getSdkProperties()})).features},async fetchAllowedOrigins(){try{const{allowedOrigins:t}=await os.get({path:"/projects/v1/origins",params:Ue._getSdkProperties()});return t}catch(t){if(t instanceof Error&&t.cause instanceof Response){const e=t.cause.status;if(e===Y.HTTP_STATUS_CODES.TOO_MANY_REQUESTS)throw new Error("RATE_LIMITED",{cause:t});if(e>=Y.HTTP_STATUS_CODES.SERVER_ERROR&&e<600)throw new Error("SERVER_ERROR",{cause:t});return[]}return[]}},async fetchNetworkImages(){const t=U.getAllRequestedCaipNetworks(),e=t==null?void 0:t.map(({assets:n})=>n==null?void 0:n.imageId).filter(Boolean).filter(n=>!jD.getNetworkImageById(n));e&&await Promise.allSettled(e.map(n=>Ue._fetchNetworkImage(n)))},async fetchConnectorImages(){const{connectors:t}=pe.state,e=t.map(({imageId:n})=>n).filter(Boolean);await Promise.allSettled(e.map(n=>Ue._fetchConnectorImage(n)))},async fetchCurrencyImages(t=[]){await Promise.allSettled(t.map(e=>Ue._fetchCurrencyImage(e)))},async fetchTokenImages(t=[]){await Promise.allSettled(t.map(e=>Ue._fetchTokenImage(e)))},async fetchWallets(t){var i;const e=t.exclude??[];Ue._getSdkProperties().sv.startsWith("html-core-")&&e.push(...Object.values(za).map(a=>a.id));const r=await os.get({path:"/getWallets",params:{...Ue._getSdkProperties(),...t,page:String(t.page),entries:String(t.entries),include:(i=t.include)==null?void 0:i.join(","),exclude:e.join(",")}});return{data:Ue._filterWalletsByPlatform(r==null?void 0:r.data)||[],count:r==null?void 0:r.count}},async fetchFeaturedWallets(){const{featuredWalletIds:t}=te.state;if(t!=null&&t.length){const e={...Ue._getSdkProperties(),page:1,entries:(t==null?void 0:t.length)??K_,include:t},{data:n}=await Ue.fetchWallets(e),r=[...n].sort((i,a)=>t.indexOf(i.id)-t.indexOf(a.id)),s=r.map(i=>i.image_id).filter(Boolean);await Promise.allSettled(s.map(i=>Ue._fetchWalletImage(i))),Ke.featured=r,Ke.allFeatured=r}},async fetchRecommendedWallets(){try{Ke.isFetchingRecommendedWallets=!0;const{includeWalletIds:t,excludeWalletIds:e,featuredWalletIds:n}=te.state,r=[...e??[],...n??[]].filter(Boolean),s=U.getRequestedCaipNetworkIds().join(","),i={page:1,entries:K_,include:t,exclude:r,chains:s},{data:a,count:o}=await Ue.fetchWallets(i),l=le.getRecentWallets(),u=a.map(h=>h.image_id).filter(Boolean),d=l.map(h=>h.image_id).filter(Boolean);await Promise.allSettled([...u,...d].map(h=>Ue._fetchWalletImage(h))),Ke.recommended=a,Ke.allRecommended=a,Ke.count=o??0}catch{}finally{Ke.isFetchingRecommendedWallets=!1}},async fetchWalletsByPage({page:t}){const{includeWalletIds:e,excludeWalletIds:n,featuredWalletIds:r}=te.state,s=U.getRequestedCaipNetworkIds().join(","),i=[...Ke.recommended.map(({id:d})=>d),...n??[],...r??[]].filter(Boolean),a={page:t,entries:CG,include:e,exclude:i,chains:s},{data:o,count:l}=await Ue.fetchWallets(a),u=o.slice(0,AG).map(d=>d.image_id).filter(Boolean);await Promise.allSettled(u.map(d=>Ue._fetchWalletImage(d))),Ke.wallets=Ae.uniqueBy([...Ke.wallets,...Ue._filterOutExtensions(o)],"id").filter(d=>{var h;return(h=d.chains)==null?void 0:h.some(f=>s.includes(f))}),Ke.count=l>Ke.count?l:Ke.count,Ke.page=t},async initializeExcludedWallets({ids:t}){const e={page:1,entries:t.length,include:t},{data:n}=await Ue.fetchWallets(e);n&&n.forEach(r=>{Ke.excludedWallets.push({rdns:r.rdns,name:r.name})})},async searchWallet({search:t,badge:e}){const{includeWalletIds:n,excludeWalletIds:r}=te.state,s=U.getRequestedCaipNetworkIds().join(",");Ke.search=[];const i={page:1,entries:100,search:t==null?void 0:t.trim(),badge_type:e,include:n,exclude:r,chains:s},{data:a}=await Ue.fetchWallets(i);Mt.sendEvent({type:"track",event:"SEARCH_WALLET",properties:{badge:e??"",search:t??""}});const o=a.map(l=>l.image_id).filter(Boolean);await Promise.allSettled([...o.map(l=>Ue._fetchWalletImage(l)),Ae.wait(300)]),Ke.search=Ue._filterOutExtensions(a)},initPromise(t,e){const n=Ke.promises[t];return n||(Ke.promises[t]=e())},prefetch({fetchConnectorImages:t=!0,fetchFeaturedWallets:e=!0,fetchRecommendedWallets:n=!0,fetchNetworkImages:r=!0}={}){const s=[t&&Ue.initPromise("connectorImages",Ue.fetchConnectorImages),e&&Ue.initPromise("featuredWallets",Ue.fetchFeaturedWallets),n&&Ue.initPromise("recommendedWallets",Ue.fetchRecommendedWallets),r&&Ue.initPromise("networkImages",Ue.fetchNetworkImages)].filter(Boolean);return Promise.allSettled(s)},prefetchAnalyticsConfig(){var t;(t=te.state.features)!=null&&t.analytics&&Ue.fetchAnalyticsConfig()},async fetchAnalyticsConfig(){try{const{isAnalyticsEnabled:t}=await os.get({path:"/getAnalyticsConfig",params:Ue._getSdkProperties()});te.setFeatures({analytics:t})}catch{te.setFeatures({analytics:!1})}},filterByNamespaces(t){if(!(t!=null&&t.length)){Ke.featured=Ke.allFeatured,Ke.recommended=Ke.allRecommended;return}const e=U.getRequestedCaipNetworkIds().join(",");Ke.featured=Ke.allFeatured.filter(n=>{var r;return(r=n.chains)==null?void 0:r.some(s=>e.includes(s))}),Ke.recommended=Ke.allRecommended.filter(n=>{var r;return(r=n.chains)==null?void 0:r.some(s=>e.includes(s))}),Ke.filteredWallets=Ke.wallets.filter(n=>{var r;return(r=n.chains)==null?void 0:r.some(s=>e.includes(s))})},clearFilterByNamespaces(){Ke.filteredWallets=[]},setFilterByNamespace(t){if(!t){Ke.featured=Ke.allFeatured,Ke.recommended=Ke.allRecommended;return}const e=U.getRequestedCaipNetworkIds().join(",");Ke.featured=Ke.allFeatured.filter(n=>{var r;return(r=n.chains)==null?void 0:r.some(s=>e.includes(s))}),Ke.recommended=Ke.allRecommended.filter(n=>{var r;return(r=n.chains)==null?void 0:r.some(s=>e.includes(s))}),Ke.filteredWallets=Ke.wallets.filter(n=>{var r;return(r=n.chains)==null?void 0:r.some(s=>e.includes(s))})}},$t=tn({view:"Connect",history:["Connect"],transactionStack:[]}),TG={state:$t,subscribeKey(t,e){return Dr($t,t,e)},pushTransactionStack(t){$t.transactionStack.push(t)},popTransactionStack(t){const e=$t.transactionStack.pop();if(!e)return;const{onSuccess:n,onError:r,onCancel:s}=e;switch(t){case"success":n==null||n();break;case"error":r==null||r(),Ve.goBack();break;case"cancel":s==null||s(),Ve.goBack();break}},push(t,e){t!==$t.view&&($t.view=t,$t.history.push(t),$t.data=e)},reset(t,e){$t.view=t,$t.history=[t],$t.data=e},replace(t,e){$t.history.at(-1)===t||($t.view=t,$t.history[$t.history.length-1]=t,$t.data=e)},goBack(){var r;const t=U.state.activeCaipAddress,e=Ve.state.view==="ConnectingFarcaster",n=!t&&e;if($t.history.length>1){$t.history.pop();const[s]=$t.history.slice(-1);s&&(t&&s==="Connect"?$t.view="Account":$t.view=s)}else Ct.close();(r=$t.data)!=null&&r.wallet&&($t.data.wallet=void 0),setTimeout(()=>{var s,i,a;if(n){_e.setFarcasterUrl(void 0,U.state.activeChain);const o=pe.getAuthConnector();(s=o==null?void 0:o.provider)==null||s.reload();const l=Ld(te.state);(a=(i=o==null?void 0:o.provider)==null?void 0:i.syncDappData)==null||a.call(i,{metadata:l.metadata,sdkVersion:l.sdkVersion,projectId:l.projectId,sdkType:l.sdkType})}},100)},goBackToIndex(t){if($t.history.length>1){$t.history=$t.history.slice(0,t+1);const[e]=$t.history.slice(-1);e&&($t.view=e)}},goBackOrCloseModal(){Ve.state.history.length>1?Ve.goBack():Ct.close()}},Ve=ii(TG),yo=tn({themeMode:"dark",themeVariables:{},w3mThemeVariables:void 0}),rA={state:yo,subscribe(t){return Qn(yo,()=>t(yo))},setThemeMode(t){yo.themeMode=t;try{const e=pe.getAuthConnector();if(e){const n=rA.getSnapshot().themeVariables;e.provider.syncTheme({themeMode:t,themeVariables:n,w3mThemeVariables:Qo(n,t)})}}catch{console.info("Unable to sync theme to auth connector")}},setThemeVariables(t){yo.themeVariables={...yo.themeVariables,...t};try{const e=pe.getAuthConnector();if(e){const n=rA.getSnapshot().themeVariables;e.provider.syncTheme({themeVariables:n,w3mThemeVariables:Qo(yo.themeVariables,yo.themeMode)})}}catch{console.info("Unable to sync theme to auth connector")}},getSnapshot(){return Ld(yo)}},ws=ii(rA),OD={eip155:void 0,solana:void 0,polkadot:void 0,bip122:void 0,cosmos:void 0},yt=tn({allConnectors:[],connectors:[],activeConnector:void 0,filterByNamespace:void 0,activeConnectorIds:{...OD},filterByNamespaceMap:{eip155:!0,solana:!0,polkadot:!0,bip122:!0,cosmos:!0}}),SG={state:yt,subscribe(t){return Qn(yt,()=>{t(yt)})},subscribeKey(t,e){return Dr(yt,t,e)},initialize(t){t.forEach(e=>{const n=le.getConnectedConnectorId(e);n&&pe.setConnectorId(n,e)})},setActiveConnector(t){t&&(yt.activeConnector=Bd(t))},setConnectors(t){t.filter(s=>!yt.allConnectors.some(i=>i.id===s.id&&pe.getConnectorName(i.name)===pe.getConnectorName(s.name)&&i.chain===s.chain)).forEach(s=>{s.type!=="MULTI_CHAIN"&&yt.allConnectors.push(Bd(s))});const n=pe.getEnabledNamespaces(),r=pe.getEnabledConnectors(n);yt.connectors=pe.mergeMultiChainConnectors(r)},filterByNamespaces(t){Object.keys(yt.filterByNamespaceMap).forEach(e=>{yt.filterByNamespaceMap[e]=!1}),t.forEach(e=>{yt.filterByNamespaceMap[e]=!0}),pe.updateConnectorsForEnabledNamespaces()},filterByNamespace(t,e){yt.filterByNamespaceMap[t]=e,pe.updateConnectorsForEnabledNamespaces()},updateConnectorsForEnabledNamespaces(){const t=pe.getEnabledNamespaces(),e=pe.getEnabledConnectors(t),n=pe.areAllNamespacesEnabled();yt.connectors=pe.mergeMultiChainConnectors(e),n?Ue.clearFilterByNamespaces():Ue.filterByNamespaces(t)},getEnabledNamespaces(){return Object.entries(yt.filterByNamespaceMap).filter(([t,e])=>e).map(([t])=>t)},getEnabledConnectors(t){return yt.allConnectors.filter(e=>t.includes(e.chain))},areAllNamespacesEnabled(){return Object.values(yt.filterByNamespaceMap).every(t=>t)},mergeMultiChainConnectors(t){const e=pe.generateConnectorMapByName(t),n=[];return e.forEach(r=>{const s=r[0],i=(s==null?void 0:s.id)===Y.CONNECTOR_ID.AUTH;r.length>1&&s?n.push({name:s.name,imageUrl:s.imageUrl,imageId:s.imageId,connectors:[...r],type:i?"AUTH":"MULTI_CHAIN",chain:"eip155",id:(s==null?void 0:s.id)||""}):s&&n.push(s)}),n},generateConnectorMapByName(t){const e=new Map;return t.forEach(n=>{const{name:r}=n,s=pe.getConnectorName(r);if(!s)return;const i=e.get(s)||[];i.find(o=>o.chain===n.chain)||i.push(n),e.set(s,i)}),e},getConnectorName(t){return t&&({"Trust Wallet":"Trust"}[t]||t)},getUniqueConnectorsByName(t){const e=[];return t.forEach(n=>{e.find(r=>r.chain===n.chain)||e.push(n)}),e},addConnector(t){var e,n,r;if(t.id===Y.CONNECTOR_ID.AUTH){const s=t,i=Ld(te.state),a=ws.getSnapshot().themeMode,o=ws.getSnapshot().themeVariables;(n=(e=s==null?void 0:s.provider)==null?void 0:e.syncDappData)==null||n.call(e,{metadata:i.metadata,sdkVersion:i.sdkVersion,projectId:i.projectId,sdkType:i.sdkType}),(r=s==null?void 0:s.provider)==null||r.syncTheme({themeMode:a,themeVariables:o,w3mThemeVariables:Qo(o,a)}),pe.setConnectors([t])}else pe.setConnectors([t])},getAuthConnector(t){var r;const e=t||U.state.activeChain,n=yt.connectors.find(s=>s.id===Y.CONNECTOR_ID.AUTH);if(n)return(r=n==null?void 0:n.connectors)!=null&&r.length?n.connectors.find(i=>i.chain===e):n},getAnnouncedConnectorRdns(){return yt.connectors.filter(t=>t.type==="ANNOUNCED").map(t=>{var e;return(e=t.info)==null?void 0:e.rdns})},getConnectorById(t){return yt.allConnectors.find(e=>e.id===t)},getConnector(t,e){return yt.allConnectors.filter(r=>r.chain===U.state.activeChain).find(r=>{var s;return r.explorerId===t||((s=r.info)==null?void 0:s.rdns)===e})},syncIfAuthConnector(t){var i,a;if(t.id!=="ID_AUTH")return;const e=t,n=Ld(te.state),r=ws.getSnapshot().themeMode,s=ws.getSnapshot().themeVariables;(a=(i=e==null?void 0:e.provider)==null?void 0:i.syncDappData)==null||a.call(i,{metadata:n.metadata,sdkVersion:n.sdkVersion,sdkType:n.sdkType,projectId:n.projectId}),e.provider.syncTheme({themeMode:r,themeVariables:s,w3mThemeVariables:Qo(s,r)})},getConnectorsByNamespace(t){const e=yt.allConnectors.filter(n=>n.chain===t);return pe.mergeMultiChainConnectors(e)},canSwitchToSmartAccount(t){return U.checkIfSmartAccountEnabled()&&ei(t)===Mn.ACCOUNT_TYPES.EOA},selectWalletConnector(t){const e=pe.getConnector(t.id,t.rdns),n=U.state.activeChain;gG.handleMobileDeeplinkRedirect((e==null?void 0:e.explorerId)||t.id,n),e?Ve.push("ConnectingExternal",{connector:e}):Ve.push("ConnectingWalletConnect",{wallet:t})},getConnectors(t){return t?pe.getConnectorsByNamespace(t):pe.mergeMultiChainConnectors(yt.allConnectors)},setFilterByNamespace(t){yt.filterByNamespace=t,yt.connectors=pe.getConnectors(t),Ue.setFilterByNamespace(t)},setConnectorId(t,e){t&&(yt.activeConnectorIds={...yt.activeConnectorIds,[e]:t},le.setConnectedConnectorId(e,t))},removeConnectorId(t){yt.activeConnectorIds={...yt.activeConnectorIds,[t]:void 0},le.deleteConnectedConnectorId(t)},getConnectorId(t){if(t)return yt.activeConnectorIds[t]},isConnected(t){return t?!!yt.activeConnectorIds[t]:Object.values(yt.activeConnectorIds).some(e=>!!e)},resetConnectorIds(){yt.activeConnectorIds={...OD}}},pe=ii(SG),kG=1e3,Bm={checkNamespaceConnectorId(t,e){return pe.getConnectorId(t)===e},isSocialProvider(t){return It.DEFAULT_REMOTE_FEATURES.socials.includes(t)},connectWalletConnect({walletConnect:t,connector:e,closeModalOnConnect:n=!0,redirectViewOnModalClose:r="Connect",onOpen:s,onConnect:i}){return new Promise((a,o)=>{if(t&&pe.setActiveConnector(e),s==null||s(Ae.isMobile()&&t),r){const u=Ct.subscribeKey("open",d=>{d||(Ve.state.view!==r&&Ve.replace(r),u(),o(new Error("Modal closed")))})}const l=U.subscribeKey("activeCaipAddress",u=>{u&&(i==null||i(),n&&Ct.close(),l(),a(Wr.parseCaipAddress(u)))})})},connectExternal(t){return new Promise((e,n)=>{const r=U.subscribeKey("activeCaipAddress",s=>{s&&(Ct.close(),r(),e(Wr.parseCaipAddress(s)))});me.connectExternal(t,t.chain).catch(()=>{r(),n(new Error("Connection rejected"))})})},connectSocial({social:t,closeModalOnConnect:e=!0,onOpenFarcaster:n,onConnect:r}){let s=_e.state.socialWindow,i=_e.state.socialProvider,a=!1,o=null;const l=U.subscribeKey("activeCaipAddress",u=>{u&&(e&&Ct.close(),l())});return new Promise((u,d)=>{async function h(p){var g;if((g=p.data)!=null&&g.resultUri)if(p.origin===Y.SECURE_SITE_SDK_ORIGIN){window.removeEventListener("message",h,!1);try{const m=pe.getAuthConnector();if(m&&!a){s&&(s.close(),_e.setSocialWindow(void 0,U.state.activeChain),s=_e.state.socialWindow),a=!0;const y=p.data.resultUri;i&&Mt.sendEvent({type:"track",event:"SOCIAL_LOGIN_REQUEST_USER_DATA",properties:{provider:i}});const b=U.state.activeCaipNetwork;if(await m.provider.connectSocial({uri:y,chainId:b==null?void 0:b.caipNetworkId}),i){le.setConnectedSocialProvider(i),await me.connectExternal({id:m.id,type:m.type,socialUri:y},m.chain);const w=U.state.activeCaipAddress;if(!w){d(new Error("Failed to connect"));return}u(Wr.parseCaipAddress(w)),Mt.sendEvent({type:"track",event:"SOCIAL_LOGIN_SUCCESS",properties:{provider:i}})}}}catch{i&&Mt.sendEvent({type:"track",event:"SOCIAL_LOGIN_ERROR",properties:{provider:i}}),d(new Error("Failed to connect"))}}else i&&Mt.sendEvent({type:"track",event:"SOCIAL_LOGIN_ERROR",properties:{provider:i}})}async function f(){if(t&&(_e.setSocialProvider(t,U.state.activeChain),i=_e.state.socialProvider,Mt.sendEvent({type:"track",event:"SOCIAL_LOGIN_STARTED",properties:{provider:i}})),i==="farcaster"){n==null||n();const p=Ct.subscribeKey("open",m=>{!m&&t==="farcaster"&&(d(new Error("Popup closed")),r==null||r(),p())}),g=pe.getAuthConnector();if(g&&!_e.state.farcasterUrl)try{const{url:m}=await g.provider.getFarcasterUri();_e.setFarcasterUrl(m,U.state.activeChain)}catch{d(new Error("Failed to connect to farcaster"))}}else{const p=pe.getAuthConnector();o=Ae.returnOpenHref(`${Y.SECURE_SITE_SDK_ORIGIN}/loading`,"popupWindow","width=600,height=800,scrollbars=yes");try{if(p&&i){const{uri:g}=await p.provider.getSocialRedirectUri({provider:i});if(o&&g){_e.setSocialWindow(o,U.state.activeChain),s=_e.state.socialWindow,o.location.href=g;const m=setInterval(()=>{s!=null&&s.closed&&!a&&(d(new Error("Popup closed")),clearInterval(m))},1e3);window.addEventListener("message",h,!1)}else o==null||o.close(),d(new Error("Failed to initiate social connection"))}}catch{d(new Error("Failed to initiate social connection")),o==null||o.close()}}}f()})},connectEmail({closeModalOnConnect:t=!0,redirectViewOnModalClose:e="Connect",onOpen:n,onConnect:r}){return new Promise((s,i)=>{if(n==null||n(),e){const o=Ct.subscribeKey("open",l=>{l||(Ve.state.view!==e&&Ve.replace(e),o(),i(new Error("Modal closed")))})}const a=U.subscribeKey("activeCaipAddress",o=>{o&&(r==null||r(),t&&Ct.close(),a(),s(Wr.parseCaipAddress(o)))})})},async updateEmail(){const t=le.getConnectedConnectorId(U.state.activeChain),e=pe.getAuthConnector();if(!e)throw new Error("No auth connector found");if(t!==Y.CONNECTOR_ID.AUTH)throw new Error("Not connected to email or social");const n=e.provider.getEmail()??"";return Ve.push("UpdateEmailWallet",{email:n,redirectView:void 0}),new Promise((r,s)=>{const i=setInterval(()=>{const o=e.provider.getEmail()??"";o!==n&&(Ct.close(),clearInterval(i),a(),r({email:o}))},kG),a=Ct.subscribeKey("open",o=>{o||(Ve.state.view!=="Connect"&&Ve.push("Connect"),clearInterval(i),a(),s(new Error("Modal closed")))})})},canSwitchToSmartAccount(t){return U.checkIfSmartAccountEnabled()&&ei(t)===Mn.ACCOUNT_TYPES.EOA}};function DD(){var r,s;const t=((r=U.state.activeCaipNetwork)==null?void 0:r.chainNamespace)||"eip155",e=((s=U.state.activeCaipNetwork)==null?void 0:s.id)||1,n=It.NATIVE_TOKEN_ADDRESS[t];return`${t}:${e}:${n}`}function ei(t){var n;return(n=U.getAccountData(t))==null?void 0:n.preferredAccountType}const fv={getConnectionStatus(t,e){const n=pe.state.activeConnectorIds[e],r=me.getConnections(e);return!!n&&t.connectorId===n?"connected":r.some(a=>a.connectorId.toLowerCase()===t.connectorId.toLowerCase())?"active":"disconnected"},excludeConnectorAddressFromConnections({connections:t,connectorId:e,addresses:n}){return t.map(r=>{if((e?r.connectorId.toLowerCase()===e.toLowerCase():!1)&&n){const i=r.accounts.filter(a=>!n.some(l=>l.toLowerCase()===a.address.toLowerCase()));return{...r,accounts:i}}return r})},excludeExistingConnections(t,e){const n=new Set(t);return e.filter(r=>!n.has(r.connectorId))},getConnectionsByConnectorId(t,e){return t.filter(n=>n.connectorId.toLowerCase()===e.toLowerCase())},getConnectionsData(t){var o;const e=!!((o=te.state.remoteFeatures)!=null&&o.multiWallet),n=pe.state.activeConnectorIds[t],r=me.getConnections(t),i=(me.state.recentConnections.get(t)??[]).filter(l=>pe.getConnectorById(l.connectorId)),a=fv.excludeExistingConnections([...r.map(l=>l.connectorId),...n?[n]:[]],i);return e?{connections:r,recentConnections:a}:{connections:r.filter(l=>l.connectorId.toLowerCase()===(n==null?void 0:n.toLowerCase())),recentConnections:[]}}},vu=Object.freeze({message:"",variant:"success",svg:void 0,open:!1,autoClose:!0}),kn=tn({...vu}),_G={state:kn,subscribeKey(t,e){return Dr(kn,t,e)},showLoading(t,e={}){this._showMessage({message:t,variant:"loading",...e})},showSuccess(t){this._showMessage({message:t,variant:"success"})},showSvg(t,e){this._showMessage({message:t,svg:e})},showError(t){const e=Ae.parseError(t);this._showMessage({message:e,variant:"error"})},hide(){kn.message=vu.message,kn.variant=vu.variant,kn.svg=vu.svg,kn.open=vu.open,kn.autoClose=vu.autoClose},_showMessage({message:t,svg:e,variant:n="success",autoClose:r=vu.autoClose}){kn.open?(kn.open=!1,setTimeout(()=>{kn.message=t,kn.variant=n,kn.svg=e,kn.open=!0,kn.autoClose=r},150)):(kn.message=t,kn.variant=n,kn.svg=e,kn.open=!0,kn.autoClose=r)}},Ja=_G,Kt=tn({transactions:[],coinbaseTransactions:{},transactionsByYear:{},lastNetworkInView:void 0,loading:!1,empty:!1,next:void 0}),IG={state:Kt,subscribe(t){return Qn(Kt,()=>t(Kt))},setLastNetworkInView(t){Kt.lastNetworkInView=t},async fetchTransactions(t,e){var n;if(!t)throw new Error("Transactions can't be fetched without an accountAddress");Kt.loading=!0;try{const r=await $e.fetchTransactions({account:t,cursor:Kt.next,onramp:e,cache:e==="coinbase"?"no-cache":void 0,chainId:(n=U.state.activeCaipNetwork)==null?void 0:n.caipNetworkId}),s=xg.filterSpamTransactions(r.data),i=xg.filterByConnectedChain(s),a=[...Kt.transactions,...i];Kt.loading=!1,e==="coinbase"?Kt.coinbaseTransactions=xg.groupTransactionsByYearAndMonth(Kt.coinbaseTransactions,r.data):(Kt.transactions=a,Kt.transactionsByYear=xg.groupTransactionsByYearAndMonth(Kt.transactionsByYear,i)),Kt.empty=a.length===0,Kt.next=r.next?r.next:void 0}catch{const s=U.state.activeChain;Mt.sendEvent({type:"track",event:"ERROR_FETCH_TRANSACTIONS",properties:{address:t,projectId:te.state.projectId,cursor:Kt.next,isSmartAccount:ei(s)===Mn.ACCOUNT_TYPES.SMART_ACCOUNT}}),Ja.showError("Failed to fetch transactions"),Kt.loading=!1,Kt.empty=!0,Kt.next=void 0}},groupTransactionsByYearAndMonth(t={},e=[]){const n=t;return e.forEach(r=>{const s=new Date(r.metadata.minedAt).getFullYear(),i=new Date(r.metadata.minedAt).getMonth(),a=n[s]??{},l=(a[i]??[]).filter(u=>u.id!==r.id);n[s]={...a,[i]:[...l,r].sort((u,d)=>new Date(d.metadata.minedAt).getTime()-new Date(u.metadata.minedAt).getTime())}}),n},filterSpamTransactions(t){return t.filter(e=>!e.transfers.every(r=>{var s;return((s=r.nft_info)==null?void 0:s.flags.is_spam)===!0}))},filterByConnectedChain(t){var r;const e=(r=U.state.activeCaipNetwork)==null?void 0:r.caipNetworkId;return t.filter(s=>s.metadata.chain===e)},clearCursor(){Kt.next=void 0},resetTransactions(){Kt.transactions=[],Kt.transactionsByYear={},Kt.lastNetworkInView=void 0,Kt.loading=!1,Kt.empty=!1,Kt.next=void 0}},xg=ii(IG,"API_ERROR"),ht=tn({connections:new Map,recentConnections:new Map,isSwitchingConnection:!1,wcError:!1,buffering:!1,status:"disconnected"});let cu;const PG={state:ht,subscribe(t){return Qn(ht,()=>t(ht))},subscribeKey(t,e){return Dr(ht,t,e)},_getClient(){return ht._client},setClient(t){ht._client=Bd(t)},initialize(t){const e=t.map(n=>n.namespace).filter(Boolean);me.syncStorageConnections(e)},syncStorageConnections(t){const e=le.getConnections(),n=t??Array.from(U.state.chains.keys());for(const r of n){const s=e[r]??[],i=new Map(ht.recentConnections);i.set(r,s),ht.recentConnections=i}},getConnections(t){return t?ht.connections.get(t)??[]:[]},hasAnyConnection(t){const e=me.state.connections;return Array.from(e.values()).flatMap(n=>n).some(({connectorId:n})=>n===t)},async connectWalletConnect(){var t,e,n,r;if(Ae.isTelegram()||Ae.isSafari()&&Ae.isIos()){if(cu){await cu,cu=void 0;return}if(!Ae.isPairingExpired(ht==null?void 0:ht.wcPairingExpiry)){const s=ht.wcUri;ht.wcUri=s;return}cu=(e=(t=me._getClient())==null?void 0:t.connectWalletConnect)==null?void 0:e.call(t).catch(()=>{}),me.state.status="connecting",await cu,cu=void 0,ht.wcPairingExpiry=void 0,me.state.status="connected"}else await((r=(n=me._getClient())==null?void 0:n.connectWalletConnect)==null?void 0:r.call(n))},async connectExternal(t,e,n=!0){var s,i;const r=await((i=(s=me._getClient())==null?void 0:s.connectExternal)==null?void 0:i.call(s,t));return n&&U.setActiveNamespace(e),r},async reconnectExternal(t){var n,r;await((r=(n=me._getClient())==null?void 0:n.reconnectExternal)==null?void 0:r.call(n,t));const e=t.chain||U.state.activeChain;e&&pe.setConnectorId(t.id,e)},async setPreferredAccountType(t,e){var r;Ct.setLoading(!0,U.state.activeChain);const n=pe.getAuthConnector();n&&(_e.setPreferredAccountType(t,e),await n.provider.setPreferredAccount(t),le.setPreferredAccountTypes(Object.entries(U.state.chains).reduce((s,[i,a])=>{const o=i,l=ei(o);return l!==void 0&&(s[o]=l),s},{})),await me.reconnectExternal(n),Ct.setLoading(!1,U.state.activeChain),Mt.sendEvent({type:"track",event:"SET_PREFERRED_ACCOUNT_TYPE",properties:{accountType:t,network:((r=U.state.activeCaipNetwork)==null?void 0:r.caipNetworkId)||""}}))},async signMessage(t){var e;return(e=me._getClient())==null?void 0:e.signMessage(t)},parseUnits(t,e){var n;return(n=me._getClient())==null?void 0:n.parseUnits(t,e)},formatUnits(t,e){var n;return(n=me._getClient())==null?void 0:n.formatUnits(t,e)},async sendTransaction(t){var e;return(e=me._getClient())==null?void 0:e.sendTransaction(t)},async getCapabilities(t){var e;return(e=me._getClient())==null?void 0:e.getCapabilities(t)},async grantPermissions(t){var e;return(e=me._getClient())==null?void 0:e.grantPermissions(t)},async walletGetAssets(t){var e;return((e=me._getClient())==null?void 0:e.walletGetAssets(t))??{}},async estimateGas(t){var e;return(e=me._getClient())==null?void 0:e.estimateGas(t)},async writeContract(t){var e;return(e=me._getClient())==null?void 0:e.writeContract(t)},async getEnsAddress(t){var e;return(e=me._getClient())==null?void 0:e.getEnsAddress(t)},async getEnsAvatar(t){var e;return(e=me._getClient())==null?void 0:e.getEnsAvatar(t)},checkInstalled(t){var e,n;return((n=(e=me._getClient())==null?void 0:e.checkInstalled)==null?void 0:n.call(e,t))||!1},resetWcConnection(){ht.wcUri=void 0,ht.wcPairingExpiry=void 0,ht.wcLinking=void 0,ht.recentWallet=void 0,ht.status="disconnected",xg.resetTransactions(),le.deleteWalletConnectDeepLink()},resetUri(){ht.wcUri=void 0,ht.wcPairingExpiry=void 0,cu=void 0},finalizeWcConnection(){var n,r;const{wcLinking:t,recentWallet:e}=me.state;t&&le.setWalletConnectDeepLink(t),e&&le.setAppKitRecent(e),Mt.sendEvent({type:"track",event:"CONNECT_SUCCESS",properties:{method:t?"mobile":"qrcode",name:((r=(n=Ve.state.data)==null?void 0:n.wallet)==null?void 0:r.name)||"Unknown"}})},setWcBasic(t){ht.wcBasic=t},setUri(t){ht.wcUri=t,ht.wcPairingExpiry=Ae.getPairingExpiry()},setWcLinking(t){ht.wcLinking=t},setWcError(t){ht.wcError=t,ht.buffering=!1},setRecentWallet(t){ht.recentWallet=t},setBuffering(t){ht.buffering=t},setStatus(t){ht.status=t},setIsSwitchingConnection(t){ht.isSwitchingConnection=t},async disconnect({id:t,namespace:e,initialDisconnect:n}={}){var r;try{await((r=me._getClient())==null?void 0:r.disconnect({id:t,chainNamespace:e,initialDisconnect:n}))}catch(s){throw new Fp("Failed to disconnect","INTERNAL_SDK_ERROR",s)}},setConnections(t,e){const n=new Map(ht.connections);n.set(e,t),ht.connections=n},async handleAuthAccountSwitch({address:t,namespace:e}){var s,i;const n=(i=(s=_e.state.user)==null?void 0:s.accounts)==null?void 0:i.find(a=>a.type==="smartAccount"),r=n&&n.address.toLowerCase()===t.toLowerCase()&&Bm.canSwitchToSmartAccount(e)?"smartAccount":"eoa";await me.setPreferredAccountType(r,e)},async handleActiveConnection({connection:t,namespace:e,address:n}){const r=pe.getConnectorById(t.connectorId),s=t.connectorId===Y.CONNECTOR_ID.AUTH;if(!r)throw new Error(`No connector found for connection: ${t.connectorId}`);if(s)s&&n&&await me.handleAuthAccountSwitch({address:n,namespace:e});else{const i=await me.connectExternal({id:r.id,type:r.type,provider:r.provider,address:n,chain:e},e);return i==null?void 0:i.address}return n},async handleDisconnectedConnection({connection:t,namespace:e,address:n,closeModalOnConnect:r}){var u,d;const s=pe.getConnectorById(t.connectorId),i=(d=(u=t.auth)==null?void 0:u.name)==null?void 0:d.toLowerCase(),a=t.connectorId===Y.CONNECTOR_ID.AUTH,o=t.connectorId===Y.CONNECTOR_ID.WALLET_CONNECT;if(!s)throw new Error(`No connector found for connection: ${t.connectorId}`);let l;if(a)if(i&&Bm.isSocialProvider(i)){const{address:h}=await Bm.connectSocial({social:i,closeModalOnConnect:r,onOpenFarcaster(){Ct.open({view:"ConnectingFarcaster"})},onConnect(){Ve.replace("ProfileWallets")}});l=h}else{const{address:h}=await Bm.connectEmail({closeModalOnConnect:r,onOpen(){Ct.open({view:"EmailLogin"})},onConnect(){Ve.replace("ProfileWallets")}});l=h}else if(o){const{address:h}=await Bm.connectWalletConnect({walletConnect:!0,connector:s,closeModalOnConnect:r,onOpen(f){Ct.open({view:f?"AllWallets":"ConnectingWalletConnect"})},onConnect(){Ve.replace("ProfileWallets")}});l=h}else{const h=await me.connectExternal({id:s.id,type:s.type,provider:s.provider,chain:e},e);h&&(l=h.address)}return a&&n&&await me.handleAuthAccountSwitch({address:n,namespace:e}),l},async switchConnection({connection:t,address:e,namespace:n,closeModalOnConnect:r,onChange:s}){let i;const a=_e.getCaipAddress(n);if(a){const{address:l}=Wr.parseCaipAddress(a);i=l}const o=fv.getConnectionStatus(t,n);switch(o){case"connected":case"active":{const l=await me.handleActiveConnection({connection:t,namespace:n,address:e});if(i&&l){const u=l.toLowerCase()!==i.toLowerCase();s==null||s({address:l,namespace:n,hasSwitchedAccount:u,hasSwitchedWallet:o==="active"})}break}case"disconnected":{const l=await me.handleDisconnectedConnection({connection:t,namespace:n,address:e,closeModalOnConnect:r});l&&(s==null||s({address:l,namespace:n,hasSwitchedAccount:!0,hasSwitchedWallet:!0}));break}default:throw new Error(`Invalid connection status: ${o}`)}}},me=ii(PG),vh=tn({loading:!1,open:!1,selectedNetworkId:void 0,activeChain:void 0,initialized:!1}),no={state:vh,subscribe(t){return Qn(vh,()=>t(vh))},subscribeOpen(t){return Dr(vh,"open",t)},set(t){Object.assign(vh,{...vh,...t})}},RG={async getTokenList(){var r;const t=U.state.activeCaipNetwork,e=await $e.fetchSwapTokens({chainId:t==null?void 0:t.caipNetworkId});return((r=e==null?void 0:e.tokens)==null?void 0:r.map(s=>({...s,eip2612:!1,quantity:{decimals:"0",numeric:"0"},price:0,value:0})))||[]},async fetchGasPrice(){var e;const t=U.state.activeCaipNetwork;if(!t)return null;try{switch(t.chainNamespace){case"solana":const n=(e=await(me==null?void 0:me.estimateGas({chainNamespace:"solana"})))==null?void 0:e.toString();return{standard:n,fast:n,instant:n};case"eip155":default:return await $e.fetchGasPrice({chainId:t.caipNetworkId})}}catch{return null}},async fetchSwapAllowance({tokenAddress:t,userAddress:e,sourceTokenAmount:n,sourceTokenDecimals:r}){const s=await $e.fetchSwapAllowance({tokenAddress:t,userAddress:e});if(s!=null&&s.allowance&&n&&r){const i=me.parseUnits(n,r)||0;return BigInt(s.allowance)>=i}return!1},async getMyTokensWithBalance(t){const e=await G6.getMyTokensWithBalance(t);return _e.setTokenBalance(e,U.state.activeChain),this.mapBalancesToSwapTokens(e)},mapBalancesToSwapTokens(t){return(t==null?void 0:t.map(e=>({...e,address:e!=null&&e.address?e.address:DD(),decimals:parseInt(e.quantity.decimals,10),logoUri:e.iconUrl,eip2612:!1})))||[]}},Ut=tn({tokenBalances:[],loading:!1}),jG={state:Ut,subscribe(t){return Qn(Ut,()=>t(Ut))},subscribeKey(t,e){return Dr(Ut,t,e)},setToken(t){t&&(Ut.token=Bd(t))},setTokenAmount(t){Ut.sendTokenAmount=t},setReceiverAddress(t){Ut.receiverAddress=t},setReceiverProfileImageUrl(t){Ut.receiverProfileImageUrl=t},setReceiverProfileName(t){Ut.receiverProfileName=t},setNetworkBalanceInUsd(t){Ut.networkBalanceInUSD=t},setLoading(t){Ut.loading=t},async sendToken(){var t;try{switch(_t.setLoading(!0),(t=U.state.activeCaipNetwork)==null?void 0:t.chainNamespace){case"eip155":await _t.sendEvmToken();return;case"solana":await _t.sendSolanaToken();return;default:throw new Error("Unsupported chain")}}finally{_t.setLoading(!1)}},async sendEvmToken(){var n,r,s;const t=U.state.activeChain,e=ei(t);if(!_t.state.sendTokenAmount||!_t.state.receiverAddress)throw new Error("An amount and receiver address are required");if(!_t.state.token)throw new Error("A token is required");(n=_t.state.token)!=null&&n.address?(Mt.sendEvent({type:"track",event:"SEND_INITIATED",properties:{isSmartAccount:e===Mn.ACCOUNT_TYPES.SMART_ACCOUNT,token:_t.state.token.address,amount:_t.state.sendTokenAmount,network:((r=U.state.activeCaipNetwork)==null?void 0:r.caipNetworkId)||""}}),await _t.sendERC20Token({receiverAddress:_t.state.receiverAddress,tokenAddress:_t.state.token.address,sendTokenAmount:_t.state.sendTokenAmount,decimals:_t.state.token.quantity.decimals})):(Mt.sendEvent({type:"track",event:"SEND_INITIATED",properties:{isSmartAccount:e===Mn.ACCOUNT_TYPES.SMART_ACCOUNT,token:_t.state.token.symbol||"",amount:_t.state.sendTokenAmount,network:((s=U.state.activeCaipNetwork)==null?void 0:s.caipNetworkId)||""}}),await _t.sendNativeToken({receiverAddress:_t.state.receiverAddress,sendTokenAmount:_t.state.sendTokenAmount,decimals:_t.state.token.quantity.decimals}))},async fetchTokenBalance(t){var i,a;Ut.loading=!0;const e=(i=U.state.activeCaipNetwork)==null?void 0:i.caipNetworkId,n=(a=U.state.activeCaipNetwork)==null?void 0:a.chainNamespace,r=U.state.activeCaipAddress,s=r?Ae.getPlainAddress(r):void 0;if(Ut.lastRetry&&!Ae.isAllowedRetry(Ut.lastRetry,30*It.ONE_SEC_MS))return Ut.loading=!1,[];try{if(s&&e&&n){const o=await G6.getMyTokensWithBalance();return Ut.tokenBalances=o,Ut.lastRetry=void 0,o}}catch(o){Ut.lastRetry=Date.now(),t==null||t(o),Ja.showError("Token Balance Unavailable")}finally{Ut.loading=!1}return[]},fetchNetworkBalance(){if(Ut.tokenBalances.length===0)return;const t=RG.mapBalancesToSwapTokens(Ut.tokenBalances);if(!t)return;const e=t.find(n=>n.address===DD());e&&(Ut.networkBalanceInUSD=e?eG.multiply(e.quantity.numeric,e.price).toString():"0")},async sendNativeToken(t){var i,a,o;Ve.pushTransactionStack({});const e=t.receiverAddress,n=_e.state.address,r=me.parseUnits(t.sendTokenAmount.toString(),Number(t.decimals));await me.sendTransaction({chainNamespace:"eip155",to:e,address:n,data:"0x",value:r??BigInt(0)}),Mt.sendEvent({type:"track",event:"SEND_SUCCESS",properties:{isSmartAccount:ei("eip155")===Mn.ACCOUNT_TYPES.SMART_ACCOUNT,token:((i=_t.state.token)==null?void 0:i.symbol)||"",amount:t.sendTokenAmount,network:((a=U.state.activeCaipNetwork)==null?void 0:a.caipNetworkId)||""}}),(o=me._getClient())==null||o.updateBalance("eip155"),_t.resetSend()},async sendERC20Token(t){Ve.pushTransactionStack({onSuccess(){Ve.replace("Account")}});const e=me.parseUnits(t.sendTokenAmount.toString(),Number(t.decimals));if(_e.state.address&&t.sendTokenAmount&&t.receiverAddress&&t.tokenAddress){const n=Ae.getPlainAddress(t.tokenAddress);await me.writeContract({fromAddress:_e.state.address,tokenAddress:n,args:[t.receiverAddress,e??BigInt(0)],method:"transfer",abi:sG.getERC20Abi(n),chainNamespace:"eip155"}),_t.resetSend()}},async sendSolanaToken(){var t;if(!_t.state.sendTokenAmount||!_t.state.receiverAddress)throw new Error("An amount and receiver address are required");Ve.pushTransactionStack({onSuccess(){Ve.replace("Account")}}),await me.sendTransaction({chainNamespace:"solana",to:_t.state.receiverAddress,value:_t.state.sendTokenAmount}),(t=me._getClient())==null||t.updateBalance("solana"),_t.resetSend()},resetSend(){Ut.token=void 0,Ut.sendTokenAmount=void 0,Ut.receiverAddress=void 0,Ut.receiverProfileImageUrl=void 0,Ut.receiverProfileName=void 0,Ut.loading=!1,Ut.tokenBalances=[]}},_t=ii(jG),b2={currentTab:0,tokenBalance:[],smartAccountDeployed:!1,addressLabels:new Map,user:void 0,preferredAccountType:void 0},Jw={caipNetwork:void 0,supportsAllNetworks:!0,smartAccountEnabledNetworks:[]},ye=tn({chains:WK(),activeCaipAddress:void 0,activeChain:void 0,activeCaipNetwork:void 0,noAdapters:!1,universalAdapter:{networkControllerClient:void 0,connectionControllerClient:void 0},isSwitchingNamespace:!1}),OG={state:ye,subscribe(t){return Qn(ye,()=>{t(ye)})},subscribeKey(t,e){return Dr(ye,t,e)},subscribeChainProp(t,e,n){let r;return Qn(ye.chains,()=>{var i;const s=n||ye.activeChain;if(s){const a=(i=ye.chains.get(s))==null?void 0:i[t];r!==a&&(r=a,e(a))}})},initialize(t,e,n){const{chainId:r,namespace:s}=le.getActiveNetworkProps(),i=e==null?void 0:e.find(d=>d.id.toString()===(r==null?void 0:r.toString())),o=t.find(d=>(d==null?void 0:d.namespace)===s)||(t==null?void 0:t[0]),l=t.map(d=>d.namespace).filter(d=>d!==void 0),u=te.state.enableEmbedded?new Set([...l]):new Set([...(e==null?void 0:e.map(d=>d.chainNamespace))??[]]);((t==null?void 0:t.length)===0||!o)&&(ye.noAdapters=!0),ye.noAdapters||(ye.activeChain=o==null?void 0:o.namespace,ye.activeCaipNetwork=i,U.setChainNetworkData(o==null?void 0:o.namespace,{caipNetwork:i}),ye.activeChain&&no.set({activeChain:o==null?void 0:o.namespace})),u.forEach(d=>{const h=e==null?void 0:e.filter(g=>g.chainNamespace===d),f=le.getPreferredAccountTypes()||{},p={...te.state.defaultAccountTypes,...f};U.state.chains.set(d,{namespace:d,networkState:tn({...Jw,caipNetwork:h==null?void 0:h[0]}),accountState:tn({...b2,preferredAccountType:p[d]}),caipNetworks:h??[],...n}),U.setRequestedCaipNetworks(h??[],d)})},removeAdapter(t){var e,n;if(ye.activeChain===t){const r=Array.from(ye.chains.entries()).find(([s])=>s!==t);if(r){const s=(n=(e=r[1])==null?void 0:e.caipNetworks)==null?void 0:n[0];s&&U.setActiveCaipNetwork(s)}}ye.chains.delete(t)},addAdapter(t,{networkControllerClient:e,connectionControllerClient:n},r){ye.chains.set(t.namespace,{namespace:t.namespace,networkState:{...Jw,caipNetwork:r[0]},accountState:b2,caipNetworks:r,connectionControllerClient:n,networkControllerClient:e}),U.setRequestedCaipNetworks((r==null?void 0:r.filter(s=>s.chainNamespace===t.namespace))??[],t.namespace)},addNetwork(t){var n;const e=ye.chains.get(t.chainNamespace);if(e){const r=[...e.caipNetworks||[]];(n=e.caipNetworks)!=null&&n.find(s=>s.id===t.id)||r.push(t),ye.chains.set(t.chainNamespace,{...e,caipNetworks:r}),U.setRequestedCaipNetworks(r,t.chainNamespace),pe.filterByNamespace(t.chainNamespace,!0)}},removeNetwork(t,e){var r,s,i;const n=ye.chains.get(t);if(n){const a=((r=ye.activeCaipNetwork)==null?void 0:r.id)===e,o=[...((s=n.caipNetworks)==null?void 0:s.filter(l=>l.id!==e))||[]];a&&((i=n==null?void 0:n.caipNetworks)!=null&&i[0])&&U.setActiveCaipNetwork(n.caipNetworks[0]),ye.chains.set(t,{...n,caipNetworks:o}),U.setRequestedCaipNetworks(o||[],t),o.length===0&&pe.filterByNamespace(t,!1)}},setAdapterNetworkState(t,e){const n=ye.chains.get(t);n&&(n.networkState={...n.networkState||Jw,...e},ye.chains.set(t,n))},setChainAccountData(t,e,n=!0){if(!t)throw new Error("Chain is required to update chain account data");const r=ye.chains.get(t);if(r){const s={...r.accountState||b2,...e};ye.chains.set(t,{...r,accountState:s}),(ye.chains.size===1||ye.activeChain===t)&&(e.caipAddress&&(ye.activeCaipAddress=e.caipAddress),_e.replaceState(s))}},setChainNetworkData(t,e){if(!t)return;const n=ye.chains.get(t);if(n){const r={...n.networkState||Jw,...e};ye.chains.set(t,{...n,networkState:r})}},setAccountProp(t,e,n,r=!0){U.setChainAccountData(n,{[t]:e},r)},setActiveNamespace(t){var r,s;ye.activeChain=t;const e=t?ye.chains.get(t):void 0,n=(r=e==null?void 0:e.networkState)==null?void 0:r.caipNetwork;n!=null&&n.id&&t&&(ye.activeCaipAddress=(s=e==null?void 0:e.accountState)==null?void 0:s.caipAddress,ye.activeCaipNetwork=n,U.setChainNetworkData(t,{caipNetwork:n}),le.setActiveCaipNetworkId(n==null?void 0:n.caipNetworkId),no.set({activeChain:t,selectedNetworkId:n==null?void 0:n.caipNetworkId}))},setActiveCaipNetwork(t){var r,s,i;if(!t)return;ye.activeChain!==t.chainNamespace&&U.setIsSwitchingNamespace(!0);const e=ye.chains.get(t.chainNamespace);ye.activeChain=t.chainNamespace,ye.activeCaipNetwork=t,U.setChainNetworkData(t.chainNamespace,{caipNetwork:t}),(r=e==null?void 0:e.accountState)!=null&&r.address?ye.activeCaipAddress=`${t.chainNamespace}:${t.id}:${(s=e==null?void 0:e.accountState)==null?void 0:s.address}`:ye.activeCaipAddress=void 0,U.setAccountProp("caipAddress",ye.activeCaipAddress,t.chainNamespace),e&&_e.replaceState(e.accountState),_t.resetSend(),no.set({activeChain:ye.activeChain,selectedNetworkId:(i=ye.activeCaipNetwork)==null?void 0:i.caipNetworkId}),le.setActiveCaipNetworkId(t.caipNetworkId),!U.checkIfSupportedNetwork(t.chainNamespace)&&te.state.enableNetworkSwitch&&!te.state.allowUnsupportedChain&&!me.state.wcBasic&&U.showUnsupportedChainUI()},addCaipNetwork(t){var n;if(!t)return;const e=ye.chains.get(t.chainNamespace);e&&((n=e==null?void 0:e.caipNetworks)==null||n.push(t))},async switchActiveNamespace(t){var s;if(!t)return;const e=t!==U.state.activeChain,n=(s=U.getNetworkData(t))==null?void 0:s.caipNetwork,r=U.getCaipNetworkByNamespace(t,n==null?void 0:n.id);e&&r&&await U.switchActiveNetwork(r)},async switchActiveNetwork(t){var s;const e=U.state.chains.get(U.state.activeChain),n=!((s=e==null?void 0:e.caipNetworks)!=null&&s.some(i=>{var a;return i.id===((a=ye.activeCaipNetwork)==null?void 0:a.id)})),r=U.getNetworkControllerClient(t.chainNamespace);if(r){try{await r.switchCaipNetwork(t),n&&Ct.close()}catch{Ve.goBack()}Mt.sendEvent({type:"track",event:"SWITCH_NETWORK",properties:{network:t.caipNetworkId}})}},getNetworkControllerClient(t){const e=t||ye.activeChain,n=ye.chains.get(e);if(!n)throw new Error("Chain adapter not found");if(!n.networkControllerClient)throw new Error("NetworkController client not set");return n.networkControllerClient},getConnectionControllerClient(t){const e=t||ye.activeChain;if(!e)throw new Error("Chain is required to get connection controller client");const n=ye.chains.get(e);if(!(n!=null&&n.connectionControllerClient))throw new Error("ConnectionController client not set");return n.connectionControllerClient},getAccountProp(t,e){var s;let n=ye.activeChain;if(e&&(n=e),!n)return;const r=(s=ye.chains.get(n))==null?void 0:s.accountState;if(r)return r[t]},getNetworkProp(t,e){var r;const n=(r=ye.chains.get(e))==null?void 0:r.networkState;if(n)return n[t]},getRequestedCaipNetworks(t){const e=ye.chains.get(t),{approvedCaipNetworkIds:n=[],requestedCaipNetworks:r=[]}=(e==null?void 0:e.networkState)||{};return Ae.sortRequestedNetworks(n,r)},getAllRequestedCaipNetworks(){const t=[];return ye.chains.forEach(e=>{const n=U.getRequestedCaipNetworks(e.namespace);t.push(...n)}),t},setRequestedCaipNetworks(t,e){U.setAdapterNetworkState(e,{requestedCaipNetworks:t});const r=U.getAllRequestedCaipNetworks().map(i=>i.chainNamespace),s=Array.from(new Set(r));pe.filterByNamespaces(s)},getAllApprovedCaipNetworkIds(){const t=[];return ye.chains.forEach(e=>{const n=U.getApprovedCaipNetworkIds(e.namespace);t.push(...n)}),t},getActiveCaipNetwork(t){var e,n;return t?(n=(e=ye.chains.get(t))==null?void 0:e.networkState)==null?void 0:n.caipNetwork:ye.activeCaipNetwork},getActiveCaipAddress(){return ye.activeCaipAddress},getApprovedCaipNetworkIds(t){var r;const e=ye.chains.get(t);return((r=e==null?void 0:e.networkState)==null?void 0:r.approvedCaipNetworkIds)||[]},async setApprovedCaipNetworksData(t){const e=U.getNetworkControllerClient(),n=await(e==null?void 0:e.getApprovedCaipNetworksData());U.setAdapterNetworkState(t,{approvedCaipNetworkIds:n==null?void 0:n.approvedCaipNetworkIds,supportsAllNetworks:n==null?void 0:n.supportsAllNetworks})},checkIfSupportedNetwork(t,e){const n=e||ye.activeCaipNetwork,r=U.getRequestedCaipNetworks(t);return r.length?r==null?void 0:r.some(s=>s.id===(n==null?void 0:n.id)):!0},checkIfSupportedChainId(t){if(!ye.activeChain)return!0;const e=U.getRequestedCaipNetworks(ye.activeChain);return e==null?void 0:e.some(n=>n.id===t)},setSmartAccountEnabledNetworks(t,e){U.setAdapterNetworkState(e,{smartAccountEnabledNetworks:t})},checkIfSmartAccountEnabled(){var r;const t=_D.caipNetworkIdToNumber((r=ye.activeCaipNetwork)==null?void 0:r.caipNetworkId),e=ye.activeChain;if(!e||!t)return!1;const n=U.getNetworkProp("smartAccountEnabledNetworks",e);return!!(n!=null&&n.includes(Number(t)))},showUnsupportedChainUI(){Ct.open({view:"UnsupportedChain"})},checkIfNamesSupported(){const t=ye.activeCaipNetwork;return!!(t!=null&&t.chainNamespace&&It.NAMES_SUPPORTED_CHAIN_NAMESPACES.includes(t.chainNamespace))},resetNetwork(t){U.setAdapterNetworkState(t,{approvedCaipNetworkIds:void 0,supportsAllNetworks:!0})},resetAccount(t){const e=t;if(!e)throw new Error("Chain is required to set account prop");const n=U.getAccountProp("preferredAccountType",e);ye.activeCaipAddress=void 0,U.setChainAccountData(e,{smartAccountDeployed:!1,currentTab:0,caipAddress:void 0,address:void 0,balance:void 0,balanceSymbol:void 0,profileName:void 0,profileImage:void 0,addressExplorerUrl:void 0,tokenBalance:[],connectedWalletInfo:void 0,preferredAccountType:n,socialProvider:void 0,socialWindow:void 0,farcasterUrl:void 0,user:void 0,status:"disconnected"}),pe.removeConnectorId(e)},setIsSwitchingNamespace(t){ye.isSwitchingNamespace=t},getFirstCaipNetworkSupportsAuthConnector(){var n,r;const t=[];let e;if(ye.chains.forEach(s=>{Y.AUTH_CONNECTOR_SUPPORTED_CHAINS.find(i=>i===s.namespace)&&s.namespace&&t.push(s.namespace)}),t.length>0){const s=t[0];return e=s?(r=(n=ye.chains.get(s))==null?void 0:n.caipNetworks)==null?void 0:r[0]:void 0,e}},getAccountData(t){var e;return t?(e=U.state.chains.get(t))==null?void 0:e.accountState:_e.state},getNetworkData(t){var n;const e=t||ye.activeChain;if(e)return(n=U.state.chains.get(e))==null?void 0:n.networkState},getCaipNetworkByNamespace(t,e){var s,i,a;if(!t)return;const n=U.state.chains.get(t),r=(s=n==null?void 0:n.caipNetworks)==null?void 0:s.find(o=>o.id===e);return r||((i=n==null?void 0:n.networkState)==null?void 0:i.caipNetwork)||((a=n==null?void 0:n.caipNetworks)==null?void 0:a[0])},getRequestedCaipNetworkIds(){const t=pe.state.filterByNamespace;return(t?[ye.chains.get(t)]:Array.from(ye.chains.values())).flatMap(n=>(n==null?void 0:n.caipNetworks)||[]).map(n=>n.caipNetworkId)},getCaipNetworks(t){return t?U.getRequestedCaipNetworks(t):U.getAllRequestedCaipNetworks()},setLastConnectedSIWECaipNetwork(t){ye.lastConnectedSIWECaipNetwork=t},getLastConnectedSIWECaipNetwork(){return ye.lastConnectedSIWECaipNetwork}},U=ii(OG),DG={purchaseCurrencies:[{id:"2b92315d-eab7-5bef-84fa-089a131333f5",name:"USD Coin",symbol:"USDC",networks:[{name:"ethereum-mainnet",display_name:"Ethereum",chain_id:"1",contract_address:"0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48"},{name:"polygon-mainnet",display_name:"Polygon",chain_id:"137",contract_address:"0x2791Bca1f2de4661ED88A30C99A7a9449Aa84174"}]},{id:"2b92315d-eab7-5bef-84fa-089a131333f5",name:"Ether",symbol:"ETH",networks:[{name:"ethereum-mainnet",display_name:"Ethereum",chain_id:"1",contract_address:"0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48"},{name:"polygon-mainnet",display_name:"Polygon",chain_id:"137",contract_address:"0x2791Bca1f2de4661ED88A30C99A7a9449Aa84174"}]}],paymentCurrencies:[{id:"USD",payment_method_limits:[{id:"card",min:"10.00",max:"7500.00"},{id:"ach_bank_account",min:"10.00",max:"25000.00"}]},{id:"EUR",payment_method_limits:[{id:"card",min:"10.00",max:"7500.00"},{id:"ach_bank_account",min:"10.00",max:"25000.00"}]}]},UD=Ae.getBlockchainApiUrl(),cs=tn({clientId:null,api:new nw({baseUrl:UD,clientId:null}),supportedChains:{http:[],ws:[]}}),$e={state:cs,async get(t){const{st:e,sv:n}=$e.getSdkProperties(),r=te.state.projectId,s={...t.params||{},st:e,sv:n,projectId:r};return cs.api.get({...t,params:s})},getSdkProperties(){const{sdkType:t,sdkVersion:e}=te.state;return{st:t||"unknown",sv:e||"unknown"}},async isNetworkSupported(t){if(!t)return!1;try{cs.supportedChains.http.length||await $e.getSupportedNetworks()}catch{return!1}return cs.supportedChains.http.includes(t)},async getSupportedNetworks(){try{const t=await $e.get({path:"v1/supported-chains"});return cs.supportedChains=t,t}catch{return cs.supportedChains}},async fetchIdentity({address:t,caipNetworkId:e}){if(!await $e.isNetworkSupported(e))return{avatar:"",name:""};const r=le.getIdentityFromCacheForAddress(t);if(r)return r;const s=await $e.get({path:`/v1/identity/${t}`,params:{sender:U.state.activeCaipAddress?Ae.getPlainAddress(U.state.activeCaipAddress):void 0}});return le.updateIdentityCache({address:t,identity:s,timestamp:Date.now()}),s},async fetchTransactions({account:t,cursor:e,onramp:n,signal:r,cache:s,chainId:i}){var o;return await $e.isNetworkSupported((o=U.state.activeCaipNetwork)==null?void 0:o.caipNetworkId)?$e.get({path:`/v1/account/${t}/history`,params:{cursor:e,onramp:n,chainId:i},signal:r,cache:s}):{data:[],next:void 0}},async fetchSwapQuote({amount:t,userAddress:e,from:n,to:r,gasPrice:s}){var a;return await $e.isNetworkSupported((a=U.state.activeCaipNetwork)==null?void 0:a.caipNetworkId)?$e.get({path:"/v1/convert/quotes",headers:{"Content-Type":"application/json"},params:{amount:t,userAddress:e,from:n,to:r,gasPrice:s}}):{quotes:[]}},async fetchSwapTokens({chainId:t}){var n;return await $e.isNetworkSupported((n=U.state.activeCaipNetwork)==null?void 0:n.caipNetworkId)?$e.get({path:"/v1/convert/tokens",params:{chainId:t}}):{tokens:[]}},async fetchTokenPrice({addresses:t}){var n;return await $e.isNetworkSupported((n=U.state.activeCaipNetwork)==null?void 0:n.caipNetworkId)?cs.api.post({path:"/v1/fungible/price",body:{currency:"usd",addresses:t,projectId:te.state.projectId},headers:{"Content-Type":"application/json"}}):{fungibles:[]}},async fetchSwapAllowance({tokenAddress:t,userAddress:e}){var r;return await $e.isNetworkSupported((r=U.state.activeCaipNetwork)==null?void 0:r.caipNetworkId)?$e.get({path:"/v1/convert/allowance",params:{tokenAddress:t,userAddress:e},headers:{"Content-Type":"application/json"}}):{allowance:"0"}},async fetchGasPrice({chainId:t}){var s;const{st:e,sv:n}=$e.getSdkProperties();if(!await $e.isNetworkSupported((s=U.state.activeCaipNetwork)==null?void 0:s.caipNetworkId))throw new Error("Network not supported for Gas Price");return $e.get({path:"/v1/convert/gas-price",headers:{"Content-Type":"application/json"},params:{chainId:t,st:e,sv:n}})},async generateSwapCalldata({amount:t,from:e,to:n,userAddress:r,disableEstimate:s}){var a;if(!await $e.isNetworkSupported((a=U.state.activeCaipNetwork)==null?void 0:a.caipNetworkId))throw new Error("Network not supported for Swaps");return cs.api.post({path:"/v1/convert/build-transaction",headers:{"Content-Type":"application/json"},body:{amount:t,eip155:{slippage:It.CONVERT_SLIPPAGE_TOLERANCE},projectId:te.state.projectId,from:e,to:n,userAddress:r,disableEstimate:s}})},async generateApproveCalldata({from:t,to:e,userAddress:n}){var a;const{st:r,sv:s}=$e.getSdkProperties();if(!await $e.isNetworkSupported((a=U.state.activeCaipNetwork)==null?void 0:a.caipNetworkId))throw new Error("Network not supported for Swaps");return $e.get({path:"/v1/convert/build-approve",headers:{"Content-Type":"application/json"},params:{userAddress:n,from:t,to:e,st:r,sv:s}})},async getBalance(t,e,n){var u;const{st:r,sv:s}=$e.getSdkProperties();if(!await $e.isNetworkSupported((u=U.state.activeCaipNetwork)==null?void 0:u.caipNetworkId))return Ja.showError("Token Balance Unavailable"),{balances:[]};const a=`${e}:${t}`,o=le.getBalanceCacheForCaipAddress(a);if(o)return o;const l=await $e.get({path:`/v1/account/${t}/balance`,params:{currency:"usd",chainId:e,forceUpdate:n,st:r,sv:s}});return le.updateBalanceCache({caipAddress:a,balance:l,timestamp:Date.now()}),l},async lookupEnsName(t){var n;return await $e.isNetworkSupported((n=U.state.activeCaipNetwork)==null?void 0:n.caipNetworkId)?$e.get({path:`/v1/profile/account/${t}`,params:{apiVersion:"2"}}):{addresses:{},attributes:[]}},async reverseLookupEnsName({address:t}){var n;return await $e.isNetworkSupported((n=U.state.activeCaipNetwork)==null?void 0:n.caipNetworkId)?$e.get({path:`/v1/profile/reverse/${t}`,params:{sender:_e.state.address,apiVersion:"2"}}):[]},async getEnsNameSuggestions(t){var n;return await $e.isNetworkSupported((n=U.state.activeCaipNetwork)==null?void 0:n.caipNetworkId)?$e.get({path:`/v1/profile/suggestions/${t}`,params:{zone:"reown.id"}}):{suggestions:[]}},async registerEnsName({coinType:t,address:e,message:n,signature:r}){var i;return await $e.isNetworkSupported((i=U.state.activeCaipNetwork)==null?void 0:i.caipNetworkId)?cs.api.post({path:"/v1/profile/account",body:{coin_type:t,address:e,message:n,signature:r},headers:{"Content-Type":"application/json"}}):{success:!1}},async generateOnRampURL({destinationWallets:t,partnerUserId:e,defaultNetwork:n,purchaseAmount:r,paymentAmount:s}){var o;return await $e.isNetworkSupported((o=U.state.activeCaipNetwork)==null?void 0:o.caipNetworkId)?(await cs.api.post({path:"/v1/generators/onrampurl",params:{projectId:te.state.projectId},body:{destinationWallets:t,defaultNetwork:n,partnerUserId:e,defaultExperience:"buy",presetCryptoAmount:r,presetFiatAmount:s}})).url:""},async getOnrampOptions(){var e;if(!await $e.isNetworkSupported((e=U.state.activeCaipNetwork)==null?void 0:e.caipNetworkId))return{paymentCurrencies:[],purchaseCurrencies:[]};try{return await $e.get({path:"/v1/onramp/options"})}catch{return DG}},async getOnrampQuote({purchaseCurrency:t,paymentCurrency:e,amount:n,network:r}){var s;try{return await $e.isNetworkSupported((s=U.state.activeCaipNetwork)==null?void 0:s.caipNetworkId)?await cs.api.post({path:"/v1/onramp/quote",params:{projectId:te.state.projectId},body:{purchaseCurrency:t,paymentCurrency:e,amount:n,network:r}}):null}catch{return{coinbaseFee:{amount:n,currency:e.id},networkFee:{amount:n,currency:e.id},paymentSubtotal:{amount:n,currency:e.id},paymentTotal:{amount:n,currency:e.id},purchaseAmount:{amount:n,currency:e.id},quoteId:"mocked-quote-id"}}},async getSmartSessions(t){var n;return await $e.isNetworkSupported((n=U.state.activeCaipNetwork)==null?void 0:n.caipNetworkId)?$e.get({path:`/v1/sessions/${t}`}):[]},async revokeSmartSession(t,e,n){var s;return await $e.isNetworkSupported((s=U.state.activeCaipNetwork)==null?void 0:s.caipNetworkId)?cs.api.post({path:`/v1/sessions/${t}/revoke`,params:{projectId:te.state.projectId},body:{pci:e,signature:n}}):{success:!1}},setClientId(t){cs.clientId=t,cs.api=new nw({baseUrl:UD,clientId:t})}};function UG(t,{strict:e=!0}={}){return!t||typeof t!="string"?!1:e?/^0x[0-9a-fA-F]*$/.test(t):t.startsWith("0x")}function G_(t){return UG(t,{strict:!1})?Math.ceil((t.length-2)/2):t.length}const MD="2.31.6";let $m={getDocsUrl:({docsBaseUrl:t,docsPath:e="",docsSlug:n})=>e?`${t??"https://viem.sh"}${e}${n?`#${n}`:""}`:void 0,version:`viem@${MD}`},ya=class sA extends Error{constructor(e,n={}){var o;const r=(()=>{var l;return n.cause instanceof sA?n.cause.details:(l=n.cause)!=null&&l.message?n.cause.message:n.details})(),s=n.cause instanceof sA&&n.cause.docsPath||n.docsPath,i=(o=$m.getDocsUrl)==null?void 0:o.call($m,{...n,docsPath:s}),a=[e||"An error occurred.","",...n.metaMessages?[...n.metaMessages,""]:[],...i?[`Docs: ${i}`]:[],...r?[`Details: ${r}`]:[],...$m.version?[`Version: ${$m.version}`]:[]].join(`
`);super(a,n.cause?{cause:n.cause}:void 0),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metaMessages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"version",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"BaseError"}),this.details=r,this.docsPath=s,this.metaMessages=n.metaMessages,this.name=n.name??this.name,this.shortMessage=e,this.version=MD}walk(e){return LD(this,e)}};function LD(t,e){return e!=null&&e(t)?t:t&&typeof t=="object"&&"cause"in t&&t.cause!==void 0?LD(t.cause,e):e?null:t}class vEe extends ya{constructor({offset:e,position:n,size:r}){super(`Slice ${n==="start"?"starting":"ending"} at offset "${e}" is out-of-bounds (size: ${r}).`,{name:"SliceOffsetOutOfBoundsError"})}}let BD=class extends ya{constructor({size:e,targetSize:n,type:r}){super(`${r.charAt(0).toUpperCase()}${r.slice(1).toLowerCase()} size (${e}) exceeds padding size (${n}).`,{name:"SizeExceedsPaddingSizeError"})}};function z6(t,{dir:e,size:n=32}={}){return typeof t=="string"?MG(t,{dir:e,size:n}):LG(t,{dir:e,size:n})}function MG(t,{dir:e,size:n=32}={}){if(n===null)return t;const r=t.replace("0x","");if(r.length>n*2)throw new BD({size:Math.ceil(r.length/2),targetSize:n,type:"hex"});return`0x${r[e==="right"?"padEnd":"padStart"](n*2,"0")}`}function LG(t,{dir:e,size:n=32}={}){if(n===null)return t;if(t.length>n)throw new BD({size:t.length,targetSize:n,type:"bytes"});const r=new Uint8Array(n);for(let s=0;s<n;s++){const i=e==="right";r[i?s:n-s-1]=t[i?s:t.length-s-1]}return r}let BG=class extends ya{constructor({max:e,min:n,signed:r,size:s,value:i}){super(`Number "${i}" is not in safe ${s?`${s*8}-bit ${r?"signed":"unsigned"} `:""}integer range ${e?`(${n} to ${e})`:`(above ${n})`}`,{name:"IntegerOutOfRangeError"})}},$G=class extends ya{constructor({givenSize:e,maxSize:n}){super(`Size cannot exceed ${n} bytes. Given size: ${e} bytes.`,{name:"SizeOverflowError"})}};function $D(t,{size:e}){if(G_(t)>e)throw new $G({givenSize:G_(t),maxSize:e})}const FG=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function Y_(t,e={}){return typeof t=="number"||typeof t=="bigint"?VG(t,e):typeof t=="string"?HD(t,e):typeof t=="boolean"?HG(t,e):FD(t,e)}function HG(t,e={}){const n=`0x${Number(t)}`;return typeof e.size=="number"?($D(n,{size:e.size}),z6(n,{size:e.size})):n}function FD(t,e={}){let n="";for(let s=0;s<t.length;s++)n+=FG[t[s]];const r=`0x${n}`;return typeof e.size=="number"?($D(r,{size:e.size}),z6(r,{dir:"right",size:e.size})):r}function VG(t,e={}){const{signed:n,size:r}=e,s=BigInt(t);let i;r?n?i=(1n<<BigInt(r)*8n-1n)-1n:i=2n**(BigInt(r)*8n)-1n:typeof t=="number"&&(i=BigInt(Number.MAX_SAFE_INTEGER));const a=typeof i=="bigint"&&n?-i-1n:0;if(i&&s>i||s<a){const l=typeof t=="bigint"?"n":"";throw new BG({max:i?`${i}${l}`:void 0,min:`${a}${l}`,signed:n,size:r,value:`${t}${l}`})}const o=`0x${(n&&s<0?(1n<<BigInt(r*8))+BigInt(s):s).toString(16)}`;return r?z6(o,{size:r}):o}const zG=new TextEncoder;function HD(t,e={}){const n=zG.encode(t);return FD(n,e)}const Zw=BigInt(2**32-1),Q_=BigInt(32);function WG(t,e=!1){return e?{h:Number(t&Zw),l:Number(t>>Q_&Zw)}:{h:Number(t>>Q_&Zw)|0,l:Number(t&Zw)|0}}function qG(t,e=!1){const n=t.length;let r=new Uint32Array(n),s=new Uint32Array(n);for(let i=0;i<n;i++){const{h:a,l:o}=WG(t[i],e);[r[i],s[i]]=[a,o]}return[r,s]}const KG=(t,e,n)=>t<<n|e>>>32-n,GG=(t,e,n)=>e<<n|t>>>32-n,YG=(t,e,n)=>e<<n-32|t>>>64-n,QG=(t,e,n)=>t<<n-32|e>>>64-n,Eh=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */function JG(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function pv(t){if(!Number.isSafeInteger(t)||t<0)throw new Error("positive integer expected, got "+t)}function Vp(t,...e){if(!JG(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function AEe(t){if(typeof t!="function"||typeof t.create!="function")throw new Error("Hash should be wrapped by utils.createHasher");pv(t.outputLen),pv(t.blockLen)}function J_(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function ZG(t,e){Vp(t);const n=e.outputLen;if(t.length<n)throw new Error("digestInto() expects output buffer of length at least "+n)}function XG(t){return new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4))}function VD(...t){for(let e=0;e<t.length;e++)t[e].fill(0)}function TEe(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)}function SEe(t,e){return t<<32-e|t>>>e}const eY=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;function tY(t){return t<<24&4278190080|t<<8&16711680|t>>>8&65280|t>>>24&255}function nY(t){for(let e=0;e<t.length;e++)t[e]=tY(t[e]);return t}const Z_=eY?t=>t:nY,rY=typeof Uint8Array.from([]).toHex=="function"&&typeof Uint8Array.fromHex=="function",sY=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function kEe(t){if(Vp(t),rY)return t.toHex();let e="";for(let n=0;n<t.length;n++)e+=sY[t[n]];return e}function iY(t){if(typeof t!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(t))}function W6(t){return typeof t=="string"&&(t=iY(t)),Vp(t),t}function _Ee(...t){let e=0;for(let r=0;r<t.length;r++){const s=t[r];Vp(s),e+=s.length}const n=new Uint8Array(e);for(let r=0,s=0;r<t.length;r++){const i=t[r];n.set(i,s),s+=i.length}return n}class aY{}function oY(t){const e=r=>t().update(W6(r)).digest(),n=t();return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=()=>t(),e}function cY(t){const e=(r,s)=>t(s).update(W6(r)).digest(),n=t({});return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=r=>t(r),e}function IEe(t=32){if(Eh&&typeof Eh.getRandomValues=="function")return Eh.getRandomValues(new Uint8Array(t));if(Eh&&typeof Eh.randomBytes=="function")return Uint8Array.from(Eh.randomBytes(t));throw new Error("crypto.getRandomValues must be defined")}const lY=BigInt(0),Fm=BigInt(1),uY=BigInt(2),dY=BigInt(7),hY=BigInt(256),fY=BigInt(113),zD=[],WD=[],qD=[];for(let t=0,e=Fm,n=1,r=0;t<24;t++){[n,r]=[r,(2*n+3*r)%5],zD.push(2*(5*r+n)),WD.push((t+1)*(t+2)/2%64);let s=lY;for(let i=0;i<7;i++)e=(e<<Fm^(e>>dY)*fY)%hY,e&uY&&(s^=Fm<<(Fm<<BigInt(i))-Fm);qD.push(s)}const KD=qG(qD,!0),pY=KD[0],mY=KD[1],X_=(t,e,n)=>n>32?YG(t,e,n):KG(t,e,n),e3=(t,e,n)=>n>32?QG(t,e,n):GG(t,e,n);function GD(t,e=24){const n=new Uint32Array(10);for(let r=24-e;r<24;r++){for(let a=0;a<10;a++)n[a]=t[a]^t[a+10]^t[a+20]^t[a+30]^t[a+40];for(let a=0;a<10;a+=2){const o=(a+8)%10,l=(a+2)%10,u=n[l],d=n[l+1],h=X_(u,d,1)^n[o],f=e3(u,d,1)^n[o+1];for(let p=0;p<50;p+=10)t[a+p]^=h,t[a+p+1]^=f}let s=t[2],i=t[3];for(let a=0;a<24;a++){const o=WD[a],l=X_(s,i,o),u=e3(s,i,o),d=zD[a];s=t[d],i=t[d+1],t[d]=l,t[d+1]=u}for(let a=0;a<50;a+=10){for(let o=0;o<10;o++)n[o]=t[a+o];for(let o=0;o<10;o++)t[a+o]^=~n[(o+2)%10]&n[(o+4)%10]}t[0]^=pY[r],t[1]^=mY[r]}VD(n)}class rw extends aY{constructor(e,n,r,s=!1,i=24){if(super(),this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,this.enableXOF=!1,this.blockLen=e,this.suffix=n,this.outputLen=r,this.enableXOF=s,this.rounds=i,pv(r),!(0<e&&e<200))throw new Error("only keccak-f1600 function is supported");this.state=new Uint8Array(200),this.state32=XG(this.state)}clone(){return this._cloneInto()}keccak(){Z_(this.state32),GD(this.state32,this.rounds),Z_(this.state32),this.posOut=0,this.pos=0}update(e){J_(this),e=W6(e),Vp(e);const{blockLen:n,state:r}=this,s=e.length;for(let i=0;i<s;){const a=Math.min(n-this.pos,s-i);for(let o=0;o<a;o++)r[this.pos++]^=e[i++];this.pos===n&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:e,suffix:n,pos:r,blockLen:s}=this;e[r]^=n,n&128&&r===s-1&&this.keccak(),e[s-1]^=128,this.keccak()}writeInto(e){J_(this,!1),Vp(e),this.finish();const n=this.state,{blockLen:r}=this;for(let s=0,i=e.length;s<i;){this.posOut>=r&&this.keccak();const a=Math.min(r-this.posOut,i-s);e.set(n.subarray(this.posOut,this.posOut+a),s),this.posOut+=a,s+=a}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return pv(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(ZG(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,VD(this.state)}_cloneInto(e){const{blockLen:n,suffix:r,outputLen:s,rounds:i,enableXOF:a}=this;return e||(e=new rw(n,r,s,a,i)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=i,e.suffix=r,e.outputLen=s,e.enableXOF=a,e.destroyed=this.destroyed,e}}const ru=(t,e,n)=>oY(()=>new rw(e,t,n)),gY=ru(6,144,224/8),yY=ru(6,136,256/8),wY=ru(6,104,384/8),bY=ru(6,72,512/8),xY=ru(1,144,224/8),YD=ru(1,136,256/8),vY=ru(1,104,384/8),EY=ru(1,72,512/8),QD=(t,e,n)=>cY((r={})=>new rw(e,t,r.dkLen===void 0?n:r.dkLen,!0)),NY=QD(31,168,128/8),CY=QD(31,136,256/8),PEe=Object.freeze(Object.defineProperty({__proto__:null,Keccak:rw,keccakP:GD,keccak_224:xY,keccak_256:YD,keccak_384:vY,keccak_512:EY,sha3_224:gY,sha3_256:yY,sha3_384:wY,sha3_512:bY,shake128:NY,shake256:CY},Symbol.toStringTag,{value:"Module"}));let AY=class extends Map{constructor(e){super(),Object.defineProperty(this,"maxSize",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxSize=e}get(e){const n=super.get(e);return super.has(e)&&n!==void 0&&(this.delete(e),super.set(e,n)),n}set(e,n){if(super.set(e,n),this.maxSize&&this.size>this.maxSize){const r=this.keys().next().value;r&&this.delete(r)}return this}};const vd=(t,e,n)=>JSON.stringify(t,(r,s)=>typeof s=="bigint"?s.toString():s,n);function TY(t,e){let n=t.toString();const r=n.startsWith("-");r&&(n=n.slice(1)),n=n.padStart(e,"0");let[s,i]=[n.slice(0,n.length-e),n.slice(n.length-e)];return i=i.replace(/(0+)$/,""),`${r?"-":""}${s||"0"}${i?`.${i}`:""}`}const q6=t=>t;class Hg extends ya{constructor({body:e,cause:n,details:r,headers:s,status:i,url:a}){super("HTTP request failed.",{cause:n,details:r,metaMessages:[i&&`Status: ${i}`,`URL: ${q6(a)}`,e&&`Request body: ${vd(e)}`].filter(Boolean),name:"HttpRequestError"}),Object.defineProperty(this,"body",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"headers",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"status",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"url",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.body=e,this.headers=s,this.status=i,this.url=a}}class JD extends ya{constructor({body:e,error:n,url:r}){super("RPC Request failed.",{cause:n,details:n.message,metaMessages:[`URL: ${q6(r)}`,`Request body: ${vd(e)}`],name:"RpcRequestError"}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.code=n.code,this.data=n.data}}class t3 extends ya{constructor({body:e,url:n}){super("The request took too long to respond.",{details:"The request timed out.",metaMessages:[`URL: ${q6(n)}`,`Request body: ${vd(e)}`],name:"TimeoutError"})}}const SY=-1;class Ds extends ya{constructor(e,{code:n,docsPath:r,metaMessages:s,name:i,shortMessage:a}){super(a,{cause:e,docsPath:r,metaMessages:s||(e==null?void 0:e.metaMessages),name:i||"RpcError"}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.name=i||e.name,this.code=e instanceof JD?e.code:n??SY}}class ai extends Ds{constructor(e,n){super(e,n),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.data=n.data}}class U0 extends Ds{constructor(e){super(e,{code:U0.code,name:"ParseRpcError",shortMessage:"Invalid JSON was received by the server. An error occurred on the server while parsing the JSON text."})}}Object.defineProperty(U0,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32700});class M0 extends Ds{constructor(e){super(e,{code:M0.code,name:"InvalidRequestRpcError",shortMessage:"JSON is not a valid request object."})}}Object.defineProperty(M0,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32600});class L0 extends Ds{constructor(e,{method:n}={}){super(e,{code:L0.code,name:"MethodNotFoundRpcError",shortMessage:`The method${n?` "${n}"`:""} does not exist / is not available.`})}}Object.defineProperty(L0,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32601});class B0 extends Ds{constructor(e){super(e,{code:B0.code,name:"InvalidParamsRpcError",shortMessage:["Invalid parameters were provided to the RPC method.","Double check you have provided the correct parameters."].join(`
`)})}}Object.defineProperty(B0,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32602});class zp extends Ds{constructor(e){super(e,{code:zp.code,name:"InternalRpcError",shortMessage:"An internal error was received."})}}Object.defineProperty(zp,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32603});class $0 extends Ds{constructor(e){super(e,{code:$0.code,name:"InvalidInputRpcError",shortMessage:["Missing or invalid parameters.","Double check you have provided the correct parameters."].join(`
`)})}}Object.defineProperty($0,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32e3});class F0 extends Ds{constructor(e){super(e,{code:F0.code,name:"ResourceNotFoundRpcError",shortMessage:"Requested resource not found."}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ResourceNotFoundRpcError"})}}Object.defineProperty(F0,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32001});class H0 extends Ds{constructor(e){super(e,{code:H0.code,name:"ResourceUnavailableRpcError",shortMessage:"Requested resource not available."})}}Object.defineProperty(H0,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32002});class Wp extends Ds{constructor(e){super(e,{code:Wp.code,name:"TransactionRejectedRpcError",shortMessage:"Transaction creation failed."})}}Object.defineProperty(Wp,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32003});class $u extends Ds{constructor(e,{method:n}={}){super(e,{code:$u.code,name:"MethodNotSupportedRpcError",shortMessage:`Method${n?` "${n}"`:""} is not supported.`})}}Object.defineProperty($u,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32004});class qp extends Ds{constructor(e){super(e,{code:qp.code,name:"LimitExceededRpcError",shortMessage:"Request exceeds defined limit."})}}Object.defineProperty(qp,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32005});class V0 extends Ds{constructor(e){super(e,{code:V0.code,name:"JsonRpcVersionUnsupportedError",shortMessage:"Version of JSON-RPC protocol is not supported."})}}Object.defineProperty(V0,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32006});class Ed extends ai{constructor(e){super(e,{code:Ed.code,name:"UserRejectedRequestError",shortMessage:"User rejected the request."})}}Object.defineProperty(Ed,"code",{enumerable:!0,configurable:!0,writable:!0,value:4001});class z0 extends ai{constructor(e){super(e,{code:z0.code,name:"UnauthorizedProviderError",shortMessage:"The requested method and/or account has not been authorized by the user."})}}Object.defineProperty(z0,"code",{enumerable:!0,configurable:!0,writable:!0,value:4100});class W0 extends ai{constructor(e,{method:n}={}){super(e,{code:W0.code,name:"UnsupportedProviderMethodError",shortMessage:`The Provider does not support the requested method${n?` " ${n}"`:""}.`})}}Object.defineProperty(W0,"code",{enumerable:!0,configurable:!0,writable:!0,value:4200});class q0 extends ai{constructor(e){super(e,{code:q0.code,name:"ProviderDisconnectedError",shortMessage:"The Provider is disconnected from all chains."})}}Object.defineProperty(q0,"code",{enumerable:!0,configurable:!0,writable:!0,value:4900});class K0 extends ai{constructor(e){super(e,{code:K0.code,name:"ChainDisconnectedError",shortMessage:"The Provider is not connected to the requested chain."})}}Object.defineProperty(K0,"code",{enumerable:!0,configurable:!0,writable:!0,value:4901});class G0 extends ai{constructor(e){super(e,{code:G0.code,name:"SwitchChainError",shortMessage:"An error occurred when attempting to switch chain."})}}Object.defineProperty(G0,"code",{enumerable:!0,configurable:!0,writable:!0,value:4902});class Y0 extends ai{constructor(e){super(e,{code:Y0.code,name:"UnsupportedNonOptionalCapabilityError",shortMessage:"This Wallet does not support a capability that was not marked as optional."})}}Object.defineProperty(Y0,"code",{enumerable:!0,configurable:!0,writable:!0,value:5700});class Q0 extends ai{constructor(e){super(e,{code:Q0.code,name:"UnsupportedChainIdError",shortMessage:"This Wallet does not support the requested chain ID."})}}Object.defineProperty(Q0,"code",{enumerable:!0,configurable:!0,writable:!0,value:5710});class J0 extends ai{constructor(e){super(e,{code:J0.code,name:"DuplicateIdError",shortMessage:"There is already a bundle submitted with this ID."})}}Object.defineProperty(J0,"code",{enumerable:!0,configurable:!0,writable:!0,value:5720});class Z0 extends ai{constructor(e){super(e,{code:Z0.code,name:"UnknownBundleIdError",shortMessage:"This bundle id is unknown / has not been submitted"})}}Object.defineProperty(Z0,"code",{enumerable:!0,configurable:!0,writable:!0,value:5730});class X0 extends ai{constructor(e){super(e,{code:X0.code,name:"BundleTooLargeError",shortMessage:"The call bundle is too large for the Wallet to process."})}}Object.defineProperty(X0,"code",{enumerable:!0,configurable:!0,writable:!0,value:5740});class ey extends ai{constructor(e){super(e,{code:ey.code,name:"AtomicReadyWalletRejectedUpgradeError",shortMessage:"The Wallet can support atomicity after an upgrade, but the user rejected the upgrade."})}}Object.defineProperty(ey,"code",{enumerable:!0,configurable:!0,writable:!0,value:5750});class ty extends ai{constructor(e){super(e,{code:ty.code,name:"AtomicityNotSupportedError",shortMessage:"The wallet does not support atomic execution but the request requires it."})}}Object.defineProperty(ty,"code",{enumerable:!0,configurable:!0,writable:!0,value:5760});class kY extends Ds{constructor(e){super(e,{name:"UnknownRpcError",shortMessage:"An unknown RPC error occurred."})}}const _Y="modulepreload",IY=function(t){return"/"+t},n3={},Rn=function(e,n,r){let s=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const a=document.querySelector("meta[property=csp-nonce]"),o=(a==null?void 0:a.nonce)||(a==null?void 0:a.getAttribute("nonce"));s=Promise.allSettled(n.map(l=>{if(l=IY(l),l in n3)return;n3[l]=!0;const u=l.endsWith(".css"),d=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${d}`))return;const h=document.createElement("link");if(h.rel=u?"stylesheet":_Y,u||(h.as="script"),h.crossOrigin="",h.href=l,o&&h.setAttribute("nonce",o),document.head.appendChild(h),u)return new Promise((f,p)=>{h.addEventListener("load",f),h.addEventListener("error",()=>p(new Error(`Unable to preload CSS for ${l}`)))})}))}function i(a){const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=a,window.dispatchEvent(o),!o.defaultPrevented)throw a}return s.then(a=>{for(const o of a||[])o.status==="rejected"&&i(o.reason);return e().catch(i)})};class K6 extends ya{constructor({cause:e,message:n}={}){var s;const r=(s=n==null?void 0:n.replace("execution reverted: ",""))==null?void 0:s.replace("execution reverted","");super(`Execution reverted ${r?`with reason: ${r}`:"for an unknown reason"}.`,{cause:e,name:"ExecutionRevertedError"})}}Object.defineProperty(K6,"code",{enumerable:!0,configurable:!0,writable:!0,value:3});Object.defineProperty(K6,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/execution reverted/});function PY(){let t=()=>{},e=()=>{};return{promise:new Promise((r,s)=>{t=r,e=s}),resolve:t,reject:e}}const x2=new Map;function RY({fn:t,id:e,shouldSplitBatch:n,wait:r=0,sort:s}){const i=async()=>{const d=l();a();const h=d.map(({args:f})=>f);h.length!==0&&t(h).then(f=>{s&&Array.isArray(f)&&f.sort(s);for(let p=0;p<d.length;p++){const{resolve:g}=d[p];g==null||g([f[p],f])}}).catch(f=>{for(let p=0;p<d.length;p++){const{reject:g}=d[p];g==null||g(f)}})},a=()=>x2.delete(e),o=()=>l().map(({args:d})=>d),l=()=>x2.get(e)||[],u=d=>x2.set(e,[...l(),d]);return{flush:a,async schedule(d){const{promise:h,resolve:f,reject:p}=PY();return(n==null?void 0:n([...o(),d]))&&i(),l().length>0?(u({args:d,resolve:f,reject:p}),h):(u({args:d,resolve:f,reject:p}),setTimeout(i,r),h)}}}async function ZD(t){return new Promise(e=>setTimeout(e,t))}const iA=256;let Xw=iA,eb;function jY(t=11){if(!eb||Xw+t>iA*2){eb="",Xw=0;for(let e=0;e<iA;e++)eb+=(256+Math.random()*256|0).toString(16).substring(1)}return eb.substring(Xw,Xw+++t)}const tb=new AY(8192);function OY(t,{enabled:e=!0,id:n}){if(!e||!n)return t();if(tb.get(n))return tb.get(n);const r=t().finally(()=>tb.delete(n));return tb.set(n,r),r}function DY(t,{delay:e=100,retryCount:n=2,shouldRetry:r=()=>!0}={}){return new Promise((s,i)=>{const a=async({count:o=0}={})=>{const l=async({error:u})=>{const d=typeof e=="function"?e({count:o,error:u}):e;d&&await ZD(d),a({count:o+1})};try{const u=await t();s(u)}catch(u){if(o<n&&await r({count:o,error:u}))return l({error:u});i(u)}};a()})}function UY(t,e={}){return async(n,r={})=>{var h;const{dedupe:s=!1,methods:i,retryDelay:a=150,retryCount:o=3,uid:l}={...e,...r},{method:u}=n;if((h=i==null?void 0:i.exclude)!=null&&h.includes(u))throw new $u(new Error("method not supported"),{method:u});if(i!=null&&i.include&&!i.include.includes(u))throw new $u(new Error("method not supported"),{method:u});const d=s?HD(`${l}.${vd(n)}`):void 0;return OY(()=>DY(async()=>{try{return await t(n)}catch(f){const p=f;switch(p.code){case U0.code:throw new U0(p);case M0.code:throw new M0(p);case L0.code:throw new L0(p,{method:n.method});case B0.code:throw new B0(p);case zp.code:throw new zp(p);case $0.code:throw new $0(p);case F0.code:throw new F0(p);case H0.code:throw new H0(p);case Wp.code:throw new Wp(p);case $u.code:throw new $u(p,{method:n.method});case qp.code:throw new qp(p);case V0.code:throw new V0(p);case Ed.code:throw new Ed(p);case z0.code:throw new z0(p);case W0.code:throw new W0(p);case q0.code:throw new q0(p);case K0.code:throw new K0(p);case G0.code:throw new G0(p);case Y0.code:throw new Y0(p);case Q0.code:throw new Q0(p);case J0.code:throw new J0(p);case Z0.code:throw new Z0(p);case X0.code:throw new X0(p);case ey.code:throw new ey(p);case ty.code:throw new ty(p);case 5e3:throw new Ed(p);default:throw f instanceof ya?f:new kY(p)}}},{delay:({count:f,error:p})=>{var g;if(p&&p instanceof Hg){const m=(g=p==null?void 0:p.headers)==null?void 0:g.get("Retry-After");if(m!=null&&m.match(/\d/))return Number.parseInt(m)*1e3}return~~(1<<f)*a},retryCount:o,shouldRetry:({error:f})=>MY(f)}),{enabled:s,id:d})}}function MY(t){return"code"in t&&typeof t.code=="number"?t.code===-1||t.code===qp.code||t.code===zp.code:t instanceof Hg&&t.status?t.status===403||t.status===408||t.status===413||t.status===429||t.status===500||t.status===502||t.status===503||t.status===504:!0}function XD({key:t,methods:e,name:n,request:r,retryCount:s=3,retryDelay:i=150,timeout:a,type:o},l){const u=jY();return{config:{key:t,methods:e,name:n,request:r,retryCount:s,retryDelay:i,timeout:a,type:o},request:UY(r,{methods:e,retryCount:s,retryDelay:i,uid:u}),value:l}}function r3(t,e={}){const{key:n="fallback",name:r="Fallback",rank:s=!1,shouldThrow:i=LY,retryCount:a,retryDelay:o}=e;return({chain:l,pollingInterval:u=4e3,timeout:d,...h})=>{let f=t,p=()=>{};const g=XD({key:n,name:r,async request({method:m,params:y}){let b;const w=async(x=0)=>{const A=f[x]({...h,chain:l,retryCount:0,timeout:d});try{const T=await A.request({method:m,params:y});return p({method:m,params:y,response:T,transport:A,status:"success"}),T}catch(T){if(p({error:T,method:m,params:y,transport:A,status:"error"}),i(T)||x===f.length-1||(b??(b=f.slice(x+1).some(j=>{const{include:P,exclude:S}=j({chain:l}).config.methods||{};return P?P.includes(m):S?!S.includes(m):!0})),!b))throw T;return w(x+1)}};return w()},retryCount:a,retryDelay:o,type:"fallback"},{onResponse:m=>p=m,transports:f.map(m=>m({chain:l,retryCount:0}))});if(s){const m=typeof s=="object"?s:{};BY({chain:l,interval:m.interval??u,onTransports:y=>f=y,ping:m.ping,sampleCount:m.sampleCount,timeout:m.timeout,transports:f,weights:m.weights})}return g}}function LY(t){return!!("code"in t&&typeof t.code=="number"&&(t.code===Wp.code||t.code===Ed.code||K6.nodeMessage.test(t.message)||t.code===5e3))}function BY({chain:t,interval:e=4e3,onTransports:n,ping:r,sampleCount:s=10,timeout:i=1e3,transports:a,weights:o={}}){const{stability:l=.7,latency:u=.3}=o,d=[],h=async()=>{const f=await Promise.all(a.map(async m=>{const y=m({chain:t,retryCount:0,timeout:i}),b=Date.now();let w,x;try{await(r?r({transport:y}):y.request({method:"net_listening"})),x=1}catch{x=0}finally{w=Date.now()}return{latency:w-b,success:x}}));d.push(f),d.length>s&&d.shift();const p=Math.max(...d.map(m=>Math.max(...m.map(({latency:y})=>y)))),g=a.map((m,y)=>{const b=d.map(j=>j[y].latency),x=1-b.reduce((j,P)=>j+P,0)/b.length/p,A=d.map(j=>j[y].success),T=A.reduce((j,P)=>j+P,0)/A.length;return T===0?[0,y]:[u*x+l*T,y]}).sort((m,y)=>y[0]-m[0]);n(g.map(([,m])=>a[m])),await ZD(e),h()};h()}class $Y extends ya{constructor(){super("No URL was provided to the Transport. Please provide a valid RPC URL to the Transport.",{docsPath:"/docs/clients/intro",name:"UrlRequiredError"})}}function FY(t,{errorInstance:e=new Error("timed out"),timeout:n,signal:r}){return new Promise((s,i)=>{(async()=>{let a;try{const o=new AbortController;n>0&&(a=setTimeout(()=>{r&&o.abort()},n)),s(await t({signal:(o==null?void 0:o.signal)||null}))}catch(o){(o==null?void 0:o.name)==="AbortError"&&i(e),i(o)}finally{clearTimeout(a)}})()})}function HY(){return{current:0,take(){return this.current++},reset(){this.current=0}}}const s3=HY();function VY(t,e={}){return{async request(n){var h;const{body:r,onRequest:s=e.onRequest,onResponse:i=e.onResponse,timeout:a=e.timeout??1e4}=n,o={...e.fetchOptions??{},...n.fetchOptions??{}},{headers:l,method:u,signal:d}=o;try{const f=await FY(async({signal:g})=>{const m={...o,body:Array.isArray(r)?vd(r.map(x=>({jsonrpc:"2.0",id:x.id??s3.take(),...x}))):vd({jsonrpc:"2.0",id:r.id??s3.take(),...r}),headers:{"Content-Type":"application/json",...l},method:u||"POST",signal:d||(a>0?g:null)},y=new Request(t,m),b=await(s==null?void 0:s(y,m))??{...m,url:t};return await fetch(b.url??t,b)},{errorInstance:new t3({body:r,url:t}),timeout:a,signal:!0});i&&await i(f);let p;if((h=f.headers.get("Content-Type"))!=null&&h.startsWith("application/json"))p=await f.json();else{p=await f.text();try{p=JSON.parse(p||"{}")}catch(g){if(f.ok)throw g;p={error:p}}}if(!f.ok)throw new Hg({body:r,details:vd(p.error)||f.statusText,headers:f.headers,status:f.status,url:t});return p}catch(f){throw f instanceof Hg||f instanceof t3?f:new Hg({body:r,cause:f,url:t})}}}}function nb(t,e={}){const{batch:n,fetchOptions:r,key:s="http",methods:i,name:a="HTTP JSON-RPC",onFetchRequest:o,onFetchResponse:l,retryDelay:u,raw:d}=e;return({chain:h,retryCount:f,timeout:p})=>{const{batchSize:g=1e3,wait:m=0}=typeof n=="object"?n:{},y=e.retryCount??f,b=p??e.timeout??1e4,w=t||(h==null?void 0:h.rpcUrls.default.http[0]);if(!w)throw new $Y;const x=VY(w,{fetchOptions:r,onRequest:o,onResponse:l,timeout:b});return XD({key:s,methods:i,name:a,async request({method:A,params:T}){const j={method:A,params:T},{schedule:P}=RY({id:w,wait:m,shouldSplitBatch(R){return R.length>g},fn:R=>x.request({body:R}),sort:(R,O)=>R.id-O.id}),S=async R=>n?P(R):[await x.request({body:R})],[{error:E,result:k}]=await S(j);if(d)return{error:E,result:k};if(E)throw new JD({body:j,error:E,url:w});return k},retryCount:y,retryDelay:u,timeout:b,type:"http"},{fetchOptions:r,url:w})}}function eU(t){return{formatters:void 0,fees:void 0,serializers:void 0,...t}}const v2={createBalance(t,e){const n={name:t.metadata.name||"",symbol:t.metadata.symbol||"",decimals:t.metadata.decimals||0,value:t.metadata.value||0,price:t.metadata.price||0,iconUrl:t.metadata.iconUrl||""};return{name:n.name,symbol:n.symbol,chainId:e,address:t.address==="native"?void 0:this.convertAddressToCAIP10Address(t.address,e),value:n.value,price:n.price,quantity:{decimals:n.decimals.toString(),numeric:this.convertHexToBalance({hex:t.balance,decimals:n.decimals})},iconUrl:n.iconUrl}},convertHexToBalance({hex:t,decimals:e}){return TY(BigInt(t),e)},convertAddressToCAIP10Address(t,e){return`${e}:${t}`},createCAIP2ChainId(t,e){return`${e}:${parseInt(t,16)}`},getChainIdHexFromCAIP2ChainId(t){const e=t.split(":");if(e.length<2||!e[1])return"0x0";const n=e[1],r=parseInt(n,10);return isNaN(r)?"0x0":`0x${r.toString(16)}`},isWalletGetAssetsResponse(t){return typeof t!="object"||t===null?!1:Object.values(t).every(e=>Array.isArray(e)&&e.every(n=>this.isValidAsset(n)))},isValidAsset(t){return typeof t=="object"&&t!==null&&typeof t.address=="string"&&typeof t.balance=="string"&&(t.type==="ERC20"||t.type==="NATIVE")&&typeof t.metadata=="object"&&t.metadata!==null&&typeof t.metadata.name=="string"&&typeof t.metadata.symbol=="string"&&typeof t.metadata.decimals=="number"&&typeof t.metadata.price=="number"&&typeof t.metadata.iconUrl=="string"}},G6={async getMyTokensWithBalance(t){const e=_e.state.address,n=U.state.activeCaipNetwork,r=pe.getConnectorId("eip155")===Y.CONNECTOR_ID.AUTH;if(!e||!n)return[];const s=`${n.caipNetworkId}:${e}`,i=le.getBalanceCacheForCaipAddress(s);if(i)return i.balances;if(n.chainNamespace==="eip155"&&r){const o=await this.getEIP155Balances(e,n);if(o)return this.filterLowQualityTokens(o)}const a=await $e.getBalance(e,n.caipNetworkId,t);return this.filterLowQualityTokens(a.balances)},async getEIP155Balances(t,e){var n,r;try{const s=v2.getChainIdHexFromCAIP2ChainId(e.caipNetworkId),i=await me.getCapabilities(t);if(!((r=(n=i==null?void 0:i[s])==null?void 0:n.assetDiscovery)!=null&&r.supported))return null;const a=await me.walletGetAssets({account:t,chainFilter:[s]});if(!v2.isWalletGetAssetsResponse(a))return null;const l=(a[s]||[]).map(u=>v2.createBalance(u,e.caipNetworkId));return le.updateBalanceCache({caipAddress:`${e.caipNetworkId}:${t}`,balance:{balances:l},timestamp:Date.now()}),l}catch{return null}},filterLowQualityTokens(t){return t.filter(e=>e.quantity.decimals!=="0")}},Ea=tn({currentTab:0,tokenBalance:[],smartAccountDeployed:!1,addressLabels:new Map}),zY={state:Ea,replaceState(t){t&&Object.assign(Ea,Bd(t))},subscribe(t){return U.subscribeChainProp("accountState",e=>{if(e)return t(e)})},subscribeKey(t,e,n){let r;return U.subscribeChainProp("accountState",s=>{if(s){const i=s[t];r!==i&&(r=i,e(i))}},n)},setStatus(t,e){U.setAccountProp("status",t,e)},getCaipAddress(t){return U.getAccountProp("caipAddress",t)},setCaipAddress(t,e){const n=t?Ae.getPlainAddress(t):void 0;e===U.state.activeChain&&(U.state.activeCaipAddress=t),U.setAccountProp("caipAddress",t,e),U.setAccountProp("address",n,e)},setBalance(t,e,n){U.setAccountProp("balance",t,n),U.setAccountProp("balanceSymbol",e,n)},setProfileName(t,e){U.setAccountProp("profileName",t,e)},setProfileImage(t,e){U.setAccountProp("profileImage",t,e)},setUser(t,e){U.setAccountProp("user",t,e)},setAddressExplorerUrl(t,e){U.setAccountProp("addressExplorerUrl",t,e)},setSmartAccountDeployed(t,e){U.setAccountProp("smartAccountDeployed",t,e)},setCurrentTab(t){U.setAccountProp("currentTab",t,U.state.activeChain)},setTokenBalance(t,e){t&&U.setAccountProp("tokenBalance",t,e)},setShouldUpdateToAddress(t,e){U.setAccountProp("shouldUpdateToAddress",t,e)},addAddressLabel(t,e,n){const r=U.getAccountProp("addressLabels",n)||new Map;r.set(t,e),U.setAccountProp("addressLabels",r,n)},removeAddressLabel(t,e){const n=U.getAccountProp("addressLabels",e)||new Map;n.delete(t),U.setAccountProp("addressLabels",n,e)},setConnectedWalletInfo(t,e){U.setAccountProp("connectedWalletInfo",t,e,!1)},setPreferredAccountType(t,e){U.setAccountProp("preferredAccountType",t,e)},setSocialProvider(t,e){t&&U.setAccountProp("socialProvider",t,e)},setSocialWindow(t,e){U.setAccountProp("socialWindow",t?Bd(t):void 0,e)},setFarcasterUrl(t,e){U.setAccountProp("farcasterUrl",t,e)},async fetchTokenBalance(t){var i,a;Ea.balanceLoading=!0;const e=(i=U.state.activeCaipNetwork)==null?void 0:i.caipNetworkId,n=(a=U.state.activeCaipNetwork)==null?void 0:a.chainNamespace,r=U.state.activeCaipAddress,s=r?Ae.getPlainAddress(r):void 0;if(Ea.lastRetry&&!Ae.isAllowedRetry(Ea.lastRetry,30*It.ONE_SEC_MS))return Ea.balanceLoading=!1,[];try{if(s&&e&&n){const o=await G6.getMyTokensWithBalance();return _e.setTokenBalance(o,n),Ea.lastRetry=void 0,Ea.balanceLoading=!1,o}}catch(o){Ea.lastRetry=Date.now(),t==null||t(o),Ja.showError("Token Balance Unavailable")}finally{Ea.balanceLoading=!1}return[]},resetAccount(t){U.resetAccount(t)}},_e=ii(zY),WY={onSwitchNetwork({network:t,ignoreSwitchConfirmation:e=!1}){const n=U.state.activeCaipNetwork,r=Ve.state.data;if(t.id===(n==null?void 0:n.id))return;const i=_e.getCaipAddress(U.state.activeChain),a=t.chainNamespace!==U.state.activeChain,o=_e.getCaipAddress(t.chainNamespace),u=pe.getConnectorId(U.state.activeChain)===Y.CONNECTOR_ID.AUTH,d=Y.AUTH_CONNECTOR_SUPPORTED_CHAINS.find(h=>h===t.chainNamespace);e||u&&d?Ve.push("SwitchNetwork",{...r,network:t}):i&&a&&!o?Ve.push("SwitchActiveChain",{switchToChain:t.chainNamespace,navigateTo:"Connect",navigateWithReplace:!0,network:t}):Ve.push("SwitchNetwork",{...r,network:t})}},ls=tn({loading:!1,loadingNamespaceMap:new Map,open:!1,shake:!1,namespace:void 0}),qY={state:ls,subscribe(t){return Qn(ls,()=>t(ls))},subscribeKey(t,e){return Dr(ls,t,e)},async open(t){var i,a;const e=t==null?void 0:t.namespace,n=U.state.activeChain,r=e&&e!==n,s=(i=U.getAccountData(t==null?void 0:t.namespace))==null?void 0:i.caipAddress;if(me.state.wcBasic?Ue.prefetch({fetchNetworkImages:!1,fetchConnectorImages:!1}):await Ue.prefetch(),pe.setFilterByNamespace(t==null?void 0:t.namespace),Ct.setLoading(!0,e),e&&r){const o=((a=U.getNetworkData(e))==null?void 0:a.caipNetwork)||U.getRequestedCaipNetworks(e)[0];o&&WY.onSwitchNetwork({network:o,ignoreSwitchConfirmation:!0})}else{const o=U.state.noAdapters;te.state.manualWCControl||o&&!s?Ae.isMobile()?Ve.reset("AllWallets"):Ve.reset("ConnectingWalletConnectBasic"):t!=null&&t.view?Ve.reset(t.view,t.data):s?Ve.reset("Account"):Ve.reset("Connect")}ls.open=!0,no.set({open:!0}),Mt.sendEvent({type:"track",event:"MODAL_OPEN",properties:{connected:!!s}})},close(){const t=te.state.enableEmbedded,e=!!U.state.activeCaipAddress;ls.open&&Mt.sendEvent({type:"track",event:"MODAL_CLOSE",properties:{connected:e}}),ls.open=!1,Ve.reset("Connect"),Ct.clearLoading(),t?e?Ve.replace("Account"):Ve.push("Connect"):no.set({open:!1}),me.resetUri()},setLoading(t,e){e&&ls.loadingNamespaceMap.set(e,t),ls.loading=t,no.set({loading:t})},clearLoading(){ls.loadingNamespaceMap.clear(),ls.loading=!1},shake(){ls.shake||(ls.shake=!0,setTimeout(()=>{ls.shake=!1},500))}},Ct=ii(qY),Vg={id:"2b92315d-eab7-5bef-84fa-089a131333f5",name:"USD Coin",symbol:"USDC",networks:[{name:"ethereum-mainnet",display_name:"Ethereum",chain_id:"1",contract_address:"0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48"},{name:"polygon-mainnet",display_name:"Polygon",chain_id:"137",contract_address:"0x2791Bca1f2de4661ED88A30C99A7a9449Aa84174"}]},aA={id:"USD",payment_method_limits:[{id:"card",min:"10.00",max:"7500.00"},{id:"ach_bank_account",min:"10.00",max:"25000.00"}]},KY={providers:RD,selectedProvider:null,error:null,purchaseCurrency:Vg,paymentCurrency:aA,purchaseCurrencies:[Vg],paymentCurrencies:[],quotesLoading:!1},ft=tn(KY),GY={state:ft,subscribe(t){return Qn(ft,()=>t(ft))},subscribeKey(t,e){return Dr(ft,t,e)},setSelectedProvider(t){if(t&&t.name==="meld"){const e=U.state.activeChain,n=e===Y.CHAIN.SOLANA?"SOL":"USDC",r=U.getAccountProp("address",e)??"",s=new URL(t.url);s.searchParams.append("publicKey",iG),s.searchParams.append("destinationCurrencyCode",n),s.searchParams.append("walletAddress",r),s.searchParams.append("externalCustomerId",te.state.projectId),ft.selectedProvider={...t,url:s.toString()}}else ft.selectedProvider=t},setOnrampProviders(t){if(Array.isArray(t)&&t.every(e=>typeof e=="string")){const e=t,n=RD.filter(r=>e.includes(r.name));ft.providers=n}else ft.providers=[]},setPurchaseCurrency(t){ft.purchaseCurrency=t},setPaymentCurrency(t){ft.paymentCurrency=t},setPurchaseAmount(t){oA.state.purchaseAmount=t},setPaymentAmount(t){oA.state.paymentAmount=t},async getAvailableCurrencies(){const t=await $e.getOnrampOptions();ft.purchaseCurrencies=t.purchaseCurrencies,ft.paymentCurrencies=t.paymentCurrencies,ft.paymentCurrency=t.paymentCurrencies[0]||aA,ft.purchaseCurrency=t.purchaseCurrencies[0]||Vg,await Ue.fetchCurrencyImages(t.paymentCurrencies.map(e=>e.id)),await Ue.fetchTokenImages(t.purchaseCurrencies.map(e=>e.symbol))},async getQuote(){var t,e;ft.quotesLoading=!0;try{const n=await $e.getOnrampQuote({purchaseCurrency:ft.purchaseCurrency,paymentCurrency:ft.paymentCurrency,amount:((t=ft.paymentAmount)==null?void 0:t.toString())||"0",network:(e=ft.purchaseCurrency)==null?void 0:e.symbol});return ft.quotesLoading=!1,ft.purchaseAmount=Number(n==null?void 0:n.purchaseAmount.amount),n}catch(n){return ft.error=n.message,ft.quotesLoading=!1,null}finally{ft.quotesLoading=!1}},resetState(){ft.selectedProvider=null,ft.error=null,ft.purchaseCurrency=Vg,ft.paymentCurrency=aA,ft.purchaseCurrencies=[Vg],ft.paymentCurrencies=[],ft.paymentAmount=void 0,ft.purchaseAmount=void 0,ft.quotesLoading=!1}},oA=ii(GY),i3=2147483648,YY={convertEVMChainIdToCoinType(t){if(t>=i3)throw new Error("Invalid chainId");return(i3|t)>>>0}},ci=tn({suggestions:[],loading:!1}),QY={state:ci,subscribe(t){return Qn(ci,()=>t(ci))},subscribeKey(t,e){return Dr(ci,t,e)},async resolveName(t){var e,n;try{return await $e.lookupEnsName(t)}catch(r){const s=r;throw new Error(((n=(e=s==null?void 0:s.reasons)==null?void 0:e[0])==null?void 0:n.description)||"Error resolving name")}},async isNameRegistered(t){try{return await $e.lookupEnsName(t),!0}catch{return!1}},async getSuggestions(t){try{ci.loading=!0,ci.suggestions=[];const e=await $e.getEnsNameSuggestions(t);return ci.suggestions=e.suggestions.map(n=>({...n,name:n.name}))||[],ci.suggestions}catch(e){const n=zg.parseEnsApiError(e,"Error fetching name suggestions");throw new Error(n)}finally{ci.loading=!1}},async getNamesForAddress(t){try{if(!U.state.activeCaipNetwork)return[];const n=le.getEnsFromCacheForAddress(t);if(n)return n;const r=await $e.reverseLookupEnsName({address:t});return le.updateEnsCache({address:t,ens:r,timestamp:Date.now()}),r}catch(e){const n=zg.parseEnsApiError(e,"Error fetching names for address");throw new Error(n)}},async registerName(t){const e=U.state.activeCaipNetwork;if(!e)throw new Error("Network not found");const n=_e.state.address,r=pe.getAuthConnector();if(!n||!r)throw new Error("Address or auth connector not found");ci.loading=!0;try{const s=JSON.stringify({name:t,attributes:{},timestamp:Math.floor(Date.now()/1e3)});Ve.pushTransactionStack({onCancel(){Ve.replace("RegisterAccountName")}});const i=await me.signMessage(s);ci.loading=!1;const a=e.id;if(!a)throw new Error("Network not found");const o=YY.convertEVMChainIdToCoinType(Number(a));await $e.registerEnsName({coinType:o,address:n,signature:i,message:s}),_e.setProfileName(t,e.chainNamespace),Ve.replace("RegisterAccountNameSuccess")}catch(s){const i=zg.parseEnsApiError(s,`Error registering name ${t}`);throw Ve.replace("RegisterAccountName"),new Error(i)}finally{ci.loading=!1}},validateName(t){return/^[a-zA-Z0-9-]{4,}$/u.test(t)},parseEnsApiError(t,e){var r,s;const n=t;return((s=(r=n==null?void 0:n.reasons)==null?void 0:r[0])==null?void 0:s.description)||e}},zg=ii(QY);var Y6={exports:{}},Pf=typeof Reflect=="object"?Reflect:null,a3=Pf&&typeof Pf.apply=="function"?Pf.apply:function(e,n,r){return Function.prototype.apply.call(e,n,r)},rx;Pf&&typeof Pf.ownKeys=="function"?rx=Pf.ownKeys:Object.getOwnPropertySymbols?rx=function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:rx=function(e){return Object.getOwnPropertyNames(e)};function JY(t){console&&console.warn&&console.warn(t)}var tU=Number.isNaN||function(e){return e!==e};function zt(){zt.init.call(this)}Y6.exports=zt;Y6.exports.once=tQ;zt.EventEmitter=zt;zt.prototype._events=void 0;zt.prototype._eventsCount=0;zt.prototype._maxListeners=void 0;var o3=10;function M1(t){if(typeof t!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t)}Object.defineProperty(zt,"defaultMaxListeners",{enumerable:!0,get:function(){return o3},set:function(t){if(typeof t!="number"||t<0||tU(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");o3=t}});zt.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};zt.prototype.setMaxListeners=function(e){if(typeof e!="number"||e<0||tU(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this};function nU(t){return t._maxListeners===void 0?zt.defaultMaxListeners:t._maxListeners}zt.prototype.getMaxListeners=function(){return nU(this)};zt.prototype.emit=function(e){for(var n=[],r=1;r<arguments.length;r++)n.push(arguments[r]);var s=e==="error",i=this._events;if(i!==void 0)s=s&&i.error===void 0;else if(!s)return!1;if(s){var a;if(n.length>0&&(a=n[0]),a instanceof Error)throw a;var o=new Error("Unhandled error."+(a?" ("+a.message+")":""));throw o.context=a,o}var l=i[e];if(l===void 0)return!1;if(typeof l=="function")a3(l,this,n);else for(var u=l.length,d=oU(l,u),r=0;r<u;++r)a3(d[r],this,n);return!0};function rU(t,e,n,r){var s,i,a;if(M1(n),i=t._events,i===void 0?(i=t._events=Object.create(null),t._eventsCount=0):(i.newListener!==void 0&&(t.emit("newListener",e,n.listener?n.listener:n),i=t._events),a=i[e]),a===void 0)a=i[e]=n,++t._eventsCount;else if(typeof a=="function"?a=i[e]=r?[n,a]:[a,n]:r?a.unshift(n):a.push(n),s=nU(t),s>0&&a.length>s&&!a.warned){a.warned=!0;var o=new Error("Possible EventEmitter memory leak detected. "+a.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");o.name="MaxListenersExceededWarning",o.emitter=t,o.type=e,o.count=a.length,JY(o)}return t}zt.prototype.addListener=function(e,n){return rU(this,e,n,!1)};zt.prototype.on=zt.prototype.addListener;zt.prototype.prependListener=function(e,n){return rU(this,e,n,!0)};function ZY(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function sU(t,e,n){var r={fired:!1,wrapFn:void 0,target:t,type:e,listener:n},s=ZY.bind(r);return s.listener=n,r.wrapFn=s,s}zt.prototype.once=function(e,n){return M1(n),this.on(e,sU(this,e,n)),this};zt.prototype.prependOnceListener=function(e,n){return M1(n),this.prependListener(e,sU(this,e,n)),this};zt.prototype.removeListener=function(e,n){var r,s,i,a,o;if(M1(n),s=this._events,s===void 0)return this;if(r=s[e],r===void 0)return this;if(r===n||r.listener===n)--this._eventsCount===0?this._events=Object.create(null):(delete s[e],s.removeListener&&this.emit("removeListener",e,r.listener||n));else if(typeof r!="function"){for(i=-1,a=r.length-1;a>=0;a--)if(r[a]===n||r[a].listener===n){o=r[a].listener,i=a;break}if(i<0)return this;i===0?r.shift():XY(r,i),r.length===1&&(s[e]=r[0]),s.removeListener!==void 0&&this.emit("removeListener",e,o||n)}return this};zt.prototype.off=zt.prototype.removeListener;zt.prototype.removeAllListeners=function(e){var n,r,s;if(r=this._events,r===void 0)return this;if(r.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):r[e]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete r[e]),this;if(arguments.length===0){var i=Object.keys(r),a;for(s=0;s<i.length;++s)a=i[s],a!=="removeListener"&&this.removeAllListeners(a);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(n=r[e],typeof n=="function")this.removeListener(e,n);else if(n!==void 0)for(s=n.length-1;s>=0;s--)this.removeListener(e,n[s]);return this};function iU(t,e,n){var r=t._events;if(r===void 0)return[];var s=r[e];return s===void 0?[]:typeof s=="function"?n?[s.listener||s]:[s]:n?eQ(s):oU(s,s.length)}zt.prototype.listeners=function(e){return iU(this,e,!0)};zt.prototype.rawListeners=function(e){return iU(this,e,!1)};zt.listenerCount=function(t,e){return typeof t.listenerCount=="function"?t.listenerCount(e):aU.call(t,e)};zt.prototype.listenerCount=aU;function aU(t){var e=this._events;if(e!==void 0){var n=e[t];if(typeof n=="function")return 1;if(n!==void 0)return n.length}return 0}zt.prototype.eventNames=function(){return this._eventsCount>0?rx(this._events):[]};function oU(t,e){for(var n=new Array(e),r=0;r<e;++r)n[r]=t[r];return n}function XY(t,e){for(;e+1<t.length;e++)t[e]=t[e+1];t.pop()}function eQ(t){for(var e=new Array(t.length),n=0;n<e.length;++n)e[n]=t[n].listener||t[n];return e}function tQ(t,e){return new Promise(function(n,r){function s(a){t.removeListener(e,i),r(a)}function i(){typeof t.removeListener=="function"&&t.removeListener("error",s),n([].slice.call(arguments))}cU(t,e,i,{once:!0}),e!=="error"&&nQ(t,s,{once:!0})})}function nQ(t,e,n){typeof t.on=="function"&&cU(t,"error",e,n)}function cU(t,e,n,r){if(typeof t.on=="function")r.once?t.once(e,n):t.on(e,n);else if(typeof t.addEventListener=="function")t.addEventListener(e,function s(i){r.once&&t.removeEventListener(e,s),n(i)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof t)}var Pi=Y6.exports;const Q6=Fy(Pi);var he={};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var cA=function(t,e){return cA=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var s in r)r.hasOwnProperty(s)&&(n[s]=r[s])},cA(t,e)};function rQ(t,e){cA(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var lA=function(){return lA=Object.assign||function(e){for(var n,r=1,s=arguments.length;r<s;r++){n=arguments[r];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},lA.apply(this,arguments)};function sQ(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function iQ(t,e,n,r){var s=arguments.length,i=s<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,n):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(t,e,n,r);else for(var o=t.length-1;o>=0;o--)(a=t[o])&&(i=(s<3?a(i):s>3?a(e,n,i):a(e,n))||i);return s>3&&i&&Object.defineProperty(e,n,i),i}function aQ(t,e){return function(n,r){e(n,r,t)}}function oQ(t,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(t,e)}function cQ(t,e,n,r){function s(i){return i instanceof n?i:new n(function(a){a(i)})}return new(n||(n=Promise))(function(i,a){function o(d){try{u(r.next(d))}catch(h){a(h)}}function l(d){try{u(r.throw(d))}catch(h){a(h)}}function u(d){d.done?i(d.value):s(d.value).then(o,l)}u((r=r.apply(t,e||[])).next())})}function lQ(t,e){var n={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},r,s,i,a;return a={next:o(0),throw:o(1),return:o(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function o(u){return function(d){return l([u,d])}}function l(u){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,s&&(i=u[0]&2?s.return:u[0]?s.throw||((i=s.return)&&i.call(s),0):s.next)&&!(i=i.call(s,u[1])).done)return i;switch(s=0,i&&(u=[u[0]&2,i.value]),u[0]){case 0:case 1:i=u;break;case 4:return n.label++,{value:u[1],done:!1};case 5:n.label++,s=u[1],u=[0];continue;case 7:u=n.ops.pop(),n.trys.pop();continue;default:if(i=n.trys,!(i=i.length>0&&i[i.length-1])&&(u[0]===6||u[0]===2)){n=0;continue}if(u[0]===3&&(!i||u[1]>i[0]&&u[1]<i[3])){n.label=u[1];break}if(u[0]===6&&n.label<i[1]){n.label=i[1],i=u;break}if(i&&n.label<i[2]){n.label=i[2],n.ops.push(u);break}i[2]&&n.ops.pop(),n.trys.pop();continue}u=e.call(t,n)}catch(d){u=[6,d],s=0}finally{r=i=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}function uQ(t,e,n,r){r===void 0&&(r=n),t[r]=e[n]}function dQ(t,e){for(var n in t)n!=="default"&&!e.hasOwnProperty(n)&&(e[n]=t[n])}function uA(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function lU(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var r=n.call(t),s,i=[],a;try{for(;(e===void 0||e-- >0)&&!(s=r.next()).done;)i.push(s.value)}catch(o){a={error:o}}finally{try{s&&!s.done&&(n=r.return)&&n.call(r)}finally{if(a)throw a.error}}return i}function hQ(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(lU(arguments[e]));return t}function fQ(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;for(var r=Array(t),s=0,e=0;e<n;e++)for(var i=arguments[e],a=0,o=i.length;a<o;a++,s++)r[s]=i[a];return r}function ny(t){return this instanceof ny?(this.v=t,this):new ny(t)}function pQ(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),s,i=[];return s={},a("next"),a("throw"),a("return"),s[Symbol.asyncIterator]=function(){return this},s;function a(f){r[f]&&(s[f]=function(p){return new Promise(function(g,m){i.push([f,p,g,m])>1||o(f,p)})})}function o(f,p){try{l(r[f](p))}catch(g){h(i[0][3],g)}}function l(f){f.value instanceof ny?Promise.resolve(f.value.v).then(u,d):h(i[0][2],f)}function u(f){o("next",f)}function d(f){o("throw",f)}function h(f,p){f(p),i.shift(),i.length&&o(i[0][0],i[0][1])}}function mQ(t){var e,n;return e={},r("next"),r("throw",function(s){throw s}),r("return"),e[Symbol.iterator]=function(){return this},e;function r(s,i){e[s]=t[s]?function(a){return(n=!n)?{value:ny(t[s](a)),done:s==="return"}:i?i(a):a}:i}}function gQ(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof uA=="function"?uA(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(i){n[i]=t[i]&&function(a){return new Promise(function(o,l){a=t[i](a),s(o,l,a.done,a.value)})}}function s(i,a,o,l){Promise.resolve(l).then(function(u){i({value:u,done:o})},a)}}function yQ(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}function wQ(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var n in t)Object.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function bQ(t){return t&&t.__esModule?t:{default:t}}function xQ(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)}function vQ(t,e,n){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,n),n}const EQ=Object.freeze(Object.defineProperty({__proto__:null,get __assign(){return lA},__asyncDelegator:mQ,__asyncGenerator:pQ,__asyncValues:gQ,__await:ny,__awaiter:cQ,__classPrivateFieldGet:xQ,__classPrivateFieldSet:vQ,__createBinding:uQ,__decorate:iQ,__exportStar:dQ,__extends:rQ,__generator:lQ,__importDefault:bQ,__importStar:wQ,__makeTemplateObject:yQ,__metadata:oQ,__param:aQ,__read:lU,__rest:sQ,__spread:hQ,__spreadArrays:fQ,__values:uA},Symbol.toStringTag,{value:"Module"})),sw=I9(EQ);var E2={},Hm={},c3;function NQ(){if(c3)return Hm;c3=1,Object.defineProperty(Hm,"__esModule",{value:!0}),Hm.delay=void 0;function t(e){return new Promise(n=>{setTimeout(()=>{n(!0)},e)})}return Hm.delay=t,Hm}var lu={},N2={},uu={},l3;function CQ(){return l3||(l3=1,Object.defineProperty(uu,"__esModule",{value:!0}),uu.ONE_THOUSAND=uu.ONE_HUNDRED=void 0,uu.ONE_HUNDRED=100,uu.ONE_THOUSAND=1e3),uu}var C2={},u3;function AQ(){return u3||(u3=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.ONE_YEAR=t.FOUR_WEEKS=t.THREE_WEEKS=t.TWO_WEEKS=t.ONE_WEEK=t.THIRTY_DAYS=t.SEVEN_DAYS=t.FIVE_DAYS=t.THREE_DAYS=t.ONE_DAY=t.TWENTY_FOUR_HOURS=t.TWELVE_HOURS=t.SIX_HOURS=t.THREE_HOURS=t.ONE_HOUR=t.SIXTY_MINUTES=t.THIRTY_MINUTES=t.TEN_MINUTES=t.FIVE_MINUTES=t.ONE_MINUTE=t.SIXTY_SECONDS=t.THIRTY_SECONDS=t.TEN_SECONDS=t.FIVE_SECONDS=t.ONE_SECOND=void 0,t.ONE_SECOND=1,t.FIVE_SECONDS=5,t.TEN_SECONDS=10,t.THIRTY_SECONDS=30,t.SIXTY_SECONDS=60,t.ONE_MINUTE=t.SIXTY_SECONDS,t.FIVE_MINUTES=t.ONE_MINUTE*5,t.TEN_MINUTES=t.ONE_MINUTE*10,t.THIRTY_MINUTES=t.ONE_MINUTE*30,t.SIXTY_MINUTES=t.ONE_MINUTE*60,t.ONE_HOUR=t.SIXTY_MINUTES,t.THREE_HOURS=t.ONE_HOUR*3,t.SIX_HOURS=t.ONE_HOUR*6,t.TWELVE_HOURS=t.ONE_HOUR*12,t.TWENTY_FOUR_HOURS=t.ONE_HOUR*24,t.ONE_DAY=t.TWENTY_FOUR_HOURS,t.THREE_DAYS=t.ONE_DAY*3,t.FIVE_DAYS=t.ONE_DAY*5,t.SEVEN_DAYS=t.ONE_DAY*7,t.THIRTY_DAYS=t.ONE_DAY*30,t.ONE_WEEK=t.SEVEN_DAYS,t.TWO_WEEKS=t.ONE_WEEK*2,t.THREE_WEEKS=t.ONE_WEEK*3,t.FOUR_WEEKS=t.ONE_WEEK*4,t.ONE_YEAR=t.ONE_DAY*365}(C2)),C2}var d3;function uU(){return d3||(d3=1,function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=sw;e.__exportStar(CQ(),t),e.__exportStar(AQ(),t)}(N2)),N2}var h3;function TQ(){if(h3)return lu;h3=1,Object.defineProperty(lu,"__esModule",{value:!0}),lu.fromMiliseconds=lu.toMiliseconds=void 0;const t=uU();function e(r){return r*t.ONE_THOUSAND}lu.toMiliseconds=e;function n(r){return Math.floor(r/t.ONE_THOUSAND)}return lu.fromMiliseconds=n,lu}var f3;function SQ(){return f3||(f3=1,function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=sw;e.__exportStar(NQ(),t),e.__exportStar(TQ(),t)}(E2)),E2}var Nh={},p3;function kQ(){if(p3)return Nh;p3=1,Object.defineProperty(Nh,"__esModule",{value:!0}),Nh.Watch=void 0;class t{constructor(){this.timestamps=new Map}start(n){if(this.timestamps.has(n))throw new Error(`Watch already started for label: ${n}`);this.timestamps.set(n,{started:Date.now()})}stop(n){const r=this.get(n);if(typeof r.elapsed<"u")throw new Error(`Watch already stopped for label: ${n}`);const s=Date.now()-r.started;this.timestamps.set(n,{started:r.started,elapsed:s})}get(n){const r=this.timestamps.get(n);if(typeof r>"u")throw new Error(`No timestamp found for label: ${n}`);return r}elapsed(n){const r=this.get(n);return r.elapsed||Date.now()-r.started}}return Nh.Watch=t,Nh.default=t,Nh}var A2={},Vm={},m3;function _Q(){if(m3)return Vm;m3=1,Object.defineProperty(Vm,"__esModule",{value:!0}),Vm.IWatch=void 0;class t{}return Vm.IWatch=t,Vm}var g3;function IQ(){return g3||(g3=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),sw.__exportStar(_Q(),t)}(A2)),A2}(function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=sw;e.__exportStar(SQ(),t),e.__exportStar(kQ(),t),e.__exportStar(IQ(),t),e.__exportStar(uU(),t)})(he);class lh{}let PQ=class extends lh{constructor(e){super()}};const y3=he.FIVE_SECONDS,uh={pulse:"heartbeat_pulse"};let RQ=class dU extends PQ{constructor(e){super(e),this.events=new Pi.EventEmitter,this.interval=y3,this.interval=(e==null?void 0:e.interval)||y3}static async init(e){const n=new dU(e);return await n.init(),n}async init(){await this.initialize()}stop(){clearInterval(this.intervalRef)}on(e,n){this.events.on(e,n)}once(e,n){this.events.once(e,n)}off(e,n){this.events.off(e,n)}removeListener(e,n){this.events.removeListener(e,n)}async initialize(){this.intervalRef=setInterval(()=>this.pulse(),he.toMiliseconds(this.interval))}pulse(){this.events.emit(uh.pulse)}};const jQ=/"(?:_|\\u0{2}5[Ff]){2}(?:p|\\u0{2}70)(?:r|\\u0{2}72)(?:o|\\u0{2}6[Ff])(?:t|\\u0{2}74)(?:o|\\u0{2}6[Ff])(?:_|\\u0{2}5[Ff]){2}"\s*:/,OQ=/"(?:c|\\u0063)(?:o|\\u006[Ff])(?:n|\\u006[Ee])(?:s|\\u0073)(?:t|\\u0074)(?:r|\\u0072)(?:u|\\u0075)(?:c|\\u0063)(?:t|\\u0074)(?:o|\\u006[Ff])(?:r|\\u0072)"\s*:/,DQ=/^\s*["[{]|^\s*-?\d{1,16}(\.\d{1,17})?([Ee][+-]?\d+)?\s*$/;function UQ(t,e){if(t==="__proto__"||t==="constructor"&&e&&typeof e=="object"&&"prototype"in e){MQ(t);return}return e}function MQ(t){console.warn(`[destr] Dropping "${t}" key to prevent prototype pollution.`)}function rb(t,e={}){if(typeof t!="string")return t;if(t[0]==='"'&&t[t.length-1]==='"'&&t.indexOf("\\")===-1)return t.slice(1,-1);const n=t.trim();if(n.length<=9)switch(n.toLowerCase()){case"true":return!0;case"false":return!1;case"undefined":return;case"null":return null;case"nan":return Number.NaN;case"infinity":return Number.POSITIVE_INFINITY;case"-infinity":return Number.NEGATIVE_INFINITY}if(!DQ.test(t)){if(e.strict)throw new SyntaxError("[destr] Invalid JSON");return t}try{if(jQ.test(t)||OQ.test(t)){if(e.strict)throw new Error("[destr] Possible prototype pollution");return JSON.parse(t,UQ)}return JSON.parse(t)}catch(r){if(e.strict)throw r;return t}}function LQ(t){return!t||typeof t.then!="function"?Promise.resolve(t):t}function $n(t,...e){try{return LQ(t(...e))}catch(n){return Promise.reject(n)}}function BQ(t){const e=typeof t;return t===null||e!=="object"&&e!=="function"}function $Q(t){const e=Object.getPrototypeOf(t);return!e||e.isPrototypeOf(Object)}function sx(t){if(BQ(t))return String(t);if($Q(t)||Array.isArray(t))return JSON.stringify(t);if(typeof t.toJSON=="function")return sx(t.toJSON());throw new Error("[unstorage] Cannot stringify value!")}const dA="base64:";function FQ(t){return typeof t=="string"?t:dA+zQ(t)}function HQ(t){return typeof t!="string"||!t.startsWith(dA)?t:VQ(t.slice(dA.length))}function VQ(t){return globalThis.Buffer?Buffer.from(t,"base64"):Uint8Array.from(globalThis.atob(t),e=>e.codePointAt(0))}function zQ(t){return globalThis.Buffer?Buffer.from(t).toString("base64"):globalThis.btoa(String.fromCodePoint(...t))}function ps(t){var e;return t&&((e=t.split("?")[0])==null?void 0:e.replace(/[/\\]/g,":").replace(/:+/g,":").replace(/^:|:$/g,""))||""}function WQ(...t){return ps(t.join(":"))}function sb(t){return t=ps(t),t?t+":":""}function qQ(t,e){if(e===void 0)return!0;let n=0,r=t.indexOf(":");for(;r>-1;)n++,r=t.indexOf(":",r+1);return n<=e}function KQ(t,e){return e?t.startsWith(e)&&t[t.length-1]!=="$":t[t.length-1]!=="$"}const GQ="memory",YQ=()=>{const t=new Map;return{name:GQ,getInstance:()=>t,hasItem(e){return t.has(e)},getItem(e){return t.get(e)??null},getItemRaw(e){return t.get(e)??null},setItem(e,n){t.set(e,n)},setItemRaw(e,n){t.set(e,n)},removeItem(e){t.delete(e)},getKeys(){return[...t.keys()]},clear(){t.clear()},dispose(){t.clear()}}};function QQ(t={}){const e={mounts:{"":t.driver||YQ()},mountpoints:[""],watching:!1,watchListeners:[],unwatch:{}},n=u=>{for(const d of e.mountpoints)if(u.startsWith(d))return{base:d,relativeKey:u.slice(d.length),driver:e.mounts[d]};return{base:"",relativeKey:u,driver:e.mounts[""]}},r=(u,d)=>e.mountpoints.filter(h=>h.startsWith(u)||d&&u.startsWith(h)).map(h=>({relativeBase:u.length>h.length?u.slice(h.length):void 0,mountpoint:h,driver:e.mounts[h]})),s=(u,d)=>{if(e.watching){d=ps(d);for(const h of e.watchListeners)h(u,d)}},i=async()=>{if(!e.watching){e.watching=!0;for(const u in e.mounts)e.unwatch[u]=await w3(e.mounts[u],s,u)}},a=async()=>{if(e.watching){for(const u in e.unwatch)await e.unwatch[u]();e.unwatch={},e.watching=!1}},o=(u,d,h)=>{const f=new Map,p=g=>{let m=f.get(g.base);return m||(m={driver:g.driver,base:g.base,items:[]},f.set(g.base,m)),m};for(const g of u){const m=typeof g=="string",y=ps(m?g:g.key),b=m?void 0:g.value,w=m||!g.options?d:{...d,...g.options},x=n(y);p(x).items.push({key:y,value:b,relativeKey:x.relativeKey,options:w})}return Promise.all([...f.values()].map(g=>h(g))).then(g=>g.flat())},l={hasItem(u,d={}){u=ps(u);const{relativeKey:h,driver:f}=n(u);return $n(f.hasItem,h,d)},getItem(u,d={}){u=ps(u);const{relativeKey:h,driver:f}=n(u);return $n(f.getItem,h,d).then(p=>rb(p))},getItems(u,d={}){return o(u,d,h=>h.driver.getItems?$n(h.driver.getItems,h.items.map(f=>({key:f.relativeKey,options:f.options})),d).then(f=>f.map(p=>({key:WQ(h.base,p.key),value:rb(p.value)}))):Promise.all(h.items.map(f=>$n(h.driver.getItem,f.relativeKey,f.options).then(p=>({key:f.key,value:rb(p)})))))},getItemRaw(u,d={}){u=ps(u);const{relativeKey:h,driver:f}=n(u);return f.getItemRaw?$n(f.getItemRaw,h,d):$n(f.getItem,h,d).then(p=>HQ(p))},async setItem(u,d,h={}){if(d===void 0)return l.removeItem(u);u=ps(u);const{relativeKey:f,driver:p}=n(u);p.setItem&&(await $n(p.setItem,f,sx(d),h),p.watch||s("update",u))},async setItems(u,d){await o(u,d,async h=>{if(h.driver.setItems)return $n(h.driver.setItems,h.items.map(f=>({key:f.relativeKey,value:sx(f.value),options:f.options})),d);h.driver.setItem&&await Promise.all(h.items.map(f=>$n(h.driver.setItem,f.relativeKey,sx(f.value),f.options)))})},async setItemRaw(u,d,h={}){if(d===void 0)return l.removeItem(u,h);u=ps(u);const{relativeKey:f,driver:p}=n(u);if(p.setItemRaw)await $n(p.setItemRaw,f,d,h);else if(p.setItem)await $n(p.setItem,f,FQ(d),h);else return;p.watch||s("update",u)},async removeItem(u,d={}){typeof d=="boolean"&&(d={removeMeta:d}),u=ps(u);const{relativeKey:h,driver:f}=n(u);f.removeItem&&(await $n(f.removeItem,h,d),(d.removeMeta||d.removeMata)&&await $n(f.removeItem,h+"$",d),f.watch||s("remove",u))},async getMeta(u,d={}){typeof d=="boolean"&&(d={nativeOnly:d}),u=ps(u);const{relativeKey:h,driver:f}=n(u),p=Object.create(null);if(f.getMeta&&Object.assign(p,await $n(f.getMeta,h,d)),!d.nativeOnly){const g=await $n(f.getItem,h+"$",d).then(m=>rb(m));g&&typeof g=="object"&&(typeof g.atime=="string"&&(g.atime=new Date(g.atime)),typeof g.mtime=="string"&&(g.mtime=new Date(g.mtime)),Object.assign(p,g))}return p},setMeta(u,d,h={}){return this.setItem(u+"$",d,h)},removeMeta(u,d={}){return this.removeItem(u+"$",d)},async getKeys(u,d={}){var y;u=sb(u);const h=r(u,!0);let f=[];const p=[];let g=!0;for(const b of h){(y=b.driver.flags)!=null&&y.maxDepth||(g=!1);const w=await $n(b.driver.getKeys,b.relativeBase,d);for(const x of w){const A=b.mountpoint+ps(x);f.some(T=>A.startsWith(T))||p.push(A)}f=[b.mountpoint,...f.filter(x=>!x.startsWith(b.mountpoint))]}const m=d.maxDepth!==void 0&&!g;return p.filter(b=>(!m||qQ(b,d.maxDepth))&&KQ(b,u))},async clear(u,d={}){u=sb(u),await Promise.all(r(u,!1).map(async h=>{if(h.driver.clear)return $n(h.driver.clear,h.relativeBase,d);if(h.driver.removeItem){const f=await h.driver.getKeys(h.relativeBase||"",d);return Promise.all(f.map(p=>h.driver.removeItem(p,d)))}}))},async dispose(){await Promise.all(Object.values(e.mounts).map(u=>b3(u)))},async watch(u){return await i(),e.watchListeners.push(u),async()=>{e.watchListeners=e.watchListeners.filter(d=>d!==u),e.watchListeners.length===0&&await a()}},async unwatch(){e.watchListeners=[],await a()},mount(u,d){if(u=sb(u),u&&e.mounts[u])throw new Error(`already mounted at ${u}`);return u&&(e.mountpoints.push(u),e.mountpoints.sort((h,f)=>f.length-h.length)),e.mounts[u]=d,e.watching&&Promise.resolve(w3(d,s,u)).then(h=>{e.unwatch[u]=h}).catch(console.error),l},async unmount(u,d=!0){var h,f;u=sb(u),!(!u||!e.mounts[u])&&(e.watching&&u in e.unwatch&&((f=(h=e.unwatch)[u])==null||f.call(h),delete e.unwatch[u]),d&&await b3(e.mounts[u]),e.mountpoints=e.mountpoints.filter(p=>p!==u),delete e.mounts[u])},getMount(u=""){u=ps(u)+":";const d=n(u);return{driver:d.driver,base:d.base}},getMounts(u="",d={}){return u=ps(u),r(u,d.parents).map(f=>({driver:f.driver,base:f.mountpoint}))},keys:(u,d={})=>l.getKeys(u,d),get:(u,d={})=>l.getItem(u,d),set:(u,d,h={})=>l.setItem(u,d,h),has:(u,d={})=>l.hasItem(u,d),del:(u,d={})=>l.removeItem(u,d),remove:(u,d={})=>l.removeItem(u,d)};return l}function w3(t,e,n){return t.watch?t.watch((r,s)=>e(r,n+s)):()=>{}}async function b3(t){typeof t.dispose=="function"&&await $n(t.dispose)}function dh(t){return new Promise((e,n)=>{t.oncomplete=t.onsuccess=()=>e(t.result),t.onabort=t.onerror=()=>n(t.error)})}function hU(t,e){let n;const r=()=>{if(n)return n;const s=indexedDB.open(t);return s.onupgradeneeded=()=>s.result.createObjectStore(e),n=dh(s),n.then(i=>{i.onclose=()=>n=void 0},()=>{}),n};return(s,i)=>r().then(a=>i(a.transaction(e,s).objectStore(e)))}let T2;function iw(){return T2||(T2=hU("keyval-store","keyval")),T2}function x3(t,e=iw()){return e("readonly",n=>dh(n.get(t)))}function JQ(t,e,n=iw()){return n("readwrite",r=>(r.put(e,t),dh(r.transaction)))}function ZQ(t,e=iw()){return e("readwrite",n=>(n.delete(t),dh(n.transaction)))}function XQ(t=iw()){return t("readwrite",e=>(e.clear(),dh(e.transaction)))}function eJ(t,e){return t.openCursor().onsuccess=function(){this.result&&(e(this.result),this.result.continue())},dh(t.transaction)}function tJ(t=iw()){return t("readonly",e=>{if(e.getAllKeys)return dh(e.getAllKeys());const n=[];return eJ(e,r=>n.push(r.key)).then(()=>n)})}const nJ=t=>JSON.stringify(t,(e,n)=>typeof n=="bigint"?n.toString()+"n":n),rJ=t=>{const e=/([\[:])?(\d{17,}|(?:[9](?:[1-9]07199254740991|0[1-9]7199254740991|00[8-9]199254740991|007[2-9]99254740991|007199[3-9]54740991|0071992[6-9]4740991|00719925[5-9]740991|007199254[8-9]40991|0071992547[5-9]0991|00719925474[1-9]991|00719925474099[2-9])))([,\}\]])/g,n=t.replace(e,'$1"$2n"$3');return JSON.parse(n,(r,s)=>typeof s=="string"&&s.match(/^\d+n$/)?BigInt(s.substring(0,s.length-1)):s)};function Fd(t){if(typeof t!="string")throw new Error(`Cannot safe json parse value of type ${typeof t}`);try{return rJ(t)}catch{return t}}function dc(t){return typeof t=="string"?t:nJ(t)||""}const sJ="idb-keyval";var iJ=(t={})=>{const e=t.base&&t.base.length>0?`${t.base}:`:"",n=s=>e+s;let r;return t.dbName&&t.storeName&&(r=hU(t.dbName,t.storeName)),{name:sJ,options:t,async hasItem(s){return!(typeof await x3(n(s),r)>"u")},async getItem(s){return await x3(n(s),r)??null},setItem(s,i){return JQ(n(s),i,r)},removeItem(s){return ZQ(n(s),r)},getKeys(){return tJ(r)},clear(){return XQ(r)}}};const aJ="WALLET_CONNECT_V2_INDEXED_DB",oJ="keyvaluestorage";let cJ=class{constructor(){this.indexedDb=QQ({driver:iJ({dbName:aJ,storeName:oJ})})}async getKeys(){return this.indexedDb.getKeys()}async getEntries(){return(await this.indexedDb.getItems(await this.indexedDb.getKeys())).map(e=>[e.key,e.value])}async getItem(e){const n=await this.indexedDb.getItem(e);if(n!==null)return n}async setItem(e,n){await this.indexedDb.setItem(e,dc(n))}async removeItem(e){await this.indexedDb.removeItem(e)}};var S2=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{},ix={exports:{}};(function(){let t;function e(){}t=e,t.prototype.getItem=function(n){return this.hasOwnProperty(n)?String(this[n]):null},t.prototype.setItem=function(n,r){this[n]=String(r)},t.prototype.removeItem=function(n){delete this[n]},t.prototype.clear=function(){const n=this;Object.keys(n).forEach(function(r){n[r]=void 0,delete n[r]})},t.prototype.key=function(n){return n=n||0,Object.keys(this)[n]},t.prototype.__defineGetter__("length",function(){return Object.keys(this).length}),typeof S2<"u"&&S2.localStorage?ix.exports=S2.localStorage:typeof window<"u"&&window.localStorage?ix.exports=window.localStorage:ix.exports=new e})();function lJ(t){var e;return[t[0],Fd((e=t[1])!=null?e:"")]}let uJ=class{constructor(){this.localStorage=ix.exports}async getKeys(){return Object.keys(this.localStorage)}async getEntries(){return Object.entries(this.localStorage).map(lJ)}async getItem(e){const n=this.localStorage.getItem(e);if(n!==null)return Fd(n)}async setItem(e,n){this.localStorage.setItem(e,dc(n))}async removeItem(e){this.localStorage.removeItem(e)}};const dJ="wc_storage_version",v3=1,hJ=async(t,e,n)=>{const r=dJ,s=await e.getItem(r);if(s&&s>=v3){n(e);return}const i=await t.getKeys();if(!i.length){n(e);return}const a=[];for(;i.length;){const o=i.shift();if(!o)continue;const l=o.toLowerCase();if(l.includes("wc@")||l.includes("walletconnect")||l.includes("wc_")||l.includes("wallet_connect")){const u=await t.getItem(o);await e.setItem(o,u),a.push(o)}}await e.setItem(r,v3),n(e),fJ(t,a)},fJ=async(t,e)=>{e.length&&e.forEach(async n=>{await t.removeItem(n)})};let pJ=class{constructor(){this.initialized=!1,this.setInitialized=n=>{this.storage=n,this.initialized=!0};const e=new uJ;this.storage=e;try{const n=new cJ;hJ(e,n,this.setInitialized)}catch{this.initialized=!0}}async getKeys(){return await this.initialize(),this.storage.getKeys()}async getEntries(){return await this.initialize(),this.storage.getEntries()}async getItem(e){return await this.initialize(),this.storage.getItem(e)}async setItem(e,n){return await this.initialize(),this.storage.setItem(e,n)}async removeItem(e){return await this.initialize(),this.storage.removeItem(e)}async initialize(){this.initialized||await new Promise(e=>{const n=setInterval(()=>{this.initialized&&(clearInterval(n),e())},20)})}};function mJ(t){try{return JSON.stringify(t)}catch{return'"[Circular]"'}}var gJ=yJ;function yJ(t,e,n){var r=n&&n.stringify||mJ,s=1;if(typeof t=="object"&&t!==null){var i=e.length+s;if(i===1)return t;var a=new Array(i);a[0]=r(t);for(var o=1;o<i;o++)a[o]=r(e[o]);return a.join(" ")}if(typeof t!="string")return t;var l=e.length;if(l===0)return t;for(var u="",d=1-s,h=-1,f=t&&t.length||0,p=0;p<f;){if(t.charCodeAt(p)===37&&p+1<f){switch(h=h>-1?h:0,t.charCodeAt(p+1)){case 100:case 102:if(d>=l||e[d]==null)break;h<p&&(u+=t.slice(h,p)),u+=Number(e[d]),h=p+2,p++;break;case 105:if(d>=l||e[d]==null)break;h<p&&(u+=t.slice(h,p)),u+=Math.floor(Number(e[d])),h=p+2,p++;break;case 79:case 111:case 106:if(d>=l||e[d]===void 0)break;h<p&&(u+=t.slice(h,p));var g=typeof e[d];if(g==="string"){u+="'"+e[d]+"'",h=p+2,p++;break}if(g==="function"){u+=e[d].name||"<anonymous>",h=p+2,p++;break}u+=r(e[d]),h=p+2,p++;break;case 115:if(d>=l)break;h<p&&(u+=t.slice(h,p)),u+=String(e[d]),h=p+2,p++;break;case 37:h<p&&(u+=t.slice(h,p)),u+="%",h=p+2,p++,d--;break}++d}++p}return h===-1?t:(h<f&&(u+=t.slice(h)),u)}const E3=gJ;var Kh=ro;const ry=SJ().console||{},wJ={mapHttpRequest:ib,mapHttpResponse:ib,wrapRequestSerializer:k2,wrapResponseSerializer:k2,wrapErrorSerializer:k2,req:ib,res:ib,err:NJ};function bJ(t,e){return Array.isArray(t)?t.filter(function(r){return r!=="!stdSerializers.err"}):t===!0?Object.keys(e):!1}function ro(t){t=t||{},t.browser=t.browser||{};const e=t.browser.transmit;if(e&&typeof e.send!="function")throw Error("pino: transmit option must have a send function");const n=t.browser.write||ry;t.browser.write&&(t.browser.asObject=!0);const r=t.serializers||{},s=bJ(t.browser.serialize,r);let i=t.browser.serialize;Array.isArray(t.browser.serialize)&&t.browser.serialize.indexOf("!stdSerializers.err")>-1&&(i=!1);const a=["error","fatal","warn","info","debug","trace"];typeof n=="function"&&(n.error=n.fatal=n.warn=n.info=n.debug=n.trace=n),t.enabled===!1&&(t.level="silent");const o=t.level||"info",l=Object.create(n);l.log||(l.log=sy),Object.defineProperty(l,"levelVal",{get:d}),Object.defineProperty(l,"level",{get:h,set:f});const u={transmit:e,serialize:s,asObject:t.browser.asObject,levels:a,timestamp:CJ(t)};l.levels=ro.levels,l.level=o,l.setMaxListeners=l.getMaxListeners=l.emit=l.addListener=l.on=l.prependListener=l.once=l.prependOnceListener=l.removeListener=l.removeAllListeners=l.listeners=l.listenerCount=l.eventNames=l.write=l.flush=sy,l.serializers=r,l._serialize=s,l._stdErrSerialize=i,l.child=p,e&&(l._logEvent=hA());function d(){return this.level==="silent"?1/0:this.levels.values[this.level]}function h(){return this._level}function f(g){if(g!=="silent"&&!this.levels.values[g])throw Error("unknown level "+g);this._level=g,Ch(u,l,"error","log"),Ch(u,l,"fatal","error"),Ch(u,l,"warn","error"),Ch(u,l,"info","log"),Ch(u,l,"debug","log"),Ch(u,l,"trace","log")}function p(g,m){if(!g)throw new Error("missing bindings for child Pino");m=m||{},s&&g.serializers&&(m.serializers=g.serializers);const y=m.serializers;if(s&&y){var b=Object.assign({},r,y),w=t.browser.serialize===!0?Object.keys(b):s;delete g.serializers,L1([g],w,b,this._stdErrSerialize)}function x(A){this._childLevel=(A._childLevel|0)+1,this.error=Ah(A,g,"error"),this.fatal=Ah(A,g,"fatal"),this.warn=Ah(A,g,"warn"),this.info=Ah(A,g,"info"),this.debug=Ah(A,g,"debug"),this.trace=Ah(A,g,"trace"),b&&(this.serializers=b,this._serialize=w),e&&(this._logEvent=hA([].concat(A._logEvent.bindings,g)))}return x.prototype=this,new x(this)}return l}ro.levels={values:{fatal:60,error:50,warn:40,info:30,debug:20,trace:10},labels:{10:"trace",20:"debug",30:"info",40:"warn",50:"error",60:"fatal"}};ro.stdSerializers=wJ;ro.stdTimeFunctions=Object.assign({},{nullTime:fU,epochTime:pU,unixTime:AJ,isoTime:TJ});function Ch(t,e,n,r){const s=Object.getPrototypeOf(e);e[n]=e.levelVal>e.levels.values[n]?sy:s[n]?s[n]:ry[n]||ry[r]||sy,xJ(t,e,n)}function xJ(t,e,n){!t.transmit&&e[n]===sy||(e[n]=function(r){return function(){const i=t.timestamp(),a=new Array(arguments.length),o=Object.getPrototypeOf&&Object.getPrototypeOf(this)===ry?ry:this;for(var l=0;l<a.length;l++)a[l]=arguments[l];if(t.serialize&&!t.asObject&&L1(a,this._serialize,this.serializers,this._stdErrSerialize),t.asObject?r.call(o,vJ(this,n,a,i)):r.apply(o,a),t.transmit){const u=t.transmit.level||e.level,d=ro.levels.values[u],h=ro.levels.values[n];if(h<d)return;EJ(this,{ts:i,methodLevel:n,methodValue:h,transmitValue:ro.levels.values[t.transmit.level||e.level],send:t.transmit.send,val:e.levelVal},a)}}}(e[n]))}function vJ(t,e,n,r){t._serialize&&L1(n,t._serialize,t.serializers,t._stdErrSerialize);const s=n.slice();let i=s[0];const a={};r&&(a.time=r),a.level=ro.levels.values[e];let o=(t._childLevel|0)+1;if(o<1&&(o=1),i!==null&&typeof i=="object"){for(;o--&&typeof s[0]=="object";)Object.assign(a,s.shift());i=s.length?E3(s.shift(),s):void 0}else typeof i=="string"&&(i=E3(s.shift(),s));return i!==void 0&&(a.msg=i),a}function L1(t,e,n,r){for(const s in t)if(r&&t[s]instanceof Error)t[s]=ro.stdSerializers.err(t[s]);else if(typeof t[s]=="object"&&!Array.isArray(t[s]))for(const i in t[s])e&&e.indexOf(i)>-1&&i in n&&(t[s][i]=n[i](t[s][i]))}function Ah(t,e,n){return function(){const r=new Array(1+arguments.length);r[0]=e;for(var s=1;s<r.length;s++)r[s]=arguments[s-1];return t[n].apply(this,r)}}function EJ(t,e,n){const r=e.send,s=e.ts,i=e.methodLevel,a=e.methodValue,o=e.val,l=t._logEvent.bindings;L1(n,t._serialize||Object.keys(t.serializers),t.serializers,t._stdErrSerialize===void 0?!0:t._stdErrSerialize),t._logEvent.ts=s,t._logEvent.messages=n.filter(function(u){return l.indexOf(u)===-1}),t._logEvent.level.label=i,t._logEvent.level.value=a,r(i,t._logEvent,o),t._logEvent=hA(l)}function hA(t){return{ts:0,messages:[],bindings:t||[],level:{label:"",value:0}}}function NJ(t){const e={type:t.constructor.name,msg:t.message,stack:t.stack};for(const n in t)e[n]===void 0&&(e[n]=t[n]);return e}function CJ(t){return typeof t.timestamp=="function"?t.timestamp:t.timestamp===!1?fU:pU}function ib(){return{}}function k2(t){return t}function sy(){}function fU(){return!1}function pU(){return Date.now()}function AJ(){return Math.round(Date.now()/1e3)}function TJ(){return new Date(Date.now()).toISOString()}function SJ(){function t(e){return typeof e<"u"&&e}try{return typeof globalThis<"u"||Object.defineProperty(Object.prototype,"globalThis",{get:function(){return delete Object.prototype.globalThis,this.globalThis=this},configurable:!0}),globalThis}catch{return t(self)||t(window)||t(this)||{}}}const aw=Fy(Kh),kJ={level:"info"},ow="custom_context",J6=1e3*1024;let _J=class{constructor(e){this.nodeValue=e,this.sizeInBytes=new TextEncoder().encode(this.nodeValue).length,this.next=null}get value(){return this.nodeValue}get size(){return this.sizeInBytes}},N3=class{constructor(e){this.head=null,this.tail=null,this.lengthInNodes=0,this.maxSizeInBytes=e,this.sizeInBytes=0}append(e){const n=new _J(e);if(n.size>this.maxSizeInBytes)throw new Error(`[LinkedList] Value too big to insert into list: ${e} with size ${n.size}`);for(;this.size+n.size>this.maxSizeInBytes;)this.shift();this.head?(this.tail&&(this.tail.next=n),this.tail=n):(this.head=n,this.tail=n),this.lengthInNodes++,this.sizeInBytes+=n.size}shift(){if(!this.head)return;const e=this.head;this.head=this.head.next,this.head||(this.tail=null),this.lengthInNodes--,this.sizeInBytes-=e.size}toArray(){const e=[];let n=this.head;for(;n!==null;)e.push(n.value),n=n.next;return e}get length(){return this.lengthInNodes}get size(){return this.sizeInBytes}toOrderedArray(){return Array.from(this)}[Symbol.iterator](){let e=this.head;return{next:()=>{if(!e)return{done:!0,value:null};const n=e.value;return e=e.next,{done:!1,value:n}}}}},mU=class{constructor(e,n=J6){this.level=e??"error",this.levelValue=Kh.levels.values[this.level],this.MAX_LOG_SIZE_IN_BYTES=n,this.logs=new N3(this.MAX_LOG_SIZE_IN_BYTES)}forwardToConsole(e,n){n===Kh.levels.values.error?console.error(e):n===Kh.levels.values.warn?console.warn(e):n===Kh.levels.values.debug?console.debug(e):n===Kh.levels.values.trace?console.trace(e):console.log(e)}appendToLogs(e){this.logs.append(dc({timestamp:new Date().toISOString(),log:e}));const n=typeof e=="string"?JSON.parse(e).level:e.level;n>=this.levelValue&&this.forwardToConsole(e,n)}getLogs(){return this.logs}clearLogs(){this.logs=new N3(this.MAX_LOG_SIZE_IN_BYTES)}getLogArray(){return Array.from(this.logs)}logsToBlob(e){const n=this.getLogArray();return n.push(dc({extraMetadata:e})),new Blob(n,{type:"application/json"})}},IJ=class{constructor(e,n=J6){this.baseChunkLogger=new mU(e,n)}write(e){this.baseChunkLogger.appendToLogs(e)}getLogs(){return this.baseChunkLogger.getLogs()}clearLogs(){this.baseChunkLogger.clearLogs()}getLogArray(){return this.baseChunkLogger.getLogArray()}logsToBlob(e){return this.baseChunkLogger.logsToBlob(e)}downloadLogsBlobInBrowser(e){const n=URL.createObjectURL(this.logsToBlob(e)),r=document.createElement("a");r.href=n,r.download=`walletconnect-logs-${new Date().toISOString()}.txt`,document.body.appendChild(r),r.click(),document.body.removeChild(r),URL.revokeObjectURL(n)}},PJ=class{constructor(e,n=J6){this.baseChunkLogger=new mU(e,n)}write(e){this.baseChunkLogger.appendToLogs(e)}getLogs(){return this.baseChunkLogger.getLogs()}clearLogs(){this.baseChunkLogger.clearLogs()}getLogArray(){return this.baseChunkLogger.getLogArray()}logsToBlob(e){return this.baseChunkLogger.logsToBlob(e)}};var RJ=Object.defineProperty,jJ=Object.defineProperties,OJ=Object.getOwnPropertyDescriptors,C3=Object.getOwnPropertySymbols,DJ=Object.prototype.hasOwnProperty,UJ=Object.prototype.propertyIsEnumerable,A3=(t,e,n)=>e in t?RJ(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,mv=(t,e)=>{for(var n in e||(e={}))DJ.call(e,n)&&A3(t,n,e[n]);if(C3)for(var n of C3(e))UJ.call(e,n)&&A3(t,n,e[n]);return t},gv=(t,e)=>jJ(t,OJ(e));function dm(t){return gv(mv({},t),{level:(t==null?void 0:t.level)||kJ.level})}function MJ(t,e=ow){return t[e]||""}function LJ(t,e,n=ow){return t[n]=e,t}function Us(t,e=ow){let n="";return typeof t.bindings>"u"?n=MJ(t,e):n=t.bindings().context||"",n}function BJ(t,e,n=ow){const r=Us(t,n);return r.trim()?`${r}/${e}`:e}function Ur(t,e,n=ow){const r=BJ(t,e,n),s=t.child({context:r});return LJ(s,r,n)}function $J(t){var e,n;const r=new IJ((e=t.opts)==null?void 0:e.level,t.maxSizeInBytes);return{logger:aw(gv(mv({},t.opts),{level:"trace",browser:gv(mv({},(n=t.opts)==null?void 0:n.browser),{write:s=>r.write(s)})})),chunkLoggerController:r}}function FJ(t){var e;const n=new PJ((e=t.opts)==null?void 0:e.level,t.maxSizeInBytes);return{logger:aw(gv(mv({},t.opts),{level:"trace"}),n),chunkLoggerController:n}}function Z6(t){return typeof t.loggerOverride<"u"&&typeof t.loggerOverride!="string"?{logger:t.loggerOverride,chunkLoggerController:null}:typeof window<"u"?$J(t):FJ(t)}var HJ=Object.defineProperty,VJ=(t,e,n)=>e in t?HJ(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,T3=(t,e,n)=>VJ(t,typeof e!="symbol"?e+"":e,n);let zJ=class extends lh{constructor(e){super(),this.opts=e,T3(this,"protocol","wc"),T3(this,"version",2)}};var WJ=Object.defineProperty,qJ=(t,e,n)=>e in t?WJ(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,KJ=(t,e,n)=>qJ(t,e+"",n);let GJ=class extends lh{constructor(e,n){super(),this.core=e,this.logger=n,KJ(this,"records",new Map)}},YJ=class{constructor(e,n){this.logger=e,this.core=n}},QJ=class extends lh{constructor(e,n){super(),this.relayer=e,this.logger=n}},JJ=class extends lh{constructor(e){super()}},ZJ=class{constructor(e,n,r,s){this.core=e,this.logger=n,this.name=r}},XJ=class extends lh{constructor(e,n){super(),this.relayer=e,this.logger=n}},eZ=class extends lh{constructor(e,n){super(),this.core=e,this.logger=n}},tZ=class{constructor(e,n,r){this.core=e,this.logger=n,this.store=r}},nZ=class{constructor(e,n){this.projectId=e,this.logger=n}},rZ=class{constructor(e,n,r){this.core=e,this.logger=n,this.telemetryEnabled=r}};var sZ=Object.defineProperty,iZ=(t,e,n)=>e in t?sZ(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,S3=(t,e,n)=>iZ(t,typeof e!="symbol"?e+"":e,n);let aZ=class{constructor(e){this.opts=e,S3(this,"protocol","wc"),S3(this,"version",2)}},oZ=class{constructor(e){this.client=e}};function cZ(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function gU(t,...e){if(!cZ(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function k3(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function lZ(t,e){gU(t);const n=e.outputLen;if(t.length<n)throw new Error("digestInto() expects output buffer of length at least "+n)}const Th=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */const _2=t=>new DataView(t.buffer,t.byteOffset,t.byteLength);function uZ(t){if(typeof t!="string")throw new Error("utf8ToBytes expected string, got "+typeof t);return new Uint8Array(new TextEncoder().encode(t))}function yU(t){return typeof t=="string"&&(t=uZ(t)),gU(t),t}let dZ=class{clone(){return this._cloneInto()}};function hZ(t){const e=r=>t().update(yU(r)).digest(),n=t();return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=()=>t(),e}function wU(t=32){if(Th&&typeof Th.getRandomValues=="function")return Th.getRandomValues(new Uint8Array(t));if(Th&&typeof Th.randomBytes=="function")return Th.randomBytes(t);throw new Error("crypto.getRandomValues must be defined")}function fZ(t,e,n,r){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,n,r);const s=BigInt(32),i=BigInt(4294967295),a=Number(n>>s&i),o=Number(n&i),l=r?4:0,u=r?0:4;t.setUint32(e+l,a,r),t.setUint32(e+u,o,r)}let pZ=class extends dZ{constructor(e,n,r,s){super(),this.blockLen=e,this.outputLen=n,this.padOffset=r,this.isLE=s,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=_2(this.buffer)}update(e){k3(this);const{view:n,buffer:r,blockLen:s}=this;e=yU(e);const i=e.length;for(let a=0;a<i;){const o=Math.min(s-this.pos,i-a);if(o===s){const l=_2(e);for(;s<=i-a;a+=s)this.process(l,a);continue}r.set(e.subarray(a,a+o),this.pos),this.pos+=o,a+=o,this.pos===s&&(this.process(n,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){k3(this),lZ(e,this),this.finished=!0;const{buffer:n,view:r,blockLen:s,isLE:i}=this;let{pos:a}=this;n[a++]=128,this.buffer.subarray(a).fill(0),this.padOffset>s-a&&(this.process(r,0),a=0);for(let h=a;h<s;h++)n[h]=0;fZ(r,s-8,BigInt(this.length*8),i),this.process(r,0);const o=_2(e),l=this.outputLen;if(l%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const u=l/4,d=this.get();if(u>d.length)throw new Error("_sha2: outputLen bigger than state");for(let h=0;h<u;h++)o.setUint32(4*h,d[h],i)}digest(){const{buffer:e,outputLen:n}=this;this.digestInto(e);const r=e.slice(0,n);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:n,buffer:r,length:s,finished:i,destroyed:a,pos:o}=this;return e.length=s,e.pos=o,e.finished=i,e.destroyed=a,s%n&&e.buffer.set(r),e}};const ab=BigInt(2**32-1),fA=BigInt(32);function bU(t,e=!1){return e?{h:Number(t&ab),l:Number(t>>fA&ab)}:{h:Number(t>>fA&ab)|0,l:Number(t&ab)|0}}function mZ(t,e=!1){let n=new Uint32Array(t.length),r=new Uint32Array(t.length);for(let s=0;s<t.length;s++){const{h:i,l:a}=bU(t[s],e);[n[s],r[s]]=[i,a]}return[n,r]}const gZ=(t,e)=>BigInt(t>>>0)<<fA|BigInt(e>>>0),yZ=(t,e,n)=>t>>>n,wZ=(t,e,n)=>t<<32-n|e>>>n,bZ=(t,e,n)=>t>>>n|e<<32-n,xZ=(t,e,n)=>t<<32-n|e>>>n,vZ=(t,e,n)=>t<<64-n|e>>>n-32,EZ=(t,e,n)=>t>>>n-32|e<<64-n,NZ=(t,e)=>e,CZ=(t,e)=>t,AZ=(t,e,n)=>t<<n|e>>>32-n,TZ=(t,e,n)=>e<<n|t>>>32-n,SZ=(t,e,n)=>e<<n-32|t>>>64-n,kZ=(t,e,n)=>t<<n-32|e>>>64-n;function _Z(t,e,n,r){const s=(e>>>0)+(r>>>0);return{h:t+n+(s/2**32|0)|0,l:s|0}}const IZ=(t,e,n)=>(t>>>0)+(e>>>0)+(n>>>0),PZ=(t,e,n,r)=>e+n+r+(t/2**32|0)|0,RZ=(t,e,n,r)=>(t>>>0)+(e>>>0)+(n>>>0)+(r>>>0),jZ=(t,e,n,r,s)=>e+n+r+s+(t/2**32|0)|0,OZ=(t,e,n,r,s)=>(t>>>0)+(e>>>0)+(n>>>0)+(r>>>0)+(s>>>0),DZ=(t,e,n,r,s,i)=>e+n+r+s+i+(t/2**32|0)|0,nt={fromBig:bU,split:mZ,toBig:gZ,shrSH:yZ,shrSL:wZ,rotrSH:bZ,rotrSL:xZ,rotrBH:vZ,rotrBL:EZ,rotr32H:NZ,rotr32L:CZ,rotlSH:AZ,rotlSL:TZ,rotlBH:SZ,rotlBL:kZ,add:_Z,add3L:IZ,add3H:PZ,add4L:RZ,add4H:jZ,add5H:DZ,add5L:OZ},[UZ,MZ]=nt.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(t=>BigInt(t))),_c=new Uint32Array(80),Ic=new Uint32Array(80);let LZ=class extends pZ{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){const{Ah:e,Al:n,Bh:r,Bl:s,Ch:i,Cl:a,Dh:o,Dl:l,Eh:u,El:d,Fh:h,Fl:f,Gh:p,Gl:g,Hh:m,Hl:y}=this;return[e,n,r,s,i,a,o,l,u,d,h,f,p,g,m,y]}set(e,n,r,s,i,a,o,l,u,d,h,f,p,g,m,y){this.Ah=e|0,this.Al=n|0,this.Bh=r|0,this.Bl=s|0,this.Ch=i|0,this.Cl=a|0,this.Dh=o|0,this.Dl=l|0,this.Eh=u|0,this.El=d|0,this.Fh=h|0,this.Fl=f|0,this.Gh=p|0,this.Gl=g|0,this.Hh=m|0,this.Hl=y|0}process(e,n){for(let x=0;x<16;x++,n+=4)_c[x]=e.getUint32(n),Ic[x]=e.getUint32(n+=4);for(let x=16;x<80;x++){const A=_c[x-15]|0,T=Ic[x-15]|0,j=nt.rotrSH(A,T,1)^nt.rotrSH(A,T,8)^nt.shrSH(A,T,7),P=nt.rotrSL(A,T,1)^nt.rotrSL(A,T,8)^nt.shrSL(A,T,7),S=_c[x-2]|0,E=Ic[x-2]|0,k=nt.rotrSH(S,E,19)^nt.rotrBH(S,E,61)^nt.shrSH(S,E,6),R=nt.rotrSL(S,E,19)^nt.rotrBL(S,E,61)^nt.shrSL(S,E,6),O=nt.add4L(P,R,Ic[x-7],Ic[x-16]),F=nt.add4H(O,j,k,_c[x-7],_c[x-16]);_c[x]=F|0,Ic[x]=O|0}let{Ah:r,Al:s,Bh:i,Bl:a,Ch:o,Cl:l,Dh:u,Dl:d,Eh:h,El:f,Fh:p,Fl:g,Gh:m,Gl:y,Hh:b,Hl:w}=this;for(let x=0;x<80;x++){const A=nt.rotrSH(h,f,14)^nt.rotrSH(h,f,18)^nt.rotrBH(h,f,41),T=nt.rotrSL(h,f,14)^nt.rotrSL(h,f,18)^nt.rotrBL(h,f,41),j=h&p^~h&m,P=f&g^~f&y,S=nt.add5L(w,T,P,MZ[x],Ic[x]),E=nt.add5H(S,b,A,j,UZ[x],_c[x]),k=S|0,R=nt.rotrSH(r,s,28)^nt.rotrBH(r,s,34)^nt.rotrBH(r,s,39),O=nt.rotrSL(r,s,28)^nt.rotrBL(r,s,34)^nt.rotrBL(r,s,39),F=r&i^r&o^i&o,z=s&a^s&l^a&l;b=m|0,w=y|0,m=p|0,y=g|0,p=h|0,g=f|0,{h,l:f}=nt.add(u|0,d|0,E|0,k|0),u=o|0,d=l|0,o=i|0,l=a|0,i=r|0,a=s|0;const N=nt.add3L(k,O,z);r=nt.add3H(N,E,R,F),s=N|0}({h:r,l:s}=nt.add(this.Ah|0,this.Al|0,r|0,s|0)),{h:i,l:a}=nt.add(this.Bh|0,this.Bl|0,i|0,a|0),{h:o,l}=nt.add(this.Ch|0,this.Cl|0,o|0,l|0),{h:u,l:d}=nt.add(this.Dh|0,this.Dl|0,u|0,d|0),{h,l:f}=nt.add(this.Eh|0,this.El|0,h|0,f|0),{h:p,l:g}=nt.add(this.Fh|0,this.Fl|0,p|0,g|0),{h:m,l:y}=nt.add(this.Gh|0,this.Gl|0,m|0,y|0),{h:b,l:w}=nt.add(this.Hh|0,this.Hl|0,b|0,w|0),this.set(r,s,i,a,o,l,u,d,h,f,p,g,m,y,b,w)}roundClean(){_c.fill(0),Ic.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}};const BZ=hZ(()=>new LZ);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const X6=BigInt(0),xU=BigInt(1),$Z=BigInt(2);function eS(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function tS(t){if(!eS(t))throw new Error("Uint8Array expected")}function I2(t,e){if(typeof e!="boolean")throw new Error(t+" boolean expected, got "+e)}const FZ=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function nS(t){tS(t);let e="";for(let n=0;n<t.length;n++)e+=FZ[t[n]];return e}function vU(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);return t===""?X6:BigInt("0x"+t)}const wo={_0:48,_9:57,A:65,F:70,a:97,f:102};function _3(t){if(t>=wo._0&&t<=wo._9)return t-wo._0;if(t>=wo.A&&t<=wo.F)return t-(wo.A-10);if(t>=wo.a&&t<=wo.f)return t-(wo.a-10)}function EU(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);const e=t.length,n=e/2;if(e%2)throw new Error("hex string expected, got unpadded hex of length "+e);const r=new Uint8Array(n);for(let s=0,i=0;s<n;s++,i+=2){const a=_3(t.charCodeAt(i)),o=_3(t.charCodeAt(i+1));if(a===void 0||o===void 0){const l=t[i]+t[i+1];throw new Error('hex string expected, got non-hex character "'+l+'" at index '+i)}r[s]=a*16+o}return r}function HZ(t){return vU(nS(t))}function ax(t){return tS(t),vU(nS(Uint8Array.from(t).reverse()))}function NU(t,e){return EU(t.toString(16).padStart(e*2,"0"))}function pA(t,e){return NU(t,e).reverse()}function bo(t,e,n){let r;if(typeof e=="string")try{r=EU(e)}catch(i){throw new Error(t+" must be hex string or Uint8Array, cause: "+i)}else if(eS(e))r=Uint8Array.from(e);else throw new Error(t+" must be hex string or Uint8Array");const s=r.length;if(typeof n=="number"&&s!==n)throw new Error(t+" of length "+n+" expected, got "+s);return r}function I3(...t){let e=0;for(let r=0;r<t.length;r++){const s=t[r];tS(s),e+=s.length}const n=new Uint8Array(e);for(let r=0,s=0;r<t.length;r++){const i=t[r];n.set(i,s),s+=i.length}return n}const P2=t=>typeof t=="bigint"&&X6<=t;function VZ(t,e,n){return P2(t)&&P2(e)&&P2(n)&&e<=t&&t<n}function zm(t,e,n,r){if(!VZ(e,n,r))throw new Error("expected valid "+t+": "+n+" <= n < "+r+", got "+e)}function zZ(t){let e;for(e=0;t>X6;t>>=xU,e+=1);return e}const WZ=t=>($Z<<BigInt(t-1))-xU,qZ={bigint:t=>typeof t=="bigint",function:t=>typeof t=="function",boolean:t=>typeof t=="boolean",string:t=>typeof t=="string",stringOrUint8Array:t=>typeof t=="string"||eS(t),isSafeInteger:t=>Number.isSafeInteger(t),array:t=>Array.isArray(t),field:(t,e)=>e.Fp.isValid(t),hash:t=>typeof t=="function"&&Number.isSafeInteger(t.outputLen)};function rS(t,e,n={}){const r=(s,i,a)=>{const o=qZ[i];if(typeof o!="function")throw new Error("invalid validator function");const l=t[s];if(!(a&&l===void 0)&&!o(l,t))throw new Error("param "+String(s)+" is invalid. Expected "+i+", got "+l)};for(const[s,i]of Object.entries(e))r(s,i,!1);for(const[s,i]of Object.entries(n))r(s,i,!0);return t}function P3(t){const e=new WeakMap;return(n,...r)=>{const s=e.get(n);if(s!==void 0)return s;const i=t(n,...r);return e.set(n,i),i}}const Gn=BigInt(0),xn=BigInt(1),Au=BigInt(2),KZ=BigInt(3),mA=BigInt(4),R3=BigInt(5),j3=BigInt(8);function On(t,e){const n=t%e;return n>=Gn?n:e+n}function GZ(t,e,n){if(e<Gn)throw new Error("invalid exponent, negatives unsupported");if(n<=Gn)throw new Error("invalid modulus");if(n===xn)return Gn;let r=xn;for(;e>Gn;)e&xn&&(r=r*t%n),t=t*t%n,e>>=xn;return r}function Na(t,e,n){let r=t;for(;e-- >Gn;)r*=r,r%=n;return r}function O3(t,e){if(t===Gn)throw new Error("invert: expected non-zero number");if(e<=Gn)throw new Error("invert: expected positive modulus, got "+e);let n=On(t,e),r=e,s=Gn,i=xn;for(;n!==Gn;){const a=r/n,o=r%n,l=s-i*a;r=n,n=o,s=i,i=l}if(r!==xn)throw new Error("invert: does not exist");return On(s,e)}function YZ(t){const e=(t-xn)/Au;let n,r,s;for(n=t-xn,r=0;n%Au===Gn;n/=Au,r++);for(s=Au;s<t&&GZ(s,e,t)!==t-xn;s++)if(s>1e3)throw new Error("Cannot find square root: likely non-prime P");if(r===1){const a=(t+xn)/mA;return function(o,l){const u=o.pow(l,a);if(!o.eql(o.sqr(u),l))throw new Error("Cannot find square root");return u}}const i=(n+xn)/Au;return function(a,o){if(a.pow(o,e)===a.neg(a.ONE))throw new Error("Cannot find square root");let l=r,u=a.pow(a.mul(a.ONE,s),n),d=a.pow(o,i),h=a.pow(o,n);for(;!a.eql(h,a.ONE);){if(a.eql(h,a.ZERO))return a.ZERO;let f=1;for(let g=a.sqr(h);f<l&&!a.eql(g,a.ONE);f++)g=a.sqr(g);const p=a.pow(u,xn<<BigInt(l-f-1));u=a.sqr(p),d=a.mul(d,p),h=a.mul(h,u),l=f}return d}}function QZ(t){if(t%mA===KZ){const e=(t+xn)/mA;return function(n,r){const s=n.pow(r,e);if(!n.eql(n.sqr(s),r))throw new Error("Cannot find square root");return s}}if(t%j3===R3){const e=(t-R3)/j3;return function(n,r){const s=n.mul(r,Au),i=n.pow(s,e),a=n.mul(r,i),o=n.mul(n.mul(a,Au),i),l=n.mul(a,n.sub(o,n.ONE));if(!n.eql(n.sqr(l),r))throw new Error("Cannot find square root");return l}}return YZ(t)}const JZ=(t,e)=>(On(t,e)&xn)===xn,ZZ=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function XZ(t){const e={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},n=ZZ.reduce((r,s)=>(r[s]="function",r),e);return rS(t,n)}function eX(t,e,n){if(n<Gn)throw new Error("invalid exponent, negatives unsupported");if(n===Gn)return t.ONE;if(n===xn)return e;let r=t.ONE,s=e;for(;n>Gn;)n&xn&&(r=t.mul(r,s)),s=t.sqr(s),n>>=xn;return r}function tX(t,e){const n=new Array(e.length),r=e.reduce((i,a,o)=>t.is0(a)?i:(n[o]=i,t.mul(i,a)),t.ONE),s=t.inv(r);return e.reduceRight((i,a,o)=>t.is0(a)?i:(n[o]=t.mul(i,n[o]),t.mul(i,a)),s),n}function CU(t,e){const n=e!==void 0?e:t.toString(2).length,r=Math.ceil(n/8);return{nBitLength:n,nByteLength:r}}function AU(t,e,n=!1,r={}){if(t<=Gn)throw new Error("invalid field: expected ORDER > 0, got "+t);const{nBitLength:s,nByteLength:i}=CU(t,e);if(i>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let a;const o=Object.freeze({ORDER:t,isLE:n,BITS:s,BYTES:i,MASK:WZ(s),ZERO:Gn,ONE:xn,create:l=>On(l,t),isValid:l=>{if(typeof l!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof l);return Gn<=l&&l<t},is0:l=>l===Gn,isOdd:l=>(l&xn)===xn,neg:l=>On(-l,t),eql:(l,u)=>l===u,sqr:l=>On(l*l,t),add:(l,u)=>On(l+u,t),sub:(l,u)=>On(l-u,t),mul:(l,u)=>On(l*u,t),pow:(l,u)=>eX(o,l,u),div:(l,u)=>On(l*O3(u,t),t),sqrN:l=>l*l,addN:(l,u)=>l+u,subN:(l,u)=>l-u,mulN:(l,u)=>l*u,inv:l=>O3(l,t),sqrt:r.sqrt||(l=>(a||(a=QZ(t)),a(o,l))),invertBatch:l=>tX(o,l),cmov:(l,u,d)=>d?u:l,toBytes:l=>n?pA(l,i):NU(l,i),fromBytes:l=>{if(l.length!==i)throw new Error("Field.fromBytes: expected "+i+" bytes, got "+l.length);return n?ax(l):HZ(l)}});return Object.freeze(o)}const D3=BigInt(0),ob=BigInt(1);function R2(t,e){const n=e.negate();return t?n:e}function TU(t,e){if(!Number.isSafeInteger(t)||t<=0||t>e)throw new Error("invalid window size, expected [1.."+e+"], got W="+t)}function j2(t,e){TU(t,e);const n=Math.ceil(e/t)+1,r=2**(t-1);return{windows:n,windowSize:r}}function nX(t,e){if(!Array.isArray(t))throw new Error("array expected");t.forEach((n,r)=>{if(!(n instanceof e))throw new Error("invalid point at index "+r)})}function rX(t,e){if(!Array.isArray(t))throw new Error("array of scalars expected");t.forEach((n,r)=>{if(!e.isValid(n))throw new Error("invalid scalar at index "+r)})}const O2=new WeakMap,SU=new WeakMap;function D2(t){return SU.get(t)||1}function sX(t,e){return{constTimeNegate:R2,hasPrecomputes(n){return D2(n)!==1},unsafeLadder(n,r,s=t.ZERO){let i=n;for(;r>D3;)r&ob&&(s=s.add(i)),i=i.double(),r>>=ob;return s},precomputeWindow(n,r){const{windows:s,windowSize:i}=j2(r,e),a=[];let o=n,l=o;for(let u=0;u<s;u++){l=o,a.push(l);for(let d=1;d<i;d++)l=l.add(o),a.push(l);o=l.double()}return a},wNAF(n,r,s){const{windows:i,windowSize:a}=j2(n,e);let o=t.ZERO,l=t.BASE;const u=BigInt(2**n-1),d=2**n,h=BigInt(n);for(let f=0;f<i;f++){const p=f*a;let g=Number(s&u);s>>=h,g>a&&(g-=d,s+=ob);const m=p,y=p+Math.abs(g)-1,b=f%2!==0,w=g<0;g===0?l=l.add(R2(b,r[m])):o=o.add(R2(w,r[y]))}return{p:o,f:l}},wNAFUnsafe(n,r,s,i=t.ZERO){const{windows:a,windowSize:o}=j2(n,e),l=BigInt(2**n-1),u=2**n,d=BigInt(n);for(let h=0;h<a;h++){const f=h*o;if(s===D3)break;let p=Number(s&l);if(s>>=d,p>o&&(p-=u,s+=ob),p===0)continue;let g=r[f+Math.abs(p)-1];p<0&&(g=g.negate()),i=i.add(g)}return i},getPrecomputes(n,r,s){let i=O2.get(r);return i||(i=this.precomputeWindow(r,n),n!==1&&O2.set(r,s(i))),i},wNAFCached(n,r,s){const i=D2(n);return this.wNAF(i,this.getPrecomputes(i,n,s),r)},wNAFCachedUnsafe(n,r,s,i){const a=D2(n);return a===1?this.unsafeLadder(n,r,i):this.wNAFUnsafe(a,this.getPrecomputes(a,n,s),r,i)},setWindowSize(n,r){TU(r,e),SU.set(n,r),O2.delete(n)}}}function iX(t,e,n,r){if(nX(n,t),rX(r,e),n.length!==r.length)throw new Error("arrays of points and scalars must have equal length");const s=t.ZERO,i=zZ(BigInt(n.length)),a=i>12?i-3:i>4?i-2:i?2:1,o=(1<<a)-1,l=new Array(o+1).fill(s),u=Math.floor((e.BITS-1)/a)*a;let d=s;for(let h=u;h>=0;h-=a){l.fill(s);for(let p=0;p<r.length;p++){const g=r[p],m=Number(g>>BigInt(h)&BigInt(o));l[m]=l[m].add(n[p])}let f=s;for(let p=l.length-1,g=s;p>0;p--)g=g.add(l[p]),f=f.add(g);if(d=d.add(f),h!==0)for(let p=0;p<a;p++)d=d.double()}return d}function aX(t){return XZ(t.Fp),rS(t,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...CU(t.n,t.nBitLength),...t,p:t.Fp.ORDER})}const Ui=BigInt(0),us=BigInt(1),cb=BigInt(2),oX=BigInt(8),cX={zip215:!0};function lX(t){const e=aX(t);return rS(t,{hash:"function",a:"bigint",d:"bigint",randomBytes:"function"},{adjustScalarBytes:"function",domain:"function",uvRatio:"function",mapToCurve:"function"}),Object.freeze({...e})}function uX(t){const e=lX(t),{Fp:n,n:r,prehash:s,hash:i,randomBytes:a,nByteLength:o,h:l}=e,u=cb<<BigInt(o*8)-us,d=n.create,h=AU(e.n,e.nBitLength),f=e.uvRatio||((N,I)=>{try{return{isValid:!0,value:n.sqrt(N*n.inv(I))}}catch{return{isValid:!1,value:Ui}}}),p=e.adjustScalarBytes||(N=>N),g=e.domain||((N,I,M)=>{if(I2("phflag",M),I.length||M)throw new Error("Contexts/pre-hash are not supported");return N});function m(N,I){zm("coordinate "+N,I,Ui,u)}function y(N){if(!(N instanceof x))throw new Error("ExtendedPoint expected")}const b=P3((N,I)=>{const{ex:M,ey:D,ez:L}=N,$=N.is0();I==null&&(I=$?oX:n.inv(L));const V=d(M*I),q=d(D*I),G=d(L*I);if($)return{x:Ui,y:us};if(G!==us)throw new Error("invZ was invalid");return{x:V,y:q}}),w=P3(N=>{const{a:I,d:M}=e;if(N.is0())throw new Error("bad point: ZERO");const{ex:D,ey:L,ez:$,et:V}=N,q=d(D*D),G=d(L*L),Z=d($*$),oe=d(Z*Z),xe=d(q*I),J=d(Z*d(xe+G)),ve=d(oe+d(M*d(q*G)));if(J!==ve)throw new Error("bad point: equation left != right (1)");const ge=d(D*L),Le=d($*V);if(ge!==Le)throw new Error("bad point: equation left != right (2)");return!0});class x{constructor(I,M,D,L){this.ex=I,this.ey=M,this.ez=D,this.et=L,m("x",I),m("y",M),m("z",D),m("t",L),Object.freeze(this)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static fromAffine(I){if(I instanceof x)throw new Error("extended point not allowed");const{x:M,y:D}=I||{};return m("x",M),m("y",D),new x(M,D,us,d(M*D))}static normalizeZ(I){const M=n.invertBatch(I.map(D=>D.ez));return I.map((D,L)=>D.toAffine(M[L])).map(x.fromAffine)}static msm(I,M){return iX(x,h,I,M)}_setWindowSize(I){j.setWindowSize(this,I)}assertValidity(){w(this)}equals(I){y(I);const{ex:M,ey:D,ez:L}=this,{ex:$,ey:V,ez:q}=I,G=d(M*q),Z=d($*L),oe=d(D*q),xe=d(V*L);return G===Z&&oe===xe}is0(){return this.equals(x.ZERO)}negate(){return new x(d(-this.ex),this.ey,this.ez,d(-this.et))}double(){const{a:I}=e,{ex:M,ey:D,ez:L}=this,$=d(M*M),V=d(D*D),q=d(cb*d(L*L)),G=d(I*$),Z=M+D,oe=d(d(Z*Z)-$-V),xe=G+V,J=xe-q,ve=G-V,ge=d(oe*J),Le=d(xe*ve),je=d(oe*ve),kt=d(J*xe);return new x(ge,Le,kt,je)}add(I){y(I);const{a:M,d:D}=e,{ex:L,ey:$,ez:V,et:q}=this,{ex:G,ey:Z,ez:oe,et:xe}=I;if(M===BigInt(-1)){const vc=d(($-L)*(Z+G)),i5=d(($+L)*(Z-G)),EE=d(i5-vc);if(EE===Ui)return this.double();const a5=d(V*cb*xe),o5=d(q*cb*oe),c5=o5+a5,l5=i5+vc,u5=o5-a5,N9=d(c5*EE),C9=d(l5*u5),A9=d(c5*u5),T9=d(EE*l5);return new x(N9,C9,T9,A9)}const J=d(L*G),ve=d($*Z),ge=d(q*D*xe),Le=d(V*oe),je=d((L+$)*(G+Z)-J-ve),kt=Le-ge,et=Le+ge,De=d(ve-M*J),Dt=d(je*kt),Mr=d(et*De),mo=d(je*De),gh=d(kt*et);return new x(Dt,Mr,gh,mo)}subtract(I){return this.add(I.negate())}wNAF(I){return j.wNAFCached(this,I,x.normalizeZ)}multiply(I){const M=I;zm("scalar",M,us,r);const{p:D,f:L}=this.wNAF(M);return x.normalizeZ([D,L])[0]}multiplyUnsafe(I,M=x.ZERO){const D=I;return zm("scalar",D,Ui,r),D===Ui?T:this.is0()||D===us?this:j.wNAFCachedUnsafe(this,D,x.normalizeZ,M)}isSmallOrder(){return this.multiplyUnsafe(l).is0()}isTorsionFree(){return j.unsafeLadder(this,r).is0()}toAffine(I){return b(this,I)}clearCofactor(){const{h:I}=e;return I===us?this:this.multiplyUnsafe(I)}static fromHex(I,M=!1){const{d:D,a:L}=e,$=n.BYTES;I=bo("pointHex",I,$),I2("zip215",M);const V=I.slice(),q=I[$-1];V[$-1]=q&-129;const G=ax(V),Z=M?u:n.ORDER;zm("pointHex.y",G,Ui,Z);const oe=d(G*G),xe=d(oe-us),J=d(D*oe-L);let{isValid:ve,value:ge}=f(xe,J);if(!ve)throw new Error("Point.fromHex: invalid y coordinate");const Le=(ge&us)===us,je=(q&128)!==0;if(!M&&ge===Ui&&je)throw new Error("Point.fromHex: x=0 and x_0=1");return je!==Le&&(ge=d(-ge)),x.fromAffine({x:ge,y:G})}static fromPrivateKey(I){return E(I).point}toRawBytes(){const{x:I,y:M}=this.toAffine(),D=pA(M,n.BYTES);return D[D.length-1]|=I&us?128:0,D}toHex(){return nS(this.toRawBytes())}}x.BASE=new x(e.Gx,e.Gy,us,d(e.Gx*e.Gy)),x.ZERO=new x(Ui,us,us,Ui);const{BASE:A,ZERO:T}=x,j=sX(x,o*8);function P(N){return On(N,r)}function S(N){return P(ax(N))}function E(N){const I=n.BYTES;N=bo("private key",N,I);const M=bo("hashed private key",i(N),2*I),D=p(M.slice(0,I)),L=M.slice(I,2*I),$=S(D),V=A.multiply($),q=V.toRawBytes();return{head:D,prefix:L,scalar:$,point:V,pointBytes:q}}function k(N){return E(N).pointBytes}function R(N=new Uint8Array,...I){const M=I3(...I);return S(i(g(M,bo("context",N),!!s)))}function O(N,I,M={}){N=bo("message",N),s&&(N=s(N));const{prefix:D,scalar:L,pointBytes:$}=E(I),V=R(M.context,D,N),q=A.multiply(V).toRawBytes(),G=R(M.context,q,$,N),Z=P(V+G*L);zm("signature.s",Z,Ui,r);const oe=I3(q,pA(Z,n.BYTES));return bo("result",oe,n.BYTES*2)}const F=cX;function z(N,I,M,D=F){const{context:L,zip215:$}=D,V=n.BYTES;N=bo("signature",N,2*V),I=bo("message",I),M=bo("publicKey",M,V),$!==void 0&&I2("zip215",$),s&&(I=s(I));const q=ax(N.slice(V,2*V));let G,Z,oe;try{G=x.fromHex(M,$),Z=x.fromHex(N.slice(0,V),$),oe=A.multiplyUnsafe(q)}catch{return!1}if(!$&&G.isSmallOrder())return!1;const xe=R(L,Z.toRawBytes(),G.toRawBytes(),I);return Z.add(G.multiplyUnsafe(xe)).subtract(oe).clearCofactor().equals(x.ZERO)}return A._setWindowSize(8),{CURVE:e,getPublicKey:k,sign:O,verify:z,ExtendedPoint:x,utils:{getExtendedPublicKey:E,randomPrivateKey:()=>a(n.BYTES),precompute(N=8,I=x.BASE){return I._setWindowSize(N),I.multiply(BigInt(3)),I}}}}BigInt(0),BigInt(1);const sS=BigInt("57896044618658097711785492504343953926634992332820282019728792003956564819949"),U3=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752");BigInt(0);const dX=BigInt(1),M3=BigInt(2);BigInt(3);const hX=BigInt(5),fX=BigInt(8);function pX(t){const e=BigInt(10),n=BigInt(20),r=BigInt(40),s=BigInt(80),i=sS,a=t*t%i*t%i,o=Na(a,M3,i)*a%i,l=Na(o,dX,i)*t%i,u=Na(l,hX,i)*l%i,d=Na(u,e,i)*u%i,h=Na(d,n,i)*d%i,f=Na(h,r,i)*h%i,p=Na(f,s,i)*f%i,g=Na(p,s,i)*f%i,m=Na(g,e,i)*u%i;return{pow_p_5_8:Na(m,M3,i)*t%i,b2:a}}function mX(t){return t[0]&=248,t[31]&=127,t[31]|=64,t}function gX(t,e){const n=sS,r=On(e*e*e,n),s=On(r*r*e,n),i=pX(t*s).pow_p_5_8;let a=On(t*r*i,n);const o=On(e*a*a,n),l=a,u=On(a*U3,n),d=o===t,h=o===On(-t,n),f=o===On(-t*U3,n);return d&&(a=l),(h||f)&&(a=u),JZ(a,n)&&(a=On(-a,n)),{isValid:d||h,value:a}}const yX=AU(sS,void 0,!0),wX={a:BigInt(-1),d:BigInt("37095705934669439343138083508754565189542113879843219016388785533085940283555"),Fp:yX,n:BigInt("7237005577332262213973186563042994240857116359379907606001950938285454250989"),h:fX,Gx:BigInt("15112221349535400772501151409588531511454012693041857206046113283949847762202"),Gy:BigInt("46316835694926478169428394003475163141307993866256225615783033603165251855960"),hash:BZ,randomBytes:wU,adjustScalarBytes:mX,uvRatio:gX},kU=uX(wX),bX="EdDSA",xX="JWT",yv=".",B1="base64url",_U="utf8",IU="utf8",vX=":",EX="did",NX="key",L3="base58btc",CX="z",AX="K36",TX=32;function iS(t){return globalThis.Buffer!=null?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):t}function PU(t=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?iS(globalThis.Buffer.allocUnsafe(t)):new Uint8Array(t)}function RU(t,e){e||(e=t.reduce((s,i)=>s+i.length,0));const n=PU(e);let r=0;for(const s of t)n.set(s,r),r+=s.length;return iS(n)}function SX(t,e){if(t.length>=255)throw new TypeError("Alphabet too long");for(var n=new Uint8Array(256),r=0;r<n.length;r++)n[r]=255;for(var s=0;s<t.length;s++){var i=t.charAt(s),a=i.charCodeAt(0);if(n[a]!==255)throw new TypeError(i+" is ambiguous");n[a]=s}var o=t.length,l=t.charAt(0),u=Math.log(o)/Math.log(256),d=Math.log(256)/Math.log(o);function h(g){if(g instanceof Uint8Array||(ArrayBuffer.isView(g)?g=new Uint8Array(g.buffer,g.byteOffset,g.byteLength):Array.isArray(g)&&(g=Uint8Array.from(g))),!(g instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(g.length===0)return"";for(var m=0,y=0,b=0,w=g.length;b!==w&&g[b]===0;)b++,m++;for(var x=(w-b)*d+1>>>0,A=new Uint8Array(x);b!==w;){for(var T=g[b],j=0,P=x-1;(T!==0||j<y)&&P!==-1;P--,j++)T+=256*A[P]>>>0,A[P]=T%o>>>0,T=T/o>>>0;if(T!==0)throw new Error("Non-zero carry");y=j,b++}for(var S=x-y;S!==x&&A[S]===0;)S++;for(var E=l.repeat(m);S<x;++S)E+=t.charAt(A[S]);return E}function f(g){if(typeof g!="string")throw new TypeError("Expected String");if(g.length===0)return new Uint8Array;var m=0;if(g[m]!==" "){for(var y=0,b=0;g[m]===l;)y++,m++;for(var w=(g.length-m)*u+1>>>0,x=new Uint8Array(w);g[m];){var A=n[g.charCodeAt(m)];if(A===255)return;for(var T=0,j=w-1;(A!==0||T<b)&&j!==-1;j--,T++)A+=o*x[j]>>>0,x[j]=A%256>>>0,A=A/256>>>0;if(A!==0)throw new Error("Non-zero carry");b=T,m++}if(g[m]!==" "){for(var P=w-b;P!==w&&x[P]===0;)P++;for(var S=new Uint8Array(y+(w-P)),E=y;P!==w;)S[E++]=x[P++];return S}}}function p(g){var m=f(g);if(m)return m;throw new Error(`Non-${e} character`)}return{encode:h,decodeUnsafe:f,decode:p}}var kX=SX,_X=kX;const jU=t=>{if(t instanceof Uint8Array&&t.constructor.name==="Uint8Array")return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")},IX=t=>new TextEncoder().encode(t),PX=t=>new TextDecoder().decode(t);let RX=class{constructor(e,n,r){this.name=e,this.prefix=n,this.baseEncode=r}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}},jX=class{constructor(e,n,r){if(this.name=e,this.prefix=n,n.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=n.codePointAt(0),this.baseDecode=r}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return OU(this,e)}},OX=class{constructor(e){this.decoders=e}or(e){return OU(this,e)}decode(e){const n=e[0],r=this.decoders[n];if(r)return r.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}};const OU=(t,e)=>new OX({...t.decoders||{[t.prefix]:t},...e.decoders||{[e.prefix]:e}});let DX=class{constructor(e,n,r,s){this.name=e,this.prefix=n,this.baseEncode=r,this.baseDecode=s,this.encoder=new RX(e,n,r),this.decoder=new jX(e,n,s)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}};const $1=({name:t,prefix:e,encode:n,decode:r})=>new DX(t,e,n,r),cw=({prefix:t,name:e,alphabet:n})=>{const{encode:r,decode:s}=_X(n,e);return $1({prefix:t,name:e,encode:r,decode:i=>jU(s(i))})},UX=(t,e,n,r)=>{const s={};for(let d=0;d<e.length;++d)s[e[d]]=d;let i=t.length;for(;t[i-1]==="=";)--i;const a=new Uint8Array(i*n/8|0);let o=0,l=0,u=0;for(let d=0;d<i;++d){const h=s[t[d]];if(h===void 0)throw new SyntaxError(`Non-${r} character`);l=l<<n|h,o+=n,o>=8&&(o-=8,a[u++]=255&l>>o)}if(o>=n||255&l<<8-o)throw new SyntaxError("Unexpected end of data");return a},MX=(t,e,n)=>{const r=e[e.length-1]==="=",s=(1<<n)-1;let i="",a=0,o=0;for(let l=0;l<t.length;++l)for(o=o<<8|t[l],a+=8;a>n;)a-=n,i+=e[s&o>>a];if(a&&(i+=e[s&o<<n-a]),r)for(;i.length*n&7;)i+="=";return i},fr=({name:t,prefix:e,bitsPerChar:n,alphabet:r})=>$1({prefix:e,name:t,encode(s){return MX(s,r,n)},decode(s){return UX(s,r,n,t)}}),LX=$1({prefix:"\0",name:"identity",encode:t=>PX(t),decode:t=>IX(t)});var BX=Object.freeze({__proto__:null,identity:LX});const $X=fr({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});var FX=Object.freeze({__proto__:null,base2:$X});const HX=fr({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var VX=Object.freeze({__proto__:null,base8:HX});const zX=cw({prefix:"9",name:"base10",alphabet:"0123456789"});var WX=Object.freeze({__proto__:null,base10:zX});const qX=fr({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),KX=fr({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var GX=Object.freeze({__proto__:null,base16:qX,base16upper:KX});const YX=fr({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),QX=fr({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),JX=fr({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),ZX=fr({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),XX=fr({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),eee=fr({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),tee=fr({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),nee=fr({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),ree=fr({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var see=Object.freeze({__proto__:null,base32:YX,base32upper:QX,base32pad:JX,base32padupper:ZX,base32hex:XX,base32hexupper:eee,base32hexpad:tee,base32hexpadupper:nee,base32z:ree});const iee=cw({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),aee=cw({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var oee=Object.freeze({__proto__:null,base36:iee,base36upper:aee});const cee=cw({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),lee=cw({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var uee=Object.freeze({__proto__:null,base58btc:cee,base58flickr:lee});const dee=fr({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),hee=fr({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),fee=fr({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),pee=fr({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var mee=Object.freeze({__proto__:null,base64:dee,base64pad:hee,base64url:fee,base64urlpad:pee});const DU=Array.from(""),gee=DU.reduce((t,e,n)=>(t[n]=e,t),[]),yee=DU.reduce((t,e,n)=>(t[e.codePointAt(0)]=n,t),[]);function wee(t){return t.reduce((e,n)=>(e+=gee[n],e),"")}function bee(t){const e=[];for(const n of t){const r=yee[n.codePointAt(0)];if(r===void 0)throw new Error(`Non-base256emoji character: ${n}`);e.push(r)}return new Uint8Array(e)}const xee=$1({prefix:"",name:"base256emoji",encode:wee,decode:bee});var vee=Object.freeze({__proto__:null,base256emoji:xee}),Eee=UU,B3=128,Nee=-128,Cee=Math.pow(2,31);function UU(t,e,n){e=e||[],n=n||0;for(var r=n;t>=Cee;)e[n++]=t&255|B3,t/=128;for(;t&Nee;)e[n++]=t&255|B3,t>>>=7;return e[n]=t|0,UU.bytes=n-r+1,e}var Aee=gA,Tee=128,$3=127;function gA(t,r){var n=0,r=r||0,s=0,i=r,a,o=t.length;do{if(i>=o)throw gA.bytes=0,new RangeError("Could not decode varint");a=t[i++],n+=s<28?(a&$3)<<s:(a&$3)*Math.pow(2,s),s+=7}while(a>=Tee);return gA.bytes=i-r,n}var See=Math.pow(2,7),kee=Math.pow(2,14),_ee=Math.pow(2,21),Iee=Math.pow(2,28),Pee=Math.pow(2,35),Ree=Math.pow(2,42),jee=Math.pow(2,49),Oee=Math.pow(2,56),Dee=Math.pow(2,63),Uee=function(t){return t<See?1:t<kee?2:t<_ee?3:t<Iee?4:t<Pee?5:t<Ree?6:t<jee?7:t<Oee?8:t<Dee?9:10},Mee={encode:Eee,decode:Aee,encodingLength:Uee},MU=Mee;const F3=(t,e,n=0)=>(MU.encode(t,e,n),e),H3=t=>MU.encodingLength(t),yA=(t,e)=>{const n=e.byteLength,r=H3(t),s=r+H3(n),i=new Uint8Array(s+n);return F3(t,i,0),F3(n,i,r),i.set(e,s),new Lee(t,n,e,i)};let Lee=class{constructor(e,n,r,s){this.code=e,this.size=n,this.digest=r,this.bytes=s}};const LU=({name:t,code:e,encode:n})=>new Bee(t,e,n);let Bee=class{constructor(e,n,r){this.name=e,this.code=n,this.encode=r}digest(e){if(e instanceof Uint8Array){const n=this.encode(e);return n instanceof Uint8Array?yA(this.code,n):n.then(r=>yA(this.code,r))}else throw Error("Unknown type, must be binary type")}};const BU=t=>async e=>new Uint8Array(await crypto.subtle.digest(t,e)),$ee=LU({name:"sha2-256",code:18,encode:BU("SHA-256")}),Fee=LU({name:"sha2-512",code:19,encode:BU("SHA-512")});var Hee=Object.freeze({__proto__:null,sha256:$ee,sha512:Fee});const $U=0,Vee="identity",FU=jU,zee=t=>yA($U,FU(t)),Wee={code:$U,name:Vee,encode:FU,digest:zee};var qee=Object.freeze({__proto__:null,identity:Wee});new TextEncoder,new TextDecoder;const V3={...BX,...FX,...VX,...WX,...GX,...see,...oee,...uee,...mee,...vee};({...Hee,...qee});function HU(t,e,n,r){return{name:t,prefix:e,encoder:{name:t,prefix:e,encode:n},decoder:{decode:r}}}const z3=HU("utf8","u",t=>"u"+new TextDecoder("utf8").decode(t),t=>new TextEncoder().encode(t.substring(1))),U2=HU("ascii","a",t=>{let e="a";for(let n=0;n<t.length;n++)e+=String.fromCharCode(t[n]);return e},t=>{t=t.substring(1);const e=PU(t.length);for(let n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}),VU={utf8:z3,"utf-8":z3,hex:V3.base16,latin1:U2,ascii:U2,binary:U2,...V3};function F1(t,e="utf8"){const n=VU[e];if(!n)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(t.buffer,t.byteOffset,t.byteLength).toString("utf8"):n.encoder.encode(t).substring(1)}function hm(t,e="utf8"){const n=VU[e];if(!n)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?iS(globalThis.Buffer.from(t,"utf-8")):n.decoder.decode(`${n.prefix}${t}`)}function W3(t){return Fd(F1(hm(t,B1),_U))}function wv(t){return F1(hm(dc(t),_U),B1)}function zU(t){const e=hm(AX,L3),n=CX+F1(RU([e,t]),L3);return[EX,NX,n].join(vX)}function Kee(t){return F1(t,B1)}function Gee(t){return hm(t,B1)}function Yee(t){return hm([wv(t.header),wv(t.payload)].join(yv),IU)}function Qee(t){return[wv(t.header),wv(t.payload),Kee(t.signature)].join(yv)}function wA(t){const e=t.split(yv),n=W3(e[0]),r=W3(e[1]),s=Gee(e[2]),i=hm(e.slice(0,2).join(yv),IU);return{header:n,payload:r,signature:s,data:i}}function q3(t=wU(TX)){const e=kU.getPublicKey(t);return{secretKey:RU([t,e]),publicKey:e}}async function Jee(t,e,n,r,s=he.fromMiliseconds(Date.now())){const i={alg:bX,typ:xX},a=zU(r.publicKey),o=s+n,l={iss:a,sub:t,aud:e,iat:s,exp:o},u=Yee({header:i,payload:l}),d=kU.sign(u,r.secretKey.slice(0,32));return Qee({header:i,payload:l,signature:d})}var K3=function(t,e,n){if(n||arguments.length===2)for(var r=0,s=e.length,i;r<s;r++)(i||!(r in e))&&(i||(i=Array.prototype.slice.call(e,0,r)),i[r]=e[r]);return t.concat(i||Array.prototype.slice.call(e))},Zee=function(){function t(e,n,r){this.name=e,this.version=n,this.os=r,this.type="browser"}return t}(),Xee=function(){function t(e){this.version=e,this.type="node",this.name="node",this.os=process.platform}return t}(),ete=function(){function t(e,n,r,s){this.name=e,this.version=n,this.os=r,this.bot=s,this.type="bot-device"}return t}(),tte=function(){function t(){this.type="bot",this.bot=!0,this.name="bot",this.version=null,this.os=null}return t}(),nte=function(){function t(){this.type="react-native",this.name="react-native",this.version=null,this.os=null}return t}(),rte=/alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/,ste=/(nuhk|curl|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask\ Jeeves\/Teoma|ia_archiver)/,G3=3,ite=[["aol",/AOLShield\/([0-9\._]+)/],["edge",/Edge\/([0-9\._]+)/],["edge-ios",/EdgiOS\/([0-9\._]+)/],["yandexbrowser",/YaBrowser\/([0-9\._]+)/],["kakaotalk",/KAKAOTALK\s([0-9\.]+)/],["samsung",/SamsungBrowser\/([0-9\.]+)/],["silk",/\bSilk\/([0-9._-]+)\b/],["miui",/MiuiBrowser\/([0-9\.]+)$/],["beaker",/BeakerBrowser\/([0-9\.]+)/],["edge-chromium",/EdgA?\/([0-9\.]+)/],["chromium-webview",/(?!Chrom.*OPR)wv\).*Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["phantomjs",/PhantomJS\/([0-9\.]+)(:?\s|$)/],["crios",/CriOS\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["fxios",/FxiOS\/([0-9\.]+)/],["opera-mini",/Opera Mini.*Version\/([0-9\.]+)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)/],["pie",/^Microsoft Pocket Internet Explorer\/(\d+\.\d+)$/],["pie",/^Mozilla\/\d\.\d+\s\(compatible;\s(?:MSP?IE|MSInternet Explorer) (\d+\.\d+);.*Windows CE.*\)$/],["netfront",/^Mozilla\/\d\.\d+.*NetFront\/(\d.\d)/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["android",/Android\s([0-9\.]+)/],["ios",/Version\/([0-9\._]+).*Mobile.*Safari.*/],["safari",/Version\/([0-9\._]+).*Safari/],["facebook",/FB[AS]V\/([0-9\.]+)/],["instagram",/Instagram\s([0-9\.]+)/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Mobile/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Gecko\)$/],["curl",/^curl\/([0-9\.]+)$/],["searchbot",rte]],Y3=[["iOS",/iP(hone|od|ad)/],["Android OS",/Android/],["BlackBerry OS",/BlackBerry|BB10/],["Windows Mobile",/IEMobile/],["Amazon OS",/Kindle/],["Windows 3.11",/Win16/],["Windows 95",/(Windows 95)|(Win95)|(Windows_95)/],["Windows 98",/(Windows 98)|(Win98)/],["Windows 2000",/(Windows NT 5.0)|(Windows 2000)/],["Windows XP",/(Windows NT 5.1)|(Windows XP)/],["Windows Server 2003",/(Windows NT 5.2)/],["Windows Vista",/(Windows NT 6.0)/],["Windows 7",/(Windows NT 6.1)/],["Windows 8",/(Windows NT 6.2)/],["Windows 8.1",/(Windows NT 6.3)/],["Windows 10",/(Windows NT 10.0)/],["Windows ME",/Windows ME/],["Windows CE",/Windows CE|WinCE|Microsoft Pocket Internet Explorer/],["Open BSD",/OpenBSD/],["Sun OS",/SunOS/],["Chrome OS",/CrOS/],["Linux",/(Linux)|(X11)/],["Mac OS",/(Mac_PowerPC)|(Macintosh)/],["QNX",/QNX/],["BeOS",/BeOS/],["OS/2",/OS\/2/]];function ate(t){return typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"?new nte:typeof navigator<"u"?cte(navigator.userAgent):ute()}function ote(t){return t!==""&&ite.reduce(function(e,n){var r=n[0],s=n[1];if(e)return e;var i=s.exec(t);return!!i&&[r,i]},!1)}function cte(t){var e=ote(t);if(!e)return null;var n=e[0],r=e[1];if(n==="searchbot")return new tte;var s=r[1]&&r[1].split(".").join("_").split("_").slice(0,3);s?s.length<G3&&(s=K3(K3([],s,!0),dte(G3-s.length),!0)):s=[];var i=s.join("."),a=lte(t),o=ste.exec(t);return o&&o[1]?new ete(n,i,a,o[1]):new Zee(n,i,a)}function lte(t){for(var e=0,n=Y3.length;e<n;e++){var r=Y3[e],s=r[0],i=r[1],a=i.exec(t);if(a)return s}return null}function ute(){var t=typeof process<"u"&&process.version;return t?new Xee(process.version.slice(1)):null}function dte(t){for(var e=[],n=0;n<t;n++)e.push("0");return e}var Yt={};Object.defineProperty(Yt,"__esModule",{value:!0});Yt.getLocalStorage=Yt.getLocalStorageOrThrow=Yt.getCrypto=Yt.getCryptoOrThrow=WU=Yt.getLocation=Yt.getLocationOrThrow=aS=Yt.getNavigator=Yt.getNavigatorOrThrow=Hd=Yt.getDocument=Yt.getDocumentOrThrow=Yt.getFromWindowOrThrow=Yt.getFromWindow=void 0;function hh(t){let e;return typeof window<"u"&&typeof window[t]<"u"&&(e=window[t]),e}Yt.getFromWindow=hh;function fm(t){const e=hh(t);if(!e)throw new Error(`${t} is not defined in Window`);return e}Yt.getFromWindowOrThrow=fm;function hte(){return fm("document")}Yt.getDocumentOrThrow=hte;function fte(){return hh("document")}var Hd=Yt.getDocument=fte;function pte(){return fm("navigator")}Yt.getNavigatorOrThrow=pte;function mte(){return hh("navigator")}var aS=Yt.getNavigator=mte;function gte(){return fm("location")}Yt.getLocationOrThrow=gte;function yte(){return hh("location")}var WU=Yt.getLocation=yte;function wte(){return fm("crypto")}Yt.getCryptoOrThrow=wte;function bte(){return hh("crypto")}Yt.getCrypto=bte;function xte(){return fm("localStorage")}Yt.getLocalStorageOrThrow=xte;function vte(){return hh("localStorage")}Yt.getLocalStorage=vte;var oS={};Object.defineProperty(oS,"__esModule",{value:!0});var qU=oS.getWindowMetadata=void 0;const Q3=Yt;function Ete(){let t,e;try{t=Q3.getDocumentOrThrow(),e=Q3.getLocationOrThrow()}catch{return null}function n(){const h=t.getElementsByTagName("link"),f=[];for(let p=0;p<h.length;p++){const g=h[p],m=g.getAttribute("rel");if(m&&m.toLowerCase().indexOf("icon")>-1){const y=g.getAttribute("href");if(y)if(y.toLowerCase().indexOf("https:")===-1&&y.toLowerCase().indexOf("http:")===-1&&y.indexOf("//")!==0){let b=e.protocol+"//"+e.host;if(y.indexOf("/")===0)b+=y;else{const w=e.pathname.split("/");w.pop();const x=w.join("/");b+=x+"/"+y}f.push(b)}else if(y.indexOf("//")===0){const b=e.protocol+y;f.push(b)}else f.push(y)}}return f}function r(...h){const f=t.getElementsByTagName("meta");for(let p=0;p<f.length;p++){const g=f[p],m=["itemprop","property","name"].map(y=>g.getAttribute(y)).filter(y=>y?h.includes(y):!1);if(m.length&&m){const y=g.getAttribute("content");if(y)return y}}return""}function s(){let h=r("name","og:site_name","og:title","twitter:title");return h||(h=t.title),h}function i(){return r("description","og:description","twitter:description","keywords")}const a=s(),o=i(),l=e.origin,u=n();return{description:o,url:l,icons:u,name:a}}qU=oS.getWindowMetadata=Ete;function iy(t,{strict:e=!0}={}){return!t||typeof t!="string"?!1:e?/^0x[0-9a-fA-F]*$/.test(t):t.startsWith("0x")}function bA(t){return iy(t,{strict:!1})?Math.ceil((t.length-2)/2):t.length}const KU="2.31.0";let Wm={getDocsUrl:({docsBaseUrl:t,docsPath:e="",docsSlug:n})=>e?`${t??"https://viem.sh"}${e}${n?`#${n}`:""}`:void 0,version:`viem@${KU}`};class Vd extends Error{constructor(e,n={}){var o;const r=(()=>{var l;return n.cause instanceof Vd?n.cause.details:(l=n.cause)!=null&&l.message?n.cause.message:n.details})(),s=n.cause instanceof Vd&&n.cause.docsPath||n.docsPath,i=(o=Wm.getDocsUrl)==null?void 0:o.call(Wm,{...n,docsPath:s}),a=[e||"An error occurred.","",...n.metaMessages?[...n.metaMessages,""]:[],...i?[`Docs: ${i}`]:[],...r?[`Details: ${r}`]:[],...Wm.version?[`Version: ${Wm.version}`]:[]].join(`
`);super(a,n.cause?{cause:n.cause}:void 0),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metaMessages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"version",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"BaseError"}),this.details=r,this.docsPath=s,this.metaMessages=n.metaMessages,this.name=n.name??this.name,this.shortMessage=e,this.version=KU}walk(e){return GU(this,e)}}function GU(t,e){return e!=null&&e(t)?t:t&&typeof t=="object"&&"cause"in t&&t.cause!==void 0?GU(t.cause,e):e?null:t}class YU extends Vd{constructor({size:e,targetSize:n,type:r}){super(`${r.charAt(0).toUpperCase()}${r.slice(1).toLowerCase()} size (${e}) exceeds padding size (${n}).`,{name:"SizeExceedsPaddingSizeError"})}}function pm(t,{dir:e,size:n=32}={}){return typeof t=="string"?Nte(t,{dir:e,size:n}):Cte(t,{dir:e,size:n})}function Nte(t,{dir:e,size:n=32}={}){if(n===null)return t;const r=t.replace("0x","");if(r.length>n*2)throw new YU({size:Math.ceil(r.length/2),targetSize:n,type:"hex"});return`0x${r[e==="right"?"padEnd":"padStart"](n*2,"0")}`}function Cte(t,{dir:e,size:n=32}={}){if(n===null)return t;if(t.length>n)throw new YU({size:t.length,targetSize:n,type:"bytes"});const r=new Uint8Array(n);for(let s=0;s<n;s++){const i=e==="right";r[i?s:n-s-1]=t[i?s:t.length-s-1]}return r}class Ate extends Vd{constructor({max:e,min:n,signed:r,size:s,value:i}){super(`Number "${i}" is not in safe ${s?`${s*8}-bit ${r?"signed":"unsigned"} `:""}integer range ${e?`(${n} to ${e})`:`(above ${n})`}`,{name:"IntegerOutOfRangeError"})}}class Tte extends Vd{constructor({givenSize:e,maxSize:n}){super(`Size cannot exceed ${n} bytes. Given size: ${e} bytes.`,{name:"SizeOverflowError"})}}function mm(t,{size:e}){if(bA(t)>e)throw new Tte({givenSize:bA(t),maxSize:e})}function xA(t,e={}){const{signed:n}=e;e.size&&mm(t,{size:e.size});const r=BigInt(t);if(!n)return r;const s=(t.length-2)/2,i=(1n<<BigInt(s)*8n-1n)-1n;return r<=i?r:r-BigInt(`0x${"f".padStart(s*2,"f")}`)-1n}function Ste(t,e={}){return Number(xA(t,e))}const kte=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function vA(t,e={}){return typeof t=="number"||typeof t=="bigint"?JU(t,e):typeof t=="string"?Pte(t,e):typeof t=="boolean"?_te(t,e):QU(t,e)}function _te(t,e={}){const n=`0x${Number(t)}`;return typeof e.size=="number"?(mm(n,{size:e.size}),pm(n,{size:e.size})):n}function QU(t,e={}){let n="";for(let s=0;s<t.length;s++)n+=kte[t[s]];const r=`0x${n}`;return typeof e.size=="number"?(mm(r,{size:e.size}),pm(r,{dir:"right",size:e.size})):r}function JU(t,e={}){const{signed:n,size:r}=e,s=BigInt(t);let i;r?n?i=(1n<<BigInt(r)*8n-1n)-1n:i=2n**(BigInt(r)*8n)-1n:typeof t=="number"&&(i=BigInt(Number.MAX_SAFE_INTEGER));const a=typeof i=="bigint"&&n?-i-1n:0;if(i&&s>i||s<a){const l=typeof t=="bigint"?"n":"";throw new Ate({max:i?`${i}${l}`:void 0,min:`${a}${l}`,signed:n,size:r,value:`${t}${l}`})}const o=`0x${(n&&s<0?(1n<<BigInt(r*8))+BigInt(s):s).toString(16)}`;return r?pm(o,{size:r}):o}const Ite=new TextEncoder;function Pte(t,e={}){const n=Ite.encode(t);return QU(n,e)}const Rte=new TextEncoder;function jte(t,e={}){return typeof t=="number"||typeof t=="bigint"?Dte(t,e):typeof t=="boolean"?Ote(t,e):iy(t)?ZU(t,e):XU(t,e)}function Ote(t,e={}){const n=new Uint8Array(1);return n[0]=Number(t),typeof e.size=="number"?(mm(n,{size:e.size}),pm(n,{size:e.size})):n}const xo={zero:48,nine:57,A:65,F:70,a:97,f:102};function J3(t){if(t>=xo.zero&&t<=xo.nine)return t-xo.zero;if(t>=xo.A&&t<=xo.F)return t-(xo.A-10);if(t>=xo.a&&t<=xo.f)return t-(xo.a-10)}function ZU(t,e={}){let n=t;e.size&&(mm(n,{size:e.size}),n=pm(n,{dir:"right",size:e.size}));let r=n.slice(2);r.length%2&&(r=`0${r}`);const s=r.length/2,i=new Uint8Array(s);for(let a=0,o=0;a<s;a++){const l=J3(r.charCodeAt(o++)),u=J3(r.charCodeAt(o++));if(l===void 0||u===void 0)throw new Vd(`Invalid byte sequence ("${r[o-2]}${r[o-1]}" in "${r}").`);i[a]=l*16+u}return i}function Dte(t,e){const n=JU(t,e);return ZU(n)}function XU(t,e={}){const n=Rte.encode(t);return typeof e.size=="number"?(mm(n,{size:e.size}),pm(n,{dir:"right",size:e.size})):n}function eM(t,e){const n=e||"hex",r=YD(iy(t,{strict:!1})?jte(t):t);return n==="bytes"?r:vA(r)}class Ute extends Map{constructor(e){super(),Object.defineProperty(this,"maxSize",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxSize=e}get(e){const n=super.get(e);return super.has(e)&&n!==void 0&&(this.delete(e),super.set(e,n)),n}set(e,n){if(super.set(e,n),this.maxSize&&this.size>this.maxSize){const r=this.keys().next().value;r&&this.delete(r)}return this}}const M2=new Ute(8192);function Mte(t,e){if(M2.has(`${t}.${e}`))return M2.get(`${t}.${e}`);const n=t.substring(2).toLowerCase(),r=eM(XU(n),"bytes"),s=n.split("");for(let a=0;a<40;a+=2)r[a>>1]>>4>=8&&s[a]&&(s[a]=s[a].toUpperCase()),(r[a>>1]&15)>=8&&s[a+1]&&(s[a+1]=s[a+1].toUpperCase());const i=`0x${s.join("")}`;return M2.set(`${t}.${e}`,i),i}function Lte(t){const e=eM(`0x${t.substring(4)}`).substring(26);return Mte(`0x${e}`)}async function Bte({hash:t,signature:e}){const n=iy(t)?t:vA(t),{secp256k1:r}=await Rn(async()=>{const{secp256k1:a}=await import("./secp256k1-DZPIMNOT.js");return{secp256k1:a}},__vite__mapDeps([0,1]));return`0x${(()=>{if(typeof e=="object"&&"r"in e&&"s"in e){const{r:u,s:d,v:h,yParity:f}=e,p=Number(f??h),g=Z3(p);return new r.Signature(xA(u),xA(d)).addRecoveryBit(g)}const a=iy(e)?e:vA(e);if(bA(a)!==65)throw new Error("invalid signature length");const o=Ste(`0x${a.slice(130)}`),l=Z3(o);return r.Signature.fromCompact(a.substring(2,130)).addRecoveryBit(l)})().recoverPublicKey(n.substring(2)).toHex(!1)}`}function Z3(t){if(t===0||t===1)return t;if(t===27)return 0;if(t===28)return 1;throw new Error("Invalid yParityOrV value")}async function $te({hash:t,signature:e}){return Lte(await Bte({hash:t,signature:e}))}function Fte(t){if(t.length>=255)throw new TypeError("Alphabet too long");const e=new Uint8Array(256);for(let u=0;u<e.length;u++)e[u]=255;for(let u=0;u<t.length;u++){const d=t.charAt(u),h=d.charCodeAt(0);if(e[h]!==255)throw new TypeError(d+" is ambiguous");e[h]=u}const n=t.length,r=t.charAt(0),s=Math.log(n)/Math.log(256),i=Math.log(256)/Math.log(n);function a(u){if(u instanceof Uint8Array||(ArrayBuffer.isView(u)?u=new Uint8Array(u.buffer,u.byteOffset,u.byteLength):Array.isArray(u)&&(u=Uint8Array.from(u))),!(u instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(u.length===0)return"";let d=0,h=0,f=0;const p=u.length;for(;f!==p&&u[f]===0;)f++,d++;const g=(p-f)*i+1>>>0,m=new Uint8Array(g);for(;f!==p;){let w=u[f],x=0;for(let A=g-1;(w!==0||x<h)&&A!==-1;A--,x++)w+=256*m[A]>>>0,m[A]=w%n>>>0,w=w/n>>>0;if(w!==0)throw new Error("Non-zero carry");h=x,f++}let y=g-h;for(;y!==g&&m[y]===0;)y++;let b=r.repeat(d);for(;y<g;++y)b+=t.charAt(m[y]);return b}function o(u){if(typeof u!="string")throw new TypeError("Expected String");if(u.length===0)return new Uint8Array;let d=0,h=0,f=0;for(;u[d]===r;)h++,d++;const p=(u.length-d)*s+1>>>0,g=new Uint8Array(p);for(;d<u.length;){const w=u.charCodeAt(d);if(w>255)return;let x=e[w];if(x===255)return;let A=0;for(let T=p-1;(x!==0||A<f)&&T!==-1;T--,A++)x+=n*g[T]>>>0,g[T]=x%256>>>0,x=x/256>>>0;if(x!==0)throw new Error("Non-zero carry");f=A,d++}let m=p-f;for(;m!==p&&g[m]===0;)m++;const y=new Uint8Array(h+(p-m));let b=h;for(;m!==p;)y[b++]=g[m++];return y}function l(u){const d=o(u);if(d)return d;throw new Error("Non-base"+n+" character")}return{encode:a,decodeUnsafe:o,decode:l}}var Hte="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";const gm=Fte(Hte);function Vte(t){const e=t.length;let n=0,r=0;for(;r<e;){let s=t.charCodeAt(r++);if(s&4294967168)if(!(s&4294965248))n+=2;else{if(s>=55296&&s<=56319&&r<e){const i=t.charCodeAt(r);(i&64512)===56320&&(++r,s=((s&1023)<<10)+(i&1023)+65536)}s&4294901760?n+=4:n+=3}else{n++;continue}}return n}function zte(t,e,n){const r=t.length;let s=n,i=0;for(;i<r;){let a=t.charCodeAt(i++);if(a&4294967168)if(!(a&4294965248))e[s++]=a>>6&31|192;else{if(a>=55296&&a<=56319&&i<r){const o=t.charCodeAt(i);(o&64512)===56320&&(++i,a=((a&1023)<<10)+(o&1023)+65536)}a&4294901760?(e[s++]=a>>18&7|240,e[s++]=a>>12&63|128,e[s++]=a>>6&63|128):(e[s++]=a>>12&15|224,e[s++]=a>>6&63|128)}else{e[s++]=a;continue}e[s++]=a&63|128}}const Wte=new TextEncoder,qte=50;function Kte(t,e,n){Wte.encodeInto(t,e.subarray(n))}function Gte(t,e,n){t.length>qte?Kte(t,e,n):zte(t,e,n)}const Yte=4096;function tM(t,e,n){let r=e;const s=r+n,i=[];let a="";for(;r<s;){const o=t[r++];if(!(o&128))i.push(o);else if((o&224)===192){const l=t[r++]&63;i.push((o&31)<<6|l)}else if((o&240)===224){const l=t[r++]&63,u=t[r++]&63;i.push((o&31)<<12|l<<6|u)}else if((o&248)===240){const l=t[r++]&63,u=t[r++]&63,d=t[r++]&63;let h=(o&7)<<18|l<<12|u<<6|d;h>65535&&(h-=65536,i.push(h>>>10&1023|55296),h=56320|h&1023),i.push(h)}else i.push(o);i.length>=Yte&&(a+=String.fromCharCode(...i),i.length=0)}return i.length>0&&(a+=String.fromCharCode(...i)),a}const Qte=new TextDecoder,Jte=200;function Zte(t,e,n){const r=t.subarray(e,e+n);return Qte.decode(r)}function Xte(t,e,n){return n>Jte?Zte(t,e,n):tM(t,e,n)}class lb{constructor(e,n){this.type=e,this.data=n}}class Ks extends Error{constructor(e){super(e);const n=Object.create(Ks.prototype);Object.setPrototypeOf(this,n),Object.defineProperty(this,"name",{configurable:!0,enumerable:!1,value:Ks.name})}}const qm=4294967295;function ene(t,e,n){const r=n/4294967296,s=n;t.setUint32(e,r),t.setUint32(e+4,s)}function nM(t,e,n){const r=Math.floor(n/4294967296),s=n;t.setUint32(e,r),t.setUint32(e+4,s)}function rM(t,e){const n=t.getInt32(e),r=t.getUint32(e+4);return n*4294967296+r}function tne(t,e){const n=t.getUint32(e),r=t.getUint32(e+4);return n*4294967296+r}const nne=-1,rne=4294967296-1,sne=17179869184-1;function ine({sec:t,nsec:e}){if(t>=0&&e>=0&&t<=sne)if(e===0&&t<=rne){const n=new Uint8Array(4);return new DataView(n.buffer).setUint32(0,t),n}else{const n=t/4294967296,r=t&4294967295,s=new Uint8Array(8),i=new DataView(s.buffer);return i.setUint32(0,e<<2|n&3),i.setUint32(4,r),s}else{const n=new Uint8Array(12),r=new DataView(n.buffer);return r.setUint32(0,e),nM(r,4,t),n}}function ane(t){const e=t.getTime(),n=Math.floor(e/1e3),r=(e-n*1e3)*1e6,s=Math.floor(r/1e9);return{sec:n+s,nsec:r-s*1e9}}function one(t){if(t instanceof Date){const e=ane(t);return ine(e)}else return null}function cne(t){const e=new DataView(t.buffer,t.byteOffset,t.byteLength);switch(t.byteLength){case 4:return{sec:e.getUint32(0),nsec:0};case 8:{const n=e.getUint32(0),r=e.getUint32(4),s=(n&3)*4294967296+r,i=n>>>2;return{sec:s,nsec:i}}case 12:{const n=rM(e,4),r=e.getUint32(0);return{sec:n,nsec:r}}default:throw new Ks(`Unrecognized data size for timestamp (expected 4, 8, or 12): ${t.length}`)}}function lne(t){const e=cne(t);return new Date(e.sec*1e3+e.nsec/1e6)}const une={type:nne,encode:one,decode:lne};class bv{constructor(){this.builtInEncoders=[],this.builtInDecoders=[],this.encoders=[],this.decoders=[],this.register(une)}register({type:e,encode:n,decode:r}){if(e>=0)this.encoders[e]=n,this.decoders[e]=r;else{const s=-1-e;this.builtInEncoders[s]=n,this.builtInDecoders[s]=r}}tryToEncode(e,n){for(let r=0;r<this.builtInEncoders.length;r++){const s=this.builtInEncoders[r];if(s!=null){const i=s(e,n);if(i!=null){const a=-1-r;return new lb(a,i)}}}for(let r=0;r<this.encoders.length;r++){const s=this.encoders[r];if(s!=null){const i=s(e,n);if(i!=null){const a=r;return new lb(a,i)}}}return e instanceof lb?e:null}decode(e,n,r){const s=n<0?this.builtInDecoders[-1-n]:this.decoders[n];return s?s(e,n,r):new lb(n,e)}}bv.defaultCodec=new bv;function dne(t){return t instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&t instanceof SharedArrayBuffer}function EA(t){return t instanceof Uint8Array?t:ArrayBuffer.isView(t)?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):dne(t)?new Uint8Array(t):Uint8Array.from(t)}const hne=100,fne=2048;let pne=class sM{constructor(e){this.entered=!1,this.extensionCodec=(e==null?void 0:e.extensionCodec)??bv.defaultCodec,this.context=e==null?void 0:e.context,this.useBigInt64=(e==null?void 0:e.useBigInt64)??!1,this.maxDepth=(e==null?void 0:e.maxDepth)??hne,this.initialBufferSize=(e==null?void 0:e.initialBufferSize)??fne,this.sortKeys=(e==null?void 0:e.sortKeys)??!1,this.forceFloat32=(e==null?void 0:e.forceFloat32)??!1,this.ignoreUndefined=(e==null?void 0:e.ignoreUndefined)??!1,this.forceIntegerToFloat=(e==null?void 0:e.forceIntegerToFloat)??!1,this.pos=0,this.view=new DataView(new ArrayBuffer(this.initialBufferSize)),this.bytes=new Uint8Array(this.view.buffer)}clone(){return new sM({extensionCodec:this.extensionCodec,context:this.context,useBigInt64:this.useBigInt64,maxDepth:this.maxDepth,initialBufferSize:this.initialBufferSize,sortKeys:this.sortKeys,forceFloat32:this.forceFloat32,ignoreUndefined:this.ignoreUndefined,forceIntegerToFloat:this.forceIntegerToFloat})}reinitializeState(){this.pos=0}encodeSharedRef(e){if(this.entered)return this.clone().encodeSharedRef(e);try{return this.entered=!0,this.reinitializeState(),this.doEncode(e,1),this.bytes.subarray(0,this.pos)}finally{this.entered=!1}}encode(e){if(this.entered)return this.clone().encode(e);try{return this.entered=!0,this.reinitializeState(),this.doEncode(e,1),this.bytes.slice(0,this.pos)}finally{this.entered=!1}}doEncode(e,n){if(n>this.maxDepth)throw new Error(`Too deep objects in depth ${n}`);e==null?this.encodeNil():typeof e=="boolean"?this.encodeBoolean(e):typeof e=="number"?this.forceIntegerToFloat?this.encodeNumberAsFloat(e):this.encodeNumber(e):typeof e=="string"?this.encodeString(e):this.useBigInt64&&typeof e=="bigint"?this.encodeBigInt64(e):this.encodeObject(e,n)}ensureBufferSizeToWrite(e){const n=this.pos+e;this.view.byteLength<n&&this.resizeBuffer(n*2)}resizeBuffer(e){const n=new ArrayBuffer(e),r=new Uint8Array(n),s=new DataView(n);r.set(this.bytes),this.view=s,this.bytes=r}encodeNil(){this.writeU8(192)}encodeBoolean(e){e===!1?this.writeU8(194):this.writeU8(195)}encodeNumber(e){!this.forceIntegerToFloat&&Number.isSafeInteger(e)?e>=0?e<128?this.writeU8(e):e<256?(this.writeU8(204),this.writeU8(e)):e<65536?(this.writeU8(205),this.writeU16(e)):e<4294967296?(this.writeU8(206),this.writeU32(e)):this.useBigInt64?this.encodeNumberAsFloat(e):(this.writeU8(207),this.writeU64(e)):e>=-32?this.writeU8(224|e+32):e>=-128?(this.writeU8(208),this.writeI8(e)):e>=-32768?(this.writeU8(209),this.writeI16(e)):e>=-2147483648?(this.writeU8(210),this.writeI32(e)):this.useBigInt64?this.encodeNumberAsFloat(e):(this.writeU8(211),this.writeI64(e)):this.encodeNumberAsFloat(e)}encodeNumberAsFloat(e){this.forceFloat32?(this.writeU8(202),this.writeF32(e)):(this.writeU8(203),this.writeF64(e))}encodeBigInt64(e){e>=BigInt(0)?(this.writeU8(207),this.writeBigUint64(e)):(this.writeU8(211),this.writeBigInt64(e))}writeStringHeader(e){if(e<32)this.writeU8(160+e);else if(e<256)this.writeU8(217),this.writeU8(e);else if(e<65536)this.writeU8(218),this.writeU16(e);else if(e<4294967296)this.writeU8(219),this.writeU32(e);else throw new Error(`Too long string: ${e} bytes in UTF-8`)}encodeString(e){const r=Vte(e);this.ensureBufferSizeToWrite(5+r),this.writeStringHeader(r),Gte(e,this.bytes,this.pos),this.pos+=r}encodeObject(e,n){const r=this.extensionCodec.tryToEncode(e,this.context);if(r!=null)this.encodeExtension(r);else if(Array.isArray(e))this.encodeArray(e,n);else if(ArrayBuffer.isView(e))this.encodeBinary(e);else if(typeof e=="object")this.encodeMap(e,n);else throw new Error(`Unrecognized object: ${Object.prototype.toString.apply(e)}`)}encodeBinary(e){const n=e.byteLength;if(n<256)this.writeU8(196),this.writeU8(n);else if(n<65536)this.writeU8(197),this.writeU16(n);else if(n<4294967296)this.writeU8(198),this.writeU32(n);else throw new Error(`Too large binary: ${n}`);const r=EA(e);this.writeU8a(r)}encodeArray(e,n){const r=e.length;if(r<16)this.writeU8(144+r);else if(r<65536)this.writeU8(220),this.writeU16(r);else if(r<4294967296)this.writeU8(221),this.writeU32(r);else throw new Error(`Too large array: ${r}`);for(const s of e)this.doEncode(s,n+1)}countWithoutUndefined(e,n){let r=0;for(const s of n)e[s]!==void 0&&r++;return r}encodeMap(e,n){const r=Object.keys(e);this.sortKeys&&r.sort();const s=this.ignoreUndefined?this.countWithoutUndefined(e,r):r.length;if(s<16)this.writeU8(128+s);else if(s<65536)this.writeU8(222),this.writeU16(s);else if(s<4294967296)this.writeU8(223),this.writeU32(s);else throw new Error(`Too large map object: ${s}`);for(const i of r){const a=e[i];this.ignoreUndefined&&a===void 0||(this.encodeString(i),this.doEncode(a,n+1))}}encodeExtension(e){if(typeof e.data=="function"){const r=e.data(this.pos+6),s=r.length;if(s>=4294967296)throw new Error(`Too large extension object: ${s}`);this.writeU8(201),this.writeU32(s),this.writeI8(e.type),this.writeU8a(r);return}const n=e.data.length;if(n===1)this.writeU8(212);else if(n===2)this.writeU8(213);else if(n===4)this.writeU8(214);else if(n===8)this.writeU8(215);else if(n===16)this.writeU8(216);else if(n<256)this.writeU8(199),this.writeU8(n);else if(n<65536)this.writeU8(200),this.writeU16(n);else if(n<4294967296)this.writeU8(201),this.writeU32(n);else throw new Error(`Too large extension object: ${n}`);this.writeI8(e.type),this.writeU8a(e.data)}writeU8(e){this.ensureBufferSizeToWrite(1),this.view.setUint8(this.pos,e),this.pos++}writeU8a(e){const n=e.length;this.ensureBufferSizeToWrite(n),this.bytes.set(e,this.pos),this.pos+=n}writeI8(e){this.ensureBufferSizeToWrite(1),this.view.setInt8(this.pos,e),this.pos++}writeU16(e){this.ensureBufferSizeToWrite(2),this.view.setUint16(this.pos,e),this.pos+=2}writeI16(e){this.ensureBufferSizeToWrite(2),this.view.setInt16(this.pos,e),this.pos+=2}writeU32(e){this.ensureBufferSizeToWrite(4),this.view.setUint32(this.pos,e),this.pos+=4}writeI32(e){this.ensureBufferSizeToWrite(4),this.view.setInt32(this.pos,e),this.pos+=4}writeF32(e){this.ensureBufferSizeToWrite(4),this.view.setFloat32(this.pos,e),this.pos+=4}writeF64(e){this.ensureBufferSizeToWrite(8),this.view.setFloat64(this.pos,e),this.pos+=8}writeU64(e){this.ensureBufferSizeToWrite(8),ene(this.view,this.pos,e),this.pos+=8}writeI64(e){this.ensureBufferSizeToWrite(8),nM(this.view,this.pos,e),this.pos+=8}writeBigUint64(e){this.ensureBufferSizeToWrite(8),this.view.setBigUint64(this.pos,e),this.pos+=8}writeBigInt64(e){this.ensureBufferSizeToWrite(8),this.view.setBigInt64(this.pos,e),this.pos+=8}};function mne(t,e){return new pne(e).encodeSharedRef(t)}function L2(t){return`${t<0?"-":""}0x${Math.abs(t).toString(16).padStart(2,"0")}`}const gne=16,yne=16;class wne{constructor(e=gne,n=yne){this.hit=0,this.miss=0,this.maxKeyLength=e,this.maxLengthPerKey=n,this.caches=[];for(let r=0;r<this.maxKeyLength;r++)this.caches.push([])}canBeCached(e){return e>0&&e<=this.maxKeyLength}find(e,n,r){const s=this.caches[r-1];e:for(const i of s){const a=i.bytes;for(let o=0;o<r;o++)if(a[o]!==e[n+o])continue e;return i.str}return null}store(e,n){const r=this.caches[e.length-1],s={bytes:e,str:n};r.length>=this.maxLengthPerKey?r[Math.random()*r.length|0]=s:r.push(s)}decode(e,n,r){const s=this.find(e,n,r);if(s!=null)return this.hit++,s;this.miss++;const i=tM(e,n,r),a=Uint8Array.prototype.slice.call(e,n,n+r);return this.store(a,i),i}}const NA="array",Wg="map_key",iM="map_value",bne=t=>{if(typeof t=="string"||typeof t=="number")return t;throw new Ks("The type of key must be string or number but "+typeof t)};class xne{constructor(){this.stack=[],this.stackHeadPosition=-1}get length(){return this.stackHeadPosition+1}top(){return this.stack[this.stackHeadPosition]}pushArrayState(e){const n=this.getUninitializedStateFromPool();n.type=NA,n.position=0,n.size=e,n.array=new Array(e)}pushMapState(e){const n=this.getUninitializedStateFromPool();n.type=Wg,n.readCount=0,n.size=e,n.map={}}getUninitializedStateFromPool(){if(this.stackHeadPosition++,this.stackHeadPosition===this.stack.length){const e={type:void 0,size:0,array:void 0,position:0,readCount:0,map:void 0,key:null};this.stack.push(e)}return this.stack[this.stackHeadPosition]}release(e){if(this.stack[this.stackHeadPosition]!==e)throw new Error("Invalid stack state. Released state is not on top of the stack.");if(e.type===NA){const r=e;r.size=0,r.array=void 0,r.position=0,r.type=void 0}if(e.type===Wg||e.type===iM){const r=e;r.size=0,r.map=void 0,r.readCount=0,r.type=void 0}this.stackHeadPosition--}reset(){this.stack.length=0,this.stackHeadPosition=-1}}const Km=-1,cS=new DataView(new ArrayBuffer(0)),vne=new Uint8Array(cS.buffer);try{cS.getInt8(0)}catch(t){if(!(t instanceof RangeError))throw new Error("This module is not supported in the current JavaScript engine because DataView does not throw RangeError on out-of-bounds access")}const X3=new RangeError("Insufficient data"),Ene=new wne;let Nne=class aM{constructor(e){this.totalPos=0,this.pos=0,this.view=cS,this.bytes=vne,this.headByte=Km,this.stack=new xne,this.entered=!1,this.extensionCodec=(e==null?void 0:e.extensionCodec)??bv.defaultCodec,this.context=e==null?void 0:e.context,this.useBigInt64=(e==null?void 0:e.useBigInt64)??!1,this.rawStrings=(e==null?void 0:e.rawStrings)??!1,this.maxStrLength=(e==null?void 0:e.maxStrLength)??qm,this.maxBinLength=(e==null?void 0:e.maxBinLength)??qm,this.maxArrayLength=(e==null?void 0:e.maxArrayLength)??qm,this.maxMapLength=(e==null?void 0:e.maxMapLength)??qm,this.maxExtLength=(e==null?void 0:e.maxExtLength)??qm,this.keyDecoder=(e==null?void 0:e.keyDecoder)!==void 0?e.keyDecoder:Ene,this.mapKeyConverter=(e==null?void 0:e.mapKeyConverter)??bne}clone(){return new aM({extensionCodec:this.extensionCodec,context:this.context,useBigInt64:this.useBigInt64,rawStrings:this.rawStrings,maxStrLength:this.maxStrLength,maxBinLength:this.maxBinLength,maxArrayLength:this.maxArrayLength,maxMapLength:this.maxMapLength,maxExtLength:this.maxExtLength,keyDecoder:this.keyDecoder})}reinitializeState(){this.totalPos=0,this.headByte=Km,this.stack.reset()}setBuffer(e){const n=EA(e);this.bytes=n,this.view=new DataView(n.buffer,n.byteOffset,n.byteLength),this.pos=0}appendBuffer(e){if(this.headByte===Km&&!this.hasRemaining(1))this.setBuffer(e);else{const n=this.bytes.subarray(this.pos),r=EA(e),s=new Uint8Array(n.length+r.length);s.set(n),s.set(r,n.length),this.setBuffer(s)}}hasRemaining(e){return this.view.byteLength-this.pos>=e}createExtraByteError(e){const{view:n,pos:r}=this;return new RangeError(`Extra ${n.byteLength-r} of ${n.byteLength} byte(s) found at buffer[${e}]`)}decode(e){if(this.entered)return this.clone().decode(e);try{this.entered=!0,this.reinitializeState(),this.setBuffer(e);const n=this.doDecodeSync();if(this.hasRemaining(1))throw this.createExtraByteError(this.pos);return n}finally{this.entered=!1}}*decodeMulti(e){if(this.entered){yield*this.clone().decodeMulti(e);return}try{for(this.entered=!0,this.reinitializeState(),this.setBuffer(e);this.hasRemaining(1);)yield this.doDecodeSync()}finally{this.entered=!1}}async decodeAsync(e){if(this.entered)return this.clone().decodeAsync(e);try{this.entered=!0;let n=!1,r;for await(const o of e){if(n)throw this.entered=!1,this.createExtraByteError(this.totalPos);this.appendBuffer(o);try{r=this.doDecodeSync(),n=!0}catch(l){if(!(l instanceof RangeError))throw l}this.totalPos+=this.pos}if(n){if(this.hasRemaining(1))throw this.createExtraByteError(this.totalPos);return r}const{headByte:s,pos:i,totalPos:a}=this;throw new RangeError(`Insufficient data in parsing ${L2(s)} at ${a} (${i} in the current buffer)`)}finally{this.entered=!1}}decodeArrayStream(e){return this.decodeMultiAsync(e,!0)}decodeStream(e){return this.decodeMultiAsync(e,!1)}async*decodeMultiAsync(e,n){if(this.entered){yield*this.clone().decodeMultiAsync(e,n);return}try{this.entered=!0;let r=n,s=-1;for await(const i of e){if(n&&s===0)throw this.createExtraByteError(this.totalPos);this.appendBuffer(i),r&&(s=this.readArraySize(),r=!1,this.complete());try{for(;yield this.doDecodeSync(),--s!==0;);}catch(a){if(!(a instanceof RangeError))throw a}this.totalPos+=this.pos}}finally{this.entered=!1}}doDecodeSync(){e:for(;;){const e=this.readHeadByte();let n;if(e>=224)n=e-256;else if(e<192)if(e<128)n=e;else if(e<144){const s=e-128;if(s!==0){this.pushMapState(s),this.complete();continue e}else n={}}else if(e<160){const s=e-144;if(s!==0){this.pushArrayState(s),this.complete();continue e}else n=[]}else{const s=e-160;n=this.decodeString(s,0)}else if(e===192)n=null;else if(e===194)n=!1;else if(e===195)n=!0;else if(e===202)n=this.readF32();else if(e===203)n=this.readF64();else if(e===204)n=this.readU8();else if(e===205)n=this.readU16();else if(e===206)n=this.readU32();else if(e===207)this.useBigInt64?n=this.readU64AsBigInt():n=this.readU64();else if(e===208)n=this.readI8();else if(e===209)n=this.readI16();else if(e===210)n=this.readI32();else if(e===211)this.useBigInt64?n=this.readI64AsBigInt():n=this.readI64();else if(e===217){const s=this.lookU8();n=this.decodeString(s,1)}else if(e===218){const s=this.lookU16();n=this.decodeString(s,2)}else if(e===219){const s=this.lookU32();n=this.decodeString(s,4)}else if(e===220){const s=this.readU16();if(s!==0){this.pushArrayState(s),this.complete();continue e}else n=[]}else if(e===221){const s=this.readU32();if(s!==0){this.pushArrayState(s),this.complete();continue e}else n=[]}else if(e===222){const s=this.readU16();if(s!==0){this.pushMapState(s),this.complete();continue e}else n={}}else if(e===223){const s=this.readU32();if(s!==0){this.pushMapState(s),this.complete();continue e}else n={}}else if(e===196){const s=this.lookU8();n=this.decodeBinary(s,1)}else if(e===197){const s=this.lookU16();n=this.decodeBinary(s,2)}else if(e===198){const s=this.lookU32();n=this.decodeBinary(s,4)}else if(e===212)n=this.decodeExtension(1,0);else if(e===213)n=this.decodeExtension(2,0);else if(e===214)n=this.decodeExtension(4,0);else if(e===215)n=this.decodeExtension(8,0);else if(e===216)n=this.decodeExtension(16,0);else if(e===199){const s=this.lookU8();n=this.decodeExtension(s,1)}else if(e===200){const s=this.lookU16();n=this.decodeExtension(s,2)}else if(e===201){const s=this.lookU32();n=this.decodeExtension(s,4)}else throw new Ks(`Unrecognized type byte: ${L2(e)}`);this.complete();const r=this.stack;for(;r.length>0;){const s=r.top();if(s.type===NA)if(s.array[s.position]=n,s.position++,s.position===s.size)n=s.array,r.release(s);else continue e;else if(s.type===Wg){if(n==="__proto__")throw new Ks("The key __proto__ is not allowed");s.key=this.mapKeyConverter(n),s.type=iM;continue e}else if(s.map[s.key]=n,s.readCount++,s.readCount===s.size)n=s.map,r.release(s);else{s.key=null,s.type=Wg;continue e}}return n}}readHeadByte(){return this.headByte===Km&&(this.headByte=this.readU8()),this.headByte}complete(){this.headByte=Km}readArraySize(){const e=this.readHeadByte();switch(e){case 220:return this.readU16();case 221:return this.readU32();default:{if(e<160)return e-144;throw new Ks(`Unrecognized array type byte: ${L2(e)}`)}}}pushMapState(e){if(e>this.maxMapLength)throw new Ks(`Max length exceeded: map length (${e}) > maxMapLengthLength (${this.maxMapLength})`);this.stack.pushMapState(e)}pushArrayState(e){if(e>this.maxArrayLength)throw new Ks(`Max length exceeded: array length (${e}) > maxArrayLength (${this.maxArrayLength})`);this.stack.pushArrayState(e)}decodeString(e,n){return!this.rawStrings||this.stateIsMapKey()?this.decodeUtf8String(e,n):this.decodeBinary(e,n)}decodeUtf8String(e,n){var i;if(e>this.maxStrLength)throw new Ks(`Max length exceeded: UTF-8 byte length (${e}) > maxStrLength (${this.maxStrLength})`);if(this.bytes.byteLength<this.pos+n+e)throw X3;const r=this.pos+n;let s;return this.stateIsMapKey()&&((i=this.keyDecoder)!=null&&i.canBeCached(e))?s=this.keyDecoder.decode(this.bytes,r,e):s=Xte(this.bytes,r,e),this.pos+=n+e,s}stateIsMapKey(){return this.stack.length>0?this.stack.top().type===Wg:!1}decodeBinary(e,n){if(e>this.maxBinLength)throw new Ks(`Max length exceeded: bin length (${e}) > maxBinLength (${this.maxBinLength})`);if(!this.hasRemaining(e+n))throw X3;const r=this.pos+n,s=this.bytes.subarray(r,r+e);return this.pos+=n+e,s}decodeExtension(e,n){if(e>this.maxExtLength)throw new Ks(`Max length exceeded: ext length (${e}) > maxExtLength (${this.maxExtLength})`);const r=this.view.getInt8(this.pos+n),s=this.decodeBinary(e,n+1);return this.extensionCodec.decode(s,r,this.context)}lookU8(){return this.view.getUint8(this.pos)}lookU16(){return this.view.getUint16(this.pos)}lookU32(){return this.view.getUint32(this.pos)}readU8(){const e=this.view.getUint8(this.pos);return this.pos++,e}readI8(){const e=this.view.getInt8(this.pos);return this.pos++,e}readU16(){const e=this.view.getUint16(this.pos);return this.pos+=2,e}readI16(){const e=this.view.getInt16(this.pos);return this.pos+=2,e}readU32(){const e=this.view.getUint32(this.pos);return this.pos+=4,e}readI32(){const e=this.view.getInt32(this.pos);return this.pos+=4,e}readU64(){const e=tne(this.view,this.pos);return this.pos+=8,e}readI64(){const e=rM(this.view,this.pos);return this.pos+=8,e}readU64AsBigInt(){const e=this.view.getBigUint64(this.pos);return this.pos+=8,e}readI64AsBigInt(){const e=this.view.getBigInt64(this.pos);return this.pos+=8,e}readF32(){const e=this.view.getFloat32(this.pos);return this.pos+=4,e}readF64(){const e=this.view.getFloat64(this.pos);return this.pos+=8,e}};function Cne(t,e){return new Nne(e).decode(t)}/*! scure-base - MIT License (c) 2022 Paul Miller (paulmillr.com) */function Ane(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function oM(t,e){return Array.isArray(e)?e.length===0?!0:t?e.every(n=>typeof n=="string"):e.every(n=>Number.isSafeInteger(n)):!1}function xv(t,e){if(typeof e!="string")throw new Error(`${t}: string expected`);return!0}function lS(t){if(!Number.isSafeInteger(t))throw new Error(`invalid integer: ${t}`)}function CA(t){if(!Array.isArray(t))throw new Error("array expected")}function vv(t,e){if(!oM(!0,e))throw new Error(`${t}: array of strings expected`)}function Tne(t,e){if(!oM(!1,e))throw new Error(`${t}: array of numbers expected`)}function Sne(...t){const e=i=>i,n=(i,a)=>o=>i(a(o)),r=t.map(i=>i.encode).reduceRight(n,e),s=t.map(i=>i.decode).reduce(n,e);return{encode:r,decode:s}}function kne(t){const e=typeof t=="string"?t.split(""):t,n=e.length;vv("alphabet",e);const r=new Map(e.map((s,i)=>[s,i]));return{encode:s=>(CA(s),s.map(i=>{if(!Number.isSafeInteger(i)||i<0||i>=n)throw new Error(`alphabet.encode: digit index outside alphabet "${i}". Allowed: ${t}`);return e[i]})),decode:s=>(CA(s),s.map(i=>{xv("alphabet.decode",i);const a=r.get(i);if(a===void 0)throw new Error(`Unknown letter: "${i}". Allowed: ${t}`);return a}))}}function _ne(t=""){return xv("join",t),{encode:e=>(vv("join.decode",e),e.join(t)),decode:e=>(xv("join.decode",e),e.split(t))}}function Ine(t,e="="){return lS(t),xv("padding",e),{encode(n){for(vv("padding.encode",n);n.length*t%8;)n.push(e);return n},decode(n){vv("padding.decode",n);let r=n.length;if(r*t%8)throw new Error("padding: invalid, string should have whole number of bytes");for(;r>0&&n[r-1]===e;r--)if((r-1)*t%8===0)throw new Error("padding: invalid, string has too much padding");return n.slice(0,r)}}}const cM=(t,e)=>e===0?t:cM(e,t%e),Ev=(t,e)=>t+(e-cM(t,e)),B2=(()=>{let t=[];for(let e=0;e<40;e++)t.push(2**e);return t})();function eI(t,e,n,r){if(CA(t),e<=0||e>32)throw new Error(`convertRadix2: wrong from=${e}`);if(n<=0||n>32)throw new Error(`convertRadix2: wrong to=${n}`);if(Ev(e,n)>32)throw new Error(`convertRadix2: carry overflow from=${e} to=${n} carryBits=${Ev(e,n)}`);let s=0,i=0;const a=B2[e],o=B2[n]-1,l=[];for(const u of t){if(lS(u),u>=a)throw new Error(`convertRadix2: invalid data word=${u} from=${e}`);if(s=s<<e|u,i+e>32)throw new Error(`convertRadix2: carry overflow pos=${i} from=${e}`);for(i+=e;i>=n;i-=n)l.push((s>>i-n&o)>>>0);const d=B2[i];if(d===void 0)throw new Error("invalid carry");s&=d-1}if(s=s<<n-i&o,!r&&i>=e)throw new Error("Excess padding");if(!r&&s>0)throw new Error(`Non-zero padding: ${s}`);return r&&i>0&&l.push(s>>>0),l}function Pne(t,e=!1){if(lS(t),t<=0||t>32)throw new Error("radix2: bits should be in (0..32]");if(Ev(8,t)>32||Ev(t,8)>32)throw new Error("radix2: carry overflow");return{encode:n=>{if(!Ane(n))throw new Error("radix2.encode input should be Uint8Array");return eI(Array.from(n),8,t,!e)},decode:n=>(Tne("radix2.decode",n),Uint8Array.from(eI(n,t,8,e)))}}const Rne=Sne(Pne(5),kne("ABCDEFGHIJKLMNOPQRSTUVWXYZ234567"),Ine(5),_ne(""));function uS(t){return globalThis.Buffer!=null?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):t}function lM(t=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?uS(globalThis.Buffer.allocUnsafe(t)):new Uint8Array(t)}function qg(t,e){e||(e=t.reduce((s,i)=>s+i.length,0));const n=lM(e);let r=0;for(const s of t)n.set(s,r),r+=s.length;return uS(n)}function jne(t,e){if(t.length>=255)throw new TypeError("Alphabet too long");for(var n=new Uint8Array(256),r=0;r<n.length;r++)n[r]=255;for(var s=0;s<t.length;s++){var i=t.charAt(s),a=i.charCodeAt(0);if(n[a]!==255)throw new TypeError(i+" is ambiguous");n[a]=s}var o=t.length,l=t.charAt(0),u=Math.log(o)/Math.log(256),d=Math.log(256)/Math.log(o);function h(g){if(g instanceof Uint8Array||(ArrayBuffer.isView(g)?g=new Uint8Array(g.buffer,g.byteOffset,g.byteLength):Array.isArray(g)&&(g=Uint8Array.from(g))),!(g instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(g.length===0)return"";for(var m=0,y=0,b=0,w=g.length;b!==w&&g[b]===0;)b++,m++;for(var x=(w-b)*d+1>>>0,A=new Uint8Array(x);b!==w;){for(var T=g[b],j=0,P=x-1;(T!==0||j<y)&&P!==-1;P--,j++)T+=256*A[P]>>>0,A[P]=T%o>>>0,T=T/o>>>0;if(T!==0)throw new Error("Non-zero carry");y=j,b++}for(var S=x-y;S!==x&&A[S]===0;)S++;for(var E=l.repeat(m);S<x;++S)E+=t.charAt(A[S]);return E}function f(g){if(typeof g!="string")throw new TypeError("Expected String");if(g.length===0)return new Uint8Array;var m=0;if(g[m]!==" "){for(var y=0,b=0;g[m]===l;)y++,m++;for(var w=(g.length-m)*u+1>>>0,x=new Uint8Array(w);g[m];){var A=n[g.charCodeAt(m)];if(A===255)return;for(var T=0,j=w-1;(A!==0||T<b)&&j!==-1;j--,T++)A+=o*x[j]>>>0,x[j]=A%256>>>0,A=A/256>>>0;if(A!==0)throw new Error("Non-zero carry");b=T,m++}if(g[m]!==" "){for(var P=w-b;P!==w&&x[P]===0;)P++;for(var S=new Uint8Array(y+(w-P)),E=y;P!==w;)S[E++]=x[P++];return S}}}function p(g){var m=f(g);if(m)return m;throw new Error(`Non-${e} character`)}return{encode:h,decodeUnsafe:f,decode:p}}var One=jne,Dne=One;const Une=t=>{if(t instanceof Uint8Array&&t.constructor.name==="Uint8Array")return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")},Mne=t=>new TextEncoder().encode(t),Lne=t=>new TextDecoder().decode(t);class Bne{constructor(e,n,r){this.name=e,this.prefix=n,this.baseEncode=r}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class $ne{constructor(e,n,r){if(this.name=e,this.prefix=n,n.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=n.codePointAt(0),this.baseDecode=r}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return uM(this,e)}}class Fne{constructor(e){this.decoders=e}or(e){return uM(this,e)}decode(e){const n=e[0],r=this.decoders[n];if(r)return r.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const uM=(t,e)=>new Fne({...t.decoders||{[t.prefix]:t},...e.decoders||{[e.prefix]:e}});class Hne{constructor(e,n,r,s){this.name=e,this.prefix=n,this.baseEncode=r,this.baseDecode=s,this.encoder=new Bne(e,n,r),this.decoder=new $ne(e,n,s)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}const H1=({name:t,prefix:e,encode:n,decode:r})=>new Hne(t,e,n,r),lw=({prefix:t,name:e,alphabet:n})=>{const{encode:r,decode:s}=Dne(n,e);return H1({prefix:t,name:e,encode:r,decode:i=>Une(s(i))})},Vne=(t,e,n,r)=>{const s={};for(let d=0;d<e.length;++d)s[e[d]]=d;let i=t.length;for(;t[i-1]==="=";)--i;const a=new Uint8Array(i*n/8|0);let o=0,l=0,u=0;for(let d=0;d<i;++d){const h=s[t[d]];if(h===void 0)throw new SyntaxError(`Non-${r} character`);l=l<<n|h,o+=n,o>=8&&(o-=8,a[u++]=255&l>>o)}if(o>=n||255&l<<8-o)throw new SyntaxError("Unexpected end of data");return a},zne=(t,e,n)=>{const r=e[e.length-1]==="=",s=(1<<n)-1;let i="",a=0,o=0;for(let l=0;l<t.length;++l)for(o=o<<8|t[l],a+=8;a>n;)a-=n,i+=e[s&o>>a];if(a&&(i+=e[s&o<<n-a]),r)for(;i.length*n&7;)i+="=";return i},pr=({name:t,prefix:e,bitsPerChar:n,alphabet:r})=>H1({prefix:e,name:t,encode(s){return zne(s,r,n)},decode(s){return Vne(s,r,n,t)}}),Wne=H1({prefix:"\0",name:"identity",encode:t=>Lne(t),decode:t=>Mne(t)}),qne=Object.freeze(Object.defineProperty({__proto__:null,identity:Wne},Symbol.toStringTag,{value:"Module"})),Kne=pr({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1}),Gne=Object.freeze(Object.defineProperty({__proto__:null,base2:Kne},Symbol.toStringTag,{value:"Module"})),Yne=pr({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3}),Qne=Object.freeze(Object.defineProperty({__proto__:null,base8:Yne},Symbol.toStringTag,{value:"Module"})),Jne=lw({prefix:"9",name:"base10",alphabet:"0123456789"}),Zne=Object.freeze(Object.defineProperty({__proto__:null,base10:Jne},Symbol.toStringTag,{value:"Module"})),Xne=pr({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),ere=pr({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4}),tre=Object.freeze(Object.defineProperty({__proto__:null,base16:Xne,base16upper:ere},Symbol.toStringTag,{value:"Module"})),nre=pr({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),rre=pr({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),sre=pr({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),ire=pr({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),are=pr({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),ore=pr({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),cre=pr({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),lre=pr({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),ure=pr({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5}),dre=Object.freeze(Object.defineProperty({__proto__:null,base32:nre,base32hex:are,base32hexpad:cre,base32hexpadupper:lre,base32hexupper:ore,base32pad:sre,base32padupper:ire,base32upper:rre,base32z:ure},Symbol.toStringTag,{value:"Module"})),hre=lw({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),fre=lw({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"}),pre=Object.freeze(Object.defineProperty({__proto__:null,base36:hre,base36upper:fre},Symbol.toStringTag,{value:"Module"})),mre=lw({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),gre=lw({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"}),yre=Object.freeze(Object.defineProperty({__proto__:null,base58btc:mre,base58flickr:gre},Symbol.toStringTag,{value:"Module"})),wre=pr({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),bre=pr({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),xre=pr({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),vre=pr({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6}),Ere=Object.freeze(Object.defineProperty({__proto__:null,base64:wre,base64pad:bre,base64url:xre,base64urlpad:vre},Symbol.toStringTag,{value:"Module"})),dM=Array.from(""),Nre=dM.reduce((t,e,n)=>(t[n]=e,t),[]),Cre=dM.reduce((t,e,n)=>(t[e.codePointAt(0)]=n,t),[]);function Are(t){return t.reduce((e,n)=>(e+=Nre[n],e),"")}function Tre(t){const e=[];for(const n of t){const r=Cre[n.codePointAt(0)];if(r===void 0)throw new Error(`Non-base256emoji character: ${n}`);e.push(r)}return new Uint8Array(e)}const Sre=H1({prefix:"",name:"base256emoji",encode:Are,decode:Tre}),kre=Object.freeze(Object.defineProperty({__proto__:null,base256emoji:Sre},Symbol.toStringTag,{value:"Module"}));new TextEncoder;new TextDecoder;const tI={...qne,...Gne,...Qne,...Zne,...tre,...dre,...pre,...yre,...Ere,...kre};function hM(t,e,n,r){return{name:t,prefix:e,encoder:{name:t,prefix:e,encode:n},decoder:{decode:r}}}const nI=hM("utf8","u",t=>"u"+new TextDecoder("utf8").decode(t),t=>new TextEncoder().encode(t.substring(1))),$2=hM("ascii","a",t=>{let e="a";for(let n=0;n<t.length;n++)e+=String.fromCharCode(t[n]);return e},t=>{t=t.substring(1);const e=lM(t.length);for(let n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}),fM={utf8:nI,"utf-8":nI,hex:tI.base16,latin1:$2,ascii:$2,binary:$2,...tI};function Ai(t,e="utf8"){const n=fM[e];if(!n)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?uS(globalThis.Buffer.from(t,"utf-8")):n.decoder.decode(`${n.prefix}${t}`)}function Ps(t,e="utf8"){const n=fM[e];if(!n)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(t.buffer,t.byteOffset,t.byteLength).toString("utf8"):n.encoder.encode(t).substring(1)}const _re={waku:{publish:"waku_publish",batchPublish:"waku_batchPublish",subscribe:"waku_subscribe",batchSubscribe:"waku_batchSubscribe",subscription:"waku_subscription",unsubscribe:"waku_unsubscribe",batchUnsubscribe:"waku_batchUnsubscribe",batchFetchMessages:"waku_batchFetchMessages"},irn:{publish:"irn_publish",batchPublish:"irn_batchPublish",subscribe:"irn_subscribe",batchSubscribe:"irn_batchSubscribe",subscription:"irn_subscription",unsubscribe:"irn_unsubscribe",batchUnsubscribe:"irn_batchUnsubscribe",batchFetchMessages:"irn_batchFetchMessages"},iridium:{publish:"iridium_publish",batchPublish:"iridium_batchPublish",subscribe:"iridium_subscribe",batchSubscribe:"iridium_batchSubscribe",subscription:"iridium_subscription",unsubscribe:"iridium_unsubscribe",batchUnsubscribe:"iridium_batchUnsubscribe",batchFetchMessages:"iridium_batchFetchMessages"}},Ire="Input must be an string, Buffer or Uint8Array";function Pre(t){let e;if(t instanceof Uint8Array)e=t;else if(typeof t=="string")e=new TextEncoder().encode(t);else throw new Error(Ire);return e}function Rre(t){return Array.prototype.map.call(t,function(e){return(e<16?"0":"")+e.toString(16)}).join("")}function ub(t){return(4294967296+t).toString(16).substring(1)}function jre(t,e,n){let r=`
`+t+" = ";for(let s=0;s<e.length;s+=2){if(n===32)r+=ub(e[s]).toUpperCase(),r+=" ",r+=ub(e[s+1]).toUpperCase();else if(n===64)r+=ub(e[s+1]).toUpperCase(),r+=ub(e[s]).toUpperCase();else throw new Error("Invalid size "+n);s%6===4?r+=`
`+new Array(t.length+4).join(" "):s<e.length-2&&(r+=" ")}console.log(r)}function Ore(t,e,n){let r=new Date().getTime();const s=new Uint8Array(e);for(let a=0;a<e;a++)s[a]=a%256;const i=new Date().getTime();console.log("Generated random input in "+(i-r)+"ms"),r=i;for(let a=0;a<n;a++){const o=t(s),l=new Date().getTime(),u=l-r;r=l,console.log("Hashed in "+u+"ms: "+o.substring(0,20)+"..."),console.log(Math.round(e/(1<<20)/(u/1e3)*100)/100+" MB PER SECOND")}}var pM={normalizeInput:Pre,toHex:Rre,debugPrint:jre,testSpeed:Ore};const ox=pM;function db(t,e,n){const r=t[e]+t[n];let s=t[e+1]+t[n+1];r>=4294967296&&s++,t[e]=r,t[e+1]=s}function rI(t,e,n,r){let s=t[e]+n;n<0&&(s+=4294967296);let i=t[e+1]+r;s>=4294967296&&i++,t[e]=s,t[e+1]=i}function mM(t,e){return t[e]^t[e+1]<<8^t[e+2]<<16^t[e+3]<<24}function Pc(t,e,n,r,s,i){const a=vg[s],o=vg[s+1],l=vg[i],u=vg[i+1];db(Ge,t,e),rI(Ge,t,a,o);let d=Ge[r]^Ge[t],h=Ge[r+1]^Ge[t+1];Ge[r]=h,Ge[r+1]=d,db(Ge,n,r),d=Ge[e]^Ge[n],h=Ge[e+1]^Ge[n+1],Ge[e]=d>>>24^h<<8,Ge[e+1]=h>>>24^d<<8,db(Ge,t,e),rI(Ge,t,l,u),d=Ge[r]^Ge[t],h=Ge[r+1]^Ge[t+1],Ge[r]=d>>>16^h<<16,Ge[r+1]=h>>>16^d<<16,db(Ge,n,r),d=Ge[e]^Ge[n],h=Ge[e+1]^Ge[n+1],Ge[e]=h>>>31^d<<1,Ge[e+1]=d>>>31^h<<1}const gM=new Uint32Array([4089235720,1779033703,2227873595,3144134277,4271175723,1013904242,1595750129,2773480762,2917565137,1359893119,725511199,2600822924,4215389547,528734635,327033209,1541459225]),Dre=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3,11,8,12,0,5,2,15,13,10,14,3,6,7,1,9,4,7,9,3,1,13,12,11,14,2,6,5,10,4,0,15,8,9,0,5,7,2,4,10,15,14,1,11,12,6,8,3,13,2,12,6,10,0,11,8,3,4,13,7,5,15,14,1,9,12,5,1,15,14,13,4,10,0,7,6,3,9,2,8,11,13,11,7,14,12,1,3,9,5,0,15,4,8,6,2,10,6,15,14,9,11,3,0,8,12,2,13,7,1,4,10,5,10,2,8,4,7,6,1,5,15,11,9,14,3,12,13,0,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3],wr=new Uint8Array(Dre.map(function(t){return t*2})),Ge=new Uint32Array(32),vg=new Uint32Array(32);function yM(t,e){let n=0;for(n=0;n<16;n++)Ge[n]=t.h[n],Ge[n+16]=gM[n];for(Ge[24]=Ge[24]^t.t,Ge[25]=Ge[25]^t.t/4294967296,e&&(Ge[28]=~Ge[28],Ge[29]=~Ge[29]),n=0;n<32;n++)vg[n]=mM(t.b,4*n);for(n=0;n<12;n++)Pc(0,8,16,24,wr[n*16+0],wr[n*16+1]),Pc(2,10,18,26,wr[n*16+2],wr[n*16+3]),Pc(4,12,20,28,wr[n*16+4],wr[n*16+5]),Pc(6,14,22,30,wr[n*16+6],wr[n*16+7]),Pc(0,10,20,30,wr[n*16+8],wr[n*16+9]),Pc(2,12,22,24,wr[n*16+10],wr[n*16+11]),Pc(4,14,16,26,wr[n*16+12],wr[n*16+13]),Pc(6,8,18,28,wr[n*16+14],wr[n*16+15]);for(n=0;n<16;n++)t.h[n]=t.h[n]^Ge[n]^Ge[n+16]}const Rc=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]);function wM(t,e,n,r){if(t===0||t>64)throw new Error("Illegal output length, expected 0 < length <= 64");if(e&&e.length>64)throw new Error("Illegal key, expected Uint8Array with 0 < length <= 64");if(n&&n.length!==16)throw new Error("Illegal salt, expected Uint8Array with length is 16");if(r&&r.length!==16)throw new Error("Illegal personal, expected Uint8Array with length is 16");const s={b:new Uint8Array(128),h:new Uint32Array(16),t:0,c:0,outlen:t};Rc.fill(0),Rc[0]=t,e&&(Rc[1]=e.length),Rc[2]=1,Rc[3]=1,n&&Rc.set(n,32),r&&Rc.set(r,48);for(let i=0;i<16;i++)s.h[i]=gM[i]^mM(Rc,i*4);return e&&(dS(s,e),s.c=128),s}function dS(t,e){for(let n=0;n<e.length;n++)t.c===128&&(t.t+=t.c,yM(t,!1),t.c=0),t.b[t.c++]=e[n]}function bM(t){for(t.t+=t.c;t.c<128;)t.b[t.c++]=0;yM(t,!0);const e=new Uint8Array(t.outlen);for(let n=0;n<t.outlen;n++)e[n]=t.h[n>>2]>>8*(n&3);return e}function xM(t,e,n,r,s){n=n||64,t=ox.normalizeInput(t),r&&(r=ox.normalizeInput(r)),s&&(s=ox.normalizeInput(s));const i=wM(n,e,r,s);return dS(i,t),bM(i)}function Ure(t,e,n,r,s){const i=xM(t,e,n,r,s);return ox.toHex(i)}var Mre={blake2b:xM,blake2bHex:Ure,blake2bInit:wM,blake2bUpdate:dS,blake2bFinal:bM};const vM=pM;function Lre(t,e){return t[e]^t[e+1]<<8^t[e+2]<<16^t[e+3]<<24}function jc(t,e,n,r,s,i){xt[t]=xt[t]+xt[e]+s,xt[r]=hb(xt[r]^xt[t],16),xt[n]=xt[n]+xt[r],xt[e]=hb(xt[e]^xt[n],12),xt[t]=xt[t]+xt[e]+i,xt[r]=hb(xt[r]^xt[t],8),xt[n]=xt[n]+xt[r],xt[e]=hb(xt[e]^xt[n],7)}function hb(t,e){return t>>>e^t<<32-e}const EM=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),br=new Uint8Array([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3,11,8,12,0,5,2,15,13,10,14,3,6,7,1,9,4,7,9,3,1,13,12,11,14,2,6,5,10,4,0,15,8,9,0,5,7,2,4,10,15,14,1,11,12,6,8,3,13,2,12,6,10,0,11,8,3,4,13,7,5,15,14,1,9,12,5,1,15,14,13,4,10,0,7,6,3,9,2,8,11,13,11,7,14,12,1,3,9,5,0,15,4,8,6,2,10,6,15,14,9,11,3,0,8,12,2,13,7,1,4,10,5,10,2,8,4,7,6,1,5,15,11,9,14,3,12,13,0]),xt=new Uint32Array(16),Jn=new Uint32Array(16);function NM(t,e){let n=0;for(n=0;n<8;n++)xt[n]=t.h[n],xt[n+8]=EM[n];for(xt[12]^=t.t,xt[13]^=t.t/4294967296,e&&(xt[14]=~xt[14]),n=0;n<16;n++)Jn[n]=Lre(t.b,4*n);for(n=0;n<10;n++)jc(0,4,8,12,Jn[br[n*16+0]],Jn[br[n*16+1]]),jc(1,5,9,13,Jn[br[n*16+2]],Jn[br[n*16+3]]),jc(2,6,10,14,Jn[br[n*16+4]],Jn[br[n*16+5]]),jc(3,7,11,15,Jn[br[n*16+6]],Jn[br[n*16+7]]),jc(0,5,10,15,Jn[br[n*16+8]],Jn[br[n*16+9]]),jc(1,6,11,12,Jn[br[n*16+10]],Jn[br[n*16+11]]),jc(2,7,8,13,Jn[br[n*16+12]],Jn[br[n*16+13]]),jc(3,4,9,14,Jn[br[n*16+14]],Jn[br[n*16+15]]);for(n=0;n<8;n++)t.h[n]^=xt[n]^xt[n+8]}function CM(t,e){if(!(t>0&&t<=32))throw new Error("Incorrect output length, should be in [1, 32]");const n=e?e.length:0;if(e&&!(n>0&&n<=32))throw new Error("Incorrect key length, should be in [1, 32]");const r={h:new Uint32Array(EM),b:new Uint8Array(64),c:0,t:0,outlen:t};return r.h[0]^=16842752^n<<8^t,n>0&&(hS(r,e),r.c=64),r}function hS(t,e){for(let n=0;n<e.length;n++)t.c===64&&(t.t+=t.c,NM(t,!1),t.c=0),t.b[t.c++]=e[n]}function AM(t){for(t.t+=t.c;t.c<64;)t.b[t.c++]=0;NM(t,!0);const e=new Uint8Array(t.outlen);for(let n=0;n<t.outlen;n++)e[n]=t.h[n>>2]>>8*(n&3)&255;return e}function TM(t,e,n){n=n||32,t=vM.normalizeInput(t);const r=CM(n,e);return hS(r,t),AM(r)}function Bre(t,e,n){const r=TM(t,e,n);return vM.toHex(r)}var $re={blake2s:TM,blake2sHex:Bre,blake2sInit:CM,blake2sUpdate:hS,blake2sFinal:AM};const Gm=Mre,Ym=$re;var Fre={blake2b:Gm.blake2b,blake2bHex:Gm.blake2bHex,blake2bInit:Gm.blake2bInit,blake2bUpdate:Gm.blake2bUpdate,blake2bFinal:Gm.blake2bFinal,blake2s:Ym.blake2s,blake2sHex:Ym.blake2sHex,blake2sInit:Ym.blake2sInit,blake2sUpdate:Ym.blake2sUpdate,blake2sFinal:Ym.blake2sFinal},Hre={};const Vre=":";function Rf(t){const[e,n]=t.split(Vre);return{namespace:e,reference:n}}function SM(t,e){return t.includes(":")?[t]:e.chains||[]}var zre=Object.defineProperty,Wre=Object.defineProperties,qre=Object.getOwnPropertyDescriptors,sI=Object.getOwnPropertySymbols,Kre=Object.prototype.hasOwnProperty,Gre=Object.prototype.propertyIsEnumerable,iI=(t,e,n)=>e in t?zre(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,aI=(t,e)=>{for(var n in e||(e={}))Kre.call(e,n)&&iI(t,n,e[n]);if(sI)for(var n of sI(e))Gre.call(e,n)&&iI(t,n,e[n]);return t},Yre=(t,e)=>Wre(t,qre(e));const Qre="ReactNative",Js={reactNative:"react-native",node:"node",browser:"browser",unknown:"unknown"},Jre="js";function Nv(){return typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"}function su(){return!Hd()&&!!aS()&&navigator.product===Qre}function Zre(){return su()&&typeof globalThis<"u"&&typeof(globalThis==null?void 0:globalThis.Platform)<"u"&&(globalThis==null?void 0:globalThis.Platform.OS)==="android"}function Xre(){return su()&&typeof globalThis<"u"&&typeof(globalThis==null?void 0:globalThis.Platform)<"u"&&(globalThis==null?void 0:globalThis.Platform.OS)==="ios"}function ym(){return!Nv()&&!!aS()&&!!Hd()}function uw(){return su()?Js.reactNative:Nv()?Js.node:ym()?Js.browser:Js.unknown}function oI(){var t;try{return su()&&typeof globalThis<"u"&&typeof(globalThis==null?void 0:globalThis.Application)<"u"?(t=globalThis.Application)==null?void 0:t.applicationId:void 0}catch{return}}function ese(t,e){const n=new URLSearchParams(t);for(const r of Object.keys(e).sort())if(e.hasOwnProperty(r)){const s=e[r];s!==void 0&&n.set(r,s)}return n.toString()}function tse(t){var e,n;const r=kM();try{return t!=null&&t.url&&r.url&&new URL(t.url).host!==new URL(r.url).host&&(console.warn(`The configured WalletConnect 'metadata.url':${t.url} differs from the actual page url:${r.url}. This is probably unintended and can lead to issues.`),t.url=r.url),(e=t==null?void 0:t.icons)!=null&&e.length&&t.icons.length>0&&(t.icons=t.icons.filter(s=>s!=="")),Yre(aI(aI({},r),t),{url:(t==null?void 0:t.url)||r.url,name:(t==null?void 0:t.name)||r.name,description:(t==null?void 0:t.description)||r.description,icons:(n=t==null?void 0:t.icons)!=null&&n.length&&t.icons.length>0?t.icons:r.icons})}catch(s){return console.warn("Error populating app metadata",s),t||r}}function kM(){return qU()||{name:"",description:"",url:"",icons:[""]}}function nse(){if(uw()===Js.reactNative&&typeof globalThis<"u"&&typeof(globalThis==null?void 0:globalThis.Platform)<"u"){const{OS:n,Version:r}=globalThis.Platform;return[n,r].join("-")}const t=ate();if(t===null)return"unknown";const e=t.os?t.os.replace(" ","").toLowerCase():"unknown";return t.type==="browser"?[e,t.name,t.version].join("-"):[e,t.version].join("-")}function rse(){var t;const e=uw();return e===Js.browser?[e,((t=WU())==null?void 0:t.host)||"unknown"].join(":"):e}function _M(t,e,n){const r=nse(),s=rse();return[[t,e].join("-"),[Jre,n].join("-"),r,s].join("/")}function sse({protocol:t,version:e,relayUrl:n,sdkVersion:r,auth:s,projectId:i,useOnCloseEvent:a,bundleId:o,packageName:l}){const u=n.split("?"),d=_M(t,e,r),h={auth:s,ua:d,projectId:i,useOnCloseEvent:a,packageName:l||void 0,bundleId:o||void 0},f=ese(u[1]||"",h);return u[0]+"?"+f}function Fu(t,e){return t.filter(n=>e.includes(n)).length===t.length}function AA(t){return Object.fromEntries(t.entries())}function TA(t){return new Map(Object.entries(t))}function Eu(t=he.FIVE_MINUTES,e){const n=he.toMiliseconds(t||he.FIVE_MINUTES);let r,s,i,a;return{resolve:o=>{i&&r&&(clearTimeout(i),r(o),a=Promise.resolve(o))},reject:o=>{i&&s&&(clearTimeout(i),s(o))},done:()=>new Promise((o,l)=>{if(a)return o(a);i=setTimeout(()=>{const u=new Error(e);a=Promise.reject(u),l(u)},n),r=o,s=l})}}function Nl(t,e,n){return new Promise(async(r,s)=>{const i=setTimeout(()=>s(new Error(n)),e);try{const a=await t;r(a)}catch(a){s(a)}clearTimeout(i)})}function IM(t,e){if(typeof e=="string"&&e.startsWith(`${t}:`))return e;if(t.toLowerCase()==="topic"){if(typeof e!="string")throw new Error('Value must be "string" for expirer target type: topic');return`topic:${e}`}else if(t.toLowerCase()==="id"){if(typeof e!="number")throw new Error('Value must be "number" for expirer target type: id');return`id:${e}`}throw new Error(`Unknown expirer target type: ${t}`)}function ise(t){return IM("topic",t)}function ase(t){return IM("id",t)}function PM(t){const[e,n]=t.split(":"),r={id:void 0,topic:void 0};if(e==="topic"&&typeof n=="string")r.topic=n;else if(e==="id"&&Number.isInteger(Number(n)))r.id=Number(n);else throw new Error(`Invalid target, expected id:number or topic:string, got ${e}:${n}`);return r}function Pn(t,e){return he.fromMiliseconds(Date.now()+he.toMiliseconds(t))}function Wc(t){return Date.now()>=he.toMiliseconds(t)}function jt(t,e){return`${t}${e?`:${e}`:""}`}function so(t=[],e=[]){return[...new Set([...t,...e])]}async function ose({id:t,topic:e,wcDeepLink:n}){var r;try{if(!n)return;const s=typeof n=="string"?JSON.parse(n):n,i=s==null?void 0:s.href;if(typeof i!="string")return;const a=cse(i,t,e),o=uw();if(o===Js.browser){if(!((r=Hd())!=null&&r.hasFocus())){console.warn("Document does not have focus, skipping deeplink.");return}lse(a)}else o===Js.reactNative&&typeof(globalThis==null?void 0:globalThis.Linking)<"u"&&await globalThis.Linking.openURL(a)}catch(s){console.error(s)}}function cse(t,e,n){const r=`requestId=${e}&sessionTopic=${n}`;t.endsWith("/")&&(t=t.slice(0,-1));let s=`${t}`;if(t.startsWith("https://t.me")){const i=t.includes("?")?"&startapp=":"?startapp=";s=`${s}${i}${fse(r,!0)}`}else s=`${s}/wc?${r}`;return s}function lse(t){let e="_self";hse()?e="_top":(dse()||t.startsWith("https://")||t.startsWith("http://"))&&(e="_blank"),window.open(t,e,"noreferrer noopener")}async function use(t,e){let n="";try{if(ym()&&(n=localStorage.getItem(e),n))return n;n=await t.getItem(e)}catch(r){console.error(r)}return n}function cI(t,e){if(!t.includes(e))return null;const n=t.split(/([&,?,=])/),r=n.indexOf(e);return n[r+2]}function lI(){return typeof crypto<"u"&&crypto!=null&&crypto.randomUUID?crypto.randomUUID():"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/gu,t=>{const e=Math.random()*16|0;return(t==="x"?e:e&3|8).toString(16)})}function fS(){return typeof process<"u"&&Hre.IS_VITEST==="true"}function dse(){return typeof window<"u"&&(!!window.TelegramWebviewProxy||!!window.Telegram||!!window.TelegramWebviewProxyProto)}function hse(){try{return window.self!==window.top}catch{return!1}}function fse(t,e=!1){const n=Buffer.from(t).toString("base64");return e?n.replace(/[=]/g,""):n}function RM(t){return Buffer.from(t,"base64").toString("utf-8")}function pse(t){return new Promise(e=>setTimeout(e,t))}const fb=BigInt(2**32-1),uI=BigInt(32);function jM(t,e=!1){return e?{h:Number(t&fb),l:Number(t>>uI&fb)}:{h:Number(t>>uI&fb)|0,l:Number(t&fb)|0}}function OM(t,e=!1){const n=t.length;let r=new Uint32Array(n),s=new Uint32Array(n);for(let i=0;i<n;i++){const{h:a,l:o}=jM(t[i],e);[r[i],s[i]]=[a,o]}return[r,s]}const dI=(t,e,n)=>t>>>n,hI=(t,e,n)=>t<<32-n|e>>>n,qc=(t,e,n)=>t>>>n|e<<32-n,Kc=(t,e,n)=>t<<32-n|e>>>n,Eg=(t,e,n)=>t<<64-n|e>>>n-32,Ng=(t,e,n)=>t>>>n-32|e<<64-n,mse=(t,e)=>e,gse=(t,e)=>t,yse=(t,e,n)=>t<<n|e>>>32-n,wse=(t,e,n)=>e<<n|t>>>32-n,bse=(t,e,n)=>e<<n-32|t>>>64-n,xse=(t,e,n)=>t<<n-32|e>>>64-n;function Vi(t,e,n,r){const s=(e>>>0)+(r>>>0);return{h:t+n+(s/2**32|0)|0,l:s|0}}const pS=(t,e,n)=>(t>>>0)+(e>>>0)+(n>>>0),mS=(t,e,n,r)=>e+n+r+(t/2**32|0)|0,vse=(t,e,n,r)=>(t>>>0)+(e>>>0)+(n>>>0)+(r>>>0),Ese=(t,e,n,r,s)=>e+n+r+s+(t/2**32|0)|0,Nse=(t,e,n,r,s)=>(t>>>0)+(e>>>0)+(n>>>0)+(r>>>0)+(s>>>0),Cse=(t,e,n,r,s,i)=>e+n+r+s+i+(t/2**32|0)|0,Sh=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;function gS(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function hc(t){if(!Number.isSafeInteger(t)||t<0)throw new Error("positive integer expected, got "+t)}function _i(t,...e){if(!gS(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function yS(t){if(typeof t!="function"||typeof t.create!="function")throw new Error("Hash should be wrapped by utils.createHasher");hc(t.outputLen),hc(t.blockLen)}function ql(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function wS(t,e){_i(t);const n=e.outputLen;if(t.length<n)throw new Error("digestInto() expects output buffer of length at least "+n)}function ay(t){return new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4))}function Ii(...t){for(let e=0;e<t.length;e++)t[e].fill(0)}function F2(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)}function Ca(t,e){return t<<32-e|t>>>e}const DM=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;function UM(t){return t<<24&4278190080|t<<8&16711680|t>>>8&65280|t>>>24&255}const To=DM?t=>t:t=>UM(t);function Ase(t){for(let e=0;e<t.length;e++)t[e]=UM(t[e]);return t}const Gc=DM?t=>t:Ase,MM=typeof Uint8Array.from([]).toHex=="function"&&typeof Uint8Array.fromHex=="function",Tse=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function oy(t){if(_i(t),MM)return t.toHex();let e="";for(let n=0;n<t.length;n++)e+=Tse[t[n]];return e}const vo={_0:48,_9:57,A:65,F:70,a:97,f:102};function fI(t){if(t>=vo._0&&t<=vo._9)return t-vo._0;if(t>=vo.A&&t<=vo.F)return t-(vo.A-10);if(t>=vo.a&&t<=vo.f)return t-(vo.a-10)}function bS(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);if(MM)return Uint8Array.fromHex(t);const e=t.length,n=e/2;if(e%2)throw new Error("hex string expected, got unpadded hex of length "+e);const r=new Uint8Array(n);for(let s=0,i=0;s<n;s++,i+=2){const a=fI(t.charCodeAt(i)),o=fI(t.charCodeAt(i+1));if(a===void 0||o===void 0){const l=t[i]+t[i+1];throw new Error('hex string expected, got non-hex character "'+l+'" at index '+i)}r[s]=a*16+o}return r}function Sse(t){if(typeof t!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(t))}function ua(t){return typeof t=="string"&&(t=Sse(t)),_i(t),t}function Hu(...t){let e=0;for(let r=0;r<t.length;r++){const s=t[r];_i(s),e+=s.length}const n=new Uint8Array(e);for(let r=0,s=0;r<t.length;r++){const i=t[r];n.set(i,s),s+=i.length}return n}let V1=class{};function dw(t){const e=r=>t().update(ua(r)).digest(),n=t();return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=()=>t(),e}function kse(t){const e=(r,s)=>t(s).update(ua(r)).digest(),n=t({});return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=r=>t(r),e}function wm(t=32){if(Sh&&typeof Sh.getRandomValues=="function")return Sh.getRandomValues(new Uint8Array(t));if(Sh&&typeof Sh.randomBytes=="function")return Uint8Array.from(Sh.randomBytes(t));throw new Error("crypto.getRandomValues must be defined")}const _se=BigInt(0),Qm=BigInt(1),Ise=BigInt(2),Pse=BigInt(7),Rse=BigInt(256),jse=BigInt(113),LM=[],BM=[],$M=[];for(let t=0,e=Qm,n=1,r=0;t<24;t++){[n,r]=[r,(2*n+3*r)%5],LM.push(2*(5*r+n)),BM.push((t+1)*(t+2)/2%64);let s=_se;for(let i=0;i<7;i++)e=(e<<Qm^(e>>Pse)*jse)%Rse,e&Ise&&(s^=Qm<<(Qm<<BigInt(i))-Qm);$M.push(s)}const FM=OM($M,!0),Ose=FM[0],Dse=FM[1],pI=(t,e,n)=>n>32?bse(t,e,n):yse(t,e,n),mI=(t,e,n)=>n>32?xse(t,e,n):wse(t,e,n);function Use(t,e=24){const n=new Uint32Array(10);for(let r=24-e;r<24;r++){for(let a=0;a<10;a++)n[a]=t[a]^t[a+10]^t[a+20]^t[a+30]^t[a+40];for(let a=0;a<10;a+=2){const o=(a+8)%10,l=(a+2)%10,u=n[l],d=n[l+1],h=pI(u,d,1)^n[o],f=mI(u,d,1)^n[o+1];for(let p=0;p<50;p+=10)t[a+p]^=h,t[a+p+1]^=f}let s=t[2],i=t[3];for(let a=0;a<24;a++){const o=BM[a],l=pI(s,i,o),u=mI(s,i,o),d=LM[a];s=t[d],i=t[d+1],t[d]=l,t[d+1]=u}for(let a=0;a<50;a+=10){for(let o=0;o<10;o++)n[o]=t[a+o];for(let o=0;o<10;o++)t[a+o]^=~n[(o+2)%10]&n[(o+4)%10]}t[0]^=Ose[r],t[1]^=Dse[r]}Ii(n)}let Mse=class HM extends V1{constructor(e,n,r,s=!1,i=24){if(super(),this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,this.enableXOF=!1,this.blockLen=e,this.suffix=n,this.outputLen=r,this.enableXOF=s,this.rounds=i,hc(r),!(0<e&&e<200))throw new Error("only keccak-f1600 function is supported");this.state=new Uint8Array(200),this.state32=ay(this.state)}clone(){return this._cloneInto()}keccak(){Gc(this.state32),Use(this.state32,this.rounds),Gc(this.state32),this.posOut=0,this.pos=0}update(e){ql(this),e=ua(e),_i(e);const{blockLen:n,state:r}=this,s=e.length;for(let i=0;i<s;){const a=Math.min(n-this.pos,s-i);for(let o=0;o<a;o++)r[this.pos++]^=e[i++];this.pos===n&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:e,suffix:n,pos:r,blockLen:s}=this;e[r]^=n,n&128&&r===s-1&&this.keccak(),e[s-1]^=128,this.keccak()}writeInto(e){ql(this,!1),_i(e),this.finish();const n=this.state,{blockLen:r}=this;for(let s=0,i=e.length;s<i;){this.posOut>=r&&this.keccak();const a=Math.min(r-this.posOut,i-s);e.set(n.subarray(this.posOut,this.posOut+a),s),this.posOut+=a,s+=a}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return hc(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(wS(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,Ii(this.state)}_cloneInto(e){const{blockLen:n,suffix:r,outputLen:s,rounds:i,enableXOF:a}=this;return e||(e=new HM(n,r,s,a,i)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=i,e.suffix=r,e.outputLen=s,e.enableXOF=a,e.destroyed=this.destroyed,e}};const Lse=(t,e,n)=>dw(()=>new Mse(e,t,n)),Bse=Lse(1,136,256/8);function $se(t,e,n,r){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,n,r);const s=BigInt(32),i=BigInt(4294967295),a=Number(n>>s&i),o=Number(n&i),l=r?4:0,u=r?0:4;t.setUint32(e+l,a,r),t.setUint32(e+u,o,r)}function Fse(t,e,n){return t&e^~t&n}function Hse(t,e,n){return t&e^t&n^e&n}let VM=class extends V1{constructor(e,n,r,s){super(),this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.blockLen=e,this.outputLen=n,this.padOffset=r,this.isLE=s,this.buffer=new Uint8Array(e),this.view=F2(this.buffer)}update(e){ql(this),e=ua(e),_i(e);const{view:n,buffer:r,blockLen:s}=this,i=e.length;for(let a=0;a<i;){const o=Math.min(s-this.pos,i-a);if(o===s){const l=F2(e);for(;s<=i-a;a+=s)this.process(l,a);continue}r.set(e.subarray(a,a+o),this.pos),this.pos+=o,a+=o,this.pos===s&&(this.process(n,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){ql(this),wS(e,this),this.finished=!0;const{buffer:n,view:r,blockLen:s,isLE:i}=this;let{pos:a}=this;n[a++]=128,Ii(this.buffer.subarray(a)),this.padOffset>s-a&&(this.process(r,0),a=0);for(let h=a;h<s;h++)n[h]=0;$se(r,s-8,BigInt(this.length*8),i),this.process(r,0);const o=F2(e),l=this.outputLen;if(l%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const u=l/4,d=this.get();if(u>d.length)throw new Error("_sha2: outputLen bigger than state");for(let h=0;h<u;h++)o.setUint32(4*h,d[h],i)}digest(){const{buffer:e,outputLen:n}=this;this.digestInto(e);const r=e.slice(0,n);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:n,buffer:r,length:s,finished:i,destroyed:a,pos:o}=this;return e.destroyed=a,e.finished=i,e.length=s,e.pos=o,s%n&&e.buffer.set(r),e}clone(){return this._cloneInto()}};const Oc=Uint32Array.from([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),xr=Uint32Array.from([3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]),vr=Uint32Array.from([1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209]),Vse=Uint32Array.from([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Dc=new Uint32Array(64);let zse=class extends VM{constructor(e=32){super(64,e,8,!1),this.A=Oc[0]|0,this.B=Oc[1]|0,this.C=Oc[2]|0,this.D=Oc[3]|0,this.E=Oc[4]|0,this.F=Oc[5]|0,this.G=Oc[6]|0,this.H=Oc[7]|0}get(){const{A:e,B:n,C:r,D:s,E:i,F:a,G:o,H:l}=this;return[e,n,r,s,i,a,o,l]}set(e,n,r,s,i,a,o,l){this.A=e|0,this.B=n|0,this.C=r|0,this.D=s|0,this.E=i|0,this.F=a|0,this.G=o|0,this.H=l|0}process(e,n){for(let h=0;h<16;h++,n+=4)Dc[h]=e.getUint32(n,!1);for(let h=16;h<64;h++){const f=Dc[h-15],p=Dc[h-2],g=Ca(f,7)^Ca(f,18)^f>>>3,m=Ca(p,17)^Ca(p,19)^p>>>10;Dc[h]=m+Dc[h-7]+g+Dc[h-16]|0}let{A:r,B:s,C:i,D:a,E:o,F:l,G:u,H:d}=this;for(let h=0;h<64;h++){const f=Ca(o,6)^Ca(o,11)^Ca(o,25),p=d+f+Fse(o,l,u)+Vse[h]+Dc[h]|0,g=(Ca(r,2)^Ca(r,13)^Ca(r,22))+Hse(r,s,i)|0;d=u,u=l,l=o,o=a+p|0,a=i,i=s,s=r,r=p+g|0}r=r+this.A|0,s=s+this.B|0,i=i+this.C|0,a=a+this.D|0,o=o+this.E|0,l=l+this.F|0,u=u+this.G|0,d=d+this.H|0,this.set(r,s,i,a,o,l,u,d)}roundClean(){Ii(Dc)}destroy(){this.set(0,0,0,0,0,0,0,0),Ii(this.buffer)}};const zM=OM(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(t=>BigInt(t))),Wse=zM[0],qse=zM[1],Uc=new Uint32Array(80),Mc=new Uint32Array(80);let xS=class extends VM{constructor(e=64){super(128,e,16,!1),this.Ah=vr[0]|0,this.Al=vr[1]|0,this.Bh=vr[2]|0,this.Bl=vr[3]|0,this.Ch=vr[4]|0,this.Cl=vr[5]|0,this.Dh=vr[6]|0,this.Dl=vr[7]|0,this.Eh=vr[8]|0,this.El=vr[9]|0,this.Fh=vr[10]|0,this.Fl=vr[11]|0,this.Gh=vr[12]|0,this.Gl=vr[13]|0,this.Hh=vr[14]|0,this.Hl=vr[15]|0}get(){const{Ah:e,Al:n,Bh:r,Bl:s,Ch:i,Cl:a,Dh:o,Dl:l,Eh:u,El:d,Fh:h,Fl:f,Gh:p,Gl:g,Hh:m,Hl:y}=this;return[e,n,r,s,i,a,o,l,u,d,h,f,p,g,m,y]}set(e,n,r,s,i,a,o,l,u,d,h,f,p,g,m,y){this.Ah=e|0,this.Al=n|0,this.Bh=r|0,this.Bl=s|0,this.Ch=i|0,this.Cl=a|0,this.Dh=o|0,this.Dl=l|0,this.Eh=u|0,this.El=d|0,this.Fh=h|0,this.Fl=f|0,this.Gh=p|0,this.Gl=g|0,this.Hh=m|0,this.Hl=y|0}process(e,n){for(let x=0;x<16;x++,n+=4)Uc[x]=e.getUint32(n),Mc[x]=e.getUint32(n+=4);for(let x=16;x<80;x++){const A=Uc[x-15]|0,T=Mc[x-15]|0,j=qc(A,T,1)^qc(A,T,8)^dI(A,T,7),P=Kc(A,T,1)^Kc(A,T,8)^hI(A,T,7),S=Uc[x-2]|0,E=Mc[x-2]|0,k=qc(S,E,19)^Eg(S,E,61)^dI(S,E,6),R=Kc(S,E,19)^Ng(S,E,61)^hI(S,E,6),O=vse(P,R,Mc[x-7],Mc[x-16]),F=Ese(O,j,k,Uc[x-7],Uc[x-16]);Uc[x]=F|0,Mc[x]=O|0}let{Ah:r,Al:s,Bh:i,Bl:a,Ch:o,Cl:l,Dh:u,Dl:d,Eh:h,El:f,Fh:p,Fl:g,Gh:m,Gl:y,Hh:b,Hl:w}=this;for(let x=0;x<80;x++){const A=qc(h,f,14)^qc(h,f,18)^Eg(h,f,41),T=Kc(h,f,14)^Kc(h,f,18)^Ng(h,f,41),j=h&p^~h&m,P=f&g^~f&y,S=Nse(w,T,P,qse[x],Mc[x]),E=Cse(S,b,A,j,Wse[x],Uc[x]),k=S|0,R=qc(r,s,28)^Eg(r,s,34)^Eg(r,s,39),O=Kc(r,s,28)^Ng(r,s,34)^Ng(r,s,39),F=r&i^r&o^i&o,z=s&a^s&l^a&l;b=m|0,w=y|0,m=p|0,y=g|0,p=h|0,g=f|0,{h,l:f}=Vi(u|0,d|0,E|0,k|0),u=o|0,d=l|0,o=i|0,l=a|0,i=r|0,a=s|0;const N=pS(k,O,z);r=mS(N,E,R,F),s=N|0}({h:r,l:s}=Vi(this.Ah|0,this.Al|0,r|0,s|0)),{h:i,l:a}=Vi(this.Bh|0,this.Bl|0,i|0,a|0),{h:o,l}=Vi(this.Ch|0,this.Cl|0,o|0,l|0),{h:u,l:d}=Vi(this.Dh|0,this.Dl|0,u|0,d|0),{h,l:f}=Vi(this.Eh|0,this.El|0,h|0,f|0),{h:p,l:g}=Vi(this.Fh|0,this.Fl|0,p|0,g|0),{h:m,l:y}=Vi(this.Gh|0,this.Gl|0,m|0,y|0),{h:b,l:w}=Vi(this.Hh|0,this.Hl|0,b|0,w|0),this.set(r,s,i,a,o,l,u,d,h,f,p,g,m,y,b,w)}roundClean(){Ii(Uc,Mc)}destroy(){Ii(this.buffer),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}},Kse=class extends xS{constructor(){super(48),this.Ah=xr[0]|0,this.Al=xr[1]|0,this.Bh=xr[2]|0,this.Bl=xr[3]|0,this.Ch=xr[4]|0,this.Cl=xr[5]|0,this.Dh=xr[6]|0,this.Dl=xr[7]|0,this.Eh=xr[8]|0,this.El=xr[9]|0,this.Fh=xr[10]|0,this.Fl=xr[11]|0,this.Gh=xr[12]|0,this.Gl=xr[13]|0,this.Hh=xr[14]|0,this.Hl=xr[15]|0}};const Er=Uint32Array.from([573645204,4230739756,2673172387,3360449730,596883563,1867755857,2520282905,1497426621,2519219938,2827943907,3193839141,1401305490,721525244,746961066,246885852,2177182882]);let Gse=class extends xS{constructor(){super(32),this.Ah=Er[0]|0,this.Al=Er[1]|0,this.Bh=Er[2]|0,this.Bl=Er[3]|0,this.Ch=Er[4]|0,this.Cl=Er[5]|0,this.Dh=Er[6]|0,this.Dl=Er[7]|0,this.Eh=Er[8]|0,this.El=Er[9]|0,this.Fh=Er[10]|0,this.Fl=Er[11]|0,this.Gh=Er[12]|0,this.Gl=Er[13]|0,this.Hh=Er[14]|0,this.Hl=Er[15]|0}};const z1=dw(()=>new zse),Yse=dw(()=>new xS),Qse=dw(()=>new Kse),Jse=dw(()=>new Gse),Zse=Uint8Array.from([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3,11,8,12,0,5,2,15,13,10,14,3,6,7,1,9,4,7,9,3,1,13,12,11,14,2,6,5,10,4,0,15,8,9,0,5,7,2,4,10,15,14,1,11,12,6,8,3,13,2,12,6,10,0,11,8,3,4,13,7,5,15,14,1,9,12,5,1,15,14,13,4,10,0,7,6,3,9,2,8,11,13,11,7,14,12,1,3,9,5,0,15,4,8,6,2,10,6,15,14,9,11,3,0,8,12,2,13,7,1,4,10,5,10,2,8,4,7,6,1,5,15,11,9,14,3,12,13,0,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3,11,8,12,0,5,2,15,13,10,14,3,6,7,1,9,4,7,9,3,1,13,12,11,14,2,6,5,10,4,0,15,8,9,0,5,7,2,4,10,15,14,1,11,12,6,8,3,13,2,12,6,10,0,11,8,3,4,13,7,5,15,14,1,9]),_n=Uint32Array.from([4089235720,1779033703,2227873595,3144134277,4271175723,1013904242,1595750129,2773480762,2917565137,1359893119,725511199,2600822924,4215389547,528734635,327033209,1541459225]),be=new Uint32Array(32);function Lc(t,e,n,r,s,i){const a=s[i],o=s[i+1];let l=be[2*t],u=be[2*t+1],d=be[2*e],h=be[2*e+1],f=be[2*n],p=be[2*n+1],g=be[2*r],m=be[2*r+1],y=pS(l,d,a);u=mS(y,u,h,o),l=y|0,{Dh:m,Dl:g}={Dh:m^u,Dl:g^l},{Dh:m,Dl:g}={Dh:mse(m,g),Dl:gse(m)},{h:p,l:f}=Vi(p,f,m,g),{Bh:h,Bl:d}={Bh:h^p,Bl:d^f},{Bh:h,Bl:d}={Bh:qc(h,d,24),Bl:Kc(h,d,24)},be[2*t]=l,be[2*t+1]=u,be[2*e]=d,be[2*e+1]=h,be[2*n]=f,be[2*n+1]=p,be[2*r]=g,be[2*r+1]=m}function Bc(t,e,n,r,s,i){const a=s[i],o=s[i+1];let l=be[2*t],u=be[2*t+1],d=be[2*e],h=be[2*e+1],f=be[2*n],p=be[2*n+1],g=be[2*r],m=be[2*r+1],y=pS(l,d,a);u=mS(y,u,h,o),l=y|0,{Dh:m,Dl:g}={Dh:m^u,Dl:g^l},{Dh:m,Dl:g}={Dh:qc(m,g,16),Dl:Kc(m,g,16)},{h:p,l:f}=Vi(p,f,m,g),{Bh:h,Bl:d}={Bh:h^p,Bl:d^f},{Bh:h,Bl:d}={Bh:Eg(h,d,63),Bl:Ng(h,d,63)},be[2*t]=l,be[2*t+1]=u,be[2*e]=d,be[2*e+1]=h,be[2*n]=f,be[2*n+1]=p,be[2*r]=g,be[2*r+1]=m}function Xse(t,e={},n,r,s){if(hc(n),t<0||t>n)throw new Error("outputLen bigger than keyLen");const{key:i,salt:a,personalization:o}=e;if(i!==void 0&&(i.length<1||i.length>n))throw new Error("key length must be undefined or 1.."+n);if(a!==void 0&&a.length!==r)throw new Error("salt must be undefined or "+r);if(o!==void 0&&o.length!==s)throw new Error("personalization must be undefined or "+s)}class eie extends V1{constructor(e,n){super(),this.finished=!1,this.destroyed=!1,this.length=0,this.pos=0,hc(e),hc(n),this.blockLen=e,this.outputLen=n,this.buffer=new Uint8Array(e),this.buffer32=ay(this.buffer)}update(e){ql(this),e=ua(e),_i(e);const{blockLen:n,buffer:r,buffer32:s}=this,i=e.length,a=e.byteOffset,o=e.buffer;for(let l=0;l<i;){this.pos===n&&(Gc(s),this.compress(s,0,!1),Gc(s),this.pos=0);const u=Math.min(n-this.pos,i-l),d=a+l;if(u===n&&!(d%4)&&l+u<i){const h=new Uint32Array(o,d,Math.floor((i-l)/4));Gc(h);for(let f=0;l+n<i;f+=s.length,l+=n)this.length+=n,this.compress(h,f,!1);Gc(h);continue}r.set(e.subarray(l,l+u),this.pos),this.pos+=u,this.length+=u,l+=u}return this}digestInto(e){ql(this),wS(e,this);const{pos:n,buffer32:r}=this;this.finished=!0,Ii(this.buffer.subarray(n)),Gc(r),this.compress(r,0,!0),Gc(r);const s=ay(e);this.get().forEach((i,a)=>s[a]=To(i))}digest(){const{buffer:e,outputLen:n}=this;this.digestInto(e);const r=e.slice(0,n);return this.destroy(),r}_cloneInto(e){const{buffer:n,length:r,finished:s,destroyed:i,outputLen:a,pos:o}=this;return e||(e=new this.constructor({dkLen:a})),e.set(...this.get()),e.buffer.set(n),e.destroyed=i,e.finished=s,e.length=r,e.pos=o,e.outputLen=a,e}clone(){return this._cloneInto()}}class tie extends eie{constructor(e={}){const n=e.dkLen===void 0?64:e.dkLen;super(128,n),this.v0l=_n[0]|0,this.v0h=_n[1]|0,this.v1l=_n[2]|0,this.v1h=_n[3]|0,this.v2l=_n[4]|0,this.v2h=_n[5]|0,this.v3l=_n[6]|0,this.v3h=_n[7]|0,this.v4l=_n[8]|0,this.v4h=_n[9]|0,this.v5l=_n[10]|0,this.v5h=_n[11]|0,this.v6l=_n[12]|0,this.v6h=_n[13]|0,this.v7l=_n[14]|0,this.v7h=_n[15]|0,Xse(n,e,64,16,16);let{key:r,personalization:s,salt:i}=e,a=0;if(r!==void 0&&(r=ua(r),a=r.length),this.v0l^=this.outputLen|a<<8|65536|1<<24,i!==void 0){i=ua(i);const o=ay(i);this.v4l^=To(o[0]),this.v4h^=To(o[1]),this.v5l^=To(o[2]),this.v5h^=To(o[3])}if(s!==void 0){s=ua(s);const o=ay(s);this.v6l^=To(o[0]),this.v6h^=To(o[1]),this.v7l^=To(o[2]),this.v7h^=To(o[3])}if(r!==void 0){const o=new Uint8Array(this.blockLen);o.set(r),this.update(o)}}get(){let{v0l:e,v0h:n,v1l:r,v1h:s,v2l:i,v2h:a,v3l:o,v3h:l,v4l:u,v4h:d,v5l:h,v5h:f,v6l:p,v6h:g,v7l:m,v7h:y}=this;return[e,n,r,s,i,a,o,l,u,d,h,f,p,g,m,y]}set(e,n,r,s,i,a,o,l,u,d,h,f,p,g,m,y){this.v0l=e|0,this.v0h=n|0,this.v1l=r|0,this.v1h=s|0,this.v2l=i|0,this.v2h=a|0,this.v3l=o|0,this.v3h=l|0,this.v4l=u|0,this.v4h=d|0,this.v5l=h|0,this.v5h=f|0,this.v6l=p|0,this.v6h=g|0,this.v7l=m|0,this.v7h=y|0}compress(e,n,r){this.get().forEach((l,u)=>be[u]=l),be.set(_n,16);let{h:s,l:i}=jM(BigInt(this.length));be[24]=_n[8]^i,be[25]=_n[9]^s,r&&(be[28]=~be[28],be[29]=~be[29]);let a=0;const o=Zse;for(let l=0;l<12;l++)Lc(0,4,8,12,e,n+2*o[a++]),Bc(0,4,8,12,e,n+2*o[a++]),Lc(1,5,9,13,e,n+2*o[a++]),Bc(1,5,9,13,e,n+2*o[a++]),Lc(2,6,10,14,e,n+2*o[a++]),Bc(2,6,10,14,e,n+2*o[a++]),Lc(3,7,11,15,e,n+2*o[a++]),Bc(3,7,11,15,e,n+2*o[a++]),Lc(0,5,10,15,e,n+2*o[a++]),Bc(0,5,10,15,e,n+2*o[a++]),Lc(1,6,11,12,e,n+2*o[a++]),Bc(1,6,11,12,e,n+2*o[a++]),Lc(2,7,8,13,e,n+2*o[a++]),Bc(2,7,8,13,e,n+2*o[a++]),Lc(3,4,9,14,e,n+2*o[a++]),Bc(3,4,9,14,e,n+2*o[a++]);this.v0l^=be[0]^be[16],this.v0h^=be[1]^be[17],this.v1l^=be[2]^be[18],this.v1h^=be[3]^be[19],this.v2l^=be[4]^be[20],this.v2h^=be[5]^be[21],this.v3l^=be[6]^be[22],this.v3h^=be[7]^be[23],this.v4l^=be[8]^be[24],this.v4h^=be[9]^be[25],this.v5l^=be[10]^be[26],this.v5h^=be[11]^be[27],this.v6l^=be[12]^be[28],this.v6h^=be[13]^be[29],this.v7l^=be[14]^be[30],this.v7h^=be[15]^be[31],Ii(be)}destroy(){this.destroyed=!0,Ii(this.buffer32),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}const nie=kse(t=>new tie(t)),rie="https://rpc.walletconnect.org/v1";function WM(t){const e=`Ethereum Signed Message:
${t.length}`,n=new TextEncoder().encode(e+t);return"0x"+Buffer.from(Bse(n)).toString("hex")}async function sie(t,e,n,r,s,i){switch(n.t){case"eip191":return await iie(t,e,n.s);case"eip1271":return await aie(t,e,n.s,r,s,i);default:throw new Error(`verifySignature failed: Attempted to verify CacaoSignature with unknown type: ${n.t}`)}}async function iie(t,e,n){return(await $te({hash:WM(e),signature:n})).toLowerCase()===t.toLowerCase()}async function aie(t,e,n,r,s,i){const a=Rf(r);if(!a.namespace||!a.reference)throw new Error(`isValidEip1271Signature failed: chainId must be in CAIP-2 format, received: ${r}`);try{const o="0x1626ba7e",l="0000000000000000000000000000000000000000000000000000000000000040",u=n.substring(2),d=(u.length/2).toString(16).padStart(64,"0"),h=(e.startsWith("0x")?e:WM(e)).substring(2),f=o+h+l+d+u,p=await fetch(`${i||rie}/?chainId=${r}&projectId=${s}`,{headers:{"Content-Type":"application/json"},method:"POST",body:JSON.stringify({id:oie(),jsonrpc:"2.0",method:"eth_call",params:[{to:t,data:f},"latest"]})}),{result:g}=await p.json();return g?g.slice(0,o.length).toLowerCase()===o.toLowerCase():!1}catch(o){return console.error("isValidEip1271Signature: ",o),!1}}function oie(){return Date.now()+Math.floor(Math.random()*1e3)}function cie(t){const e=atob(t),n=new Uint8Array(e.length);for(let a=0;a<e.length;a++)n[a]=e.charCodeAt(a);const r=n[0];if(r===0)throw new Error("No signatures found");const s=1+r*64;if(n.length<s)throw new Error("Transaction data too short for claimed signature count");if(n.length<100)throw new Error("Transaction too short");const i=Buffer.from(t,"base64").slice(1,65);return gm.encode(i)}function lie(t){const e=new Uint8Array(Buffer.from(t,"base64")),n=Array.from("TransactionData::").map(i=>i.charCodeAt(0)),r=new Uint8Array(n.length+e.length);r.set(n),r.set(e,n.length);const s=nie(r,{dkLen:32});return gm.encode(s)}function gI(t){const e=new Uint8Array(z1(uie(t)));return gm.encode(e)}function uie(t){if(t instanceof Uint8Array)return t;if(Array.isArray(t))return new Uint8Array(t);if(typeof t=="object"&&t!=null&&t.data)return new Uint8Array(Object.values(t.data));if(typeof t=="object"&&t)return new Uint8Array(Object.values(t));throw new Error("getNearUint8ArrayFromBytes: Unexpected result type from bytes array")}function yI(t){const e=Buffer.from(t,"base64"),n=Cne(e).txn;if(!n)throw new Error("Invalid signed transaction: missing 'txn' field");const r=mne(n),s=Buffer.from("TX"),i=Buffer.concat([s,Buffer.from(r)]),a=Jse(i);return Rne.encode(a).replace(/=+$/,"")}function H2(t){const e=[];let n=BigInt(t);for(;n>=BigInt(128);)e.push(Number(n&BigInt(127)|BigInt(128))),n>>=BigInt(7);return e.push(Number(n)),Buffer.from(e)}function die(t){const e=Buffer.from(t.signed.bodyBytes,"base64"),n=Buffer.from(t.signed.authInfoBytes,"base64"),r=Buffer.from(t.signature.signature,"base64"),s=[];s.push(Buffer.from([10])),s.push(H2(e.length)),s.push(e),s.push(Buffer.from([18])),s.push(H2(n.length)),s.push(n),s.push(Buffer.from([26])),s.push(H2(r.length)),s.push(r);const i=Buffer.concat(s),a=z1(i);return Buffer.from(a).toString("hex").toUpperCase()}var hie=Object.defineProperty,fie=Object.defineProperties,pie=Object.getOwnPropertyDescriptors,wI=Object.getOwnPropertySymbols,mie=Object.prototype.hasOwnProperty,gie=Object.prototype.propertyIsEnumerable,bI=(t,e,n)=>e in t?hie(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,yie=(t,e)=>{for(var n in e||(e={}))mie.call(e,n)&&bI(t,n,e[n]);if(wI)for(var n of wI(e))gie.call(e,n)&&bI(t,n,e[n]);return t},wie=(t,e)=>fie(t,pie(e));const bie="did:pkh:",vS=t=>t==null?void 0:t.split(":"),xie=t=>{const e=t&&vS(t);if(e)return t.includes(bie)?e[3]:e[1]},SA=t=>{const e=t&&vS(t);if(e)return e[2]+":"+e[3]},Cv=t=>{const e=t&&vS(t);if(e)return e.pop()};async function xI(t){const{cacao:e,projectId:n}=t,{s:r,p:s}=e,i=qM(s,s.iss),a=Cv(s.iss);return await sie(a,i,r,SA(s.iss),n)}const qM=(t,e)=>{const n=`${t.domain} wants you to sign in with your Ethereum account:`,r=Cv(e);if(!t.aud&&!t.uri)throw new Error("Either `aud` or `uri` is required to construct the message");let s=t.statement||void 0;const i=`URI: ${t.aud||t.uri}`,a=`Version: ${t.version}`,o=`Chain ID: ${xie(e)}`,l=`Nonce: ${t.nonce}`,u=`Issued At: ${t.iat}`,d=t.exp?`Expiration Time: ${t.exp}`:void 0,h=t.nbf?`Not Before: ${t.nbf}`:void 0,f=t.requestId?`Request ID: ${t.requestId}`:void 0,p=t.resources?`Resources:${t.resources.map(m=>`
- ${m}`).join("")}`:void 0,g=cx(t.resources);if(g){const m=cy(g);s=_ie(s,m)}return[n,r,"",s,"",i,a,o,l,u,d,h,f,p].filter(m=>m!=null).join(`
`)};function vie(t){return Buffer.from(JSON.stringify(t)).toString("base64")}function Eie(t){return JSON.parse(Buffer.from(t,"base64").toString("utf-8"))}function zd(t){if(!t)throw new Error("No recap provided, value is undefined");if(!t.att)throw new Error("No `att` property found");const e=Object.keys(t.att);if(!(e!=null&&e.length))throw new Error("No resources found in `att` property");e.forEach(n=>{const r=t.att[n];if(Array.isArray(r))throw new Error(`Resource must be an object: ${n}`);if(typeof r!="object")throw new Error(`Resource must be an object: ${n}`);if(!Object.keys(r).length)throw new Error(`Resource object is empty: ${n}`);Object.keys(r).forEach(s=>{const i=r[s];if(!Array.isArray(i))throw new Error(`Ability limits ${s} must be an array of objects, found: ${i}`);if(!i.length)throw new Error(`Value of ${s} is empty array, must be an array with objects`);i.forEach(a=>{if(typeof a!="object")throw new Error(`Ability limits (${s}) must be an array of objects, found: ${a}`)})})})}function Nie(t,e,n,r={}){return n==null||n.sort((s,i)=>s.localeCompare(i)),{att:{[t]:Cie(e,n,r)}}}function Cie(t,e,n={}){e=e==null?void 0:e.sort((s,i)=>s.localeCompare(i));const r=e.map(s=>({[`${t}/${s}`]:[n]}));return Object.assign({},...r)}function KM(t){return zd(t),`urn:recap:${vie(t).replace(/=/g,"")}`}function cy(t){const e=Eie(t.replace("urn:recap:",""));return zd(e),e}function Aie(t,e,n){const r=Nie(t,e,n);return KM(r)}function Tie(t){return t&&t.includes("urn:recap:")}function Sie(t,e){const n=cy(t),r=cy(e),s=kie(n,r);return KM(s)}function kie(t,e){zd(t),zd(e);const n=Object.keys(t.att).concat(Object.keys(e.att)).sort((s,i)=>s.localeCompare(i)),r={att:{}};return n.forEach(s=>{var i,a;Object.keys(((i=t.att)==null?void 0:i[s])||{}).concat(Object.keys(((a=e.att)==null?void 0:a[s])||{})).sort((o,l)=>o.localeCompare(l)).forEach(o=>{var l,u;r.att[s]=wie(yie({},r.att[s]),{[o]:((l=t.att[s])==null?void 0:l[o])||((u=e.att[s])==null?void 0:u[o])})})}),r}function _ie(t="",e){zd(e);const n="I further authorize the stated URI to perform the following actions on my behalf: ";if(t.includes(n))return t;const r=[];let s=0;Object.keys(e.att).forEach(o=>{const l=Object.keys(e.att[o]).map(h=>({ability:h.split("/")[0],action:h.split("/")[1]}));l.sort((h,f)=>h.action.localeCompare(f.action));const u={};l.forEach(h=>{u[h.ability]||(u[h.ability]=[]),u[h.ability].push(h.action)});const d=Object.keys(u).map(h=>(s++,`(${s}) '${h}': '${u[h].join("', '")}' for '${o}'.`));r.push(d.join(", ").replace(".,","."))});const i=r.join(" "),a=`${n}${i}`;return`${t?t+" ":""}${a}`}function vI(t){var e;const n=cy(t);zd(n);const r=(e=n.att)==null?void 0:e.eip155;return r?Object.keys(r).map(s=>s.split("/")[1]):[]}function EI(t){const e=cy(t);zd(e);const n=[];return Object.values(e.att).forEach(r=>{Object.values(r).forEach(s=>{var i;(i=s==null?void 0:s[0])!=null&&i.chains&&n.push(s[0].chains)})}),[...new Set(n.flat())]}function cx(t){if(!t)return;const e=t==null?void 0:t[t.length-1];return Tie(e)?e:void 0}/*! noble-ciphers - MIT License (c) 2023 Paul Miller (paulmillr.com) */function GM(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function kA(t){if(typeof t!="boolean")throw new Error(`boolean expected, not ${t}`)}function V2(t){if(!Number.isSafeInteger(t)||t<0)throw new Error("positive integer expected, got "+t)}function vs(t,...e){if(!GM(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function NI(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function Iie(t,e){vs(t);const n=e.outputLen;if(t.length<n)throw new Error("digestInto() expects output buffer of length at least "+n)}function Ul(t){return new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4))}function Kp(...t){for(let e=0;e<t.length;e++)t[e].fill(0)}function Pie(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)}const Rie=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;function jie(t){if(typeof t!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(t))}function _A(t){if(typeof t=="string")t=jie(t);else if(GM(t))t=IA(t);else throw new Error("Uint8Array expected, got "+typeof t);return t}function Oie(t,e){if(e==null||typeof e!="object")throw new Error("options must be defined");return Object.assign(t,e)}function Die(t,e){if(t.length!==e.length)return!1;let n=0;for(let r=0;r<t.length;r++)n|=t[r]^e[r];return n===0}const Uie=(t,e)=>{function n(r,...s){if(vs(r),!Rie)throw new Error("Non little-endian hardware is not yet supported");if(t.nonceLength!==void 0){const u=s[0];if(!u)throw new Error("nonce / iv required");t.varSizeNonce?vs(u):vs(u,t.nonceLength)}const i=t.tagLength;i&&s[1]!==void 0&&vs(s[1]);const a=e(r,...s),o=(u,d)=>{if(d!==void 0){if(u!==2)throw new Error("cipher output not supported");vs(d)}};let l=!1;return{encrypt(u,d){if(l)throw new Error("cannot encrypt() twice with same key + nonce");return l=!0,vs(u),o(a.encrypt.length,d),a.encrypt(u,d)},decrypt(u,d){if(vs(u),i&&u.length<i)throw new Error("invalid ciphertext length: smaller than tagLength="+i);return o(a.decrypt.length,d),a.decrypt(u,d)}}}return Object.assign(n,t),n};function CI(t,e,n=!0){if(e===void 0)return new Uint8Array(t);if(e.length!==t)throw new Error("invalid output length, expected "+t+", got: "+e.length);if(n&&!Lie(e))throw new Error("invalid output, must be aligned");return e}function AI(t,e,n,r){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,n,r);const s=BigInt(32),i=BigInt(4294967295),a=Number(n>>s&i),o=Number(n&i);t.setUint32(e+4,a,r),t.setUint32(e+0,o,r)}function Mie(t,e,n){kA(n);const r=new Uint8Array(16),s=Pie(r);return AI(s,0,BigInt(e),n),AI(s,8,BigInt(t),n),r}function Lie(t){return t.byteOffset%4===0}function IA(t){return Uint8Array.from(t)}const YM=t=>Uint8Array.from(t.split("").map(e=>e.charCodeAt(0))),Bie=YM("expand 16-byte k"),$ie=YM("expand 32-byte k"),Fie=Ul(Bie),Hie=Ul($ie);function wt(t,e){return t<<e|t>>>32-e}function PA(t){return t.byteOffset%4===0}const pb=64,Vie=16,QM=2**32-1,TI=new Uint32Array;function zie(t,e,n,r,s,i,a,o){const l=s.length,u=new Uint8Array(pb),d=Ul(u),h=PA(s)&&PA(i),f=h?Ul(s):TI,p=h?Ul(i):TI;for(let g=0;g<l;a++){if(t(e,n,r,d,a,o),a>=QM)throw new Error("arx: counter overflow");const m=Math.min(pb,l-g);if(h&&m===pb){const y=g/4;if(g%4!==0)throw new Error("arx: invalid block position");for(let b=0,w;b<Vie;b++)w=y+b,p[w]=f[w]^d[b];g+=pb;continue}for(let y=0,b;y<m;y++)b=g+y,i[b]=s[b]^u[y];g+=m}}function Wie(t,e){const{allowShortKeys:n,extendNonceFn:r,counterLength:s,counterRight:i,rounds:a}=Oie({allowShortKeys:!1,counterLength:8,counterRight:!1,rounds:20},e);if(typeof t!="function")throw new Error("core must be a function");return V2(s),V2(a),kA(i),kA(n),(o,l,u,d,h=0)=>{vs(o),vs(l),vs(u);const f=u.length;if(d===void 0&&(d=new Uint8Array(f)),vs(d),V2(h),h<0||h>=QM)throw new Error("arx: counter overflow");if(d.length<f)throw new Error(`arx: output (${d.length}) is shorter than data (${f})`);const p=[];let g=o.length,m,y;if(g===32)p.push(m=IA(o)),y=Hie;else if(g===16&&n)m=new Uint8Array(32),m.set(o),m.set(o,16),y=Fie,p.push(m);else throw new Error(`arx: invalid 32-byte key, got length=${g}`);PA(l)||p.push(l=IA(l));const b=Ul(m);if(r){if(l.length!==24)throw new Error("arx: extended nonce must be 24 bytes");r(y,b,Ul(l.subarray(0,16)),b),l=l.subarray(16)}const w=16-s;if(w!==l.length)throw new Error(`arx: nonce must be ${w} or 16 bytes`);if(w!==12){const A=new Uint8Array(12);A.set(l,i?0:12-l.length),l=A,p.push(l)}const x=Ul(l);return zie(t,y,b,x,u,d,h,a),Kp(...p),d}}const Zn=(t,e)=>t[e++]&255|(t[e++]&255)<<8;class qie{constructor(e){this.blockLen=16,this.outputLen=16,this.buffer=new Uint8Array(16),this.r=new Uint16Array(10),this.h=new Uint16Array(10),this.pad=new Uint16Array(8),this.pos=0,this.finished=!1,e=_A(e),vs(e,32);const n=Zn(e,0),r=Zn(e,2),s=Zn(e,4),i=Zn(e,6),a=Zn(e,8),o=Zn(e,10),l=Zn(e,12),u=Zn(e,14);this.r[0]=n&8191,this.r[1]=(n>>>13|r<<3)&8191,this.r[2]=(r>>>10|s<<6)&7939,this.r[3]=(s>>>7|i<<9)&8191,this.r[4]=(i>>>4|a<<12)&255,this.r[5]=a>>>1&8190,this.r[6]=(a>>>14|o<<2)&8191,this.r[7]=(o>>>11|l<<5)&8065,this.r[8]=(l>>>8|u<<8)&8191,this.r[9]=u>>>5&127;for(let d=0;d<8;d++)this.pad[d]=Zn(e,16+2*d)}process(e,n,r=!1){const s=r?0:2048,{h:i,r:a}=this,o=a[0],l=a[1],u=a[2],d=a[3],h=a[4],f=a[5],p=a[6],g=a[7],m=a[8],y=a[9],b=Zn(e,n+0),w=Zn(e,n+2),x=Zn(e,n+4),A=Zn(e,n+6),T=Zn(e,n+8),j=Zn(e,n+10),P=Zn(e,n+12),S=Zn(e,n+14);let E=i[0]+(b&8191),k=i[1]+((b>>>13|w<<3)&8191),R=i[2]+((w>>>10|x<<6)&8191),O=i[3]+((x>>>7|A<<9)&8191),F=i[4]+((A>>>4|T<<12)&8191),z=i[5]+(T>>>1&8191),N=i[6]+((T>>>14|j<<2)&8191),I=i[7]+((j>>>11|P<<5)&8191),M=i[8]+((P>>>8|S<<8)&8191),D=i[9]+(S>>>5|s),L=0,$=L+E*o+k*(5*y)+R*(5*m)+O*(5*g)+F*(5*p);L=$>>>13,$&=8191,$+=z*(5*f)+N*(5*h)+I*(5*d)+M*(5*u)+D*(5*l),L+=$>>>13,$&=8191;let V=L+E*l+k*o+R*(5*y)+O*(5*m)+F*(5*g);L=V>>>13,V&=8191,V+=z*(5*p)+N*(5*f)+I*(5*h)+M*(5*d)+D*(5*u),L+=V>>>13,V&=8191;let q=L+E*u+k*l+R*o+O*(5*y)+F*(5*m);L=q>>>13,q&=8191,q+=z*(5*g)+N*(5*p)+I*(5*f)+M*(5*h)+D*(5*d),L+=q>>>13,q&=8191;let G=L+E*d+k*u+R*l+O*o+F*(5*y);L=G>>>13,G&=8191,G+=z*(5*m)+N*(5*g)+I*(5*p)+M*(5*f)+D*(5*h),L+=G>>>13,G&=8191;let Z=L+E*h+k*d+R*u+O*l+F*o;L=Z>>>13,Z&=8191,Z+=z*(5*y)+N*(5*m)+I*(5*g)+M*(5*p)+D*(5*f),L+=Z>>>13,Z&=8191;let oe=L+E*f+k*h+R*d+O*u+F*l;L=oe>>>13,oe&=8191,oe+=z*o+N*(5*y)+I*(5*m)+M*(5*g)+D*(5*p),L+=oe>>>13,oe&=8191;let xe=L+E*p+k*f+R*h+O*d+F*u;L=xe>>>13,xe&=8191,xe+=z*l+N*o+I*(5*y)+M*(5*m)+D*(5*g),L+=xe>>>13,xe&=8191;let J=L+E*g+k*p+R*f+O*h+F*d;L=J>>>13,J&=8191,J+=z*u+N*l+I*o+M*(5*y)+D*(5*m),L+=J>>>13,J&=8191;let ve=L+E*m+k*g+R*p+O*f+F*h;L=ve>>>13,ve&=8191,ve+=z*d+N*u+I*l+M*o+D*(5*y),L+=ve>>>13,ve&=8191;let ge=L+E*y+k*m+R*g+O*p+F*f;L=ge>>>13,ge&=8191,ge+=z*h+N*d+I*u+M*l+D*o,L+=ge>>>13,ge&=8191,L=(L<<2)+L|0,L=L+$|0,$=L&8191,L=L>>>13,V+=L,i[0]=$,i[1]=V,i[2]=q,i[3]=G,i[4]=Z,i[5]=oe,i[6]=xe,i[7]=J,i[8]=ve,i[9]=ge}finalize(){const{h:e,pad:n}=this,r=new Uint16Array(10);let s=e[1]>>>13;e[1]&=8191;for(let o=2;o<10;o++)e[o]+=s,s=e[o]>>>13,e[o]&=8191;e[0]+=s*5,s=e[0]>>>13,e[0]&=8191,e[1]+=s,s=e[1]>>>13,e[1]&=8191,e[2]+=s,r[0]=e[0]+5,s=r[0]>>>13,r[0]&=8191;for(let o=1;o<10;o++)r[o]=e[o]+s,s=r[o]>>>13,r[o]&=8191;r[9]-=8192;let i=(s^1)-1;for(let o=0;o<10;o++)r[o]&=i;i=~i;for(let o=0;o<10;o++)e[o]=e[o]&i|r[o];e[0]=(e[0]|e[1]<<13)&65535,e[1]=(e[1]>>>3|e[2]<<10)&65535,e[2]=(e[2]>>>6|e[3]<<7)&65535,e[3]=(e[3]>>>9|e[4]<<4)&65535,e[4]=(e[4]>>>12|e[5]<<1|e[6]<<14)&65535,e[5]=(e[6]>>>2|e[7]<<11)&65535,e[6]=(e[7]>>>5|e[8]<<8)&65535,e[7]=(e[8]>>>8|e[9]<<5)&65535;let a=e[0]+n[0];e[0]=a&65535;for(let o=1;o<8;o++)a=(e[o]+n[o]|0)+(a>>>16)|0,e[o]=a&65535;Kp(r)}update(e){NI(this),e=_A(e),vs(e);const{buffer:n,blockLen:r}=this,s=e.length;for(let i=0;i<s;){const a=Math.min(r-this.pos,s-i);if(a===r){for(;r<=s-i;i+=r)this.process(e,i);continue}n.set(e.subarray(i,i+a),this.pos),this.pos+=a,i+=a,this.pos===r&&(this.process(n,0,!1),this.pos=0)}return this}destroy(){Kp(this.h,this.r,this.buffer,this.pad)}digestInto(e){NI(this),Iie(e,this),this.finished=!0;const{buffer:n,h:r}=this;let{pos:s}=this;if(s){for(n[s++]=1;s<16;s++)n[s]=0;this.process(n,0,!0)}this.finalize();let i=0;for(let a=0;a<8;a++)e[i++]=r[a]>>>0,e[i++]=r[a]>>>8;return e}digest(){const{buffer:e,outputLen:n}=this;this.digestInto(e);const r=e.slice(0,n);return this.destroy(),r}}function Kie(t){const e=(r,s)=>t(s).update(_A(r)).digest(),n=t(new Uint8Array(32));return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=r=>t(r),e}const Gie=Kie(t=>new qie(t));function Yie(t,e,n,r,s,i=20){let a=t[0],o=t[1],l=t[2],u=t[3],d=e[0],h=e[1],f=e[2],p=e[3],g=e[4],m=e[5],y=e[6],b=e[7],w=s,x=n[0],A=n[1],T=n[2],j=a,P=o,S=l,E=u,k=d,R=h,O=f,F=p,z=g,N=m,I=y,M=b,D=w,L=x,$=A,V=T;for(let G=0;G<i;G+=2)j=j+k|0,D=wt(D^j,16),z=z+D|0,k=wt(k^z,12),j=j+k|0,D=wt(D^j,8),z=z+D|0,k=wt(k^z,7),P=P+R|0,L=wt(L^P,16),N=N+L|0,R=wt(R^N,12),P=P+R|0,L=wt(L^P,8),N=N+L|0,R=wt(R^N,7),S=S+O|0,$=wt($^S,16),I=I+$|0,O=wt(O^I,12),S=S+O|0,$=wt($^S,8),I=I+$|0,O=wt(O^I,7),E=E+F|0,V=wt(V^E,16),M=M+V|0,F=wt(F^M,12),E=E+F|0,V=wt(V^E,8),M=M+V|0,F=wt(F^M,7),j=j+R|0,V=wt(V^j,16),I=I+V|0,R=wt(R^I,12),j=j+R|0,V=wt(V^j,8),I=I+V|0,R=wt(R^I,7),P=P+O|0,D=wt(D^P,16),M=M+D|0,O=wt(O^M,12),P=P+O|0,D=wt(D^P,8),M=M+D|0,O=wt(O^M,7),S=S+F|0,L=wt(L^S,16),z=z+L|0,F=wt(F^z,12),S=S+F|0,L=wt(L^S,8),z=z+L|0,F=wt(F^z,7),E=E+k|0,$=wt($^E,16),N=N+$|0,k=wt(k^N,12),E=E+k|0,$=wt($^E,8),N=N+$|0,k=wt(k^N,7);let q=0;r[q++]=a+j|0,r[q++]=o+P|0,r[q++]=l+S|0,r[q++]=u+E|0,r[q++]=d+k|0,r[q++]=h+R|0,r[q++]=f+O|0,r[q++]=p+F|0,r[q++]=g+z|0,r[q++]=m+N|0,r[q++]=y+I|0,r[q++]=b+M|0,r[q++]=w+D|0,r[q++]=x+L|0,r[q++]=A+$|0,r[q++]=T+V|0}const Qie=Wie(Yie,{counterRight:!1,counterLength:4,allowShortKeys:!1}),Jie=new Uint8Array(16),SI=(t,e)=>{t.update(e);const n=e.length%16;n&&t.update(Jie.subarray(n))},Zie=new Uint8Array(32);function kI(t,e,n,r,s){const i=t(e,n,Zie),a=Gie.create(i);s&&SI(a,s),SI(a,r);const o=Mie(r.length,s?s.length:0,!0);a.update(o);const l=a.digest();return Kp(i,o),l}const Xie=t=>(e,n,r)=>({encrypt(s,i){const a=s.length;i=CI(a+16,i,!1),i.set(s);const o=i.subarray(0,-16);t(e,n,o,o,1);const l=kI(t,e,n,o,r);return i.set(l,a),Kp(l),i},decrypt(s,i){i=CI(s.length-16,i,!1);const a=s.subarray(0,-16),o=s.subarray(-16),l=kI(t,e,n,a,r);if(!Die(o,l))throw new Error("invalid tag");return i.set(s.subarray(0,-16)),t(e,n,i,i,1),Kp(l),i}}),JM=Uie({blockSize:64,nonceLength:12,tagLength:16},Xie(Qie));let ZM=class extends V1{constructor(e,n){super(),this.finished=!1,this.destroyed=!1,yS(e);const r=ua(n);if(this.iHash=e.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const s=this.blockLen,i=new Uint8Array(s);i.set(r.length>s?e.create().update(r).digest():r);for(let a=0;a<i.length;a++)i[a]^=54;this.iHash.update(i),this.oHash=e.create();for(let a=0;a<i.length;a++)i[a]^=106;this.oHash.update(i),Ii(i)}update(e){return ql(this),this.iHash.update(e),this}digestInto(e){ql(this),_i(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:n,iHash:r,finished:s,destroyed:i,blockLen:a,outputLen:o}=this;return e=e,e.finished=s,e.destroyed=i,e.blockLen=a,e.outputLen=o,e.oHash=n._cloneInto(e.oHash),e.iHash=r._cloneInto(e.iHash),e}clone(){return this._cloneInto()}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}};const W1=(t,e,n)=>new ZM(t,e).update(n).digest();W1.create=(t,e)=>new ZM(t,e);function eae(t,e,n){return yS(t),n===void 0&&(n=new Uint8Array(t.outputLen)),W1(t,ua(n),ua(e))}const z2=Uint8Array.from([0]),_I=Uint8Array.of();function tae(t,e,n,r=32){yS(t),hc(r);const s=t.outputLen;if(r>255*s)throw new Error("Length should be <= 255*HashLen");const i=Math.ceil(r/s);n===void 0&&(n=_I);const a=new Uint8Array(i*s),o=W1.create(t,e),l=o._cloneInto(),u=new Uint8Array(o.outputLen);for(let d=0;d<i;d++)z2[0]=d+1,l.update(d===0?_I:u).update(n).update(z2).digestInto(u),a.set(u,s*d),o._cloneInto(l);return o.destroy(),l.destroy(),Ii(u,z2),a.slice(0,r)}const nae=(t,e,n,r,s)=>tae(t,eae(t,e,n),r,s),q1=z1,ES=BigInt(0),RA=BigInt(1);function Av(t,e){if(typeof e!="boolean")throw new Error(t+" boolean expected, got "+e)}function mb(t){const e=t.toString(16);return e.length&1?"0"+e:e}function XM(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);return t===""?ES:BigInt("0x"+t)}function K1(t){return XM(oy(t))}function Tv(t){return _i(t),XM(oy(Uint8Array.from(t).reverse()))}function NS(t,e){return bS(t.toString(16).padStart(e*2,"0"))}function CS(t,e){return NS(t,e).reverse()}function bs(t,e,n){let r;if(typeof e=="string")try{r=bS(e)}catch(i){throw new Error(t+" must be hex string or Uint8Array, cause: "+i)}else if(gS(e))r=Uint8Array.from(e);else throw new Error(t+" must be hex string or Uint8Array");const s=r.length;if(typeof n=="number"&&s!==n)throw new Error(t+" of length "+n+" expected, got "+s);return r}const W2=t=>typeof t=="bigint"&&ES<=t;function rae(t,e,n){return W2(t)&&W2(e)&&W2(n)&&e<=t&&t<n}function jA(t,e,n,r){if(!rae(e,n,r))throw new Error("expected valid "+t+": "+n+" <= n < "+r+", got "+e)}function sae(t){let e;for(e=0;t>ES;t>>=RA,e+=1);return e}const G1=t=>(RA<<BigInt(t))-RA;function iae(t,e,n){if(typeof t!="number"||t<2)throw new Error("hashLen must be a number");if(typeof e!="number"||e<2)throw new Error("qByteLen must be a number");if(typeof n!="function")throw new Error("hmacFn must be a function");const r=f=>new Uint8Array(f),s=f=>Uint8Array.of(f);let i=r(t),a=r(t),o=0;const l=()=>{i.fill(1),a.fill(0),o=0},u=(...f)=>n(a,i,...f),d=(f=r(0))=>{a=u(s(0),f),i=u(),f.length!==0&&(a=u(s(1),f),i=u())},h=()=>{if(o++>=1e3)throw new Error("drbg: tried 1000 values");let f=0;const p=[];for(;f<e;){i=u();const g=i.slice();p.push(g),f+=i.length}return Hu(...p)};return(f,p)=>{l(),d(f);let g;for(;!(g=p(h()));)d();return l(),g}}function Y1(t,e,n={}){if(!t||typeof t!="object")throw new Error("expected valid options object");function r(s,i,a){const o=t[s];if(a&&o===void 0)return;const l=typeof o;if(l!==i||o===null)throw new Error(`param "${s}" is invalid: expected ${i}, got ${l}`)}Object.entries(e).forEach(([s,i])=>r(s,i,!1)),Object.entries(n).forEach(([s,i])=>r(s,i,!0))}function II(t){const e=new WeakMap;return(n,...r)=>{const s=e.get(n);if(s!==void 0)return s;const i=t(n,...r);return e.set(n,i),i}}const As=BigInt(0),Xr=BigInt(1),Vu=BigInt(2),aae=BigInt(3),eL=BigInt(4),tL=BigInt(5),nL=BigInt(8);function vi(t,e){const n=t%e;return n>=As?n:e+n}function Fi(t,e,n){let r=t;for(;e-- >As;)r*=r,r%=n;return r}function PI(t,e){if(t===As)throw new Error("invert: expected non-zero number");if(e<=As)throw new Error("invert: expected positive modulus, got "+e);let n=vi(t,e),r=e,s=As,i=Xr;for(;n!==As;){const a=r/n,o=r%n,l=s-i*a;r=n,n=o,s=i,i=l}if(r!==Xr)throw new Error("invert: does not exist");return vi(s,e)}function rL(t,e){const n=(t.ORDER+Xr)/eL,r=t.pow(e,n);if(!t.eql(t.sqr(r),e))throw new Error("Cannot find square root");return r}function oae(t,e){const n=(t.ORDER-tL)/nL,r=t.mul(e,Vu),s=t.pow(r,n),i=t.mul(e,s),a=t.mul(t.mul(i,Vu),s),o=t.mul(i,t.sub(a,t.ONE));if(!t.eql(t.sqr(o),e))throw new Error("Cannot find square root");return o}function cae(t){if(t<BigInt(3))throw new Error("sqrt is not defined for small field");let e=t-Xr,n=0;for(;e%Vu===As;)e/=Vu,n++;let r=Vu;const s=bm(t);for(;RI(s,r)===1;)if(r++>1e3)throw new Error("Cannot find square root: probably non-prime P");if(n===1)return rL;let i=s.pow(r,e);const a=(e+Xr)/Vu;return function(o,l){if(o.is0(l))return l;if(RI(o,l)!==1)throw new Error("Cannot find square root");let u=n,d=o.mul(o.ONE,i),h=o.pow(l,e),f=o.pow(l,a);for(;!o.eql(h,o.ONE);){if(o.is0(h))return o.ZERO;let p=1,g=o.sqr(h);for(;!o.eql(g,o.ONE);)if(p++,g=o.sqr(g),p===u)throw new Error("Cannot find square root");const m=Xr<<BigInt(u-p-1),y=o.pow(d,m);u=p,d=o.sqr(y),h=o.mul(h,d),f=o.mul(f,y)}return f}}function lae(t){return t%eL===aae?rL:t%nL===tL?oae:cae(t)}const uae=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function dae(t){const e={ORDER:"bigint",MASK:"bigint",BYTES:"number",BITS:"number"},n=uae.reduce((r,s)=>(r[s]="function",r),e);return Y1(t,n),t}function hae(t,e,n){if(n<As)throw new Error("invalid exponent, negatives unsupported");if(n===As)return t.ONE;if(n===Xr)return e;let r=t.ONE,s=e;for(;n>As;)n&Xr&&(r=t.mul(r,s)),s=t.sqr(s),n>>=Xr;return r}function sL(t,e,n=!1){const r=new Array(e.length).fill(n?t.ZERO:void 0),s=e.reduce((a,o,l)=>t.is0(o)?a:(r[l]=a,t.mul(a,o)),t.ONE),i=t.inv(s);return e.reduceRight((a,o,l)=>t.is0(o)?a:(r[l]=t.mul(a,r[l]),t.mul(a,o)),i),r}function RI(t,e){const n=(t.ORDER-Xr)/Vu,r=t.pow(e,n),s=t.eql(r,t.ONE),i=t.eql(r,t.ZERO),a=t.eql(r,t.neg(t.ONE));if(!s&&!i&&!a)throw new Error("invalid Legendre symbol result");return s?1:i?0:-1}function fae(t,e){e!==void 0&&hc(e);const n=e!==void 0?e:t.toString(2).length,r=Math.ceil(n/8);return{nBitLength:n,nByteLength:r}}function bm(t,e,n=!1,r={}){if(t<=As)throw new Error("invalid field: expected ORDER > 0, got "+t);let s,i;if(typeof e=="object"&&e!=null){if(r.sqrt||n)throw new Error("cannot specify opts in two arguments");const d=e;d.BITS&&(s=d.BITS),d.sqrt&&(i=d.sqrt),typeof d.isLE=="boolean"&&(n=d.isLE)}else typeof e=="number"&&(s=e),r.sqrt&&(i=r.sqrt);const{nBitLength:a,nByteLength:o}=fae(t,s);if(o>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let l;const u=Object.freeze({ORDER:t,isLE:n,BITS:a,BYTES:o,MASK:G1(a),ZERO:As,ONE:Xr,create:d=>vi(d,t),isValid:d=>{if(typeof d!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof d);return As<=d&&d<t},is0:d=>d===As,isValidNot0:d=>!u.is0(d)&&u.isValid(d),isOdd:d=>(d&Xr)===Xr,neg:d=>vi(-d,t),eql:(d,h)=>d===h,sqr:d=>vi(d*d,t),add:(d,h)=>vi(d+h,t),sub:(d,h)=>vi(d-h,t),mul:(d,h)=>vi(d*h,t),pow:(d,h)=>hae(u,d,h),div:(d,h)=>vi(d*PI(h,t),t),sqrN:d=>d*d,addN:(d,h)=>d+h,subN:(d,h)=>d-h,mulN:(d,h)=>d*h,inv:d=>PI(d,t),sqrt:i||(d=>(l||(l=lae(t)),l(u,d))),toBytes:d=>n?CS(d,o):NS(d,o),fromBytes:d=>{if(d.length!==o)throw new Error("Field.fromBytes: expected "+o+" bytes, got "+d.length);return n?Tv(d):K1(d)},invertBatch:d=>sL(u,d),cmov:(d,h,f)=>f?h:d});return Object.freeze(u)}function iL(t){if(typeof t!="bigint")throw new Error("field order must be bigint");const e=t.toString(2).length;return Math.ceil(e/8)}function aL(t){const e=iL(t);return e+Math.ceil(e/2)}function pae(t,e,n=!1){const r=t.length,s=iL(e),i=aL(e);if(r<16||r<i||r>1024)throw new Error("expected "+i+"-1024 bytes of input, got "+r);const a=n?Tv(t):K1(t),o=vi(a,e-Xr)+Xr;return n?CS(o,s):NS(o,s)}const Gp=BigInt(0),zu=BigInt(1);function Kg(t,e){const n=e.negate();return t?n:e}function mae(t,e,n){const r=i=>i.pz,s=sL(t.Fp,n.map(r));return n.map((i,a)=>i.toAffine(s[a])).map(t.fromAffine)}function oL(t,e){if(!Number.isSafeInteger(t)||t<=0||t>e)throw new Error("invalid window size, expected [1.."+e+"], got W="+t)}function q2(t,e){oL(t,e);const n=Math.ceil(e/t)+1,r=2**(t-1),s=2**t,i=G1(t),a=BigInt(t);return{windows:n,windowSize:r,mask:i,maxNumber:s,shiftBy:a}}function jI(t,e,n){const{windowSize:r,mask:s,maxNumber:i,shiftBy:a}=n;let o=Number(t&s),l=t>>a;o>r&&(o-=i,l+=zu);const u=e*r,d=u+Math.abs(o)-1,h=o===0,f=o<0,p=e%2!==0;return{nextN:l,offset:d,isZero:h,isNeg:f,isNegF:p,offsetF:u}}function gae(t,e){if(!Array.isArray(t))throw new Error("array expected");t.forEach((n,r)=>{if(!(n instanceof e))throw new Error("invalid point at index "+r)})}function yae(t,e){if(!Array.isArray(t))throw new Error("array of scalars expected");t.forEach((n,r)=>{if(!e.isValid(n))throw new Error("invalid scalar at index "+r)})}const K2=new WeakMap,cL=new WeakMap;function G2(t){return cL.get(t)||1}function OI(t){if(t!==Gp)throw new Error("invalid wNAF")}function wae(t,e){return{constTimeNegate:Kg,hasPrecomputes(n){return G2(n)!==1},unsafeLadder(n,r,s=t.ZERO){let i=n;for(;r>Gp;)r&zu&&(s=s.add(i)),i=i.double(),r>>=zu;return s},precomputeWindow(n,r){const{windows:s,windowSize:i}=q2(r,e),a=[];let o=n,l=o;for(let u=0;u<s;u++){l=o,a.push(l);for(let d=1;d<i;d++)l=l.add(o),a.push(l);o=l.double()}return a},wNAF(n,r,s){let i=t.ZERO,a=t.BASE;const o=q2(n,e);for(let l=0;l<o.windows;l++){const{nextN:u,offset:d,isZero:h,isNeg:f,isNegF:p,offsetF:g}=jI(s,l,o);s=u,h?a=a.add(Kg(p,r[g])):i=i.add(Kg(f,r[d]))}return OI(s),{p:i,f:a}},wNAFUnsafe(n,r,s,i=t.ZERO){const a=q2(n,e);for(let o=0;o<a.windows&&s!==Gp;o++){const{nextN:l,offset:u,isZero:d,isNeg:h}=jI(s,o,a);if(s=l,!d){const f=r[u];i=i.add(h?f.negate():f)}}return OI(s),i},getPrecomputes(n,r,s){let i=K2.get(r);return i||(i=this.precomputeWindow(r,n),n!==1&&(typeof s=="function"&&(i=s(i)),K2.set(r,i))),i},wNAFCached(n,r,s){const i=G2(n);return this.wNAF(i,this.getPrecomputes(i,n,s),r)},wNAFCachedUnsafe(n,r,s,i){const a=G2(n);return a===1?this.unsafeLadder(n,r,i):this.wNAFUnsafe(a,this.getPrecomputes(a,n,s),r,i)},setWindowSize(n,r){oL(r,e),cL.set(n,r),K2.delete(n)}}}function bae(t,e,n,r){let s=e,i=t.ZERO,a=t.ZERO;for(;n>Gp||r>Gp;)n&zu&&(i=i.add(s)),r&zu&&(a=a.add(s)),s=s.double(),n>>=zu,r>>=zu;return{p1:i,p2:a}}function xae(t,e,n,r){gae(n,t),yae(r,e);const s=n.length,i=r.length;if(s!==i)throw new Error("arrays of points and scalars must have equal length");const a=t.ZERO,o=sae(BigInt(s));let l=1;o>12?l=o-3:o>4?l=o-2:o>0&&(l=2);const u=G1(l),d=new Array(Number(u)+1).fill(a),h=Math.floor((e.BITS-1)/l)*l;let f=a;for(let p=h;p>=0;p-=l){d.fill(a);for(let m=0;m<i;m++){const y=r[m],b=Number(y>>BigInt(p)&u);d[b]=d[b].add(n[m])}let g=a;for(let m=d.length-1,y=a;m>0;m--)y=y.add(d[m]),g=g.add(y);if(f=f.add(g),p!==0)for(let m=0;m<l;m++)f=f.double()}return f}function DI(t,e){if(e){if(e.ORDER!==t)throw new Error("Field.ORDER must match order: Fp == p, Fn == n");return dae(e),e}else return bm(t)}function vae(t,e,n={}){if(!e||typeof e!="object")throw new Error(`expected valid ${t} CURVE object`);for(const a of["p","n","h"]){const o=e[a];if(!(typeof o=="bigint"&&o>Gp))throw new Error(`CURVE.${a} must be positive bigint`)}const r=DI(e.p,n.Fp),s=DI(e.n,n.Fn),i=["Gx","Gy","a","b"];for(const a of i)if(!r.isValid(e[a]))throw new Error(`CURVE.${a} must be valid field element of CURVE.Fp`);return{Fp:r,Fn:s}}BigInt(0),BigInt(1),BigInt(2),BigInt(8);const Jm=BigInt(0),kh=BigInt(1),gb=BigInt(2);function Eae(t){return Y1(t,{adjustScalarBytes:"function",powPminus2:"function"}),Object.freeze({...t})}function Nae(t){const e=Eae(t),{P:n,type:r,adjustScalarBytes:s,powPminus2:i,randomBytes:a}=e,o=r==="x25519";if(!o&&r!=="x448")throw new Error("invalid type");const l=a||wm,u=o?255:448,d=o?32:56,h=BigInt(o?9:5),f=BigInt(o?121665:39081),p=o?gb**BigInt(254):gb**BigInt(447),g=o?BigInt(8)*gb**BigInt(251)-kh:BigInt(4)*gb**BigInt(445)-kh,m=p+g+kh,y=E=>vi(E,n),b=w(h);function w(E){return CS(y(E),d)}function x(E){const k=bs("u coordinate",E,d);return o&&(k[31]&=127),y(Tv(k))}function A(E){return Tv(s(bs("scalar",E,d)))}function T(E,k){const R=S(x(k),A(E));if(R===Jm)throw new Error("invalid private or public key received");return w(R)}function j(E){return T(E,b)}function P(E,k,R){const O=y(E*(k-R));return k=y(k-O),R=y(R+O),{x_2:k,x_3:R}}function S(E,k){jA("u",E,Jm,n),jA("scalar",k,p,m);const R=k,O=E;let F=kh,z=Jm,N=E,I=kh,M=Jm;for(let L=BigInt(u-1);L>=Jm;L--){const $=R>>L&kh;M^=$,{x_2:F,x_3:N}=P(M,F,N),{x_2:z,x_3:I}=P(M,z,I),M=$;const V=F+z,q=y(V*V),G=F-z,Z=y(G*G),oe=q-Z,xe=N+I,J=N-I,ve=y(J*V),ge=y(xe*G),Le=ve+ge,je=ve-ge;N=y(Le*Le),I=y(O*y(je*je)),F=y(q*Z),z=y(oe*(q+y(f*oe)))}({x_2:F,x_3:N}=P(M,F,N)),{x_2:z,x_3:I}=P(M,z,I);const D=i(z);return y(F*D)}return{scalarMult:T,scalarMultBase:j,getSharedSecret:(E,k)=>T(E,k),getPublicKey:E=>j(E),utils:{randomPrivateKey:()=>l(d)},GuBytes:b.slice()}}BigInt(0);const Cae=BigInt(1),UI=BigInt(2),Aae=BigInt(3),Tae=BigInt(5);BigInt(8);const lL={p:BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffed"),n:BigInt("0x1000000000000000000000000000000014def9dea2f79cd65812631a5cf5d3ed"),a:BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffec"),d:BigInt("0x52036cee2b6ffe738cc740797779e89800700a4d4141d8ab75eb4dca135978a3"),Gx:BigInt("0x216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a"),Gy:BigInt("0x6666666666666666666666666666666666666666666666666666666666666658")};function Sae(t){const e=BigInt(10),n=BigInt(20),r=BigInt(40),s=BigInt(80),i=lL.p,a=t*t%i*t%i,o=Fi(a,UI,i)*a%i,l=Fi(o,Cae,i)*t%i,u=Fi(l,Tae,i)*l%i,d=Fi(u,e,i)*u%i,h=Fi(d,n,i)*d%i,f=Fi(h,r,i)*h%i,p=Fi(f,s,i)*f%i,g=Fi(p,s,i)*f%i,m=Fi(g,e,i)*u%i;return{pow_p_5_8:Fi(m,UI,i)*t%i,b2:a}}function kae(t){return t[0]&=248,t[31]&=127,t[31]|=64,t}const OA=(()=>{const t=lL.p;return Nae({P:t,type:"x25519",powPminus2:e=>{const{pow_p_5_8:n,b2:r}=Sae(e);return vi(Fi(n,Aae,t)*r,t)},adjustScalarBytes:kae})})();function MI(t){t.lowS!==void 0&&Av("lowS",t.lowS),t.prehash!==void 0&&Av("prehash",t.prehash)}class _ae extends Error{constructor(e=""){super(e)}}const jo={Err:_ae,_tlv:{encode:(t,e)=>{const{Err:n}=jo;if(t<0||t>256)throw new n("tlv.encode: wrong tag");if(e.length&1)throw new n("tlv.encode: unpadded data");const r=e.length/2,s=mb(r);if(s.length/2&128)throw new n("tlv.encode: long form length too big");const i=r>127?mb(s.length/2|128):"";return mb(t)+i+s+e},decode(t,e){const{Err:n}=jo;let r=0;if(t<0||t>256)throw new n("tlv.encode: wrong tag");if(e.length<2||e[r++]!==t)throw new n("tlv.decode: wrong tlv");const s=e[r++],i=!!(s&128);let a=0;if(!i)a=s;else{const l=s&127;if(!l)throw new n("tlv.decode(long): indefinite length not supported");if(l>4)throw new n("tlv.decode(long): byte length is too big");const u=e.subarray(r,r+l);if(u.length!==l)throw new n("tlv.decode: length bytes not complete");if(u[0]===0)throw new n("tlv.decode(long): zero leftmost byte");for(const d of u)a=a<<8|d;if(r+=l,a<128)throw new n("tlv.decode(long): not minimal encoding")}const o=e.subarray(r,r+a);if(o.length!==a)throw new n("tlv.decode: wrong value length");return{v:o,l:e.subarray(r+a)}}},_int:{encode(t){const{Err:e}=jo;if(t<Gg)throw new e("integer: negative integers are not allowed");let n=mb(t);if(Number.parseInt(n[0],16)&8&&(n="00"+n),n.length&1)throw new e("unexpected DER parsing assertion: unpadded hex");return n},decode(t){const{Err:e}=jo;if(t[0]&128)throw new e("invalid signature integer: negative");if(t[0]===0&&!(t[1]&128))throw new e("invalid signature integer: unnecessary leading zero");return K1(t)}},toSig(t){const{Err:e,_int:n,_tlv:r}=jo,s=bs("signature",t),{v:i,l:a}=r.decode(48,s);if(a.length)throw new e("invalid signature: left bytes after parsing");const{v:o,l}=r.decode(2,i),{v:u,l:d}=r.decode(2,l);if(d.length)throw new e("invalid signature: left bytes after parsing");return{r:n.decode(o),s:n.decode(u)}},hexFromSig(t){const{_tlv:e,_int:n}=jo,r=e.encode(2,n.encode(t.r)),s=e.encode(2,n.encode(t.s)),i=r+s;return e.encode(48,i)}},Gg=BigInt(0),Yg=BigInt(1),Iae=BigInt(2),yb=BigInt(3),Pae=BigInt(4);function Rae(t,e,n){function r(s){const i=t.sqr(s),a=t.mul(i,s);return t.add(t.add(a,t.mul(s,e)),n)}return r}function uL(t,e,n){const{BYTES:r}=t;function s(i){let a;if(typeof i=="bigint")a=i;else{let o=bs("private key",i);if(e){if(!e.includes(o.length*2))throw new Error("invalid private key");const l=new Uint8Array(r);l.set(o,l.length-o.length),o=l}try{a=t.fromBytes(o)}catch{throw new Error(`invalid private key: expected ui8a of size ${r}, got ${typeof i}`)}}if(n&&(a=t.create(a)),!t.isValidNot0(a))throw new Error("invalid private key: out of range [1..N-1]");return a}return s}function jae(t,e={}){const{Fp:n,Fn:r}=vae("weierstrass",t,e),{h:s,n:i}=t;Y1(e,{},{allowInfinityPoint:"boolean",clearCofactor:"function",isTorsionFree:"function",fromBytes:"function",toBytes:"function",endo:"object",wrapPrivateKey:"boolean"});const{endo:a}=e;if(a&&(!n.is0(t.a)||typeof a.beta!="bigint"||typeof a.splitScalar!="function"))throw new Error('invalid endo: expected "beta": bigint and "splitScalar": function');function o(){if(!n.isOdd)throw new Error("compression is not supported: Field does not have .isOdd()")}function l(S,E,k){const{x:R,y:O}=E.toAffine(),F=n.toBytes(R);if(Av("isCompressed",k),k){o();const z=!n.isOdd(O);return Hu(dL(z),F)}else return Hu(Uint8Array.of(4),F,n.toBytes(O))}function u(S){_i(S);const E=n.BYTES,k=E+1,R=2*E+1,O=S.length,F=S[0],z=S.subarray(1);if(O===k&&(F===2||F===3)){const N=n.fromBytes(z);if(!n.isValid(N))throw new Error("bad point: is not on curve, wrong x");const I=f(N);let M;try{M=n.sqrt(I)}catch(L){const $=L instanceof Error?": "+L.message:"";throw new Error("bad point: is not on curve, sqrt error"+$)}o();const D=n.isOdd(M);return(F&1)===1!==D&&(M=n.neg(M)),{x:N,y:M}}else if(O===R&&F===4){const N=n.fromBytes(z.subarray(E*0,E*1)),I=n.fromBytes(z.subarray(E*1,E*2));if(!p(N,I))throw new Error("bad point: is not on curve");return{x:N,y:I}}else throw new Error(`bad point: got length ${O}, expected compressed=${k} or uncompressed=${R}`)}const d=e.toBytes||l,h=e.fromBytes||u,f=Rae(n,t.a,t.b);function p(S,E){const k=n.sqr(E),R=f(S);return n.eql(k,R)}if(!p(t.Gx,t.Gy))throw new Error("bad curve params: generator point");const g=n.mul(n.pow(t.a,yb),Pae),m=n.mul(n.sqr(t.b),BigInt(27));if(n.is0(n.add(g,m)))throw new Error("bad curve params: a or b");function y(S,E,k=!1){if(!n.isValid(E)||k&&n.is0(E))throw new Error(`bad point coordinate ${S}`);return E}function b(S){if(!(S instanceof T))throw new Error("ProjectivePoint expected")}const w=II((S,E)=>{const{px:k,py:R,pz:O}=S;if(n.eql(O,n.ONE))return{x:k,y:R};const F=S.is0();E==null&&(E=F?n.ONE:n.inv(O));const z=n.mul(k,E),N=n.mul(R,E),I=n.mul(O,E);if(F)return{x:n.ZERO,y:n.ZERO};if(!n.eql(I,n.ONE))throw new Error("invZ was invalid");return{x:z,y:N}}),x=II(S=>{if(S.is0()){if(e.allowInfinityPoint&&!n.is0(S.py))return;throw new Error("bad point: ZERO")}const{x:E,y:k}=S.toAffine();if(!n.isValid(E)||!n.isValid(k))throw new Error("bad point: x or y not field elements");if(!p(E,k))throw new Error("bad point: equation left != right");if(!S.isTorsionFree())throw new Error("bad point: not in prime-order subgroup");return!0});function A(S,E,k,R,O){return k=new T(n.mul(k.px,S),k.py,k.pz),E=Kg(R,E),k=Kg(O,k),E.add(k)}class T{constructor(E,k,R){this.px=y("x",E),this.py=y("y",k,!0),this.pz=y("z",R),Object.freeze(this)}static fromAffine(E){const{x:k,y:R}=E||{};if(!E||!n.isValid(k)||!n.isValid(R))throw new Error("invalid affine point");if(E instanceof T)throw new Error("projective point not allowed");return n.is0(k)&&n.is0(R)?T.ZERO:new T(k,R,n.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(E){return mae(T,"pz",E)}static fromBytes(E){return _i(E),T.fromHex(E)}static fromHex(E){const k=T.fromAffine(h(bs("pointHex",E)));return k.assertValidity(),k}static fromPrivateKey(E){const k=uL(r,e.allowedPrivateKeyLengths,e.wrapPrivateKey);return T.BASE.multiply(k(E))}static msm(E,k){return xae(T,r,E,k)}precompute(E=8,k=!0){return P.setWindowSize(this,E),k||this.multiply(yb),this}_setWindowSize(E){this.precompute(E)}assertValidity(){x(this)}hasEvenY(){const{y:E}=this.toAffine();if(!n.isOdd)throw new Error("Field doesn't support isOdd");return!n.isOdd(E)}equals(E){b(E);const{px:k,py:R,pz:O}=this,{px:F,py:z,pz:N}=E,I=n.eql(n.mul(k,N),n.mul(F,O)),M=n.eql(n.mul(R,N),n.mul(z,O));return I&&M}negate(){return new T(this.px,n.neg(this.py),this.pz)}double(){const{a:E,b:k}=t,R=n.mul(k,yb),{px:O,py:F,pz:z}=this;let N=n.ZERO,I=n.ZERO,M=n.ZERO,D=n.mul(O,O),L=n.mul(F,F),$=n.mul(z,z),V=n.mul(O,F);return V=n.add(V,V),M=n.mul(O,z),M=n.add(M,M),N=n.mul(E,M),I=n.mul(R,$),I=n.add(N,I),N=n.sub(L,I),I=n.add(L,I),I=n.mul(N,I),N=n.mul(V,N),M=n.mul(R,M),$=n.mul(E,$),V=n.sub(D,$),V=n.mul(E,V),V=n.add(V,M),M=n.add(D,D),D=n.add(M,D),D=n.add(D,$),D=n.mul(D,V),I=n.add(I,D),$=n.mul(F,z),$=n.add($,$),D=n.mul($,V),N=n.sub(N,D),M=n.mul($,L),M=n.add(M,M),M=n.add(M,M),new T(N,I,M)}add(E){b(E);const{px:k,py:R,pz:O}=this,{px:F,py:z,pz:N}=E;let I=n.ZERO,M=n.ZERO,D=n.ZERO;const L=t.a,$=n.mul(t.b,yb);let V=n.mul(k,F),q=n.mul(R,z),G=n.mul(O,N),Z=n.add(k,R),oe=n.add(F,z);Z=n.mul(Z,oe),oe=n.add(V,q),Z=n.sub(Z,oe),oe=n.add(k,O);let xe=n.add(F,N);return oe=n.mul(oe,xe),xe=n.add(V,G),oe=n.sub(oe,xe),xe=n.add(R,O),I=n.add(z,N),xe=n.mul(xe,I),I=n.add(q,G),xe=n.sub(xe,I),D=n.mul(L,oe),I=n.mul($,G),D=n.add(I,D),I=n.sub(q,D),D=n.add(q,D),M=n.mul(I,D),q=n.add(V,V),q=n.add(q,V),G=n.mul(L,G),oe=n.mul($,oe),q=n.add(q,G),G=n.sub(V,G),G=n.mul(L,G),oe=n.add(oe,G),V=n.mul(q,oe),M=n.add(M,V),V=n.mul(xe,oe),I=n.mul(Z,I),I=n.sub(I,V),V=n.mul(Z,q),D=n.mul(xe,D),D=n.add(D,V),new T(I,M,D)}subtract(E){return this.add(E.negate())}is0(){return this.equals(T.ZERO)}multiply(E){const{endo:k}=e;if(!r.isValidNot0(E))throw new Error("invalid scalar: out of range");let R,O;const F=z=>P.wNAFCached(this,z,T.normalizeZ);if(k){const{k1neg:z,k1:N,k2neg:I,k2:M}=k.splitScalar(E),{p:D,f:L}=F(N),{p:$,f:V}=F(M);O=L.add(V),R=A(k.beta,D,$,z,I)}else{const{p:z,f:N}=F(E);R=z,O=N}return T.normalizeZ([R,O])[0]}multiplyUnsafe(E){const{endo:k}=e,R=this;if(!r.isValid(E))throw new Error("invalid scalar: out of range");if(E===Gg||R.is0())return T.ZERO;if(E===Yg)return R;if(P.hasPrecomputes(this))return this.multiply(E);if(k){const{k1neg:O,k1:F,k2neg:z,k2:N}=k.splitScalar(E),{p1:I,p2:M}=bae(T,R,F,N);return A(k.beta,I,M,O,z)}else return P.wNAFCachedUnsafe(R,E)}multiplyAndAddUnsafe(E,k,R){const O=this.multiplyUnsafe(k).add(E.multiplyUnsafe(R));return O.is0()?void 0:O}toAffine(E){return w(this,E)}isTorsionFree(){const{isTorsionFree:E}=e;return s===Yg?!0:E?E(T,this):P.wNAFCachedUnsafe(this,i).is0()}clearCofactor(){const{clearCofactor:E}=e;return s===Yg?this:E?E(T,this):this.multiplyUnsafe(s)}toBytes(E=!0){return Av("isCompressed",E),this.assertValidity(),d(T,this,E)}toRawBytes(E=!0){return this.toBytes(E)}toHex(E=!0){return oy(this.toBytes(E))}toString(){return`<Point ${this.is0()?"ZERO":this.toHex()}>`}}T.BASE=new T(t.Gx,t.Gy,n.ONE),T.ZERO=new T(n.ZERO,n.ONE,n.ZERO),T.Fp=n,T.Fn=r;const j=r.BITS,P=wae(T,e.endo?Math.ceil(j/2):j);return T}function dL(t){return Uint8Array.of(t?2:3)}function Oae(t,e,n={}){Y1(e,{hash:"function"},{hmac:"function",lowS:"boolean",randomBytes:"function",bits2int:"function",bits2int_modN:"function"});const r=e.randomBytes||wm,s=e.hmac||((R,...O)=>W1(e.hash,R,Hu(...O))),{Fp:i,Fn:a}=t,{ORDER:o,BITS:l}=a;function u(R){const O=o>>Yg;return R>O}function d(R){return u(R)?a.neg(R):R}function h(R,O){if(!a.isValidNot0(O))throw new Error(`invalid signature ${R}: out of range 1..CURVE.n`)}class f{constructor(O,F,z){h("r",O),h("s",F),this.r=O,this.s=F,z!=null&&(this.recovery=z),Object.freeze(this)}static fromCompact(O){const F=a.BYTES,z=bs("compactSignature",O,F*2);return new f(a.fromBytes(z.subarray(0,F)),a.fromBytes(z.subarray(F,F*2)))}static fromDER(O){const{r:F,s:z}=jo.toSig(bs("DER",O));return new f(F,z)}assertValidity(){}addRecoveryBit(O){return new f(this.r,this.s,O)}recoverPublicKey(O){const F=i.ORDER,{r:z,s:N,recovery:I}=this;if(I==null||![0,1,2,3].includes(I))throw new Error("recovery id invalid");if(o*Iae<F&&I>1)throw new Error("recovery id is ambiguous for h>1 curve");const M=I===2||I===3?z+o:z;if(!i.isValid(M))throw new Error("recovery id 2 or 3 invalid");const D=i.toBytes(M),L=t.fromHex(Hu(dL((I&1)===0),D)),$=a.inv(M),V=x(bs("msgHash",O)),q=a.create(-V*$),G=a.create(N*$),Z=t.BASE.multiplyUnsafe(q).add(L.multiplyUnsafe(G));if(Z.is0())throw new Error("point at infinify");return Z.assertValidity(),Z}hasHighS(){return u(this.s)}normalizeS(){return this.hasHighS()?new f(this.r,a.neg(this.s),this.recovery):this}toBytes(O){if(O==="compact")return Hu(a.toBytes(this.r),a.toBytes(this.s));if(O==="der")return bS(jo.hexFromSig(this));throw new Error("invalid format")}toDERRawBytes(){return this.toBytes("der")}toDERHex(){return oy(this.toBytes("der"))}toCompactRawBytes(){return this.toBytes("compact")}toCompactHex(){return oy(this.toBytes("compact"))}}const p=uL(a,n.allowedPrivateKeyLengths,n.wrapPrivateKey),g={isValidPrivateKey(R){try{return p(R),!0}catch{return!1}},normPrivateKeyToScalar:p,randomPrivateKey:()=>{const R=o;return pae(r(aL(R)),R)},precompute(R=8,O=t.BASE){return O.precompute(R,!1)}};function m(R,O=!0){return t.fromPrivateKey(R).toBytes(O)}function y(R){if(typeof R=="bigint")return!1;if(R instanceof t)return!0;const O=bs("key",R).length,F=i.BYTES,z=F+1,N=2*F+1;if(!(n.allowedPrivateKeyLengths||a.BYTES===z))return O===z||O===N}function b(R,O,F=!0){if(y(R)===!0)throw new Error("first arg must be private key");if(y(O)===!1)throw new Error("second arg must be public key");return t.fromHex(O).multiply(p(R)).toBytes(F)}const w=e.bits2int||function(R){if(R.length>8192)throw new Error("input is too large");const O=K1(R),F=R.length*8-l;return F>0?O>>BigInt(F):O},x=e.bits2int_modN||function(R){return a.create(w(R))},A=G1(l);function T(R){return jA("num < 2^"+l,R,Gg,A),a.toBytes(R)}function j(R,O,F=P){if(["recovered","canonical"].some(Z=>Z in F))throw new Error("sign() legacy options not supported");const{hash:z}=e;let{lowS:N,prehash:I,extraEntropy:M}=F;N==null&&(N=!0),R=bs("msgHash",R),MI(F),I&&(R=bs("prehashed msgHash",z(R)));const D=x(R),L=p(O),$=[T(L),T(D)];if(M!=null&&M!==!1){const Z=M===!0?r(i.BYTES):M;$.push(bs("extraEntropy",Z))}const V=Hu(...$),q=D;function G(Z){const oe=w(Z);if(!a.isValidNot0(oe))return;const xe=a.inv(oe),J=t.BASE.multiply(oe).toAffine(),ve=a.create(J.x);if(ve===Gg)return;const ge=a.create(xe*a.create(q+ve*L));if(ge===Gg)return;let Le=(J.x===ve?0:2)|Number(J.y&Yg),je=ge;return N&&u(ge)&&(je=d(ge),Le^=1),new f(ve,je,Le)}return{seed:V,k2sig:G}}const P={lowS:e.lowS,prehash:!1},S={lowS:e.lowS,prehash:!1};function E(R,O,F=P){const{seed:z,k2sig:N}=j(R,O,F);return iae(e.hash.outputLen,a.BYTES,s)(z,N)}t.BASE.precompute(8);function k(R,O,F,z=S){const N=R;O=bs("msgHash",O),F=bs("publicKey",F),MI(z);const{lowS:I,prehash:M,format:D}=z;if("strict"in z)throw new Error("options.strict was renamed to lowS");if(D!==void 0&&!["compact","der","js"].includes(D))throw new Error('format must be "compact", "der" or "js"');const L=typeof N=="string"||gS(N),$=!L&&!D&&typeof N=="object"&&N!==null&&typeof N.r=="bigint"&&typeof N.s=="bigint";if(!L&&!$)throw new Error("invalid signature, expected Uint8Array, hex string or Signature instance");let V,q;try{if($)if(D===void 0||D==="js")V=new f(N.r,N.s);else throw new Error("invalid format");if(L){try{D!=="compact"&&(V=f.fromDER(N))}catch(Le){if(!(Le instanceof jo.Err))throw Le}!V&&D!=="der"&&(V=f.fromCompact(N))}q=t.fromHex(F)}catch{return!1}if(!V||I&&V.hasHighS())return!1;M&&(O=e.hash(O));const{r:G,s:Z}=V,oe=x(O),xe=a.inv(Z),J=a.create(oe*xe),ve=a.create(G*xe),ge=t.BASE.multiplyUnsafe(J).add(q.multiplyUnsafe(ve));return ge.is0()?!1:a.create(ge.x)===G}return Object.freeze({getPublicKey:m,getSharedSecret:b,sign:E,verify:k,utils:g,Point:t,Signature:f})}function Dae(t){const e={a:t.a,b:t.b,p:t.Fp.ORDER,n:t.n,h:t.h,Gx:t.Gx,Gy:t.Gy},n=t.Fp,r=bm(e.n,t.nBitLength),s={Fp:n,Fn:r,allowedPrivateKeyLengths:t.allowedPrivateKeyLengths,allowInfinityPoint:t.allowInfinityPoint,endo:t.endo,wrapPrivateKey:t.wrapPrivateKey,isTorsionFree:t.isTorsionFree,clearCofactor:t.clearCofactor,fromBytes:t.fromBytes,toBytes:t.toBytes};return{CURVE:e,curveOpts:s}}function Uae(t){const{CURVE:e,curveOpts:n}=Dae(t),r={hash:t.hash,hmac:t.hmac,randomBytes:t.randomBytes,lowS:t.lowS,bits2int:t.bits2int,bits2int_modN:t.bits2int_modN};return{CURVE:e,curveOpts:n,ecdsaOpts:r}}function Mae(t,e){return Object.assign({},e,{ProjectivePoint:e.Point,CURVE:t})}function Lae(t){const{CURVE:e,curveOpts:n,ecdsaOpts:r}=Uae(t),s=jae(e,n),i=Oae(s,r,n);return Mae(t,i)}function DA(t,e){const n=r=>Lae({...t,hash:r});return{...n(e),create:n}}const hL={p:BigInt("0xffffffff00000001000000000000000000000000ffffffffffffffffffffffff"),n:BigInt("0xffffffff00000000ffffffffffffffffbce6faada7179e84f3b9cac2fc632551"),h:BigInt(1),a:BigInt("0xffffffff00000001000000000000000000000000fffffffffffffffffffffffc"),b:BigInt("0x5ac635d8aa3a93e7b3ebbd55769886bc651d06b0cc53b0f63bce3c3e27d2604b"),Gx:BigInt("0x6b17d1f2e12c4247f8bce6e563a440f277037d812deb33a0f4a13945d898c296"),Gy:BigInt("0x4fe342e2fe1a7f9b8ee7eb4a7c0f9e162bce33576b315ececbb6406837bf51f5")},fL={p:BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffeffffffff0000000000000000ffffffff"),n:BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffc7634d81f4372ddf581a0db248b0a77aecec196accc52973"),h:BigInt(1),a:BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffeffffffff0000000000000000fffffffc"),b:BigInt("0xb3312fa7e23ee7e4988e056be3f82d19181d9c6efe8141120314088f5013875ac656398d8a2ed19d2a85c8edd3ec2aef"),Gx:BigInt("0xaa87ca22be8b05378eb1c71ef320ad746e1d3b628ba79b9859f741e082542a385502f25dbf55296c3a545e3872760ab7"),Gy:BigInt("0x3617de4a96262c6f5d9e98bf9292dc29f8f41dbd289a147ce9da3113b5f0b8c00a60b1ce1d7e819d7a431d7c90ea0e5f")},pL={p:BigInt("0x1ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),n:BigInt("0x01fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffa51868783bf2f966b7fcc0148f709a5d03bb5c9b8899c47aebb6fb71e91386409"),h:BigInt(1),a:BigInt("0x1fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffc"),b:BigInt("0x0051953eb9618e1c9a1f929a21a0b68540eea2da725b99b315f3b8b489918ef109e156193951ec7e937b1652c0bd3bb1bf073573df883d2c34f1ef451fd46b503f00"),Gx:BigInt("0x00c6858e06b70404e9cd9e3ecb662395b4429c648139053fb521f828af606b4d3dbaa14b5e77efe75928fe1dc127a2ffa8de3348b3c1856a429bf97e7e31c2e5bd66"),Gy:BigInt("0x011839296a789a3bc0045c8a5fb42c7d1bd998f54449579b446817afbd17273e662c97ee72995ef42640c550b9013fad0761353c7086a272c24088be94769fd16650")},Bae=bm(hL.p),$ae=bm(fL.p),Fae=bm(pL.p),Hae=DA({...hL,Fp:Bae,lowS:!1},z1);DA({...fL,Fp:$ae,lowS:!1},Qse),DA({...pL,Fp:Fae,lowS:!1,allowedPrivateKeyLengths:[130,131,132]},Yse);const Vae=Hae,mL="base10",es="base16",sa="base64pad",Zc="base64url",hw="utf8",gL=0,ec=1,fw=2,zae=0,LI=1,Qg=12,AS=32;function Wae(){const t=OA.utils.randomPrivateKey(),e=OA.getPublicKey(t);return{privateKey:Ps(t,es),publicKey:Ps(e,es)}}function UA(){const t=wm(AS);return Ps(t,es)}function qae(t,e){const n=OA.getSharedSecret(Ai(t,es),Ai(e,es)),r=nae(q1,n,void 0,void 0,AS);return Ps(r,es)}function lx(t){const e=q1(Ai(t,es));return Ps(e,es)}function Wa(t){const e=q1(Ai(t,hw));return Ps(e,es)}function yL(t){return Ai(`${t}`,mL)}function Wd(t){return Number(Ps(t,mL))}function wL(t){return t.replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"")}function bL(t){const e=t.replace(/-/g,"+").replace(/_/g,"/"),n=(4-e.length%4)%4;return e+"=".repeat(n)}function Kae(t){const e=yL(typeof t.type<"u"?t.type:gL);if(Wd(e)===ec&&typeof t.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");const n=typeof t.senderPublicKey<"u"?Ai(t.senderPublicKey,es):void 0,r=typeof t.iv<"u"?Ai(t.iv,es):wm(Qg),s=Ai(t.symKey,es),i=JM(s,r).encrypt(Ai(t.message,hw)),a=xL({type:e,sealed:i,iv:r,senderPublicKey:n});return t.encoding===Zc?wL(a):a}function Gae(t){const e=Ai(t.symKey,es),{sealed:n,iv:r}=ly({encoded:t.encoded,encoding:t.encoding}),s=JM(e,r).decrypt(n);if(s===null)throw new Error("Failed to decrypt");return Ps(s,hw)}function Yae(t,e){const n=yL(fw),r=wm(Qg),s=Ai(t,hw),i=xL({type:n,sealed:s,iv:r});return e===Zc?wL(i):i}function Qae(t,e){const{sealed:n}=ly({encoded:t,encoding:e});return Ps(n,hw)}function xL(t){if(Wd(t.type)===fw)return Ps(qg([t.type,t.sealed]),sa);if(Wd(t.type)===ec){if(typeof t.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");return Ps(qg([t.type,t.senderPublicKey,t.iv,t.sealed]),sa)}return Ps(qg([t.type,t.iv,t.sealed]),sa)}function ly(t){const e=(t.encoding||sa)===Zc?bL(t.encoded):t.encoded,n=Ai(e,sa),r=n.slice(zae,LI),s=LI;if(Wd(r)===ec){const l=s+AS,u=l+Qg,d=n.slice(s,l),h=n.slice(l,u),f=n.slice(u);return{type:r,sealed:f,iv:h,senderPublicKey:d}}if(Wd(r)===fw){const l=n.slice(s),u=wm(Qg);return{type:r,sealed:l,iv:u}}const i=s+Qg,a=n.slice(s,i),o=n.slice(i);return{type:r,sealed:o,iv:a}}function Jae(t,e){const n=ly({encoded:t,encoding:e==null?void 0:e.encoding});return vL({type:Wd(n.type),senderPublicKey:typeof n.senderPublicKey<"u"?Ps(n.senderPublicKey,es):void 0,receiverPublicKey:e==null?void 0:e.receiverPublicKey})}function vL(t){const e=(t==null?void 0:t.type)||gL;if(e===ec){if(typeof(t==null?void 0:t.senderPublicKey)>"u")throw new Error("missing sender public key");if(typeof(t==null?void 0:t.receiverPublicKey)>"u")throw new Error("missing receiver public key")}return{type:e,senderPublicKey:t==null?void 0:t.senderPublicKey,receiverPublicKey:t==null?void 0:t.receiverPublicKey}}function BI(t){return t.type===ec&&typeof t.senderPublicKey=="string"&&typeof t.receiverPublicKey=="string"}function $I(t){return t.type===fw}function Zae(t){const e=Buffer.from(t.x,"base64"),n=Buffer.from(t.y,"base64");return qg([new Uint8Array([4]),e,n])}function Xae(t,e){const[n,r,s]=t.split("."),i=Buffer.from(bL(s),"base64");if(i.length!==64)throw new Error("Invalid signature length");const a=i.slice(0,32),o=i.slice(32,64),l=`${n}.${r}`,u=q1(l),d=Zae(e);if(!Vae.verify(qg([a,o]),u,d))throw new Error("Invalid signature");return wA(t).payload}const eoe="irn";function Sv(t){return(t==null?void 0:t.relay)||{protocol:eoe}}function Cg(t){const e=_re[t];if(typeof e>"u")throw new Error(`Relay Protocol not supported: ${t}`);return e}function toe(t,e="-"){const n={},r="relay"+e;return Object.keys(t).forEach(s=>{if(s.startsWith(r)){const i=s.replace(r,""),a=t[s];n[i]=a}}),n}function FI(t){if(!t.includes("wc:")){const u=RM(t);u!=null&&u.includes("wc:")&&(t=u)}t=t.includes("wc://")?t.replace("wc://",""):t,t=t.includes("wc:")?t.replace("wc:",""):t;const e=t.indexOf(":"),n=t.indexOf("?")!==-1?t.indexOf("?"):void 0,r=t.substring(0,e),s=t.substring(e+1,n).split("@"),i=typeof n<"u"?t.substring(n):"",a=new URLSearchParams(i),o={};a.forEach((u,d)=>{o[d]=u});const l=typeof o.methods=="string"?o.methods.split(","):void 0;return{protocol:r,topic:noe(s[0]),version:parseInt(s[1],10),symKey:o.symKey,relay:toe(o),methods:l,expiryTimestamp:o.expiryTimestamp?parseInt(o.expiryTimestamp,10):void 0}}function noe(t){return t.startsWith("//")?t.substring(2):t}function roe(t,e="-"){const n="relay",r={};return Object.keys(t).forEach(s=>{const i=s,a=n+e+i;t[i]&&(r[a]=t[i])}),r}function HI(t){const e=new URLSearchParams,n=roe(t.relay);Object.keys(n).sort().forEach(s=>{e.set(s,n[s])}),e.set("symKey",t.symKey),t.expiryTimestamp&&e.set("expiryTimestamp",t.expiryTimestamp.toString()),t.methods&&e.set("methods",t.methods.join(","));const r=e.toString();return`${t.protocol}:${t.topic}@${t.version}?${r}`}function wb(t,e,n){return`${t}?wc_ev=${n}&topic=${e}`}var soe=Object.defineProperty,ioe=Object.defineProperties,aoe=Object.getOwnPropertyDescriptors,VI=Object.getOwnPropertySymbols,ooe=Object.prototype.hasOwnProperty,coe=Object.prototype.propertyIsEnumerable,zI=(t,e,n)=>e in t?soe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,loe=(t,e)=>{for(var n in e||(e={}))ooe.call(e,n)&&zI(t,n,e[n]);if(VI)for(var n of VI(e))coe.call(e,n)&&zI(t,n,e[n]);return t},uoe=(t,e)=>ioe(t,aoe(e));function xm(t){const e=[];return t.forEach(n=>{const[r,s]=n.split(":");e.push(`${r}:${s}`)}),e}function doe(t){const e=[];return Object.values(t).forEach(n=>{e.push(...xm(n.accounts))}),e}function hoe(t,e){const n=[];return Object.values(t).forEach(r=>{xm(r.accounts).includes(e)&&n.push(...r.methods)}),n}function foe(t,e){const n=[];return Object.values(t).forEach(r=>{xm(r.accounts).includes(e)&&n.push(...r.events)}),n}function Q1(t){return t.includes(":")}function pf(t){return Q1(t)?t.split(":")[0]:t}function WI(t){var e,n,r;const s={};if(!Ml(t))return s;for(const[i,a]of Object.entries(t)){const o=Q1(i)?[i]:a.chains,l=a.methods||[],u=a.events||[],d=pf(i);s[d]=uoe(loe({},s[d]),{chains:so(o,(e=s[d])==null?void 0:e.chains),methods:so(l,(n=s[d])==null?void 0:n.methods),events:so(u,(r=s[d])==null?void 0:r.events)})}return s}function poe(t){const e={};return t==null||t.forEach(n=>{var r;const[s,i]=n.split(":");e[s]||(e[s]={accounts:[],chains:[],events:[],methods:[]}),e[s].accounts.push(n),(r=e[s].chains)==null||r.push(`${s}:${i}`)}),e}function qI(t,e){e=e.map(r=>r.replace("did:pkh:",""));const n=poe(e);for(const[r,s]of Object.entries(n))s.methods?s.methods=so(s.methods,t):s.methods=t,s.events=["chainChanged","accountsChanged"];return n}function moe(t,e){var n,r,s,i,a,o;const l=WI(t),u=WI(e),d={},h=Object.keys(l).concat(Object.keys(u));for(const f of h)d[f]={chains:so((n=l[f])==null?void 0:n.chains,(r=u[f])==null?void 0:r.chains),methods:so((s=l[f])==null?void 0:s.methods,(i=u[f])==null?void 0:i.methods),events:so((a=l[f])==null?void 0:a.events,(o=u[f])==null?void 0:o.events)};return d}const goe={INVALID_METHOD:{message:"Invalid method.",code:1001},INVALID_EVENT:{message:"Invalid event.",code:1002},INVALID_UPDATE_REQUEST:{message:"Invalid update request.",code:1003},INVALID_EXTEND_REQUEST:{message:"Invalid extend request.",code:1004},INVALID_SESSION_SETTLE_REQUEST:{message:"Invalid session settle request.",code:1005},UNAUTHORIZED_METHOD:{message:"Unauthorized method.",code:3001},UNAUTHORIZED_EVENT:{message:"Unauthorized event.",code:3002},UNAUTHORIZED_UPDATE_REQUEST:{message:"Unauthorized update request.",code:3003},UNAUTHORIZED_EXTEND_REQUEST:{message:"Unauthorized extend request.",code:3004},USER_REJECTED:{message:"User rejected.",code:5e3},USER_REJECTED_CHAINS:{message:"User rejected chains.",code:5001},USER_REJECTED_METHODS:{message:"User rejected methods.",code:5002},USER_REJECTED_EVENTS:{message:"User rejected events.",code:5003},UNSUPPORTED_CHAINS:{message:"Unsupported chains.",code:5100},UNSUPPORTED_METHODS:{message:"Unsupported methods.",code:5101},UNSUPPORTED_EVENTS:{message:"Unsupported events.",code:5102},UNSUPPORTED_ACCOUNTS:{message:"Unsupported accounts.",code:5103},UNSUPPORTED_NAMESPACE_KEY:{message:"Unsupported namespace key.",code:5104},USER_DISCONNECTED:{message:"User disconnected.",code:6e3},SESSION_SETTLEMENT_FAILED:{message:"Session settlement failed.",code:7e3},WC_METHOD_UNSUPPORTED:{message:"Unsupported wc_ method.",code:10001}},yoe={NOT_INITIALIZED:{message:"Not initialized.",code:1},NO_MATCHING_KEY:{message:"No matching key.",code:2},RESTORE_WILL_OVERRIDE:{message:"Restore will override.",code:3},RESUBSCRIBED:{message:"Resubscribed.",code:4},MISSING_OR_INVALID:{message:"Missing or invalid.",code:5},EXPIRED:{message:"Expired.",code:6},UNKNOWN_TYPE:{message:"Unknown type.",code:7},MISMATCHED_TOPIC:{message:"Mismatched topic.",code:8},NON_CONFORMING_NAMESPACES:{message:"Non conforming namespaces.",code:9}};function fe(t,e){const{message:n,code:r}=yoe[t];return{message:e?`${n} ${e}`:n,code:r}}function rn(t,e){const{message:n,code:r}=goe[t];return{message:e?`${n} ${e}`:n,code:r}}function tc(t,e){return!!Array.isArray(t)}function Ml(t){return Object.getPrototypeOf(t)===Object.prototype&&Object.keys(t).length}function ir(t){return typeof t>"u"}function Cn(t,e){return e&&ir(t)?!0:typeof t=="string"&&!!t.trim().length}function TS(t,e){return e&&ir(t)?!0:typeof t=="number"&&!isNaN(t)}function woe(t,e){const{requiredNamespaces:n}=e,r=Object.keys(t.namespaces),s=Object.keys(n);let i=!0;return Fu(s,r)?(r.forEach(a=>{const{accounts:o,methods:l,events:u}=t.namespaces[a],d=xm(o),h=n[a];(!Fu(SM(a,h),d)||!Fu(h.methods,l)||!Fu(h.events,u))&&(i=!1)}),i):!1}function kv(t){return Cn(t,!1)&&t.includes(":")?t.split(":").length===2:!1}function boe(t){if(Cn(t,!1)&&t.includes(":")){const e=t.split(":");if(e.length===3){const n=e[0]+":"+e[1];return!!e[2]&&kv(n)}}return!1}function xoe(t){function e(n){try{return typeof new URL(n)<"u"}catch{return!1}}try{if(Cn(t,!1)){if(e(t))return!0;const n=RM(t);return e(n)}}catch{}return!1}function voe(t){var e;return(e=t==null?void 0:t.proposer)==null?void 0:e.publicKey}function Eoe(t){return t==null?void 0:t.topic}function Noe(t,e){let n=null;return Cn(t==null?void 0:t.publicKey,!1)||(n=fe("MISSING_OR_INVALID",`${e} controller public key should be a string`)),n}function KI(t){let e=!0;return tc(t)?t.length&&(e=t.every(n=>Cn(n,!1))):e=!1,e}function Coe(t,e,n){let r=null;return tc(e)&&e.length?e.forEach(s=>{r||kv(s)||(r=rn("UNSUPPORTED_CHAINS",`${n}, chain ${s} should be a string and conform to "namespace:chainId" format`))}):kv(t)||(r=rn("UNSUPPORTED_CHAINS",`${n}, chains must be defined as "namespace:chainId" e.g. "eip155:1": {...} in the namespace key OR as an array of CAIP-2 chainIds e.g. eip155: { chains: ["eip155:1", "eip155:5"] }`)),r}function Aoe(t,e,n){let r=null;return Object.entries(t).forEach(([s,i])=>{if(r)return;const a=Coe(s,SM(s,i),`${e} ${n}`);a&&(r=a)}),r}function Toe(t,e){let n=null;return tc(t)?t.forEach(r=>{n||boe(r)||(n=rn("UNSUPPORTED_ACCOUNTS",`${e}, account ${r} should be a string and conform to "namespace:chainId:address" format`))}):n=rn("UNSUPPORTED_ACCOUNTS",`${e}, accounts should be an array of strings conforming to "namespace:chainId:address" format`),n}function Soe(t,e){let n=null;return Object.values(t).forEach(r=>{if(n)return;const s=Toe(r==null?void 0:r.accounts,`${e} namespace`);s&&(n=s)}),n}function koe(t,e){let n=null;return KI(t==null?void 0:t.methods)?KI(t==null?void 0:t.events)||(n=rn("UNSUPPORTED_EVENTS",`${e}, events should be an array of strings or empty array for no events`)):n=rn("UNSUPPORTED_METHODS",`${e}, methods should be an array of strings or empty array for no methods`),n}function EL(t,e){let n=null;return Object.values(t).forEach(r=>{if(n)return;const s=koe(r,`${e}, namespace`);s&&(n=s)}),n}function _oe(t,e,n){let r=null;if(t&&Ml(t)){const s=EL(t,e);s&&(r=s);const i=Aoe(t,e,n);i&&(r=i)}else r=fe("MISSING_OR_INVALID",`${e}, ${n} should be an object with data`);return r}function Y2(t,e){let n=null;if(t&&Ml(t)){const r=EL(t,e);r&&(n=r);const s=Soe(t,e);s&&(n=s)}else n=fe("MISSING_OR_INVALID",`${e}, namespaces should be an object with data`);return n}function NL(t){return Cn(t.protocol,!0)}function Ioe(t,e){let n=!1;return t?t&&tc(t)&&t.length&&t.forEach(r=>{n=NL(r)}):n=!0,n}function Poe(t){return typeof t=="number"}function ms(t){return typeof t<"u"&&typeof t!==null}function Roe(t){return!(!t||typeof t!="object"||!t.code||!TS(t.code,!1)||!t.message||!Cn(t.message,!1))}function joe(t){return!(ir(t)||!Cn(t.method,!1))}function Ooe(t){return!(ir(t)||ir(t.result)&&ir(t.error)||!TS(t.id,!1)||!Cn(t.jsonrpc,!1))}function Doe(t){return!(ir(t)||!Cn(t.name,!1))}function GI(t,e){return!(!kv(e)||!doe(t).includes(e))}function Uoe(t,e,n){return Cn(n,!1)?hoe(t,e).includes(n):!1}function Moe(t,e,n){return Cn(n,!1)?foe(t,e).includes(n):!1}function YI(t,e,n){let r=null;const s=Loe(t),i=Boe(e),a=Object.keys(s),o=Object.keys(i),l=QI(Object.keys(t)),u=QI(Object.keys(e)),d=l.filter(h=>!u.includes(h));return d.length&&(r=fe("NON_CONFORMING_NAMESPACES",`${n} namespaces keys don't satisfy requiredNamespaces.
      Required: ${d.toString()}
      Received: ${Object.keys(e).toString()}`)),Fu(a,o)||(r=fe("NON_CONFORMING_NAMESPACES",`${n} namespaces chains don't satisfy required namespaces.
      Required: ${a.toString()}
      Approved: ${o.toString()}`)),Object.keys(e).forEach(h=>{if(!h.includes(":")||r)return;const f=xm(e[h].accounts);f.includes(h)||(r=fe("NON_CONFORMING_NAMESPACES",`${n} namespaces accounts don't satisfy namespace accounts for ${h}
        Required: ${h}
        Approved: ${f.toString()}`))}),a.forEach(h=>{r||(Fu(s[h].methods,i[h].methods)?Fu(s[h].events,i[h].events)||(r=fe("NON_CONFORMING_NAMESPACES",`${n} namespaces events don't satisfy namespace events for ${h}`)):r=fe("NON_CONFORMING_NAMESPACES",`${n} namespaces methods don't satisfy namespace methods for ${h}`))}),r}function Loe(t){const e={};return Object.keys(t).forEach(n=>{var r;n.includes(":")?e[n]=t[n]:(r=t[n].chains)==null||r.forEach(s=>{e[s]={methods:t[n].methods,events:t[n].events}})}),e}function QI(t){return[...new Set(t.map(e=>e.includes(":")?e.split(":")[0]:e))]}function Boe(t){const e={};return Object.keys(t).forEach(n=>{if(n.includes(":"))e[n]=t[n];else{const r=xm(t[n].accounts);r==null||r.forEach(s=>{e[s]={accounts:t[n].accounts.filter(i=>i.includes(`${s}:`)),methods:t[n].methods,events:t[n].events}})}}),e}function $oe(t,e){return TS(t,!1)&&t<=e.max&&t>=e.min}function JI(){const t=uw();return new Promise(e=>{switch(t){case Js.browser:e(Foe());break;case Js.reactNative:e(Hoe());break;case Js.node:e(Voe());break;default:e(!0)}})}function Foe(){return ym()&&(navigator==null?void 0:navigator.onLine)}async function Hoe(){if(su()&&typeof globalThis<"u"&&globalThis!=null&&globalThis.NetInfo){const t=await(globalThis==null?void 0:globalThis.NetInfo.fetch());return t==null?void 0:t.isConnected}return!0}function Voe(){return!0}function zoe(t){switch(uw()){case Js.browser:Woe(t);break;case Js.reactNative:qoe(t);break}}function Woe(t){!su()&&ym()&&(window.addEventListener("online",()=>t(!0)),window.addEventListener("offline",()=>t(!1)))}function qoe(t){su()&&typeof globalThis<"u"&&globalThis!=null&&globalThis.NetInfo&&(globalThis==null||globalThis.NetInfo.addEventListener(e=>t(e==null?void 0:e.isConnected)))}function Koe(){var t;return ym()&&Hd()?((t=Hd())==null?void 0:t.visibilityState)==="visible":!0}const Q2={};class Zm{static get(e){return Q2[e]}static set(e,n){Q2[e]=n}static delete(e){delete Q2[e]}}function Goe(t){const e=gm.decode(t);if(e.length<33)throw new Error("Too short to contain a public key");return e.slice(1,33)}function Yoe({publicKey:t,signature:e,payload:n}){var r;const s=MA(n.method),i=128|parseInt(((r=n.version)==null?void 0:r.toString())||"4"),a=Zoe(n.address),o=n.era==="00"?new Uint8Array([0]):MA(n.era);if(o.length!==1&&o.length!==2)throw new Error("Invalid era length");const l=parseInt(n.nonce,16),u=new Uint8Array([l&255,l>>8&255]),d=BigInt(`0x${Joe(n.tip)}`),h=ece(d),f=new Uint8Array([0,...t,a,...e,...o,...u,...h,...s]),p=Xoe(f.length+1);return new Uint8Array([...p,i,...f])}function Qoe(t){const e=MA(t),n=Fre.blake2b(e,void 0,32);return"0x"+Buffer.from(n).toString("hex")}function MA(t){return new Uint8Array(t.replace(/^0x/,"").match(/.{1,2}/g).map(e=>parseInt(e,16)))}function Joe(t){return t.startsWith("0x")?t.slice(2):t}function Zoe(t){const e=gm.decode(t)[0];return e===42?0:e===60?2:1}function Xoe(t){if(t<64)return new Uint8Array([t<<2]);if(t<16384){const e=t<<2|1;return new Uint8Array([e&255,e>>8&255])}else if(t<1<<30){const e=t<<2|2;return new Uint8Array([e&255,e>>8&255,e>>16&255,e>>24&255])}else throw new Error("Compact encoding > 2^30 not supported")}function ece(t){if(t<BigInt(1)<<BigInt(6))return new Uint8Array([Number(t<<BigInt(2))]);if(t<BigInt(1)<<BigInt(14)){const e=t<<BigInt(2)|BigInt(1);return new Uint8Array([Number(e&BigInt(255)),Number(e>>BigInt(8)&BigInt(255))])}else if(t<BigInt(1)<<BigInt(30)){const e=t<<BigInt(2)|BigInt(2);return new Uint8Array([Number(e&BigInt(255)),Number(e>>BigInt(8)&BigInt(255)),Number(e>>BigInt(16)&BigInt(255)),Number(e>>BigInt(24)&BigInt(255))])}else throw new Error("BigInt compact encoding not supported > 2^30")}function tce(t){const e=Uint8Array.from(Buffer.from(t.signature,"hex")),n=Goe(t.transaction.address),r=Yoe({publicKey:n,signature:e,payload:t.transaction}),s=Buffer.from(r).toString("hex");return Qoe(s)}const nce="PARSE_ERROR",rce="INVALID_REQUEST",sce="METHOD_NOT_FOUND",ice="INVALID_PARAMS",CL="INTERNAL_ERROR",SS="SERVER_ERROR",ace=[-32700,-32600,-32601,-32602,-32603],Jg={[nce]:{code:-32700,message:"Parse error"},[rce]:{code:-32600,message:"Invalid Request"},[sce]:{code:-32601,message:"Method not found"},[ice]:{code:-32602,message:"Invalid params"},[CL]:{code:-32603,message:"Internal error"},[SS]:{code:-32e3,message:"Server error"}},AL=SS;function oce(t){return ace.includes(t)}function ZI(t){return Object.keys(Jg).includes(t)?Jg[t]:Jg[AL]}function cce(t){const e=Object.values(Jg).find(n=>n.code===t);return e||Jg[AL]}function TL(t,e,n){return t.message.includes("getaddrinfo ENOTFOUND")||t.message.includes("connect ECONNREFUSED")?new Error(`Unavailable ${n} RPC url at ${e}`):t}var SL={},Eo={},XI;function lce(){if(XI)return Eo;XI=1,Object.defineProperty(Eo,"__esModule",{value:!0}),Eo.isBrowserCryptoAvailable=Eo.getSubtleCrypto=Eo.getBrowerCrypto=void 0;function t(){return(globalThis==null?void 0:globalThis.crypto)||(globalThis==null?void 0:globalThis.msCrypto)||{}}Eo.getBrowerCrypto=t;function e(){const r=t();return r.subtle||r.webkitSubtle}Eo.getSubtleCrypto=e;function n(){return!!t()&&!!e()}return Eo.isBrowserCryptoAvailable=n,Eo}var No={},eP;function uce(){if(eP)return No;eP=1,Object.defineProperty(No,"__esModule",{value:!0}),No.isBrowser=No.isNode=No.isReactNative=void 0;function t(){return typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"}No.isReactNative=t;function e(){return typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"}No.isNode=e;function n(){return!t()&&!e()}return No.isBrowser=n,No}(function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=sw;e.__exportStar(lce(),t),e.__exportStar(uce(),t)})(SL);function Ra(t=3){const e=Date.now()*Math.pow(10,t),n=Math.floor(Math.random()*Math.pow(10,t));return e+n}function Wu(t=6){return BigInt(Ra(t))}function Cl(t,e,n){return{id:n||Ra(),jsonrpc:"2.0",method:t,params:e}}function J1(t,e){return{id:t,jsonrpc:"2.0",result:e}}function Z1(t,e,n){return{id:t,jsonrpc:"2.0",error:dce(e)}}function dce(t,e){return typeof t>"u"?ZI(CL):(typeof t=="string"&&(t=Object.assign(Object.assign({},ZI(SS)),{message:t})),oce(t.code)&&(t=cce(t.code)),t)}let hce=class{},fce=class extends hce{constructor(){super()}},pce=class extends fce{constructor(e){super()}};const mce="^https?:",gce="^wss?:";function yce(t){const e=t.match(new RegExp(/^\w+:/,"gi"));if(!(!e||!e.length))return e[0]}function kL(t,e){const n=yce(t);return typeof n>"u"?!1:new RegExp(e).test(n)}function tP(t){return kL(t,mce)}function nP(t){return kL(t,gce)}function wce(t){return new RegExp("wss?://localhost(:d{2,5})?").test(t)}function _L(t){return typeof t=="object"&&"id"in t&&"jsonrpc"in t&&t.jsonrpc==="2.0"}function kS(t){return _L(t)&&"method"in t}function X1(t){return _L(t)&&(ja(t)||xi(t))}function ja(t){return"result"in t}function xi(t){return"error"in t}let Ri=class extends pce{constructor(e){super(e),this.events=new Pi.EventEmitter,this.hasRegisteredEventListeners=!1,this.connection=this.setConnection(e),this.connection.connected&&this.registerEventListeners()}async connect(e=this.connection){await this.open(e)}async disconnect(){await this.close()}on(e,n){this.events.on(e,n)}once(e,n){this.events.once(e,n)}off(e,n){this.events.off(e,n)}removeListener(e,n){this.events.removeListener(e,n)}async request(e,n){return this.requestStrict(Cl(e.method,e.params||[],e.id||Wu().toString()),n)}async requestStrict(e,n){return new Promise(async(r,s)=>{if(!this.connection.connected)try{await this.open()}catch(i){s(i)}this.events.on(`${e.id}`,i=>{xi(i)?s(i.error):r(i.result)});try{await this.connection.send(e,n)}catch(i){s(i)}})}setConnection(e=this.connection){return e}onPayload(e){this.events.emit("payload",e),X1(e)?this.events.emit(`${e.id}`,e):this.events.emit("message",{type:e.method,data:e.params})}onClose(e){e&&e.code===3e3&&this.events.emit("error",new Error(`WebSocket connection closed abnormally with code: ${e.code} ${e.reason?`(${e.reason})`:""}`)),this.events.emit("disconnect")}async open(e=this.connection){this.connection===e&&this.connection.connected||(this.connection.connected&&this.close(),typeof e=="string"&&(await this.connection.open(e),e=this.connection),this.connection=this.setConnection(e),await this.connection.open(),this.registerEventListeners(),this.events.emit("connect"))}async close(){await this.connection.close()}registerEventListeners(){this.hasRegisteredEventListeners||(this.connection.on("payload",e=>this.onPayload(e)),this.connection.on("close",e=>this.onClose(e)),this.connection.on("error",e=>this.events.emit("error",e)),this.connection.on("register_error",e=>this.onClose()),this.hasRegisteredEventListeners=!0)}};const bce=()=>typeof WebSocket<"u"?WebSocket:typeof globalThis<"u"&&typeof globalThis.WebSocket<"u"?globalThis.WebSocket:typeof window<"u"&&typeof window.WebSocket<"u"?window.WebSocket:typeof self<"u"&&typeof self.WebSocket<"u"?self.WebSocket:require("ws"),xce=()=>typeof WebSocket<"u"||typeof globalThis<"u"&&typeof globalThis.WebSocket<"u"||typeof window<"u"&&typeof window.WebSocket<"u"||typeof self<"u"&&typeof self.WebSocket<"u",rP=t=>t.split("?")[0],sP=10,vce=bce();let Ece=class{constructor(e){if(this.url=e,this.events=new Pi.EventEmitter,this.registering=!1,!nP(e))throw new Error(`Provided URL is not compatible with WebSocket connection: ${e}`);this.url=e}get connected(){return typeof this.socket<"u"}get connecting(){return this.registering}on(e,n){this.events.on(e,n)}once(e,n){this.events.once(e,n)}off(e,n){this.events.off(e,n)}removeListener(e,n){this.events.removeListener(e,n)}async open(e=this.url){await this.register(e)}async close(){return new Promise((e,n)=>{if(typeof this.socket>"u"){n(new Error("Connection already closed"));return}this.socket.onclose=r=>{this.onClose(r),e()},this.socket.close()})}async send(e){typeof this.socket>"u"&&(this.socket=await this.register());try{this.socket.send(dc(e))}catch(n){this.onError(e.id,n)}}register(e=this.url){if(!nP(e))throw new Error(`Provided URL is not compatible with WebSocket connection: ${e}`);if(this.registering){const n=this.events.getMaxListeners();return(this.events.listenerCount("register_error")>=n||this.events.listenerCount("open")>=n)&&this.events.setMaxListeners(n+1),new Promise((r,s)=>{this.events.once("register_error",i=>{this.resetMaxListeners(),s(i)}),this.events.once("open",()=>{if(this.resetMaxListeners(),typeof this.socket>"u")return s(new Error("WebSocket connection is missing or invalid"));r(this.socket)})})}return this.url=e,this.registering=!0,new Promise((n,r)=>{const s=SL.isReactNative()?void 0:{rejectUnauthorized:!wce(e)},i=new vce(e,[],s);xce()?i.onerror=a=>{const o=a;r(this.emitError(o.error))}:i.on("error",a=>{r(this.emitError(a))}),i.onopen=()=>{this.onOpen(i),n(i)}})}onOpen(e){e.onmessage=n=>this.onPayload(n),e.onclose=n=>this.onClose(n),this.socket=e,this.registering=!1,this.events.emit("open")}onClose(e){this.socket=void 0,this.registering=!1,this.events.emit("close",e)}onPayload(e){if(typeof e.data>"u")return;const n=typeof e.data=="string"?Fd(e.data):e.data;this.events.emit("payload",n)}onError(e,n){const r=this.parseError(n),s=r.message||r.toString(),i=Z1(e,s);this.events.emit("payload",i)}parseError(e,n=this.url){return TL(e,rP(n),"WS")}resetMaxListeners(){this.events.getMaxListeners()>sP&&this.events.setMaxListeners(sP)}emitError(e){const n=this.parseError(new Error((e==null?void 0:e.message)||`WebSocket connection failed for host: ${rP(this.url)}`));return this.events.emit("register_error",n),n}};var Nce={};const IL="wc",PL=2,LA="core",lo=`${IL}@2:${LA}:`,Cce={logger:"error"},Ace={database:":memory:"},Tce="crypto",iP="client_ed25519_seed",Sce=he.ONE_DAY,kce="keychain",_ce="0.3",Ice="messages",Pce="0.3",aP=he.SIX_HOURS,Rce="publisher",RL="irn",jce="error",jL="wss://relay.walletconnect.org",Oce="relayer",zn={message:"relayer_message",message_ack:"relayer_message_ack",connect:"relayer_connect",disconnect:"relayer_disconnect",error:"relayer_error",connection_stalled:"relayer_connection_stalled",transport_closed:"relayer_transport_closed",publish:"relayer_publish"},Dce="_subscription",li={payload:"payload",connect:"connect",disconnect:"disconnect",error:"error"},Uce=.1,BA="2.21.3",Xt={link_mode:"link_mode",relay:"relay"},ux={inbound:"inbound",outbound:"outbound"},Mce="0.3",Lce="WALLETCONNECT_CLIENT_ID",oP="WALLETCONNECT_LINK_MODE_APPS",$s={created:"subscription_created",deleted:"subscription_deleted",expired:"subscription_expired",disabled:"subscription_disabled",sync:"subscription_sync",resubscribed:"subscription_resubscribed"},Bce="subscription",$ce="0.3",Fce="pairing",Hce="0.3",Xm={wc_pairingDelete:{req:{ttl:he.ONE_DAY,prompt:!1,tag:1e3},res:{ttl:he.ONE_DAY,prompt:!1,tag:1001}},wc_pairingPing:{req:{ttl:he.THIRTY_SECONDS,prompt:!1,tag:1002},res:{ttl:he.THIRTY_SECONDS,prompt:!1,tag:1003}},unregistered_method:{req:{ttl:he.ONE_DAY,prompt:!1,tag:0},res:{ttl:he.ONE_DAY,prompt:!1,tag:0}}},Tu={create:"pairing_create",expire:"pairing_expire",delete:"pairing_delete",ping:"pairing_ping"},Mi={created:"history_created",updated:"history_updated",deleted:"history_deleted",sync:"history_sync"},Vce="history",zce="0.3",Wce="expirer",hi={created:"expirer_created",deleted:"expirer_deleted",expired:"expirer_expired",sync:"expirer_sync"},qce="0.3",Kce="verify-api",Gce="https://verify.walletconnect.com",OL="https://verify.walletconnect.org",Zg=OL,Yce=`${Zg}/v3`,Qce=[Gce,OL],Jce="echo",Zce="https://echo.walletconnect.com",Ia={pairing_started:"pairing_started",pairing_uri_validation_success:"pairing_uri_validation_success",pairing_uri_not_expired:"pairing_uri_not_expired",store_new_pairing:"store_new_pairing",subscribing_pairing_topic:"subscribing_pairing_topic",subscribe_pairing_topic_success:"subscribe_pairing_topic_success",existing_pairing:"existing_pairing",pairing_not_expired:"pairing_not_expired",emit_inactive_pairing:"emit_inactive_pairing",emit_session_proposal:"emit_session_proposal",subscribing_to_pairing_topic:"subscribing_to_pairing_topic"},So={no_wss_connection:"no_wss_connection",no_internet_connection:"no_internet_connection",malformed_pairing_uri:"malformed_pairing_uri",active_pairing_already_exists:"active_pairing_already_exists",subscribe_pairing_topic_failure:"subscribe_pairing_topic_failure",pairing_expired:"pairing_expired",proposal_expired:"proposal_expired",proposal_listener_not_found:"proposal_listener_not_found"},Li={session_approve_started:"session_approve_started",proposal_not_expired:"proposal_not_expired",session_namespaces_validation_success:"session_namespaces_validation_success",create_session_topic:"create_session_topic",subscribing_session_topic:"subscribing_session_topic",subscribe_session_topic_success:"subscribe_session_topic_success",publishing_session_approve:"publishing_session_approve",session_approve_publish_success:"session_approve_publish_success",store_session:"store_session",publishing_session_settle:"publishing_session_settle",session_settle_publish_success:"session_settle_publish_success"},du={no_internet_connection:"no_internet_connection",no_wss_connection:"no_wss_connection",proposal_expired:"proposal_expired",subscribe_session_topic_failure:"subscribe_session_topic_failure",session_approve_publish_failure:"session_approve_publish_failure",session_settle_publish_failure:"session_settle_publish_failure",session_approve_namespace_validation_failure:"session_approve_namespace_validation_failure",proposal_not_found:"proposal_not_found"},hu={authenticated_session_approve_started:"authenticated_session_approve_started",create_authenticated_session_topic:"create_authenticated_session_topic",cacaos_verified:"cacaos_verified",store_authenticated_session:"store_authenticated_session",subscribing_authenticated_session_topic:"subscribing_authenticated_session_topic",subscribe_authenticated_session_topic_success:"subscribe_authenticated_session_topic_success",publishing_authenticated_session_approve:"publishing_authenticated_session_approve"},eg={no_internet_connection:"no_internet_connection",invalid_cacao:"invalid_cacao",subscribe_authenticated_session_topic_failure:"subscribe_authenticated_session_topic_failure",authenticated_session_approve_publish_failure:"authenticated_session_approve_publish_failure",authenticated_session_pending_request_not_found:"authenticated_session_pending_request_not_found"},Xce=.1,ele="event-client",tle=86400,nle="https://pulse.walletconnect.org/batch";function rle(t,e){if(t.length>=255)throw new TypeError("Alphabet too long");for(var n=new Uint8Array(256),r=0;r<n.length;r++)n[r]=255;for(var s=0;s<t.length;s++){var i=t.charAt(s),a=i.charCodeAt(0);if(n[a]!==255)throw new TypeError(i+" is ambiguous");n[a]=s}var o=t.length,l=t.charAt(0),u=Math.log(o)/Math.log(256),d=Math.log(256)/Math.log(o);function h(g){if(g instanceof Uint8Array||(ArrayBuffer.isView(g)?g=new Uint8Array(g.buffer,g.byteOffset,g.byteLength):Array.isArray(g)&&(g=Uint8Array.from(g))),!(g instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(g.length===0)return"";for(var m=0,y=0,b=0,w=g.length;b!==w&&g[b]===0;)b++,m++;for(var x=(w-b)*d+1>>>0,A=new Uint8Array(x);b!==w;){for(var T=g[b],j=0,P=x-1;(T!==0||j<y)&&P!==-1;P--,j++)T+=256*A[P]>>>0,A[P]=T%o>>>0,T=T/o>>>0;if(T!==0)throw new Error("Non-zero carry");y=j,b++}for(var S=x-y;S!==x&&A[S]===0;)S++;for(var E=l.repeat(m);S<x;++S)E+=t.charAt(A[S]);return E}function f(g){if(typeof g!="string")throw new TypeError("Expected String");if(g.length===0)return new Uint8Array;var m=0;if(g[m]!==" "){for(var y=0,b=0;g[m]===l;)y++,m++;for(var w=(g.length-m)*u+1>>>0,x=new Uint8Array(w);g[m];){var A=n[g.charCodeAt(m)];if(A===255)return;for(var T=0,j=w-1;(A!==0||T<b)&&j!==-1;j--,T++)A+=o*x[j]>>>0,x[j]=A%256>>>0,A=A/256>>>0;if(A!==0)throw new Error("Non-zero carry");b=T,m++}if(g[m]!==" "){for(var P=w-b;P!==w&&x[P]===0;)P++;for(var S=new Uint8Array(y+(w-P)),E=y;P!==w;)S[E++]=x[P++];return S}}}function p(g){var m=f(g);if(m)return m;throw new Error(`Non-${e} character`)}return{encode:h,decodeUnsafe:f,decode:p}}var sle=rle,ile=sle;const DL=t=>{if(t instanceof Uint8Array&&t.constructor.name==="Uint8Array")return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")},ale=t=>new TextEncoder().encode(t),ole=t=>new TextDecoder().decode(t);class cle{constructor(e,n,r){this.name=e,this.prefix=n,this.baseEncode=r}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class lle{constructor(e,n,r){if(this.name=e,this.prefix=n,n.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=n.codePointAt(0),this.baseDecode=r}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return UL(this,e)}}class ule{constructor(e){this.decoders=e}or(e){return UL(this,e)}decode(e){const n=e[0],r=this.decoders[n];if(r)return r.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const UL=(t,e)=>new ule({...t.decoders||{[t.prefix]:t},...e.decoders||{[e.prefix]:e}});class dle{constructor(e,n,r,s){this.name=e,this.prefix=n,this.baseEncode=r,this.baseDecode=s,this.encoder=new cle(e,n,r),this.decoder=new lle(e,n,s)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}const eE=({name:t,prefix:e,encode:n,decode:r})=>new dle(t,e,n,r),pw=({prefix:t,name:e,alphabet:n})=>{const{encode:r,decode:s}=ile(n,e);return eE({prefix:t,name:e,encode:r,decode:i=>DL(s(i))})},hle=(t,e,n,r)=>{const s={};for(let d=0;d<e.length;++d)s[e[d]]=d;let i=t.length;for(;t[i-1]==="=";)--i;const a=new Uint8Array(i*n/8|0);let o=0,l=0,u=0;for(let d=0;d<i;++d){const h=s[t[d]];if(h===void 0)throw new SyntaxError(`Non-${r} character`);l=l<<n|h,o+=n,o>=8&&(o-=8,a[u++]=255&l>>o)}if(o>=n||255&l<<8-o)throw new SyntaxError("Unexpected end of data");return a},fle=(t,e,n)=>{const r=e[e.length-1]==="=",s=(1<<n)-1;let i="",a=0,o=0;for(let l=0;l<t.length;++l)for(o=o<<8|t[l],a+=8;a>n;)a-=n,i+=e[s&o>>a];if(a&&(i+=e[s&o<<n-a]),r)for(;i.length*n&7;)i+="=";return i},mr=({name:t,prefix:e,bitsPerChar:n,alphabet:r})=>eE({prefix:e,name:t,encode(s){return fle(s,r,n)},decode(s){return hle(s,r,n,t)}}),ple=eE({prefix:"\0",name:"identity",encode:t=>ole(t),decode:t=>ale(t)});var mle=Object.freeze({__proto__:null,identity:ple});const gle=mr({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});var yle=Object.freeze({__proto__:null,base2:gle});const wle=mr({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var ble=Object.freeze({__proto__:null,base8:wle});const xle=pw({prefix:"9",name:"base10",alphabet:"0123456789"});var vle=Object.freeze({__proto__:null,base10:xle});const Ele=mr({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),Nle=mr({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var Cle=Object.freeze({__proto__:null,base16:Ele,base16upper:Nle});const Ale=mr({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),Tle=mr({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),Sle=mr({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),kle=mr({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),_le=mr({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),Ile=mr({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),Ple=mr({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),Rle=mr({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),jle=mr({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var Ole=Object.freeze({__proto__:null,base32:Ale,base32upper:Tle,base32pad:Sle,base32padupper:kle,base32hex:_le,base32hexupper:Ile,base32hexpad:Ple,base32hexpadupper:Rle,base32z:jle});const Dle=pw({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),Ule=pw({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var Mle=Object.freeze({__proto__:null,base36:Dle,base36upper:Ule});const Lle=pw({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),Ble=pw({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var $le=Object.freeze({__proto__:null,base58btc:Lle,base58flickr:Ble});const Fle=mr({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),Hle=mr({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),Vle=mr({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),zle=mr({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var Wle=Object.freeze({__proto__:null,base64:Fle,base64pad:Hle,base64url:Vle,base64urlpad:zle});const ML=Array.from(""),qle=ML.reduce((t,e,n)=>(t[n]=e,t),[]),Kle=ML.reduce((t,e,n)=>(t[e.codePointAt(0)]=n,t),[]);function Gle(t){return t.reduce((e,n)=>(e+=qle[n],e),"")}function Yle(t){const e=[];for(const n of t){const r=Kle[n.codePointAt(0)];if(r===void 0)throw new Error(`Non-base256emoji character: ${n}`);e.push(r)}return new Uint8Array(e)}const Qle=eE({prefix:"",name:"base256emoji",encode:Gle,decode:Yle});var Jle=Object.freeze({__proto__:null,base256emoji:Qle}),Zle=LL,cP=128,Xle=-128,eue=Math.pow(2,31);function LL(t,e,n){e=e||[],n=n||0;for(var r=n;t>=eue;)e[n++]=t&255|cP,t/=128;for(;t&Xle;)e[n++]=t&255|cP,t>>>=7;return e[n]=t|0,LL.bytes=n-r+1,e}var tue=$A,nue=128,lP=127;function $A(t,r){var n=0,r=r||0,s=0,i=r,a,o=t.length;do{if(i>=o)throw $A.bytes=0,new RangeError("Could not decode varint");a=t[i++],n+=s<28?(a&lP)<<s:(a&lP)*Math.pow(2,s),s+=7}while(a>=nue);return $A.bytes=i-r,n}var rue=Math.pow(2,7),sue=Math.pow(2,14),iue=Math.pow(2,21),aue=Math.pow(2,28),oue=Math.pow(2,35),cue=Math.pow(2,42),lue=Math.pow(2,49),uue=Math.pow(2,56),due=Math.pow(2,63),hue=function(t){return t<rue?1:t<sue?2:t<iue?3:t<aue?4:t<oue?5:t<cue?6:t<lue?7:t<uue?8:t<due?9:10},fue={encode:Zle,decode:tue,encodingLength:hue},BL=fue;const uP=(t,e,n=0)=>(BL.encode(t,e,n),e),dP=t=>BL.encodingLength(t),FA=(t,e)=>{const n=e.byteLength,r=dP(t),s=r+dP(n),i=new Uint8Array(s+n);return uP(t,i,0),uP(n,i,r),i.set(e,s),new pue(t,n,e,i)};class pue{constructor(e,n,r,s){this.code=e,this.size=n,this.digest=r,this.bytes=s}}const $L=({name:t,code:e,encode:n})=>new mue(t,e,n);class mue{constructor(e,n,r){this.name=e,this.code=n,this.encode=r}digest(e){if(e instanceof Uint8Array){const n=this.encode(e);return n instanceof Uint8Array?FA(this.code,n):n.then(r=>FA(this.code,r))}else throw Error("Unknown type, must be binary type")}}const FL=t=>async e=>new Uint8Array(await crypto.subtle.digest(t,e)),gue=$L({name:"sha2-256",code:18,encode:FL("SHA-256")}),yue=$L({name:"sha2-512",code:19,encode:FL("SHA-512")});var wue=Object.freeze({__proto__:null,sha256:gue,sha512:yue});const HL=0,bue="identity",VL=DL,xue=t=>FA(HL,VL(t)),vue={code:HL,name:bue,encode:VL,digest:xue};var Eue=Object.freeze({__proto__:null,identity:vue});new TextEncoder,new TextDecoder;const hP={...mle,...yle,...ble,...vle,...Cle,...Ole,...Mle,...$le,...Wle,...Jle};({...wue,...Eue});function zL(t){return globalThis.Buffer!=null?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):t}function Nue(t=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?zL(globalThis.Buffer.allocUnsafe(t)):new Uint8Array(t)}function WL(t,e,n,r){return{name:t,prefix:e,encoder:{name:t,prefix:e,encode:n},decoder:{decode:r}}}const fP=WL("utf8","u",t=>"u"+new TextDecoder("utf8").decode(t),t=>new TextEncoder().encode(t.substring(1))),J2=WL("ascii","a",t=>{let e="a";for(let n=0;n<t.length;n++)e+=String.fromCharCode(t[n]);return e},t=>{t=t.substring(1);const e=Nue(t.length);for(let n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}),Cue={utf8:fP,"utf-8":fP,hex:hP.base16,latin1:J2,ascii:J2,binary:J2,...hP};function Aue(t,e="utf8"){const n=Cue[e];if(!n)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?zL(globalThis.Buffer.from(t,"utf-8")):n.decoder.decode(`${n.prefix}${t}`)}var Tue=Object.defineProperty,Sue=(t,e,n)=>e in t?Tue(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Aa=(t,e,n)=>Sue(t,typeof e!="symbol"?e+"":e,n);class kue{constructor(e,n){this.core=e,this.logger=n,Aa(this,"keychain",new Map),Aa(this,"name",kce),Aa(this,"version",_ce),Aa(this,"initialized",!1),Aa(this,"storagePrefix",lo),Aa(this,"init",async()=>{if(!this.initialized){const r=await this.getKeyChain();typeof r<"u"&&(this.keychain=r),this.initialized=!0}}),Aa(this,"has",r=>(this.isInitialized(),this.keychain.has(r))),Aa(this,"set",async(r,s)=>{this.isInitialized(),this.keychain.set(r,s),await this.persist()}),Aa(this,"get",r=>{this.isInitialized();const s=this.keychain.get(r);if(typeof s>"u"){const{message:i}=fe("NO_MATCHING_KEY",`${this.name}: ${r}`);throw new Error(i)}return s}),Aa(this,"del",async r=>{this.isInitialized(),this.keychain.delete(r),await this.persist()}),this.core=e,this.logger=Ur(n,this.name)}get context(){return Us(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}async setKeyChain(e){await this.core.storage.setItem(this.storageKey,AA(e))}async getKeyChain(){const e=await this.core.storage.getItem(this.storageKey);return typeof e<"u"?TA(e):void 0}async persist(){await this.setKeyChain(this.keychain)}isInitialized(){if(!this.initialized){const{message:e}=fe("NOT_INITIALIZED",this.name);throw new Error(e)}}}var _ue=Object.defineProperty,Iue=(t,e,n)=>e in t?_ue(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Xn=(t,e,n)=>Iue(t,typeof e!="symbol"?e+"":e,n);class Pue{constructor(e,n,r){this.core=e,this.logger=n,Xn(this,"name",Tce),Xn(this,"keychain"),Xn(this,"randomSessionIdentifier",UA()),Xn(this,"initialized",!1),Xn(this,"init",async()=>{this.initialized||(await this.keychain.init(),this.initialized=!0)}),Xn(this,"hasKeys",s=>(this.isInitialized(),this.keychain.has(s))),Xn(this,"getClientId",async()=>{this.isInitialized();const s=await this.getClientSeed(),i=q3(s);return zU(i.publicKey)}),Xn(this,"generateKeyPair",()=>{this.isInitialized();const s=Wae();return this.setPrivateKey(s.publicKey,s.privateKey)}),Xn(this,"signJWT",async s=>{this.isInitialized();const i=await this.getClientSeed(),a=q3(i),o=this.randomSessionIdentifier;return await Jee(o,s,Sce,a)}),Xn(this,"generateSharedKey",(s,i,a)=>{this.isInitialized();const o=this.getPrivateKey(s),l=qae(o,i);return this.setSymKey(l,a)}),Xn(this,"setSymKey",async(s,i)=>{this.isInitialized();const a=i||lx(s);return await this.keychain.set(a,s),a}),Xn(this,"deleteKeyPair",async s=>{this.isInitialized(),await this.keychain.del(s)}),Xn(this,"deleteSymKey",async s=>{this.isInitialized(),await this.keychain.del(s)}),Xn(this,"encode",async(s,i,a)=>{this.isInitialized();const o=vL(a),l=dc(i);if($I(o))return Yae(l,a==null?void 0:a.encoding);if(BI(o)){const f=o.senderPublicKey,p=o.receiverPublicKey;s=await this.generateSharedKey(f,p)}const u=this.getSymKey(s),{type:d,senderPublicKey:h}=o;return Kae({type:d,symKey:u,message:l,senderPublicKey:h,encoding:a==null?void 0:a.encoding})}),Xn(this,"decode",async(s,i,a)=>{this.isInitialized();const o=Jae(i,a);if($I(o)){const l=Qae(i,a==null?void 0:a.encoding);return Fd(l)}if(BI(o)){const l=o.receiverPublicKey,u=o.senderPublicKey;s=await this.generateSharedKey(l,u)}try{const l=this.getSymKey(s),u=Gae({symKey:l,encoded:i,encoding:a==null?void 0:a.encoding});return Fd(u)}catch(l){this.logger.error(`Failed to decode message from topic: '${s}', clientId: '${await this.getClientId()}'`),this.logger.error(l)}}),Xn(this,"getPayloadType",(s,i=sa)=>{const a=ly({encoded:s,encoding:i});return Wd(a.type)}),Xn(this,"getPayloadSenderPublicKey",(s,i=sa)=>{const a=ly({encoded:s,encoding:i});return a.senderPublicKey?Ps(a.senderPublicKey,es):void 0}),this.core=e,this.logger=Ur(n,this.name),this.keychain=r||new kue(this.core,this.logger)}get context(){return Us(this.logger)}async setPrivateKey(e,n){return await this.keychain.set(e,n),e}getPrivateKey(e){return this.keychain.get(e)}async getClientSeed(){let e="";try{e=this.keychain.get(iP)}catch{e=UA(),await this.keychain.set(iP,e)}return Aue(e,"base16")}getSymKey(e){return this.keychain.get(e)}isInitialized(){if(!this.initialized){const{message:e}=fe("NOT_INITIALIZED",this.name);throw new Error(e)}}}var Rue=Object.defineProperty,jue=Object.defineProperties,Oue=Object.getOwnPropertyDescriptors,pP=Object.getOwnPropertySymbols,Due=Object.prototype.hasOwnProperty,Uue=Object.prototype.propertyIsEnumerable,HA=(t,e,n)=>e in t?Rue(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Mue=(t,e)=>{for(var n in e||(e={}))Due.call(e,n)&&HA(t,n,e[n]);if(pP)for(var n of pP(e))Uue.call(e,n)&&HA(t,n,e[n]);return t},Lue=(t,e)=>jue(t,Oue(e)),Ls=(t,e,n)=>HA(t,typeof e!="symbol"?e+"":e,n);class Bue extends YJ{constructor(e,n){super(e,n),this.logger=e,this.core=n,Ls(this,"messages",new Map),Ls(this,"messagesWithoutClientAck",new Map),Ls(this,"name",Ice),Ls(this,"version",Pce),Ls(this,"initialized",!1),Ls(this,"storagePrefix",lo),Ls(this,"init",async()=>{if(!this.initialized){this.logger.trace("Initialized");try{const r=await this.getRelayerMessages();typeof r<"u"&&(this.messages=r);const s=await this.getRelayerMessagesWithoutClientAck();typeof s<"u"&&(this.messagesWithoutClientAck=s),this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",size:this.messages.size})}catch(r){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(r)}finally{this.initialized=!0}}}),Ls(this,"set",async(r,s,i)=>{this.isInitialized();const a=Wa(s);let o=this.messages.get(r);if(typeof o>"u"&&(o={}),typeof o[a]<"u")return a;if(o[a]=s,this.messages.set(r,o),i===ux.inbound){const l=this.messagesWithoutClientAck.get(r)||{};this.messagesWithoutClientAck.set(r,Lue(Mue({},l),{[a]:s}))}return await this.persist(),a}),Ls(this,"get",r=>{this.isInitialized();let s=this.messages.get(r);return typeof s>"u"&&(s={}),s}),Ls(this,"getWithoutAck",r=>{this.isInitialized();const s={};for(const i of r){const a=this.messagesWithoutClientAck.get(i)||{};s[i]=Object.values(a)}return s}),Ls(this,"has",(r,s)=>{this.isInitialized();const i=this.get(r),a=Wa(s);return typeof i[a]<"u"}),Ls(this,"ack",async(r,s)=>{this.isInitialized();const i=this.messagesWithoutClientAck.get(r);if(typeof i>"u")return;const a=Wa(s);delete i[a],Object.keys(i).length===0?this.messagesWithoutClientAck.delete(r):this.messagesWithoutClientAck.set(r,i),await this.persist()}),Ls(this,"del",async r=>{this.isInitialized(),this.messages.delete(r),this.messagesWithoutClientAck.delete(r),await this.persist()}),this.logger=Ur(e,this.name),this.core=n}get context(){return Us(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get storageKeyWithoutClientAck(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name+"_withoutClientAck"}async setRelayerMessages(e){await this.core.storage.setItem(this.storageKey,AA(e))}async setRelayerMessagesWithoutClientAck(e){await this.core.storage.setItem(this.storageKeyWithoutClientAck,AA(e))}async getRelayerMessages(){const e=await this.core.storage.getItem(this.storageKey);return typeof e<"u"?TA(e):void 0}async getRelayerMessagesWithoutClientAck(){const e=await this.core.storage.getItem(this.storageKeyWithoutClientAck);return typeof e<"u"?TA(e):void 0}async persist(){await this.setRelayerMessages(this.messages),await this.setRelayerMessagesWithoutClientAck(this.messagesWithoutClientAck)}isInitialized(){if(!this.initialized){const{message:e}=fe("NOT_INITIALIZED",this.name);throw new Error(e)}}}var $ue=Object.defineProperty,Fue=Object.defineProperties,Hue=Object.getOwnPropertyDescriptors,mP=Object.getOwnPropertySymbols,Vue=Object.prototype.hasOwnProperty,zue=Object.prototype.propertyIsEnumerable,VA=(t,e,n)=>e in t?$ue(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,bb=(t,e)=>{for(var n in e||(e={}))Vue.call(e,n)&&VA(t,n,e[n]);if(mP)for(var n of mP(e))zue.call(e,n)&&VA(t,n,e[n]);return t},Z2=(t,e)=>Fue(t,Hue(e)),Bi=(t,e,n)=>VA(t,typeof e!="symbol"?e+"":e,n);class Wue extends QJ{constructor(e,n){super(e,n),this.relayer=e,this.logger=n,Bi(this,"events",new Pi.EventEmitter),Bi(this,"name",Rce),Bi(this,"queue",new Map),Bi(this,"publishTimeout",he.toMiliseconds(he.ONE_MINUTE)),Bi(this,"initialPublishTimeout",he.toMiliseconds(he.ONE_SECOND*15)),Bi(this,"needsTransportRestart",!1),Bi(this,"publish",async(r,s,i)=>{var a;this.logger.debug("Publishing Payload"),this.logger.trace({type:"method",method:"publish",params:{topic:r,message:s,opts:i}});const o=(i==null?void 0:i.ttl)||aP,l=Sv(i),u=(i==null?void 0:i.prompt)||!1,d=(i==null?void 0:i.tag)||0,h=(i==null?void 0:i.id)||Wu().toString(),f={topic:r,message:s,opts:{ttl:o,relay:l,prompt:u,tag:d,id:h,attestation:i==null?void 0:i.attestation,tvf:i==null?void 0:i.tvf}},p=`Failed to publish payload, please try again. id:${h} tag:${d}`;try{const g=new Promise(async m=>{const y=({id:w})=>{f.opts.id===w&&(this.removeRequestFromQueue(w),this.relayer.events.removeListener(zn.publish,y),m(f))};this.relayer.events.on(zn.publish,y);const b=Nl(new Promise((w,x)=>{this.rpcPublish({topic:r,message:s,ttl:o,prompt:u,tag:d,id:h,attestation:i==null?void 0:i.attestation,tvf:i==null?void 0:i.tvf}).then(w).catch(A=>{this.logger.warn(A,A==null?void 0:A.message),x(A)})}),this.initialPublishTimeout,`Failed initial publish, retrying.... id:${h} tag:${d}`);try{await b,this.events.removeListener(zn.publish,y)}catch(w){this.queue.set(h,Z2(bb({},f),{attempt:1})),this.logger.warn(w,w==null?void 0:w.message)}});this.logger.trace({type:"method",method:"publish",params:{id:h,topic:r,message:s,opts:i}}),await Nl(g,this.publishTimeout,p)}catch(g){if(this.logger.debug("Failed to Publish Payload"),this.logger.error(g),(a=i==null?void 0:i.internal)!=null&&a.throwOnFailedPublish)throw g}finally{this.queue.delete(h)}}),Bi(this,"on",(r,s)=>{this.events.on(r,s)}),Bi(this,"once",(r,s)=>{this.events.once(r,s)}),Bi(this,"off",(r,s)=>{this.events.off(r,s)}),Bi(this,"removeListener",(r,s)=>{this.events.removeListener(r,s)}),this.relayer=e,this.logger=Ur(n,this.name),this.registerEventListeners()}get context(){return Us(this.logger)}async rpcPublish(e){var n,r,s,i;const{topic:a,message:o,ttl:l=aP,prompt:u,tag:d,id:h,attestation:f,tvf:p}=e,g={method:Cg(Sv().protocol).publish,params:bb({topic:a,message:o,ttl:l,prompt:u,tag:d,attestation:f},p),id:h};ir((n=g.params)==null?void 0:n.prompt)&&((r=g.params)==null||delete r.prompt),ir((s=g.params)==null?void 0:s.tag)&&((i=g.params)==null||delete i.tag),this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"message",direction:"outgoing",request:g});const m=await this.relayer.request(g);return this.relayer.events.emit(zn.publish,e),this.logger.debug("Successfully Published Payload"),m}removeRequestFromQueue(e){this.queue.delete(e)}checkQueue(){this.queue.forEach(async(e,n)=>{const r=e.attempt+1;this.queue.set(n,Z2(bb({},e),{attempt:r}));const{topic:s,message:i,opts:a,attestation:o}=e;this.logger.warn({},`Publisher: queue->publishing: ${e.opts.id}, tag: ${e.opts.tag}, attempt: ${r}`),await this.rpcPublish(Z2(bb({},e),{topic:s,message:i,ttl:a.ttl,prompt:a.prompt,tag:a.tag,id:a.id,attestation:o,tvf:a.tvf})),this.logger.warn({},`Publisher: queue->published: ${e.opts.id}`)})}registerEventListeners(){this.relayer.core.heartbeat.on(uh.pulse,()=>{if(this.needsTransportRestart){this.needsTransportRestart=!1,this.relayer.events.emit(zn.connection_stalled);return}this.checkQueue()}),this.relayer.on(zn.message_ack,e=>{this.removeRequestFromQueue(e.id.toString())})}}var que=Object.defineProperty,Kue=(t,e,n)=>e in t?que(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,_h=(t,e,n)=>Kue(t,typeof e!="symbol"?e+"":e,n);class Gue{constructor(){_h(this,"map",new Map),_h(this,"set",(e,n)=>{const r=this.get(e);this.exists(e,n)||this.map.set(e,[...r,n])}),_h(this,"get",e=>this.map.get(e)||[]),_h(this,"exists",(e,n)=>this.get(e).includes(n)),_h(this,"delete",(e,n)=>{if(typeof n>"u"){this.map.delete(e);return}if(!this.map.has(e))return;const r=this.get(e);if(!this.exists(e,n))return;const s=r.filter(i=>i!==n);if(!s.length){this.map.delete(e);return}this.map.set(e,s)}),_h(this,"clear",()=>{this.map.clear()})}get topics(){return Array.from(this.map.keys())}}var Yue=Object.defineProperty,Que=Object.defineProperties,Jue=Object.getOwnPropertyDescriptors,gP=Object.getOwnPropertySymbols,Zue=Object.prototype.hasOwnProperty,Xue=Object.prototype.propertyIsEnumerable,zA=(t,e,n)=>e in t?Yue(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,tg=(t,e)=>{for(var n in e||(e={}))Zue.call(e,n)&&zA(t,n,e[n]);if(gP)for(var n of gP(e))Xue.call(e,n)&&zA(t,n,e[n]);return t},X2=(t,e)=>Que(t,Jue(e)),Wt=(t,e,n)=>zA(t,typeof e!="symbol"?e+"":e,n);class ede extends XJ{constructor(e,n){super(e,n),this.relayer=e,this.logger=n,Wt(this,"subscriptions",new Map),Wt(this,"topicMap",new Gue),Wt(this,"events",new Pi.EventEmitter),Wt(this,"name",Bce),Wt(this,"version",$ce),Wt(this,"pending",new Map),Wt(this,"cached",[]),Wt(this,"initialized",!1),Wt(this,"storagePrefix",lo),Wt(this,"subscribeTimeout",he.toMiliseconds(he.ONE_MINUTE)),Wt(this,"initialSubscribeTimeout",he.toMiliseconds(he.ONE_SECOND*15)),Wt(this,"clientId"),Wt(this,"batchSubscribeTopicsLimit",500),Wt(this,"init",async()=>{this.initialized||(this.logger.trace("Initialized"),this.registerEventListeners(),await this.restore()),this.initialized=!0}),Wt(this,"subscribe",async(r,s)=>{this.isInitialized(),this.logger.debug("Subscribing Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:r,opts:s}});try{const i=Sv(s),a={topic:r,relay:i,transportType:s==null?void 0:s.transportType};this.pending.set(r,a);const o=await this.rpcSubscribe(r,i,s);return typeof o=="string"&&(this.onSubscribe(o,a),this.logger.debug("Successfully Subscribed Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:r,opts:s}})),o}catch(i){throw this.logger.debug("Failed to Subscribe Topic"),this.logger.error(i),i}}),Wt(this,"unsubscribe",async(r,s)=>{this.isInitialized(),typeof(s==null?void 0:s.id)<"u"?await this.unsubscribeById(r,s.id,s):await this.unsubscribeByTopic(r,s)}),Wt(this,"isSubscribed",r=>new Promise(s=>{s(this.topicMap.topics.includes(r))})),Wt(this,"isKnownTopic",r=>new Promise(s=>{s(this.topicMap.topics.includes(r)||this.pending.has(r)||this.cached.some(i=>i.topic===r))})),Wt(this,"on",(r,s)=>{this.events.on(r,s)}),Wt(this,"once",(r,s)=>{this.events.once(r,s)}),Wt(this,"off",(r,s)=>{this.events.off(r,s)}),Wt(this,"removeListener",(r,s)=>{this.events.removeListener(r,s)}),Wt(this,"start",async()=>{await this.onConnect()}),Wt(this,"stop",async()=>{await this.onDisconnect()}),Wt(this,"restart",async()=>{await this.restore(),await this.onRestart()}),Wt(this,"checkPending",async()=>{if(this.pending.size===0&&(!this.initialized||!this.relayer.connected))return;const r=[];this.pending.forEach(s=>{r.push(s)}),await this.batchSubscribe(r)}),Wt(this,"registerEventListeners",()=>{this.relayer.core.heartbeat.on(uh.pulse,async()=>{await this.checkPending()}),this.events.on($s.created,async r=>{const s=$s.created;this.logger.info(`Emitting ${s}`),this.logger.debug({type:"event",event:s,data:r}),await this.persist()}),this.events.on($s.deleted,async r=>{const s=$s.deleted;this.logger.info(`Emitting ${s}`),this.logger.debug({type:"event",event:s,data:r}),await this.persist()})}),this.relayer=e,this.logger=Ur(n,this.name),this.clientId=""}get context(){return Us(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.relayer.core.customStoragePrefix+"//"+this.name}get length(){return this.subscriptions.size}get ids(){return Array.from(this.subscriptions.keys())}get values(){return Array.from(this.subscriptions.values())}get topics(){return this.topicMap.topics}get hasAnyTopics(){return this.topicMap.topics.length>0||this.pending.size>0||this.cached.length>0||this.subscriptions.size>0}hasSubscription(e,n){let r=!1;try{r=this.getSubscription(e).topic===n}catch{}return r}reset(){this.cached=[],this.initialized=!0}onDisable(){this.values.length>0&&(this.cached=this.values),this.subscriptions.clear(),this.topicMap.clear()}async unsubscribeByTopic(e,n){const r=this.topicMap.get(e);await Promise.all(r.map(async s=>await this.unsubscribeById(e,s,n)))}async unsubscribeById(e,n,r){this.logger.debug("Unsubscribing Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:e,id:n,opts:r}});try{const s=Sv(r);await this.restartToComplete({topic:e,id:n,relay:s}),await this.rpcUnsubscribe(e,n,s);const i=rn("USER_DISCONNECTED",`${this.name}, ${e}`);await this.onUnsubscribe(e,n,i),this.logger.debug("Successfully Unsubscribed Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:e,id:n,opts:r}})}catch(s){throw this.logger.debug("Failed to Unsubscribe Topic"),this.logger.error(s),s}}async rpcSubscribe(e,n,r){var s;(!r||(r==null?void 0:r.transportType)===Xt.relay)&&await this.restartToComplete({topic:e,id:e,relay:n});const i={method:Cg(n.protocol).subscribe,params:{topic:e}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:i});const a=(s=r==null?void 0:r.internal)==null?void 0:s.throwOnFailedPublish;try{const o=await this.getSubscriptionId(e);if((r==null?void 0:r.transportType)===Xt.link_mode)return setTimeout(()=>{(this.relayer.connected||this.relayer.connecting)&&this.relayer.request(i).catch(d=>this.logger.warn(d))},he.toMiliseconds(he.ONE_SECOND)),o;const l=new Promise(async d=>{const h=f=>{f.topic===e&&(this.events.removeListener($s.created,h),d(f.id))};this.events.on($s.created,h);try{const f=await Nl(new Promise((p,g)=>{this.relayer.request(i).catch(m=>{this.logger.warn(m,m==null?void 0:m.message),g(m)}).then(p)}),this.initialSubscribeTimeout,`Subscribing to ${e} failed, please try again`);this.events.removeListener($s.created,h),d(f)}catch{}}),u=await Nl(l,this.subscribeTimeout,`Subscribing to ${e} failed, please try again`);if(!u&&a)throw new Error(`Subscribing to ${e} failed, please try again`);return u?o:null}catch(o){if(this.logger.debug("Outgoing Relay Subscribe Payload stalled"),this.relayer.events.emit(zn.connection_stalled),a)throw o}return null}async rpcBatchSubscribe(e){if(!e.length)return;const n=e[0].relay,r={method:Cg(n.protocol).batchSubscribe,params:{topics:e.map(s=>s.topic)}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:r});try{await await Nl(new Promise(s=>{this.relayer.request(r).catch(i=>this.logger.warn(i)).then(s)}),this.subscribeTimeout,"rpcBatchSubscribe failed, please try again")}catch{this.relayer.events.emit(zn.connection_stalled)}}async rpcBatchFetchMessages(e){if(!e.length)return;const n=e[0].relay,r={method:Cg(n.protocol).batchFetchMessages,params:{topics:e.map(i=>i.topic)}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:r});let s;try{s=await await Nl(new Promise((i,a)=>{this.relayer.request(r).catch(o=>{this.logger.warn(o),a(o)}).then(i)}),this.subscribeTimeout,"rpcBatchFetchMessages failed, please try again")}catch{this.relayer.events.emit(zn.connection_stalled)}return s}rpcUnsubscribe(e,n,r){const s={method:Cg(r.protocol).unsubscribe,params:{topic:e,id:n}};return this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:s}),this.relayer.request(s)}onSubscribe(e,n){this.setSubscription(e,X2(tg({},n),{id:e})),this.pending.delete(n.topic)}onBatchSubscribe(e){e.length&&e.forEach(n=>{this.setSubscription(n.id,tg({},n)),this.pending.delete(n.topic)})}async onUnsubscribe(e,n,r){this.events.removeAllListeners(n),this.hasSubscription(n,e)&&this.deleteSubscription(n,r),await this.relayer.messages.del(e)}async setRelayerSubscriptions(e){await this.relayer.core.storage.setItem(this.storageKey,e)}async getRelayerSubscriptions(){return await this.relayer.core.storage.getItem(this.storageKey)}setSubscription(e,n){this.logger.debug("Setting subscription"),this.logger.trace({type:"method",method:"setSubscription",id:e,subscription:n}),this.addSubscription(e,n)}addSubscription(e,n){this.subscriptions.set(e,tg({},n)),this.topicMap.set(n.topic,e),this.events.emit($s.created,n)}getSubscription(e){this.logger.debug("Getting subscription"),this.logger.trace({type:"method",method:"getSubscription",id:e});const n=this.subscriptions.get(e);if(!n){const{message:r}=fe("NO_MATCHING_KEY",`${this.name}: ${e}`);throw new Error(r)}return n}deleteSubscription(e,n){this.logger.debug("Deleting subscription"),this.logger.trace({type:"method",method:"deleteSubscription",id:e,reason:n});const r=this.getSubscription(e);this.subscriptions.delete(e),this.topicMap.delete(r.topic,e),this.events.emit($s.deleted,X2(tg({},r),{reason:n}))}async persist(){await this.setRelayerSubscriptions(this.values),this.events.emit($s.sync)}async onRestart(){if(this.cached.length){const e=[...this.cached],n=Math.ceil(this.cached.length/this.batchSubscribeTopicsLimit);for(let r=0;r<n;r++){const s=e.splice(0,this.batchSubscribeTopicsLimit);await this.batchSubscribe(s)}}this.events.emit($s.resubscribed)}async restore(){try{const e=await this.getRelayerSubscriptions();if(typeof e>"u"||!e.length)return;if(this.subscriptions.size){const{message:n}=fe("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(n),this.logger.error(`${this.name}: ${JSON.stringify(this.values)}`),new Error(n)}this.cached=e,this.logger.debug(`Successfully Restored subscriptions for ${this.name}`),this.logger.trace({type:"method",method:"restore",subscriptions:this.values})}catch(e){this.logger.debug(`Failed to Restore subscriptions for ${this.name}`),this.logger.error(e)}}async batchSubscribe(e){e.length&&(await this.rpcBatchSubscribe(e),this.onBatchSubscribe(await Promise.all(e.map(async n=>X2(tg({},n),{id:await this.getSubscriptionId(n.topic)})))))}async batchFetchMessages(e){if(!e.length)return;this.logger.trace(`Fetching batch messages for ${e.length} subscriptions`);const n=await this.rpcBatchFetchMessages(e);n&&n.messages&&(await pse(he.toMiliseconds(he.ONE_SECOND)),await this.relayer.handleBatchMessageEvents(n.messages))}async onConnect(){await this.restart(),this.reset()}onDisconnect(){this.onDisable()}isInitialized(){if(!this.initialized){const{message:e}=fe("NOT_INITIALIZED",this.name);throw new Error(e)}}async restartToComplete(e){!this.relayer.connected&&!this.relayer.connecting&&(this.cached.push(e),await this.relayer.transportOpen())}async getClientId(){return this.clientId||(this.clientId=await this.relayer.core.crypto.getClientId()),this.clientId}async getSubscriptionId(e){return Wa(e+await this.getClientId())}}var tde=Object.defineProperty,yP=Object.getOwnPropertySymbols,nde=Object.prototype.hasOwnProperty,rde=Object.prototype.propertyIsEnumerable,WA=(t,e,n)=>e in t?tde(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,wP=(t,e)=>{for(var n in e||(e={}))nde.call(e,n)&&WA(t,n,e[n]);if(yP)for(var n of yP(e))rde.call(e,n)&&WA(t,n,e[n]);return t},bt=(t,e,n)=>WA(t,typeof e!="symbol"?e+"":e,n);class sde extends JJ{constructor(e){super(e),bt(this,"protocol","wc"),bt(this,"version",2),bt(this,"core"),bt(this,"logger"),bt(this,"events",new Pi.EventEmitter),bt(this,"provider"),bt(this,"messages"),bt(this,"subscriber"),bt(this,"publisher"),bt(this,"name",Oce),bt(this,"transportExplicitlyClosed",!1),bt(this,"initialized",!1),bt(this,"connectionAttemptInProgress",!1),bt(this,"relayUrl"),bt(this,"projectId"),bt(this,"packageName"),bt(this,"bundleId"),bt(this,"hasExperiencedNetworkDisruption",!1),bt(this,"pingTimeout"),bt(this,"heartBeatTimeout",he.toMiliseconds(he.THIRTY_SECONDS+he.FIVE_SECONDS)),bt(this,"reconnectTimeout"),bt(this,"connectPromise"),bt(this,"reconnectInProgress",!1),bt(this,"requestsInFlight",[]),bt(this,"connectTimeout",he.toMiliseconds(he.ONE_SECOND*15)),bt(this,"request",async n=>{var r,s;this.logger.debug("Publishing Request Payload");const i=n.id||Wu().toString();await this.toEstablishConnection();try{this.logger.trace({id:i,method:n.method,topic:(r=n.params)==null?void 0:r.topic},"relayer.request - publishing...");const a=`${i}:${((s=n.params)==null?void 0:s.tag)||""}`;this.requestsInFlight.push(a);const o=await this.provider.request(n);return this.requestsInFlight=this.requestsInFlight.filter(l=>l!==a),o}catch(a){throw this.logger.debug(`Failed to Publish Request: ${i}`),a}}),bt(this,"resetPingTimeout",()=>{Nv()&&(clearTimeout(this.pingTimeout),this.pingTimeout=setTimeout(()=>{var n,r,s,i;try{this.logger.debug({},"pingTimeout: Connection stalled, terminating..."),(i=(s=(r=(n=this.provider)==null?void 0:n.connection)==null?void 0:r.socket)==null?void 0:s.terminate)==null||i.call(s)}catch(a){this.logger.warn(a,a==null?void 0:a.message)}},this.heartBeatTimeout))}),bt(this,"onPayloadHandler",n=>{this.onProviderPayload(n),this.resetPingTimeout()}),bt(this,"onConnectHandler",()=>{this.logger.warn({},"Relayer connected "),this.startPingTimeout(),this.events.emit(zn.connect)}),bt(this,"onDisconnectHandler",()=>{this.logger.warn({},"Relayer disconnected "),this.requestsInFlight=[],this.onProviderDisconnect()}),bt(this,"onProviderErrorHandler",n=>{this.logger.fatal(`Fatal socket error: ${n.message}`),this.events.emit(zn.error,n),this.logger.fatal("Fatal socket error received, closing transport"),this.transportClose()}),bt(this,"registerProviderListeners",()=>{this.provider.on(li.payload,this.onPayloadHandler),this.provider.on(li.connect,this.onConnectHandler),this.provider.on(li.disconnect,this.onDisconnectHandler),this.provider.on(li.error,this.onProviderErrorHandler)}),this.core=e.core,this.logger=typeof e.logger<"u"&&typeof e.logger!="string"?Ur(e.logger,this.name):aw(dm({level:e.logger||jce})),this.messages=new Bue(this.logger,e.core),this.subscriber=new ede(this,this.logger),this.publisher=new Wue(this,this.logger),this.relayUrl=(e==null?void 0:e.relayUrl)||jL,this.projectId=e.projectId,Zre()?this.packageName=oI():Xre()&&(this.bundleId=oI()),this.provider={}}async init(){this.logger.trace("Initialized"),this.registerEventListeners(),await Promise.all([this.messages.init(),this.subscriber.init()]),this.initialized=!0,this.transportOpen().catch(e=>this.logger.warn(e,e==null?void 0:e.message))}get context(){return Us(this.logger)}get connected(){var e,n,r;return((r=(n=(e=this.provider)==null?void 0:e.connection)==null?void 0:n.socket)==null?void 0:r.readyState)===1||!1}get connecting(){var e,n,r;return((r=(n=(e=this.provider)==null?void 0:e.connection)==null?void 0:n.socket)==null?void 0:r.readyState)===0||this.connectPromise!==void 0||!1}async publish(e,n,r){this.isInitialized(),await this.publisher.publish(e,n,r),await this.recordMessageEvent({topic:e,message:n,publishedAt:Date.now(),transportType:Xt.relay},ux.outbound)}async subscribe(e,n){var r,s,i;this.isInitialized(),(!(n!=null&&n.transportType)||(n==null?void 0:n.transportType)==="relay")&&await this.toEstablishConnection();const a=typeof((r=n==null?void 0:n.internal)==null?void 0:r.throwOnFailedPublish)>"u"?!0:(s=n==null?void 0:n.internal)==null?void 0:s.throwOnFailedPublish;let o=((i=this.subscriber.topicMap.get(e))==null?void 0:i[0])||"",l;const u=d=>{d.topic===e&&(this.subscriber.off($s.created,u),l())};return await Promise.all([new Promise(d=>{l=d,this.subscriber.on($s.created,u)}),new Promise(async(d,h)=>{o=await this.subscriber.subscribe(e,wP({internal:{throwOnFailedPublish:a}},n)).catch(f=>{a&&h(f)})||o,d()})]),o}async unsubscribe(e,n){this.isInitialized(),await this.subscriber.unsubscribe(e,n)}on(e,n){this.events.on(e,n)}once(e,n){this.events.once(e,n)}off(e,n){this.events.off(e,n)}removeListener(e,n){this.events.removeListener(e,n)}async transportDisconnect(){this.provider.disconnect&&(this.hasExperiencedNetworkDisruption||this.connected)?await Nl(this.provider.disconnect(),2e3,"provider.disconnect()").catch(()=>this.onProviderDisconnect()):this.onProviderDisconnect()}async transportClose(){this.transportExplicitlyClosed=!0,await this.transportDisconnect()}async transportOpen(e){if(!this.subscriber.hasAnyTopics){this.logger.warn("Starting WS connection skipped because the client has no topics to work with.");return}if(this.connectPromise?(this.logger.debug({},"Waiting for existing connection attempt to resolve..."),await this.connectPromise,this.logger.debug({},"Existing connection attempt resolved")):(this.connectPromise=new Promise(async(n,r)=>{await this.connect(e).then(n).catch(r).finally(()=>{this.connectPromise=void 0})}),await this.connectPromise),!this.connected)throw new Error(`Couldn't establish socket connection to the relay server: ${this.relayUrl}`)}async restartTransport(e){this.logger.debug({},"Restarting transport..."),!this.connectionAttemptInProgress&&(this.relayUrl=e||this.relayUrl,await this.confirmOnlineStateOrThrow(),await this.transportClose(),await this.transportOpen())}async confirmOnlineStateOrThrow(){if(!await JI())throw new Error("No internet connection detected. Please restart your network and try again.")}async handleBatchMessageEvents(e){if((e==null?void 0:e.length)===0){this.logger.trace("Batch message events is empty. Ignoring...");return}const n=e.sort((r,s)=>r.publishedAt-s.publishedAt);this.logger.debug(`Batch of ${n.length} message events sorted`);for(const r of n)try{await this.onMessageEvent(r)}catch(s){this.logger.warn(s,"Error while processing batch message event: "+(s==null?void 0:s.message))}this.logger.trace(`Batch of ${n.length} message events processed`)}async onLinkMessageEvent(e,n){const{topic:r}=e;if(!n.sessionExists){const s=Pn(he.FIVE_MINUTES),i={topic:r,expiry:s,relay:{protocol:"irn"},active:!1};await this.core.pairing.pairings.set(r,i)}this.events.emit(zn.message,e),await this.recordMessageEvent(e,ux.inbound)}async connect(e){await this.confirmOnlineStateOrThrow(),e&&e!==this.relayUrl&&(this.relayUrl=e,await this.transportDisconnect()),this.connectionAttemptInProgress=!0,this.transportExplicitlyClosed=!1;let n=1;for(;n<6;){try{if(this.transportExplicitlyClosed)break;this.logger.debug({},`Connecting to ${this.relayUrl}, attempt: ${n}...`),await this.createProvider(),await new Promise(async(r,s)=>{const i=()=>{s(new Error("Connection interrupted while trying to connect"))};this.provider.once(li.disconnect,i),await Nl(new Promise((a,o)=>{this.provider.connect().then(a).catch(o)}),this.connectTimeout,`Socket stalled when trying to connect to ${this.relayUrl}`).catch(a=>{s(a)}).finally(()=>{this.provider.off(li.disconnect,i),clearTimeout(this.reconnectTimeout)}),await new Promise(async(a,o)=>{const l=()=>{s(new Error("Connection interrupted while trying to subscribe"))};this.provider.once(li.disconnect,l),await this.subscriber.start().then(a).catch(o).finally(()=>{this.provider.off(li.disconnect,l)})}),this.hasExperiencedNetworkDisruption=!1,r()})}catch(r){await this.subscriber.stop();const s=r;this.logger.warn({},s.message),this.hasExperiencedNetworkDisruption=!0}finally{this.connectionAttemptInProgress=!1}if(this.connected){this.logger.debug({},`Connected to ${this.relayUrl} successfully on attempt: ${n}`);break}await new Promise(r=>setTimeout(r,he.toMiliseconds(n*1))),n++}}startPingTimeout(){var e,n,r,s,i;if(Nv())try{(n=(e=this.provider)==null?void 0:e.connection)!=null&&n.socket&&((i=(s=(r=this.provider)==null?void 0:r.connection)==null?void 0:s.socket)==null||i.on("ping",()=>{this.resetPingTimeout()})),this.resetPingTimeout()}catch(a){this.logger.warn(a,a==null?void 0:a.message)}}async createProvider(){this.provider.connection&&this.unregisterProviderListeners();const e=await this.core.crypto.signJWT(this.relayUrl);this.provider=new Ri(new Ece(sse({sdkVersion:BA,protocol:this.protocol,version:this.version,relayUrl:this.relayUrl,projectId:this.projectId,auth:e,useOnCloseEvent:!0,bundleId:this.bundleId,packageName:this.packageName}))),this.registerProviderListeners()}async recordMessageEvent(e,n){const{topic:r,message:s}=e;await this.messages.set(r,s,n)}async shouldIgnoreMessageEvent(e){const{topic:n,message:r}=e;if(!r||r.length===0)return this.logger.warn(`Ignoring invalid/empty message: ${r}`),!0;if(!await this.subscriber.isKnownTopic(n))return this.logger.warn(`Ignoring message for unknown topic ${n}`),!0;const s=this.messages.has(n,r);return s&&this.logger.warn(`Ignoring duplicate message: ${r}`),s}async onProviderPayload(e){if(this.logger.debug("Incoming Relay Payload"),this.logger.trace({type:"payload",direction:"incoming",payload:e}),kS(e)){if(!e.method.endsWith(Dce))return;const n=e.params,{topic:r,message:s,publishedAt:i,attestation:a}=n.data,o={topic:r,message:s,publishedAt:i,transportType:Xt.relay,attestation:a};this.logger.debug("Emitting Relayer Payload"),this.logger.trace(wP({type:"event",event:n.id},o)),this.events.emit(n.id,o),await this.acknowledgePayload(e),await this.onMessageEvent(o)}else X1(e)&&this.events.emit(zn.message_ack,e)}async onMessageEvent(e){await this.shouldIgnoreMessageEvent(e)||(await this.recordMessageEvent(e,ux.inbound),this.events.emit(zn.message,e))}async acknowledgePayload(e){const n=J1(e.id,!0);await this.provider.connection.send(n)}unregisterProviderListeners(){this.provider.off(li.payload,this.onPayloadHandler),this.provider.off(li.connect,this.onConnectHandler),this.provider.off(li.disconnect,this.onDisconnectHandler),this.provider.off(li.error,this.onProviderErrorHandler),clearTimeout(this.pingTimeout)}async registerEventListeners(){let e=await JI();zoe(async n=>{e!==n&&(e=n,n?await this.transportOpen().catch(r=>this.logger.error(r,r==null?void 0:r.message)):(this.hasExperiencedNetworkDisruption=!0,await this.transportDisconnect(),this.transportExplicitlyClosed=!1))}),this.core.heartbeat.on(uh.pulse,async()=>{if(!this.transportExplicitlyClosed&&!this.connected&&Koe())try{await this.confirmOnlineStateOrThrow(),await this.transportOpen()}catch(n){this.logger.warn(n,n==null?void 0:n.message)}})}async onProviderDisconnect(){clearTimeout(this.pingTimeout),this.events.emit(zn.disconnect),this.connectionAttemptInProgress=!1,!this.reconnectInProgress&&(this.reconnectInProgress=!0,await this.subscriber.stop(),this.subscriber.hasAnyTopics&&(this.transportExplicitlyClosed||(this.reconnectTimeout=setTimeout(async()=>{await this.transportOpen().catch(e=>this.logger.error(e,e==null?void 0:e.message)),this.reconnectTimeout=void 0,this.reconnectInProgress=!1},he.toMiliseconds(Uce)))))}isInitialized(){if(!this.initialized){const{message:e}=fe("NOT_INITIALIZED",this.name);throw new Error(e)}}async toEstablishConnection(){if(await this.confirmOnlineStateOrThrow(),!this.connected){if(this.connectPromise){await this.connectPromise;return}await this.connect()}}}function ide(t,e){return t===e||Number.isNaN(t)&&Number.isNaN(e)}function bP(t){return Object.getOwnPropertySymbols(t).filter(e=>Object.prototype.propertyIsEnumerable.call(t,e))}function xP(t){return t==null?t===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(t)}const ade="[object RegExp]",ode="[object String]",cde="[object Number]",lde="[object Boolean]",vP="[object Arguments]",ude="[object Symbol]",dde="[object Date]",hde="[object Map]",fde="[object Set]",pde="[object Array]",mde="[object Function]",gde="[object ArrayBuffer]",eN="[object Object]",yde="[object Error]",wde="[object DataView]",bde="[object Uint8Array]",xde="[object Uint8ClampedArray]",vde="[object Uint16Array]",Ede="[object Uint32Array]",Nde="[object BigUint64Array]",Cde="[object Int8Array]",Ade="[object Int16Array]",Tde="[object Int32Array]",Sde="[object BigInt64Array]",kde="[object Float32Array]",_de="[object Float64Array]";function Ide(){}function EP(t){if(!t||typeof t!="object")return!1;const e=Object.getPrototypeOf(t);return e===null||e===Object.prototype||Object.getPrototypeOf(e)===null?Object.prototype.toString.call(t)==="[object Object]":!1}function Pde(t,e,n){return Ag(t,e,void 0,void 0,void 0,void 0,n)}function Ag(t,e,n,r,s,i,a){const o=a(t,e,n,r,s,i);if(o!==void 0)return o;if(typeof t==typeof e)switch(typeof t){case"bigint":case"string":case"boolean":case"symbol":case"undefined":return t===e;case"number":return t===e||Object.is(t,e);case"function":return t===e;case"object":return Xg(t,e,i,a)}return Xg(t,e,i,a)}function Xg(t,e,n,r){if(Object.is(t,e))return!0;let s=xP(t),i=xP(e);if(s===vP&&(s=eN),i===vP&&(i=eN),s!==i)return!1;switch(s){case ode:return t.toString()===e.toString();case cde:{const l=t.valueOf(),u=e.valueOf();return ide(l,u)}case lde:case dde:case ude:return Object.is(t.valueOf(),e.valueOf());case ade:return t.source===e.source&&t.flags===e.flags;case mde:return t===e}n=n??new Map;const a=n.get(t),o=n.get(e);if(a!=null&&o!=null)return a===e;n.set(t,e),n.set(e,t);try{switch(s){case hde:{if(t.size!==e.size)return!1;for(const[l,u]of t.entries())if(!e.has(l)||!Ag(u,e.get(l),l,t,e,n,r))return!1;return!0}case fde:{if(t.size!==e.size)return!1;const l=Array.from(t.values()),u=Array.from(e.values());for(let d=0;d<l.length;d++){const h=l[d],f=u.findIndex(p=>Ag(h,p,void 0,t,e,n,r));if(f===-1)return!1;u.splice(f,1)}return!0}case pde:case bde:case xde:case vde:case Ede:case Nde:case Cde:case Ade:case Tde:case Sde:case kde:case _de:{if(typeof Buffer<"u"&&Buffer.isBuffer(t)!==Buffer.isBuffer(e)||t.length!==e.length)return!1;for(let l=0;l<t.length;l++)if(!Ag(t[l],e[l],l,t,e,n,r))return!1;return!0}case gde:return t.byteLength!==e.byteLength?!1:Xg(new Uint8Array(t),new Uint8Array(e),n,r);case wde:return t.byteLength!==e.byteLength||t.byteOffset!==e.byteOffset?!1:Xg(new Uint8Array(t),new Uint8Array(e),n,r);case yde:return t.name===e.name&&t.message===e.message;case eN:{if(!(Xg(t.constructor,e.constructor,n,r)||EP(t)&&EP(e)))return!1;const l=[...Object.keys(t),...bP(t)],u=[...Object.keys(e),...bP(e)];if(l.length!==u.length)return!1;for(let d=0;d<l.length;d++){const h=l[d],f=t[h];if(!Object.hasOwn(e,h))return!1;const p=e[h];if(!Ag(f,p,h,t,e,n,r))return!1}return!0}default:return!1}}finally{n.delete(t),n.delete(e)}}function Rde(t,e){return Pde(t,e,Ide)}var jde=Object.defineProperty,NP=Object.getOwnPropertySymbols,Ode=Object.prototype.hasOwnProperty,Dde=Object.prototype.propertyIsEnumerable,qA=(t,e,n)=>e in t?jde(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,CP=(t,e)=>{for(var n in e||(e={}))Ode.call(e,n)&&qA(t,n,e[n]);if(NP)for(var n of NP(e))Dde.call(e,n)&&qA(t,n,e[n]);return t},ds=(t,e,n)=>qA(t,typeof e!="symbol"?e+"":e,n);class fh extends ZJ{constructor(e,n,r,s=lo,i=void 0){super(e,n,r,s),this.core=e,this.logger=n,this.name=r,ds(this,"map",new Map),ds(this,"version",Mce),ds(this,"cached",[]),ds(this,"initialized",!1),ds(this,"getKey"),ds(this,"storagePrefix",lo),ds(this,"recentlyDeleted",[]),ds(this,"recentlyDeletedLimit",200),ds(this,"init",async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(a=>{this.getKey&&a!==null&&!ir(a)?this.map.set(this.getKey(a),a):voe(a)?this.map.set(a.id,a):Eoe(a)&&this.map.set(a.topic,a)}),this.cached=[],this.initialized=!0)}),ds(this,"set",async(a,o)=>{this.isInitialized(),this.map.has(a)?await this.update(a,o):(this.logger.debug("Setting value"),this.logger.trace({type:"method",method:"set",key:a,value:o}),this.map.set(a,o),await this.persist())}),ds(this,"get",a=>(this.isInitialized(),this.logger.debug("Getting value"),this.logger.trace({type:"method",method:"get",key:a}),this.getData(a))),ds(this,"getAll",a=>(this.isInitialized(),a?this.values.filter(o=>Object.keys(a).every(l=>Rde(o[l],a[l]))):this.values)),ds(this,"update",async(a,o)=>{this.isInitialized(),this.logger.debug("Updating value"),this.logger.trace({type:"method",method:"update",key:a,update:o});const l=CP(CP({},this.getData(a)),o);this.map.set(a,l),await this.persist()}),ds(this,"delete",async(a,o)=>{this.isInitialized(),this.map.has(a)&&(this.logger.debug("Deleting value"),this.logger.trace({type:"method",method:"delete",key:a,reason:o}),this.map.delete(a),this.addToRecentlyDeleted(a),await this.persist())}),this.logger=Ur(n,this.name),this.storagePrefix=s,this.getKey=i}get context(){return Us(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get length(){return this.map.size}get keys(){return Array.from(this.map.keys())}get values(){return Array.from(this.map.values())}addToRecentlyDeleted(e){this.recentlyDeleted.push(e),this.recentlyDeleted.length>=this.recentlyDeletedLimit&&this.recentlyDeleted.splice(0,this.recentlyDeletedLimit/2)}async setDataStore(e){await this.core.storage.setItem(this.storageKey,e)}async getDataStore(){return await this.core.storage.getItem(this.storageKey)}getData(e){const n=this.map.get(e);if(!n){if(this.recentlyDeleted.includes(e)){const{message:s}=fe("MISSING_OR_INVALID",`Record was recently deleted - ${this.name}: ${e}`);throw this.logger.error(s),new Error(s)}const{message:r}=fe("NO_MATCHING_KEY",`${this.name}: ${e}`);throw this.logger.error(r),new Error(r)}return n}async persist(){await this.setDataStore(this.values)}async restore(){try{const e=await this.getDataStore();if(typeof e>"u"||!e.length)return;if(this.map.size){const{message:n}=fe("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(n),new Error(n)}this.cached=e,this.logger.debug(`Successfully Restored value for ${this.name}`),this.logger.trace({type:"method",method:"restore",value:this.values})}catch(e){this.logger.debug(`Failed to Restore value for ${this.name}`),this.logger.error(e)}}isInitialized(){if(!this.initialized){const{message:e}=fe("NOT_INITIALIZED",this.name);throw new Error(e)}}}var Ude=Object.defineProperty,Mde=(t,e,n)=>e in t?Ude(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,ct=(t,e,n)=>Mde(t,typeof e!="symbol"?e+"":e,n);class Lde{constructor(e,n){this.core=e,this.logger=n,ct(this,"name",Fce),ct(this,"version",Hce),ct(this,"events",new Q6),ct(this,"pairings"),ct(this,"initialized",!1),ct(this,"storagePrefix",lo),ct(this,"ignoredPayloadTypes",[ec]),ct(this,"registeredMethods",[]),ct(this,"init",async()=>{this.initialized||(await this.pairings.init(),await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.initialized=!0,this.logger.trace("Initialized"))}),ct(this,"register",({methods:r})=>{this.isInitialized(),this.registeredMethods=[...new Set([...this.registeredMethods,...r])]}),ct(this,"create",async r=>{this.isInitialized();const s=UA(),i=await this.core.crypto.setSymKey(s),a=Pn(he.FIVE_MINUTES),o={protocol:RL},l={topic:i,expiry:a,relay:o,active:!1,methods:r==null?void 0:r.methods},u=HI({protocol:this.core.protocol,version:this.core.version,topic:i,symKey:s,relay:o,expiryTimestamp:a,methods:r==null?void 0:r.methods});return this.events.emit(Tu.create,l),this.core.expirer.set(i,a),await this.pairings.set(i,l),await this.core.relayer.subscribe(i,{transportType:r==null?void 0:r.transportType}),{topic:i,uri:u}}),ct(this,"pair",async r=>{this.isInitialized();const s=this.core.eventClient.createEvent({properties:{topic:r==null?void 0:r.uri,trace:[Ia.pairing_started]}});this.isValidPair(r,s);const{topic:i,symKey:a,relay:o,expiryTimestamp:l,methods:u}=FI(r.uri);s.props.properties.topic=i,s.addTrace(Ia.pairing_uri_validation_success),s.addTrace(Ia.pairing_uri_not_expired);let d;if(this.pairings.keys.includes(i)){if(d=this.pairings.get(i),s.addTrace(Ia.existing_pairing),d.active)throw s.setError(So.active_pairing_already_exists),new Error(`Pairing already exists: ${i}. Please try again with a new connection URI.`);s.addTrace(Ia.pairing_not_expired)}const h=l||Pn(he.FIVE_MINUTES),f={topic:i,relay:o,expiry:h,active:!1,methods:u};this.core.expirer.set(i,h),await this.pairings.set(i,f),s.addTrace(Ia.store_new_pairing),r.activatePairing&&await this.activate({topic:i}),this.events.emit(Tu.create,f),s.addTrace(Ia.emit_inactive_pairing),this.core.crypto.keychain.has(i)||await this.core.crypto.setSymKey(a,i),s.addTrace(Ia.subscribing_pairing_topic);try{await this.core.relayer.confirmOnlineStateOrThrow()}catch{s.setError(So.no_internet_connection)}try{await this.core.relayer.subscribe(i,{relay:o})}catch(p){throw s.setError(So.subscribe_pairing_topic_failure),p}return s.addTrace(Ia.subscribe_pairing_topic_success),f}),ct(this,"activate",async({topic:r})=>{this.isInitialized();const s=Pn(he.FIVE_MINUTES);this.core.expirer.set(r,s),await this.pairings.update(r,{active:!0,expiry:s})}),ct(this,"ping",async r=>{this.isInitialized(),await this.isValidPing(r),this.logger.warn("ping() is deprecated and will be removed in the next major release.");const{topic:s}=r;if(this.pairings.keys.includes(s)){const i=await this.sendRequest(s,"wc_pairingPing",{}),{done:a,resolve:o,reject:l}=Eu();this.events.once(jt("pairing_ping",i),({error:u})=>{u?l(u):o()}),await a()}}),ct(this,"updateExpiry",async({topic:r,expiry:s})=>{this.isInitialized(),await this.pairings.update(r,{expiry:s})}),ct(this,"updateMetadata",async({topic:r,metadata:s})=>{this.isInitialized(),await this.pairings.update(r,{peerMetadata:s})}),ct(this,"getPairings",()=>(this.isInitialized(),this.pairings.values)),ct(this,"disconnect",async r=>{this.isInitialized(),await this.isValidDisconnect(r);const{topic:s}=r;this.pairings.keys.includes(s)&&(await this.sendRequest(s,"wc_pairingDelete",rn("USER_DISCONNECTED")),await this.deletePairing(s))}),ct(this,"formatUriFromPairing",r=>{this.isInitialized();const{topic:s,relay:i,expiry:a,methods:o}=r,l=this.core.crypto.keychain.get(s);return HI({protocol:this.core.protocol,version:this.core.version,topic:s,symKey:l,relay:i,expiryTimestamp:a,methods:o})}),ct(this,"sendRequest",async(r,s,i)=>{const a=Cl(s,i),o=await this.core.crypto.encode(r,a),l=Xm[s].req;return this.core.history.set(r,a),this.core.relayer.publish(r,o,l),a.id}),ct(this,"sendResult",async(r,s,i)=>{const a=J1(r,i),o=await this.core.crypto.encode(s,a),l=(await this.core.history.get(s,r)).request.method,u=Xm[l].res;await this.core.relayer.publish(s,o,u),await this.core.history.resolve(a)}),ct(this,"sendError",async(r,s,i)=>{const a=Z1(r,i),o=await this.core.crypto.encode(s,a),l=(await this.core.history.get(s,r)).request.method,u=Xm[l]?Xm[l].res:Xm.unregistered_method.res;await this.core.relayer.publish(s,o,u),await this.core.history.resolve(a)}),ct(this,"deletePairing",async(r,s)=>{await this.core.relayer.unsubscribe(r),await Promise.all([this.pairings.delete(r,rn("USER_DISCONNECTED")),this.core.crypto.deleteSymKey(r),s?Promise.resolve():this.core.expirer.del(r)])}),ct(this,"cleanup",async()=>{const r=this.pairings.getAll().filter(s=>Wc(s.expiry));await Promise.all(r.map(s=>this.deletePairing(s.topic)))}),ct(this,"onRelayEventRequest",async r=>{const{topic:s,payload:i}=r;switch(i.method){case"wc_pairingPing":return await this.onPairingPingRequest(s,i);case"wc_pairingDelete":return await this.onPairingDeleteRequest(s,i);default:return await this.onUnknownRpcMethodRequest(s,i)}}),ct(this,"onRelayEventResponse",async r=>{const{topic:s,payload:i}=r,a=(await this.core.history.get(s,i.id)).request.method;switch(a){case"wc_pairingPing":return this.onPairingPingResponse(s,i);default:return this.onUnknownRpcMethodResponse(a)}}),ct(this,"onPairingPingRequest",async(r,s)=>{const{id:i}=s;try{this.isValidPing({topic:r}),await this.sendResult(i,r,!0),this.events.emit(Tu.ping,{id:i,topic:r})}catch(a){await this.sendError(i,r,a),this.logger.error(a)}}),ct(this,"onPairingPingResponse",(r,s)=>{const{id:i}=s;setTimeout(()=>{ja(s)?this.events.emit(jt("pairing_ping",i),{}):xi(s)&&this.events.emit(jt("pairing_ping",i),{error:s.error})},500)}),ct(this,"onPairingDeleteRequest",async(r,s)=>{const{id:i}=s;try{this.isValidDisconnect({topic:r}),await this.deletePairing(r),this.events.emit(Tu.delete,{id:i,topic:r})}catch(a){await this.sendError(i,r,a),this.logger.error(a)}}),ct(this,"onUnknownRpcMethodRequest",async(r,s)=>{const{id:i,method:a}=s;try{if(this.registeredMethods.includes(a))return;const o=rn("WC_METHOD_UNSUPPORTED",a);await this.sendError(i,r,o),this.logger.error(o)}catch(o){await this.sendError(i,r,o),this.logger.error(o)}}),ct(this,"onUnknownRpcMethodResponse",r=>{this.registeredMethods.includes(r)||this.logger.error(rn("WC_METHOD_UNSUPPORTED",r))}),ct(this,"isValidPair",(r,s)=>{var i;if(!ms(r)){const{message:o}=fe("MISSING_OR_INVALID",`pair() params: ${r}`);throw s.setError(So.malformed_pairing_uri),new Error(o)}if(!xoe(r.uri)){const{message:o}=fe("MISSING_OR_INVALID",`pair() uri: ${r.uri}`);throw s.setError(So.malformed_pairing_uri),new Error(o)}const a=FI(r==null?void 0:r.uri);if(!((i=a==null?void 0:a.relay)!=null&&i.protocol)){const{message:o}=fe("MISSING_OR_INVALID","pair() uri#relay-protocol");throw s.setError(So.malformed_pairing_uri),new Error(o)}if(!(a!=null&&a.symKey)){const{message:o}=fe("MISSING_OR_INVALID","pair() uri#symKey");throw s.setError(So.malformed_pairing_uri),new Error(o)}if(a!=null&&a.expiryTimestamp&&he.toMiliseconds(a==null?void 0:a.expiryTimestamp)<Date.now()){s.setError(So.pairing_expired);const{message:o}=fe("EXPIRED","pair() URI has expired. Please try again with a new connection URI.");throw new Error(o)}}),ct(this,"isValidPing",async r=>{if(!ms(r)){const{message:i}=fe("MISSING_OR_INVALID",`ping() params: ${r}`);throw new Error(i)}const{topic:s}=r;await this.isValidPairingTopic(s)}),ct(this,"isValidDisconnect",async r=>{if(!ms(r)){const{message:i}=fe("MISSING_OR_INVALID",`disconnect() params: ${r}`);throw new Error(i)}const{topic:s}=r;await this.isValidPairingTopic(s)}),ct(this,"isValidPairingTopic",async r=>{if(!Cn(r,!1)){const{message:s}=fe("MISSING_OR_INVALID",`pairing topic should be a string: ${r}`);throw new Error(s)}if(!this.pairings.keys.includes(r)){const{message:s}=fe("NO_MATCHING_KEY",`pairing topic doesn't exist: ${r}`);throw new Error(s)}if(Wc(this.pairings.get(r).expiry)){await this.deletePairing(r);const{message:s}=fe("EXPIRED",`pairing topic: ${r}`);throw new Error(s)}}),this.core=e,this.logger=Ur(n,this.name),this.pairings=new fh(this.core,this.logger,this.name,this.storagePrefix)}get context(){return Us(this.logger)}isInitialized(){if(!this.initialized){const{message:e}=fe("NOT_INITIALIZED",this.name);throw new Error(e)}}registerRelayerEvents(){this.core.relayer.on(zn.message,async e=>{const{topic:n,message:r,transportType:s}=e;if(this.pairings.keys.includes(n)&&s!==Xt.link_mode&&!this.ignoredPayloadTypes.includes(this.core.crypto.getPayloadType(r)))try{const i=await this.core.crypto.decode(n,r);kS(i)?(this.core.history.set(n,i),await this.onRelayEventRequest({topic:n,payload:i})):X1(i)&&(await this.core.history.resolve(i),await this.onRelayEventResponse({topic:n,payload:i}),this.core.history.delete(n,i.id)),await this.core.relayer.messages.ack(n,r)}catch(i){this.logger.error(i)}})}registerExpirerEvents(){this.core.expirer.on(hi.expired,async e=>{const{topic:n}=PM(e.target);n&&this.pairings.keys.includes(n)&&(await this.deletePairing(n,!0),this.events.emit(Tu.expire,{topic:n}))})}}var Bde=Object.defineProperty,$de=(t,e,n)=>e in t?Bde(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,er=(t,e,n)=>$de(t,typeof e!="symbol"?e+"":e,n);class Fde extends GJ{constructor(e,n){super(e,n),this.core=e,this.logger=n,er(this,"records",new Map),er(this,"events",new Pi.EventEmitter),er(this,"name",Vce),er(this,"version",zce),er(this,"cached",[]),er(this,"initialized",!1),er(this,"storagePrefix",lo),er(this,"init",async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(r=>this.records.set(r.id,r)),this.cached=[],this.registerEventListeners(),this.initialized=!0)}),er(this,"set",(r,s,i)=>{if(this.isInitialized(),this.logger.debug("Setting JSON-RPC request history record"),this.logger.trace({type:"method",method:"set",topic:r,request:s,chainId:i}),this.records.has(s.id))return;const a={id:s.id,topic:r,request:{method:s.method,params:s.params||null},chainId:i,expiry:Pn(he.THIRTY_DAYS)};this.records.set(a.id,a),this.persist(),this.events.emit(Mi.created,a)}),er(this,"resolve",async r=>{if(this.isInitialized(),this.logger.debug("Updating JSON-RPC response history record"),this.logger.trace({type:"method",method:"update",response:r}),!this.records.has(r.id))return;const s=await this.getRecord(r.id);typeof s.response>"u"&&(s.response=xi(r)?{error:r.error}:{result:r.result},this.records.set(s.id,s),this.persist(),this.events.emit(Mi.updated,s))}),er(this,"get",async(r,s)=>(this.isInitialized(),this.logger.debug("Getting record"),this.logger.trace({type:"method",method:"get",topic:r,id:s}),await this.getRecord(s))),er(this,"delete",(r,s)=>{this.isInitialized(),this.logger.debug("Deleting record"),this.logger.trace({type:"method",method:"delete",id:s}),this.values.forEach(i=>{if(i.topic===r){if(typeof s<"u"&&i.id!==s)return;this.records.delete(i.id),this.events.emit(Mi.deleted,i)}}),this.persist()}),er(this,"exists",async(r,s)=>(this.isInitialized(),this.records.has(s)?(await this.getRecord(s)).topic===r:!1)),er(this,"on",(r,s)=>{this.events.on(r,s)}),er(this,"once",(r,s)=>{this.events.once(r,s)}),er(this,"off",(r,s)=>{this.events.off(r,s)}),er(this,"removeListener",(r,s)=>{this.events.removeListener(r,s)}),this.logger=Ur(n,this.name)}get context(){return Us(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get size(){return this.records.size}get keys(){return Array.from(this.records.keys())}get values(){return Array.from(this.records.values())}get pending(){const e=[];return this.values.forEach(n=>{if(typeof n.response<"u")return;const r={topic:n.topic,request:Cl(n.request.method,n.request.params,n.id),chainId:n.chainId};return e.push(r)}),e}async setJsonRpcRecords(e){await this.core.storage.setItem(this.storageKey,e)}async getJsonRpcRecords(){return await this.core.storage.getItem(this.storageKey)}getRecord(e){this.isInitialized();const n=this.records.get(e);if(!n){const{message:r}=fe("NO_MATCHING_KEY",`${this.name}: ${e}`);throw new Error(r)}return n}async persist(){await this.setJsonRpcRecords(this.values),this.events.emit(Mi.sync)}async restore(){try{const e=await this.getJsonRpcRecords();if(typeof e>"u"||!e.length)return;if(this.records.size){const{message:n}=fe("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(n),new Error(n)}this.cached=e,this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",records:this.values})}catch(e){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(e)}}registerEventListeners(){this.events.on(Mi.created,e=>{const n=Mi.created;this.logger.info(`Emitting ${n}`),this.logger.debug({type:"event",event:n,record:e})}),this.events.on(Mi.updated,e=>{const n=Mi.updated;this.logger.info(`Emitting ${n}`),this.logger.debug({type:"event",event:n,record:e})}),this.events.on(Mi.deleted,e=>{const n=Mi.deleted;this.logger.info(`Emitting ${n}`),this.logger.debug({type:"event",event:n,record:e})}),this.core.heartbeat.on(uh.pulse,()=>{this.cleanup()})}cleanup(){try{this.isInitialized();let e=!1;this.records.forEach(n=>{he.toMiliseconds(n.expiry||0)-Date.now()<=0&&(this.logger.info(`Deleting expired history log: ${n.id}`),this.records.delete(n.id),this.events.emit(Mi.deleted,n,!1),e=!0)}),e&&this.persist()}catch(e){this.logger.warn(e)}}isInitialized(){if(!this.initialized){const{message:e}=fe("NOT_INITIALIZED",this.name);throw new Error(e)}}}var Hde=Object.defineProperty,Vde=(t,e,n)=>e in t?Hde(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Nr=(t,e,n)=>Vde(t,typeof e!="symbol"?e+"":e,n);class zde extends eZ{constructor(e,n){super(e,n),this.core=e,this.logger=n,Nr(this,"expirations",new Map),Nr(this,"events",new Pi.EventEmitter),Nr(this,"name",Wce),Nr(this,"version",qce),Nr(this,"cached",[]),Nr(this,"initialized",!1),Nr(this,"storagePrefix",lo),Nr(this,"init",async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(r=>this.expirations.set(r.target,r)),this.cached=[],this.registerEventListeners(),this.initialized=!0)}),Nr(this,"has",r=>{try{const s=this.formatTarget(r);return typeof this.getExpiration(s)<"u"}catch{return!1}}),Nr(this,"set",(r,s)=>{this.isInitialized();const i=this.formatTarget(r),a={target:i,expiry:s};this.expirations.set(i,a),this.checkExpiry(i,a),this.events.emit(hi.created,{target:i,expiration:a})}),Nr(this,"get",r=>{this.isInitialized();const s=this.formatTarget(r);return this.getExpiration(s)}),Nr(this,"del",r=>{if(this.isInitialized(),this.has(r)){const s=this.formatTarget(r),i=this.getExpiration(s);this.expirations.delete(s),this.events.emit(hi.deleted,{target:s,expiration:i})}}),Nr(this,"on",(r,s)=>{this.events.on(r,s)}),Nr(this,"once",(r,s)=>{this.events.once(r,s)}),Nr(this,"off",(r,s)=>{this.events.off(r,s)}),Nr(this,"removeListener",(r,s)=>{this.events.removeListener(r,s)}),this.logger=Ur(n,this.name)}get context(){return Us(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get length(){return this.expirations.size}get keys(){return Array.from(this.expirations.keys())}get values(){return Array.from(this.expirations.values())}formatTarget(e){if(typeof e=="string")return ise(e);if(typeof e=="number")return ase(e);const{message:n}=fe("UNKNOWN_TYPE",`Target type: ${typeof e}`);throw new Error(n)}async setExpirations(e){await this.core.storage.setItem(this.storageKey,e)}async getExpirations(){return await this.core.storage.getItem(this.storageKey)}async persist(){await this.setExpirations(this.values),this.events.emit(hi.sync)}async restore(){try{const e=await this.getExpirations();if(typeof e>"u"||!e.length)return;if(this.expirations.size){const{message:n}=fe("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(n),new Error(n)}this.cached=e,this.logger.debug(`Successfully Restored expirations for ${this.name}`),this.logger.trace({type:"method",method:"restore",expirations:this.values})}catch(e){this.logger.debug(`Failed to Restore expirations for ${this.name}`),this.logger.error(e)}}getExpiration(e){const n=this.expirations.get(e);if(!n){const{message:r}=fe("NO_MATCHING_KEY",`${this.name}: ${e}`);throw this.logger.warn(r),new Error(r)}return n}checkExpiry(e,n){const{expiry:r}=n;he.toMiliseconds(r)-Date.now()<=0&&this.expire(e,n)}expire(e,n){this.expirations.delete(e),this.events.emit(hi.expired,{target:e,expiration:n})}checkExpirations(){this.core.relayer.connected&&this.expirations.forEach((e,n)=>this.checkExpiry(n,e))}registerEventListeners(){this.core.heartbeat.on(uh.pulse,()=>this.checkExpirations()),this.events.on(hi.created,e=>{const n=hi.created;this.logger.info(`Emitting ${n}`),this.logger.debug({type:"event",event:n,data:e}),this.persist()}),this.events.on(hi.expired,e=>{const n=hi.expired;this.logger.info(`Emitting ${n}`),this.logger.debug({type:"event",event:n,data:e}),this.persist()}),this.events.on(hi.deleted,e=>{const n=hi.deleted;this.logger.info(`Emitting ${n}`),this.logger.debug({type:"event",event:n,data:e}),this.persist()})}isInitialized(){if(!this.initialized){const{message:e}=fe("NOT_INITIALIZED",this.name);throw new Error(e)}}}var Wde=Object.defineProperty,qde=(t,e,n)=>e in t?Wde(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Nn=(t,e,n)=>qde(t,typeof e!="symbol"?e+"":e,n);class Kde extends tZ{constructor(e,n,r){super(e,n,r),this.core=e,this.logger=n,this.store=r,Nn(this,"name",Kce),Nn(this,"abortController"),Nn(this,"isDevEnv"),Nn(this,"verifyUrlV3",Yce),Nn(this,"storagePrefix",lo),Nn(this,"version",PL),Nn(this,"publicKey"),Nn(this,"fetchPromise"),Nn(this,"init",async()=>{var s;this.isDevEnv||(this.publicKey=await this.store.getItem(this.storeKey),this.publicKey&&he.toMiliseconds((s=this.publicKey)==null?void 0:s.expiresAt)<Date.now()&&(this.logger.debug("verify v2 public key expired"),await this.removePublicKey()))}),Nn(this,"register",async s=>{if(!ym()||this.isDevEnv)return;const i=window.location.origin,{id:a,decryptedId:o}=s,l=`${this.verifyUrlV3}/attestation?projectId=${this.core.projectId}&origin=${i}&id=${a}&decryptedId=${o}`;try{const u=Hd(),d=this.startAbortTimer(he.ONE_SECOND*5),h=await new Promise((f,p)=>{const g=()=>{window.removeEventListener("message",y),u.body.removeChild(m),p("attestation aborted")};this.abortController.signal.addEventListener("abort",g);const m=u.createElement("iframe");m.src=l,m.style.display="none",m.addEventListener("error",g,{signal:this.abortController.signal});const y=b=>{if(b.data&&typeof b.data=="string")try{const w=JSON.parse(b.data);if(w.type==="verify_attestation"){if(wA(w.attestation).payload.id!==a)return;clearInterval(d),u.body.removeChild(m),this.abortController.signal.removeEventListener("abort",g),window.removeEventListener("message",y),f(w.attestation===null?"":w.attestation)}}catch(w){this.logger.warn(w)}};u.body.appendChild(m),window.addEventListener("message",y,{signal:this.abortController.signal})});return this.logger.debug("jwt attestation",h),h}catch(u){this.logger.warn(u)}return""}),Nn(this,"resolve",async s=>{if(this.isDevEnv)return"";const{attestationId:i,hash:a,encryptedId:o}=s;if(i===""){this.logger.debug("resolve: attestationId is empty, skipping");return}if(i){if(wA(i).payload.id!==o)return;const u=await this.isValidJwtAttestation(i);if(u){if(!u.isVerified){this.logger.warn("resolve: jwt attestation: origin url not verified");return}return u}}if(!a)return;const l=this.getVerifyUrl(s==null?void 0:s.verifyUrl);return this.fetchAttestation(a,l)}),Nn(this,"fetchAttestation",async(s,i)=>{this.logger.debug(`resolving attestation: ${s} from url: ${i}`);const a=this.startAbortTimer(he.ONE_SECOND*5),o=await fetch(`${i}/attestation/${s}?v2Supported=true`,{signal:this.abortController.signal});return clearTimeout(a),o.status===200?await o.json():void 0}),Nn(this,"getVerifyUrl",s=>{let i=s||Zg;return Qce.includes(i)||(this.logger.info(`verify url: ${i}, not included in trusted list, assigning default: ${Zg}`),i=Zg),i}),Nn(this,"fetchPublicKey",async()=>{try{this.logger.debug(`fetching public key from: ${this.verifyUrlV3}`);const s=this.startAbortTimer(he.FIVE_SECONDS),i=await fetch(`${this.verifyUrlV3}/public-key`,{signal:this.abortController.signal});return clearTimeout(s),await i.json()}catch(s){this.logger.warn(s)}}),Nn(this,"persistPublicKey",async s=>{this.logger.debug("persisting public key to local storage",s),await this.store.setItem(this.storeKey,s),this.publicKey=s}),Nn(this,"removePublicKey",async()=>{this.logger.debug("removing verify v2 public key from storage"),await this.store.removeItem(this.storeKey),this.publicKey=void 0}),Nn(this,"isValidJwtAttestation",async s=>{const i=await this.getPublicKey();try{if(i)return this.validateAttestation(s,i)}catch(o){this.logger.error(o),this.logger.warn("error validating attestation")}const a=await this.fetchAndPersistPublicKey();try{if(a)return this.validateAttestation(s,a)}catch(o){this.logger.error(o),this.logger.warn("error validating attestation")}}),Nn(this,"getPublicKey",async()=>this.publicKey?this.publicKey:await this.fetchAndPersistPublicKey()),Nn(this,"fetchAndPersistPublicKey",async()=>{if(this.fetchPromise)return await this.fetchPromise,this.publicKey;this.fetchPromise=new Promise(async i=>{const a=await this.fetchPublicKey();a&&(await this.persistPublicKey(a),i(a))});const s=await this.fetchPromise;return this.fetchPromise=void 0,s}),Nn(this,"validateAttestation",(s,i)=>{const a=Xae(s,i.publicKey),o={hasExpired:he.toMiliseconds(a.exp)<Date.now(),payload:a};if(o.hasExpired)throw this.logger.warn("resolve: jwt attestation expired"),new Error("JWT attestation expired");return{origin:o.payload.origin,isScam:o.payload.isScam,isVerified:o.payload.isVerified}}),this.logger=Ur(n,this.name),this.abortController=new AbortController,this.isDevEnv=fS(),this.init()}get storeKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//verify:public:key"}get context(){return Us(this.logger)}startAbortTimer(e){return this.abortController=new AbortController,setTimeout(()=>this.abortController.abort(),he.toMiliseconds(e))}}var Gde=Object.defineProperty,Yde=(t,e,n)=>e in t?Gde(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,AP=(t,e,n)=>Yde(t,typeof e!="symbol"?e+"":e,n);class Qde extends nZ{constructor(e,n){super(e,n),this.projectId=e,this.logger=n,AP(this,"context",Jce),AP(this,"registerDeviceToken",async r=>{const{clientId:s,token:i,notificationType:a,enableEncrypted:o=!1}=r,l=`${Zce}/${this.projectId}/clients`;await fetch(l,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({client_id:s,type:a,token:i,always_raw:o})})}),this.logger=Ur(n,this.context)}}var Jde=Object.defineProperty,TP=Object.getOwnPropertySymbols,Zde=Object.prototype.hasOwnProperty,Xde=Object.prototype.propertyIsEnumerable,KA=(t,e,n)=>e in t?Jde(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,ng=(t,e)=>{for(var n in e||(e={}))Zde.call(e,n)&&KA(t,n,e[n]);if(TP)for(var n of TP(e))Xde.call(e,n)&&KA(t,n,e[n]);return t},Ln=(t,e,n)=>KA(t,typeof e!="symbol"?e+"":e,n);class ehe extends rZ{constructor(e,n,r=!0){super(e,n,r),this.core=e,this.logger=n,Ln(this,"context",ele),Ln(this,"storagePrefix",lo),Ln(this,"storageVersion",Xce),Ln(this,"events",new Map),Ln(this,"shouldPersist",!1),Ln(this,"init",async()=>{if(!fS())try{const s={eventId:lI(),timestamp:Date.now(),domain:this.getAppDomain(),props:{event:"INIT",type:"",properties:{client_id:await this.core.crypto.getClientId(),user_agent:_M(this.core.relayer.protocol,this.core.relayer.version,BA)}}};await this.sendEvent([s])}catch(s){this.logger.warn(s)}}),Ln(this,"createEvent",s=>{const{event:i="ERROR",type:a="",properties:{topic:o,trace:l}}=s,u=lI(),d=this.core.projectId||"",h=Date.now(),f=ng({eventId:u,timestamp:h,props:{event:i,type:a,properties:{topic:o,trace:l}},bundleId:d,domain:this.getAppDomain()},this.setMethods(u));return this.telemetryEnabled&&(this.events.set(u,f),this.shouldPersist=!0),f}),Ln(this,"getEvent",s=>{const{eventId:i,topic:a}=s;if(i)return this.events.get(i);const o=Array.from(this.events.values()).find(l=>l.props.properties.topic===a);if(o)return ng(ng({},o),this.setMethods(o.eventId))}),Ln(this,"deleteEvent",s=>{const{eventId:i}=s;this.events.delete(i),this.shouldPersist=!0}),Ln(this,"setEventListeners",()=>{this.core.heartbeat.on(uh.pulse,async()=>{this.shouldPersist&&await this.persist(),this.events.forEach(s=>{he.fromMiliseconds(Date.now())-he.fromMiliseconds(s.timestamp)>tle&&(this.events.delete(s.eventId),this.shouldPersist=!0)})})}),Ln(this,"setMethods",s=>({addTrace:i=>this.addTrace(s,i),setError:i=>this.setError(s,i)})),Ln(this,"addTrace",(s,i)=>{const a=this.events.get(s);a&&(a.props.properties.trace.push(i),this.events.set(s,a),this.shouldPersist=!0)}),Ln(this,"setError",(s,i)=>{const a=this.events.get(s);a&&(a.props.type=i,a.timestamp=Date.now(),this.events.set(s,a),this.shouldPersist=!0)}),Ln(this,"persist",async()=>{await this.core.storage.setItem(this.storageKey,Array.from(this.events.values())),this.shouldPersist=!1}),Ln(this,"restore",async()=>{try{const s=await this.core.storage.getItem(this.storageKey)||[];if(!s.length)return;s.forEach(i=>{this.events.set(i.eventId,ng(ng({},i),this.setMethods(i.eventId)))})}catch(s){this.logger.warn(s)}}),Ln(this,"submit",async()=>{if(!this.telemetryEnabled||this.events.size===0)return;const s=[];for(const[i,a]of this.events)a.props.type&&s.push(a);if(s.length!==0)try{if((await this.sendEvent(s)).ok)for(const i of s)this.events.delete(i.eventId),this.shouldPersist=!0}catch(i){this.logger.warn(i)}}),Ln(this,"sendEvent",async s=>{const i=this.getAppDomain()?"":"&sp=desktop";return await fetch(`${nle}?projectId=${this.core.projectId}&st=events_sdk&sv=js-${BA}${i}`,{method:"POST",body:JSON.stringify(s)})}),Ln(this,"getAppDomain",()=>kM().url),this.logger=Ur(n,this.context),this.telemetryEnabled=r,r?this.restore().then(async()=>{await this.submit(),this.setEventListeners()}):this.persist()}get storageKey(){return this.storagePrefix+this.storageVersion+this.core.customStoragePrefix+"//"+this.context}}var the=Object.defineProperty,SP=Object.getOwnPropertySymbols,nhe=Object.prototype.hasOwnProperty,rhe=Object.prototype.propertyIsEnumerable,GA=(t,e,n)=>e in t?the(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,kP=(t,e)=>{for(var n in e||(e={}))nhe.call(e,n)&&GA(t,n,e[n]);if(SP)for(var n of SP(e))rhe.call(e,n)&&GA(t,n,e[n]);return t},Gt=(t,e,n)=>GA(t,typeof e!="symbol"?e+"":e,n);let she=class qL extends zJ{constructor(e){var n;super(e),Gt(this,"protocol",IL),Gt(this,"version",PL),Gt(this,"name",LA),Gt(this,"relayUrl"),Gt(this,"projectId"),Gt(this,"customStoragePrefix"),Gt(this,"events",new Pi.EventEmitter),Gt(this,"logger"),Gt(this,"heartbeat"),Gt(this,"relayer"),Gt(this,"crypto"),Gt(this,"storage"),Gt(this,"history"),Gt(this,"expirer"),Gt(this,"pairing"),Gt(this,"verify"),Gt(this,"echoClient"),Gt(this,"linkModeSupportedApps"),Gt(this,"eventClient"),Gt(this,"initialized",!1),Gt(this,"logChunkController"),Gt(this,"on",(o,l)=>this.events.on(o,l)),Gt(this,"once",(o,l)=>this.events.once(o,l)),Gt(this,"off",(o,l)=>this.events.off(o,l)),Gt(this,"removeListener",(o,l)=>this.events.removeListener(o,l)),Gt(this,"dispatchEnvelope",({topic:o,message:l,sessionExists:u})=>{if(!o||!l)return;const d={topic:o,message:l,publishedAt:Date.now(),transportType:Xt.link_mode};this.relayer.onLinkMessageEvent(d,{sessionExists:u})});const r=this.getGlobalCore(e==null?void 0:e.customStoragePrefix);if(r)try{return this.customStoragePrefix=r.customStoragePrefix,this.logger=r.logger,this.heartbeat=r.heartbeat,this.crypto=r.crypto,this.history=r.history,this.expirer=r.expirer,this.storage=r.storage,this.relayer=r.relayer,this.pairing=r.pairing,this.verify=r.verify,this.echoClient=r.echoClient,this.linkModeSupportedApps=r.linkModeSupportedApps,this.eventClient=r.eventClient,this.initialized=r.initialized,this.logChunkController=r.logChunkController,r}catch(o){console.warn("Failed to copy global core",o)}this.projectId=e==null?void 0:e.projectId,this.relayUrl=(e==null?void 0:e.relayUrl)||jL,this.customStoragePrefix=e!=null&&e.customStoragePrefix?`:${e.customStoragePrefix}`:"";const s=dm({level:typeof(e==null?void 0:e.logger)=="string"&&e.logger?e.logger:Cce.logger,name:LA}),{logger:i,chunkLoggerController:a}=Z6({opts:s,maxSizeInBytes:e==null?void 0:e.maxLogBlobSizeInBytes,loggerOverride:e==null?void 0:e.logger});this.logChunkController=a,(n=this.logChunkController)!=null&&n.downloadLogsBlobInBrowser&&(window.downloadLogsBlobInBrowser=async()=>{var o,l;(o=this.logChunkController)!=null&&o.downloadLogsBlobInBrowser&&((l=this.logChunkController)==null||l.downloadLogsBlobInBrowser({clientId:await this.crypto.getClientId()}))}),this.logger=Ur(i,this.name),this.heartbeat=new RQ,this.crypto=new Pue(this,this.logger,e==null?void 0:e.keychain),this.history=new Fde(this,this.logger),this.expirer=new zde(this,this.logger),this.storage=e!=null&&e.storage?e.storage:new pJ(kP(kP({},Ace),e==null?void 0:e.storageOptions)),this.relayer=new sde({core:this,logger:this.logger,relayUrl:this.relayUrl,projectId:this.projectId}),this.pairing=new Lde(this,this.logger),this.verify=new Kde(this,this.logger,this.storage),this.echoClient=new Qde(this.projectId||"",this.logger),this.linkModeSupportedApps=[],this.eventClient=new ehe(this,this.logger,e==null?void 0:e.telemetryEnabled),this.setGlobalCore(this)}static async init(e){const n=new qL(e);await n.initialize();const r=await n.crypto.getClientId();return await n.storage.setItem(Lce,r),n}get context(){return Us(this.logger)}async start(){this.initialized||await this.initialize()}async getLogsBlob(){var e;return(e=this.logChunkController)==null?void 0:e.logsToBlob({clientId:await this.crypto.getClientId()})}async addLinkModeSupportedApp(e){this.linkModeSupportedApps.includes(e)||(this.linkModeSupportedApps.push(e),await this.storage.setItem(oP,this.linkModeSupportedApps))}async initialize(){this.logger.trace("Initialized");try{await this.crypto.init(),await this.history.init(),await this.expirer.init(),await this.relayer.init(),await this.heartbeat.init(),await this.pairing.init(),this.linkModeSupportedApps=await this.storage.getItem(oP)||[],this.initialized=!0,this.logger.info("Core Initialization Success")}catch(e){throw this.logger.warn(`Core Initialization Failure at epoch ${Date.now()}`,e),this.logger.error(e.message),e}}getGlobalCore(e=""){try{if(this.isGlobalCoreDisabled())return;const n=`_walletConnectCore_${e}`,r=`${n}_count`;return globalThis[r]=(globalThis[r]||0)+1,globalThis[r]>1&&console.warn(`WalletConnect Core is already initialized. This is probably a mistake and can lead to unexpected behavior. Init() was called ${globalThis[r]} times.`),globalThis[n]}catch(n){console.warn("Failed to get global WalletConnect core",n);return}}setGlobalCore(e){var n;try{if(this.isGlobalCoreDisabled())return;const r=`_walletConnectCore_${((n=e.opts)==null?void 0:n.customStoragePrefix)||""}`;globalThis[r]=e}catch(r){console.warn("Failed to set global WalletConnect core",r)}}isGlobalCoreDisabled(){try{return typeof process<"u"&&Nce.DISABLE_GLOBAL_CORE==="true"}catch{return!0}}};const ihe=she,KL="wc",GL=2,YL="client",_S=`${KL}@${GL}:${YL}:`,tN={name:YL,logger:"error"},_P="WALLETCONNECT_DEEPLINK_CHOICE",ahe="proposal",IP="Proposal expired",ohe="session",Ih=he.SEVEN_DAYS,che="engine",Bn={wc_sessionPropose:{req:{ttl:he.FIVE_MINUTES,prompt:!0,tag:1100},res:{ttl:he.FIVE_MINUTES,prompt:!1,tag:1101},reject:{ttl:he.FIVE_MINUTES,prompt:!1,tag:1120},autoReject:{ttl:he.FIVE_MINUTES,prompt:!1,tag:1121}},wc_sessionSettle:{req:{ttl:he.FIVE_MINUTES,prompt:!1,tag:1102},res:{ttl:he.FIVE_MINUTES,prompt:!1,tag:1103}},wc_sessionUpdate:{req:{ttl:he.ONE_DAY,prompt:!1,tag:1104},res:{ttl:he.ONE_DAY,prompt:!1,tag:1105}},wc_sessionExtend:{req:{ttl:he.ONE_DAY,prompt:!1,tag:1106},res:{ttl:he.ONE_DAY,prompt:!1,tag:1107}},wc_sessionRequest:{req:{ttl:he.FIVE_MINUTES,prompt:!0,tag:1108},res:{ttl:he.FIVE_MINUTES,prompt:!1,tag:1109}},wc_sessionEvent:{req:{ttl:he.FIVE_MINUTES,prompt:!0,tag:1110},res:{ttl:he.FIVE_MINUTES,prompt:!1,tag:1111}},wc_sessionDelete:{req:{ttl:he.ONE_DAY,prompt:!1,tag:1112},res:{ttl:he.ONE_DAY,prompt:!1,tag:1113}},wc_sessionPing:{req:{ttl:he.ONE_DAY,prompt:!1,tag:1114},res:{ttl:he.ONE_DAY,prompt:!1,tag:1115}},wc_sessionAuthenticate:{req:{ttl:he.ONE_HOUR,prompt:!0,tag:1116},res:{ttl:he.ONE_HOUR,prompt:!1,tag:1117},reject:{ttl:he.FIVE_MINUTES,prompt:!1,tag:1118},autoReject:{ttl:he.FIVE_MINUTES,prompt:!1,tag:1119}}},nN={min:he.FIVE_MINUTES,max:he.SEVEN_DAYS},Ta={idle:"IDLE",active:"ACTIVE"},lhe={eth_sendTransaction:{key:""},eth_sendRawTransaction:{key:""},wallet_sendCalls:{key:""},solana_signTransaction:{key:"signature"},solana_signAllTransactions:{key:"transactions"},solana_signAndSendTransaction:{key:"signature"},sui_signAndExecuteTransaction:{key:"digest"},sui_signTransaction:{key:""},hedera_signAndExecuteTransaction:{key:"transactionId"},hedera_executeTransaction:{key:"transactionId"},near_signTransaction:{key:""},near_signTransactions:{key:""},tron_signTransaction:{key:"txID"},xrpl_signTransaction:{key:""},xrpl_signTransactionFor:{key:""},algo_signTxn:{key:""},sendTransfer:{key:"txid"},stacks_stxTransfer:{key:"txId"},polkadot_signTransaction:{key:""},cosmos_signDirect:{key:""}},uhe="request",dhe=["wc_sessionPropose","wc_sessionRequest","wc_authRequest","wc_sessionAuthenticate"],hhe="wc",fhe="auth",phe="authKeys",mhe="pairingTopics",ghe="requests",tE=`${hhe}@${1.5}:${fhe}:`,dx=`${tE}:PUB_KEY`;var yhe=Object.defineProperty,whe=Object.defineProperties,bhe=Object.getOwnPropertyDescriptors,PP=Object.getOwnPropertySymbols,xhe=Object.prototype.hasOwnProperty,vhe=Object.prototype.propertyIsEnumerable,YA=(t,e,n)=>e in t?yhe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Jt=(t,e)=>{for(var n in e||(e={}))xhe.call(e,n)&&YA(t,n,e[n]);if(PP)for(var n of PP(e))vhe.call(e,n)&&YA(t,n,e[n]);return t},hs=(t,e)=>whe(t,bhe(e)),ae=(t,e,n)=>YA(t,typeof e!="symbol"?e+"":e,n);class Ehe extends oZ{constructor(e){super(e),ae(this,"name",che),ae(this,"events",new Q6),ae(this,"initialized",!1),ae(this,"requestQueue",{state:Ta.idle,queue:[]}),ae(this,"sessionRequestQueue",{state:Ta.idle,queue:[]}),ae(this,"requestQueueDelay",he.ONE_SECOND),ae(this,"expectedPairingMethodMap",new Map),ae(this,"recentlyDeletedMap",new Map),ae(this,"recentlyDeletedLimit",200),ae(this,"relayMessageCache",[]),ae(this,"pendingSessions",new Map),ae(this,"init",async()=>{this.initialized||(await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.registerPairingEvents(),await this.registerLinkModeListeners(),this.client.core.pairing.register({methods:Object.keys(Bn)}),this.initialized=!0,setTimeout(async()=>{await this.processPendingMessageEvents(),this.sessionRequestQueue.queue=this.getPendingSessionRequests(),this.processSessionRequestQueue()},he.toMiliseconds(this.requestQueueDelay)))}),ae(this,"connect",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();const r=hs(Jt({},n),{requiredNamespaces:n.requiredNamespaces||{},optionalNamespaces:n.optionalNamespaces||{}});await this.isValidConnect(r),r.optionalNamespaces=moe(r.requiredNamespaces,r.optionalNamespaces),r.requiredNamespaces={};const{pairingTopic:s,requiredNamespaces:i,optionalNamespaces:a,sessionProperties:o,scopedProperties:l,relays:u}=r;let d=s,h,f=!1;try{if(d){const j=this.client.core.pairing.pairings.get(d);this.client.logger.warn("connect() with existing pairing topic is deprecated and will be removed in the next major release."),f=j.active}}catch(j){throw this.client.logger.error(`connect() -> pairing.get(${d}) failed`),j}if(!d||!f){const{topic:j,uri:P}=await this.client.core.pairing.create();d=j,h=P}if(!d){const{message:j}=fe("NO_MATCHING_KEY",`connect() pairing topic: ${d}`);throw new Error(j)}const p=await this.client.core.crypto.generateKeyPair(),g=Bn.wc_sessionPropose.req.ttl||he.FIVE_MINUTES,m=Pn(g),y=hs(Jt(Jt({requiredNamespaces:i,optionalNamespaces:a,relays:u??[{protocol:RL}],proposer:{publicKey:p,metadata:this.client.metadata},expiryTimestamp:m,pairingTopic:d},o&&{sessionProperties:o}),l&&{scopedProperties:l}),{id:Ra()}),b=jt("session_connect",y.id),{reject:w,resolve:x,done:A}=Eu(g,IP),T=({id:j})=>{j===y.id&&(this.client.events.off("proposal_expire",T),this.pendingSessions.delete(y.id),this.events.emit(b,{error:{message:IP,code:0}}))};return this.client.events.on("proposal_expire",T),this.events.once(b,({error:j,session:P})=>{this.client.events.off("proposal_expire",T),j?w(j):P&&x(P)}),await this.sendRequest({topic:d,method:"wc_sessionPropose",params:y,throwOnFailedPublish:!0,clientRpcId:y.id}),await this.setProposal(y.id,y),{uri:h,approval:A}}),ae(this,"pair",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{return await this.client.core.pairing.pair(n)}catch(r){throw this.client.logger.error("pair() failed"),r}}),ae(this,"approve",async n=>{var r,s,i;const a=this.client.core.eventClient.createEvent({properties:{topic:(r=n==null?void 0:n.id)==null?void 0:r.toString(),trace:[Li.session_approve_started]}});try{this.isInitialized(),await this.confirmOnlineStateOrThrow()}catch(E){throw a.setError(du.no_internet_connection),E}try{await this.isValidProposalId(n==null?void 0:n.id)}catch(E){throw this.client.logger.error(`approve() -> proposal.get(${n==null?void 0:n.id}) failed`),a.setError(du.proposal_not_found),E}try{await this.isValidApprove(n)}catch(E){throw this.client.logger.error("approve() -> isValidApprove() failed"),a.setError(du.session_approve_namespace_validation_failure),E}const{id:o,relayProtocol:l,namespaces:u,sessionProperties:d,scopedProperties:h,sessionConfig:f}=n,p=this.client.proposal.get(o);this.client.core.eventClient.deleteEvent({eventId:a.eventId});const{pairingTopic:g,proposer:m,requiredNamespaces:y,optionalNamespaces:b}=p;let w=(s=this.client.core.eventClient)==null?void 0:s.getEvent({topic:g});w||(w=(i=this.client.core.eventClient)==null?void 0:i.createEvent({type:Li.session_approve_started,properties:{topic:g,trace:[Li.session_approve_started,Li.session_namespaces_validation_success]}}));const x=await this.client.core.crypto.generateKeyPair(),A=m.publicKey,T=await this.client.core.crypto.generateSharedKey(x,A),j=Jt(Jt(Jt({relay:{protocol:l??"irn"},namespaces:u,controller:{publicKey:x,metadata:this.client.metadata},expiry:Pn(Ih)},d&&{sessionProperties:d}),h&&{scopedProperties:h}),f&&{sessionConfig:f}),P=Xt.relay;w.addTrace(Li.subscribing_session_topic);try{await this.client.core.relayer.subscribe(T,{transportType:P})}catch(E){throw w.setError(du.subscribe_session_topic_failure),E}w.addTrace(Li.subscribe_session_topic_success);const S=hs(Jt({},j),{topic:T,requiredNamespaces:y,optionalNamespaces:b,pairingTopic:g,acknowledged:!1,self:j.controller,peer:{publicKey:m.publicKey,metadata:m.metadata},controller:x,transportType:Xt.relay});await this.client.session.set(T,S),w.addTrace(Li.store_session);try{w.addTrace(Li.publishing_session_settle),await this.sendRequest({topic:T,method:"wc_sessionSettle",params:j,throwOnFailedPublish:!0}).catch(E=>{throw w==null||w.setError(du.session_settle_publish_failure),E}),w.addTrace(Li.session_settle_publish_success),w.addTrace(Li.publishing_session_approve),await this.sendResult({id:o,topic:g,result:{relay:{protocol:l??"irn"},responderPublicKey:x},throwOnFailedPublish:!0}).catch(E=>{throw w==null||w.setError(du.session_approve_publish_failure),E}),w.addTrace(Li.session_approve_publish_success)}catch(E){throw this.client.logger.error(E),this.client.session.delete(T,rn("USER_DISCONNECTED")),await this.client.core.relayer.unsubscribe(T),E}return this.client.core.eventClient.deleteEvent({eventId:w.eventId}),await this.client.core.pairing.updateMetadata({topic:g,metadata:m.metadata}),await this.deleteProposal(o),await this.client.core.pairing.activate({topic:g}),await this.setExpiry(T,Pn(Ih)),{topic:T,acknowledged:()=>Promise.resolve(this.client.session.get(T))}}),ae(this,"reject",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidReject(n)}catch(a){throw this.client.logger.error("reject() -> isValidReject() failed"),a}const{id:r,reason:s}=n;let i;try{i=this.client.proposal.get(r).pairingTopic}catch(a){throw this.client.logger.error(`reject() -> proposal.get(${r}) failed`),a}i&&await this.sendError({id:r,topic:i,error:s,rpcOpts:Bn.wc_sessionPropose.reject}),await this.deleteProposal(r)}),ae(this,"update",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidUpdate(n)}catch(h){throw this.client.logger.error("update() -> isValidUpdate() failed"),h}const{topic:r,namespaces:s}=n,{done:i,resolve:a,reject:o}=Eu(),l=Ra(),u=Wu().toString(),d=this.client.session.get(r).namespaces;return this.events.once(jt("session_update",l),({error:h})=>{h?o(h):a()}),await this.client.session.update(r,{namespaces:s}),await this.sendRequest({topic:r,method:"wc_sessionUpdate",params:{namespaces:s},throwOnFailedPublish:!0,clientRpcId:l,relayRpcId:u}).catch(h=>{this.client.logger.error(h),this.client.session.update(r,{namespaces:d}),o(h)}),{acknowledged:i}}),ae(this,"extend",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidExtend(n)}catch(l){throw this.client.logger.error("extend() -> isValidExtend() failed"),l}const{topic:r}=n,s=Ra(),{done:i,resolve:a,reject:o}=Eu();return this.events.once(jt("session_extend",s),({error:l})=>{l?o(l):a()}),await this.setExpiry(r,Pn(Ih)),this.sendRequest({topic:r,method:"wc_sessionExtend",params:{},clientRpcId:s,throwOnFailedPublish:!0}).catch(l=>{o(l)}),{acknowledged:i}}),ae(this,"request",async n=>{this.isInitialized();try{await this.isValidRequest(n)}catch(y){throw this.client.logger.error("request() -> isValidRequest() failed"),y}const{chainId:r,request:s,topic:i,expiry:a=Bn.wc_sessionRequest.req.ttl}=n,o=this.client.session.get(i);(o==null?void 0:o.transportType)===Xt.relay&&await this.confirmOnlineStateOrThrow();const l=Ra(),u=Wu().toString(),{done:d,resolve:h,reject:f}=Eu(a,"Request expired. Please try again.");this.events.once(jt("session_request",l),({error:y,result:b})=>{y?f(y):h(b)});const p="wc_sessionRequest",g=this.getAppLinkIfEnabled(o.peer.metadata,o.transportType);if(g)return await this.sendRequest({clientRpcId:l,relayRpcId:u,topic:i,method:p,params:{request:hs(Jt({},s),{expiryTimestamp:Pn(a)}),chainId:r},expiry:a,throwOnFailedPublish:!0,appLink:g}).catch(y=>f(y)),this.client.events.emit("session_request_sent",{topic:i,request:s,chainId:r,id:l}),await d();const m={request:hs(Jt({},s),{expiryTimestamp:Pn(a)}),chainId:r};return await Promise.all([new Promise(async y=>{await this.sendRequest({clientRpcId:l,relayRpcId:u,topic:i,method:p,params:m,expiry:a,throwOnFailedPublish:!0,tvf:this.getTVFParams(l,m)}).catch(b=>f(b)),this.client.events.emit("session_request_sent",{topic:i,request:s,chainId:r,id:l}),y()}),new Promise(async y=>{var b;if(!((b=o.sessionConfig)!=null&&b.disableDeepLink)){const w=await use(this.client.core.storage,_P);await ose({id:l,topic:i,wcDeepLink:w})}y()}),d()]).then(y=>y[2])}),ae(this,"respond",async n=>{this.isInitialized(),await this.isValidRespond(n);const{topic:r,response:s}=n,{id:i}=s,a=this.client.session.get(r);a.transportType===Xt.relay&&await this.confirmOnlineStateOrThrow();const o=this.getAppLinkIfEnabled(a.peer.metadata,a.transportType);ja(s)?await this.sendResult({id:i,topic:r,result:s.result,throwOnFailedPublish:!0,appLink:o}):xi(s)&&await this.sendError({id:i,topic:r,error:s.error,appLink:o}),this.cleanupAfterResponse(n)}),ae(this,"ping",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidPing(n)}catch(s){throw this.client.logger.error("ping() -> isValidPing() failed"),s}const{topic:r}=n;if(this.client.session.keys.includes(r)){const s=Ra(),i=Wu().toString(),{done:a,resolve:o,reject:l}=Eu();this.events.once(jt("session_ping",s),({error:u})=>{u?l(u):o()}),await Promise.all([this.sendRequest({topic:r,method:"wc_sessionPing",params:{},throwOnFailedPublish:!0,clientRpcId:s,relayRpcId:i}),a()])}else this.client.core.pairing.pairings.keys.includes(r)&&(this.client.logger.warn("ping() on pairing topic is deprecated and will be removed in the next major release."),await this.client.core.pairing.ping({topic:r}))}),ae(this,"emit",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow(),await this.isValidEmit(n);const{topic:r,event:s,chainId:i}=n,a=Wu().toString(),o=Ra();await this.sendRequest({topic:r,method:"wc_sessionEvent",params:{event:s,chainId:i},throwOnFailedPublish:!0,relayRpcId:a,clientRpcId:o})}),ae(this,"disconnect",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow(),await this.isValidDisconnect(n);const{topic:r}=n;if(this.client.session.keys.includes(r))await this.sendRequest({topic:r,method:"wc_sessionDelete",params:rn("USER_DISCONNECTED"),throwOnFailedPublish:!0}),await this.deleteSession({topic:r,emitEvent:!1});else if(this.client.core.pairing.pairings.keys.includes(r))await this.client.core.pairing.disconnect({topic:r});else{const{message:s}=fe("MISMATCHED_TOPIC",`Session or pairing topic not found: ${r}`);throw new Error(s)}}),ae(this,"find",n=>(this.isInitialized(),this.client.session.getAll().filter(r=>woe(r,n)))),ae(this,"getPendingSessionRequests",()=>this.client.pendingRequest.getAll()),ae(this,"authenticate",async(n,r)=>{var s;this.isInitialized(),this.isValidAuthenticate(n);const i=r&&this.client.core.linkModeSupportedApps.includes(r)&&((s=this.client.metadata.redirect)==null?void 0:s.linkMode),a=i?Xt.link_mode:Xt.relay;a===Xt.relay&&await this.confirmOnlineStateOrThrow();const{chains:o,statement:l="",uri:u,domain:d,nonce:h,type:f,exp:p,nbf:g,methods:m=[],expiry:y}=n,b=[...n.resources||[]],{topic:w,uri:x}=await this.client.core.pairing.create({methods:["wc_sessionAuthenticate"],transportType:a});this.client.logger.info({message:"Generated new pairing",pairing:{topic:w,uri:x}});const A=await this.client.core.crypto.generateKeyPair(),T=lx(A);if(await Promise.all([this.client.auth.authKeys.set(dx,{responseTopic:T,publicKey:A}),this.client.auth.pairingTopics.set(T,{topic:T,pairingTopic:w})]),await this.client.core.relayer.subscribe(T,{transportType:a}),this.client.logger.info(`sending request to new pairing topic: ${w}`),m.length>0){const{namespace:L}=Rf(o[0]);let $=Aie(L,"request",m);cx(b)&&($=Sie($,b.pop())),b.push($)}const j=y&&y>Bn.wc_sessionAuthenticate.req.ttl?y:Bn.wc_sessionAuthenticate.req.ttl,P={authPayload:{type:f??"caip122",chains:o,statement:l,aud:u,domain:d,version:"1",nonce:h,iat:new Date().toISOString(),exp:p,nbf:g,resources:b},requester:{publicKey:A,metadata:this.client.metadata},expiryTimestamp:Pn(j)},S={eip155:{chains:o,methods:[...new Set(["personal_sign",...m])],events:["chainChanged","accountsChanged"]}},E={requiredNamespaces:{},optionalNamespaces:S,relays:[{protocol:"irn"}],pairingTopic:w,proposer:{publicKey:A,metadata:this.client.metadata},expiryTimestamp:Pn(Bn.wc_sessionPropose.req.ttl),id:Ra()},{done:k,resolve:R,reject:O}=Eu(j,"Request expired"),F=Ra(),z=jt("session_connect",E.id),N=jt("session_request",F),I=async({error:L,session:$})=>{this.events.off(N,M),L?O(L):$&&R({session:$})},M=async L=>{var $,V,q;if(await this.deletePendingAuthRequest(F,{message:"fulfilled",code:0}),L.error){const ge=rn("WC_METHOD_UNSUPPORTED","wc_sessionAuthenticate");return L.error.code===ge.code?void 0:(this.events.off(z,I),O(L.error.message))}await this.deleteProposal(E.id),this.events.off(z,I);const{cacaos:G,responder:Z}=L.result,oe=[],xe=[];for(const ge of G){await xI({cacao:ge,projectId:this.client.core.projectId})||(this.client.logger.error(ge,"Signature verification failed"),O(rn("SESSION_SETTLEMENT_FAILED","Signature verification failed")));const{p:Le}=ge,je=cx(Le.resources),kt=[SA(Le.iss)],et=Cv(Le.iss);if(je){const De=vI(je),Dt=EI(je);oe.push(...De),kt.push(...Dt)}for(const De of kt)xe.push(`${De}:${et}`)}const J=await this.client.core.crypto.generateSharedKey(A,Z.publicKey);let ve;oe.length>0&&(ve={topic:J,acknowledged:!0,self:{publicKey:A,metadata:this.client.metadata},peer:Z,controller:Z.publicKey,expiry:Pn(Ih),requiredNamespaces:{},optionalNamespaces:{},relay:{protocol:"irn"},pairingTopic:w,namespaces:qI([...new Set(oe)],[...new Set(xe)]),transportType:a},await this.client.core.relayer.subscribe(J,{transportType:a}),await this.client.session.set(J,ve),w&&await this.client.core.pairing.updateMetadata({topic:w,metadata:Z.metadata}),ve=this.client.session.get(J)),($=this.client.metadata.redirect)!=null&&$.linkMode&&(V=Z.metadata.redirect)!=null&&V.linkMode&&(q=Z.metadata.redirect)!=null&&q.universal&&r&&(this.client.core.addLinkModeSupportedApp(Z.metadata.redirect.universal),this.client.session.update(J,{transportType:Xt.link_mode})),R({auths:G,session:ve})};this.events.once(z,I),this.events.once(N,M);let D;try{if(i){const L=Cl("wc_sessionAuthenticate",P,F);this.client.core.history.set(w,L);const $=await this.client.core.crypto.encode("",L,{type:fw,encoding:Zc});D=wb(r,w,$)}else await Promise.all([this.sendRequest({topic:w,method:"wc_sessionAuthenticate",params:P,expiry:n.expiry,throwOnFailedPublish:!0,clientRpcId:F}),this.sendRequest({topic:w,method:"wc_sessionPropose",params:E,expiry:Bn.wc_sessionPropose.req.ttl,throwOnFailedPublish:!0,clientRpcId:E.id})])}catch(L){throw this.events.off(z,I),this.events.off(N,M),L}return await this.setProposal(E.id,E),await this.setAuthRequest(F,{request:hs(Jt({},P),{verifyContext:{}}),pairingTopic:w,transportType:a}),{uri:D??x,response:k}}),ae(this,"approveSessionAuthenticate",async n=>{const{id:r,auths:s}=n,i=this.client.core.eventClient.createEvent({properties:{topic:r.toString(),trace:[hu.authenticated_session_approve_started]}});try{this.isInitialized()}catch(y){throw i.setError(eg.no_internet_connection),y}const a=this.getPendingAuthRequest(r);if(!a)throw i.setError(eg.authenticated_session_pending_request_not_found),new Error(`Could not find pending auth request with id ${r}`);const o=a.transportType||Xt.relay;o===Xt.relay&&await this.confirmOnlineStateOrThrow();const l=a.requester.publicKey,u=await this.client.core.crypto.generateKeyPair(),d=lx(l),h={type:ec,receiverPublicKey:l,senderPublicKey:u},f=[],p=[];for(const y of s){if(!await xI({cacao:y,projectId:this.client.core.projectId})){i.setError(eg.invalid_cacao);const T=rn("SESSION_SETTLEMENT_FAILED","Signature verification failed");throw await this.sendError({id:r,topic:d,error:T,encodeOpts:h}),new Error(T.message)}i.addTrace(hu.cacaos_verified);const{p:b}=y,w=cx(b.resources),x=[SA(b.iss)],A=Cv(b.iss);if(w){const T=vI(w),j=EI(w);f.push(...T),x.push(...j)}for(const T of x)p.push(`${T}:${A}`)}const g=await this.client.core.crypto.generateSharedKey(u,l);i.addTrace(hu.create_authenticated_session_topic);let m;if((f==null?void 0:f.length)>0){m={topic:g,acknowledged:!0,self:{publicKey:u,metadata:this.client.metadata},peer:{publicKey:l,metadata:a.requester.metadata},controller:l,expiry:Pn(Ih),authentication:s,requiredNamespaces:{},optionalNamespaces:{},relay:{protocol:"irn"},pairingTopic:a.pairingTopic,namespaces:qI([...new Set(f)],[...new Set(p)]),transportType:o},i.addTrace(hu.subscribing_authenticated_session_topic);try{await this.client.core.relayer.subscribe(g,{transportType:o})}catch(y){throw i.setError(eg.subscribe_authenticated_session_topic_failure),y}i.addTrace(hu.subscribe_authenticated_session_topic_success),await this.client.session.set(g,m),i.addTrace(hu.store_authenticated_session),await this.client.core.pairing.updateMetadata({topic:a.pairingTopic,metadata:a.requester.metadata})}i.addTrace(hu.publishing_authenticated_session_approve);try{await this.sendResult({topic:d,id:r,result:{cacaos:s,responder:{publicKey:u,metadata:this.client.metadata}},encodeOpts:h,throwOnFailedPublish:!0,appLink:this.getAppLinkIfEnabled(a.requester.metadata,o)})}catch(y){throw i.setError(eg.authenticated_session_approve_publish_failure),y}return await this.client.auth.requests.delete(r,{message:"fulfilled",code:0}),await this.client.core.pairing.activate({topic:a.pairingTopic}),this.client.core.eventClient.deleteEvent({eventId:i.eventId}),{session:m}}),ae(this,"rejectSessionAuthenticate",async n=>{this.isInitialized();const{id:r,reason:s}=n,i=this.getPendingAuthRequest(r);if(!i)throw new Error(`Could not find pending auth request with id ${r}`);i.transportType===Xt.relay&&await this.confirmOnlineStateOrThrow();const a=i.requester.publicKey,o=await this.client.core.crypto.generateKeyPair(),l=lx(a),u={type:ec,receiverPublicKey:a,senderPublicKey:o};await this.sendError({id:r,topic:l,error:s,encodeOpts:u,rpcOpts:Bn.wc_sessionAuthenticate.reject,appLink:this.getAppLinkIfEnabled(i.requester.metadata,i.transportType)}),await this.client.auth.requests.delete(r,{message:"rejected",code:0}),await this.deleteProposal(r)}),ae(this,"formatAuthMessage",n=>{this.isInitialized();const{request:r,iss:s}=n;return qM(r,s)}),ae(this,"processRelayMessageCache",()=>{setTimeout(async()=>{if(this.relayMessageCache.length!==0)for(;this.relayMessageCache.length>0;)try{const n=this.relayMessageCache.shift();n&&await this.onRelayMessage(n)}catch(n){this.client.logger.error(n)}},50)}),ae(this,"cleanupDuplicatePairings",async n=>{if(n.pairingTopic)try{const r=this.client.core.pairing.pairings.get(n.pairingTopic),s=this.client.core.pairing.pairings.getAll().filter(i=>{var a,o;return((a=i.peerMetadata)==null?void 0:a.url)&&((o=i.peerMetadata)==null?void 0:o.url)===n.peer.metadata.url&&i.topic&&i.topic!==r.topic});if(s.length===0)return;this.client.logger.info(`Cleaning up ${s.length} duplicate pairing(s)`),await Promise.all(s.map(i=>this.client.core.pairing.disconnect({topic:i.topic}))),this.client.logger.info("Duplicate pairings clean up finished")}catch(r){this.client.logger.error(r)}}),ae(this,"deleteSession",async n=>{var r;const{topic:s,expirerHasDeleted:i=!1,emitEvent:a=!0,id:o=0}=n,{self:l}=this.client.session.get(s);await this.client.core.relayer.unsubscribe(s),await this.client.session.delete(s,rn("USER_DISCONNECTED")),this.addToRecentlyDeleted(s,"session"),this.client.core.crypto.keychain.has(l.publicKey)&&await this.client.core.crypto.deleteKeyPair(l.publicKey),this.client.core.crypto.keychain.has(s)&&await this.client.core.crypto.deleteSymKey(s),i||this.client.core.expirer.del(s),this.client.core.storage.removeItem(_P).catch(u=>this.client.logger.warn(u)),this.getPendingSessionRequests().forEach(u=>{u.topic===s&&this.deletePendingSessionRequest(u.id,rn("USER_DISCONNECTED"))}),s===((r=this.sessionRequestQueue.queue[0])==null?void 0:r.topic)&&(this.sessionRequestQueue.state=Ta.idle),a&&this.client.events.emit("session_delete",{id:o,topic:s})}),ae(this,"deleteProposal",async(n,r)=>{if(r)try{const s=this.client.proposal.get(n),i=this.client.core.eventClient.getEvent({topic:s.pairingTopic});i==null||i.setError(du.proposal_expired)}catch{}await Promise.all([this.client.proposal.delete(n,rn("USER_DISCONNECTED")),r?Promise.resolve():this.client.core.expirer.del(n)]),this.addToRecentlyDeleted(n,"proposal")}),ae(this,"deletePendingSessionRequest",async(n,r,s=!1)=>{await Promise.all([this.client.pendingRequest.delete(n,r),s?Promise.resolve():this.client.core.expirer.del(n)]),this.addToRecentlyDeleted(n,"request"),this.sessionRequestQueue.queue=this.sessionRequestQueue.queue.filter(i=>i.id!==n),s&&(this.sessionRequestQueue.state=Ta.idle,this.client.events.emit("session_request_expire",{id:n}))}),ae(this,"deletePendingAuthRequest",async(n,r,s=!1)=>{await Promise.all([this.client.auth.requests.delete(n,r),s?Promise.resolve():this.client.core.expirer.del(n)])}),ae(this,"setExpiry",async(n,r)=>{this.client.session.keys.includes(n)&&(this.client.core.expirer.set(n,r),await this.client.session.update(n,{expiry:r}))}),ae(this,"setProposal",async(n,r)=>{this.client.core.expirer.set(n,Pn(Bn.wc_sessionPropose.req.ttl)),await this.client.proposal.set(n,r)}),ae(this,"setAuthRequest",async(n,r)=>{const{request:s,pairingTopic:i,transportType:a=Xt.relay}=r;this.client.core.expirer.set(n,s.expiryTimestamp),await this.client.auth.requests.set(n,{authPayload:s.authPayload,requester:s.requester,expiryTimestamp:s.expiryTimestamp,id:n,pairingTopic:i,verifyContext:s.verifyContext,transportType:a})}),ae(this,"setPendingSessionRequest",async n=>{const{id:r,topic:s,params:i,verifyContext:a}=n,o=i.request.expiryTimestamp||Pn(Bn.wc_sessionRequest.req.ttl);this.client.core.expirer.set(r,o),await this.client.pendingRequest.set(r,{id:r,topic:s,params:i,verifyContext:a})}),ae(this,"sendRequest",async n=>{const{topic:r,method:s,params:i,expiry:a,relayRpcId:o,clientRpcId:l,throwOnFailedPublish:u,appLink:d,tvf:h}=n,f=Cl(s,i,l);let p;const g=!!d;try{const b=g?Zc:sa;p=await this.client.core.crypto.encode(r,f,{encoding:b})}catch(b){throw await this.cleanup(),this.client.logger.error(`sendRequest() -> core.crypto.encode() for topic ${r} failed`),b}let m;if(dhe.includes(s)){const b=Wa(JSON.stringify(f)),w=Wa(p);m=await this.client.core.verify.register({id:w,decryptedId:b})}const y=Bn[s].req;if(y.attestation=m,a&&(y.ttl=a),o&&(y.id=o),this.client.core.history.set(r,f),g){const b=wb(d,r,p);await globalThis.Linking.openURL(b,this.client.name)}else{const b=Bn[s].req;a&&(b.ttl=a),o&&(b.id=o),b.tvf=hs(Jt({},h),{correlationId:f.id}),u?(b.internal=hs(Jt({},b.internal),{throwOnFailedPublish:!0}),await this.client.core.relayer.publish(r,p,b)):this.client.core.relayer.publish(r,p,b).catch(w=>this.client.logger.error(w))}return f.id}),ae(this,"sendResult",async n=>{const{id:r,topic:s,result:i,throwOnFailedPublish:a,encodeOpts:o,appLink:l}=n,u=J1(r,i);let d;const h=l&&typeof(globalThis==null?void 0:globalThis.Linking)<"u";try{const g=h?Zc:sa;d=await this.client.core.crypto.encode(s,u,hs(Jt({},o||{}),{encoding:g}))}catch(g){throw await this.cleanup(),this.client.logger.error(`sendResult() -> core.crypto.encode() for topic ${s} failed`),g}let f,p;try{f=await this.client.core.history.get(s,r);const g=f.request;try{p=this.getTVFParams(r,g.params,i)}catch(m){this.client.logger.warn(`sendResult() -> getTVFParams() failed: ${m==null?void 0:m.message}`)}}catch(g){throw this.client.logger.error(`sendResult() -> history.get(${s}, ${r}) failed`),g}if(h){const g=wb(l,s,d);await globalThis.Linking.openURL(g,this.client.name)}else{const g=f.request.method,m=Bn[g].res;m.tvf=hs(Jt({},p),{correlationId:r}),a?(m.internal=hs(Jt({},m.internal),{throwOnFailedPublish:!0}),await this.client.core.relayer.publish(s,d,m)):this.client.core.relayer.publish(s,d,m).catch(y=>this.client.logger.error(y))}await this.client.core.history.resolve(u)}),ae(this,"sendError",async n=>{const{id:r,topic:s,error:i,encodeOpts:a,rpcOpts:o,appLink:l}=n,u=Z1(r,i);let d;const h=l&&typeof(globalThis==null?void 0:globalThis.Linking)<"u";try{const p=h?Zc:sa;d=await this.client.core.crypto.encode(s,u,hs(Jt({},a||{}),{encoding:p}))}catch(p){throw await this.cleanup(),this.client.logger.error(`sendError() -> core.crypto.encode() for topic ${s} failed`),p}let f;try{f=await this.client.core.history.get(s,r)}catch(p){throw this.client.logger.error(`sendError() -> history.get(${s}, ${r}) failed`),p}if(h){const p=wb(l,s,d);await globalThis.Linking.openURL(p,this.client.name)}else{const p=f.request.method,g=o||Bn[p].res;this.client.core.relayer.publish(s,d,g)}await this.client.core.history.resolve(u)}),ae(this,"cleanup",async()=>{const n=[],r=[];this.client.session.getAll().forEach(s=>{let i=!1;Wc(s.expiry)&&(i=!0),this.client.core.crypto.keychain.has(s.topic)||(i=!0),i&&n.push(s.topic)}),this.client.proposal.getAll().forEach(s=>{Wc(s.expiryTimestamp)&&r.push(s.id)}),await Promise.all([...n.map(s=>this.deleteSession({topic:s})),...r.map(s=>this.deleteProposal(s))])}),ae(this,"onProviderMessageEvent",async n=>{!this.initialized||this.relayMessageCache.length>0?this.relayMessageCache.push(n):await this.onRelayMessage(n)}),ae(this,"onRelayEventRequest",async n=>{this.requestQueue.queue.push(n),await this.processRequestsQueue()}),ae(this,"processRequestsQueue",async()=>{if(this.requestQueue.state===Ta.active){this.client.logger.info("Request queue already active, skipping...");return}for(this.client.logger.info(`Request queue starting with ${this.requestQueue.queue.length} requests`);this.requestQueue.queue.length>0;){this.requestQueue.state=Ta.active;const n=this.requestQueue.queue.shift();if(n)try{await this.processRequest(n)}catch(r){this.client.logger.warn(r)}}this.requestQueue.state=Ta.idle}),ae(this,"processRequest",async n=>{const{topic:r,payload:s,attestation:i,transportType:a,encryptedId:o}=n,l=s.method;if(!this.shouldIgnorePairingRequest({topic:r,requestMethod:l}))switch(l){case"wc_sessionPropose":return await this.onSessionProposeRequest({topic:r,payload:s,attestation:i,encryptedId:o});case"wc_sessionSettle":return await this.onSessionSettleRequest(r,s);case"wc_sessionUpdate":return await this.onSessionUpdateRequest(r,s);case"wc_sessionExtend":return await this.onSessionExtendRequest(r,s);case"wc_sessionPing":return await this.onSessionPingRequest(r,s);case"wc_sessionDelete":return await this.onSessionDeleteRequest(r,s);case"wc_sessionRequest":return await this.onSessionRequest({topic:r,payload:s,attestation:i,encryptedId:o,transportType:a});case"wc_sessionEvent":return await this.onSessionEventRequest(r,s);case"wc_sessionAuthenticate":return await this.onSessionAuthenticateRequest({topic:r,payload:s,attestation:i,encryptedId:o,transportType:a});default:return this.client.logger.info(`Unsupported request method ${l}`)}}),ae(this,"onRelayEventResponse",async n=>{const{topic:r,payload:s,transportType:i}=n,a=(await this.client.core.history.get(r,s.id)).request.method;switch(a){case"wc_sessionPropose":return this.onSessionProposeResponse(r,s,i);case"wc_sessionSettle":return this.onSessionSettleResponse(r,s);case"wc_sessionUpdate":return this.onSessionUpdateResponse(r,s);case"wc_sessionExtend":return this.onSessionExtendResponse(r,s);case"wc_sessionPing":return this.onSessionPingResponse(r,s);case"wc_sessionRequest":return this.onSessionRequestResponse(r,s);case"wc_sessionAuthenticate":return this.onSessionAuthenticateResponse(r,s);default:return this.client.logger.info(`Unsupported response method ${a}`)}}),ae(this,"onRelayEventUnknownPayload",n=>{const{topic:r}=n,{message:s}=fe("MISSING_OR_INVALID",`Decoded payload on topic ${r} is not identifiable as a JSON-RPC request or a response.`);throw new Error(s)}),ae(this,"shouldIgnorePairingRequest",n=>{const{topic:r,requestMethod:s}=n,i=this.expectedPairingMethodMap.get(r);return!i||i.includes(s)?!1:!!(i.includes("wc_sessionAuthenticate")&&this.client.events.listenerCount("session_authenticate")>0)}),ae(this,"onSessionProposeRequest",async n=>{const{topic:r,payload:s,attestation:i,encryptedId:a}=n,{params:o,id:l}=s;try{const u=this.client.core.eventClient.getEvent({topic:r});this.client.events.listenerCount("session_proposal")===0&&(console.warn("No listener for session_proposal event"),u==null||u.setError(So.proposal_listener_not_found)),this.isValidConnect(Jt({},s.params));const d=o.expiryTimestamp||Pn(Bn.wc_sessionPropose.req.ttl),h=Jt({id:l,pairingTopic:r,expiryTimestamp:d,attestation:i,encryptedId:a},o);await this.setProposal(l,h);const f=await this.getVerifyContext({attestationId:i,hash:Wa(JSON.stringify(s)),encryptedId:a,metadata:h.proposer.metadata});u==null||u.addTrace(Ia.emit_session_proposal),this.client.events.emit("session_proposal",{id:l,params:h,verifyContext:f})}catch(u){await this.sendError({id:l,topic:r,error:u,rpcOpts:Bn.wc_sessionPropose.autoReject}),this.client.logger.error(u)}}),ae(this,"onSessionProposeResponse",async(n,r,s)=>{const{id:i}=r;if(ja(r)){const{result:a}=r;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",result:a});const o=this.client.proposal.get(i);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",proposal:o});const l=o.proposer.publicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",selfPublicKey:l});const u=a.responderPublicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",peerPublicKey:u});const d=await this.client.core.crypto.generateSharedKey(l,u);this.pendingSessions.set(i,{sessionTopic:d,pairingTopic:n,proposalId:i,publicKey:l});const h=await this.client.core.relayer.subscribe(d,{transportType:s});this.client.logger.trace({type:"method",method:"onSessionProposeResponse",subscriptionId:h}),await this.client.core.pairing.activate({topic:n})}else if(xi(r)){await this.deleteProposal(i);const a=jt("session_connect",i);if(this.events.listenerCount(a)===0)throw new Error(`emitting ${a} without any listeners, 954`);this.events.emit(a,{error:r.error})}}),ae(this,"onSessionSettleRequest",async(n,r)=>{const{id:s,params:i}=r;try{this.isValidSessionSettleRequest(i);const{relay:a,controller:o,expiry:l,namespaces:u,sessionProperties:d,scopedProperties:h,sessionConfig:f}=r.params,p=[...this.pendingSessions.values()].find(y=>y.sessionTopic===n);if(!p)return this.client.logger.error(`Pending session not found for topic ${n}`);const g=this.client.proposal.get(p.proposalId),m=hs(Jt(Jt(Jt({topic:n,relay:a,expiry:l,namespaces:u,acknowledged:!0,pairingTopic:p.pairingTopic,requiredNamespaces:g.requiredNamespaces,optionalNamespaces:g.optionalNamespaces,controller:o.publicKey,self:{publicKey:p.publicKey,metadata:this.client.metadata},peer:{publicKey:o.publicKey,metadata:o.metadata}},d&&{sessionProperties:d}),h&&{scopedProperties:h}),f&&{sessionConfig:f}),{transportType:Xt.relay});await this.client.session.set(m.topic,m),await this.setExpiry(m.topic,m.expiry),await this.client.core.pairing.updateMetadata({topic:p.pairingTopic,metadata:m.peer.metadata}),this.client.events.emit("session_connect",{session:m}),this.events.emit(jt("session_connect",p.proposalId),{session:m}),this.pendingSessions.delete(p.proposalId),this.deleteProposal(p.proposalId,!1),this.cleanupDuplicatePairings(m),await this.sendResult({id:r.id,topic:n,result:!0})}catch(a){await this.sendError({id:s,topic:n,error:a}),this.client.logger.error(a)}}),ae(this,"onSessionSettleResponse",async(n,r)=>{const{id:s}=r;ja(r)?(await this.client.session.update(n,{acknowledged:!0}),this.events.emit(jt("session_approve",s),{})):xi(r)&&(await this.client.session.delete(n,rn("USER_DISCONNECTED")),this.events.emit(jt("session_approve",s),{error:r.error}))}),ae(this,"onSessionUpdateRequest",async(n,r)=>{const{params:s,id:i}=r;try{const a=`${n}_session_update`,o=Zm.get(a);if(o&&this.isRequestOutOfSync(o,i)){this.client.logger.warn(`Discarding out of sync request - ${i}`),this.sendError({id:i,topic:n,error:rn("INVALID_UPDATE_REQUEST")});return}this.isValidUpdate(Jt({topic:n},s));try{Zm.set(a,i),await this.client.session.update(n,{namespaces:s.namespaces}),await this.sendResult({id:i,topic:n,result:!0})}catch(l){throw Zm.delete(a),l}this.client.events.emit("session_update",{id:i,topic:n,params:s})}catch(a){await this.sendError({id:i,topic:n,error:a}),this.client.logger.error(a)}}),ae(this,"isRequestOutOfSync",(n,r)=>r.toString().slice(0,-3)<n.toString().slice(0,-3)),ae(this,"onSessionUpdateResponse",(n,r)=>{const{id:s}=r,i=jt("session_update",s);if(this.events.listenerCount(i)===0)throw new Error(`emitting ${i} without any listeners`);ja(r)?this.events.emit(jt("session_update",s),{}):xi(r)&&this.events.emit(jt("session_update",s),{error:r.error})}),ae(this,"onSessionExtendRequest",async(n,r)=>{const{id:s}=r;try{this.isValidExtend({topic:n}),await this.setExpiry(n,Pn(Ih)),await this.sendResult({id:s,topic:n,result:!0}),this.client.events.emit("session_extend",{id:s,topic:n})}catch(i){await this.sendError({id:s,topic:n,error:i}),this.client.logger.error(i)}}),ae(this,"onSessionExtendResponse",(n,r)=>{const{id:s}=r,i=jt("session_extend",s);if(this.events.listenerCount(i)===0)throw new Error(`emitting ${i} without any listeners`);ja(r)?this.events.emit(jt("session_extend",s),{}):xi(r)&&this.events.emit(jt("session_extend",s),{error:r.error})}),ae(this,"onSessionPingRequest",async(n,r)=>{const{id:s}=r;try{this.isValidPing({topic:n}),await this.sendResult({id:s,topic:n,result:!0,throwOnFailedPublish:!0}),this.client.events.emit("session_ping",{id:s,topic:n})}catch(i){await this.sendError({id:s,topic:n,error:i}),this.client.logger.error(i)}}),ae(this,"onSessionPingResponse",(n,r)=>{const{id:s}=r,i=jt("session_ping",s);setTimeout(()=>{if(this.events.listenerCount(i)===0)throw new Error(`emitting ${i} without any listeners 2176`);ja(r)?this.events.emit(jt("session_ping",s),{}):xi(r)&&this.events.emit(jt("session_ping",s),{error:r.error})},500)}),ae(this,"onSessionDeleteRequest",async(n,r)=>{const{id:s}=r;try{this.isValidDisconnect({topic:n,reason:r.params}),Promise.all([new Promise(i=>{this.client.core.relayer.once(zn.publish,async()=>{i(await this.deleteSession({topic:n,id:s}))})}),this.sendResult({id:s,topic:n,result:!0}),this.cleanupPendingSentRequestsForTopic({topic:n,error:rn("USER_DISCONNECTED")})]).catch(i=>this.client.logger.error(i))}catch(i){this.client.logger.error(i)}}),ae(this,"onSessionRequest",async n=>{var r,s,i;const{topic:a,payload:o,attestation:l,encryptedId:u,transportType:d}=n,{id:h,params:f}=o;try{await this.isValidRequest(Jt({topic:a},f));const p=this.client.session.get(a),g=await this.getVerifyContext({attestationId:l,hash:Wa(JSON.stringify(Cl("wc_sessionRequest",f,h))),encryptedId:u,metadata:p.peer.metadata,transportType:d}),m={id:h,topic:a,params:f,verifyContext:g};await this.setPendingSessionRequest(m),d===Xt.link_mode&&(r=p.peer.metadata.redirect)!=null&&r.universal&&this.client.core.addLinkModeSupportedApp((s=p.peer.metadata.redirect)==null?void 0:s.universal),(i=this.client.signConfig)!=null&&i.disableRequestQueue?this.emitSessionRequest(m):(this.addSessionRequestToSessionRequestQueue(m),this.processSessionRequestQueue())}catch(p){await this.sendError({id:h,topic:a,error:p}),this.client.logger.error(p)}}),ae(this,"onSessionRequestResponse",(n,r)=>{const{id:s}=r,i=jt("session_request",s);if(this.events.listenerCount(i)===0)throw new Error(`emitting ${i} without any listeners`);ja(r)?this.events.emit(jt("session_request",s),{result:r.result}):xi(r)&&this.events.emit(jt("session_request",s),{error:r.error})}),ae(this,"onSessionEventRequest",async(n,r)=>{const{id:s,params:i}=r;try{const a=`${n}_session_event_${i.event.name}`,o=Zm.get(a);if(o&&this.isRequestOutOfSync(o,s)){this.client.logger.info(`Discarding out of sync request - ${s}`);return}this.isValidEmit(Jt({topic:n},i)),this.client.events.emit("session_event",{id:s,topic:n,params:i}),Zm.set(a,s)}catch(a){await this.sendError({id:s,topic:n,error:a}),this.client.logger.error(a)}}),ae(this,"onSessionAuthenticateResponse",(n,r)=>{const{id:s}=r;this.client.logger.trace({type:"method",method:"onSessionAuthenticateResponse",topic:n,payload:r}),ja(r)?this.events.emit(jt("session_request",s),{result:r.result}):xi(r)&&this.events.emit(jt("session_request",s),{error:r.error})}),ae(this,"onSessionAuthenticateRequest",async n=>{var r;const{topic:s,payload:i,attestation:a,encryptedId:o,transportType:l}=n;try{const{requester:u,authPayload:d,expiryTimestamp:h}=i.params,f=await this.getVerifyContext({attestationId:a,hash:Wa(JSON.stringify(i)),encryptedId:o,metadata:u.metadata,transportType:l}),p={requester:u,pairingTopic:s,id:i.id,authPayload:d,verifyContext:f,expiryTimestamp:h};await this.setAuthRequest(i.id,{request:p,pairingTopic:s,transportType:l}),l===Xt.link_mode&&(r=u.metadata.redirect)!=null&&r.universal&&this.client.core.addLinkModeSupportedApp(u.metadata.redirect.universal),this.client.events.emit("session_authenticate",{topic:s,params:i.params,id:i.id,verifyContext:f})}catch(u){this.client.logger.error(u);const d=i.params.requester.publicKey,h=await this.client.core.crypto.generateKeyPair(),f=this.getAppLinkIfEnabled(i.params.requester.metadata,l),p={type:ec,receiverPublicKey:d,senderPublicKey:h};await this.sendError({id:i.id,topic:s,error:u,encodeOpts:p,rpcOpts:Bn.wc_sessionAuthenticate.autoReject,appLink:f})}}),ae(this,"addSessionRequestToSessionRequestQueue",n=>{this.sessionRequestQueue.queue.push(n)}),ae(this,"cleanupAfterResponse",n=>{this.deletePendingSessionRequest(n.response.id,{message:"fulfilled",code:0}),setTimeout(()=>{this.sessionRequestQueue.state=Ta.idle,this.processSessionRequestQueue()},he.toMiliseconds(this.requestQueueDelay))}),ae(this,"cleanupPendingSentRequestsForTopic",({topic:n,error:r})=>{const s=this.client.core.history.pending;s.length>0&&s.filter(i=>i.topic===n&&i.request.method==="wc_sessionRequest").forEach(i=>{const a=i.request.id,o=jt("session_request",a);if(this.events.listenerCount(o)===0)throw new Error(`emitting ${o} without any listeners`);this.events.emit(jt("session_request",i.request.id),{error:r})})}),ae(this,"processSessionRequestQueue",()=>{if(this.sessionRequestQueue.state===Ta.active){this.client.logger.info("session request queue is already active.");return}const n=this.sessionRequestQueue.queue[0];if(!n){this.client.logger.info("session request queue is empty.");return}try{this.sessionRequestQueue.state=Ta.active,this.emitSessionRequest(n)}catch(r){this.client.logger.error(r)}}),ae(this,"emitSessionRequest",n=>{this.client.events.emit("session_request",n)}),ae(this,"onPairingCreated",n=>{if(n.methods&&this.expectedPairingMethodMap.set(n.topic,n.methods),n.active)return;const r=this.client.proposal.getAll().find(s=>s.pairingTopic===n.topic);r&&this.onSessionProposeRequest({topic:n.topic,payload:Cl("wc_sessionPropose",hs(Jt({},r),{requiredNamespaces:r.requiredNamespaces,optionalNamespaces:r.optionalNamespaces,relays:r.relays,proposer:r.proposer,sessionProperties:r.sessionProperties,scopedProperties:r.scopedProperties}),r.id),attestation:r.attestation,encryptedId:r.encryptedId})}),ae(this,"isValidConnect",async n=>{if(!ms(n)){const{message:u}=fe("MISSING_OR_INVALID",`connect() params: ${JSON.stringify(n)}`);throw new Error(u)}const{pairingTopic:r,requiredNamespaces:s,optionalNamespaces:i,sessionProperties:a,scopedProperties:o,relays:l}=n;if(ir(r)||await this.isValidPairingTopic(r),!Ioe(l)){const{message:u}=fe("MISSING_OR_INVALID",`connect() relays: ${l}`);throw new Error(u)}if(!ir(s)&&Ml(s)!==0){const u="requiredNamespaces are deprecated and are automatically assigned to optionalNamespaces";["fatal","error","silent"].includes(this.client.logger.level)?console.warn(u):this.client.logger.warn(u),this.validateNamespaces(s,"requiredNamespaces")}if(!ir(i)&&Ml(i)!==0&&this.validateNamespaces(i,"optionalNamespaces"),ir(a)||this.validateSessionProps(a,"sessionProperties"),!ir(o)){this.validateSessionProps(o,"scopedProperties");const u=Object.keys(s||{}).concat(Object.keys(i||{}));if(!Object.keys(o).every(d=>u.includes(d)))throw new Error(`Scoped properties must be a subset of required/optional namespaces, received: ${JSON.stringify(o)}, required/optional namespaces: ${JSON.stringify(u)}`)}}),ae(this,"validateNamespaces",(n,r)=>{const s=_oe(n,"connect()",r);if(s)throw new Error(s.message)}),ae(this,"isValidApprove",async n=>{if(!ms(n))throw new Error(fe("MISSING_OR_INVALID",`approve() params: ${n}`).message);const{id:r,namespaces:s,relayProtocol:i,sessionProperties:a,scopedProperties:o}=n;this.checkRecentlyDeleted(r),await this.isValidProposalId(r);const l=this.client.proposal.get(r),u=Y2(s,"approve()");if(u)throw new Error(u.message);const d=YI(l.requiredNamespaces,s,"approve()");if(d)throw new Error(d.message);if(!Cn(i,!0)){const{message:h}=fe("MISSING_OR_INVALID",`approve() relayProtocol: ${i}`);throw new Error(h)}if(ir(a)||this.validateSessionProps(a,"sessionProperties"),!ir(o)){this.validateSessionProps(o,"scopedProperties");const h=new Set(Object.keys(s));if(!Object.keys(o).every(f=>h.has(f)))throw new Error(`Scoped properties must be a subset of approved namespaces, received: ${JSON.stringify(o)}, approved namespaces: ${Array.from(h).join(", ")}`)}}),ae(this,"isValidReject",async n=>{if(!ms(n)){const{message:i}=fe("MISSING_OR_INVALID",`reject() params: ${n}`);throw new Error(i)}const{id:r,reason:s}=n;if(this.checkRecentlyDeleted(r),await this.isValidProposalId(r),!Roe(s)){const{message:i}=fe("MISSING_OR_INVALID",`reject() reason: ${JSON.stringify(s)}`);throw new Error(i)}}),ae(this,"isValidSessionSettleRequest",n=>{if(!ms(n)){const{message:u}=fe("MISSING_OR_INVALID",`onSessionSettleRequest() params: ${n}`);throw new Error(u)}const{relay:r,controller:s,namespaces:i,expiry:a}=n;if(!NL(r)){const{message:u}=fe("MISSING_OR_INVALID","onSessionSettleRequest() relay protocol should be a string");throw new Error(u)}const o=Noe(s,"onSessionSettleRequest()");if(o)throw new Error(o.message);const l=Y2(i,"onSessionSettleRequest()");if(l)throw new Error(l.message);if(Wc(a)){const{message:u}=fe("EXPIRED","onSessionSettleRequest()");throw new Error(u)}}),ae(this,"isValidUpdate",async n=>{if(!ms(n)){const{message:l}=fe("MISSING_OR_INVALID",`update() params: ${n}`);throw new Error(l)}const{topic:r,namespaces:s}=n;this.checkRecentlyDeleted(r),await this.isValidSessionTopic(r);const i=this.client.session.get(r),a=Y2(s,"update()");if(a)throw new Error(a.message);const o=YI(i.requiredNamespaces,s,"update()");if(o)throw new Error(o.message)}),ae(this,"isValidExtend",async n=>{if(!ms(n)){const{message:s}=fe("MISSING_OR_INVALID",`extend() params: ${n}`);throw new Error(s)}const{topic:r}=n;this.checkRecentlyDeleted(r),await this.isValidSessionTopic(r)}),ae(this,"isValidRequest",async n=>{if(!ms(n)){const{message:l}=fe("MISSING_OR_INVALID",`request() params: ${n}`);throw new Error(l)}const{topic:r,request:s,chainId:i,expiry:a}=n;this.checkRecentlyDeleted(r),await this.isValidSessionTopic(r);const{namespaces:o}=this.client.session.get(r);if(!GI(o,i)){const{message:l}=fe("MISSING_OR_INVALID",`request() chainId: ${i}`);throw new Error(l)}if(!joe(s)){const{message:l}=fe("MISSING_OR_INVALID",`request() ${JSON.stringify(s)}`);throw new Error(l)}if(!Uoe(o,i,s.method)){const{message:l}=fe("MISSING_OR_INVALID",`request() method: ${s.method}`);throw new Error(l)}if(a&&!$oe(a,nN)){const{message:l}=fe("MISSING_OR_INVALID",`request() expiry: ${a}. Expiry must be a number (in seconds) between ${nN.min} and ${nN.max}`);throw new Error(l)}}),ae(this,"isValidRespond",async n=>{var r;if(!ms(n)){const{message:a}=fe("MISSING_OR_INVALID",`respond() params: ${n}`);throw new Error(a)}const{topic:s,response:i}=n;try{await this.isValidSessionTopic(s)}catch(a){throw(r=n==null?void 0:n.response)!=null&&r.id&&this.cleanupAfterResponse(n),a}if(!Ooe(i)){const{message:a}=fe("MISSING_OR_INVALID",`respond() response: ${JSON.stringify(i)}`);throw new Error(a)}}),ae(this,"isValidPing",async n=>{if(!ms(n)){const{message:s}=fe("MISSING_OR_INVALID",`ping() params: ${n}`);throw new Error(s)}const{topic:r}=n;await this.isValidSessionOrPairingTopic(r)}),ae(this,"isValidEmit",async n=>{if(!ms(n)){const{message:o}=fe("MISSING_OR_INVALID",`emit() params: ${n}`);throw new Error(o)}const{topic:r,event:s,chainId:i}=n;await this.isValidSessionTopic(r);const{namespaces:a}=this.client.session.get(r);if(!GI(a,i)){const{message:o}=fe("MISSING_OR_INVALID",`emit() chainId: ${i}`);throw new Error(o)}if(!Doe(s)){const{message:o}=fe("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(s)}`);throw new Error(o)}if(!Moe(a,i,s.name)){const{message:o}=fe("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(s)}`);throw new Error(o)}}),ae(this,"isValidDisconnect",async n=>{if(!ms(n)){const{message:s}=fe("MISSING_OR_INVALID",`disconnect() params: ${n}`);throw new Error(s)}const{topic:r}=n;await this.isValidSessionOrPairingTopic(r)}),ae(this,"isValidAuthenticate",n=>{const{chains:r,uri:s,domain:i,nonce:a}=n;if(!Array.isArray(r)||r.length===0)throw new Error("chains is required and must be a non-empty array");if(!Cn(s,!1))throw new Error("uri is required parameter");if(!Cn(i,!1))throw new Error("domain is required parameter");if(!Cn(a,!1))throw new Error("nonce is required parameter");if([...new Set(r.map(l=>Rf(l).namespace))].length>1)throw new Error("Multi-namespace requests are not supported. Please request single namespace only.");const{namespace:o}=Rf(r[0]);if(o!=="eip155")throw new Error("Only eip155 namespace is supported for authenticated sessions. Please use .connect() for non-eip155 chains.")}),ae(this,"getVerifyContext",async n=>{const{attestationId:r,hash:s,encryptedId:i,metadata:a,transportType:o}=n,l={verified:{verifyUrl:a.verifyUrl||Zg,validation:"UNKNOWN",origin:a.url||""}};try{if(o===Xt.link_mode){const d=this.getAppLinkIfEnabled(a,o);return l.verified.validation=d&&new URL(d).origin===new URL(a.url).origin?"VALID":"INVALID",l}const u=await this.client.core.verify.resolve({attestationId:r,hash:s,encryptedId:i,verifyUrl:a.verifyUrl});u&&(l.verified.origin=u.origin,l.verified.isScam=u.isScam,l.verified.validation=u.origin===new URL(a.url).origin?"VALID":"INVALID")}catch(u){this.client.logger.warn(u)}return this.client.logger.debug(`Verify context: ${JSON.stringify(l)}`),l}),ae(this,"validateSessionProps",(n,r)=>{Object.values(n).forEach((s,i)=>{if(s==null){const{message:a}=fe("MISSING_OR_INVALID",`${r} must contain an existing value for each key. Received: ${s} for key ${Object.keys(n)[i]}`);throw new Error(a)}})}),ae(this,"getPendingAuthRequest",n=>{const r=this.client.auth.requests.get(n);return typeof r=="object"?r:void 0}),ae(this,"addToRecentlyDeleted",(n,r)=>{if(this.recentlyDeletedMap.set(n,r),this.recentlyDeletedMap.size>=this.recentlyDeletedLimit){let s=0;const i=this.recentlyDeletedLimit/2;for(const a of this.recentlyDeletedMap.keys()){if(s++>=i)break;this.recentlyDeletedMap.delete(a)}}}),ae(this,"checkRecentlyDeleted",n=>{const r=this.recentlyDeletedMap.get(n);if(r){const{message:s}=fe("MISSING_OR_INVALID",`Record was recently deleted - ${r}: ${n}`);throw new Error(s)}}),ae(this,"isLinkModeEnabled",(n,r)=>{var s,i,a,o,l,u,d,h,f;return!n||r!==Xt.link_mode?!1:((i=(s=this.client.metadata)==null?void 0:s.redirect)==null?void 0:i.linkMode)===!0&&((o=(a=this.client.metadata)==null?void 0:a.redirect)==null?void 0:o.universal)!==void 0&&((u=(l=this.client.metadata)==null?void 0:l.redirect)==null?void 0:u.universal)!==""&&((d=n==null?void 0:n.redirect)==null?void 0:d.universal)!==void 0&&((h=n==null?void 0:n.redirect)==null?void 0:h.universal)!==""&&((f=n==null?void 0:n.redirect)==null?void 0:f.linkMode)===!0&&this.client.core.linkModeSupportedApps.includes(n.redirect.universal)&&typeof(globalThis==null?void 0:globalThis.Linking)<"u"}),ae(this,"getAppLinkIfEnabled",(n,r)=>{var s;return this.isLinkModeEnabled(n,r)?(s=n==null?void 0:n.redirect)==null?void 0:s.universal:void 0}),ae(this,"handleLinkModeMessage",({url:n})=>{if(!n||!n.includes("wc_ev")||!n.includes("topic"))return;const r=cI(n,"topic")||"",s=decodeURIComponent(cI(n,"wc_ev")||""),i=this.client.session.keys.includes(r);i&&this.client.session.update(r,{transportType:Xt.link_mode}),this.client.core.dispatchEnvelope({topic:r,message:s,sessionExists:i})}),ae(this,"registerLinkModeListeners",async()=>{var n;if(fS()||su()&&(n=this.client.metadata.redirect)!=null&&n.linkMode){const r=globalThis==null?void 0:globalThis.Linking;if(typeof r<"u"){r.addEventListener("url",this.handleLinkModeMessage,this.client.name);const s=await r.getInitialURL();s&&setTimeout(()=>{this.handleLinkModeMessage({url:s})},50)}}}),ae(this,"getTVFParams",(n,r,s)=>{var i,a,o;if(!((i=r.request)!=null&&i.method))return{};const l={correlationId:n,rpcMethods:[r.request.method],chainId:r.chainId};try{const u=this.extractTxHashesFromResult(r.request,s);l.txHashes=u,l.contractAddresses=this.isValidContractData(r.request.params)?[(o=(a=r.request.params)==null?void 0:a[0])==null?void 0:o.to]:[]}catch(u){this.client.logger.warn("Error getting TVF params",u)}return l}),ae(this,"isValidContractData",n=>{var r;if(!n)return!1;try{const s=(n==null?void 0:n.data)||((r=n==null?void 0:n[0])==null?void 0:r.data);if(!s.startsWith("0x"))return!1;const i=s.slice(2);return/^[0-9a-fA-F]*$/.test(i)?i.length%2===0:!1}catch{}return!1}),ae(this,"extractTxHashesFromResult",(n,r)=>{var s;try{if(!r)return[];const i=n.method,a=lhe[i];if(i==="sui_signTransaction")return[lie(r.transactionBytes)];if(i==="near_signTransaction")return[gI(r)];if(i==="near_signTransactions")return r.map(l=>gI(l));if(i==="xrpl_signTransactionFor"||i==="xrpl_signTransaction")return[(s=r.tx_json)==null?void 0:s.hash];if(i==="polkadot_signTransaction")return[tce({transaction:n.params.transactionPayload,signature:r.signature})];if(i==="algo_signTxn")return tc(r)?r.map(l=>yI(l)):[yI(r)];if(i==="cosmos_signDirect")return[die(r)];if(typeof r=="string")return[r];const o=r[a.key];if(tc(o))return i==="solana_signAllTransactions"?o.map(l=>cie(l)):o;if(typeof o=="string")return[o]}catch(i){this.client.logger.warn("Error extracting tx hashes from result",i)}return[]})}async processPendingMessageEvents(){try{const e=this.client.session.keys,n=this.client.core.relayer.messages.getWithoutAck(e);for(const[r,s]of Object.entries(n))for(const i of s)try{await this.onProviderMessageEvent({topic:r,message:i,publishedAt:Date.now()})}catch{this.client.logger.warn(`Error processing pending message event for topic: ${r}, message: ${i}`)}}catch(e){this.client.logger.warn("processPendingMessageEvents failed",e)}}isInitialized(){if(!this.initialized){const{message:e}=fe("NOT_INITIALIZED",this.name);throw new Error(e)}}async confirmOnlineStateOrThrow(){await this.client.core.relayer.confirmOnlineStateOrThrow()}registerRelayerEvents(){this.client.core.relayer.on(zn.message,e=>{this.onProviderMessageEvent(e)})}async onRelayMessage(e){const{topic:n,message:r,attestation:s,transportType:i}=e,{publicKey:a}=this.client.auth.authKeys.keys.includes(dx)?this.client.auth.authKeys.get(dx):{publicKey:void 0};try{const o=await this.client.core.crypto.decode(n,r,{receiverPublicKey:a,encoding:i===Xt.link_mode?Zc:sa});kS(o)?(this.client.core.history.set(n,o),await this.onRelayEventRequest({topic:n,payload:o,attestation:s,transportType:i,encryptedId:Wa(r)})):X1(o)?(await this.client.core.history.resolve(o),await this.onRelayEventResponse({topic:n,payload:o,transportType:i}),this.client.core.history.delete(n,o.id)):await this.onRelayEventUnknownPayload({topic:n,payload:o,transportType:i}),await this.client.core.relayer.messages.ack(n,r)}catch(o){this.client.logger.error(o)}}registerExpirerEvents(){this.client.core.expirer.on(hi.expired,async e=>{const{topic:n,id:r}=PM(e.target);if(r&&this.client.pendingRequest.keys.includes(r))return await this.deletePendingSessionRequest(r,fe("EXPIRED"),!0);if(r&&this.client.auth.requests.keys.includes(r))return await this.deletePendingAuthRequest(r,fe("EXPIRED"),!0);n?this.client.session.keys.includes(n)&&(await this.deleteSession({topic:n,expirerHasDeleted:!0}),this.client.events.emit("session_expire",{topic:n})):r&&(await this.deleteProposal(r,!0),this.client.events.emit("proposal_expire",{id:r}))})}registerPairingEvents(){this.client.core.pairing.events.on(Tu.create,e=>this.onPairingCreated(e)),this.client.core.pairing.events.on(Tu.delete,e=>{this.addToRecentlyDeleted(e.topic,"pairing")})}isValidPairingTopic(e){if(!Cn(e,!1)){const{message:n}=fe("MISSING_OR_INVALID",`pairing topic should be a string: ${e}`);throw new Error(n)}if(!this.client.core.pairing.pairings.keys.includes(e)){const{message:n}=fe("NO_MATCHING_KEY",`pairing topic doesn't exist: ${e}`);throw new Error(n)}if(Wc(this.client.core.pairing.pairings.get(e).expiry)){const{message:n}=fe("EXPIRED",`pairing topic: ${e}`);throw new Error(n)}}async isValidSessionTopic(e){if(!Cn(e,!1)){const{message:n}=fe("MISSING_OR_INVALID",`session topic should be a string: ${e}`);throw new Error(n)}if(this.checkRecentlyDeleted(e),!this.client.session.keys.includes(e)){const{message:n}=fe("NO_MATCHING_KEY",`session topic doesn't exist: ${e}`);throw new Error(n)}if(Wc(this.client.session.get(e).expiry)){await this.deleteSession({topic:e});const{message:n}=fe("EXPIRED",`session topic: ${e}`);throw new Error(n)}if(!this.client.core.crypto.keychain.has(e)){const{message:n}=fe("MISSING_OR_INVALID",`session topic does not exist in keychain: ${e}`);throw await this.deleteSession({topic:e}),new Error(n)}}async isValidSessionOrPairingTopic(e){if(this.checkRecentlyDeleted(e),this.client.session.keys.includes(e))await this.isValidSessionTopic(e);else if(this.client.core.pairing.pairings.keys.includes(e))this.isValidPairingTopic(e);else if(Cn(e,!1)){const{message:n}=fe("NO_MATCHING_KEY",`session or pairing topic doesn't exist: ${e}`);throw new Error(n)}else{const{message:n}=fe("MISSING_OR_INVALID",`session or pairing topic should be a string: ${e}`);throw new Error(n)}}async isValidProposalId(e){if(!Poe(e)){const{message:n}=fe("MISSING_OR_INVALID",`proposal id should be a number: ${e}`);throw new Error(n)}if(!this.client.proposal.keys.includes(e)){const{message:n}=fe("NO_MATCHING_KEY",`proposal id doesn't exist: ${e}`);throw new Error(n)}if(Wc(this.client.proposal.get(e).expiryTimestamp)){await this.deleteProposal(e);const{message:n}=fe("EXPIRED",`proposal id: ${e}`);throw new Error(n)}}}class Nhe extends fh{constructor(e,n){super(e,n,ahe,_S),this.core=e,this.logger=n}}let Che=class extends fh{constructor(e,n){super(e,n,ohe,_S),this.core=e,this.logger=n}};class Ahe extends fh{constructor(e,n){super(e,n,uhe,_S,r=>r.id),this.core=e,this.logger=n}}class The extends fh{constructor(e,n){super(e,n,phe,tE,()=>dx),this.core=e,this.logger=n}}class She extends fh{constructor(e,n){super(e,n,mhe,tE),this.core=e,this.logger=n}}class khe extends fh{constructor(e,n){super(e,n,ghe,tE,r=>r.id),this.core=e,this.logger=n}}var _he=Object.defineProperty,Ihe=(t,e,n)=>e in t?_he(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,rN=(t,e,n)=>Ihe(t,typeof e!="symbol"?e+"":e,n);class Phe{constructor(e,n){this.core=e,this.logger=n,rN(this,"authKeys"),rN(this,"pairingTopics"),rN(this,"requests"),this.authKeys=new The(this.core,this.logger),this.pairingTopics=new She(this.core,this.logger),this.requests=new khe(this.core,this.logger)}async init(){await this.authKeys.init(),await this.pairingTopics.init(),await this.requests.init()}}var Rhe=Object.defineProperty,jhe=(t,e,n)=>e in t?Rhe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,lt=(t,e,n)=>jhe(t,typeof e!="symbol"?e+"":e,n);let Ohe=class QL extends aZ{constructor(e){super(e),lt(this,"protocol",KL),lt(this,"version",GL),lt(this,"name",tN.name),lt(this,"metadata"),lt(this,"core"),lt(this,"logger"),lt(this,"events",new Pi.EventEmitter),lt(this,"engine"),lt(this,"session"),lt(this,"proposal"),lt(this,"pendingRequest"),lt(this,"auth"),lt(this,"signConfig"),lt(this,"on",(r,s)=>this.events.on(r,s)),lt(this,"once",(r,s)=>this.events.once(r,s)),lt(this,"off",(r,s)=>this.events.off(r,s)),lt(this,"removeListener",(r,s)=>this.events.removeListener(r,s)),lt(this,"removeAllListeners",r=>this.events.removeAllListeners(r)),lt(this,"connect",async r=>{try{return await this.engine.connect(r)}catch(s){throw this.logger.error(s.message),s}}),lt(this,"pair",async r=>{try{return await this.engine.pair(r)}catch(s){throw this.logger.error(s.message),s}}),lt(this,"approve",async r=>{try{return await this.engine.approve(r)}catch(s){throw this.logger.error(s.message),s}}),lt(this,"reject",async r=>{try{return await this.engine.reject(r)}catch(s){throw this.logger.error(s.message),s}}),lt(this,"update",async r=>{try{return await this.engine.update(r)}catch(s){throw this.logger.error(s.message),s}}),lt(this,"extend",async r=>{try{return await this.engine.extend(r)}catch(s){throw this.logger.error(s.message),s}}),lt(this,"request",async r=>{try{return await this.engine.request(r)}catch(s){throw this.logger.error(s.message),s}}),lt(this,"respond",async r=>{try{return await this.engine.respond(r)}catch(s){throw this.logger.error(s.message),s}}),lt(this,"ping",async r=>{try{return await this.engine.ping(r)}catch(s){throw this.logger.error(s.message),s}}),lt(this,"emit",async r=>{try{return await this.engine.emit(r)}catch(s){throw this.logger.error(s.message),s}}),lt(this,"disconnect",async r=>{try{return await this.engine.disconnect(r)}catch(s){throw this.logger.error(s.message),s}}),lt(this,"find",r=>{try{return this.engine.find(r)}catch(s){throw this.logger.error(s.message),s}}),lt(this,"getPendingSessionRequests",()=>{try{return this.engine.getPendingSessionRequests()}catch(r){throw this.logger.error(r.message),r}}),lt(this,"authenticate",async(r,s)=>{try{return await this.engine.authenticate(r,s)}catch(i){throw this.logger.error(i.message),i}}),lt(this,"formatAuthMessage",r=>{try{return this.engine.formatAuthMessage(r)}catch(s){throw this.logger.error(s.message),s}}),lt(this,"approveSessionAuthenticate",async r=>{try{return await this.engine.approveSessionAuthenticate(r)}catch(s){throw this.logger.error(s.message),s}}),lt(this,"rejectSessionAuthenticate",async r=>{try{return await this.engine.rejectSessionAuthenticate(r)}catch(s){throw this.logger.error(s.message),s}}),this.name=(e==null?void 0:e.name)||tN.name,this.metadata=tse(e==null?void 0:e.metadata),this.signConfig=e==null?void 0:e.signConfig;const n=typeof(e==null?void 0:e.logger)<"u"&&typeof(e==null?void 0:e.logger)!="string"?e.logger:aw(dm({level:(e==null?void 0:e.logger)||tN.logger}));this.core=(e==null?void 0:e.core)||new ihe(e),this.logger=Ur(n,this.name),this.session=new Che(this.core,this.logger),this.proposal=new Nhe(this.core,this.logger),this.pendingRequest=new Ahe(this.core,this.logger),this.engine=new Ehe(this),this.auth=new Phe(this.core,this.logger)}static async init(e){const n=new QL(e);return await n.initialize(),n}get context(){return Us(this.logger)}get pairing(){return this.core.pairing.pairings}async initialize(){this.logger.trace("Initialized");try{await this.core.start(),await this.session.init(),await this.proposal.init(),await this.pendingRequest.init(),await this.auth.init(),await this.engine.init(),this.logger.info("SignClient Initialization Success"),setTimeout(()=>{this.engine.processRelayMessageCache()},he.toMiliseconds(he.ONE_SECOND))}catch(e){throw this.logger.info("SignClient Initialization Failure"),this.logger.error(e.message),e}}};var QA={exports:{}};(function(t,e){var n=typeof globalThis<"u"&&globalThis||typeof self<"u"&&self||typeof globalThis<"u"&&globalThis,r=function(){function i(){this.fetch=!1,this.DOMException=n.DOMException}return i.prototype=n,new i}();(function(i){(function(a){var o=typeof i<"u"&&i||typeof self<"u"&&self||typeof i<"u"&&i||{},l={searchParams:"URLSearchParams"in o,iterable:"Symbol"in o&&"iterator"in Symbol,blob:"FileReader"in o&&"Blob"in o&&function(){try{return new Blob,!0}catch{return!1}}(),formData:"FormData"in o,arrayBuffer:"ArrayBuffer"in o};function u(N){return N&&DataView.prototype.isPrototypeOf(N)}if(l.arrayBuffer)var d=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],h=ArrayBuffer.isView||function(N){return N&&d.indexOf(Object.prototype.toString.call(N))>-1};function f(N){if(typeof N!="string"&&(N=String(N)),/[^a-z0-9\-#$%&'*+.^_`|~!]/i.test(N)||N==="")throw new TypeError('Invalid character in header field name: "'+N+'"');return N.toLowerCase()}function p(N){return typeof N!="string"&&(N=String(N)),N}function g(N){var I={next:function(){var M=N.shift();return{done:M===void 0,value:M}}};return l.iterable&&(I[Symbol.iterator]=function(){return I}),I}function m(N){this.map={},N instanceof m?N.forEach(function(I,M){this.append(M,I)},this):Array.isArray(N)?N.forEach(function(I){if(I.length!=2)throw new TypeError("Headers constructor: expected name/value pair to be length 2, found"+I.length);this.append(I[0],I[1])},this):N&&Object.getOwnPropertyNames(N).forEach(function(I){this.append(I,N[I])},this)}m.prototype.append=function(N,I){N=f(N),I=p(I);var M=this.map[N];this.map[N]=M?M+", "+I:I},m.prototype.delete=function(N){delete this.map[f(N)]},m.prototype.get=function(N){return N=f(N),this.has(N)?this.map[N]:null},m.prototype.has=function(N){return this.map.hasOwnProperty(f(N))},m.prototype.set=function(N,I){this.map[f(N)]=p(I)},m.prototype.forEach=function(N,I){for(var M in this.map)this.map.hasOwnProperty(M)&&N.call(I,this.map[M],M,this)},m.prototype.keys=function(){var N=[];return this.forEach(function(I,M){N.push(M)}),g(N)},m.prototype.values=function(){var N=[];return this.forEach(function(I){N.push(I)}),g(N)},m.prototype.entries=function(){var N=[];return this.forEach(function(I,M){N.push([M,I])}),g(N)},l.iterable&&(m.prototype[Symbol.iterator]=m.prototype.entries);function y(N){if(!N._noBody){if(N.bodyUsed)return Promise.reject(new TypeError("Already read"));N.bodyUsed=!0}}function b(N){return new Promise(function(I,M){N.onload=function(){I(N.result)},N.onerror=function(){M(N.error)}})}function w(N){var I=new FileReader,M=b(I);return I.readAsArrayBuffer(N),M}function x(N){var I=new FileReader,M=b(I),D=/charset=([A-Za-z0-9_-]+)/.exec(N.type),L=D?D[1]:"utf-8";return I.readAsText(N,L),M}function A(N){for(var I=new Uint8Array(N),M=new Array(I.length),D=0;D<I.length;D++)M[D]=String.fromCharCode(I[D]);return M.join("")}function T(N){if(N.slice)return N.slice(0);var I=new Uint8Array(N.byteLength);return I.set(new Uint8Array(N)),I.buffer}function j(){return this.bodyUsed=!1,this._initBody=function(N){this.bodyUsed=this.bodyUsed,this._bodyInit=N,N?typeof N=="string"?this._bodyText=N:l.blob&&Blob.prototype.isPrototypeOf(N)?this._bodyBlob=N:l.formData&&FormData.prototype.isPrototypeOf(N)?this._bodyFormData=N:l.searchParams&&URLSearchParams.prototype.isPrototypeOf(N)?this._bodyText=N.toString():l.arrayBuffer&&l.blob&&u(N)?(this._bodyArrayBuffer=T(N.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):l.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(N)||h(N))?this._bodyArrayBuffer=T(N):this._bodyText=N=Object.prototype.toString.call(N):(this._noBody=!0,this._bodyText=""),this.headers.get("content-type")||(typeof N=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):l.searchParams&&URLSearchParams.prototype.isPrototypeOf(N)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},l.blob&&(this.blob=function(){var N=y(this);if(N)return N;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))}),this.arrayBuffer=function(){if(this._bodyArrayBuffer){var N=y(this);return N||(ArrayBuffer.isView(this._bodyArrayBuffer)?Promise.resolve(this._bodyArrayBuffer.buffer.slice(this._bodyArrayBuffer.byteOffset,this._bodyArrayBuffer.byteOffset+this._bodyArrayBuffer.byteLength)):Promise.resolve(this._bodyArrayBuffer))}else{if(l.blob)return this.blob().then(w);throw new Error("could not read as ArrayBuffer")}},this.text=function(){var N=y(this);if(N)return N;if(this._bodyBlob)return x(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(A(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},l.formData&&(this.formData=function(){return this.text().then(k)}),this.json=function(){return this.text().then(JSON.parse)},this}var P=["CONNECT","DELETE","GET","HEAD","OPTIONS","PATCH","POST","PUT","TRACE"];function S(N){var I=N.toUpperCase();return P.indexOf(I)>-1?I:N}function E(N,I){if(!(this instanceof E))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');I=I||{};var M=I.body;if(N instanceof E){if(N.bodyUsed)throw new TypeError("Already read");this.url=N.url,this.credentials=N.credentials,I.headers||(this.headers=new m(N.headers)),this.method=N.method,this.mode=N.mode,this.signal=N.signal,!M&&N._bodyInit!=null&&(M=N._bodyInit,N.bodyUsed=!0)}else this.url=String(N);if(this.credentials=I.credentials||this.credentials||"same-origin",(I.headers||!this.headers)&&(this.headers=new m(I.headers)),this.method=S(I.method||this.method||"GET"),this.mode=I.mode||this.mode||null,this.signal=I.signal||this.signal||function(){if("AbortController"in o){var $=new AbortController;return $.signal}}(),this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&M)throw new TypeError("Body not allowed for GET or HEAD requests");if(this._initBody(M),(this.method==="GET"||this.method==="HEAD")&&(I.cache==="no-store"||I.cache==="no-cache")){var D=/([?&])_=[^&]*/;if(D.test(this.url))this.url=this.url.replace(D,"$1_="+new Date().getTime());else{var L=/\?/;this.url+=(L.test(this.url)?"&":"?")+"_="+new Date().getTime()}}}E.prototype.clone=function(){return new E(this,{body:this._bodyInit})};function k(N){var I=new FormData;return N.trim().split("&").forEach(function(M){if(M){var D=M.split("="),L=D.shift().replace(/\+/g," "),$=D.join("=").replace(/\+/g," ");I.append(decodeURIComponent(L),decodeURIComponent($))}}),I}function R(N){var I=new m,M=N.replace(/\r?\n[\t ]+/g," ");return M.split("\r").map(function(D){return D.indexOf(`
`)===0?D.substr(1,D.length):D}).forEach(function(D){var L=D.split(":"),$=L.shift().trim();if($){var V=L.join(":").trim();try{I.append($,V)}catch(q){console.warn("Response "+q.message)}}}),I}j.call(E.prototype);function O(N,I){if(!(this instanceof O))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');if(I||(I={}),this.type="default",this.status=I.status===void 0?200:I.status,this.status<200||this.status>599)throw new RangeError("Failed to construct 'Response': The status provided (0) is outside the range [200, 599].");this.ok=this.status>=200&&this.status<300,this.statusText=I.statusText===void 0?"":""+I.statusText,this.headers=new m(I.headers),this.url=I.url||"",this._initBody(N)}j.call(O.prototype),O.prototype.clone=function(){return new O(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new m(this.headers),url:this.url})},O.error=function(){var N=new O(null,{status:200,statusText:""});return N.ok=!1,N.status=0,N.type="error",N};var F=[301,302,303,307,308];O.redirect=function(N,I){if(F.indexOf(I)===-1)throw new RangeError("Invalid status code");return new O(null,{status:I,headers:{location:N}})},a.DOMException=o.DOMException;try{new a.DOMException}catch{a.DOMException=function(I,M){this.message=I,this.name=M;var D=Error(I);this.stack=D.stack},a.DOMException.prototype=Object.create(Error.prototype),a.DOMException.prototype.constructor=a.DOMException}function z(N,I){return new Promise(function(M,D){var L=new E(N,I);if(L.signal&&L.signal.aborted)return D(new a.DOMException("Aborted","AbortError"));var $=new XMLHttpRequest;function V(){$.abort()}$.onload=function(){var Z={statusText:$.statusText,headers:R($.getAllResponseHeaders()||"")};L.url.indexOf("file://")===0&&($.status<200||$.status>599)?Z.status=200:Z.status=$.status,Z.url="responseURL"in $?$.responseURL:Z.headers.get("X-Request-URL");var oe="response"in $?$.response:$.responseText;setTimeout(function(){M(new O(oe,Z))},0)},$.onerror=function(){setTimeout(function(){D(new TypeError("Network request failed"))},0)},$.ontimeout=function(){setTimeout(function(){D(new TypeError("Network request timed out"))},0)},$.onabort=function(){setTimeout(function(){D(new a.DOMException("Aborted","AbortError"))},0)};function q(Z){try{return Z===""&&o.location.href?o.location.href:Z}catch{return Z}}if($.open(L.method,q(L.url),!0),L.credentials==="include"?$.withCredentials=!0:L.credentials==="omit"&&($.withCredentials=!1),"responseType"in $&&(l.blob?$.responseType="blob":l.arrayBuffer&&($.responseType="arraybuffer")),I&&typeof I.headers=="object"&&!(I.headers instanceof m||o.Headers&&I.headers instanceof o.Headers)){var G=[];Object.getOwnPropertyNames(I.headers).forEach(function(Z){G.push(f(Z)),$.setRequestHeader(Z,p(I.headers[Z]))}),L.headers.forEach(function(Z,oe){G.indexOf(oe)===-1&&$.setRequestHeader(oe,Z)})}else L.headers.forEach(function(Z,oe){$.setRequestHeader(oe,Z)});L.signal&&(L.signal.addEventListener("abort",V),$.onreadystatechange=function(){$.readyState===4&&L.signal.removeEventListener("abort",V)}),$.send(typeof L._bodyInit>"u"?null:L._bodyInit)})}return z.polyfill=!0,o.fetch||(o.fetch=z,o.Headers=m,o.Request=E,o.Response=O),a.Headers=m,a.Request=E,a.Response=O,a.fetch=z,Object.defineProperty(a,"__esModule",{value:!0}),a})({})})(r),r.fetch.ponyfill=!0,delete r.fetch.polyfill;var s=n.fetch?n:r;e=s.fetch,e.default=s.fetch,e.fetch=s.fetch,e.Headers=s.Headers,e.Request=s.Request,e.Response=s.Response,t.exports=e})(QA,QA.exports);var Dhe=QA.exports;const RP=Fy(Dhe);var Uhe=Object.defineProperty,Mhe=Object.defineProperties,Lhe=Object.getOwnPropertyDescriptors,jP=Object.getOwnPropertySymbols,Bhe=Object.prototype.hasOwnProperty,$he=Object.prototype.propertyIsEnumerable,OP=(t,e,n)=>e in t?Uhe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,DP=(t,e)=>{for(var n in e||(e={}))Bhe.call(e,n)&&OP(t,n,e[n]);if(jP)for(var n of jP(e))$he.call(e,n)&&OP(t,n,e[n]);return t},UP=(t,e)=>Mhe(t,Lhe(e));const Fhe={Accept:"application/json","Content-Type":"application/json"},Hhe="POST",MP={headers:Fhe,method:Hhe},LP=10;let wa=class{constructor(e,n=!1){if(this.url=e,this.disableProviderPing=n,this.events=new Pi.EventEmitter,this.isAvailable=!1,this.registering=!1,!tP(e))throw new Error(`Provided URL is not compatible with HTTP connection: ${e}`);this.url=e,this.disableProviderPing=n}get connected(){return this.isAvailable}get connecting(){return this.registering}on(e,n){this.events.on(e,n)}once(e,n){this.events.once(e,n)}off(e,n){this.events.off(e,n)}removeListener(e,n){this.events.removeListener(e,n)}async open(e=this.url){await this.register(e)}async close(){if(!this.isAvailable)throw new Error("Connection already closed");this.onClose()}async send(e){this.isAvailable||await this.register();try{const n=dc(e),r=await(await RP(this.url,UP(DP({},MP),{body:n}))).json();this.onPayload({data:r})}catch(n){this.onError(e.id,n)}}async register(e=this.url){if(!tP(e))throw new Error(`Provided URL is not compatible with HTTP connection: ${e}`);if(this.registering){const n=this.events.getMaxListeners();return(this.events.listenerCount("register_error")>=n||this.events.listenerCount("open")>=n)&&this.events.setMaxListeners(n+1),new Promise((r,s)=>{this.events.once("register_error",i=>{this.resetMaxListeners(),s(i)}),this.events.once("open",()=>{if(this.resetMaxListeners(),typeof this.isAvailable>"u")return s(new Error("HTTP connection is missing or invalid"));r()})})}this.url=e,this.registering=!0;try{if(!this.disableProviderPing){const n=dc({id:1,jsonrpc:"2.0",method:"test",params:[]});await RP(e,UP(DP({},MP),{body:n}))}this.onOpen()}catch(n){const r=this.parseError(n);throw this.events.emit("register_error",r),this.onClose(),r}}onOpen(){this.isAvailable=!0,this.registering=!1,this.events.emit("open")}onClose(){this.isAvailable=!1,this.registering=!1,this.events.emit("close")}onPayload(e){if(typeof e.data>"u")return;const n=typeof e.data=="string"?Fd(e.data):e.data;this.events.emit("payload",n)}onError(e,n){const r=this.parseError(n),s=r.message||r.toString(),i=Z1(e,s);this.events.emit("payload",i)}parseError(e,n=this.url){return TL(e,n,"HTTP")}resetMaxListeners(){this.events.getMaxListeners()>LP&&this.events.setMaxListeners(LP)}};const BP="error",Vhe="wss://relay.walletconnect.org",zhe="wc",Whe="universal_provider",xb=`${zhe}@2:${Whe}:`,JL="https://rpc.walletconnect.org/v1/",Gh="generic",qhe=`${JL}bundler`,ji={DEFAULT_CHAIN_CHANGED:"default_chain_changed"};function IS(t){return t==null||typeof t!="object"&&typeof t!="function"}function ZL(t){return Object.getOwnPropertySymbols(t).filter(e=>Object.prototype.propertyIsEnumerable.call(t,e))}function XL(t){return t==null?t===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(t)}const Khe="[object RegExp]",eB="[object String]",tB="[object Number]",nB="[object Boolean]",rB="[object Arguments]",Ghe="[object Symbol]",Yhe="[object Date]",Qhe="[object Map]",Jhe="[object Set]",Zhe="[object Array]",Xhe="[object ArrayBuffer]",efe="[object Object]",tfe="[object DataView]",nfe="[object Uint8Array]",rfe="[object Uint8ClampedArray]",sfe="[object Uint16Array]",ife="[object Uint32Array]",afe="[object Int8Array]",ofe="[object Int16Array]",cfe="[object Int32Array]",lfe="[object Float32Array]",ufe="[object Float64Array]";function PS(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function dfe(t,e){return mf(t,void 0,t,new Map,e)}function mf(t,e,n,r=new Map,s=void 0){const i=s==null?void 0:s(t,e,n,r);if(i!=null)return i;if(IS(t))return t;if(r.has(t))return r.get(t);if(Array.isArray(t)){const a=new Array(t.length);r.set(t,a);for(let o=0;o<t.length;o++)a[o]=mf(t[o],o,n,r,s);return Object.hasOwn(t,"index")&&(a.index=t.index),Object.hasOwn(t,"input")&&(a.input=t.input),a}if(t instanceof Date)return new Date(t.getTime());if(t instanceof RegExp){const a=new RegExp(t.source,t.flags);return a.lastIndex=t.lastIndex,a}if(t instanceof Map){const a=new Map;r.set(t,a);for(const[o,l]of t)a.set(o,mf(l,o,n,r,s));return a}if(t instanceof Set){const a=new Set;r.set(t,a);for(const o of t)a.add(mf(o,void 0,n,r,s));return a}if(typeof Buffer<"u"&&Buffer.isBuffer(t))return t.subarray();if(PS(t)){const a=new(Object.getPrototypeOf(t)).constructor(t.length);r.set(t,a);for(let o=0;o<t.length;o++)a[o]=mf(t[o],o,n,r,s);return a}if(t instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&t instanceof SharedArrayBuffer)return t.slice(0);if(t instanceof DataView){const a=new DataView(t.buffer.slice(0),t.byteOffset,t.byteLength);return r.set(t,a),Su(a,t,n,r,s),a}if(typeof File<"u"&&t instanceof File){const a=new File([t],t.name,{type:t.type});return r.set(t,a),Su(a,t,n,r,s),a}if(t instanceof Blob){const a=new Blob([t],{type:t.type});return r.set(t,a),Su(a,t,n,r,s),a}if(t instanceof Error){const a=new t.constructor;return r.set(t,a),a.message=t.message,a.name=t.name,a.stack=t.stack,a.cause=t.cause,Su(a,t,n,r,s),a}if(typeof t=="object"&&hfe(t)){const a=Object.create(Object.getPrototypeOf(t));return r.set(t,a),Su(a,t,n,r,s),a}return t}function Su(t,e,n=t,r,s){const i=[...Object.keys(e),...ZL(e)];for(let a=0;a<i.length;a++){const o=i[a],l=Object.getOwnPropertyDescriptor(t,o);(l==null||l.writable)&&(t[o]=mf(e[o],o,n,r,s))}}function hfe(t){switch(XL(t)){case rB:case Zhe:case Xhe:case tfe:case nB:case Yhe:case lfe:case ufe:case afe:case ofe:case cfe:case Qhe:case tB:case efe:case Khe:case Jhe:case eB:case Ghe:case nfe:case rfe:case sfe:case ife:return!0;default:return!1}}function ffe(t,e){return dfe(t,(n,r,s,i)=>{if(typeof t=="object")switch(Object.prototype.toString.call(t)){case tB:case eB:case nB:{const a=new t.constructor(t==null?void 0:t.valueOf());return Su(a,t),a}case rB:{const a={};return Su(a,t),a.length=t.length,a[Symbol.iterator]=t[Symbol.iterator],a}default:return}})}function $P(t){return ffe(t)}function FP(t){return t!==null&&typeof t=="object"&&XL(t)==="[object Arguments]"}function HP(t){return typeof t=="object"&&t!==null}function pfe(){}function mfe(t){return PS(t)}function gfe(t){var n;if(typeof t!="object"||t==null)return!1;if(Object.getPrototypeOf(t)===null)return!0;if(Object.prototype.toString.call(t)!=="[object Object]"){const r=t[Symbol.toStringTag];return r==null||!((n=Object.getOwnPropertyDescriptor(t,Symbol.toStringTag))!=null&&n.writable)?!1:t.toString()===`[object ${r}]`}let e=t;for(;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e}function yfe(t){if(IS(t))return t;if(Array.isArray(t)||PS(t)||t instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&t instanceof SharedArrayBuffer)return t.slice(0);const e=Object.getPrototypeOf(t),n=e.constructor;if(t instanceof Date||t instanceof Map||t instanceof Set)return new n(t);if(t instanceof RegExp){const r=new n(t);return r.lastIndex=t.lastIndex,r}if(t instanceof DataView)return new n(t.buffer.slice(0));if(t instanceof Error){const r=new n(t.message);return r.stack=t.stack,r.name=t.name,r.cause=t.cause,r}if(typeof File<"u"&&t instanceof File)return new n([t],t.name,{type:t.type,lastModified:t.lastModified});if(typeof t=="object"){const r=Object.create(e);return Object.assign(r,t)}return t}function wfe(t,...e){const n=e.slice(0,-1),r=e[e.length-1];let s=t;for(let i=0;i<n.length;i++){const a=n[i];s=JA(s,a,r,new Map)}return s}function JA(t,e,n,r){if(IS(t)&&(t=Object(t)),e==null||typeof e!="object")return t;if(r.has(e))return yfe(r.get(e));if(r.set(e,t),Array.isArray(e)){e=e.slice();for(let i=0;i<e.length;i++)e[i]=e[i]??void 0}const s=[...Object.keys(e),...ZL(e)];for(let i=0;i<s.length;i++){const a=s[i];let o=e[a],l=t[a];if(FP(o)&&(o={...o}),FP(l)&&(l={...l}),typeof Buffer<"u"&&Buffer.isBuffer(o)&&(o=$P(o)),Array.isArray(o))if(typeof l=="object"&&l!=null){const d=[],h=Reflect.ownKeys(l);for(let f=0;f<h.length;f++){const p=h[f];d[p]=l[p]}l=d}else l=[];const u=n(l,o,a,t,e,r);u!=null?t[a]=u:Array.isArray(o)||HP(l)&&HP(o)?t[a]=JA(l,o,n,r):l==null&&gfe(o)?t[a]=JA({},o,n,r):l==null&&mfe(o)?t[a]=$P(o):(l===void 0||o!==void 0)&&(t[a]=o)}return t}function bfe(t,...e){return wfe(t,...e,pfe)}var xfe=Object.defineProperty,vfe=Object.defineProperties,Efe=Object.getOwnPropertyDescriptors,VP=Object.getOwnPropertySymbols,Nfe=Object.prototype.hasOwnProperty,Cfe=Object.prototype.propertyIsEnumerable,zP=(t,e,n)=>e in t?xfe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,vb=(t,e)=>{for(var n in e||(e={}))Nfe.call(e,n)&&zP(t,n,e[n]);if(VP)for(var n of VP(e))Cfe.call(e,n)&&zP(t,n,e[n]);return t},Afe=(t,e)=>vfe(t,Efe(e));function ti(t,e,n){var r;const s=Rf(t);return((r=e.rpcMap)==null?void 0:r[s.reference])||`${JL}?chainId=${s.namespace}:${s.reference}&projectId=${n}`}function ph(t){return t.includes(":")?t.split(":")[1]:t}function sB(t){return t.map(e=>`${e.split(":")[0]}:${e.split(":")[1]}`)}function Tfe(t,e){const n=Object.keys(e.namespaces).filter(s=>s.includes(t));if(!n.length)return[];const r=[];return n.forEach(s=>{const i=e.namespaces[s].accounts;r.push(...i)}),r}function Eb(t={},e={}){const n=WP(t),r=WP(e);return bfe(n,r)}function WP(t){var e,n,r,s,i;const a={};if(!Ml(t))return a;for(const[o,l]of Object.entries(t)){const u=Q1(o)?[o]:l.chains,d=l.methods||[],h=l.events||[],f=l.rpcMap||{},p=pf(o);a[p]=Afe(vb(vb({},a[p]),l),{chains:so(u,(e=a[p])==null?void 0:e.chains),methods:so(d,(n=a[p])==null?void 0:n.methods),events:so(h,(r=a[p])==null?void 0:r.events)}),(Ml(f)||Ml(((s=a[p])==null?void 0:s.rpcMap)||{}))&&(a[p].rpcMap=vb(vb({},f),(i=a[p])==null?void 0:i.rpcMap))}return a}function qP(t){return t.includes(":")?t.split(":")[2]:t}function KP(t){const e={};for(const[n,r]of Object.entries(t)){const s=r.methods||[],i=r.events||[],a=r.accounts||[],o=Q1(n)?[n]:r.chains?r.chains:sB(r.accounts);e[n]={chains:o,methods:s,events:i,accounts:a}}return e}function sN(t){return typeof t=="number"?t:t.includes("0x")?parseInt(t,16):(t=t.includes(":")?t.split(":")[1]:t,isNaN(Number(t))?t:Number(t))}const iB={},St=t=>iB[t],iN=(t,e)=>{iB[t]=e};var Sfe=Object.defineProperty,kfe=(t,e,n)=>e in t?Sfe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Ph=(t,e,n)=>kfe(t,typeof e!="symbol"?e+"":e,n);let _fe=class{constructor(e){Ph(this,"name","polkadot"),Ph(this,"client"),Ph(this,"httpProviders"),Ph(this,"events"),Ph(this,"namespace"),Ph(this,"chainId"),this.namespace=e.namespace,this.events=St("events"),this.client=St("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,n){this.httpProviders[e]||this.setHttpProvider(e,n),this.chainId=e,this.events.emit(ji.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getAccounts(){const e=this.namespace.accounts;return e?e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2])||[]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{var r;const s=ph(n);e[s]=this.createHttpProvider(s,(r=this.namespace.rpcMap)==null?void 0:r[n])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||ti(e,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new Ri(new wa(r,St("disableProviderPing")))}};var Ife=Object.defineProperty,Pfe=Object.defineProperties,Rfe=Object.getOwnPropertyDescriptors,GP=Object.getOwnPropertySymbols,jfe=Object.prototype.hasOwnProperty,Ofe=Object.prototype.propertyIsEnumerable,ZA=(t,e,n)=>e in t?Ife(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,YP=(t,e)=>{for(var n in e||(e={}))jfe.call(e,n)&&ZA(t,n,e[n]);if(GP)for(var n of GP(e))Ofe.call(e,n)&&ZA(t,n,e[n]);return t},QP=(t,e)=>Pfe(t,Rfe(e)),Rh=(t,e,n)=>ZA(t,typeof e!="symbol"?e+"":e,n);class Dfe{constructor(e){Rh(this,"name","eip155"),Rh(this,"client"),Rh(this,"chainId"),Rh(this,"namespace"),Rh(this,"httpProviders"),Rh(this,"events"),this.namespace=e.namespace,this.events=St("events"),this.client=St("client"),this.httpProviders=this.createHttpProviders(),this.chainId=parseInt(this.getDefaultChain())}async request(e){switch(e.request.method){case"eth_requestAccounts":return this.getAccounts();case"eth_accounts":return this.getAccounts();case"wallet_switchEthereumChain":return await this.handleSwitchChain(e);case"eth_chainId":return parseInt(this.getDefaultChain());case"wallet_getCapabilities":return await this.getCapabilities(e);case"wallet_getCallsStatus":return await this.getCallStatus(e)}return this.namespace.methods.includes(e.request.method)?await this.client.request(e):this.getHttpProvider().request(e.request)}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}setDefaultChain(e,n){this.httpProviders[e]||this.setHttpProvider(parseInt(e),n),this.chainId=parseInt(e),this.events.emit(ji.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId.toString();if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}createHttpProvider(e,n){const r=n||ti(`${this.name}:${e}`,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new Ri(new wa(r,St("disableProviderPing")))}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{var r;const s=parseInt(ph(n));e[s]=this.createHttpProvider(s,(r=this.namespace.rpcMap)==null?void 0:r[n])}),e}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}getHttpProvider(){const e=this.chainId,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}async handleSwitchChain(e){var n,r;let s=e.request.params?(n=e.request.params[0])==null?void 0:n.chainId:"0x0";s=s.startsWith("0x")?s:`0x${s}`;const i=parseInt(s,16);if(this.isChainApproved(i))this.setDefaultChain(`${i}`);else if(this.namespace.methods.includes("wallet_switchEthereumChain"))await this.client.request({topic:e.topic,request:{method:e.request.method,params:[{chainId:s}]},chainId:(r=this.namespace.chains)==null?void 0:r[0]}),this.setDefaultChain(`${i}`);else throw new Error(`Failed to switch to chain 'eip155:${i}'. The chain is not approved or the wallet does not support 'wallet_switchEthereumChain' method.`);return null}isChainApproved(e){return this.namespace.chains.includes(`${this.name}:${e}`)}async getCapabilities(e){var n,r,s,i,a;const o=(r=(n=e.request)==null?void 0:n.params)==null?void 0:r[0],l=((i=(s=e.request)==null?void 0:s.params)==null?void 0:i[1])||[],u=`${o}${l.join(",")}`;if(!o)throw new Error("Missing address parameter in `wallet_getCapabilities` request");const d=this.client.session.get(e.topic),h=((a=d==null?void 0:d.sessionProperties)==null?void 0:a.capabilities)||{};if(h!=null&&h[u])return h==null?void 0:h[u];const f=await this.client.request(e);try{await this.client.session.update(e.topic,{sessionProperties:QP(YP({},d.sessionProperties||{}),{capabilities:QP(YP({},h||{}),{[u]:f})})})}catch(p){console.warn("Failed to update session with capabilities",p)}return f}async getCallStatus(e){var n,r;const s=this.client.session.get(e.topic),i=(n=s.sessionProperties)==null?void 0:n.bundler_name;if(i){const o=this.getBundlerUrl(e.chainId,i);try{return await this.getUserOperationReceipt(o,e)}catch(l){console.warn("Failed to fetch call status from bundler",l,o)}}const a=(r=s.sessionProperties)==null?void 0:r.bundler_url;if(a)try{return await this.getUserOperationReceipt(a,e)}catch(o){console.warn("Failed to fetch call status from custom bundler",o,a)}if(this.namespace.methods.includes(e.request.method))return await this.client.request(e);throw new Error("Fetching call status not approved by the wallet.")}async getUserOperationReceipt(e,n){var r;const s=new URL(e),i=await fetch(s,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(Cl("eth_getUserOperationReceipt",[(r=n.request.params)==null?void 0:r[0]]))});if(!i.ok)throw new Error(`Failed to fetch user operation receipt - ${i.status}`);return await i.json()}getBundlerUrl(e,n){return`${qhe}?projectId=${this.client.core.projectId}&chainId=${e}&bundler=${n}`}}var Ufe=Object.defineProperty,Mfe=(t,e,n)=>e in t?Ufe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,jh=(t,e,n)=>Mfe(t,typeof e!="symbol"?e+"":e,n);let Lfe=class{constructor(e){jh(this,"name","solana"),jh(this,"client"),jh(this,"httpProviders"),jh(this,"events"),jh(this,"namespace"),jh(this,"chainId"),this.namespace=e.namespace,this.events=St("events"),this.client=St("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,n){this.httpProviders[e]||this.setHttpProvider(e,n),this.chainId=e,this.events.emit(ji.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{var r;const s=ph(n);e[s]=this.createHttpProvider(s,(r=this.namespace.rpcMap)==null?void 0:r[n])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||ti(e,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new Ri(new wa(r,St("disableProviderPing")))}};var Bfe=Object.defineProperty,$fe=(t,e,n)=>e in t?Bfe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Oh=(t,e,n)=>$fe(t,typeof e!="symbol"?e+"":e,n);let Ffe=class{constructor(e){Oh(this,"name","cosmos"),Oh(this,"client"),Oh(this,"httpProviders"),Oh(this,"events"),Oh(this,"namespace"),Oh(this,"chainId"),this.namespace=e.namespace,this.events=St("events"),this.client=St("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,n){this.httpProviders[e]||this.setHttpProvider(e,n),this.chainId=e,this.events.emit(ji.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{var r;const s=ph(n);e[s]=this.createHttpProvider(s,(r=this.namespace.rpcMap)==null?void 0:r[n])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||ti(e,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new Ri(new wa(r,St("disableProviderPing")))}};var Hfe=Object.defineProperty,Vfe=(t,e,n)=>e in t?Hfe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Dh=(t,e,n)=>Vfe(t,typeof e!="symbol"?e+"":e,n);let zfe=class{constructor(e){Dh(this,"name","algorand"),Dh(this,"client"),Dh(this,"httpProviders"),Dh(this,"events"),Dh(this,"namespace"),Dh(this,"chainId"),this.namespace=e.namespace,this.events=St("events"),this.client=St("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,n){if(!this.httpProviders[e]){const r=n||ti(`${this.name}:${e}`,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,r)}this.chainId=e,this.events.emit(ji.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{var r;e[n]=this.createHttpProvider(n,(r=this.namespace.rpcMap)==null?void 0:r[n])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||ti(e,this.namespace,this.client.core.projectId);return typeof r>"u"?void 0:new Ri(new wa(r,St("disableProviderPing")))}};var Wfe=Object.defineProperty,qfe=(t,e,n)=>e in t?Wfe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Uh=(t,e,n)=>qfe(t,typeof e!="symbol"?e+"":e,n);class Kfe{constructor(e){Uh(this,"name","cip34"),Uh(this,"client"),Uh(this,"httpProviders"),Uh(this,"events"),Uh(this,"namespace"),Uh(this,"chainId"),this.namespace=e.namespace,this.events=St("events"),this.client=St("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,n){this.httpProviders[e]||this.setHttpProvider(e,n),this.chainId=e,this.events.emit(ji.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{const r=this.getCardanoRPCUrl(n),s=ph(n);e[s]=this.createHttpProvider(s,r)}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}getCardanoRPCUrl(e){const n=this.namespace.rpcMap;if(n)return n[e]}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||this.getCardanoRPCUrl(e);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new Ri(new wa(r,St("disableProviderPing")))}}var Gfe=Object.defineProperty,Yfe=(t,e,n)=>e in t?Gfe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Mh=(t,e,n)=>Yfe(t,typeof e!="symbol"?e+"":e,n);class Qfe{constructor(e){Mh(this,"name","elrond"),Mh(this,"client"),Mh(this,"httpProviders"),Mh(this,"events"),Mh(this,"namespace"),Mh(this,"chainId"),this.namespace=e.namespace,this.events=St("events"),this.client=St("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,n){this.httpProviders[e]||this.setHttpProvider(e,n),this.chainId=e,this.events.emit(ji.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{var r;const s=ph(n);e[s]=this.createHttpProvider(s,(r=this.namespace.rpcMap)==null?void 0:r[n])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||ti(e,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new Ri(new wa(r,St("disableProviderPing")))}}var Jfe=Object.defineProperty,Zfe=(t,e,n)=>e in t?Jfe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Lh=(t,e,n)=>Zfe(t,typeof e!="symbol"?e+"":e,n);let Xfe=class{constructor(e){Lh(this,"name","multiversx"),Lh(this,"client"),Lh(this,"httpProviders"),Lh(this,"events"),Lh(this,"namespace"),Lh(this,"chainId"),this.namespace=e.namespace,this.events=St("events"),this.client=St("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,n){this.httpProviders[e]||this.setHttpProvider(e,n),this.chainId=e,this.events.emit(ji.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{var r;const s=ph(n);e[s]=this.createHttpProvider(s,(r=this.namespace.rpcMap)==null?void 0:r[n])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||ti(e,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new Ri(new wa(r,St("disableProviderPing")))}};var epe=Object.defineProperty,tpe=(t,e,n)=>e in t?epe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Bh=(t,e,n)=>tpe(t,typeof e!="symbol"?e+"":e,n);let npe=class{constructor(e){Bh(this,"name","near"),Bh(this,"client"),Bh(this,"httpProviders"),Bh(this,"events"),Bh(this,"namespace"),Bh(this,"chainId"),this.namespace=e.namespace,this.events=St("events"),this.client=St("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,n){if(this.chainId=e,!this.httpProviders[e]){const r=n||ti(`${this.name}:${e}`,this.namespace);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,r)}this.events.emit(ji.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e?e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2])||[]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{var r;e[n]=this.createHttpProvider(n,(r=this.namespace.rpcMap)==null?void 0:r[n])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||ti(e,this.namespace);return typeof r>"u"?void 0:new Ri(new wa(r,St("disableProviderPing")))}};var rpe=Object.defineProperty,spe=(t,e,n)=>e in t?rpe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,$h=(t,e,n)=>spe(t,typeof e!="symbol"?e+"":e,n);let ipe=class{constructor(e){$h(this,"name","tezos"),$h(this,"client"),$h(this,"httpProviders"),$h(this,"events"),$h(this,"namespace"),$h(this,"chainId"),this.namespace=e.namespace,this.events=St("events"),this.client=St("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,n){if(this.chainId=e,!this.httpProviders[e]){const r=n||ti(`${this.name}:${e}`,this.namespace);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,r)}this.events.emit(ji.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e?e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2])||[]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{e[n]=this.createHttpProvider(n)}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||ti(e,this.namespace);return typeof r>"u"?void 0:new Ri(new wa(r))}};var ape=Object.defineProperty,ope=(t,e,n)=>e in t?ape(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Fh=(t,e,n)=>ope(t,typeof e!="symbol"?e+"":e,n);let cpe=class{constructor(e){Fh(this,"name",Gh),Fh(this,"client"),Fh(this,"httpProviders"),Fh(this,"events"),Fh(this,"namespace"),Fh(this,"chainId"),this.namespace=e.namespace,this.events=St("events"),this.client=St("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace.chains=[...new Set((this.namespace.chains||[]).concat(e.chains||[]))],this.namespace.accounts=[...new Set((this.namespace.accounts||[]).concat(e.accounts||[]))],this.namespace.methods=[...new Set((this.namespace.methods||[]).concat(e.methods||[]))],this.namespace.events=[...new Set((this.namespace.events||[]).concat(e.events||[]))],this.httpProviders=this.createHttpProviders()}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider(e.chainId).request(e.request)}setDefaultChain(e,n){this.httpProviders[e]||this.setHttpProvider(e,n),this.chainId=e,this.events.emit(ji.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}createHttpProviders(){var e,n;const r={};return(n=(e=this.namespace)==null?void 0:e.accounts)==null||n.forEach(s=>{const i=Rf(s);r[`${i.namespace}:${i.reference}`]=this.createHttpProvider(s)}),r}getHttpProvider(e){const n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||ti(e,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new Ri(new wa(r,St("disableProviderPing")))}};var lpe=Object.defineProperty,upe=Object.defineProperties,dpe=Object.getOwnPropertyDescriptors,JP=Object.getOwnPropertySymbols,hpe=Object.prototype.hasOwnProperty,fpe=Object.prototype.propertyIsEnumerable,XA=(t,e,n)=>e in t?lpe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Nb=(t,e)=>{for(var n in e||(e={}))hpe.call(e,n)&&XA(t,n,e[n]);if(JP)for(var n of JP(e))fpe.call(e,n)&&XA(t,n,e[n]);return t},aN=(t,e)=>upe(t,dpe(e)),ui=(t,e,n)=>XA(t,typeof e!="symbol"?e+"":e,n);let ppe=class aB{constructor(e){ui(this,"client"),ui(this,"namespaces"),ui(this,"optionalNamespaces"),ui(this,"sessionProperties"),ui(this,"scopedProperties"),ui(this,"events",new Q6),ui(this,"rpcProviders",{}),ui(this,"session"),ui(this,"providerOpts"),ui(this,"logger"),ui(this,"uri"),ui(this,"disableProviderPing",!1),this.providerOpts=e,this.logger=typeof(e==null?void 0:e.logger)<"u"&&typeof(e==null?void 0:e.logger)!="string"?e.logger:aw(dm({level:(e==null?void 0:e.logger)||BP})),this.disableProviderPing=(e==null?void 0:e.disableProviderPing)||!1}static async init(e){const n=new aB(e);return await n.initialize(),n}async request(e,n,r){const[s,i]=this.validateChain(n);if(!this.session)throw new Error("Please call connect() before request()");return await this.getProvider(s).request({request:Nb({},e),chainId:`${s}:${i}`,topic:this.session.topic,expiry:r})}sendAsync(e,n,r,s){const i=new Date().getTime();this.request(e,r,s).then(a=>n(null,J1(i,a))).catch(a=>n(a,void 0))}async enable(){if(!this.client)throw new Error("Sign Client not initialized");return this.session||await this.connect({namespaces:this.namespaces,optionalNamespaces:this.optionalNamespaces,sessionProperties:this.sessionProperties,scopedProperties:this.scopedProperties}),await this.requestAccounts()}async disconnect(){var e;if(!this.session)throw new Error("Please call connect() before enable()");await this.client.disconnect({topic:(e=this.session)==null?void 0:e.topic,reason:rn("USER_DISCONNECTED")}),await this.cleanup()}async connect(e){if(!this.client)throw new Error("Sign Client not initialized");if(this.setNamespaces(e),await this.cleanupPendingPairings(),!e.skipPairing)return await this.pair(e.pairingTopic)}async authenticate(e,n){if(!this.client)throw new Error("Sign Client not initialized");this.setNamespaces(e),await this.cleanupPendingPairings();const{uri:r,response:s}=await this.client.authenticate(e,n);r&&(this.uri=r,this.events.emit("display_uri",r));const i=await s();if(this.session=i.session,this.session){const a=KP(this.session.namespaces);this.namespaces=Eb(this.namespaces,a),await this.persist("namespaces",this.namespaces),this.onConnect()}return i}on(e,n){this.events.on(e,n)}once(e,n){this.events.once(e,n)}removeListener(e,n){this.events.removeListener(e,n)}off(e,n){this.events.off(e,n)}get isWalletConnect(){return!0}async pair(e){const{uri:n,approval:r}=await this.client.connect({pairingTopic:e,requiredNamespaces:this.namespaces,optionalNamespaces:this.optionalNamespaces,sessionProperties:this.sessionProperties,scopedProperties:this.scopedProperties});n&&(this.uri=n,this.events.emit("display_uri",n));const s=await r();this.session=s;const i=KP(s.namespaces);return this.namespaces=Eb(this.namespaces,i),await this.persist("namespaces",this.namespaces),await this.persist("optionalNamespaces",this.optionalNamespaces),this.onConnect(),this.session}setDefaultChain(e,n){try{if(!this.session)return;const[r,s]=this.validateChain(e),i=this.getProvider(r);i.name===Gh?i.setDefaultChain(`${r}:${s}`,n):i.setDefaultChain(s,n)}catch(r){if(!/Please call connect/.test(r.message))throw r}}async cleanupPendingPairings(e={}){this.logger.info("Cleaning up inactive pairings...");const n=this.client.pairing.getAll();if(tc(n)){for(const r of n)e.deletePairings?this.client.core.expirer.set(r.topic,0):await this.client.core.relayer.subscriber.unsubscribe(r.topic);this.logger.info(`Inactive pairings cleared: ${n.length}`)}}abortPairingAttempt(){this.logger.warn("abortPairingAttempt is deprecated. This is now a no-op.")}async checkStorage(){this.namespaces=await this.getFromStore("namespaces")||{},this.optionalNamespaces=await this.getFromStore("optionalNamespaces")||{},this.session&&this.createProviders()}async initialize(){this.logger.trace("Initialized"),await this.createClient(),await this.checkStorage(),this.registerEventListeners()}async createClient(){var e,n;if(this.client=this.providerOpts.client||await Ohe.init({core:this.providerOpts.core,logger:this.providerOpts.logger||BP,relayUrl:this.providerOpts.relayUrl||Vhe,projectId:this.providerOpts.projectId,metadata:this.providerOpts.metadata,storageOptions:this.providerOpts.storageOptions,storage:this.providerOpts.storage,name:this.providerOpts.name,customStoragePrefix:this.providerOpts.customStoragePrefix,telemetryEnabled:this.providerOpts.telemetryEnabled}),this.providerOpts.session)try{this.session=this.client.session.get(this.providerOpts.session.topic)}catch(r){throw this.logger.error("Failed to get session",r),new Error(`The provided session: ${(n=(e=this.providerOpts)==null?void 0:e.session)==null?void 0:n.topic} doesn't exist in the Sign client`)}else{const r=this.client.session.getAll();this.session=r[0]}this.logger.trace("SignClient Initialized")}createProviders(){if(!this.client)throw new Error("Sign Client not initialized");if(!this.session)throw new Error("Session not initialized. Please call connect() before enable()");const e=[...new Set(Object.keys(this.session.namespaces).map(n=>pf(n)))];iN("client",this.client),iN("events",this.events),iN("disableProviderPing",this.disableProviderPing),e.forEach(n=>{if(!this.session)return;const r=Tfe(n,this.session),s=sB(r),i=Eb(this.namespaces,this.optionalNamespaces),a=aN(Nb({},i[n]),{accounts:r,chains:s});switch(n){case"eip155":this.rpcProviders[n]=new Dfe({namespace:a});break;case"algorand":this.rpcProviders[n]=new zfe({namespace:a});break;case"solana":this.rpcProviders[n]=new Lfe({namespace:a});break;case"cosmos":this.rpcProviders[n]=new Ffe({namespace:a});break;case"polkadot":this.rpcProviders[n]=new _fe({namespace:a});break;case"cip34":this.rpcProviders[n]=new Kfe({namespace:a});break;case"elrond":this.rpcProviders[n]=new Qfe({namespace:a});break;case"multiversx":this.rpcProviders[n]=new Xfe({namespace:a});break;case"near":this.rpcProviders[n]=new npe({namespace:a});break;case"tezos":this.rpcProviders[n]=new ipe({namespace:a});break;default:this.rpcProviders[Gh]?this.rpcProviders[Gh].updateNamespace(a):this.rpcProviders[Gh]=new cpe({namespace:a})}})}registerEventListeners(){if(typeof this.client>"u")throw new Error("Sign Client is not initialized");this.client.on("session_ping",e=>{var n;const{topic:r}=e;r===((n=this.session)==null?void 0:n.topic)&&this.events.emit("session_ping",e)}),this.client.on("session_event",e=>{var n;const{params:r,topic:s}=e;if(s!==((n=this.session)==null?void 0:n.topic))return;const{event:i}=r;if(i.name==="accountsChanged"){const a=i.data;a&&tc(a)&&this.events.emit("accountsChanged",a.map(qP))}else if(i.name==="chainChanged"){const a=r.chainId,o=r.event.data,l=pf(a),u=sN(a)!==sN(o)?`${l}:${sN(o)}`:a;this.onChainChanged(u)}else this.events.emit(i.name,i.data);this.events.emit("session_event",e)}),this.client.on("session_update",({topic:e,params:n})=>{var r,s;if(e!==((r=this.session)==null?void 0:r.topic))return;const{namespaces:i}=n,a=(s=this.client)==null?void 0:s.session.get(e);this.session=aN(Nb({},a),{namespaces:i}),this.onSessionUpdate(),this.events.emit("session_update",{topic:e,params:n})}),this.client.on("session_delete",async e=>{var n;e.topic===((n=this.session)==null?void 0:n.topic)&&(await this.cleanup(),this.events.emit("session_delete",e),this.events.emit("disconnect",aN(Nb({},rn("USER_DISCONNECTED")),{data:e.topic})))}),this.on(ji.DEFAULT_CHAIN_CHANGED,e=>{this.onChainChanged(e,!0)})}getProvider(e){return this.rpcProviders[e]||this.rpcProviders[Gh]}onSessionUpdate(){Object.keys(this.rpcProviders).forEach(e=>{var n;this.getProvider(e).updateNamespace((n=this.session)==null?void 0:n.namespaces[e])})}setNamespaces(e){const{namespaces:n={},optionalNamespaces:r={},sessionProperties:s,scopedProperties:i}=e;this.optionalNamespaces=Eb(n,r),this.sessionProperties=s,this.scopedProperties=i}validateChain(e){const[n,r]=(e==null?void 0:e.split(":"))||["",""];if(!this.namespaces||!Object.keys(this.namespaces).length)return[n,r];if(n&&!Object.keys(this.namespaces||{}).map(a=>pf(a)).includes(n))throw new Error(`Namespace '${n}' is not configured. Please call connect() first with namespace config.`);if(n&&r)return[n,r];const s=pf(Object.keys(this.namespaces)[0]),i=this.rpcProviders[s].getDefaultChain();return[s,i]}async requestAccounts(){const[e]=this.validateChain();return await this.getProvider(e).requestAccounts()}async onChainChanged(e,n=!1){if(!this.namespaces)return;const[r,s]=this.validateChain(e);if(!s)return;this.updateNamespaceChain(r,s),this.events.emit("chainChanged",s);const i=this.getProvider(r).getDefaultChain();n||this.getProvider(r).setDefaultChain(s),this.emitAccountsChangedOnChainChange({namespace:r,previousChainId:i,newChainId:e}),await this.persist("namespaces",this.namespaces)}emitAccountsChangedOnChainChange({namespace:e,previousChainId:n,newChainId:r}){var s,i;try{if(n===r)return;const a=(i=(s=this.session)==null?void 0:s.namespaces[e])==null?void 0:i.accounts;if(!a)return;const o=a.filter(l=>l.includes(`${r}:`)).map(qP);if(!tc(o))return;this.events.emit("accountsChanged",o)}catch(a){this.logger.warn("Failed to emit accountsChanged on chain change",a)}}updateNamespaceChain(e,n){if(!this.namespaces)return;const r=this.namespaces[e]?e:`${e}:${n}`,s={chains:[],methods:[],events:[],defaultChain:n};this.namespaces[r]?this.namespaces[r]&&(this.namespaces[r].defaultChain=n):this.namespaces[r]=s}onConnect(){this.createProviders(),this.events.emit("connect",{session:this.session})}async cleanup(){this.namespaces=void 0,this.optionalNamespaces=void 0,this.sessionProperties=void 0,await this.deleteFromStore("namespaces"),await this.deleteFromStore("optionalNamespaces"),await this.deleteFromStore("sessionProperties"),this.session=void 0,await this.cleanupPendingPairings({deletePairings:!0}),await this.cleanupStorage()}async persist(e,n){var r;const s=((r=this.session)==null?void 0:r.topic)||"";await this.client.core.storage.setItem(`${xb}/${e}${s}`,n)}async getFromStore(e){var n;const r=((n=this.session)==null?void 0:n.topic)||"";return await this.client.core.storage.getItem(`${xb}/${e}${r}`)}async deleteFromStore(e){var n;const r=((n=this.session)==null?void 0:n.topic)||"";await this.client.core.storage.removeItem(`${xb}/${e}${r}`)}async cleanupStorage(){var e;try{if(((e=this.client)==null?void 0:e.session.length)>0)return;const n=await this.client.core.storage.getKeys();for(const r of n)r.startsWith(xb)&&await this.client.core.storage.removeItem(r)}catch(n){this.logger.warn("Failed to cleanup storage",n)}}},fu=null;const Gs={getSIWX(){return te.state.siwx},async initializeIfEnabled(){var i;const t=te.state.siwx,e=U.getActiveCaipAddress();if(!(t&&e))return;const[n,r,s]=e.split(":");if(U.checkIfSupportedNetwork(n))try{if(fu&&await fu,(await t.getSessions(`${n}:${r}`,s)).length)return;await Ct.open({view:"SIWXSignMessage"})}catch(a){console.error("SIWXUtil:initializeIfEnabled",a),Mt.sendEvent({type:"track",event:"SIWX_AUTH_ERROR",properties:this.getSIWXEventProperties()}),await((i=me._getClient())==null?void 0:i.disconnect().catch(console.error)),Ve.reset("Connect"),Ja.showError("A problem occurred while trying initialize authentication")}},async requestSignMessage(){const t=te.state.siwx,e=Ae.getPlainAddress(U.getActiveCaipAddress()),n=U.getActiveCaipNetwork(),r=me._getClient();if(!t)throw new Error("SIWX is not enabled");if(!e)throw new Error("No ActiveCaipAddress found");if(!n)throw new Error("No ActiveCaipNetwork or client found");if(!r)throw new Error("No ConnectionController client found");try{const s=await t.createMessage({chainId:n.caipNetworkId,accountAddress:e}),i=s.toString();pe.getConnectorId(n.chainNamespace)===Y.CONNECTOR_ID.AUTH&&Ve.pushTransactionStack({});const o=await r.signMessage(i);await t.addSession({data:s,message:i,signature:o}),U.setLastConnectedSIWECaipNetwork(n),Ct.close(),Mt.sendEvent({type:"track",event:"SIWX_AUTH_SUCCESS",properties:this.getSIWXEventProperties()})}catch(s){const i=this.getSIWXEventProperties();(!Ct.state.open||Ve.state.view==="ApproveTransaction")&&await Ct.open({view:"SIWXSignMessage"}),Ja.showError("Error signing message"),Mt.sendEvent({type:"track",event:"SIWX_AUTH_ERROR",properties:i}),console.error("SWIXUtil:requestSignMessage",s)}},async cancelSignMessage(){var t;try{const e=this.getSIWX();if((t=e==null?void 0:e.getRequired)==null?void 0:t.call(e)){const r=U.getLastConnectedSIWECaipNetwork();if(r){const s=await(e==null?void 0:e.getSessions(r==null?void 0:r.caipNetworkId,Ae.getPlainAddress(U.getActiveCaipAddress())||""));s&&s.length>0?await U.switchActiveNetwork(r):await me.disconnect()}else await me.disconnect()}else Ct.close();Ct.close(),Mt.sendEvent({event:"CLICK_CANCEL_SIWX",type:"track",properties:this.getSIWXEventProperties()})}catch(e){console.error("SIWXUtil:cancelSignMessage",e)}},async getAllSessions(){const t=this.getSIWX(),e=U.getAllRequestedCaipNetworks(),n=[];return await Promise.all(e.map(async r=>{const s=await(t==null?void 0:t.getSessions(r.caipNetworkId,Ae.getPlainAddress(U.getActiveCaipAddress())||""));s&&n.push(...s)})),n},async getSessions(){const t=te.state.siwx,e=Ae.getPlainAddress(U.getActiveCaipAddress()),n=U.getActiveCaipNetwork();return t&&e&&n?t.getSessions(n.caipNetworkId,e):[]},async isSIWXCloseDisabled(){var e;const t=this.getSIWX();if(t){const n=Ve.state.view==="ApproveTransaction",r=Ve.state.view==="SIWXSignMessage";if(n||r)return((e=t.getRequired)==null?void 0:e.call(t))&&(await this.getSessions()).length===0}return!1},async authConnectorAuthenticate({authConnector:t,chainId:e,socialUri:n,preferredAccountType:r,chainNamespace:s}){var u;const i=Gs.getSIWX();if(!i||!s.includes(Y.CHAIN.EVM)){const d=await t.connect({chainId:e,socialUri:n,preferredAccountType:r});return{address:d.address,chainId:d.chainId,accounts:d.accounts}}const a=await i.createMessage({chainId:((u=U.getActiveCaipNetwork())==null?void 0:u.caipNetworkId)||"",accountAddress:"<<AccountAddress>>"}),o={accountAddress:a.accountAddress,chainId:a.chainId,domain:a.domain,uri:a.uri,version:a.version,nonce:a.nonce,notBefore:a.notBefore,statement:a.statement,resources:a.resources,requestId:a.requestId,issuedAt:a.issuedAt,expirationTime:a.expirationTime,serializedMessage:a.toString()},l=await t.connect({chainId:e,socialUri:n,siwxMessage:o,preferredAccountType:r});return o.accountAddress=l.address,o.serializedMessage=l.message||"",l.signature&&l.message&&await Gs.addEmbeddedWalletSession(o,l.message,l.signature),{address:l.address,chainId:l.chainId,accounts:l.accounts}},async addEmbeddedWalletSession(t,e,n){if(fu)return fu;const r=Gs.getSIWX();return r?(fu=r.addSession({data:t,message:e,signature:n}).finally(()=>{fu=null}),fu):Promise.resolve()},async universalProviderAuthenticate({universalProvider:t,chains:e,methods:n}){var o,l,u;const r=Gs.getSIWX(),s=new Set(e.map(d=>d.split(":")[0]));if(!r||s.size!==1||!s.has("eip155"))return!1;const i=await r.createMessage({chainId:((o=U.getActiveCaipNetwork())==null?void 0:o.caipNetworkId)||"",accountAddress:""}),a=await t.authenticate({nonce:i.nonce,domain:i.domain,uri:i.uri,exp:i.expirationTime,iat:i.issuedAt,nbf:i.notBefore,requestId:i.requestId,version:i.version,resources:i.resources,statement:i.statement,chainId:i.chainId,methods:n,chains:[i.chainId,...e.filter(d=>d!==i.chainId)]});if(Ja.showLoading("Authenticating...",{autoClose:!1}),_e.setConnectedWalletInfo({...a.session.peer.metadata,name:a.session.peer.metadata.name,icon:(l=a.session.peer.metadata.icons)==null?void 0:l[0],type:"WALLET_CONNECT"},Array.from(s)[0]),(u=a==null?void 0:a.auths)!=null&&u.length){const d=a.auths.map(h=>{const f=t.client.formatAuthMessage({request:h.p,iss:h.p.iss});return{data:{...h.p,accountAddress:h.p.iss.split(":").slice(-1).join(""),chainId:h.p.iss.split(":").slice(2,4).join(":"),uri:h.p.aud,version:h.p.version||i.version,expirationTime:h.p.exp,issuedAt:h.p.iat,notBefore:h.p.nbf},message:f,signature:h.s.s,cacao:h}});try{await r.setSessions(d),Mt.sendEvent({type:"track",event:"SIWX_AUTH_SUCCESS",properties:Gs.getSIWXEventProperties()})}catch(h){throw console.error("SIWX:universalProviderAuth - failed to set sessions",h),Mt.sendEvent({type:"track",event:"SIWX_AUTH_ERROR",properties:Gs.getSIWXEventProperties()}),await t.disconnect().catch(console.error),h}finally{Ja.hide()}}return!0},getSIWXEventProperties(){var e;const t=U.state.activeChain;return{network:((e=U.state.activeCaipNetwork)==null?void 0:e.caipNetworkId)||"",isSmartAccount:ei(t)===Mn.ACCOUNT_TYPES.SMART_ACCOUNT}},async clearSessions(){const t=this.getSIWX();t&&await t.setSessions([])}};var oB={exports:{}},cB={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Yp=v;function mpe(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var gpe=typeof Object.is=="function"?Object.is:mpe,ype=Yp.useState,wpe=Yp.useEffect,bpe=Yp.useLayoutEffect,xpe=Yp.useDebugValue;function vpe(t,e){var n=e(),r=ype({inst:{value:n,getSnapshot:e}}),s=r[0].inst,i=r[1];return bpe(function(){s.value=n,s.getSnapshot=e,oN(s)&&i({inst:s})},[t,n,e]),wpe(function(){return oN(s)&&i({inst:s}),t(function(){oN(s)&&i({inst:s})})},[t]),xpe(n),n}function oN(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!gpe(t,n)}catch{return!0}}function Epe(t,e){return e()}var Npe=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?Epe:vpe;cB.useSyncExternalStore=Yp.useSyncExternalStore!==void 0?Yp.useSyncExternalStore:Npe;oB.exports=cB;var Cpe=oB.exports;const Ape=Fy(Cpe),Tpe={},{use:ZP}=Ht,{useSyncExternalStore:Spe}=Ape,kpe=(t,e)=>{const n=v.useRef();v.useEffect(()=>{n.current=HK(t,e)}),v.useDebugValue(n.current)},_pe=new WeakMap;function _v(t,e){const r=v.useRef(),s=v.useRef();let i=!0;const a=Spe(v.useCallback(u=>{const d=Qn(t,u);return u(),d},[t,void 0]),()=>{const u=Ld(t,ZP);try{if(!i&&r.current&&s.current&&!kD(r.current,u,s.current,new WeakMap))return r.current}catch{}return u},()=>Ld(t,ZP));i=!1;const o=new WeakMap;v.useEffect(()=>{r.current=a,s.current=o}),(Tpe?"production":void 0)!=="production"&&kpe(a,o);const l=v.useMemo(()=>new WeakMap,[]);return SD(a,o,l,_pe)}function Ipe(){const{activeCaipNetwork:t}=_v(U.state);return{caipNetwork:t,chainId:t==null?void 0:t.id,caipNetworkId:t==null?void 0:t.caipNetworkId}}function Ppe(t){var u;const e=_v(U.state),{activeConnectorIds:n}=_v(pe.state),r=e.activeChain;if(!r)return{allAccounts:[],address:void 0,caipAddress:void 0,status:void 0,isConnected:!1,embeddedWalletInfo:void 0};const s=(u=e.chains.get(r))==null?void 0:u.accountState,i=pe.getAuthConnector(r),a=n[r];return{allAccounts:me.getConnections(r).flatMap(d=>d.accounts.map(({address:h})=>Ae.createAccount(r,h,"eoa"))),caipAddress:s==null?void 0:s.caipAddress,address:Ae.getPlainAddress(s==null?void 0:s.caipAddress),isConnected:!!(s!=null&&s.caipAddress),status:s==null?void 0:s.status,embeddedWalletInfo:i&&a===Y.CONNECTOR_ID.AUTH?{user:s!=null&&s.user?{...s.user,username:le.getConnectedSocialUsername()}:void 0,authProvider:(s==null?void 0:s.socialProvider)||"email",accountType:s==null?void 0:s.preferredAccountType,isSmartAccountDeployed:!!(s!=null&&s.smartAccountDeployed)}:void 0}}const vt={METMASK_CONNECTOR_NAME:"MetaMask",TRUST_CONNECTOR_NAME:"Trust Wallet",SOLFLARE_CONNECTOR_NAME:"Solflare",PHANTOM_CONNECTOR_NAME:"Phantom",COIN98_CONNECTOR_NAME:"Coin98",MAGIC_EDEN_CONNECTOR_NAME:"Magic Eden",BACKPACK_CONNECTOR_NAME:"Backpack",BITGET_CONNECTOR_NAME:"Bitget Wallet",FRONTIER_CONNECTOR_NAME:"Frontier",XVERSE_CONNECTOR_NAME:"Xverse Wallet",LEATHER_CONNECTOR_NAME:"Leather",EIP155:"eip155",ADD_CHAIN_METHOD:"wallet_addEthereumChain",EIP6963_ANNOUNCE_EVENT:"eip6963:announceProvider",EIP6963_REQUEST_EVENT:"eip6963:requestProvider",CONNECTOR_RDNS_MAP:{coinbaseWallet:"com.coinbase.wallet",coinbaseWalletSDK:"com.coinbase.wallet"},CONNECTOR_TYPE_EXTERNAL:"EXTERNAL",CONNECTOR_TYPE_WALLET_CONNECT:"WALLET_CONNECT",CONNECTOR_TYPE_INJECTED:"INJECTED",CONNECTOR_TYPE_ANNOUNCED:"ANNOUNCED",CONNECTOR_TYPE_AUTH:"AUTH",CONNECTOR_TYPE_MULTI_CHAIN:"MULTI_CHAIN",CONNECTOR_TYPE_W3M_AUTH:"ID_AUTH"},Ya={ConnectorExplorerIds:{[Y.CONNECTOR_ID.COINBASE]:"fd20dc426fb37566d803205b19bbc1d4096b248ac04548e3cfb6b3a38bd033aa",[Y.CONNECTOR_ID.COINBASE_SDK]:"fd20dc426fb37566d803205b19bbc1d4096b248ac04548e3cfb6b3a38bd033aa",[Y.CONNECTOR_ID.SAFE]:"225affb176778569276e484e1b92637ad061b01e13a048b35a9d280c3b58970f",[Y.CONNECTOR_ID.LEDGER]:"19177a98252e07ddfc9af2083ba8e07ef627cb6103467ffebb3f8f4205fd7927",[Y.CONNECTOR_ID.OKX]:"971e689d0a5be527bac79629b4ee9b925e82208e5168b733496a09c0faed0709",[vt.METMASK_CONNECTOR_NAME]:"c57ca95b47569778a828d19178114f4db188b89b763c899ba0be274e97267d96",[vt.TRUST_CONNECTOR_NAME]:"4622a2b2d6af1c9844944291e5e7351a6aa24cd7b23099efac1b2fd875da31a0",[vt.SOLFLARE_CONNECTOR_NAME]:"1ca0bdd4747578705b1939af023d120677c64fe6ca76add81fda36e350605e79",[vt.PHANTOM_CONNECTOR_NAME]:"a797aa35c0fadbfc1a53e7f675162ed5226968b44a19ee3d24385c64d1d3c393",[vt.COIN98_CONNECTOR_NAME]:"2a3c89040ac3b723a1972a33a125b1db11e258a6975d3a61252cd64e6ea5ea01",[vt.MAGIC_EDEN_CONNECTOR_NAME]:"8b830a2b724a9c3fbab63af6f55ed29c9dfa8a55e732dc88c80a196a2ba136c6",[vt.BACKPACK_CONNECTOR_NAME]:"2bd8c14e035c2d48f184aaa168559e86b0e3433228d3c4075900a221785019b0",[vt.BITGET_CONNECTOR_NAME]:"38f5d18bd8522c244bdd70cb4a68e0e718865155811c043f052fb9f1c51de662",[vt.FRONTIER_CONNECTOR_NAME]:"85db431492aa2e8672e93f4ea7acf10c88b97b867b0d373107af63dc4880f041",[vt.XVERSE_CONNECTOR_NAME]:"2a87d74ae02e10bdd1f51f7ce6c4e1cc53cd5f2c0b6b5ad0d7b3007d2b13de7b",[vt.LEATHER_CONNECTOR_NAME]:"483afe1df1df63daf313109971ff3ef8356ddf1cc4e45877d205eee0b7893a13"},NetworkImageIds:{1:"ba0ba0cd-17c6-4806-ad93-f9d174f17900",42161:"3bff954d-5cb0-47a0-9a23-d20192e74600",43114:"30c46e53-e989-45fb-4549-be3bd4eb3b00",56:"93564157-2e8e-4ce7-81df-b264dbee9b00",250:"06b26297-fe0c-4733-5d6b-ffa5498aac00",10:"ab9c186a-c52f-464b-2906-ca59d760a400",137:"41d04d42-da3b-4453-8506-668cc0727900",5e3:"e86fae9b-b770-4eea-e520-150e12c81100",295:"6a97d510-cac8-4e58-c7ce-e8681b044c00",11155111:"e909ea0a-f92a-4512-c8fc-748044ea6800",84532:"a18a7ecd-e307-4360-4746-283182228e00",1301:"4eeea7ef-0014-4649-5d1d-07271a80f600",130:"2257980a-3463-48c6-cbac-a42d2a956e00",10143:"0a728e83-bacb-46db-7844-948f05434900",100:"02b53f6a-e3d4-479e-1cb4-21178987d100",9001:"f926ff41-260d-4028-635e-91913fc28e00",324:"b310f07f-4ef7-49f3-7073-2a0a39685800",314:"5a73b3dd-af74-424e-cae0-0de859ee9400",4689:"34e68754-e536-40da-c153-6ef2e7188a00",1088:"3897a66d-40b9-4833-162f-a2c90531c900",1284:"161038da-44ae-4ec7-1208-0ea569454b00",1285:"f1d73bb6-5450-4e18-38f7-fb6484264a00",7777777:"845c60df-d429-4991-e687-91ae45791600",42220:"ab781bbc-ccc6-418d-d32d-789b15da1f00",8453:"7289c336-3981-4081-c5f4-efc26ac64a00",1313161554:"3ff73439-a619-4894-9262-4470c773a100",2020:"b8101fc0-9c19-4b6f-ec65-f6dfff106e00",2021:"b8101fc0-9c19-4b6f-ec65-f6dfff106e00",80094:"e329c2c9-59b0-4a02-83e4-212ff3779900",2741:"fc2427d1-5af9-4a9c-8da5-6f94627cd900","5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp":"a1b58899-f671-4276-6a5e-56ca5bd59700","4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z":"a1b58899-f671-4276-6a5e-56ca5bd59700",EtWTRABZaYq6iMfeYKouRu166VU2xqa1:"a1b58899-f671-4276-6a5e-56ca5bd59700","000000000019d6689c085ae165831e93":"0b4838db-0161-4ffe-022d-532bf03dba00","000000000933ea01ad0ee984209779ba":"39354064-d79b-420b-065d-f980c4b78200"},ConnectorImageIds:{[Y.CONNECTOR_ID.COINBASE]:"0c2840c3-5b04-4c44-9661-fbd4b49e1800",[Y.CONNECTOR_ID.COINBASE_SDK]:"0c2840c3-5b04-4c44-9661-fbd4b49e1800",[Y.CONNECTOR_ID.SAFE]:"461db637-8616-43ce-035a-d89b8a1d5800",[Y.CONNECTOR_ID.LEDGER]:"54a1aa77-d202-4f8d-0fb2-5d2bb6db0300",[Y.CONNECTOR_ID.WALLET_CONNECT]:"ef1a1fcf-7fe8-4d69-bd6d-fda1345b4400",[Y.CONNECTOR_ID.INJECTED]:"07ba87ed-43aa-4adf-4540-9e6a2b9cae00"},ConnectorNamesMap:{[Y.CONNECTOR_ID.INJECTED]:"Browser Wallet",[Y.CONNECTOR_ID.WALLET_CONNECT]:"WalletConnect",[Y.CONNECTOR_ID.COINBASE]:"Coinbase",[Y.CONNECTOR_ID.COINBASE_SDK]:"Coinbase",[Y.CONNECTOR_ID.LEDGER]:"Ledger",[Y.CONNECTOR_ID.SAFE]:"Safe"},ConnectorTypesMap:{[Y.CONNECTOR_ID.INJECTED]:"INJECTED",[Y.CONNECTOR_ID.WALLET_CONNECT]:"WALLET_CONNECT",[Y.CONNECTOR_ID.EIP6963]:"ANNOUNCED",[Y.CONNECTOR_ID.AUTH]:"AUTH",[vt.CONNECTOR_TYPE_AUTH]:"AUTH"}},qn={getCaipTokens(t){if(!t)return;const e={};return Object.entries(t).forEach(([n,r])=>{e[`${vt.EIP155}:${n}`]=r}),e},isLowerCaseMatch(t,e){return(t==null?void 0:t.toLowerCase())===(e==null?void 0:e.toLowerCase())},getActiveNamespaceConnectedToAuth(){const t=U.state.activeChain;return Y.AUTH_CONNECTOR_SUPPORTED_CHAINS.find(e=>pe.getConnectorId(e)===Y.CONNECTOR_ID.AUTH&&e===t)},withRetry({conditionFn:t,intervalMs:e,maxRetries:n}){let r=0;return new Promise(s=>{async function i(){return r+=1,await t()?s(!0):r>=n?s(!1):(setTimeout(i,e),null)}i()})}},Rpe=new AbortController,Hr={EmbeddedWalletAbortController:Rpe,UniversalProviderErrors:{UNAUTHORIZED_DOMAIN_NOT_ALLOWED:{message:"Unauthorized: origin not allowed",alertErrorKey:"INVALID_APP_CONFIGURATION"},JWT_VALIDATION_ERROR:{message:"JWT validation error: JWT Token is not yet valid",alertErrorKey:"JWT_TOKEN_NOT_VALID"},INVALID_KEY:{message:"Unauthorized: invalid key",alertErrorKey:"INVALID_PROJECT_ID"}},ALERT_ERRORS:{SWITCH_NETWORK_NOT_FOUND:{shortMessage:"Network Not Found",longMessage:"Network not found - please make sure it is included in 'networks' array in createAppKit function"},INVALID_APP_CONFIGURATION:{shortMessage:"Invalid App Configuration",longMessage:()=>`Origin ${jpe()?window.origin:"unknown"} not found on Allowlist - update configuration on cloud.reown.com`},IFRAME_LOAD_FAILED:{shortMessage:"Network Error - Could not load embedded wallet",longMessage:()=>"There was an issue loading the embedded wallet. Please try again later."},IFRAME_REQUEST_TIMEOUT:{shortMessage:"Embedded Wallet Request Timed Out",longMessage:()=>"There was an issue doing the request to the embedded wallet. Please try again later."},UNVERIFIED_DOMAIN:{shortMessage:"Invalid App Configuration",longMessage:()=>"There was an issue loading the embedded wallet. Please verify that your domain is allowed at cloud.reown.com"},JWT_TOKEN_NOT_VALID:{shortMessage:"Session Expired",longMessage:"Invalid session found on UniversalProvider - please check your time settings and connect again"},INVALID_PROJECT_ID:{shortMessage:"Invalid App Configuration",longMessage:"Invalid Project ID - update configuration"},PROJECT_ID_NOT_CONFIGURED:{shortMessage:"Project ID Not Configured",longMessage:"Project ID Not Configured - update configuration on cloud.reown.com"},SERVER_ERROR_APP_CONFIGURATION:{shortMessage:"Server Error",longMessage:t=>`Failed to get App Configuration ${t||""}`},RATE_LIMITED_APP_CONFIGURATION:{shortMessage:"Rate Limited",longMessage:"Rate limited when trying to get the App Configuration"}}};function jpe(){return typeof window<"u"}const Ope={createLogger(t,e="error"){const n=dm({level:e}),{logger:r}=Z6({opts:n});return r.error=(...s)=>{for(const i of s)if(i instanceof Error){t(i,...s);return}t(void 0,...s)},r}},Dpe="rpc.walletconnect.org";function XP(t,e){const n=new URL("https://rpc.walletconnect.org/v1/");return n.searchParams.set("chainId",t),n.searchParams.set("projectId",e),n.toString()}const cN=["near:mainnet","solana:5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp","eip155:1101","eip155:56","eip155:42161","eip155:7777777","eip155:59144","eip155:324","solana:EtWTRABZaYq6iMfeYKouRu166VU2xqa1","eip155:5000","solana:4sgjmw1sunhzsxgspuhpqldx6wiyjntz","eip155:80084","eip155:5003","eip155:100","eip155:8453","eip155:42220","eip155:1313161555","eip155:17000","eip155:1","eip155:300","eip155:1313161554","eip155:1329","eip155:84532","eip155:421614","eip155:11155111","eip155:8217","eip155:43114","solana:4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z","eip155:999999999","eip155:11155420","eip155:80002","eip155:97","eip155:43113","eip155:137","eip155:10","eip155:1301","bip122:000000000019d6689c085ae165831e93","bip122:000000000933ea01ad0ee984209779ba"],Yh={extendRpcUrlWithProjectId(t,e){let n=!1;try{n=new URL(t).host===Dpe}catch{n=!1}if(n){const r=new URL(t);return r.searchParams.has("projectId")||r.searchParams.set("projectId",e),r.toString()}return t},isCaipNetwork(t){return"chainNamespace"in t&&"caipNetworkId"in t},getChainNamespace(t){return this.isCaipNetwork(t)?t.chainNamespace:Y.CHAIN.EVM},getCaipNetworkId(t){return this.isCaipNetwork(t)?t.caipNetworkId:`${Y.CHAIN.EVM}:${t.id}`},getDefaultRpcUrl(t,e,n){var s,i,a;const r=(a=(i=(s=t.rpcUrls)==null?void 0:s.default)==null?void 0:i.http)==null?void 0:a[0];return cN.includes(e)?XP(e,n):r||""},extendCaipNetwork(t,{customNetworkImageUrls:e,projectId:n,customRpcUrls:r}){var f,p,g,m,y;const s=this.getChainNamespace(t),i=this.getCaipNetworkId(t),a=(f=t.rpcUrls.default.http)==null?void 0:f[0],o=this.getDefaultRpcUrl(t,i,n),l=((m=(g=(p=t==null?void 0:t.rpcUrls)==null?void 0:p.chainDefault)==null?void 0:g.http)==null?void 0:m[0])||a,u=((y=r==null?void 0:r[i])==null?void 0:y.map(b=>b.url))||[],d=[...u,o],h=[...u];return l&&!h.includes(l)&&h.push(l),{...t,chainNamespace:s,caipNetworkId:i,assets:{imageId:Ya.NetworkImageIds[t.id],imageUrl:e==null?void 0:e[t.id]},rpcUrls:{...t.rpcUrls,default:{http:d},chainDefault:{http:h}}}},extendCaipNetworks(t,{customNetworkImageUrls:e,projectId:n,customRpcUrls:r}){return t.map(s=>Yh.extendCaipNetwork(s,{customNetworkImageUrls:e,customRpcUrls:r,projectId:n}))},getViemTransport(t,e,n){var s,i,a;const r=[];return n==null||n.forEach(o=>{r.push(nb(o.url,o.config))}),cN.includes(t.caipNetworkId)&&r.push(nb(XP(t.caipNetworkId,e),{fetchOptions:{headers:{"Content-Type":"text/plain"}}})),(a=(i=(s=t==null?void 0:t.rpcUrls)==null?void 0:s.default)==null?void 0:i.http)==null||a.forEach(o=>{r.push(nb(o))}),r3(r)},extendWagmiTransports(t,e,n){if(cN.includes(t.caipNetworkId)){const r=this.getDefaultRpcUrl(t,t.caipNetworkId,e);return r3([n,nb(r)])}return n},getUnsupportedNetwork(t){return{id:t.split(":")[1],caipNetworkId:t,name:Y.UNSUPPORTED_NETWORK_NAME,chainNamespace:t.split(":")[0],nativeCurrency:{name:"",decimals:0,symbol:""},rpcUrls:{default:{http:[]}}}},getCaipNetworkFromStorage(t){var l;const e=le.getActiveCaipNetworkId(),n=U.getAllRequestedCaipNetworks(),r=Array.from(((l=U.state.chains)==null?void 0:l.keys())||[]),s=e==null?void 0:e.split(":")[0],i=s?r.includes(s):!1,a=n==null?void 0:n.find(u=>u.caipNetworkId===e);return i&&!a&&e?this.getUnsupportedNetwork(e):a||t||(n==null?void 0:n[0])}},Iv={eip155:void 0,solana:void 0,polkadot:void 0,bip122:void 0,cosmos:void 0},fs=tn({providers:{...Iv},providerIds:{...Iv}}),pt={state:fs,subscribeKey(t,e){return Dr(fs,t,e)},subscribe(t){return Qn(fs,()=>{t(fs)})},subscribeProviders(t){return Qn(fs.providers,()=>t(fs.providers))},setProvider(t,e){e&&(fs.providers[t]=Bd(e))},getProvider(t){return fs.providers[t]},setProviderId(t,e){e&&(fs.providerIds[t]=e)},getProviderId(t){if(t)return fs.providerIds[t]},reset(){fs.providers={...Iv},fs.providerIds={...Iv}},resetChain(t){fs.providers[t]=void 0,fs.providerIds[t]=void 0}},eR={transactionHash:/^0x(?:[A-Fa-f0-9]{64})$/u,signedMessage:/^0x(?:[a-fA-F0-9]{62,})$/u},tr={set(t,e){Ys.isClient&&localStorage.setItem(`${Pe.STORAGE_KEY}${t}`,e)},get(t){return Ys.isClient?localStorage.getItem(`${Pe.STORAGE_KEY}${t}`):null},delete(t,e){Ys.isClient&&(e?localStorage.removeItem(t):localStorage.removeItem(`${Pe.STORAGE_KEY}${t}`))}},Cb=30*1e3,Ys={checkIfAllowedToTriggerEmail(){const t=tr.get(Pe.LAST_EMAIL_LOGIN_TIME);if(t){const e=Date.now()-Number(t);if(e<Cb){const n=Math.ceil((Cb-e)/1e3);throw new Error(`Please try again after ${n} seconds`)}}},getTimeToNextEmailLogin(){const t=tr.get(Pe.LAST_EMAIL_LOGIN_TIME);if(t){const e=Date.now()-Number(t);if(e<Cb)return Math.ceil((Cb-e)/1e3)}return 0},checkIfRequestExists(t){return Mn.NOT_SAFE_RPC_METHODS.includes(t.method)||Mn.SAFE_RPC_METHODS.includes(t.method)},getResponseType(t){return typeof t=="string"&&((t==null?void 0:t.match(eR.transactionHash))||(t==null?void 0:t.match(eR.signedMessage)))?Pe.RPC_RESPONSE_TYPE_TX:Pe.RPC_RESPONSE_TYPE_OBJECT},checkIfRequestIsSafe(t){return Mn.SAFE_RPC_METHODS.includes(t.method)},isClient:typeof window<"u"};var Tt;(function(t){t.assertEqual=s=>s;function e(s){}t.assertIs=e;function n(s){throw new Error}t.assertNever=n,t.arrayToEnum=s=>{const i={};for(const a of s)i[a]=a;return i},t.getValidEnumValues=s=>{const i=t.objectKeys(s).filter(o=>typeof s[s[o]]!="number"),a={};for(const o of i)a[o]=s[o];return t.objectValues(a)},t.objectValues=s=>t.objectKeys(s).map(function(i){return s[i]}),t.objectKeys=typeof Object.keys=="function"?s=>Object.keys(s):s=>{const i=[];for(const a in s)Object.prototype.hasOwnProperty.call(s,a)&&i.push(a);return i},t.find=(s,i)=>{for(const a of s)if(i(a))return a},t.isInteger=typeof Number.isInteger=="function"?s=>Number.isInteger(s):s=>typeof s=="number"&&isFinite(s)&&Math.floor(s)===s;function r(s,i=" | "){return s.map(a=>typeof a=="string"?`'${a}'`:a).join(i)}t.joinValues=r,t.jsonStringifyReplacer=(s,i)=>typeof i=="bigint"?i.toString():i})(Tt||(Tt={}));var eT;(function(t){t.mergeShapes=(e,n)=>({...e,...n})})(eT||(eT={}));const Ee=Tt.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),Xc=t=>{switch(typeof t){case"undefined":return Ee.undefined;case"string":return Ee.string;case"number":return isNaN(t)?Ee.nan:Ee.number;case"boolean":return Ee.boolean;case"function":return Ee.function;case"bigint":return Ee.bigint;case"symbol":return Ee.symbol;case"object":return Array.isArray(t)?Ee.array:t===null?Ee.null:t.then&&typeof t.then=="function"&&t.catch&&typeof t.catch=="function"?Ee.promise:typeof Map<"u"&&t instanceof Map?Ee.map:typeof Set<"u"&&t instanceof Set?Ee.set:typeof Date<"u"&&t instanceof Date?Ee.date:Ee.object;default:return Ee.unknown}},de=Tt.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),Upe=t=>JSON.stringify(t,null,2).replace(/"([^"]+)":/g,"$1:");class da extends Error{constructor(e){super(),this.issues=[],this.addIssue=r=>{this.issues=[...this.issues,r]},this.addIssues=(r=[])=>{this.issues=[...this.issues,...r]};const n=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,n):this.__proto__=n,this.name="ZodError",this.issues=e}get errors(){return this.issues}format(e){const n=e||function(i){return i.message},r={_errors:[]},s=i=>{for(const a of i.issues)if(a.code==="invalid_union")a.unionErrors.map(s);else if(a.code==="invalid_return_type")s(a.returnTypeError);else if(a.code==="invalid_arguments")s(a.argumentsError);else if(a.path.length===0)r._errors.push(n(a));else{let o=r,l=0;for(;l<a.path.length;){const u=a.path[l];l===a.path.length-1?(o[u]=o[u]||{_errors:[]},o[u]._errors.push(n(a))):o[u]=o[u]||{_errors:[]},o=o[u],l++}}};return s(this),r}toString(){return this.message}get message(){return JSON.stringify(this.issues,Tt.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=n=>n.message){const n={},r=[];for(const s of this.issues)s.path.length>0?(n[s.path[0]]=n[s.path[0]]||[],n[s.path[0]].push(e(s))):r.push(e(s));return{formErrors:r,fieldErrors:n}}get formErrors(){return this.flatten()}}da.create=t=>new da(t);const uy=(t,e)=>{let n;switch(t.code){case de.invalid_type:t.received===Ee.undefined?n="Required":n=`Expected ${t.expected}, received ${t.received}`;break;case de.invalid_literal:n=`Invalid literal value, expected ${JSON.stringify(t.expected,Tt.jsonStringifyReplacer)}`;break;case de.unrecognized_keys:n=`Unrecognized key(s) in object: ${Tt.joinValues(t.keys,", ")}`;break;case de.invalid_union:n="Invalid input";break;case de.invalid_union_discriminator:n=`Invalid discriminator value. Expected ${Tt.joinValues(t.options)}`;break;case de.invalid_enum_value:n=`Invalid enum value. Expected ${Tt.joinValues(t.options)}, received '${t.received}'`;break;case de.invalid_arguments:n="Invalid function arguments";break;case de.invalid_return_type:n="Invalid function return type";break;case de.invalid_date:n="Invalid date";break;case de.invalid_string:typeof t.validation=="object"?"includes"in t.validation?(n=`Invalid input: must include "${t.validation.includes}"`,typeof t.validation.position=="number"&&(n=`${n} at one or more positions greater than or equal to ${t.validation.position}`)):"startsWith"in t.validation?n=`Invalid input: must start with "${t.validation.startsWith}"`:"endsWith"in t.validation?n=`Invalid input: must end with "${t.validation.endsWith}"`:Tt.assertNever(t.validation):t.validation!=="regex"?n=`Invalid ${t.validation}`:n="Invalid";break;case de.too_small:t.type==="array"?n=`Array must contain ${t.exact?"exactly":t.inclusive?"at least":"more than"} ${t.minimum} element(s)`:t.type==="string"?n=`String must contain ${t.exact?"exactly":t.inclusive?"at least":"over"} ${t.minimum} character(s)`:t.type==="number"?n=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="date"?n=`Date must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(t.minimum))}`:n="Invalid input";break;case de.too_big:t.type==="array"?n=`Array must contain ${t.exact?"exactly":t.inclusive?"at most":"less than"} ${t.maximum} element(s)`:t.type==="string"?n=`String must contain ${t.exact?"exactly":t.inclusive?"at most":"under"} ${t.maximum} character(s)`:t.type==="number"?n=`Number must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="bigint"?n=`BigInt must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="date"?n=`Date must be ${t.exact?"exactly":t.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(t.maximum))}`:n="Invalid input";break;case de.custom:n="Invalid input";break;case de.invalid_intersection_types:n="Intersection results could not be merged";break;case de.not_multiple_of:n=`Number must be a multiple of ${t.multipleOf}`;break;case de.not_finite:n="Number must be finite";break;default:n=e.defaultError,Tt.assertNever(t)}return{message:n}};let lB=uy;function Mpe(t){lB=t}function Pv(){return lB}const Rv=t=>{const{data:e,path:n,errorMaps:r,issueData:s}=t,i=[...n,...s.path||[]],a={...s,path:i};let o="";const l=r.filter(u=>!!u).slice().reverse();for(const u of l)o=u(a,{data:e,defaultError:o}).message;return{...s,path:i,message:s.message||o}},Lpe=[];function Te(t,e){const n=Rv({issueData:e,data:t.data,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,Pv(),uy].filter(r=>!!r)});t.common.issues.push(n)}class Or{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,n){const r=[];for(const s of n){if(s.status==="aborted")return qe;s.status==="dirty"&&e.dirty(),r.push(s.value)}return{status:e.value,value:r}}static async mergeObjectAsync(e,n){const r=[];for(const s of n)r.push({key:await s.key,value:await s.value});return Or.mergeObjectSync(e,r)}static mergeObjectSync(e,n){const r={};for(const s of n){const{key:i,value:a}=s;if(i.status==="aborted"||a.status==="aborted")return qe;i.status==="dirty"&&e.dirty(),a.status==="dirty"&&e.dirty(),i.value!=="__proto__"&&(typeof a.value<"u"||s.alwaysSet)&&(r[i.value]=a.value)}return{status:e.value,value:r}}}const qe=Object.freeze({status:"aborted"}),uB=t=>({status:"dirty",value:t}),ss=t=>({status:"valid",value:t}),tT=t=>t.status==="aborted",nT=t=>t.status==="dirty",dy=t=>t.status==="valid",jv=t=>typeof Promise<"u"&&t instanceof Promise;var Me;(function(t){t.errToObj=e=>typeof e=="string"?{message:e}:e||{},t.toString=e=>typeof e=="string"?e:e==null?void 0:e.message})(Me||(Me={}));class uo{constructor(e,n,r,s){this._cachedPath=[],this.parent=e,this.data=n,this._path=r,this._key=s}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const tR=(t,e)=>{if(dy(e))return{success:!0,data:e.value};if(!t.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const n=new da(t.common.issues);return this._error=n,this._error}}};function Qe(t){if(!t)return{};const{errorMap:e,invalid_type_error:n,required_error:r,description:s}=t;if(e&&(n||r))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:s}:{errorMap:(a,o)=>a.code!=="invalid_type"?{message:o.defaultError}:typeof o.data>"u"?{message:r??o.defaultError}:{message:n??o.defaultError},description:s}}class st{constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this)}get description(){return this._def.description}_getType(e){return Xc(e.data)}_getOrReturnCtx(e,n){return n||{common:e.parent.common,data:e.data,parsedType:Xc(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new Or,ctx:{common:e.parent.common,data:e.data,parsedType:Xc(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const n=this._parse(e);if(jv(n))throw new Error("Synchronous parse encountered promise.");return n}_parseAsync(e){const n=this._parse(e);return Promise.resolve(n)}parse(e,n){const r=this.safeParse(e,n);if(r.success)return r.data;throw r.error}safeParse(e,n){var r;const s={common:{issues:[],async:(r=n==null?void 0:n.async)!==null&&r!==void 0?r:!1,contextualErrorMap:n==null?void 0:n.errorMap},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Xc(e)},i=this._parseSync({data:e,path:s.path,parent:s});return tR(s,i)}async parseAsync(e,n){const r=await this.safeParseAsync(e,n);if(r.success)return r.data;throw r.error}async safeParseAsync(e,n){const r={common:{issues:[],contextualErrorMap:n==null?void 0:n.errorMap,async:!0},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Xc(e)},s=this._parse({data:e,path:r.path,parent:r}),i=await(jv(s)?s:Promise.resolve(s));return tR(r,i)}refine(e,n){const r=s=>typeof n=="string"||typeof n>"u"?{message:n}:typeof n=="function"?n(s):n;return this._refinement((s,i)=>{const a=e(s),o=()=>i.addIssue({code:de.custom,...r(s)});return typeof Promise<"u"&&a instanceof Promise?a.then(l=>l?!0:(o(),!1)):a?!0:(o(),!1)})}refinement(e,n){return this._refinement((r,s)=>e(r)?!0:(s.addIssue(typeof n=="function"?n(r,s):n),!1))}_refinement(e){return new ma({schema:this,typeName:ze.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}optional(){return nc.create(this,this._def)}nullable(){return Gd.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return ha.create(this,this._def)}promise(){return Jp.create(this,this._def)}or(e){return my.create([this,e],this._def)}and(e){return gy.create(this,e,this._def)}transform(e){return new ma({...Qe(this._def),schema:this,typeName:ze.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const n=typeof e=="function"?e:()=>e;return new vy({...Qe(this._def),innerType:this,defaultValue:n,typeName:ze.ZodDefault})}brand(){return new hB({typeName:ze.ZodBranded,type:this,...Qe(this._def)})}catch(e){const n=typeof e=="function"?e:()=>e;return new Mv({...Qe(this._def),innerType:this,catchValue:n,typeName:ze.ZodCatch})}describe(e){const n=this.constructor;return new n({...this._def,description:e})}pipe(e){return mw.create(this,e)}readonly(){return Bv.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const Bpe=/^c[^\s-]{8,}$/i,$pe=/^[a-z][a-z0-9]*$/,Fpe=/^[0-9A-HJKMNP-TV-Z]{26}$/,Hpe=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,Vpe=/^(?!\.)(?!.*\.\.)([A-Z0-9_+-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,zpe="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let lN;const Wpe=/^(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))$/,qpe=/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,Kpe=t=>t.precision?t.offset?new RegExp(`^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}\\.\\d{${t.precision}}(([+-]\\d{2}(:?\\d{2})?)|Z)$`):new RegExp(`^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}\\.\\d{${t.precision}}Z$`):t.precision===0?t.offset?new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(([+-]\\d{2}(:?\\d{2})?)|Z)$"):new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}Z$"):t.offset?new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(\\.\\d+)?(([+-]\\d{2}(:?\\d{2})?)|Z)$"):new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(\\.\\d+)?Z$");function Gpe(t,e){return!!((e==="v4"||!e)&&Wpe.test(t)||(e==="v6"||!e)&&qpe.test(t))}class ia extends st{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==Ee.string){const i=this._getOrReturnCtx(e);return Te(i,{code:de.invalid_type,expected:Ee.string,received:i.parsedType}),qe}const r=new Or;let s;for(const i of this._def.checks)if(i.kind==="min")e.data.length<i.value&&(s=this._getOrReturnCtx(e,s),Te(s,{code:de.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),r.dirty());else if(i.kind==="max")e.data.length>i.value&&(s=this._getOrReturnCtx(e,s),Te(s,{code:de.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),r.dirty());else if(i.kind==="length"){const a=e.data.length>i.value,o=e.data.length<i.value;(a||o)&&(s=this._getOrReturnCtx(e,s),a?Te(s,{code:de.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}):o&&Te(s,{code:de.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}),r.dirty())}else if(i.kind==="email")Vpe.test(e.data)||(s=this._getOrReturnCtx(e,s),Te(s,{validation:"email",code:de.invalid_string,message:i.message}),r.dirty());else if(i.kind==="emoji")lN||(lN=new RegExp(zpe,"u")),lN.test(e.data)||(s=this._getOrReturnCtx(e,s),Te(s,{validation:"emoji",code:de.invalid_string,message:i.message}),r.dirty());else if(i.kind==="uuid")Hpe.test(e.data)||(s=this._getOrReturnCtx(e,s),Te(s,{validation:"uuid",code:de.invalid_string,message:i.message}),r.dirty());else if(i.kind==="cuid")Bpe.test(e.data)||(s=this._getOrReturnCtx(e,s),Te(s,{validation:"cuid",code:de.invalid_string,message:i.message}),r.dirty());else if(i.kind==="cuid2")$pe.test(e.data)||(s=this._getOrReturnCtx(e,s),Te(s,{validation:"cuid2",code:de.invalid_string,message:i.message}),r.dirty());else if(i.kind==="ulid")Fpe.test(e.data)||(s=this._getOrReturnCtx(e,s),Te(s,{validation:"ulid",code:de.invalid_string,message:i.message}),r.dirty());else if(i.kind==="url")try{new URL(e.data)}catch{s=this._getOrReturnCtx(e,s),Te(s,{validation:"url",code:de.invalid_string,message:i.message}),r.dirty()}else i.kind==="regex"?(i.regex.lastIndex=0,i.regex.test(e.data)||(s=this._getOrReturnCtx(e,s),Te(s,{validation:"regex",code:de.invalid_string,message:i.message}),r.dirty())):i.kind==="trim"?e.data=e.data.trim():i.kind==="includes"?e.data.includes(i.value,i.position)||(s=this._getOrReturnCtx(e,s),Te(s,{code:de.invalid_string,validation:{includes:i.value,position:i.position},message:i.message}),r.dirty()):i.kind==="toLowerCase"?e.data=e.data.toLowerCase():i.kind==="toUpperCase"?e.data=e.data.toUpperCase():i.kind==="startsWith"?e.data.startsWith(i.value)||(s=this._getOrReturnCtx(e,s),Te(s,{code:de.invalid_string,validation:{startsWith:i.value},message:i.message}),r.dirty()):i.kind==="endsWith"?e.data.endsWith(i.value)||(s=this._getOrReturnCtx(e,s),Te(s,{code:de.invalid_string,validation:{endsWith:i.value},message:i.message}),r.dirty()):i.kind==="datetime"?Kpe(i).test(e.data)||(s=this._getOrReturnCtx(e,s),Te(s,{code:de.invalid_string,validation:"datetime",message:i.message}),r.dirty()):i.kind==="ip"?Gpe(e.data,i.version)||(s=this._getOrReturnCtx(e,s),Te(s,{validation:"ip",code:de.invalid_string,message:i.message}),r.dirty()):Tt.assertNever(i);return{status:r.value,value:e.data}}_regex(e,n,r){return this.refinement(s=>e.test(s),{validation:n,code:de.invalid_string,...Me.errToObj(r)})}_addCheck(e){return new ia({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...Me.errToObj(e)})}url(e){return this._addCheck({kind:"url",...Me.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...Me.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...Me.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...Me.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...Me.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...Me.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...Me.errToObj(e)})}datetime(e){var n;return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,offset:(n=e==null?void 0:e.offset)!==null&&n!==void 0?n:!1,...Me.errToObj(e==null?void 0:e.message)})}regex(e,n){return this._addCheck({kind:"regex",regex:e,...Me.errToObj(n)})}includes(e,n){return this._addCheck({kind:"includes",value:e,position:n==null?void 0:n.position,...Me.errToObj(n==null?void 0:n.message)})}startsWith(e,n){return this._addCheck({kind:"startsWith",value:e,...Me.errToObj(n)})}endsWith(e,n){return this._addCheck({kind:"endsWith",value:e,...Me.errToObj(n)})}min(e,n){return this._addCheck({kind:"min",value:e,...Me.errToObj(n)})}max(e,n){return this._addCheck({kind:"max",value:e,...Me.errToObj(n)})}length(e,n){return this._addCheck({kind:"length",value:e,...Me.errToObj(n)})}nonempty(e){return this.min(1,Me.errToObj(e))}trim(){return new ia({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new ia({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new ia({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get minLength(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxLength(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}}ia.create=t=>{var e;return new ia({checks:[],typeName:ze.ZodString,coerce:(e=t==null?void 0:t.coerce)!==null&&e!==void 0?e:!1,...Qe(t)})};function Ype(t,e){const n=(t.toString().split(".")[1]||"").length,r=(e.toString().split(".")[1]||"").length,s=n>r?n:r,i=parseInt(t.toFixed(s).replace(".","")),a=parseInt(e.toFixed(s).replace(".",""));return i%a/Math.pow(10,s)}class Kl extends st{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==Ee.number){const i=this._getOrReturnCtx(e);return Te(i,{code:de.invalid_type,expected:Ee.number,received:i.parsedType}),qe}let r;const s=new Or;for(const i of this._def.checks)i.kind==="int"?Tt.isInteger(e.data)||(r=this._getOrReturnCtx(e,r),Te(r,{code:de.invalid_type,expected:"integer",received:"float",message:i.message}),s.dirty()):i.kind==="min"?(i.inclusive?e.data<i.value:e.data<=i.value)&&(r=this._getOrReturnCtx(e,r),Te(r,{code:de.too_small,minimum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),s.dirty()):i.kind==="max"?(i.inclusive?e.data>i.value:e.data>=i.value)&&(r=this._getOrReturnCtx(e,r),Te(r,{code:de.too_big,maximum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),s.dirty()):i.kind==="multipleOf"?Ype(e.data,i.value)!==0&&(r=this._getOrReturnCtx(e,r),Te(r,{code:de.not_multiple_of,multipleOf:i.value,message:i.message}),s.dirty()):i.kind==="finite"?Number.isFinite(e.data)||(r=this._getOrReturnCtx(e,r),Te(r,{code:de.not_finite,message:i.message}),s.dirty()):Tt.assertNever(i);return{status:s.value,value:e.data}}gte(e,n){return this.setLimit("min",e,!0,Me.toString(n))}gt(e,n){return this.setLimit("min",e,!1,Me.toString(n))}lte(e,n){return this.setLimit("max",e,!0,Me.toString(n))}lt(e,n){return this.setLimit("max",e,!1,Me.toString(n))}setLimit(e,n,r,s){return new Kl({...this._def,checks:[...this._def.checks,{kind:e,value:n,inclusive:r,message:Me.toString(s)}]})}_addCheck(e){return new Kl({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:Me.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:Me.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:Me.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:Me.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:Me.toString(e)})}multipleOf(e,n){return this._addCheck({kind:"multipleOf",value:e,message:Me.toString(n)})}finite(e){return this._addCheck({kind:"finite",message:Me.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:Me.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:Me.toString(e)})}get minValue(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxValue(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&Tt.isInteger(e.value))}get isFinite(){let e=null,n=null;for(const r of this._def.checks){if(r.kind==="finite"||r.kind==="int"||r.kind==="multipleOf")return!0;r.kind==="min"?(n===null||r.value>n)&&(n=r.value):r.kind==="max"&&(e===null||r.value<e)&&(e=r.value)}return Number.isFinite(n)&&Number.isFinite(e)}}Kl.create=t=>new Kl({checks:[],typeName:ze.ZodNumber,coerce:(t==null?void 0:t.coerce)||!1,...Qe(t)});class Gl extends st{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce&&(e.data=BigInt(e.data)),this._getType(e)!==Ee.bigint){const i=this._getOrReturnCtx(e);return Te(i,{code:de.invalid_type,expected:Ee.bigint,received:i.parsedType}),qe}let r;const s=new Or;for(const i of this._def.checks)i.kind==="min"?(i.inclusive?e.data<i.value:e.data<=i.value)&&(r=this._getOrReturnCtx(e,r),Te(r,{code:de.too_small,type:"bigint",minimum:i.value,inclusive:i.inclusive,message:i.message}),s.dirty()):i.kind==="max"?(i.inclusive?e.data>i.value:e.data>=i.value)&&(r=this._getOrReturnCtx(e,r),Te(r,{code:de.too_big,type:"bigint",maximum:i.value,inclusive:i.inclusive,message:i.message}),s.dirty()):i.kind==="multipleOf"?e.data%i.value!==BigInt(0)&&(r=this._getOrReturnCtx(e,r),Te(r,{code:de.not_multiple_of,multipleOf:i.value,message:i.message}),s.dirty()):Tt.assertNever(i);return{status:s.value,value:e.data}}gte(e,n){return this.setLimit("min",e,!0,Me.toString(n))}gt(e,n){return this.setLimit("min",e,!1,Me.toString(n))}lte(e,n){return this.setLimit("max",e,!0,Me.toString(n))}lt(e,n){return this.setLimit("max",e,!1,Me.toString(n))}setLimit(e,n,r,s){return new Gl({...this._def,checks:[...this._def.checks,{kind:e,value:n,inclusive:r,message:Me.toString(s)}]})}_addCheck(e){return new Gl({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:Me.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:Me.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:Me.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:Me.toString(e)})}multipleOf(e,n){return this._addCheck({kind:"multipleOf",value:e,message:Me.toString(n)})}get minValue(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxValue(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}}Gl.create=t=>{var e;return new Gl({checks:[],typeName:ze.ZodBigInt,coerce:(e=t==null?void 0:t.coerce)!==null&&e!==void 0?e:!1,...Qe(t)})};class hy extends st{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==Ee.boolean){const r=this._getOrReturnCtx(e);return Te(r,{code:de.invalid_type,expected:Ee.boolean,received:r.parsedType}),qe}return ss(e.data)}}hy.create=t=>new hy({typeName:ze.ZodBoolean,coerce:(t==null?void 0:t.coerce)||!1,...Qe(t)});class qd extends st{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==Ee.date){const i=this._getOrReturnCtx(e);return Te(i,{code:de.invalid_type,expected:Ee.date,received:i.parsedType}),qe}if(isNaN(e.data.getTime())){const i=this._getOrReturnCtx(e);return Te(i,{code:de.invalid_date}),qe}const r=new Or;let s;for(const i of this._def.checks)i.kind==="min"?e.data.getTime()<i.value&&(s=this._getOrReturnCtx(e,s),Te(s,{code:de.too_small,message:i.message,inclusive:!0,exact:!1,minimum:i.value,type:"date"}),r.dirty()):i.kind==="max"?e.data.getTime()>i.value&&(s=this._getOrReturnCtx(e,s),Te(s,{code:de.too_big,message:i.message,inclusive:!0,exact:!1,maximum:i.value,type:"date"}),r.dirty()):Tt.assertNever(i);return{status:r.value,value:new Date(e.data.getTime())}}_addCheck(e){return new qd({...this._def,checks:[...this._def.checks,e]})}min(e,n){return this._addCheck({kind:"min",value:e.getTime(),message:Me.toString(n)})}max(e,n){return this._addCheck({kind:"max",value:e.getTime(),message:Me.toString(n)})}get minDate(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e!=null?new Date(e):null}}qd.create=t=>new qd({checks:[],coerce:(t==null?void 0:t.coerce)||!1,typeName:ze.ZodDate,...Qe(t)});class Ov extends st{_parse(e){if(this._getType(e)!==Ee.symbol){const r=this._getOrReturnCtx(e);return Te(r,{code:de.invalid_type,expected:Ee.symbol,received:r.parsedType}),qe}return ss(e.data)}}Ov.create=t=>new Ov({typeName:ze.ZodSymbol,...Qe(t)});class fy extends st{_parse(e){if(this._getType(e)!==Ee.undefined){const r=this._getOrReturnCtx(e);return Te(r,{code:de.invalid_type,expected:Ee.undefined,received:r.parsedType}),qe}return ss(e.data)}}fy.create=t=>new fy({typeName:ze.ZodUndefined,...Qe(t)});class py extends st{_parse(e){if(this._getType(e)!==Ee.null){const r=this._getOrReturnCtx(e);return Te(r,{code:de.invalid_type,expected:Ee.null,received:r.parsedType}),qe}return ss(e.data)}}py.create=t=>new py({typeName:ze.ZodNull,...Qe(t)});class Qp extends st{constructor(){super(...arguments),this._any=!0}_parse(e){return ss(e.data)}}Qp.create=t=>new Qp({typeName:ze.ZodAny,...Qe(t)});class Nd extends st{constructor(){super(...arguments),this._unknown=!0}_parse(e){return ss(e.data)}}Nd.create=t=>new Nd({typeName:ze.ZodUnknown,...Qe(t)});class fc extends st{_parse(e){const n=this._getOrReturnCtx(e);return Te(n,{code:de.invalid_type,expected:Ee.never,received:n.parsedType}),qe}}fc.create=t=>new fc({typeName:ze.ZodNever,...Qe(t)});class Dv extends st{_parse(e){if(this._getType(e)!==Ee.undefined){const r=this._getOrReturnCtx(e);return Te(r,{code:de.invalid_type,expected:Ee.void,received:r.parsedType}),qe}return ss(e.data)}}Dv.create=t=>new Dv({typeName:ze.ZodVoid,...Qe(t)});class ha extends st{_parse(e){const{ctx:n,status:r}=this._processInputParams(e),s=this._def;if(n.parsedType!==Ee.array)return Te(n,{code:de.invalid_type,expected:Ee.array,received:n.parsedType}),qe;if(s.exactLength!==null){const a=n.data.length>s.exactLength.value,o=n.data.length<s.exactLength.value;(a||o)&&(Te(n,{code:a?de.too_big:de.too_small,minimum:o?s.exactLength.value:void 0,maximum:a?s.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:s.exactLength.message}),r.dirty())}if(s.minLength!==null&&n.data.length<s.minLength.value&&(Te(n,{code:de.too_small,minimum:s.minLength.value,type:"array",inclusive:!0,exact:!1,message:s.minLength.message}),r.dirty()),s.maxLength!==null&&n.data.length>s.maxLength.value&&(Te(n,{code:de.too_big,maximum:s.maxLength.value,type:"array",inclusive:!0,exact:!1,message:s.maxLength.message}),r.dirty()),n.common.async)return Promise.all([...n.data].map((a,o)=>s.type._parseAsync(new uo(n,a,n.path,o)))).then(a=>Or.mergeArray(r,a));const i=[...n.data].map((a,o)=>s.type._parseSync(new uo(n,a,n.path,o)));return Or.mergeArray(r,i)}get element(){return this._def.type}min(e,n){return new ha({...this._def,minLength:{value:e,message:Me.toString(n)}})}max(e,n){return new ha({...this._def,maxLength:{value:e,message:Me.toString(n)}})}length(e,n){return new ha({...this._def,exactLength:{value:e,message:Me.toString(n)}})}nonempty(e){return this.min(1,e)}}ha.create=(t,e)=>new ha({type:t,minLength:null,maxLength:null,exactLength:null,typeName:ze.ZodArray,...Qe(e)});function Qh(t){if(t instanceof an){const e={};for(const n in t.shape){const r=t.shape[n];e[n]=nc.create(Qh(r))}return new an({...t._def,shape:()=>e})}else return t instanceof ha?new ha({...t._def,type:Qh(t.element)}):t instanceof nc?nc.create(Qh(t.unwrap())):t instanceof Gd?Gd.create(Qh(t.unwrap())):t instanceof ho?ho.create(t.items.map(e=>Qh(e))):t}class an extends st{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const e=this._def.shape(),n=Tt.objectKeys(e);return this._cached={shape:e,keys:n}}_parse(e){if(this._getType(e)!==Ee.object){const u=this._getOrReturnCtx(e);return Te(u,{code:de.invalid_type,expected:Ee.object,received:u.parsedType}),qe}const{status:r,ctx:s}=this._processInputParams(e),{shape:i,keys:a}=this._getCached(),o=[];if(!(this._def.catchall instanceof fc&&this._def.unknownKeys==="strip"))for(const u in s.data)a.includes(u)||o.push(u);const l=[];for(const u of a){const d=i[u],h=s.data[u];l.push({key:{status:"valid",value:u},value:d._parse(new uo(s,h,s.path,u)),alwaysSet:u in s.data})}if(this._def.catchall instanceof fc){const u=this._def.unknownKeys;if(u==="passthrough")for(const d of o)l.push({key:{status:"valid",value:d},value:{status:"valid",value:s.data[d]}});else if(u==="strict")o.length>0&&(Te(s,{code:de.unrecognized_keys,keys:o}),r.dirty());else if(u!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const u=this._def.catchall;for(const d of o){const h=s.data[d];l.push({key:{status:"valid",value:d},value:u._parse(new uo(s,h,s.path,d)),alwaysSet:d in s.data})}}return s.common.async?Promise.resolve().then(async()=>{const u=[];for(const d of l){const h=await d.key;u.push({key:h,value:await d.value,alwaysSet:d.alwaysSet})}return u}).then(u=>Or.mergeObjectSync(r,u)):Or.mergeObjectSync(r,l)}get shape(){return this._def.shape()}strict(e){return Me.errToObj,new an({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(n,r)=>{var s,i,a,o;const l=(a=(i=(s=this._def).errorMap)===null||i===void 0?void 0:i.call(s,n,r).message)!==null&&a!==void 0?a:r.defaultError;return n.code==="unrecognized_keys"?{message:(o=Me.errToObj(e).message)!==null&&o!==void 0?o:l}:{message:l}}}:{}})}strip(){return new an({...this._def,unknownKeys:"strip"})}passthrough(){return new an({...this._def,unknownKeys:"passthrough"})}extend(e){return new an({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new an({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:ze.ZodObject})}setKey(e,n){return this.augment({[e]:n})}catchall(e){return new an({...this._def,catchall:e})}pick(e){const n={};return Tt.objectKeys(e).forEach(r=>{e[r]&&this.shape[r]&&(n[r]=this.shape[r])}),new an({...this._def,shape:()=>n})}omit(e){const n={};return Tt.objectKeys(this.shape).forEach(r=>{e[r]||(n[r]=this.shape[r])}),new an({...this._def,shape:()=>n})}deepPartial(){return Qh(this)}partial(e){const n={};return Tt.objectKeys(this.shape).forEach(r=>{const s=this.shape[r];e&&!e[r]?n[r]=s:n[r]=s.optional()}),new an({...this._def,shape:()=>n})}required(e){const n={};return Tt.objectKeys(this.shape).forEach(r=>{if(e&&!e[r])n[r]=this.shape[r];else{let i=this.shape[r];for(;i instanceof nc;)i=i._def.innerType;n[r]=i}}),new an({...this._def,shape:()=>n})}keyof(){return dB(Tt.objectKeys(this.shape))}}an.create=(t,e)=>new an({shape:()=>t,unknownKeys:"strip",catchall:fc.create(),typeName:ze.ZodObject,...Qe(e)});an.strictCreate=(t,e)=>new an({shape:()=>t,unknownKeys:"strict",catchall:fc.create(),typeName:ze.ZodObject,...Qe(e)});an.lazycreate=(t,e)=>new an({shape:t,unknownKeys:"strip",catchall:fc.create(),typeName:ze.ZodObject,...Qe(e)});class my extends st{_parse(e){const{ctx:n}=this._processInputParams(e),r=this._def.options;function s(i){for(const o of i)if(o.result.status==="valid")return o.result;for(const o of i)if(o.result.status==="dirty")return n.common.issues.push(...o.ctx.common.issues),o.result;const a=i.map(o=>new da(o.ctx.common.issues));return Te(n,{code:de.invalid_union,unionErrors:a}),qe}if(n.common.async)return Promise.all(r.map(async i=>{const a={...n,common:{...n.common,issues:[]},parent:null};return{result:await i._parseAsync({data:n.data,path:n.path,parent:a}),ctx:a}})).then(s);{let i;const a=[];for(const l of r){const u={...n,common:{...n.common,issues:[]},parent:null},d=l._parseSync({data:n.data,path:n.path,parent:u});if(d.status==="valid")return d;d.status==="dirty"&&!i&&(i={result:d,ctx:u}),u.common.issues.length&&a.push(u.common.issues)}if(i)return n.common.issues.push(...i.ctx.common.issues),i.result;const o=a.map(l=>new da(l));return Te(n,{code:de.invalid_union,unionErrors:o}),qe}}get options(){return this._def.options}}my.create=(t,e)=>new my({options:t,typeName:ze.ZodUnion,...Qe(e)});const hx=t=>t instanceof wy?hx(t.schema):t instanceof ma?hx(t.innerType()):t instanceof by?[t.value]:t instanceof Yl?t.options:t instanceof xy?Object.keys(t.enum):t instanceof vy?hx(t._def.innerType):t instanceof fy?[void 0]:t instanceof py?[null]:null;class nE extends st{_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==Ee.object)return Te(n,{code:de.invalid_type,expected:Ee.object,received:n.parsedType}),qe;const r=this.discriminator,s=n.data[r],i=this.optionsMap.get(s);return i?n.common.async?i._parseAsync({data:n.data,path:n.path,parent:n}):i._parseSync({data:n.data,path:n.path,parent:n}):(Te(n,{code:de.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[r]}),qe)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,n,r){const s=new Map;for(const i of n){const a=hx(i.shape[e]);if(!a)throw new Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(const o of a){if(s.has(o))throw new Error(`Discriminator property ${String(e)} has duplicate value ${String(o)}`);s.set(o,i)}}return new nE({typeName:ze.ZodDiscriminatedUnion,discriminator:e,options:n,optionsMap:s,...Qe(r)})}}function rT(t,e){const n=Xc(t),r=Xc(e);if(t===e)return{valid:!0,data:t};if(n===Ee.object&&r===Ee.object){const s=Tt.objectKeys(e),i=Tt.objectKeys(t).filter(o=>s.indexOf(o)!==-1),a={...t,...e};for(const o of i){const l=rT(t[o],e[o]);if(!l.valid)return{valid:!1};a[o]=l.data}return{valid:!0,data:a}}else if(n===Ee.array&&r===Ee.array){if(t.length!==e.length)return{valid:!1};const s=[];for(let i=0;i<t.length;i++){const a=t[i],o=e[i],l=rT(a,o);if(!l.valid)return{valid:!1};s.push(l.data)}return{valid:!0,data:s}}else return n===Ee.date&&r===Ee.date&&+t==+e?{valid:!0,data:t}:{valid:!1}}class gy extends st{_parse(e){const{status:n,ctx:r}=this._processInputParams(e),s=(i,a)=>{if(tT(i)||tT(a))return qe;const o=rT(i.value,a.value);return o.valid?((nT(i)||nT(a))&&n.dirty(),{status:n.value,value:o.data}):(Te(r,{code:de.invalid_intersection_types}),qe)};return r.common.async?Promise.all([this._def.left._parseAsync({data:r.data,path:r.path,parent:r}),this._def.right._parseAsync({data:r.data,path:r.path,parent:r})]).then(([i,a])=>s(i,a)):s(this._def.left._parseSync({data:r.data,path:r.path,parent:r}),this._def.right._parseSync({data:r.data,path:r.path,parent:r}))}}gy.create=(t,e,n)=>new gy({left:t,right:e,typeName:ze.ZodIntersection,...Qe(n)});class ho extends st{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==Ee.array)return Te(r,{code:de.invalid_type,expected:Ee.array,received:r.parsedType}),qe;if(r.data.length<this._def.items.length)return Te(r,{code:de.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),qe;!this._def.rest&&r.data.length>this._def.items.length&&(Te(r,{code:de.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),n.dirty());const i=[...r.data].map((a,o)=>{const l=this._def.items[o]||this._def.rest;return l?l._parse(new uo(r,a,r.path,o)):null}).filter(a=>!!a);return r.common.async?Promise.all(i).then(a=>Or.mergeArray(n,a)):Or.mergeArray(n,i)}get items(){return this._def.items}rest(e){return new ho({...this._def,rest:e})}}ho.create=(t,e)=>{if(!Array.isArray(t))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new ho({items:t,typeName:ze.ZodTuple,rest:null,...Qe(e)})};class yy extends st{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==Ee.object)return Te(r,{code:de.invalid_type,expected:Ee.object,received:r.parsedType}),qe;const s=[],i=this._def.keyType,a=this._def.valueType;for(const o in r.data)s.push({key:i._parse(new uo(r,o,r.path,o)),value:a._parse(new uo(r,r.data[o],r.path,o))});return r.common.async?Or.mergeObjectAsync(n,s):Or.mergeObjectSync(n,s)}get element(){return this._def.valueType}static create(e,n,r){return n instanceof st?new yy({keyType:e,valueType:n,typeName:ze.ZodRecord,...Qe(r)}):new yy({keyType:ia.create(),valueType:e,typeName:ze.ZodRecord,...Qe(n)})}}class Uv extends st{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==Ee.map)return Te(r,{code:de.invalid_type,expected:Ee.map,received:r.parsedType}),qe;const s=this._def.keyType,i=this._def.valueType,a=[...r.data.entries()].map(([o,l],u)=>({key:s._parse(new uo(r,o,r.path,[u,"key"])),value:i._parse(new uo(r,l,r.path,[u,"value"]))}));if(r.common.async){const o=new Map;return Promise.resolve().then(async()=>{for(const l of a){const u=await l.key,d=await l.value;if(u.status==="aborted"||d.status==="aborted")return qe;(u.status==="dirty"||d.status==="dirty")&&n.dirty(),o.set(u.value,d.value)}return{status:n.value,value:o}})}else{const o=new Map;for(const l of a){const u=l.key,d=l.value;if(u.status==="aborted"||d.status==="aborted")return qe;(u.status==="dirty"||d.status==="dirty")&&n.dirty(),o.set(u.value,d.value)}return{status:n.value,value:o}}}}Uv.create=(t,e,n)=>new Uv({valueType:e,keyType:t,typeName:ze.ZodMap,...Qe(n)});class Kd extends st{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==Ee.set)return Te(r,{code:de.invalid_type,expected:Ee.set,received:r.parsedType}),qe;const s=this._def;s.minSize!==null&&r.data.size<s.minSize.value&&(Te(r,{code:de.too_small,minimum:s.minSize.value,type:"set",inclusive:!0,exact:!1,message:s.minSize.message}),n.dirty()),s.maxSize!==null&&r.data.size>s.maxSize.value&&(Te(r,{code:de.too_big,maximum:s.maxSize.value,type:"set",inclusive:!0,exact:!1,message:s.maxSize.message}),n.dirty());const i=this._def.valueType;function a(l){const u=new Set;for(const d of l){if(d.status==="aborted")return qe;d.status==="dirty"&&n.dirty(),u.add(d.value)}return{status:n.value,value:u}}const o=[...r.data.values()].map((l,u)=>i._parse(new uo(r,l,r.path,u)));return r.common.async?Promise.all(o).then(l=>a(l)):a(o)}min(e,n){return new Kd({...this._def,minSize:{value:e,message:Me.toString(n)}})}max(e,n){return new Kd({...this._def,maxSize:{value:e,message:Me.toString(n)}})}size(e,n){return this.min(e,n).max(e,n)}nonempty(e){return this.min(1,e)}}Kd.create=(t,e)=>new Kd({valueType:t,minSize:null,maxSize:null,typeName:ze.ZodSet,...Qe(e)});class jf extends st{constructor(){super(...arguments),this.validate=this.implement}_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==Ee.function)return Te(n,{code:de.invalid_type,expected:Ee.function,received:n.parsedType}),qe;function r(o,l){return Rv({data:o,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,Pv(),uy].filter(u=>!!u),issueData:{code:de.invalid_arguments,argumentsError:l}})}function s(o,l){return Rv({data:o,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,Pv(),uy].filter(u=>!!u),issueData:{code:de.invalid_return_type,returnTypeError:l}})}const i={errorMap:n.common.contextualErrorMap},a=n.data;if(this._def.returns instanceof Jp){const o=this;return ss(async function(...l){const u=new da([]),d=await o._def.args.parseAsync(l,i).catch(p=>{throw u.addIssue(r(l,p)),u}),h=await Reflect.apply(a,this,d);return await o._def.returns._def.type.parseAsync(h,i).catch(p=>{throw u.addIssue(s(h,p)),u})})}else{const o=this;return ss(function(...l){const u=o._def.args.safeParse(l,i);if(!u.success)throw new da([r(l,u.error)]);const d=Reflect.apply(a,this,u.data),h=o._def.returns.safeParse(d,i);if(!h.success)throw new da([s(d,h.error)]);return h.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new jf({...this._def,args:ho.create(e).rest(Nd.create())})}returns(e){return new jf({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,n,r){return new jf({args:e||ho.create([]).rest(Nd.create()),returns:n||Nd.create(),typeName:ze.ZodFunction,...Qe(r)})}}class wy extends st{get schema(){return this._def.getter()}_parse(e){const{ctx:n}=this._processInputParams(e);return this._def.getter()._parse({data:n.data,path:n.path,parent:n})}}wy.create=(t,e)=>new wy({getter:t,typeName:ze.ZodLazy,...Qe(e)});class by extends st{_parse(e){if(e.data!==this._def.value){const n=this._getOrReturnCtx(e);return Te(n,{received:n.data,code:de.invalid_literal,expected:this._def.value}),qe}return{status:"valid",value:e.data}}get value(){return this._def.value}}by.create=(t,e)=>new by({value:t,typeName:ze.ZodLiteral,...Qe(e)});function dB(t,e){return new Yl({values:t,typeName:ze.ZodEnum,...Qe(e)})}class Yl extends st{_parse(e){if(typeof e.data!="string"){const n=this._getOrReturnCtx(e),r=this._def.values;return Te(n,{expected:Tt.joinValues(r),received:n.parsedType,code:de.invalid_type}),qe}if(this._def.values.indexOf(e.data)===-1){const n=this._getOrReturnCtx(e),r=this._def.values;return Te(n,{received:n.data,code:de.invalid_enum_value,options:r}),qe}return ss(e.data)}get options(){return this._def.values}get enum(){const e={};for(const n of this._def.values)e[n]=n;return e}get Values(){const e={};for(const n of this._def.values)e[n]=n;return e}get Enum(){const e={};for(const n of this._def.values)e[n]=n;return e}extract(e){return Yl.create(e)}exclude(e){return Yl.create(this.options.filter(n=>!e.includes(n)))}}Yl.create=dB;class xy extends st{_parse(e){const n=Tt.getValidEnumValues(this._def.values),r=this._getOrReturnCtx(e);if(r.parsedType!==Ee.string&&r.parsedType!==Ee.number){const s=Tt.objectValues(n);return Te(r,{expected:Tt.joinValues(s),received:r.parsedType,code:de.invalid_type}),qe}if(n.indexOf(e.data)===-1){const s=Tt.objectValues(n);return Te(r,{received:r.data,code:de.invalid_enum_value,options:s}),qe}return ss(e.data)}get enum(){return this._def.values}}xy.create=(t,e)=>new xy({values:t,typeName:ze.ZodNativeEnum,...Qe(e)});class Jp extends st{unwrap(){return this._def.type}_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==Ee.promise&&n.common.async===!1)return Te(n,{code:de.invalid_type,expected:Ee.promise,received:n.parsedType}),qe;const r=n.parsedType===Ee.promise?n.data:Promise.resolve(n.data);return ss(r.then(s=>this._def.type.parseAsync(s,{path:n.path,errorMap:n.common.contextualErrorMap})))}}Jp.create=(t,e)=>new Jp({type:t,typeName:ze.ZodPromise,...Qe(e)});class ma extends st{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===ze.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:n,ctx:r}=this._processInputParams(e),s=this._def.effect||null,i={addIssue:a=>{Te(r,a),a.fatal?n.abort():n.dirty()},get path(){return r.path}};if(i.addIssue=i.addIssue.bind(i),s.type==="preprocess"){const a=s.transform(r.data,i);return r.common.issues.length?{status:"dirty",value:r.data}:r.common.async?Promise.resolve(a).then(o=>this._def.schema._parseAsync({data:o,path:r.path,parent:r})):this._def.schema._parseSync({data:a,path:r.path,parent:r})}if(s.type==="refinement"){const a=o=>{const l=s.refinement(o,i);if(r.common.async)return Promise.resolve(l);if(l instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return o};if(r.common.async===!1){const o=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});return o.status==="aborted"?qe:(o.status==="dirty"&&n.dirty(),a(o.value),{status:n.value,value:o.value})}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(o=>o.status==="aborted"?qe:(o.status==="dirty"&&n.dirty(),a(o.value).then(()=>({status:n.value,value:o.value}))))}if(s.type==="transform")if(r.common.async===!1){const a=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});if(!dy(a))return a;const o=s.transform(a.value,i);if(o instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:n.value,value:o}}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(a=>dy(a)?Promise.resolve(s.transform(a.value,i)).then(o=>({status:n.value,value:o})):a);Tt.assertNever(s)}}ma.create=(t,e,n)=>new ma({schema:t,typeName:ze.ZodEffects,effect:e,...Qe(n)});ma.createWithPreprocess=(t,e,n)=>new ma({schema:e,effect:{type:"preprocess",transform:t},typeName:ze.ZodEffects,...Qe(n)});class nc extends st{_parse(e){return this._getType(e)===Ee.undefined?ss(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}nc.create=(t,e)=>new nc({innerType:t,typeName:ze.ZodOptional,...Qe(e)});class Gd extends st{_parse(e){return this._getType(e)===Ee.null?ss(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}Gd.create=(t,e)=>new Gd({innerType:t,typeName:ze.ZodNullable,...Qe(e)});class vy extends st{_parse(e){const{ctx:n}=this._processInputParams(e);let r=n.data;return n.parsedType===Ee.undefined&&(r=this._def.defaultValue()),this._def.innerType._parse({data:r,path:n.path,parent:n})}removeDefault(){return this._def.innerType}}vy.create=(t,e)=>new vy({innerType:t,typeName:ze.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...Qe(e)});class Mv extends st{_parse(e){const{ctx:n}=this._processInputParams(e),r={...n,common:{...n.common,issues:[]}},s=this._def.innerType._parse({data:r.data,path:r.path,parent:{...r}});return jv(s)?s.then(i=>({status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new da(r.common.issues)},input:r.data})})):{status:"valid",value:s.status==="valid"?s.value:this._def.catchValue({get error(){return new da(r.common.issues)},input:r.data})}}removeCatch(){return this._def.innerType}}Mv.create=(t,e)=>new Mv({innerType:t,typeName:ze.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...Qe(e)});class Lv extends st{_parse(e){if(this._getType(e)!==Ee.nan){const r=this._getOrReturnCtx(e);return Te(r,{code:de.invalid_type,expected:Ee.nan,received:r.parsedType}),qe}return{status:"valid",value:e.data}}}Lv.create=t=>new Lv({typeName:ze.ZodNaN,...Qe(t)});const Qpe=Symbol("zod_brand");class hB extends st{_parse(e){const{ctx:n}=this._processInputParams(e),r=n.data;return this._def.type._parse({data:r,path:n.path,parent:n})}unwrap(){return this._def.type}}class mw extends st{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.common.async)return(async()=>{const i=await this._def.in._parseAsync({data:r.data,path:r.path,parent:r});return i.status==="aborted"?qe:i.status==="dirty"?(n.dirty(),uB(i.value)):this._def.out._parseAsync({data:i.value,path:r.path,parent:r})})();{const s=this._def.in._parseSync({data:r.data,path:r.path,parent:r});return s.status==="aborted"?qe:s.status==="dirty"?(n.dirty(),{status:"dirty",value:s.value}):this._def.out._parseSync({data:s.value,path:r.path,parent:r})}}static create(e,n){return new mw({in:e,out:n,typeName:ze.ZodPipeline})}}class Bv extends st{_parse(e){const n=this._def.innerType._parse(e);return dy(n)&&(n.value=Object.freeze(n.value)),n}}Bv.create=(t,e)=>new Bv({innerType:t,typeName:ze.ZodReadonly,...Qe(e)});const fB=(t,e={},n)=>t?Qp.create().superRefine((r,s)=>{var i,a;if(!t(r)){const o=typeof e=="function"?e(r):typeof e=="string"?{message:e}:e,l=(a=(i=o.fatal)!==null&&i!==void 0?i:n)!==null&&a!==void 0?a:!0,u=typeof o=="string"?{message:o}:o;s.addIssue({code:"custom",...u,fatal:l})}}):Qp.create(),Jpe={object:an.lazycreate};var ze;(function(t){t.ZodString="ZodString",t.ZodNumber="ZodNumber",t.ZodNaN="ZodNaN",t.ZodBigInt="ZodBigInt",t.ZodBoolean="ZodBoolean",t.ZodDate="ZodDate",t.ZodSymbol="ZodSymbol",t.ZodUndefined="ZodUndefined",t.ZodNull="ZodNull",t.ZodAny="ZodAny",t.ZodUnknown="ZodUnknown",t.ZodNever="ZodNever",t.ZodVoid="ZodVoid",t.ZodArray="ZodArray",t.ZodObject="ZodObject",t.ZodUnion="ZodUnion",t.ZodDiscriminatedUnion="ZodDiscriminatedUnion",t.ZodIntersection="ZodIntersection",t.ZodTuple="ZodTuple",t.ZodRecord="ZodRecord",t.ZodMap="ZodMap",t.ZodSet="ZodSet",t.ZodFunction="ZodFunction",t.ZodLazy="ZodLazy",t.ZodLiteral="ZodLiteral",t.ZodEnum="ZodEnum",t.ZodEffects="ZodEffects",t.ZodNativeEnum="ZodNativeEnum",t.ZodOptional="ZodOptional",t.ZodNullable="ZodNullable",t.ZodDefault="ZodDefault",t.ZodCatch="ZodCatch",t.ZodPromise="ZodPromise",t.ZodBranded="ZodBranded",t.ZodPipeline="ZodPipeline",t.ZodReadonly="ZodReadonly"})(ze||(ze={}));const Zpe=(t,e={message:`Input not instance of ${t.name}`})=>fB(n=>n instanceof t,e),pB=ia.create,mB=Kl.create,Xpe=Lv.create,eme=Gl.create,gB=hy.create,tme=qd.create,nme=Ov.create,rme=fy.create,sme=py.create,ime=Qp.create,ame=Nd.create,ome=fc.create,cme=Dv.create,lme=ha.create,ume=an.create,dme=an.strictCreate,hme=my.create,fme=nE.create,pme=gy.create,mme=ho.create,gme=yy.create,yme=Uv.create,wme=Kd.create,bme=jf.create,xme=wy.create,vme=by.create,Eme=Yl.create,Nme=xy.create,Cme=Jp.create,nR=ma.create,Ame=nc.create,Tme=Gd.create,Sme=ma.createWithPreprocess,kme=mw.create,_me=()=>pB().optional(),Ime=()=>mB().optional(),Pme=()=>gB().optional(),Rme={string:t=>ia.create({...t,coerce:!0}),number:t=>Kl.create({...t,coerce:!0}),boolean:t=>hy.create({...t,coerce:!0}),bigint:t=>Gl.create({...t,coerce:!0}),date:t=>qd.create({...t,coerce:!0})},jme=qe;var _=Object.freeze({__proto__:null,defaultErrorMap:uy,setErrorMap:Mpe,getErrorMap:Pv,makeIssue:Rv,EMPTY_PATH:Lpe,addIssueToContext:Te,ParseStatus:Or,INVALID:qe,DIRTY:uB,OK:ss,isAborted:tT,isDirty:nT,isValid:dy,isAsync:jv,get util(){return Tt},get objectUtil(){return eT},ZodParsedType:Ee,getParsedType:Xc,ZodType:st,ZodString:ia,ZodNumber:Kl,ZodBigInt:Gl,ZodBoolean:hy,ZodDate:qd,ZodSymbol:Ov,ZodUndefined:fy,ZodNull:py,ZodAny:Qp,ZodUnknown:Nd,ZodNever:fc,ZodVoid:Dv,ZodArray:ha,ZodObject:an,ZodUnion:my,ZodDiscriminatedUnion:nE,ZodIntersection:gy,ZodTuple:ho,ZodRecord:yy,ZodMap:Uv,ZodSet:Kd,ZodFunction:jf,ZodLazy:wy,ZodLiteral:by,ZodEnum:Yl,ZodNativeEnum:xy,ZodPromise:Jp,ZodEffects:ma,ZodTransformer:ma,ZodOptional:nc,ZodNullable:Gd,ZodDefault:vy,ZodCatch:Mv,ZodNaN:Lv,BRAND:Qpe,ZodBranded:hB,ZodPipeline:mw,ZodReadonly:Bv,custom:fB,Schema:st,ZodSchema:st,late:Jpe,get ZodFirstPartyTypeKind(){return ze},coerce:Rme,any:ime,array:lme,bigint:eme,boolean:gB,date:tme,discriminatedUnion:fme,effect:nR,enum:Eme,function:bme,instanceof:Zpe,intersection:pme,lazy:xme,literal:vme,map:yme,nan:Xpe,nativeEnum:Nme,never:ome,null:sme,nullable:Tme,number:mB,object:ume,oboolean:Pme,onumber:Ime,optional:Ame,ostring:_me,pipeline:kme,preprocess:Sme,promise:Cme,record:gme,set:wme,strictObject:dme,string:pB,symbol:nme,transformer:nR,tuple:mme,undefined:rme,union:hme,unknown:ame,void:cme,NEVER:jme,ZodIssueCode:de,quotelessJson:Upe,ZodError:da});const hn=_.object({message:_.string()});function Ne(t){return _.literal(Pe[t])}const rE=_.object({serializedMessage:_.string().optional(),accountAddress:_.string(),chainId:_.string(),notBefore:_.string().optional(),domain:_.string(),uri:_.string(),version:_.string(),nonce:_.string(),statement:_.string().optional(),resources:_.array(_.string()).optional(),requestId:_.string().optional(),issuedAt:_.string().optional(),expirationTime:_.string().optional()});_.object({accessList:_.array(_.string()),blockHash:_.string().nullable(),blockNumber:_.string().nullable(),chainId:_.string().or(_.number()),from:_.string(),gas:_.string(),hash:_.string(),input:_.string().nullable(),maxFeePerGas:_.string(),maxPriorityFeePerGas:_.string(),nonce:_.string(),r:_.string(),s:_.string(),to:_.string(),transactionIndex:_.string().nullable(),type:_.string(),v:_.string(),value:_.string()});const Ome=_.object({chainId:_.string().or(_.number()),rpcUrl:_.optional(_.string())}),Dme=_.object({email:_.string().email()}),Ume=_.object({otp:_.string()}),Mme=_.object({uri:_.string(),preferredAccountType:_.optional(_.string()),chainId:_.optional(_.string().or(_.number())),siwxMessage:_.optional(rE),rpcUrl:_.optional(_.string())}),Lme=_.object({chainId:_.optional(_.string().or(_.number())),preferredAccountType:_.optional(_.string()),socialUri:_.optional(_.string()),siwxMessage:_.optional(rE),rpcUrl:_.optional(_.string())}),Bme=_.object({provider:_.enum(["google","github","apple","facebook","x","discord"])}),$me=_.object({email:_.string().email()}),Fme=_.object({otp:_.string()}),Hme=_.object({otp:_.string()}),Vme=_.object({themeMode:_.optional(_.enum(["light","dark"])),themeVariables:_.optional(_.record(_.string(),_.string().or(_.number()))),w3mThemeVariables:_.optional(_.record(_.string(),_.string()))}),zme=_.object({metadata:_.object({name:_.string(),description:_.string(),url:_.string(),icons:_.array(_.string())}).optional(),sdkVersion:_.string().optional(),sdkType:_.string().optional(),projectId:_.string()}),Wme=_.object({type:_.string()}),qme=_.object({action:_.enum(["VERIFY_DEVICE","VERIFY_OTP","CONNECT"])}),Kme=_.object({url:_.string()}),Gme=_.object({userName:_.string()}),Yme=_.object({email:_.string().optional().nullable(),address:_.string(),chainId:_.string().or(_.number()),accounts:_.array(_.object({address:_.string(),type:_.enum([Mn.ACCOUNT_TYPES.EOA,Mn.ACCOUNT_TYPES.SMART_ACCOUNT])})).optional(),userName:_.string().optional().nullable(),preferredAccountType:_.optional(_.string()),signature:_.string().optional(),message:_.string().optional(),siwxMessage:_.optional(rE)}),Qme=_.object({action:_.enum(["VERIFY_PRIMARY_OTP","VERIFY_SECONDARY_OTP"])}),Jme=_.object({email:_.string().email().optional().nullable(),address:_.string(),chainId:_.string().or(_.number()),smartAccountDeployed:_.optional(_.boolean()),accounts:_.array(_.object({address:_.string(),type:_.enum([Mn.ACCOUNT_TYPES.EOA,Mn.ACCOUNT_TYPES.SMART_ACCOUNT])})).optional(),preferredAccountType:_.optional(_.string()),signature:_.string().optional(),message:_.string().optional(),siwxMessage:_.optional(rE)}),Zme=_.object({uri:_.string()}),Xme=_.object({isConnected:_.boolean()}),ege=_.object({chainId:_.string().or(_.number())}),tge=_.object({chainId:_.string().or(_.number())}),nge=_.object({newEmail:_.string().email()}),rge=_.object({smartAccountEnabledNetworks:_.array(_.number())});_.object({address:_.string(),isDeployed:_.boolean()});const sge=_.object({version:_.string().optional()}),ige=_.object({type:_.string(),address:_.string()}),age=_.any(),oge=_.object({method:_.literal("eth_accounts")}),cge=_.object({method:_.literal("eth_blockNumber")}),lge=_.object({method:_.literal("eth_call"),params:_.array(_.any())}),uge=_.object({method:_.literal("eth_chainId")}),dge=_.object({method:_.literal("eth_estimateGas"),params:_.array(_.any())}),hge=_.object({method:_.literal("eth_feeHistory"),params:_.array(_.any())}),fge=_.object({method:_.literal("eth_gasPrice")}),pge=_.object({method:_.literal("eth_getAccount"),params:_.array(_.any())}),mge=_.object({method:_.literal("eth_getBalance"),params:_.array(_.any())}),gge=_.object({method:_.literal("eth_getBlockByHash"),params:_.array(_.any())}),yge=_.object({method:_.literal("eth_getBlockByNumber"),params:_.array(_.any())}),wge=_.object({method:_.literal("eth_getBlockReceipts"),params:_.array(_.any())}),bge=_.object({method:_.literal("eth_getBlockTransactionCountByHash"),params:_.array(_.any())}),xge=_.object({method:_.literal("eth_getBlockTransactionCountByNumber"),params:_.array(_.any())}),vge=_.object({method:_.literal("eth_getCode"),params:_.array(_.any())}),Ege=_.object({method:_.literal("eth_getFilterChanges"),params:_.array(_.any())}),Nge=_.object({method:_.literal("eth_getFilterLogs"),params:_.array(_.any())}),Cge=_.object({method:_.literal("eth_getLogs"),params:_.array(_.any())}),Age=_.object({method:_.literal("eth_getProof"),params:_.array(_.any())}),Tge=_.object({method:_.literal("eth_getStorageAt"),params:_.array(_.any())}),Sge=_.object({method:_.literal("eth_getTransactionByBlockHashAndIndex"),params:_.array(_.any())}),kge=_.object({method:_.literal("eth_getTransactionByBlockNumberAndIndex"),params:_.array(_.any())}),_ge=_.object({method:_.literal("eth_getTransactionByHash"),params:_.array(_.any())}),Ige=_.object({method:_.literal("eth_getTransactionCount"),params:_.array(_.any())}),Pge=_.object({method:_.literal("eth_getTransactionReceipt"),params:_.array(_.any())}),Rge=_.object({method:_.literal("eth_getUncleCountByBlockHash"),params:_.array(_.any())}),jge=_.object({method:_.literal("eth_getUncleCountByBlockNumber"),params:_.array(_.any())}),Oge=_.object({method:_.literal("eth_maxPriorityFeePerGas")}),Dge=_.object({method:_.literal("eth_newBlockFilter")}),Uge=_.object({method:_.literal("eth_newFilter"),params:_.array(_.any())}),Mge=_.object({method:_.literal("eth_newPendingTransactionFilter")}),Lge=_.object({method:_.literal("eth_sendRawTransaction"),params:_.array(_.any())}),Bge=_.object({method:_.literal("eth_syncing"),params:_.array(_.any())}),$ge=_.object({method:_.literal("eth_uninstallFilter"),params:_.array(_.any())}),rR=_.object({method:_.literal("personal_sign"),params:_.array(_.any())}),Fge=_.object({method:_.literal("eth_signTypedData_v4"),params:_.array(_.any())}),Hge=_.object({method:_.literal("eth_sendTransaction"),params:_.array(_.any())}),Vge=_.object({method:_.literal("solana_signMessage"),params:_.object({message:_.string(),pubkey:_.string()})}),zge=_.object({method:_.literal("solana_signTransaction"),params:_.object({transaction:_.string()})}),Wge=_.object({method:_.literal("solana_signAllTransactions"),params:_.object({transactions:_.array(_.string())})}),qge=_.object({method:_.literal("solana_signAndSendTransaction"),params:_.object({transaction:_.string(),options:_.object({skipPreflight:_.boolean().optional(),preflightCommitment:_.enum(["processed","confirmed","finalized","recent","single","singleGossip","root","max"]).optional(),maxRetries:_.number().optional(),minContextSlot:_.number().optional()}).optional()})}),Kge=_.object({method:_.literal("wallet_sendCalls"),params:_.array(_.object({chainId:_.string().or(_.number()).optional(),from:_.string().optional(),version:_.string().optional(),capabilities:_.any().optional(),calls:_.array(_.object({to:_.string().startsWith("0x"),data:_.string().startsWith("0x").optional(),value:_.string().optional()}))}))}),Gge=_.object({method:_.literal("wallet_getCallsStatus"),params:_.array(_.string())}),Yge=_.object({method:_.literal("wallet_getCapabilities"),params:_.array(_.string().or(_.number()).optional()).optional()}),Qge=_.object({method:_.literal("wallet_grantPermissions"),params:_.array(_.any())}),Jge=_.object({method:_.literal("wallet_revokePermissions"),params:_.any()}),Zge=_.object({method:_.literal("wallet_getAssets"),params:_.any()}),sR=_.object({token:_.string()}),Ce=_.object({id:_.string().optional()}),rg={appEvent:Ce.extend({type:Ne("APP_SWITCH_NETWORK"),payload:Ome}).or(Ce.extend({type:Ne("APP_CONNECT_EMAIL"),payload:Dme})).or(Ce.extend({type:Ne("APP_CONNECT_DEVICE")})).or(Ce.extend({type:Ne("APP_CONNECT_OTP"),payload:Ume})).or(Ce.extend({type:Ne("APP_CONNECT_SOCIAL"),payload:Mme})).or(Ce.extend({type:Ne("APP_GET_FARCASTER_URI")})).or(Ce.extend({type:Ne("APP_CONNECT_FARCASTER")})).or(Ce.extend({type:Ne("APP_GET_USER"),payload:_.optional(Lme)})).or(Ce.extend({type:Ne("APP_GET_SOCIAL_REDIRECT_URI"),payload:Bme})).or(Ce.extend({type:Ne("APP_SIGN_OUT")})).or(Ce.extend({type:Ne("APP_IS_CONNECTED"),payload:_.optional(sR)})).or(Ce.extend({type:Ne("APP_GET_CHAIN_ID")})).or(Ce.extend({type:Ne("APP_GET_SMART_ACCOUNT_ENABLED_NETWORKS")})).or(Ce.extend({type:Ne("APP_INIT_SMART_ACCOUNT")})).or(Ce.extend({type:Ne("APP_SET_PREFERRED_ACCOUNT"),payload:Wme})).or(Ce.extend({type:Ne("APP_RPC_REQUEST"),payload:rR.or(Zge).or(oge).or(cge).or(lge).or(uge).or(dge).or(hge).or(fge).or(pge).or(mge).or(gge).or(yge).or(wge).or(bge).or(xge).or(vge).or(Ege).or(Nge).or(Cge).or(Age).or(Tge).or(Sge).or(kge).or(_ge).or(Ige).or(Pge).or(Rge).or(jge).or(Oge).or(Dge).or(Uge).or(Mge).or(Lge).or(Bge).or($ge).or(rR).or(Fge).or(Hge).or(Vge).or(zge).or(Wge).or(qge).or(Gge).or(Kge).or(Yge).or(Qge).or(Jge).and(_.object({chainId:_.string().or(_.number()).optional(),chainNamespace:_.enum(["eip155","solana","polkadot","bip122","cosmos"]).optional(),rpcUrl:_.string().optional()}))})).or(Ce.extend({type:Ne("APP_UPDATE_EMAIL"),payload:$me})).or(Ce.extend({type:Ne("APP_UPDATE_EMAIL_PRIMARY_OTP"),payload:Fme})).or(Ce.extend({type:Ne("APP_UPDATE_EMAIL_SECONDARY_OTP"),payload:Hme})).or(Ce.extend({type:Ne("APP_SYNC_THEME"),payload:Vme})).or(Ce.extend({type:Ne("APP_SYNC_DAPP_DATA"),payload:zme})).or(Ce.extend({type:Ne("APP_RELOAD")})).or(Ce.extend({type:Ne("APP_RPC_ABORT")})),frameEvent:Ce.extend({type:Ne("FRAME_SWITCH_NETWORK_ERROR"),payload:hn}).or(Ce.extend({type:Ne("FRAME_SWITCH_NETWORK_SUCCESS"),payload:tge})).or(Ce.extend({type:Ne("FRAME_CONNECT_EMAIL_SUCCESS"),payload:qme})).or(Ce.extend({type:Ne("FRAME_CONNECT_EMAIL_ERROR"),payload:hn})).or(Ce.extend({type:Ne("FRAME_GET_FARCASTER_URI_SUCCESS"),payload:Kme})).or(Ce.extend({type:Ne("FRAME_GET_FARCASTER_URI_ERROR"),payload:hn})).or(Ce.extend({type:Ne("FRAME_CONNECT_FARCASTER_SUCCESS"),payload:Gme})).or(Ce.extend({type:Ne("FRAME_CONNECT_FARCASTER_ERROR"),payload:hn})).or(Ce.extend({type:Ne("FRAME_CONNECT_OTP_ERROR"),payload:hn})).or(Ce.extend({type:Ne("FRAME_CONNECT_OTP_SUCCESS")})).or(Ce.extend({type:Ne("FRAME_CONNECT_DEVICE_ERROR"),payload:hn})).or(Ce.extend({type:Ne("FRAME_CONNECT_DEVICE_SUCCESS")})).or(Ce.extend({type:Ne("FRAME_CONNECT_SOCIAL_SUCCESS"),payload:Yme})).or(Ce.extend({type:Ne("FRAME_CONNECT_SOCIAL_ERROR"),payload:hn})).or(Ce.extend({type:Ne("FRAME_GET_USER_ERROR"),payload:hn})).or(Ce.extend({type:Ne("FRAME_GET_USER_SUCCESS"),payload:Jme})).or(Ce.extend({type:Ne("FRAME_GET_SOCIAL_REDIRECT_URI_ERROR"),payload:hn})).or(Ce.extend({type:Ne("FRAME_GET_SOCIAL_REDIRECT_URI_SUCCESS"),payload:Zme})).or(Ce.extend({type:Ne("FRAME_SIGN_OUT_ERROR"),payload:hn})).or(Ce.extend({type:Ne("FRAME_SIGN_OUT_SUCCESS")})).or(Ce.extend({type:Ne("FRAME_IS_CONNECTED_ERROR"),payload:hn})).or(Ce.extend({type:Ne("FRAME_IS_CONNECTED_SUCCESS"),payload:Xme})).or(Ce.extend({type:Ne("FRAME_GET_CHAIN_ID_ERROR"),payload:hn})).or(Ce.extend({type:Ne("FRAME_GET_CHAIN_ID_SUCCESS"),payload:ege})).or(Ce.extend({type:Ne("FRAME_RPC_REQUEST_ERROR"),payload:hn})).or(Ce.extend({type:Ne("FRAME_RPC_REQUEST_SUCCESS"),payload:age})).or(Ce.extend({type:Ne("FRAME_SESSION_UPDATE"),payload:sR})).or(Ce.extend({type:Ne("FRAME_UPDATE_EMAIL_ERROR"),payload:hn})).or(Ce.extend({type:Ne("FRAME_UPDATE_EMAIL_SUCCESS"),payload:Qme})).or(Ce.extend({type:Ne("FRAME_UPDATE_EMAIL_PRIMARY_OTP_ERROR"),payload:hn})).or(Ce.extend({type:Ne("FRAME_UPDATE_EMAIL_PRIMARY_OTP_SUCCESS")})).or(Ce.extend({type:Ne("FRAME_UPDATE_EMAIL_SECONDARY_OTP_ERROR"),payload:hn})).or(Ce.extend({type:Ne("FRAME_UPDATE_EMAIL_SECONDARY_OTP_SUCCESS"),payload:nge})).or(Ce.extend({type:Ne("FRAME_SYNC_THEME_ERROR"),payload:hn})).or(Ce.extend({type:Ne("FRAME_SYNC_THEME_SUCCESS")})).or(Ce.extend({type:Ne("FRAME_SYNC_DAPP_DATA_ERROR"),payload:hn})).or(Ce.extend({type:Ne("FRAME_SYNC_DAPP_DATA_SUCCESS")})).or(Ce.extend({type:Ne("FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_SUCCESS"),payload:rge})).or(Ce.extend({type:Ne("FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_ERROR"),payload:hn})).or(Ce.extend({type:Ne("FRAME_INIT_SMART_ACCOUNT_ERROR"),payload:hn})).or(Ce.extend({type:Ne("FRAME_SET_PREFERRED_ACCOUNT_SUCCESS"),payload:ige})).or(Ce.extend({type:Ne("FRAME_SET_PREFERRED_ACCOUNT_ERROR"),payload:hn})).or(Ce.extend({type:Ne("FRAME_READY"),payload:sge})).or(Ce.extend({type:Ne("FRAME_RELOAD_ERROR"),payload:hn})).or(Ce.extend({type:Ne("FRAME_RELOAD_SUCCESS")}))};function uN(t,e={}){var n;return typeof(e==null?void 0:e.type)=="string"&&((n=e==null?void 0:e.type)==null?void 0:n.includes(t))}function Xge({projectId:t,chainId:e,version:n,enableLogger:r,rpcUrl:s=Y.BLOCKCHAIN_API_RPC_URL}){const i=new URL(fG);return i.searchParams.set("projectId",t),i.searchParams.set("chainId",String(e)),i.searchParams.set("version",n),i.searchParams.set("enableLogger",String(r)),i.searchParams.set("rpcUrl",s),i.toString()}class e0e{constructor({projectId:e,isAppClient:n=!1,chainId:r="eip155:1",enableLogger:s=!0,rpcUrl:i=Y.BLOCKCHAIN_API_RPC_URL}){if(this.iframe=null,this.iframeIsReady=!1,this.initFrame=()=>{const a=document.getElementById("w3m-iframe");this.iframe&&!a&&document.body.appendChild(this.iframe)},this.events={registerFrameEventHandler:(a,o,l)=>{function u({data:d}){if(!uN(Pe.FRAME_EVENT_KEY,d))return;const h=rg.frameEvent.parse(d);h.id===a&&(o(h),window.removeEventListener("message",u))}Ys.isClient&&(window.addEventListener("message",u),l.addEventListener("abort",()=>{window.removeEventListener("message",u)}))},onFrameEvent:a=>{Ys.isClient&&window.addEventListener("message",({data:o})=>{if(!uN(Pe.FRAME_EVENT_KEY,o))return;const l=rg.frameEvent.parse(o);a(l)})},onAppEvent:a=>{Ys.isClient&&window.addEventListener("message",({data:o})=>{if(!uN(Pe.APP_EVENT_KEY,o))return;const l=rg.appEvent.parse(o);a(l)})},postAppEvent:a=>{var o;if(Ys.isClient){if(!((o=this.iframe)!=null&&o.contentWindow))throw new Error("W3mFrame: iframe is not set");rg.appEvent.parse(a),this.iframe.contentWindow.postMessage(a,"*")}},postFrameEvent:a=>{if(Ys.isClient){if(!parent)throw new Error("W3mFrame: parent is not set");rg.frameEvent.parse(a),parent.postMessage(a,"*")}}},this.projectId=e,this.frameLoadPromise=new Promise((a,o)=>{this.frameLoadPromiseResolver={resolve:a,reject:o}}),this.rpcUrl=i,n&&(this.frameLoadPromise=new Promise((a,o)=>{this.frameLoadPromiseResolver={resolve:a,reject:o}}),Ys.isClient)){const a=document.createElement("iframe");a.id="w3m-iframe",a.src=Xge({projectId:e,chainId:r,version:mG,enableLogger:s,rpcUrl:this.rpcUrl}),a.name="w3m-secure-iframe",a.style.position="fixed",a.style.zIndex="999999",a.style.display="none",a.style.border="none",a.style.animationDelay="0s, 50ms",a.style.borderBottomLeftRadius="clamp(0px, var(--wui-border-radius-l), 44px)",a.style.borderBottomRightRadius="clamp(0px, var(--wui-border-radius-l), 44px)",this.iframe=a,this.iframe.onerror=()=>{var o;(o=this.frameLoadPromiseResolver)==null||o.reject("Unable to load email login dependency")},this.events.onFrameEvent(o=>{var l;o.type==="@w3m-frame/READY"&&(this.iframeIsReady=!0,(l=this.frameLoadPromiseResolver)==null||l.resolve(void 0))})}}get networks(){const e=["eip155:1","eip155:5","eip155:11155111","eip155:10","eip155:420","eip155:42161","eip155:421613","eip155:137","eip155:80001","eip155:42220","eip155:1313161554","eip155:1313161555","eip155:56","eip155:97","eip155:43114","eip155:43113","eip155:324","eip155:280","eip155:100","eip155:8453","eip155:84531","eip155:84532","eip155:7777777","eip155:999","solana:5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp","solana:4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z","solana:EtWTRABZaYq6iMfeYKouRu166VU2xqa1"].map(n=>({[n]:{rpcUrl:`${this.rpcUrl}/v1/?chainId=${n}&projectId=${this.projectId}`,chainId:n}}));return Object.assign({},...e)}}class t0e{constructor(e){var i;const n=dm({level:pG}),{logger:r,chunkLoggerController:s}=Z6({opts:n});this.logger=Ur(r,this.constructor.name),this.chunkLoggerController=s,typeof window<"u"&&((i=this.chunkLoggerController)!=null&&i.downloadLogsBlobInBrowser)&&(window.downloadAppKitLogsBlob||(window.downloadAppKitLogsBlob={}),window.downloadAppKitLogsBlob.sdk=()=>{var a;(a=this.chunkLoggerController)!=null&&a.downloadLogsBlobInBrowser&&this.chunkLoggerController.downloadLogsBlobInBrowser({projectId:e})})}}class n0e{constructor({projectId:e,chainId:n,enableLogger:r=!0,onTimeout:s,abortController:i,getActiveCaipNetwork:a}){this.openRpcRequests=[],this.isInitialized=!1,r&&(this.w3mLogger=new t0e(e)),this.abortController=i,this.getActiveCaipNetwork=a;const o=this.getRpcUrl(n);this.w3mFrame=new e0e({projectId:e,isAppClient:!0,chainId:n,enableLogger:r,rpcUrl:o}),this.onTimeout=s,this.getLoginEmailUsed()&&this.createFrame()}async createFrame(){this.w3mFrame.initFrame(),this.initPromise=new Promise(e=>{this.w3mFrame.events.onFrameEvent(n=>{n.type===Pe.FRAME_READY&&setTimeout(()=>{e()},500)})}),await this.initPromise,this.isInitialized=!0,this.initPromise=void 0}async init(){if(!this.isInitialized){if(this.initPromise){await this.initPromise;return}await this.createFrame()}}getLoginEmailUsed(){return!!tr.get(Pe.EMAIL_LOGIN_USED_KEY)}getEmail(){return tr.get(Pe.EMAIL)}getUsername(){return tr.get(Pe.SOCIAL_USERNAME)}async reload(){var e;try{await this.appEvent({type:Pe.APP_RELOAD})}catch(n){throw(e=this.w3mLogger)==null||e.logger.error({error:n},"Error reloading iframe"),n}}async connectEmail(e){var n;try{Ys.checkIfAllowedToTriggerEmail(),await this.init();const r=await this.appEvent({type:Pe.APP_CONNECT_EMAIL,payload:e});return this.setNewLastEmailLoginTime(),r}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error connecting email"),r}}async connectDevice(){var e;try{return this.appEvent({type:Pe.APP_CONNECT_DEVICE})}catch(n){throw(e=this.w3mLogger)==null||e.logger.error({error:n},"Error connecting device"),n}}async connectOtp(e){var n;try{return this.appEvent({type:Pe.APP_CONNECT_OTP,payload:e})}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error connecting otp"),r}}async isConnected(){var e;try{if(!this.getLoginEmailUsed())return{isConnected:!1};const n=await this.appEvent({type:Pe.APP_IS_CONNECTED});return n!=null&&n.isConnected||this.deleteAuthLoginCache(),n}catch(n){throw this.deleteAuthLoginCache(),(e=this.w3mLogger)==null||e.logger.error({error:n},"Error checking connection"),n}}async getChainId(){var e;try{const n=await this.appEvent({type:Pe.APP_GET_CHAIN_ID});return this.setLastUsedChainId(n.chainId),n}catch(n){throw(e=this.w3mLogger)==null||e.logger.error({error:n},"Error getting chain id"),n}}async getSocialRedirectUri(e){var n;try{return await this.init(),this.appEvent({type:Pe.APP_GET_SOCIAL_REDIRECT_URI,payload:e})}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error getting social redirect uri"),r}}async updateEmail(e){var n;try{const r=await this.appEvent({type:Pe.APP_UPDATE_EMAIL,payload:e});return this.setNewLastEmailLoginTime(),r}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error updating email"),r}}async updateEmailPrimaryOtp(e){var n;try{return this.appEvent({type:Pe.APP_UPDATE_EMAIL_PRIMARY_OTP,payload:e})}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error updating email primary otp"),r}}async updateEmailSecondaryOtp(e){var n;try{const r=await this.appEvent({type:Pe.APP_UPDATE_EMAIL_SECONDARY_OTP,payload:e});return this.setLoginSuccess(r.newEmail),r}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error updating email secondary otp"),r}}async syncTheme(e){var n;try{return this.appEvent({type:Pe.APP_SYNC_THEME,payload:e})}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error syncing theme"),r}}async syncDappData(e){var n;try{return this.appEvent({type:Pe.APP_SYNC_DAPP_DATA,payload:e})}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error syncing dapp data"),r}}async getSmartAccountEnabledNetworks(){var e;try{const n=await this.appEvent({type:Pe.APP_GET_SMART_ACCOUNT_ENABLED_NETWORKS});return this.persistSmartAccountEnabledNetworks(n.smartAccountEnabledNetworks),n}catch(n){throw this.persistSmartAccountEnabledNetworks([]),(e=this.w3mLogger)==null||e.logger.error({error:n},"Error getting smart account enabled networks"),n}}async setPreferredAccount(e){var n;try{return this.appEvent({type:Pe.APP_SET_PREFERRED_ACCOUNT,payload:{type:e}})}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error setting preferred account"),r}}async connect(e){var n,r;if(e!=null&&e.socialUri)try{await this.init();const s=this.getRpcUrl(e.chainId),i=await this.appEvent({type:Pe.APP_CONNECT_SOCIAL,payload:{uri:e.socialUri,preferredAccountType:e.preferredAccountType,chainId:e.chainId,siwxMessage:e.siwxMessage,rpcUrl:s}});return i.userName&&this.setSocialLoginSuccess(i.userName),this.setLoginSuccess(i.email),this.setLastUsedChainId(i.chainId),this.user=i,i}catch(s){throw(n=this.w3mLogger)==null||n.logger.error({error:s},"Error connecting social"),s}else try{const s=(e==null?void 0:e.chainId)||this.getLastUsedChainId()||1,i=await this.getUser({chainId:s,preferredAccountType:e==null?void 0:e.preferredAccountType,siwxMessage:e==null?void 0:e.siwxMessage,rpcUrl:this.getRpcUrl(s)});return this.setLoginSuccess(i.email),this.setLastUsedChainId(i.chainId),this.user=i,i}catch(s){throw(r=this.w3mLogger)==null||r.logger.error({error:s},"Error connecting"),s}}async getUser(e){var n;try{await this.init();const r=(e==null?void 0:e.chainId)||this.getLastUsedChainId()||1,s=await this.appEvent({type:Pe.APP_GET_USER,payload:{...e,chainId:r}});return this.user=s,s}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error connecting"),r}}async connectSocial({uri:e,chainId:n,preferredAccountType:r}){var s;try{await this.init();const i=this.getRpcUrl(n),a=await this.appEvent({type:Pe.APP_CONNECT_SOCIAL,payload:{uri:e,chainId:n,rpcUrl:i,preferredAccountType:r}});return a.userName&&this.setSocialLoginSuccess(a.userName),a}catch(i){throw(s=this.w3mLogger)==null||s.logger.error({error:i},"Error connecting social"),i}}async getFarcasterUri(){var e;try{return await this.init(),await this.appEvent({type:Pe.APP_GET_FARCASTER_URI})}catch(n){throw(e=this.w3mLogger)==null||e.logger.error({error:n},"Error getting farcaster uri"),n}}async connectFarcaster(){var e;try{const n=await this.appEvent({type:Pe.APP_CONNECT_FARCASTER});return n.userName&&this.setSocialLoginSuccess(n.userName),n}catch(n){throw(e=this.w3mLogger)==null||e.logger.error({error:n},"Error connecting farcaster"),n}}async switchNetwork({chainId:e}){var n;try{const r=this.getRpcUrl(e),s=await this.appEvent({type:Pe.APP_SWITCH_NETWORK,payload:{chainId:e,rpcUrl:r}});return this.setLastUsedChainId(s.chainId),s}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error switching network"),r}}async disconnect(){var e;try{return this.deleteAuthLoginCache(),await new Promise(async r=>{const s=setTimeout(()=>{r()},3e3);await this.appEvent({type:Pe.APP_SIGN_OUT}),clearTimeout(s),r()})}catch(n){throw(e=this.w3mLogger)==null||e.logger.error({error:n},"Error disconnecting"),n}}async request(e){var r,s,i,a,o;const n=e;try{if(Mn.GET_CHAIN_ID===e.method)return this.getLastUsedChainId();const l=e.chainNamespace||"eip155",u=(r=this.getActiveCaipNetwork(l))==null?void 0:r.id;n.chainNamespace=l,n.chainId=u,n.rpcUrl=this.getRpcUrl(u),(s=this.rpcRequestHandler)==null||s.call(this,e);const d=await this.appEvent({type:Pe.APP_RPC_REQUEST,payload:n});return(i=this.rpcSuccessHandler)==null||i.call(this,d,n),d}catch(l){throw(a=this.rpcErrorHandler)==null||a.call(this,l,n),(o=this.w3mLogger)==null||o.logger.error({error:l},"Error requesting"),l}}onRpcRequest(e){this.rpcRequestHandler=e}onRpcSuccess(e){this.rpcSuccessHandler=e}onRpcError(e){this.rpcErrorHandler=e}onIsConnected(e){this.w3mFrame.events.onFrameEvent(n=>{n.type===Pe.FRAME_IS_CONNECTED_SUCCESS&&n.payload.isConnected&&e()})}onNotConnected(e){this.w3mFrame.events.onFrameEvent(n=>{n.type===Pe.FRAME_IS_CONNECTED_ERROR&&e(),n.type===Pe.FRAME_IS_CONNECTED_SUCCESS&&!n.payload.isConnected&&e()})}onConnect(e){this.w3mFrame.events.onFrameEvent(n=>{n.type===Pe.FRAME_GET_USER_SUCCESS&&e(n.payload)})}onSocialConnected(e){this.w3mFrame.events.onFrameEvent(n=>{n.type===Pe.FRAME_CONNECT_SOCIAL_SUCCESS&&e(n.payload)})}async getCapabilities(){try{return await this.request({method:"wallet_getCapabilities"})||{}}catch{return{}}}onSetPreferredAccount(e){this.w3mFrame.events.onFrameEvent(n=>{n.type===Pe.FRAME_SET_PREFERRED_ACCOUNT_SUCCESS?e(n.payload):n.type===Pe.FRAME_SET_PREFERRED_ACCOUNT_ERROR&&e({type:Mn.ACCOUNT_TYPES.EOA})})}getAvailableChainIds(){return Object.keys(this.w3mFrame.networks)}async rejectRpcRequests(){var e;try{await Promise.all(this.openRpcRequests.map(async({abortController:n,method:r})=>{Mn.SAFE_RPC_METHODS.includes(r)||n.abort(),await this.appEvent({type:Pe.APP_RPC_ABORT})})),this.openRpcRequests=[]}catch(n){(e=this.w3mLogger)==null||e.logger.error({error:n},"Error aborting RPC request")}}async appEvent(e){let n,r;function s(l){return l.replace("@w3m-app/","")}const i=[Pe.APP_SYNC_DAPP_DATA,Pe.APP_SYNC_THEME,Pe.APP_SET_PREFERRED_ACCOUNT],a=s(e.type);return!this.w3mFrame.iframeIsReady&&!i.includes(e.type)&&(r=setTimeout(()=>{var l;(l=this.onTimeout)==null||l.call(this,"iframe_load_failed"),this.abortController.abort()},2e4)),await this.w3mFrame.frameLoadPromise,clearTimeout(r),[Pe.APP_CONNECT_EMAIL,Pe.APP_CONNECT_DEVICE,Pe.APP_CONNECT_OTP,Pe.APP_CONNECT_SOCIAL,Pe.APP_GET_SOCIAL_REDIRECT_URI].map(s).includes(a)&&(n=setTimeout(()=>{var l;(l=this.onTimeout)==null||l.call(this,"iframe_request_timeout"),this.abortController.abort()},12e4)),new Promise((l,u)=>{var p,g,m;const d=Math.random().toString(36).substring(7);(m=(p=this.w3mLogger)==null?void 0:(g=p.logger).info)==null||m.call(g,{event:e,id:d},"Sending app event"),this.w3mFrame.events.postAppEvent({...e,id:d});const h=new AbortController;if(a==="RPC_REQUEST"){const y=e;this.openRpcRequests=[...this.openRpcRequests,{...y.payload,abortController:h}]}h.signal.addEventListener("abort",()=>{a==="RPC_REQUEST"?u(new Error("Request was aborted")):a!=="GET_FARCASTER_URI"&&u(new Error("Something went wrong"))});function f(y,b){var w,x,A;y.id===d&&((x=b==null?void 0:(w=b.logger).info)==null||x.call(w,{framEvent:y,id:d},"Received frame response"),y.type===`@w3m-frame/${a}_SUCCESS`?(n&&clearTimeout(n),r&&clearTimeout(r),"payload"in y&&l(y.payload),l(void 0)):y.type===`@w3m-frame/${a}_ERROR`&&(n&&clearTimeout(n),r&&clearTimeout(r),"payload"in y&&u(new Error(((A=y.payload)==null?void 0:A.message)||"An error occurred")),u(new Error("An error occurred"))))}this.w3mFrame.events.registerFrameEventHandler(d,y=>f(y,this.w3mLogger),this.abortController.signal)})}setNewLastEmailLoginTime(){tr.set(Pe.LAST_EMAIL_LOGIN_TIME,Date.now().toString())}setSocialLoginSuccess(e){tr.set(Pe.SOCIAL_USERNAME,e)}setLoginSuccess(e){e&&tr.set(Pe.EMAIL,e),tr.set(Pe.EMAIL_LOGIN_USED_KEY,"true"),tr.delete(Pe.LAST_EMAIL_LOGIN_TIME)}deleteAuthLoginCache(){tr.delete(Pe.EMAIL_LOGIN_USED_KEY),tr.delete(Pe.EMAIL),tr.delete(Pe.LAST_USED_CHAIN_KEY),tr.delete(Pe.SOCIAL_USERNAME)}setLastUsedChainId(e){e&&tr.set(Pe.LAST_USED_CHAIN_KEY,String(e))}getLastUsedChainId(){const e=tr.get(Pe.LAST_USED_CHAIN_KEY)??void 0,n=Number(e);return isNaN(n)?e:n}persistSmartAccountEnabledNetworks(e){tr.set(Pe.SMART_ACCOUNT_ENABLED_NETWORKS,e.join(","))}getRpcUrl(e){var s,i;let n=e===void 0?void 0:"eip155";typeof e=="string"&&(e.includes(":")?n=(s=Wr.parseCaipNetworkId(e))==null?void 0:s.chainNamespace:Number.isInteger(Number(e))?n="eip155":n="solana");const r=this.getActiveCaipNetwork(n);return(i=r==null?void 0:r.rpcUrls.default.http)==null?void 0:i[0]}}class e0{constructor(){}static getInstance({projectId:e,chainId:n,enableLogger:r,onTimeout:s,abortController:i,getActiveCaipNetwork:a}){return e0.instance||(e0.instance=new n0e({projectId:e,chainId:n,enableLogger:r,onTimeout:s,abortController:i,getActiveCaipNetwork:a})),e0.instance}}var iR={};const r0e={ACCOUNT_TABS:[{label:"Tokens"},{label:"NFTs"},{label:"Activity"}],SECURE_SITE_ORIGIN:(typeof process<"u"&&typeof iR<"u"?iR.NEXT_PUBLIC_SECURE_SITE_ORIGIN:void 0)||"https://secure.walletconnect.org",VIEW_DIRECTION:{Next:"next",Prev:"prev"},DEFAULT_CONNECT_METHOD_ORDER:["email","social","wallet"],ANIMATION_DURATIONS:{HeaderText:120,ModalHeight:150,ViewTransition:150}},sT={filterOutDuplicatesByRDNS(t){const e=te.state.enableEIP6963?pe.state.connectors:[],n=le.getRecentWallets(),r=e.map(o=>{var l;return(l=o.info)==null?void 0:l.rdns}).filter(Boolean),s=n.map(o=>o.rdns).filter(Boolean),i=r.concat(s);if(i.includes("io.metamask.mobile")&&Ae.isMobile()){const o=i.indexOf("io.metamask.mobile");i[o]="io.metamask"}return t.filter(o=>!(o!=null&&o.rdns&&i.includes(String(o.rdns))||!(o!=null&&o.rdns)&&e.some(u=>u.name===o.name)))},filterOutDuplicatesByIds(t){const e=pe.state.connectors.filter(o=>o.type==="ANNOUNCED"||o.type==="INJECTED"),n=le.getRecentWallets(),r=e.map(o=>o.explorerId),s=n.map(o=>o.id),i=r.concat(s);return t.filter(o=>!i.includes(o==null?void 0:o.id))},filterOutDuplicateWallets(t){const e=this.filterOutDuplicatesByRDNS(t);return this.filterOutDuplicatesByIds(e)},markWalletsAsInstalled(t){const{connectors:e}=pe.state,{featuredWalletIds:n}=te.state,r=e.filter(a=>a.type==="ANNOUNCED").reduce((a,o)=>{var l;return(l=o.info)!=null&&l.rdns&&(a[o.info.rdns]=!0),a},{});return t.map(a=>({...a,installed:!!a.rdns&&!!r[a.rdns??""]})).sort((a,o)=>{const l=Number(o.installed)-Number(a.installed);if(l!==0)return l;if(n!=null&&n.length){const u=n.indexOf(a.id),d=n.indexOf(o.id);if(u!==-1&&d!==-1)return u-d;if(u!==-1)return-1;if(d!==-1)return 1}return 0})},getConnectOrderMethod(t,e){var l;const n=(t==null?void 0:t.connectMethodsOrder)||((l=te.state.features)==null?void 0:l.connectMethodsOrder),r=e||pe.state.connectors;if(n)return n;const{injected:s,announced:i}=fx.getConnectorsByType(r,Ue.state.recommended,Ue.state.featured),a=s.filter(fx.showConnector),o=i.filter(fx.showConnector);return a.length||o.length?["wallet","email","social"]:r0e.DEFAULT_CONNECT_METHOD_ORDER},isExcluded(t){const e=!!t.rdns&&Ue.state.excludedWallets.some(r=>r.rdns===t.rdns),n=!!t.name&&Ue.state.excludedWallets.some(r=>qn.isLowerCaseMatch(r.name,t.name));return e||n}},fx={getConnectorsByType(t,e,n){const{customWallets:r}=te.state,s=le.getRecentWallets(),i=sT.filterOutDuplicateWallets(e),a=sT.filterOutDuplicateWallets(n),o=t.filter(h=>h.type==="MULTI_CHAIN"),l=t.filter(h=>h.type==="ANNOUNCED"),u=t.filter(h=>h.type==="INJECTED"),d=t.filter(h=>h.type==="EXTERNAL");return{custom:r,recent:s,external:d,multiChain:o,announced:l,injected:u,recommended:i,featured:a}},showConnector(t){var s;const e=(s=t.info)==null?void 0:s.rdns,n=!!e&&Ue.state.excludedWallets.some(i=>!!i.rdns&&i.rdns===e),r=!!t.name&&Ue.state.excludedWallets.some(i=>qn.isLowerCaseMatch(i.name,t.name));return!(t.type==="INJECTED"&&(t.name==="Browser Wallet"&&(!Ae.isMobile()||Ae.isMobile()&&!e&&!me.checkInstalled())||n||r)||(t.type==="ANNOUNCED"||t.type==="EXTERNAL")&&(n||r))},getIsConnectedWithWC(){return Array.from(U.state.chains.values()).some(n=>pe.getConnectorId(n.namespace)===Y.CONNECTOR_ID.WALLET_CONNECT)},getConnectorTypeOrder({recommended:t,featured:e,custom:n,recent:r,announced:s,injected:i,multiChain:a,external:o,overriddenConnectors:l=(u=>(u=te.state.features)==null?void 0:u.connectorTypeOrder)()??[]}){const f=[{type:"walletConnect",isEnabled:te.state.enableWalletConnect},{type:"recent",isEnabled:r.length>0},{type:"injected",isEnabled:[...i,...s,...a].length>0},{type:"featured",isEnabled:e.length>0},{type:"custom",isEnabled:n&&n.length>0},{type:"external",isEnabled:o.length>0},{type:"recommended",isEnabled:t.length>0}].filter(y=>y.isEnabled),p=new Set(f.map(y=>y.type)),g=l.filter(y=>p.has(y)).map(y=>({type:y,isEnabled:!0})),m=f.filter(({type:y})=>!g.some(({type:w})=>w===y));return Array.from(new Set([...g,...m].map(({type:y})=>y)))},getAuthName({email:t,socialUsername:e,socialProvider:n}){return e?n&&n==="discord"&&e.endsWith("0")?e.slice(0,-1):e:t.length>30?`${t.slice(0,-3)}...`:t},async fetchProviderData(t){var e,n;try{if(t.name==="Browser Wallet"&&!Ae.isMobile())return{accounts:[],chainId:void 0};if(t.id===Y.CONNECTOR_ID.AUTH)return{accounts:[],chainId:void 0};const[r,s]=await Promise.all([(e=t.provider)==null?void 0:e.request({method:"eth_accounts"}),(n=t.provider)==null?void 0:n.request({method:"eth_chainId"}).then(i=>Number(i))]);return{accounts:r,chainId:s}}catch(r){return console.warn(`Failed to fetch provider data for ${t.name}`,r),{accounts:[],chainId:void 0}}}};/**
 * @license
 * Copyright 2019 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const px=globalThis,RS=px.ShadowRoot&&(px.ShadyCSS===void 0||px.ShadyCSS.nativeShadow)&&"adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype,jS=Symbol(),aR=new WeakMap;let yB=class{constructor(e,n,r){if(this._$cssResult$=!0,r!==jS)throw Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");this.cssText=e,this.t=n}get styleSheet(){let e=this.o;const n=this.t;if(RS&&e===void 0){const r=n!==void 0&&n.length===1;r&&(e=aR.get(n)),e===void 0&&((this.o=e=new CSSStyleSheet).replaceSync(this.cssText),r&&aR.set(n,e))}return e}toString(){return this.cssText}};const di=t=>new yB(typeof t=="string"?t:t+"",void 0,jS),Of=(t,...e)=>{const n=t.length===1?t[0]:e.reduce((r,s,i)=>r+(a=>{if(a._$cssResult$===!0)return a.cssText;if(typeof a=="number")return a;throw Error("Value passed to 'css' function must be a 'css' function result: "+a+". Use 'unsafeCSS' to pass non-literal values, but take care to ensure page security.")})(s)+t[i+1],t[0]);return new yB(n,t,jS)},s0e=(t,e)=>{if(RS)t.adoptedStyleSheets=e.map(n=>n instanceof CSSStyleSheet?n:n.styleSheet);else for(const n of e){const r=document.createElement("style"),s=px.litNonce;s!==void 0&&r.setAttribute("nonce",s),r.textContent=n.cssText,t.appendChild(r)}},oR=RS?t=>t:t=>t instanceof CSSStyleSheet?(e=>{let n="";for(const r of e.cssRules)n+=r.cssText;return di(n)})(t):t;/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const{is:i0e,defineProperty:a0e,getOwnPropertyDescriptor:o0e,getOwnPropertyNames:c0e,getOwnPropertySymbols:l0e,getPrototypeOf:u0e}=Object,Ll=globalThis,cR=Ll.trustedTypes,d0e=cR?cR.emptyScript:"",dN=Ll.reactiveElementPolyfillSupport,t0=(t,e)=>t,iT={toAttribute(t,e){switch(e){case Boolean:t=t?d0e:null;break;case Object:case Array:t=t==null?t:JSON.stringify(t)}return t},fromAttribute(t,e){let n=t;switch(e){case Boolean:n=t!==null;break;case Number:n=t===null?null:Number(t);break;case Object:case Array:try{n=JSON.parse(t)}catch{n=null}}return n}},wB=(t,e)=>!i0e(t,e),lR={attribute:!0,type:String,converter:iT,reflect:!1,useDefault:!1,hasChanged:wB};Symbol.metadata??(Symbol.metadata=Symbol("metadata")),Ll.litPropertyMetadata??(Ll.litPropertyMetadata=new WeakMap);let Jh=class extends HTMLElement{static addInitializer(e){this._$Ei(),(this.l??(this.l=[])).push(e)}static get observedAttributes(){return this.finalize(),this._$Eh&&[...this._$Eh.keys()]}static createProperty(e,n=lR){if(n.state&&(n.attribute=!1),this._$Ei(),this.prototype.hasOwnProperty(e)&&((n=Object.create(n)).wrapped=!0),this.elementProperties.set(e,n),!n.noAccessor){const r=Symbol(),s=this.getPropertyDescriptor(e,r,n);s!==void 0&&a0e(this.prototype,e,s)}}static getPropertyDescriptor(e,n,r){const{get:s,set:i}=o0e(this.prototype,e)??{get(){return this[n]},set(a){this[n]=a}};return{get:s,set(a){const o=s==null?void 0:s.call(this);i==null||i.call(this,a),this.requestUpdate(e,o,r)},configurable:!0,enumerable:!0}}static getPropertyOptions(e){return this.elementProperties.get(e)??lR}static _$Ei(){if(this.hasOwnProperty(t0("elementProperties")))return;const e=u0e(this);e.finalize(),e.l!==void 0&&(this.l=[...e.l]),this.elementProperties=new Map(e.elementProperties)}static finalize(){if(this.hasOwnProperty(t0("finalized")))return;if(this.finalized=!0,this._$Ei(),this.hasOwnProperty(t0("properties"))){const n=this.properties,r=[...c0e(n),...l0e(n)];for(const s of r)this.createProperty(s,n[s])}const e=this[Symbol.metadata];if(e!==null){const n=litPropertyMetadata.get(e);if(n!==void 0)for(const[r,s]of n)this.elementProperties.set(r,s)}this._$Eh=new Map;for(const[n,r]of this.elementProperties){const s=this._$Eu(n,r);s!==void 0&&this._$Eh.set(s,n)}this.elementStyles=this.finalizeStyles(this.styles)}static finalizeStyles(e){const n=[];if(Array.isArray(e)){const r=new Set(e.flat(1/0).reverse());for(const s of r)n.unshift(oR(s))}else e!==void 0&&n.push(oR(e));return n}static _$Eu(e,n){const r=n.attribute;return r===!1?void 0:typeof r=="string"?r:typeof e=="string"?e.toLowerCase():void 0}constructor(){super(),this._$Ep=void 0,this.isUpdatePending=!1,this.hasUpdated=!1,this._$Em=null,this._$Ev()}_$Ev(){var e;this._$ES=new Promise(n=>this.enableUpdating=n),this._$AL=new Map,this._$E_(),this.requestUpdate(),(e=this.constructor.l)==null||e.forEach(n=>n(this))}addController(e){var n;(this._$EO??(this._$EO=new Set)).add(e),this.renderRoot!==void 0&&this.isConnected&&((n=e.hostConnected)==null||n.call(e))}removeController(e){var n;(n=this._$EO)==null||n.delete(e)}_$E_(){const e=new Map,n=this.constructor.elementProperties;for(const r of n.keys())this.hasOwnProperty(r)&&(e.set(r,this[r]),delete this[r]);e.size>0&&(this._$Ep=e)}createRenderRoot(){const e=this.shadowRoot??this.attachShadow(this.constructor.shadowRootOptions);return s0e(e,this.constructor.elementStyles),e}connectedCallback(){var e;this.renderRoot??(this.renderRoot=this.createRenderRoot()),this.enableUpdating(!0),(e=this._$EO)==null||e.forEach(n=>{var r;return(r=n.hostConnected)==null?void 0:r.call(n)})}enableUpdating(e){}disconnectedCallback(){var e;(e=this._$EO)==null||e.forEach(n=>{var r;return(r=n.hostDisconnected)==null?void 0:r.call(n)})}attributeChangedCallback(e,n,r){this._$AK(e,r)}_$ET(e,n){var i;const r=this.constructor.elementProperties.get(e),s=this.constructor._$Eu(e,r);if(s!==void 0&&r.reflect===!0){const a=(((i=r.converter)==null?void 0:i.toAttribute)!==void 0?r.converter:iT).toAttribute(n,r.type);this._$Em=e,a==null?this.removeAttribute(s):this.setAttribute(s,a),this._$Em=null}}_$AK(e,n){var i,a;const r=this.constructor,s=r._$Eh.get(e);if(s!==void 0&&this._$Em!==s){const o=r.getPropertyOptions(s),l=typeof o.converter=="function"?{fromAttribute:o.converter}:((i=o.converter)==null?void 0:i.fromAttribute)!==void 0?o.converter:iT;this._$Em=s,this[s]=l.fromAttribute(n,o.type)??((a=this._$Ej)==null?void 0:a.get(s))??null,this._$Em=null}}requestUpdate(e,n,r){var s;if(e!==void 0){const i=this.constructor,a=this[e];if(r??(r=i.getPropertyOptions(e)),!((r.hasChanged??wB)(a,n)||r.useDefault&&r.reflect&&a===((s=this._$Ej)==null?void 0:s.get(e))&&!this.hasAttribute(i._$Eu(e,r))))return;this.C(e,n,r)}this.isUpdatePending===!1&&(this._$ES=this._$EP())}C(e,n,{useDefault:r,reflect:s,wrapped:i},a){r&&!(this._$Ej??(this._$Ej=new Map)).has(e)&&(this._$Ej.set(e,a??n??this[e]),i!==!0||a!==void 0)||(this._$AL.has(e)||(this.hasUpdated||r||(n=void 0),this._$AL.set(e,n)),s===!0&&this._$Em!==e&&(this._$Eq??(this._$Eq=new Set)).add(e))}async _$EP(){this.isUpdatePending=!0;try{await this._$ES}catch(n){Promise.reject(n)}const e=this.scheduleUpdate();return e!=null&&await e,!this.isUpdatePending}scheduleUpdate(){return this.performUpdate()}performUpdate(){var r;if(!this.isUpdatePending)return;if(!this.hasUpdated){if(this.renderRoot??(this.renderRoot=this.createRenderRoot()),this._$Ep){for(const[i,a]of this._$Ep)this[i]=a;this._$Ep=void 0}const s=this.constructor.elementProperties;if(s.size>0)for(const[i,a]of s){const{wrapped:o}=a,l=this[i];o!==!0||this._$AL.has(i)||l===void 0||this.C(i,void 0,a,l)}}let e=!1;const n=this._$AL;try{e=this.shouldUpdate(n),e?(this.willUpdate(n),(r=this._$EO)==null||r.forEach(s=>{var i;return(i=s.hostUpdate)==null?void 0:i.call(s)}),this.update(n)):this._$EM()}catch(s){throw e=!1,this._$EM(),s}e&&this._$AE(n)}willUpdate(e){}_$AE(e){var n;(n=this._$EO)==null||n.forEach(r=>{var s;return(s=r.hostUpdated)==null?void 0:s.call(r)}),this.hasUpdated||(this.hasUpdated=!0,this.firstUpdated(e)),this.updated(e)}_$EM(){this._$AL=new Map,this.isUpdatePending=!1}get updateComplete(){return this.getUpdateComplete()}getUpdateComplete(){return this._$ES}shouldUpdate(e){return!0}update(e){this._$Eq&&(this._$Eq=this._$Eq.forEach(n=>this._$ET(n,this[n]))),this._$EM()}updated(e){}firstUpdated(e){}};Jh.elementStyles=[],Jh.shadowRootOptions={mode:"open"},Jh[t0("elementProperties")]=new Map,Jh[t0("finalized")]=new Map,dN==null||dN({ReactiveElement:Jh}),(Ll.reactiveElementVersions??(Ll.reactiveElementVersions=[])).push("2.1.0");/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const n0=globalThis,$v=n0.trustedTypes,uR=$v?$v.createPolicy("lit-html",{createHTML:t=>t}):void 0,bB="$lit$",el=`lit$${Math.random().toFixed(9).slice(2)}$`,xB="?"+el,h0e=`<${xB}>`,Yd=document,Ey=()=>Yd.createComment(""),Ny=t=>t===null||typeof t!="object"&&typeof t!="function",OS=Array.isArray,f0e=t=>OS(t)||typeof(t==null?void 0:t[Symbol.iterator])=="function",hN=`[ 	
\f\r]`,sg=/<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g,dR=/-->/g,hR=/>/g,pu=RegExp(`>|${hN}(?:([^\\s"'>=/]+)(${hN}*=${hN}*(?:[^ 	
\f\r"'\`<>=]|("|')|))|$)`,"g"),fR=/'/g,pR=/"/g,vB=/^(?:script|style|textarea|title)$/i,EB=t=>(e,...n)=>({_$litType$:t,strings:e,values:n}),O2e=EB(1),D2e=EB(2),Zp=Symbol.for("lit-noChange"),Wn=Symbol.for("lit-nothing"),mR=new WeakMap,qu=Yd.createTreeWalker(Yd,129);function NB(t,e){if(!OS(t)||!t.hasOwnProperty("raw"))throw Error("invalid template strings array");return uR!==void 0?uR.createHTML(e):e}const p0e=(t,e)=>{const n=t.length-1,r=[];let s,i=e===2?"<svg>":e===3?"<math>":"",a=sg;for(let o=0;o<n;o++){const l=t[o];let u,d,h=-1,f=0;for(;f<l.length&&(a.lastIndex=f,d=a.exec(l),d!==null);)f=a.lastIndex,a===sg?d[1]==="!--"?a=dR:d[1]!==void 0?a=hR:d[2]!==void 0?(vB.test(d[2])&&(s=RegExp("</"+d[2],"g")),a=pu):d[3]!==void 0&&(a=pu):a===pu?d[0]===">"?(a=s??sg,h=-1):d[1]===void 0?h=-2:(h=a.lastIndex-d[2].length,u=d[1],a=d[3]===void 0?pu:d[3]==='"'?pR:fR):a===pR||a===fR?a=pu:a===dR||a===hR?a=sg:(a=pu,s=void 0);const p=a===pu&&t[o+1].startsWith("/>")?" ":"";i+=a===sg?l+h0e:h>=0?(r.push(u),l.slice(0,h)+bB+l.slice(h)+el+p):l+el+(h===-2?o:p)}return[NB(t,i+(t[n]||"<?>")+(e===2?"</svg>":e===3?"</math>":"")),r]};let aT=class CB{constructor({strings:e,_$litType$:n},r){let s;this.parts=[];let i=0,a=0;const o=e.length-1,l=this.parts,[u,d]=p0e(e,n);if(this.el=CB.createElement(u,r),qu.currentNode=this.el.content,n===2||n===3){const h=this.el.content.firstChild;h.replaceWith(...h.childNodes)}for(;(s=qu.nextNode())!==null&&l.length<o;){if(s.nodeType===1){if(s.hasAttributes())for(const h of s.getAttributeNames())if(h.endsWith(bB)){const f=d[a++],p=s.getAttribute(h).split(el),g=/([.?@])?(.*)/.exec(f);l.push({type:1,index:i,name:g[2],strings:p,ctor:g[1]==="."?g0e:g[1]==="?"?y0e:g[1]==="@"?w0e:sE}),s.removeAttribute(h)}else h.startsWith(el)&&(l.push({type:6,index:i}),s.removeAttribute(h));if(vB.test(s.tagName)){const h=s.textContent.split(el),f=h.length-1;if(f>0){s.textContent=$v?$v.emptyScript:"";for(let p=0;p<f;p++)s.append(h[p],Ey()),qu.nextNode(),l.push({type:2,index:++i});s.append(h[f],Ey())}}}else if(s.nodeType===8)if(s.data===xB)l.push({type:2,index:i});else{let h=-1;for(;(h=s.data.indexOf(el,h+1))!==-1;)l.push({type:7,index:i}),h+=el.length-1}i++}}static createElement(e,n){const r=Yd.createElement("template");return r.innerHTML=e,r}};function Xp(t,e,n=t,r){var a,o;if(e===Zp)return e;let s=r!==void 0?(a=n._$Co)==null?void 0:a[r]:n._$Cl;const i=Ny(e)?void 0:e._$litDirective$;return(s==null?void 0:s.constructor)!==i&&((o=s==null?void 0:s._$AO)==null||o.call(s,!1),i===void 0?s=void 0:(s=new i(t),s._$AT(t,n,r)),r!==void 0?(n._$Co??(n._$Co=[]))[r]=s:n._$Cl=s),s!==void 0&&(e=Xp(t,s._$AS(t,e.values),s,r)),e}let m0e=class{constructor(e,n){this._$AV=[],this._$AN=void 0,this._$AD=e,this._$AM=n}get parentNode(){return this._$AM.parentNode}get _$AU(){return this._$AM._$AU}u(e){const{el:{content:n},parts:r}=this._$AD,s=((e==null?void 0:e.creationScope)??Yd).importNode(n,!0);qu.currentNode=s;let i=qu.nextNode(),a=0,o=0,l=r[0];for(;l!==void 0;){if(a===l.index){let u;l.type===2?u=new DS(i,i.nextSibling,this,e):l.type===1?u=new l.ctor(i,l.name,l.strings,this,e):l.type===6&&(u=new b0e(i,this,e)),this._$AV.push(u),l=r[++o]}a!==(l==null?void 0:l.index)&&(i=qu.nextNode(),a++)}return qu.currentNode=Yd,s}p(e){let n=0;for(const r of this._$AV)r!==void 0&&(r.strings!==void 0?(r._$AI(e,r,n),n+=r.strings.length-2):r._$AI(e[n])),n++}},DS=class AB{get _$AU(){var e;return((e=this._$AM)==null?void 0:e._$AU)??this._$Cv}constructor(e,n,r,s){this.type=2,this._$AH=Wn,this._$AN=void 0,this._$AA=e,this._$AB=n,this._$AM=r,this.options=s,this._$Cv=(s==null?void 0:s.isConnected)??!0}get parentNode(){let e=this._$AA.parentNode;const n=this._$AM;return n!==void 0&&(e==null?void 0:e.nodeType)===11&&(e=n.parentNode),e}get startNode(){return this._$AA}get endNode(){return this._$AB}_$AI(e,n=this){e=Xp(this,e,n),Ny(e)?e===Wn||e==null||e===""?(this._$AH!==Wn&&this._$AR(),this._$AH=Wn):e!==this._$AH&&e!==Zp&&this._(e):e._$litType$!==void 0?this.$(e):e.nodeType!==void 0?this.T(e):f0e(e)?this.k(e):this._(e)}O(e){return this._$AA.parentNode.insertBefore(e,this._$AB)}T(e){this._$AH!==e&&(this._$AR(),this._$AH=this.O(e))}_(e){this._$AH!==Wn&&Ny(this._$AH)?this._$AA.nextSibling.data=e:this.T(Yd.createTextNode(e)),this._$AH=e}$(e){var i;const{values:n,_$litType$:r}=e,s=typeof r=="number"?this._$AC(e):(r.el===void 0&&(r.el=aT.createElement(NB(r.h,r.h[0]),this.options)),r);if(((i=this._$AH)==null?void 0:i._$AD)===s)this._$AH.p(n);else{const a=new m0e(s,this),o=a.u(this.options);a.p(n),this.T(o),this._$AH=a}}_$AC(e){let n=mR.get(e.strings);return n===void 0&&mR.set(e.strings,n=new aT(e)),n}k(e){OS(this._$AH)||(this._$AH=[],this._$AR());const n=this._$AH;let r,s=0;for(const i of e)s===n.length?n.push(r=new AB(this.O(Ey()),this.O(Ey()),this,this.options)):r=n[s],r._$AI(i),s++;s<n.length&&(this._$AR(r&&r._$AB.nextSibling,s),n.length=s)}_$AR(e=this._$AA.nextSibling,n){var r;for((r=this._$AP)==null?void 0:r.call(this,!1,!0,n);e&&e!==this._$AB;){const s=e.nextSibling;e.remove(),e=s}}setConnected(e){var n;this._$AM===void 0&&(this._$Cv=e,(n=this._$AP)==null||n.call(this,e))}},sE=class{get tagName(){return this.element.tagName}get _$AU(){return this._$AM._$AU}constructor(e,n,r,s,i){this.type=1,this._$AH=Wn,this._$AN=void 0,this.element=e,this.name=n,this._$AM=s,this.options=i,r.length>2||r[0]!==""||r[1]!==""?(this._$AH=Array(r.length-1).fill(new String),this.strings=r):this._$AH=Wn}_$AI(e,n=this,r,s){const i=this.strings;let a=!1;if(i===void 0)e=Xp(this,e,n,0),a=!Ny(e)||e!==this._$AH&&e!==Zp,a&&(this._$AH=e);else{const o=e;let l,u;for(e=i[0],l=0;l<i.length-1;l++)u=Xp(this,o[r+l],n,l),u===Zp&&(u=this._$AH[l]),a||(a=!Ny(u)||u!==this._$AH[l]),u===Wn?e=Wn:e!==Wn&&(e+=(u??"")+i[l+1]),this._$AH[l]=u}a&&!s&&this.j(e)}j(e){e===Wn?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,e??"")}},g0e=class extends sE{constructor(){super(...arguments),this.type=3}j(e){this.element[this.name]=e===Wn?void 0:e}},y0e=class extends sE{constructor(){super(...arguments),this.type=4}j(e){this.element.toggleAttribute(this.name,!!e&&e!==Wn)}};class w0e extends sE{constructor(e,n,r,s,i){super(e,n,r,s,i),this.type=5}_$AI(e,n=this){if((e=Xp(this,e,n,0)??Wn)===Zp)return;const r=this._$AH,s=e===Wn&&r!==Wn||e.capture!==r.capture||e.once!==r.once||e.passive!==r.passive,i=e!==Wn&&(r===Wn||s);s&&this.element.removeEventListener(this.name,this,r),i&&this.element.addEventListener(this.name,this,e),this._$AH=e}handleEvent(e){var n;typeof this._$AH=="function"?this._$AH.call(((n=this.options)==null?void 0:n.host)??this.element,e):this._$AH.handleEvent(e)}}let b0e=class{constructor(e,n,r){this.element=e,this.type=6,this._$AN=void 0,this._$AM=n,this.options=r}get _$AU(){return this._$AM._$AU}_$AI(e){Xp(this,e)}};const fN=n0.litHtmlPolyfillSupport;fN==null||fN(aT,DS),(n0.litHtmlVersions??(n0.litHtmlVersions=[])).push("3.3.0");const x0e=(t,e,n)=>{const r=(n==null?void 0:n.renderBefore)??e;let s=r._$litPart$;if(s===void 0){const i=(n==null?void 0:n.renderBefore)??null;r._$litPart$=s=new DS(e.insertBefore(Ey(),i),i,void 0,n??{})}return s._$AI(t),s};/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const Cd=globalThis;let mx=class extends Jh{constructor(){super(...arguments),this.renderOptions={host:this},this._$Do=void 0}createRenderRoot(){var n;const e=super.createRenderRoot();return(n=this.renderOptions).renderBefore??(n.renderBefore=e.firstChild),e}update(e){const n=this.render();this.hasUpdated||(this.renderOptions.isConnected=this.isConnected),super.update(e),this._$Do=x0e(n,this.renderRoot,this.renderOptions)}connectedCallback(){var e;super.connectedCallback(),(e=this._$Do)==null||e.setConnected(!0)}disconnectedCallback(){var e;super.disconnectedCallback(),(e=this._$Do)==null||e.setConnected(!1)}render(){return Zp}};var n4;mx._$litElement$=!0,mx.finalized=!0,(n4=Cd.litElementHydrateSupport)==null||n4.call(Cd,{LitElement:mx});const pN=Cd.litElementPolyfillSupport;pN==null||pN({LitElement:mx});(Cd.litElementVersions??(Cd.litElementVersions=[])).push("4.2.0");let r0,Bl,$l;function H2e(t,e){r0=document.createElement("style"),Bl=document.createElement("style"),$l=document.createElement("style"),r0.textContent=Df(t).core.cssText,Bl.textContent=Df(t).dark.cssText,$l.textContent=Df(t).light.cssText,document.head.appendChild(r0),document.head.appendChild(Bl),document.head.appendChild($l),TB(e)}function TB(t){Bl&&$l&&(t==="light"?(Bl.removeAttribute("media"),$l.media="enabled"):($l.removeAttribute("media"),Bl.media="enabled"))}function v0e(t){r0&&Bl&&$l&&(r0.textContent=Df(t).core.cssText,Bl.textContent=Df(t).dark.cssText,$l.textContent=Df(t).light.cssText)}function Df(t){return{core:Of`
      @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap');
      @keyframes w3m-shake {
        0% {
          transform: scale(1) rotate(0deg);
        }
        20% {
          transform: scale(1) rotate(-1deg);
        }
        40% {
          transform: scale(1) rotate(1.5deg);
        }
        60% {
          transform: scale(1) rotate(-1.5deg);
        }
        80% {
          transform: scale(1) rotate(1deg);
        }
        100% {
          transform: scale(1) rotate(0deg);
        }
      }
      @keyframes w3m-iframe-fade-out {
        0% {
          opacity: 1;
        }
        100% {
          opacity: 0;
        }
      }
      @keyframes w3m-iframe-zoom-in {
        0% {
          transform: translateY(50px);
          opacity: 0;
        }
        100% {
          transform: translateY(0px);
          opacity: 1;
        }
      }
      @keyframes w3m-iframe-zoom-in-mobile {
        0% {
          transform: scale(0.95);
          opacity: 0;
        }
        100% {
          transform: scale(1);
          opacity: 1;
        }
      }
      :root {
        --w3m-modal-width: 360px;
        --w3m-color-mix-strength: ${di(t!=null&&t["--w3m-color-mix-strength"]?`${t["--w3m-color-mix-strength"]}%`:"0%")};
        --w3m-font-family: ${di((t==null?void 0:t["--w3m-font-family"])||"Inter, Segoe UI, Roboto, Oxygen, Ubuntu, Cantarell, Fira Sans, Droid Sans, Helvetica Neue, sans-serif;")};
        --w3m-font-size-master: ${di((t==null?void 0:t["--w3m-font-size-master"])||"10px")};
        --w3m-border-radius-master: ${di((t==null?void 0:t["--w3m-border-radius-master"])||"4px")};
        --w3m-z-index: ${di((t==null?void 0:t["--w3m-z-index"])||999)};

        --wui-font-family: var(--w3m-font-family);

        --wui-font-size-mini: calc(var(--w3m-font-size-master) * 0.8);
        --wui-font-size-micro: var(--w3m-font-size-master);
        --wui-font-size-tiny: calc(var(--w3m-font-size-master) * 1.2);
        --wui-font-size-small: calc(var(--w3m-font-size-master) * 1.4);
        --wui-font-size-paragraph: calc(var(--w3m-font-size-master) * 1.6);
        --wui-font-size-medium: calc(var(--w3m-font-size-master) * 1.8);
        --wui-font-size-large: calc(var(--w3m-font-size-master) * 2);
        --wui-font-size-title-6: calc(var(--w3m-font-size-master) * 2.2);
        --wui-font-size-medium-title: calc(var(--w3m-font-size-master) * 2.4);
        --wui-font-size-2xl: calc(var(--w3m-font-size-master) * 4);

        --wui-border-radius-5xs: var(--w3m-border-radius-master);
        --wui-border-radius-4xs: calc(var(--w3m-border-radius-master) * 1.5);
        --wui-border-radius-3xs: calc(var(--w3m-border-radius-master) * 2);
        --wui-border-radius-xxs: calc(var(--w3m-border-radius-master) * 3);
        --wui-border-radius-xs: calc(var(--w3m-border-radius-master) * 4);
        --wui-border-radius-s: calc(var(--w3m-border-radius-master) * 5);
        --wui-border-radius-m: calc(var(--w3m-border-radius-master) * 7);
        --wui-border-radius-l: calc(var(--w3m-border-radius-master) * 9);
        --wui-border-radius-3xl: calc(var(--w3m-border-radius-master) * 20);

        --wui-font-weight-light: 400;
        --wui-font-weight-regular: 500;
        --wui-font-weight-medium: 600;
        --wui-font-weight-bold: 700;

        --wui-letter-spacing-2xl: -1.6px;
        --wui-letter-spacing-medium-title: -0.96px;
        --wui-letter-spacing-title-6: -0.88px;
        --wui-letter-spacing-large: -0.8px;
        --wui-letter-spacing-medium: -0.72px;
        --wui-letter-spacing-paragraph: -0.64px;
        --wui-letter-spacing-small: -0.56px;
        --wui-letter-spacing-tiny: -0.48px;
        --wui-letter-spacing-micro: -0.2px;
        --wui-letter-spacing-mini: -0.16px;

        --wui-spacing-0: 0px;
        --wui-spacing-4xs: 2px;
        --wui-spacing-3xs: 4px;
        --wui-spacing-xxs: 6px;
        --wui-spacing-2xs: 7px;
        --wui-spacing-xs: 8px;
        --wui-spacing-1xs: 10px;
        --wui-spacing-s: 12px;
        --wui-spacing-m: 14px;
        --wui-spacing-l: 16px;
        --wui-spacing-2l: 18px;
        --wui-spacing-xl: 20px;
        --wui-spacing-xxl: 24px;
        --wui-spacing-2xl: 32px;
        --wui-spacing-3xl: 40px;
        --wui-spacing-4xl: 90px;
        --wui-spacing-5xl: 95px;

        --wui-icon-box-size-xxs: 14px;
        --wui-icon-box-size-xs: 20px;
        --wui-icon-box-size-sm: 24px;
        --wui-icon-box-size-md: 32px;
        --wui-icon-box-size-mdl: 36px;
        --wui-icon-box-size-lg: 40px;
        --wui-icon-box-size-2lg: 48px;
        --wui-icon-box-size-xl: 64px;

        --wui-icon-size-inherit: inherit;
        --wui-icon-size-xxs: 10px;
        --wui-icon-size-xs: 12px;
        --wui-icon-size-sm: 14px;
        --wui-icon-size-md: 16px;
        --wui-icon-size-mdl: 18px;
        --wui-icon-size-lg: 20px;
        --wui-icon-size-xl: 24px;
        --wui-icon-size-xxl: 28px;

        --wui-wallet-image-size-inherit: inherit;
        --wui-wallet-image-size-sm: 40px;
        --wui-wallet-image-size-md: 56px;
        --wui-wallet-image-size-lg: 80px;

        --wui-visual-size-size-inherit: inherit;
        --wui-visual-size-sm: 40px;
        --wui-visual-size-md: 55px;
        --wui-visual-size-lg: 80px;

        --wui-box-size-md: 100px;
        --wui-box-size-lg: 120px;

        --wui-ease-out-power-2: cubic-bezier(0, 0, 0.22, 1);
        --wui-ease-out-power-1: cubic-bezier(0, 0, 0.55, 1);

        --wui-ease-in-power-3: cubic-bezier(0.66, 0, 1, 1);
        --wui-ease-in-power-2: cubic-bezier(0.45, 0, 1, 1);
        --wui-ease-in-power-1: cubic-bezier(0.3, 0, 1, 1);

        --wui-ease-inout-power-1: cubic-bezier(0.45, 0, 0.55, 1);

        --wui-duration-lg: 200ms;
        --wui-duration-md: 125ms;
        --wui-duration-sm: 75ms;

        --wui-path-network-sm: path(
          'M15.4 2.1a5.21 5.21 0 0 1 5.2 0l11.61 6.7a5.21 5.21 0 0 1 2.61 4.52v13.4c0 1.87-1 3.59-2.6 4.52l-11.61 6.7c-1.62.93-3.6.93-5.22 0l-11.6-6.7a5.21 5.21 0 0 1-2.61-4.51v-13.4c0-1.87 1-3.6 2.6-4.52L15.4 2.1Z'
        );

        --wui-path-network-md: path(
          'M43.4605 10.7248L28.0485 1.61089C25.5438 0.129705 22.4562 0.129705 19.9515 1.61088L4.53951 10.7248C2.03626 12.2051 0.5 14.9365 0.5 17.886V36.1139C0.5 39.0635 2.03626 41.7949 4.53951 43.2752L19.9515 52.3891C22.4562 53.8703 25.5438 53.8703 28.0485 52.3891L43.4605 43.2752C45.9637 41.7949 47.5 39.0635 47.5 36.114V17.8861C47.5 14.9365 45.9637 12.2051 43.4605 10.7248Z'
        );

        --wui-path-network-lg: path(
          'M78.3244 18.926L50.1808 2.45078C45.7376 -0.150261 40.2624 -0.150262 35.8192 2.45078L7.6756 18.926C3.23322 21.5266 0.5 26.3301 0.5 31.5248V64.4752C0.5 69.6699 3.23322 74.4734 7.6756 77.074L35.8192 93.5492C40.2624 96.1503 45.7376 96.1503 50.1808 93.5492L78.3244 77.074C82.7668 74.4734 85.5 69.6699 85.5 64.4752V31.5248C85.5 26.3301 82.7668 21.5266 78.3244 18.926Z'
        );

        --wui-width-network-sm: 36px;
        --wui-width-network-md: 48px;
        --wui-width-network-lg: 86px;

        --wui-height-network-sm: 40px;
        --wui-height-network-md: 54px;
        --wui-height-network-lg: 96px;

        --wui-icon-size-network-xs: 12px;
        --wui-icon-size-network-sm: 16px;
        --wui-icon-size-network-md: 24px;
        --wui-icon-size-network-lg: 42px;

        --wui-color-inherit: inherit;

        --wui-color-inverse-100: #fff;
        --wui-color-inverse-000: #000;

        --wui-cover: rgba(20, 20, 20, 0.8);

        --wui-color-modal-bg: var(--wui-color-modal-bg-base);

        --wui-color-accent-100: var(--wui-color-accent-base-100);
        --wui-color-accent-090: var(--wui-color-accent-base-090);
        --wui-color-accent-080: var(--wui-color-accent-base-080);

        --wui-color-success-100: var(--wui-color-success-base-100);
        --wui-color-success-125: var(--wui-color-success-base-125);

        --wui-color-warning-100: var(--wui-color-warning-base-100);

        --wui-color-error-100: var(--wui-color-error-base-100);
        --wui-color-error-125: var(--wui-color-error-base-125);

        --wui-color-blue-100: var(--wui-color-blue-base-100);
        --wui-color-blue-90: var(--wui-color-blue-base-90);

        --wui-icon-box-bg-error-100: var(--wui-icon-box-bg-error-base-100);
        --wui-icon-box-bg-blue-100: var(--wui-icon-box-bg-blue-base-100);
        --wui-icon-box-bg-success-100: var(--wui-icon-box-bg-success-base-100);
        --wui-icon-box-bg-inverse-100: var(--wui-icon-box-bg-inverse-base-100);

        --wui-all-wallets-bg-100: var(--wui-all-wallets-bg-100);

        --wui-avatar-border: var(--wui-avatar-border-base);

        --wui-thumbnail-border: var(--wui-thumbnail-border-base);

        --wui-wallet-button-bg: var(--wui-wallet-button-bg-base);

        --wui-box-shadow-blue: var(--wui-color-accent-glass-020);
      }

      @supports (background: color-mix(in srgb, white 50%, black)) {
        :root {
          --wui-color-modal-bg: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-modal-bg-base)
          );

          --wui-box-shadow-blue: color-mix(in srgb, var(--wui-color-accent-100) 20%, transparent);

          --wui-color-accent-100: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 100%,
            transparent
          );
          --wui-color-accent-090: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 90%,
            transparent
          );
          --wui-color-accent-080: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 80%,
            transparent
          );
          --wui-color-accent-glass-090: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 90%,
            transparent
          );
          --wui-color-accent-glass-080: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 80%,
            transparent
          );
          --wui-color-accent-glass-020: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 20%,
            transparent
          );
          --wui-color-accent-glass-015: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 15%,
            transparent
          );
          --wui-color-accent-glass-010: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 10%,
            transparent
          );
          --wui-color-accent-glass-005: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 5%,
            transparent
          );
          --wui-color-accent-002: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 2%,
            transparent
          );

          --wui-color-fg-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-100)
          );
          --wui-color-fg-125: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-125)
          );
          --wui-color-fg-150: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-150)
          );
          --wui-color-fg-175: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-175)
          );
          --wui-color-fg-200: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-200)
          );
          --wui-color-fg-225: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-225)
          );
          --wui-color-fg-250: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-250)
          );
          --wui-color-fg-275: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-275)
          );
          --wui-color-fg-300: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-300)
          );
          --wui-color-fg-325: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-325)
          );
          --wui-color-fg-350: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-350)
          );

          --wui-color-bg-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-100)
          );
          --wui-color-bg-125: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-125)
          );
          --wui-color-bg-150: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-150)
          );
          --wui-color-bg-175: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-175)
          );
          --wui-color-bg-200: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-200)
          );
          --wui-color-bg-225: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-225)
          );
          --wui-color-bg-250: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-250)
          );
          --wui-color-bg-275: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-275)
          );
          --wui-color-bg-300: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-300)
          );
          --wui-color-bg-325: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-325)
          );
          --wui-color-bg-350: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-350)
          );

          --wui-color-success-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-success-base-100)
          );
          --wui-color-success-125: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-success-base-125)
          );

          --wui-color-warning-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-warning-base-100)
          );

          --wui-color-error-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-error-base-100)
          );
          --wui-color-blue-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-blue-base-100)
          );
          --wui-color-blue-90: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-blue-base-90)
          );
          --wui-color-error-125: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-error-base-125)
          );

          --wui-icon-box-bg-error-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-icon-box-bg-error-base-100)
          );
          --wui-icon-box-bg-accent-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-icon-box-bg-blue-base-100)
          );
          --wui-icon-box-bg-success-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-icon-box-bg-success-base-100)
          );
          --wui-icon-box-bg-inverse-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-icon-box-bg-inverse-base-100)
          );

          --wui-all-wallets-bg-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-all-wallets-bg-100)
          );

          --wui-avatar-border: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-avatar-border-base)
          );

          --wui-thumbnail-border: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-thumbnail-border-base)
          );

          --wui-wallet-button-bg: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-wallet-button-bg-base)
          );
        }
      }
    `,light:Of`
      :root {
        --w3m-color-mix: ${di((t==null?void 0:t["--w3m-color-mix"])||"#fff")};
        --w3m-accent: ${di(Qo(t,"dark")["--w3m-accent"])};
        --w3m-default: #fff;

        --wui-color-modal-bg-base: ${di(Qo(t,"dark")["--w3m-background"])};
        --wui-color-accent-base-100: var(--w3m-accent);

        --wui-color-blueberry-100: hsla(230, 100%, 67%, 1);
        --wui-color-blueberry-090: hsla(231, 76%, 61%, 1);
        --wui-color-blueberry-080: hsla(230, 59%, 55%, 1);
        --wui-color-blueberry-050: hsla(231, 100%, 70%, 0.1);

        --wui-color-fg-100: #e4e7e7;
        --wui-color-fg-125: #d0d5d5;
        --wui-color-fg-150: #a8b1b1;
        --wui-color-fg-175: #a8b0b0;
        --wui-color-fg-200: #949e9e;
        --wui-color-fg-225: #868f8f;
        --wui-color-fg-250: #788080;
        --wui-color-fg-275: #788181;
        --wui-color-fg-300: #6e7777;
        --wui-color-fg-325: #9a9a9a;
        --wui-color-fg-350: #363636;

        --wui-color-bg-100: #141414;
        --wui-color-bg-125: #191a1a;
        --wui-color-bg-150: #1e1f1f;
        --wui-color-bg-175: #222525;
        --wui-color-bg-200: #272a2a;
        --wui-color-bg-225: #2c3030;
        --wui-color-bg-250: #313535;
        --wui-color-bg-275: #363b3b;
        --wui-color-bg-300: #3b4040;
        --wui-color-bg-325: #252525;
        --wui-color-bg-350: #ffffff;

        --wui-color-success-base-100: #26d962;
        --wui-color-success-base-125: #30a46b;

        --wui-color-warning-base-100: #f3a13f;

        --wui-color-error-base-100: #f25a67;
        --wui-color-error-base-125: #df4a34;

        --wui-color-blue-base-100: rgba(102, 125, 255, 1);
        --wui-color-blue-base-90: rgba(102, 125, 255, 0.9);

        --wui-color-success-glass-001: rgba(38, 217, 98, 0.01);
        --wui-color-success-glass-002: rgba(38, 217, 98, 0.02);
        --wui-color-success-glass-005: rgba(38, 217, 98, 0.05);
        --wui-color-success-glass-010: rgba(38, 217, 98, 0.1);
        --wui-color-success-glass-015: rgba(38, 217, 98, 0.15);
        --wui-color-success-glass-020: rgba(38, 217, 98, 0.2);
        --wui-color-success-glass-025: rgba(38, 217, 98, 0.25);
        --wui-color-success-glass-030: rgba(38, 217, 98, 0.3);
        --wui-color-success-glass-060: rgba(38, 217, 98, 0.6);
        --wui-color-success-glass-080: rgba(38, 217, 98, 0.8);

        --wui-color-success-glass-reown-020: rgba(48, 164, 107, 0.2);

        --wui-color-warning-glass-reown-020: rgba(243, 161, 63, 0.2);

        --wui-color-error-glass-001: rgba(242, 90, 103, 0.01);
        --wui-color-error-glass-002: rgba(242, 90, 103, 0.02);
        --wui-color-error-glass-005: rgba(242, 90, 103, 0.05);
        --wui-color-error-glass-010: rgba(242, 90, 103, 0.1);
        --wui-color-error-glass-015: rgba(242, 90, 103, 0.15);
        --wui-color-error-glass-020: rgba(242, 90, 103, 0.2);
        --wui-color-error-glass-025: rgba(242, 90, 103, 0.25);
        --wui-color-error-glass-030: rgba(242, 90, 103, 0.3);
        --wui-color-error-glass-060: rgba(242, 90, 103, 0.6);
        --wui-color-error-glass-080: rgba(242, 90, 103, 0.8);

        --wui-color-error-glass-reown-020: rgba(223, 74, 52, 0.2);

        --wui-color-gray-glass-001: rgba(255, 255, 255, 0.01);
        --wui-color-gray-glass-002: rgba(255, 255, 255, 0.02);
        --wui-color-gray-glass-005: rgba(255, 255, 255, 0.05);
        --wui-color-gray-glass-010: rgba(255, 255, 255, 0.1);
        --wui-color-gray-glass-015: rgba(255, 255, 255, 0.15);
        --wui-color-gray-glass-020: rgba(255, 255, 255, 0.2);
        --wui-color-gray-glass-025: rgba(255, 255, 255, 0.25);
        --wui-color-gray-glass-030: rgba(255, 255, 255, 0.3);
        --wui-color-gray-glass-060: rgba(255, 255, 255, 0.6);
        --wui-color-gray-glass-080: rgba(255, 255, 255, 0.8);
        --wui-color-gray-glass-090: rgba(255, 255, 255, 0.9);

        --wui-color-dark-glass-100: rgba(42, 42, 42, 1);

        --wui-icon-box-bg-error-base-100: #3c2426;
        --wui-icon-box-bg-blue-base-100: #20303f;
        --wui-icon-box-bg-success-base-100: #1f3a28;
        --wui-icon-box-bg-inverse-base-100: #243240;

        --wui-all-wallets-bg-100: #222b35;

        --wui-avatar-border-base: #252525;

        --wui-thumbnail-border-base: #252525;

        --wui-wallet-button-bg-base: var(--wui-color-bg-125);

        --w3m-card-embedded-shadow-color: rgb(17 17 18 / 25%);
      }
    `,dark:Of`
      :root {
        --w3m-color-mix: ${di((t==null?void 0:t["--w3m-color-mix"])||"#000")};
        --w3m-accent: ${di(Qo(t,"light")["--w3m-accent"])};
        --w3m-default: #000;

        --wui-color-modal-bg-base: ${di(Qo(t,"light")["--w3m-background"])};
        --wui-color-accent-base-100: var(--w3m-accent);

        --wui-color-blueberry-100: hsla(231, 100%, 70%, 1);
        --wui-color-blueberry-090: hsla(231, 97%, 72%, 1);
        --wui-color-blueberry-080: hsla(231, 92%, 74%, 1);

        --wui-color-fg-100: #141414;
        --wui-color-fg-125: #2d3131;
        --wui-color-fg-150: #474d4d;
        --wui-color-fg-175: #636d6d;
        --wui-color-fg-200: #798686;
        --wui-color-fg-225: #828f8f;
        --wui-color-fg-250: #8b9797;
        --wui-color-fg-275: #95a0a0;
        --wui-color-fg-300: #9ea9a9;
        --wui-color-fg-325: #9a9a9a;
        --wui-color-fg-350: #d0d0d0;

        --wui-color-bg-100: #ffffff;
        --wui-color-bg-125: #f5fafa;
        --wui-color-bg-150: #f3f8f8;
        --wui-color-bg-175: #eef4f4;
        --wui-color-bg-200: #eaf1f1;
        --wui-color-bg-225: #e5eded;
        --wui-color-bg-250: #e1e9e9;
        --wui-color-bg-275: #dce7e7;
        --wui-color-bg-300: #d8e3e3;
        --wui-color-bg-325: #f3f3f3;
        --wui-color-bg-350: #202020;

        --wui-color-success-base-100: #26b562;
        --wui-color-success-base-125: #30a46b;

        --wui-color-warning-base-100: #f3a13f;

        --wui-color-error-base-100: #f05142;
        --wui-color-error-base-125: #df4a34;

        --wui-color-blue-base-100: rgba(102, 125, 255, 1);
        --wui-color-blue-base-90: rgba(102, 125, 255, 0.9);

        --wui-color-success-glass-001: rgba(38, 181, 98, 0.01);
        --wui-color-success-glass-002: rgba(38, 181, 98, 0.02);
        --wui-color-success-glass-005: rgba(38, 181, 98, 0.05);
        --wui-color-success-glass-010: rgba(38, 181, 98, 0.1);
        --wui-color-success-glass-015: rgba(38, 181, 98, 0.15);
        --wui-color-success-glass-020: rgba(38, 181, 98, 0.2);
        --wui-color-success-glass-025: rgba(38, 181, 98, 0.25);
        --wui-color-success-glass-030: rgba(38, 181, 98, 0.3);
        --wui-color-success-glass-060: rgba(38, 181, 98, 0.6);
        --wui-color-success-glass-080: rgba(38, 181, 98, 0.8);

        --wui-color-success-glass-reown-020: rgba(48, 164, 107, 0.2);

        --wui-color-warning-glass-reown-020: rgba(243, 161, 63, 0.2);

        --wui-color-error-glass-001: rgba(240, 81, 66, 0.01);
        --wui-color-error-glass-002: rgba(240, 81, 66, 0.02);
        --wui-color-error-glass-005: rgba(240, 81, 66, 0.05);
        --wui-color-error-glass-010: rgba(240, 81, 66, 0.1);
        --wui-color-error-glass-015: rgba(240, 81, 66, 0.15);
        --wui-color-error-glass-020: rgba(240, 81, 66, 0.2);
        --wui-color-error-glass-025: rgba(240, 81, 66, 0.25);
        --wui-color-error-glass-030: rgba(240, 81, 66, 0.3);
        --wui-color-error-glass-060: rgba(240, 81, 66, 0.6);
        --wui-color-error-glass-080: rgba(240, 81, 66, 0.8);

        --wui-color-error-glass-reown-020: rgba(223, 74, 52, 0.2);

        --wui-icon-box-bg-error-base-100: #f4dfdd;
        --wui-icon-box-bg-blue-base-100: #d9ecfb;
        --wui-icon-box-bg-success-base-100: #daf0e4;
        --wui-icon-box-bg-inverse-base-100: #dcecfc;

        --wui-all-wallets-bg-100: #e8f1fa;

        --wui-avatar-border-base: #f3f4f4;

        --wui-thumbnail-border-base: #eaefef;

        --wui-wallet-button-bg-base: var(--wui-color-bg-125);

        --wui-color-gray-glass-001: rgba(0, 0, 0, 0.01);
        --wui-color-gray-glass-002: rgba(0, 0, 0, 0.02);
        --wui-color-gray-glass-005: rgba(0, 0, 0, 0.05);
        --wui-color-gray-glass-010: rgba(0, 0, 0, 0.1);
        --wui-color-gray-glass-015: rgba(0, 0, 0, 0.15);
        --wui-color-gray-glass-020: rgba(0, 0, 0, 0.2);
        --wui-color-gray-glass-025: rgba(0, 0, 0, 0.25);
        --wui-color-gray-glass-030: rgba(0, 0, 0, 0.3);
        --wui-color-gray-glass-060: rgba(0, 0, 0, 0.6);
        --wui-color-gray-glass-080: rgba(0, 0, 0, 0.8);
        --wui-color-gray-glass-090: rgba(0, 0, 0, 0.9);

        --wui-color-dark-glass-100: rgba(233, 233, 233, 1);

        --w3m-card-embedded-shadow-color: rgb(224 225 233 / 25%);
      }
    `}}const V2e=Of`
  *,
  *::after,
  *::before,
  :host {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
    font-style: normal;
    text-rendering: optimizeSpeed;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    -webkit-tap-highlight-color: transparent;
    font-family: var(--wui-font-family);
    backface-visibility: hidden;
  }
`,z2e=Of`
  button,
  a {
    cursor: pointer;
    display: flex;
    justify-content: center;
    align-items: center;
    position: relative;
    transition:
      color var(--wui-duration-lg) var(--wui-ease-out-power-1),
      background-color var(--wui-duration-lg) var(--wui-ease-out-power-1),
      border var(--wui-duration-lg) var(--wui-ease-out-power-1),
      border-radius var(--wui-duration-lg) var(--wui-ease-out-power-1),
      box-shadow var(--wui-duration-lg) var(--wui-ease-out-power-1);
    will-change: background-color, color, border, box-shadow, border-radius;
    outline: none;
    border: none;
    column-gap: var(--wui-spacing-3xs);
    background-color: transparent;
    text-decoration: none;
  }

  wui-flex {
    transition: border-radius var(--wui-duration-lg) var(--wui-ease-out-power-1);
    will-change: border-radius;
  }

  button:disabled > wui-wallet-image,
  button:disabled > wui-all-wallets-image,
  button:disabled > wui-network-image,
  button:disabled > wui-image,
  button:disabled > wui-transaction-visual,
  button:disabled > wui-logo {
    filter: grayscale(1);
  }

  @media (hover: hover) and (pointer: fine) {
    button:hover:enabled {
      background-color: var(--wui-color-gray-glass-005);
    }

    button:active:enabled {
      background-color: var(--wui-color-gray-glass-010);
    }
  }

  button:disabled > wui-icon-box {
    opacity: 0.5;
  }

  input {
    border: none;
    outline: none;
    appearance: none;
  }
`,W2e=Of`
  .wui-color-inherit {
    color: var(--wui-color-inherit);
  }

  .wui-color-accent-100 {
    color: var(--wui-color-accent-100);
  }

  .wui-color-error-100 {
    color: var(--wui-color-error-100);
  }

  .wui-color-blue-100 {
    color: var(--wui-color-blue-100);
  }

  .wui-color-blue-90 {
    color: var(--wui-color-blue-90);
  }

  .wui-color-error-125 {
    color: var(--wui-color-error-125);
  }

  .wui-color-success-100 {
    color: var(--wui-color-success-100);
  }

  .wui-color-success-125 {
    color: var(--wui-color-success-125);
  }

  .wui-color-inverse-100 {
    color: var(--wui-color-inverse-100);
  }

  .wui-color-inverse-000 {
    color: var(--wui-color-inverse-000);
  }

  .wui-color-fg-100 {
    color: var(--wui-color-fg-100);
  }

  .wui-color-fg-200 {
    color: var(--wui-color-fg-200);
  }

  .wui-color-fg-300 {
    color: var(--wui-color-fg-300);
  }

  .wui-color-fg-325 {
    color: var(--wui-color-fg-325);
  }

  .wui-color-fg-350 {
    color: var(--wui-color-fg-350);
  }

  .wui-bg-color-inherit {
    background-color: var(--wui-color-inherit);
  }

  .wui-bg-color-blue-100 {
    background-color: var(--wui-color-accent-100);
  }

  .wui-bg-color-error-100 {
    background-color: var(--wui-color-error-100);
  }

  .wui-bg-color-error-125 {
    background-color: var(--wui-color-error-125);
  }

  .wui-bg-color-success-100 {
    background-color: var(--wui-color-success-100);
  }

  .wui-bg-color-success-125 {
    background-color: var(--wui-color-success-100);
  }

  .wui-bg-color-inverse-100 {
    background-color: var(--wui-color-inverse-100);
  }

  .wui-bg-color-inverse-000 {
    background-color: var(--wui-color-inverse-000);
  }

  .wui-bg-color-fg-100 {
    background-color: var(--wui-color-fg-100);
  }

  .wui-bg-color-fg-200 {
    background-color: var(--wui-color-fg-200);
  }

  .wui-bg-color-fg-300 {
    background-color: var(--wui-color-fg-300);
  }

  .wui-color-fg-325 {
    background-color: var(--wui-color-fg-325);
  }

  .wui-color-fg-350 {
    background-color: var(--wui-color-fg-350);
  }
`,Uf={hexStringToNumber(t){const e=t.startsWith("0x")?t.slice(2):t;return parseInt(e,16)},numberToHexString(t){return`0x${t.toString(16)}`},async getUserInfo(t){const[e,n]=await Promise.all([Uf.getAddresses(t),Uf.getChainId(t)]);return{chainId:n,addresses:e}},async getChainId(t){const e=await t.request({method:"eth_chainId"});return Number(e)},async getAddress(t){const[e]=await t.request({method:"eth_accounts"});return e},async getAddresses(t){return await t.request({method:"eth_accounts"})},async addEthereumChain(t,e){var r,s;const n=((r=e.rpcUrls.chainDefault)==null?void 0:r.http)||[];await t.request({method:"wallet_addEthereumChain",params:[{chainId:Uf.numberToHexString(e.id),rpcUrls:[...n],chainName:e.name,nativeCurrency:{name:e.nativeCurrency.name,decimals:e.nativeCurrency.decimals,symbol:e.nativeCurrency.symbol},blockExplorerUrls:[(s=e.blockExplorers)==null?void 0:s.default.url],iconUrls:[Ya.NetworkImageIds[e.id]]}]})}},Hh={ACCOUNT_INDEXES:{PAYMENT:0,ORDINAL:1}},SB=eU({id:56,name:"BNB Smart Chain",nativeCurrency:{decimals:18,name:"BNB",symbol:"BNB"},rpcUrls:{default:{http:["https://56.rpc.thirdweb.com"]}},blockExplorers:{default:{name:"BscScan",url:"https://bscscan.com",apiUrl:"https://api.bscscan.com/api"}},contracts:{multicall3:{address:"0xca11bde05977b3631167028862be2a173976ca11",blockCreated:15921452}}}),kB=eU({id:97,name:"BNB Smart Chain Testnet",nativeCurrency:{decimals:18,name:"BNB",symbol:"tBNB"},rpcUrls:{default:{http:["https://data-seed-prebsc-1-s1.bnbchain.org:8545"]}},blockExplorers:{default:{name:"BscScan",url:"https://testnet.bscscan.com",apiUrl:"https://api-testnet.bscscan.com/api"}},contracts:{multicall3:{address:"0xca11bde05977b3631167028862be2a173976ca11",blockCreated:17422483}},testnet:!0});function gw(t){return{formatters:void 0,fees:void 0,serializers:void 0,...t}}const gR=gw({id:"5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp",name:"Solana",network:"solana-mainnet",nativeCurrency:{name:"Solana",symbol:"SOL",decimals:9},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},blockExplorers:{default:{name:"Solscan",url:"https://solscan.io"}},testnet:!1,chainNamespace:"solana",caipNetworkId:"solana:5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp",deprecatedCaipNetworkId:"solana:4sGjMW1sUnHzSxGspuhpqLDx6wiyjNtZ"}),yR=gw({id:"EtWTRABZaYq6iMfeYKouRu166VU2xqa1",name:"Solana Devnet",network:"solana-devnet",nativeCurrency:{name:"Solana",symbol:"SOL",decimals:9},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},blockExplorers:{default:{name:"Solscan",url:"https://solscan.io"}},testnet:!0,chainNamespace:"solana",caipNetworkId:"solana:EtWTRABZaYq6iMfeYKouRu166VU2xqa1",deprecatedCaipNetworkId:"solana:8E9rvCKLFQia2Y35HXjjpWzj8weVo44K"});gw({id:"4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z",name:"Solana Testnet",network:"solana-testnet",nativeCurrency:{name:"Solana",symbol:"SOL",decimals:9},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},blockExplorers:{default:{name:"Solscan",url:"https://solscan.io"}},testnet:!0,chainNamespace:"solana",caipNetworkId:"solana:4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z"});gw({id:"000000000019d6689c085ae165831e93",caipNetworkId:"bip122:000000000019d6689c085ae165831e93",chainNamespace:"bip122",name:"Bitcoin",nativeCurrency:{name:"Bitcoin",symbol:"BTC",decimals:8},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}}});gw({id:"000000000933ea01ad0ee984209779ba",caipNetworkId:"bip122:000000000933ea01ad0ee984209779ba",chainNamespace:"bip122",name:"Bitcoin Testnet",nativeCurrency:{name:"Bitcoin",symbol:"BTC",decimals:8},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},testnet:!0});const E0e={solana:["solana_signMessage","solana_signTransaction","solana_requestAccounts","solana_getAccounts","solana_signAllTransactions","solana_signAndSendTransaction"],eip155:["eth_accounts","eth_requestAccounts","eth_sendRawTransaction","eth_sign","eth_signTransaction","eth_signTypedData","eth_signTypedData_v3","eth_signTypedData_v4","eth_sendTransaction","personal_sign","wallet_switchEthereumChain","wallet_addEthereumChain","wallet_getPermissions","wallet_requestPermissions","wallet_registerOnboarding","wallet_watchAsset","wallet_scanQRCode","wallet_getCallsStatus","wallet_showCallsStatus","wallet_sendCalls","wallet_getCapabilities","wallet_grantPermissions","wallet_revokePermissions","wallet_getAssets"],bip122:["sendTransfer","signMessage","signPsbt","getAccountAddresses"]},io={getMethodsByChainNamespace(t){return E0e[t]||[]},createDefaultNamespace(t){return{methods:this.getMethodsByChainNamespace(t),events:["accountsChanged","chainChanged"],chains:[],rpcMap:{}}},applyNamespaceOverrides(t,e){if(!e)return{...t};const n={...t},r=new Set;if(e.methods&&Object.keys(e.methods).forEach(s=>r.add(s)),e.chains&&Object.keys(e.chains).forEach(s=>r.add(s)),e.events&&Object.keys(e.events).forEach(s=>r.add(s)),e.rpcMap&&Object.keys(e.rpcMap).forEach(s=>{const[i]=s.split(":");i&&r.add(i)}),r.forEach(s=>{n[s]||(n[s]=this.createDefaultNamespace(s))}),e.methods&&Object.entries(e.methods).forEach(([s,i])=>{n[s]&&(n[s].methods=i)}),e.chains&&Object.entries(e.chains).forEach(([s,i])=>{n[s]&&(n[s].chains=i)}),e.events&&Object.entries(e.events).forEach(([s,i])=>{n[s]&&(n[s].events=i)}),e.rpcMap){const s=new Set;Object.entries(e.rpcMap).forEach(([i,a])=>{const[o,l]=i.split(":");!o||!l||!n[o]||(n[o].rpcMap||(n[o].rpcMap={}),s.has(o)||(n[o].rpcMap={},s.add(o)),n[o].rpcMap[l]=a)})}return n},createNamespaces(t,e){const n=t.reduce((r,s)=>{const{id:i,chainNamespace:a,rpcUrls:o}=s,l=o.default.http[0];r[a]||(r[a]=this.createDefaultNamespace(a));const u=`${a}:${i}`,d=r[a];switch(d.chains.push(u),u){case gR.caipNetworkId:d.chains.push(gR.deprecatedCaipNetworkId);break;case yR.caipNetworkId:d.chains.push(yR.deprecatedCaipNetworkId);break}return d!=null&&d.rpcMap&&l&&(d.rpcMap[i]=l),r},{});return this.applyNamespaceOverrides(n,e)},resolveReownName:async t=>{var r;const e=await zg.resolveName(t);return((r=(Object.values(e==null?void 0:e.addresses)||[])[0])==null?void 0:r.address)||!1},getChainsFromNamespaces(t={}){return Object.values(t).flatMap(e=>{const n=e.chains||[],r=e.accounts.map(s=>{const[i,a]=s.split(":");return`${i}:${a}`});return Array.from(new Set([...n,...r]))})},isSessionEventData(t){return typeof t=="object"&&t!==null&&"id"in t&&"topic"in t&&"params"in t&&typeof t.params=="object"&&t.params!==null&&"chainId"in t.params&&"event"in t.params&&typeof t.params.event=="object"&&t.params.event!==null},isOriginAllowed(t,e,n){for(const r of[...e,...n])if(r.includes("*")){const i=`^${r.replace(/[.*+?^${}()|[\]\\]/gu,"\\$&").replace(/\\\*/gu,".*")}$`;if(new RegExp(i,"u").test(t))return!0}else try{if(new URL(r).origin===t)return!0}catch{if(r===t)return!0}return!1},listenWcProvider({universalProvider:t,namespace:e,onConnect:n,onDisconnect:r,onAccountsChanged:s,onChainChanged:i,onDisplayUri:a}){n&&t.on("connect",()=>{const o=io.getWalletConnectAccounts(t,e);n(o)}),r&&t.on("disconnect",()=>{r()}),s&&t.on("session_event",o=>{if(io.isSessionEventData(o)){const{name:l,data:u}=o.params.event;if(l==="accountsChanged"&&Array.isArray(u)){const d=u.filter(h=>Ae.isCaipAddress(h)).map(h=>Wr.parseCaipAddress(h)).filter(h=>h.chainNamespace===e);s(d)}}}),i&&t.on("chainChanged",o=>{i(o)}),a&&t.on("display_uri",o=>{a(o)})},getWalletConnectAccounts(t,e){var s,i,a,o;const n=new Set,r=(o=(a=(i=(s=t==null?void 0:t.session)==null?void 0:s.namespaces)==null?void 0:i[e])==null?void 0:a.accounts)==null?void 0:o.map(l=>Wr.parseCaipAddress(l)).filter(({address:l})=>n.has(l.toLowerCase())?!1:(n.add(l.toLowerCase()),!0));return r&&r.length>0?r:[]}};class N0e{constructor(e){this.namespace=e.namespace}async syncConnections(e){switch(this.namespace){case Y.CHAIN.EVM:await this.syncEVMConnections(e);break;case Y.CHAIN.SOLANA:await this.syncSolanaConnections(e);break;case Y.CHAIN.BITCOIN:await this.syncBitcoinConnections(e);break;default:throw new Error(`Unsupported chain namespace: ${this.namespace}`)}}async syncEVMConnections({connectors:e,caipNetworks:n,universalProvider:r,getConnectionStatusInfo:s,onConnection:i,onListenProvider:a}){await Promise.all(e.filter(o=>{const{hasDisconnected:l,hasConnected:u}=s(o.id);return!l&&u}).map(async o=>{if(o.id===Y.CONNECTOR_ID.WALLET_CONNECT){const l=io.getWalletConnectAccounts(r,this.namespace),u=n.find(d=>{var h,f;return d.chainNamespace===this.namespace&&d.id.toString()===((f=(h=l[0])==null?void 0:h.chainId)==null?void 0:f.toString())});l.length>0&&i({connectorId:o.id,accounts:l.map(d=>({address:d.address})),caipNetwork:u})}else{const{accounts:l,chainId:u}=await fx.fetchProviderData(o);if(l.length>0&&u){const d=n.find(h=>h.chainNamespace===this.namespace&&h.id.toString()===u.toString());i({connectorId:o.id,accounts:l.map(h=>({address:h})),caipNetwork:d}),o.provider&&o.id!==Y.CONNECTOR_ID.AUTH&&o.id!==Y.CONNECTOR_ID.WALLET_CONNECT&&a(o.id,o.provider)}}}))}async syncSolanaConnections({connectors:e,caipNetwork:n,universalProvider:r,getConnectionStatusInfo:s,onConnection:i,onListenProvider:a}){await Promise.all(e.filter(o=>{const{hasDisconnected:l,hasConnected:u}=s(o.id);return!l&&u}).map(async o=>{if(o.id===Y.CONNECTOR_ID.WALLET_CONNECT){const l=io.getWalletConnectAccounts(r,this.namespace);l.length>0&&i({connectorId:o.id,accounts:l.map(u=>({address:u.address})),caipNetwork:n})}else{const l=await o.connect({chainId:n==null?void 0:n.id});l&&(i({connectorId:o.id,accounts:[{address:l}],caipNetwork:n}),a(o.id,o.provider))}}))}async syncBitcoinConnections({connectors:e,caipNetwork:n,universalProvider:r,getConnectionStatusInfo:s,onConnection:i,onListenProvider:a}){await Promise.all(e.filter(o=>{const{hasDisconnected:l,hasConnected:u}=s(o.id);return!l&&u}).map(async o=>{var f,p,g,m,y,b;if(o.id===Y.CONNECTOR_ID.WALLET_CONNECT){const w=io.getWalletConnectAccounts(r,this.namespace);w.length>0&&i({connectorId:o.id,accounts:w.map(x=>({address:x.address})),caipNetwork:n});return}const l=await o.connect(),u=await o.getAccountAddresses();let d=u==null?void 0:u.map(w=>Ae.createAccount(Y.CHAIN.BITCOIN,w.address,w.purpose||"payment",w.publicKey,w.path));if(d&&d.length>1&&(d=[{namespace:Y.CHAIN.BITCOIN,publicKey:((f=d[Hh.ACCOUNT_INDEXES.PAYMENT])==null?void 0:f.publicKey)??"",path:((p=d[Hh.ACCOUNT_INDEXES.PAYMENT])==null?void 0:p.path)??"",address:((g=d[Hh.ACCOUNT_INDEXES.PAYMENT])==null?void 0:g.address)??"",type:"payment"},{namespace:Y.CHAIN.BITCOIN,publicKey:((m=d[Hh.ACCOUNT_INDEXES.ORDINAL])==null?void 0:m.publicKey)??"",path:((y=d[Hh.ACCOUNT_INDEXES.ORDINAL])==null?void 0:y.path)??"",address:((b=d[Hh.ACCOUNT_INDEXES.ORDINAL])==null?void 0:b.address)??"",type:"ordinal"}]),!(o.chains.find(w=>w.id===(n==null?void 0:n.id))||o.chains[0]))throw new Error("The connector does not support any of the requested chains");l&&(a(o.id,o.provider),i({connectorId:o.id,accounts:d.map(w=>({address:w.address,type:w.type})),caipNetwork:n}))}))}getConnection({address:e,connectorId:n,connections:r,connectors:s}){if(n){const a=r.find(u=>qn.isLowerCaseMatch(u.connectorId,n));if(!a)return null;const o=s.find(u=>qn.isLowerCaseMatch(u.id,a.connectorId)),l=e?a.accounts.find(u=>qn.isLowerCaseMatch(u.address,e)):a.accounts[0];return{...a,account:l,connector:o}}const i=r.find(a=>a.accounts.length>0&&s.some(o=>qn.isLowerCaseMatch(o.id,a.connectorId)));if(i){const[a]=i.accounts,o=s.find(l=>qn.isLowerCaseMatch(l.id,i.connectorId));return{...i,account:a,connector:o}}return null}}const Jo={ERROR_CODE_UNRECOGNIZED_CHAIN_ID:4902,ERROR_CODE_DEFAULT:5e3,ERROR_INVALID_CHAIN_ID:32603,DEFAULT_ALLOWED_ANCESTORS:["http://localhost:*","https://*.pages.dev","https://*.vercel.app","https://*.ngrok-free.app","https://secure-mobile.walletconnect.com","https://secure-mobile.walletconnect.org"]};class US{constructor({provider:e,namespace:n}){this.id=Y.CONNECTOR_ID.WALLET_CONNECT,this.name=Ya.ConnectorNamesMap[Y.CONNECTOR_ID.WALLET_CONNECT],this.type="WALLET_CONNECT",this.imageId=Ya.ConnectorImageIds[Y.CONNECTOR_ID.WALLET_CONNECT],this.getCaipNetworks=U.getCaipNetworks.bind(U),this.caipNetworks=this.getCaipNetworks(),this.provider=e,this.chain=n}get chains(){return this.getCaipNetworks()}async connectWalletConnect(){if(!await this.authenticate()){const n=this.getCaipNetworks(),r=te.state.universalProviderConfigOverride,s=io.createNamespaces(n,r);await this.provider.connect({optionalNamespaces:s})}return{clientId:await this.provider.client.core.crypto.getClientId(),session:this.provider.session}}async disconnect(){await this.provider.disconnect()}async authenticate(){const e=this.chains.map(n=>n.caipNetworkId);return Gs.universalProviderAuthenticate({universalProvider:this.provider,chains:e,methods:C0e})}}const C0e=["eth_accounts","eth_requestAccounts","eth_sendRawTransaction","eth_sign","eth_signTransaction","eth_signTypedData","eth_signTypedData_v3","eth_signTypedData_v4","eth_sendTransaction","personal_sign","wallet_switchEthereumChain","wallet_addEthereumChain","wallet_getPermissions","wallet_requestPermissions","wallet_registerOnboarding","wallet_watchAsset","wallet_scanQRCode","wallet_getCallsStatus","wallet_sendCalls","wallet_getCapabilities","wallet_grantPermissions","wallet_revokePermissions","wallet_getAssets"],A0e=[Y.CONNECTOR_ID.AUTH,Y.CONNECTOR_ID.WALLET_CONNECT];class _B{constructor(e){this.availableConnectors=[],this.availableConnections=[],this.providerHandlers={},this.eventListeners=new Map,this.getCaipNetworks=n=>U.getCaipNetworks(n),this.getConnectorId=n=>pe.getConnectorId(n),e&&this.construct(e),e!=null&&e.namespace&&(this.connectionManager=new N0e({namespace:e.namespace}))}construct(e){this.projectId=e.projectId,this.namespace=e.namespace,this.adapterType=e.adapterType}get connectors(){return this.availableConnectors}get connections(){return this.availableConnections}get networks(){return this.getCaipNetworks(this.namespace)}onAuthConnected({accounts:e,chainId:n}){const r=this.getCaipNetworks().filter(s=>s.chainNamespace===this.namespace).find(s=>s.id.toString()===(n==null?void 0:n.toString()));e&&r&&this.addConnection({connectorId:Y.CONNECTOR_ID.AUTH,accounts:e,caipNetwork:r})}setAuthProvider(e){e.onConnect(this.onAuthConnected.bind(this)),e.onSocialConnected(this.onAuthConnected.bind(this)),this.addConnector({id:Y.CONNECTOR_ID.AUTH,type:"AUTH",name:Y.CONNECTOR_NAMES.AUTH,provider:e,imageId:Ya.ConnectorImageIds[Y.CONNECTOR_ID.AUTH],chain:this.namespace,chains:[]})}addConnector(...e){const n=new Set;this.availableConnectors=[...e,...this.availableConnectors].filter(r=>n.has(r.id)?!1:(n.add(r.id),!0)),this.emit("connectors",this.availableConnectors)}addConnection(...e){const n=new Set;this.availableConnections=[...e,...this.availableConnections].filter(r=>n.has(r.connectorId.toLowerCase())?!1:(n.add(r.connectorId.toLowerCase()),!0)),this.emit("connections",this.availableConnections)}deleteConnection(e){this.availableConnections=this.availableConnections.filter(n=>!qn.isLowerCaseMatch(n.connectorId,e)),this.emit("connections",this.availableConnections)}clearConnections(e=!1){this.availableConnections=[],e&&this.emit("connections",this.availableConnections)}setStatus(e,n){_e.setStatus(e,n)}on(e,n){var r;this.eventListeners.has(e)||this.eventListeners.set(e,new Set),(r=this.eventListeners.get(e))==null||r.add(n)}off(e,n){const r=this.eventListeners.get(e);r&&r.delete(n)}removeAllEventListeners(){this.eventListeners.forEach(e=>{e.clear()})}emit(e,n){const r=this.eventListeners.get(e);r&&r.forEach(s=>s(n))}async connectWalletConnect(e){return{clientId:(await this.getWalletConnectConnector().connectWalletConnect()).clientId}}async switchNetwork(e){const{caipNetwork:n,providerType:r}=e;if(!e.provider)return;const s="provider"in e.provider?e.provider.provider:e.provider;if(r==="WALLET_CONNECT"){s.setDefaultChain(n.caipNetworkId);return}if(s&&r==="AUTH"){const i=s,a=ei(n.chainNamespace);await i.switchNetwork({chainId:n.caipNetworkId});const o=await i.getUser({chainId:n.caipNetworkId,preferredAccountType:a});this.emit("switchNetwork",o)}}getWalletConnectConnector(){const e=this.connectors.find(n=>n instanceof US);if(!e)throw new Error("WalletConnectConnector not found");return e}onConnect(e,n){if(e.length>0){const{address:r,chainId:s}=Ae.getAccount(e[0]),i=this.getCaipNetworks().filter(o=>o.chainNamespace===this.namespace).find(o=>o.id.toString()===(s==null?void 0:s.toString())),a=this.connectors.find(o=>o.id===n);r&&(this.emit("accountChanged",{address:r,chainId:s,connector:a}),this.addConnection({connectorId:n,accounts:e.map(o=>{const{address:l}=Ae.getAccount(o);return{address:l}}),caipNetwork:i}))}}onAccountsChanged(e,n,r=!0){var s,i;if(e.length>0){const{address:a}=Ae.getAccount(e[0]),o=(s=this.connectionManager)==null?void 0:s.getConnection({connectorId:n,connections:this.connections,connectors:this.connectors});a&&qn.isLowerCaseMatch(this.getConnectorId(Y.CHAIN.EVM),n)&&this.emit("accountChanged",{address:a,chainId:(i=o==null?void 0:o.caipNetwork)==null?void 0:i.id,connector:o==null?void 0:o.connector}),this.addConnection({connectorId:n,accounts:e.map(l=>{const{address:u}=Ae.getAccount(l);return{address:u}}),caipNetwork:o==null?void 0:o.caipNetwork})}else r&&this.onDisconnect(n)}onDisconnect(e){this.removeProviderListeners(e),this.deleteConnection(e),qn.isLowerCaseMatch(this.getConnectorId(Y.CHAIN.EVM),e)&&this.emitFirstAvailableConnection(),this.connections.length===0&&this.emit("disconnect")}onChainChanged(e,n){var a;const r=typeof e=="string"&&e.startsWith("0x")?Uf.hexStringToNumber(e).toString():e.toString(),s=(a=this.connectionManager)==null?void 0:a.getConnection({connectorId:n,connections:this.connections,connectors:this.connectors}),i=this.getCaipNetworks().filter(o=>o.chainNamespace===this.namespace).find(o=>o.id.toString()===r);s&&this.addConnection({connectorId:n,accounts:s.accounts,caipNetwork:i}),qn.isLowerCaseMatch(this.getConnectorId(Y.CHAIN.EVM),n)&&this.emit("switchNetwork",{chainId:r})}listenProviderEvents(e,n){if(A0e.includes(e))return;const r=a=>this.onAccountsChanged(a,e),s=a=>this.onChainChanged(a,e),i=()=>this.onDisconnect(e);this.providerHandlers[e]||(n.on("disconnect",i),n.on("accountsChanged",r),n.on("chainChanged",s),this.providerHandlers[e]={provider:n,disconnect:i,accountsChanged:r,chainChanged:s})}removeProviderListeners(e){if(this.providerHandlers[e]){const{provider:n,disconnect:r,accountsChanged:s,chainChanged:i}=this.providerHandlers[e];n.removeListener("disconnect",r),n.removeListener("accountsChanged",s),n.removeListener("chainChanged",i),this.providerHandlers[e]=null}}emitFirstAvailableConnection(){var n,r;const e=(n=this.connectionManager)==null?void 0:n.getConnection({connections:this.connections,connectors:this.connectors});if(e){const[s]=e.accounts;this.emit("accountChanged",{address:s==null?void 0:s.address,chainId:(r=e.caipNetwork)==null?void 0:r.id,connector:e.connector})}}}class T0e extends _B{async setUniversalProvider(e){return this.addConnector(new US({provider:e,caipNetworks:this.getCaipNetworks(),namespace:this.namespace})),Promise.resolve()}async connect(e){return Promise.resolve({id:"WALLET_CONNECT",type:"WALLET_CONNECT",chainId:Number(e.chainId),provider:this.provider,address:""})}async disconnect(){try{await this.getWalletConnectConnector().disconnect(),this.emit("disconnect")}catch(e){console.warn("UniversalAdapter:disconnect - error",e)}return{connections:[]}}syncConnections(){return Promise.resolve()}async getAccounts({namespace:e}){var s,i,a,o;const n=this.provider,r=((o=(a=(i=(s=n==null?void 0:n.session)==null?void 0:s.namespaces)==null?void 0:i[e])==null?void 0:a.accounts)==null?void 0:o.map(l=>{const[,,u]=l.split(":");return u}).filter((l,u,d)=>d.indexOf(l)===u))||[];return Promise.resolve({accounts:r.map(l=>Ae.createAccount(e,l,e==="bip122"?"payment":"eoa"))})}async syncConnectors(){return Promise.resolve()}async getBalance(e){var i,a,o,l,u;if(!(e.caipNetwork&&It.BALANCE_SUPPORTED_CHAINS.includes((i=e.caipNetwork)==null?void 0:i.chainNamespace))||(a=e.caipNetwork)!=null&&a.testnet)return{balance:"0.00",symbol:((o=e.caipNetwork)==null?void 0:o.nativeCurrency.symbol)||""};if(_e.state.balanceLoading&&e.chainId===((l=U.state.activeCaipNetwork)==null?void 0:l.id))return{balance:_e.state.balance||"0.00",symbol:_e.state.balanceSymbol||""};const s=(await _e.fetchTokenBalance()).find(d=>{var h,f;return d.chainId===`${(h=e.caipNetwork)==null?void 0:h.chainNamespace}:${e.chainId}`&&d.symbol===((f=e.caipNetwork)==null?void 0:f.nativeCurrency.symbol)});return{balance:(s==null?void 0:s.quantity.numeric)||"0.00",symbol:(s==null?void 0:s.symbol)||((u=e.caipNetwork)==null?void 0:u.nativeCurrency.symbol)||""}}async signMessage(e){var a,o,l;const{provider:n,message:r,address:s}=e;if(!n)throw new Error("UniversalAdapter:signMessage - provider is undefined");let i="";return((a=U.state.activeCaipNetwork)==null?void 0:a.chainNamespace)===Y.CHAIN.SOLANA?i=(await n.request({method:"solana_signMessage",params:{message:gm.encode(new TextEncoder().encode(r)),pubkey:s}},(o=U.state.activeCaipNetwork)==null?void 0:o.caipNetworkId)).signature:i=await n.request({method:"personal_sign",params:[r,s]},(l=U.state.activeCaipNetwork)==null?void 0:l.caipNetworkId),{signature:i}}async estimateGas(){return Promise.resolve({gas:BigInt(0)})}async sendTransaction(){return Promise.resolve({hash:""})}walletGetAssets(e){return Promise.resolve({})}async writeContract(){return Promise.resolve({hash:""})}emitFirstAvailableConnection(){}parseUnits(){return 0n}formatUnits(){return"0"}async getCapabilities(){return Promise.resolve({})}async grantPermissions(){return Promise.resolve({})}async revokePermissions(){return Promise.resolve("0x")}async syncConnection(){return Promise.resolve({id:"WALLET_CONNECT",type:"WALLET_CONNECT",chainId:1,provider:this.provider,address:""})}async switchNetwork(e){var s,i,a,o,l,u;const{caipNetwork:n}=e,r=this.getWalletConnectConnector();if(n.chainNamespace===Y.CHAIN.EVM)try{await((s=r.provider)==null?void 0:s.request({method:"wallet_switchEthereumChain",params:[{chainId:Y_(n.id)}]}))}catch(d){if(d.code===Jo.ERROR_CODE_UNRECOGNIZED_CHAIN_ID||d.code===Jo.ERROR_INVALID_CHAIN_ID||d.code===Jo.ERROR_CODE_DEFAULT||((a=(i=d==null?void 0:d.data)==null?void 0:i.originalError)==null?void 0:a.code)===Jo.ERROR_CODE_UNRECOGNIZED_CHAIN_ID)try{await((u=r.provider)==null?void 0:u.request({method:"wallet_addEthereumChain",params:[{chainId:Y_(n.id),rpcUrls:[(o=n==null?void 0:n.rpcUrls.chainDefault)==null?void 0:o.http],chainName:n.name,nativeCurrency:n.nativeCurrency,blockExplorerUrls:[(l=n.blockExplorers)==null?void 0:l.default.url]}]}))}catch{throw new Error("Chain is not supported")}}r.provider.setDefaultChain(n.caipNetworkId)}getWalletConnectProvider(){const e=this.connectors.find(r=>r.type==="WALLET_CONNECT");return e==null?void 0:e.provider}}const S0e=["email","socials","swaps","onramp","activity","reownBranding","multiWallet"],Ab={email:{apiFeatureName:"social_login",localFeatureName:"email",returnType:!1,isLegacy:!1,isAvailableOnBasic:!1,processApi:t=>{if(!(t!=null&&t.config))return!1;const e=t.config;return!!t.isEnabled&&e.includes("email")},processFallback:t=>t===void 0?It.DEFAULT_REMOTE_FEATURES.email:!!t},socials:{apiFeatureName:"social_login",localFeatureName:"socials",returnType:!1,isLegacy:!1,isAvailableOnBasic:!1,processApi:t=>{if(!(t!=null&&t.config))return!1;const e=t.config;return t.isEnabled&&e.length>0?e.filter(n=>n!=="email"):!1},processFallback:t=>t===void 0?It.DEFAULT_REMOTE_FEATURES.socials:typeof t=="boolean"?t?It.DEFAULT_REMOTE_FEATURES.socials:!1:t},swaps:{apiFeatureName:"swap",localFeatureName:"swaps",returnType:!1,isLegacy:!1,isAvailableOnBasic:!1,processApi:t=>{if(!(t!=null&&t.config))return!1;const e=t.config;return t.isEnabled&&e.length>0?e:!1},processFallback:t=>t===void 0?It.DEFAULT_REMOTE_FEATURES.swaps:typeof t=="boolean"?t?It.DEFAULT_REMOTE_FEATURES.swaps:!1:t},onramp:{apiFeatureName:"onramp",localFeatureName:"onramp",returnType:!1,isLegacy:!1,isAvailableOnBasic:!1,processApi:t=>{if(!(t!=null&&t.config))return!1;const e=t.config;return t.isEnabled&&e.length>0?e:!1},processFallback:t=>t===void 0?It.DEFAULT_REMOTE_FEATURES.onramp:typeof t=="boolean"?t?It.DEFAULT_REMOTE_FEATURES.onramp:!1:t},activity:{apiFeatureName:"activity",localFeatureName:"history",returnType:!1,isLegacy:!0,isAvailableOnBasic:!1,processApi:t=>!!t.isEnabled,processFallback:t=>t===void 0?It.DEFAULT_REMOTE_FEATURES.activity:!!t},reownBranding:{apiFeatureName:"reown_branding",localFeatureName:"reownBranding",returnType:!1,isLegacy:!1,isAvailableOnBasic:!1,processApi:t=>!!t.isEnabled,processFallback:t=>t===void 0?It.DEFAULT_REMOTE_FEATURES.reownBranding:!!t},multiWallet:{apiFeatureName:"multi_wallet",localFeatureName:"multiWallet",returnType:!1,isLegacy:!1,isAvailableOnBasic:!1,processApi:t=>!!t.isEnabled,processFallback:()=>It.DEFAULT_REMOTE_FEATURES.multiWallet}},k0e={localSettingsOverridden:new Set,getApiConfig(t,e){return e==null?void 0:e.find(n=>n.id===t)},addWarning(t,e){if(t!==void 0){const n=Ab[e],r=n.isLegacy?`"features.${n.localFeatureName}" (now "${e}")`:`"features.${e}"`;this.localSettingsOverridden.add(r)}},processFeature(t,e,n,r,s){const i=Ab[t],a=e[i.localFeatureName];if(s&&!i.isAvailableOnBasic)return!1;if(r){const o=this.getApiConfig(i.apiFeatureName,n);return(o==null?void 0:o.config)===null?this.processFallbackFeature(t,a):o!=null&&o.config?(a!==void 0&&this.addWarning(a,t),this.processApiFeature(t,o)):!1}return this.processFallbackFeature(t,a)},processApiFeature(t,e){return Ab[t].processApi(e)},processFallbackFeature(t,e){return Ab[t].processFallback(e)},async fetchRemoteFeatures(t){const e=t.basic??!1,n=t.features||{};this.localSettingsOverridden.clear();let r=null,s=!1;try{r=await Ue.fetchProjectConfig(),s=r!=null}catch(a){console.warn("[Reown Config] Failed to fetch remote project configuration. Using local/default values.",a)}const i=s&&!e?It.DEFAULT_REMOTE_FEATURES:It.DEFAULT_REMOTE_FEATURES_DISABLED;try{for(const a of S0e){const o=this.processFeature(a,n,r,s,e);Object.assign(i,{[a]:o})}}catch(a){return console.warn("[Reown Config] Failed to process the configuration from Cloud. Using default values.",a),It.DEFAULT_REMOTE_FEATURES}if(s&&this.localSettingsOverridden.size>0){const a=`Your local configuration for ${Array.from(this.localSettingsOverridden).join(", ")} was ignored because a remote configuration was successfully fetched. Please manage these features via your project dashboard on dashboard.reown.com.`;In.open({shortMessage:"Local configuration ignored",longMessage:`[Reown Config Notice] ${a}`},"warning")}return i}};class _0e{constructor(e){this.chainNamespaces=[],this.remoteFeatures={},this.reportedAlertErrors={},this.getCaipNetwork=(n,r)=>{var s,i,a,o;if(n){const l=(i=(s=U.getNetworkData(n))==null?void 0:s.requestedCaipNetworks)==null?void 0:i.find(h=>h.id===r);if(l)return l;const u=(a=U.getNetworkData(n))==null?void 0:a.caipNetwork;return u||((o=U.getRequestedCaipNetworks(n).filter(h=>h.chainNamespace===n))==null?void 0:o[0])}return U.state.activeCaipNetwork||this.defaultCaipNetwork},this.getCaipNetworkId=()=>{const n=this.getCaipNetwork();if(n)return n.id},this.getCaipNetworks=n=>U.getCaipNetworks(n),this.getActiveChainNamespace=()=>U.state.activeChain,this.setRequestedCaipNetworks=(n,r)=>{U.setRequestedCaipNetworks(n,r)},this.getApprovedCaipNetworkIds=()=>U.getAllApprovedCaipNetworkIds(),this.getCaipAddress=n=>U.state.activeChain===n||!n?U.state.activeCaipAddress:U.getAccountProp("caipAddress",n),this.setClientId=n=>{$e.setClientId(n)},this.getProvider=n=>pt.getProvider(n),this.getProviderType=n=>pt.getProviderId(n),this.getPreferredAccountType=n=>ei(n),this.setCaipAddress=(n,r)=>{_e.setCaipAddress(n,r)},this.setBalance=(n,r,s)=>{_e.setBalance(n,r,s)},this.setProfileName=(n,r)=>{_e.setProfileName(n,r)},this.setProfileImage=(n,r)=>{_e.setProfileImage(n,r)},this.setUser=(n,r)=>{_e.setUser(n,r)},this.resetAccount=n=>{_e.resetAccount(n)},this.setCaipNetwork=n=>{U.setActiveCaipNetwork(n)},this.setCaipNetworkOfNamespace=(n,r)=>{U.setChainNetworkData(r,{caipNetwork:n})},this.setStatus=(n,r)=>{_e.setStatus(n,r),pe.isConnected()?le.setConnectionStatus("connected"):le.setConnectionStatus("disconnected")},this.getAddressByChainNamespace=n=>U.getAccountProp("address",n),this.setConnectors=n=>{const r=[...pe.state.allConnectors,...n];pe.setConnectors(r)},this.setConnections=(n,r)=>{le.setConnections(n,r),me.setConnections(n,r)},this.fetchIdentity=n=>$e.fetchIdentity(n),this.getReownName=n=>zg.getNamesForAddress(n),this.getConnectors=()=>pe.getConnectors(),this.getConnectorImage=n=>jD.getConnectorImage(n),this.getConnections=n=>this.remoteFeatures.multiWallet?fv.getConnectionsData(n).connections:(In.open(Y.REMOTE_FEATURES_ALERTS.MULTI_WALLET_NOT_ENABLED.DEFAULT,"info"),[]),this.getRecentConnections=n=>this.remoteFeatures.multiWallet?fv.getConnectionsData(n).recentConnections:(In.open(Y.REMOTE_FEATURES_ALERTS.MULTI_WALLET_NOT_ENABLED.DEFAULT,"info"),[]),this.switchConnection=async n=>{if(!this.remoteFeatures.multiWallet){In.open(Y.REMOTE_FEATURES_ALERTS.MULTI_WALLET_NOT_ENABLED.DEFAULT,"info");return}await me.switchConnection(n)},this.deleteConnection=n=>{if(!this.remoteFeatures.multiWallet){In.open(Y.REMOTE_FEATURES_ALERTS.MULTI_WALLET_NOT_ENABLED.DEFAULT,"info");return}le.deleteAddressFromConnection(n),me.syncStorageConnections()},this.setConnectedWalletInfo=(n,r)=>{const s=pt.getProviderId(r),i=n?{...n,type:s}:void 0;_e.setConnectedWalletInfo(i,r)},this.getIsConnectedState=()=>!!U.state.activeCaipAddress,this.addAddressLabel=(n,r,s)=>{_e.addAddressLabel(n,r,s)},this.removeAddressLabel=(n,r)=>{_e.removeAddressLabel(n,r)},this.getAddress=n=>U.state.activeChain===n||!n?_e.state.address:U.getAccountProp("address",n),this.setApprovedCaipNetworksData=n=>U.setApprovedCaipNetworksData(n),this.resetNetwork=n=>{U.resetNetwork(n)},this.addConnector=n=>{pe.addConnector(n)},this.resetWcConnection=()=>{me.resetWcConnection()},this.setAddressExplorerUrl=(n,r)=>{_e.setAddressExplorerUrl(n,r)},this.setSmartAccountDeployed=(n,r)=>{_e.setSmartAccountDeployed(n,r)},this.setPreferredAccountType=(n,r)=>{U.setAccountProp("preferredAccountType",n,r)},this.setEIP6963Enabled=n=>{te.setEIP6963Enabled(n)},this.handleUnsafeRPCRequest=()=>{if(this.isOpen()){if(this.isTransactionStackEmpty())return;this.redirect("ApproveTransaction")}else this.open({view:"ApproveTransaction"})},this.options=e,this.version=e.sdkVersion,this.caipNetworks=this.extendCaipNetworks(e),this.chainNamespaces=this.getChainNamespacesSet(e.adapters,this.caipNetworks),this.defaultCaipNetwork=this.extendDefaultCaipNetwork(e),this.chainAdapters=this.createAdapters(e.adapters),this.readyPromise=this.initialize(e)}getChainNamespacesSet(e,n){const r=e==null?void 0:e.map(i=>i.namespace).filter(i=>!!i);if(r!=null&&r.length)return[...new Set(r)];const s=n==null?void 0:n.map(i=>i.chainNamespace);return[...new Set(s)]}async initialize(e){var n,r,s;this.initializeProjectSettings(e),this.initControllers(e),await this.initChainAdapters(),this.sendInitializeEvent(e),te.state.enableReconnect?(await this.syncExistingConnection(),await this.syncAdapterConnections()):await this.unSyncExistingConnection(),this.remoteFeatures=await k0e.fetchRemoteFeatures(e),te.setRemoteFeatures(this.remoteFeatures),this.remoteFeatures.onramp&&oA.setOnrampProviders(this.remoteFeatures.onramp),((n=te.state.remoteFeatures)!=null&&n.email||Array.isArray((r=te.state.remoteFeatures)==null?void 0:r.socials)&&((s=te.state.remoteFeatures)==null?void 0:s.socials.length)>0)&&await this.checkAllowedOrigins()}async checkAllowedOrigins(){try{const e=await Ue.fetchAllowedOrigins();if(!e||!Ae.isClient()){In.open(Hr.ALERT_ERRORS.PROJECT_ID_NOT_CONFIGURED,"error");return}const n=window.location.origin;io.isOriginAllowed(n,e,Jo.DEFAULT_ALLOWED_ANCESTORS)||In.open(Hr.ALERT_ERRORS.INVALID_APP_CONFIGURATION,"error")}catch(e){if(!(e instanceof Error)){In.open(Hr.ALERT_ERRORS.PROJECT_ID_NOT_CONFIGURED,"error");return}switch(e.message){case"RATE_LIMITED":In.open(Hr.ALERT_ERRORS.RATE_LIMITED_APP_CONFIGURATION,"error");break;case"SERVER_ERROR":{const n=e.cause instanceof Error?e.cause:e;In.open({shortMessage:Hr.ALERT_ERRORS.SERVER_ERROR_APP_CONFIGURATION.shortMessage,longMessage:Hr.ALERT_ERRORS.SERVER_ERROR_APP_CONFIGURATION.longMessage(n.message)},"error");break}default:In.open(Hr.ALERT_ERRORS.PROJECT_ID_NOT_CONFIGURED,"error")}}}sendInitializeEvent(e){var r;const{...n}=e;delete n.adapters,delete n.universalProvider,Mt.sendEvent({type:"track",event:"INITIALIZE",properties:{...n,networks:e.networks.map(s=>s.id),siweConfig:{options:((r=e.siweConfig)==null?void 0:r.options)||{}}}})}initControllers(e){this.initializeOptionsController(e),this.initializeChainController(e),this.initializeThemeController(e),this.initializeConnectionController(e),this.initializeConnectorController()}initializeThemeController(e){e.themeMode&&ws.setThemeMode(e.themeMode),e.themeVariables&&ws.setThemeVariables(e.themeVariables)}initializeChainController(e){if(!this.connectionControllerClient||!this.networkControllerClient)throw new Error("ConnectionControllerClient and NetworkControllerClient must be set");U.initialize(e.adapters??[],this.caipNetworks,{connectionControllerClient:this.connectionControllerClient,networkControllerClient:this.networkControllerClient});const n=this.getDefaultNetwork();n&&U.setActiveCaipNetwork(n)}initializeConnectionController(e){me.initialize(e.adapters??[]),me.setWcBasic(e.basic??!1)}initializeConnectorController(){pe.initialize(this.chainNamespaces)}initializeProjectSettings(e){te.setProjectId(e.projectId),te.setSdkVersion(e.sdkVersion)}initializeOptionsController(e){var s;te.setDebug(e.debug!==!1),te.setEnableWalletConnect(e.enableWalletConnect!==!1),te.setEnableWalletGuide(e.enableWalletGuide!==!1),te.setEnableWallets(e.enableWallets!==!1),te.setEIP6963Enabled(e.enableEIP6963!==!1),te.setEnableNetworkSwitch(e.enableNetworkSwitch!==!1),te.setEnableReconnect(e.enableReconnect!==!1),te.setEnableAuthLogger(e.enableAuthLogger!==!1),te.setCustomRpcUrls(e.customRpcUrls),te.setEnableEmbedded(e.enableEmbedded),te.setAllWallets(e.allWallets),te.setIncludeWalletIds(e.includeWalletIds),te.setExcludeWalletIds(e.excludeWalletIds),te.setFeaturedWalletIds(e.featuredWalletIds),te.setTokens(e.tokens),te.setTermsConditionsUrl(e.termsConditionsUrl),te.setPrivacyPolicyUrl(e.privacyPolicyUrl),te.setCustomWallets(e.customWallets),te.setFeatures(e.features),te.setAllowUnsupportedChain(e.allowUnsupportedChain),te.setUniversalProviderConfigOverride(e.universalProviderConfigOverride),te.setPreferUniversalLinks(e.experimental_preferUniversalLinks),te.setDefaultAccountTypes(e.defaultAccountTypes);const n=this.getDefaultMetaData();if(!e.metadata&&n&&(e.metadata=n),te.setMetadata(e.metadata),te.setDisableAppend(e.disableAppend),te.setEnableEmbedded(e.enableEmbedded),te.setSIWX(e.siwx),!e.projectId){In.open(Hr.ALERT_ERRORS.PROJECT_ID_NOT_CONFIGURED,"error");return}if(((s=e.adapters)==null?void 0:s.find(i=>i.namespace===Y.CHAIN.EVM))&&e.siweConfig){if(e.siwx)throw new Error("Cannot set both `siweConfig` and `siwx` options");te.setSIWX(e.siweConfig.mapToSIWX())}}getDefaultMetaData(){var e,n,r,s;return Ae.isClient()?{name:((n=(e=document.getElementsByTagName("title"))==null?void 0:e[0])==null?void 0:n.textContent)||"",description:((r=document.querySelector('meta[property="og:description"]'))==null?void 0:r.content)||"",url:window.location.origin,icons:[((s=document.querySelector('link[rel~="icon"]'))==null?void 0:s.href)||""]}:null}setUnsupportedNetwork(e){const n=this.getActiveChainNamespace();if(n){const r=Yh.getUnsupportedNetwork(`${n}:${e}`);U.setActiveCaipNetwork(r)}}getDefaultNetwork(){return Yh.getCaipNetworkFromStorage(this.defaultCaipNetwork)}extendCaipNetwork(e,n){return Yh.extendCaipNetwork(e,{customNetworkImageUrls:n.chainImages,projectId:n.projectId})}extendCaipNetworks(e){return Yh.extendCaipNetworks(e.networks,{customNetworkImageUrls:e.chainImages,customRpcUrls:e.customRpcUrls,projectId:e.projectId})}extendDefaultCaipNetwork(e){const n=e.networks.find(s=>{var i;return s.id===((i=e.defaultNetwork)==null?void 0:i.id)});return n?Yh.extendCaipNetwork(n,{customNetworkImageUrls:e.chainImages,customRpcUrls:e.customRpcUrls,projectId:e.projectId}):void 0}async disconnectNamespace(e,n){try{this.setLoading(!0,e);let r={connections:[]};const s=this.getAdapter(e),{caipAddress:i}=U.getAccountData(e)||{};return(i||!te.state.enableReconnect)&&(s!=null&&s.disconnect)&&(r=await s.disconnect({id:n})),this.setLoading(!1,e),r}catch(r){throw this.setLoading(!1,e),new Error(`Failed to disconnect chains: ${r.message}`)}}createClients(){this.connectionControllerClient={connectWalletConnect:async()=>{var u;const e=U.state.activeChain,n=this.getAdapter(e),r=(u=this.getCaipNetwork(e))==null?void 0:u.id,s=me.getConnections(e),i=this.remoteFeatures.multiWallet,a=s.length>0;if(!n)throw new Error("Adapter not found");const o=await n.connectWalletConnect(r);(!a||!i)&&this.close(),this.setClientId((o==null?void 0:o.clientId)||null),le.setConnectedNamespaces([...U.state.chains.keys()]),await this.syncWalletConnectAccount(),await Gs.initializeIfEnabled()},connectExternal:async({id:e,address:n,info:r,type:s,provider:i,chain:a,caipNetwork:o,socialUri:l})=>{var g,m,y,b,w,x;const u=U.state.activeChain,d=a||u,h=this.getAdapter(d);if(a&&a!==u&&!o){const A=this.getCaipNetworks().find(T=>T.chainNamespace===a);A&&this.setCaipNetwork(A)}if(!h)throw new Error("Adapter not found");const f=this.getCaipNetwork(d),p=await h.connect({id:e,address:n,info:r,type:s,provider:i,socialUri:l,chainId:(o==null?void 0:o.id)||(f==null?void 0:f.id),rpcUrl:((y=(m=(g=o==null?void 0:o.rpcUrls)==null?void 0:g.default)==null?void 0:m.http)==null?void 0:y[0])||((x=(w=(b=f==null?void 0:f.rpcUrls)==null?void 0:b.default)==null?void 0:w.http)==null?void 0:x[0])});if(p)return le.addConnectedNamespace(d),this.syncProvider({...p,chainNamespace:d}),this.setStatus("connected",d),this.syncConnectedWalletInfo(d),le.removeDisconnectedConnectorId(e,d),{address:p.address}},reconnectExternal:async({id:e,info:n,type:r,provider:s})=>{var o;const i=U.state.activeChain,a=this.getAdapter(i);a!=null&&a.reconnect&&(await(a==null?void 0:a.reconnect({id:e,info:n,type:r,provider:s,chainId:(o=this.getCaipNetwork())==null?void 0:o.id})),le.addConnectedNamespace(i),this.syncConnectedWalletInfo(i))},disconnect:async e=>{var u;const{id:n,chainNamespace:r,initialDisconnect:s}=e||{},i=Array.from(U.state.chains.keys()),a=pe.getConnectorId(r||U.state.activeChain),o=n===Y.CONNECTOR_ID.AUTH||a===Y.CONNECTOR_ID.AUTH,l=n===Y.CONNECTOR_ID.WALLET_CONNECT||a===Y.CONNECTOR_ID.WALLET_CONNECT;try{let d=r?[r]:i;(l||o)&&(d=i);const h=d.map(async g=>{let m=n;(l||o)&&!n&&(m=a),s&&o&&(le.deleteConnectedSocialProvider(),d.forEach(b=>{le.addDisconnectedConnectorId(m||"",b)}));const y=await this.disconnectNamespace(g,m);y&&y.connections.forEach(b=>{b.connectorId===Y.CONNECTOR_ID.AUTH&&le.deleteConnectedSocialProvider(),le.addDisconnectedConnectorId(b.connectorId,g)}),s&&this.onDisconnectNamespace({chainNamespace:g,closeModal:!1})}),f=await Promise.allSettled(h);_t.resetSend(),me.resetWcConnection(),(u=Gs.getSIWX())!=null&&u.signOutOnDisconnect&&await Gs.clearSessions(),pe.setFilterByNamespace(void 0),me.syncStorageConnections();const p=f.filter(g=>g.status==="rejected");if(p.length>0)throw new Error(p.map(g=>g.reason.message).join(", "));Mt.sendEvent({type:"track",event:"DISCONNECT_SUCCESS",properties:{namespace:r||"all"}})}catch(d){throw new Error(`Failed to disconnect chains: ${d.message}`)}},checkInstalled:e=>e?e.some(n=>{var r;return!!((r=window.ethereum)!=null&&r[String(n)])}):!!window.ethereum,signMessage:async e=>{const n=this.getAdapter(U.state.activeChain),r=await(n==null?void 0:n.signMessage({message:e,address:_e.state.address,provider:pt.getProvider(U.state.activeChain)}));return(r==null?void 0:r.signature)||""},sendTransaction:async e=>{const n=e.chainNamespace;if(It.SEND_SUPPORTED_NAMESPACES.includes(n)){const r=this.getAdapter(U.state.activeChain),s=pt.getProvider(n),i=await(r==null?void 0:r.sendTransaction({...e,caipNetwork:this.getCaipNetwork(),provider:s}));return(i==null?void 0:i.hash)||""}return""},estimateGas:async e=>{if(e.chainNamespace===Y.CHAIN.EVM){const n=this.getAdapter(U.state.activeChain),r=pt.getProvider(U.state.activeChain),s=this.getCaipNetwork();if(!s)throw new Error("CaipNetwork is undefined");const i=await(n==null?void 0:n.estimateGas({...e,provider:r,caipNetwork:s}));return(i==null?void 0:i.gas)||0n}return 0n},getEnsAvatar:async()=>{var e;return await this.syncIdentity({address:_e.state.address,chainId:Number((e=this.getCaipNetwork())==null?void 0:e.id),chainNamespace:U.state.activeChain}),_e.state.profileImage||!1},getEnsAddress:async e=>await io.resolveReownName(e),writeContract:async e=>{const n=this.getAdapter(U.state.activeChain),r=this.getCaipNetwork(),s=this.getCaipAddress(),i=pt.getProvider(U.state.activeChain);if(!r||!s)throw new Error("CaipNetwork or CaipAddress is undefined");const a=await(n==null?void 0:n.writeContract({...e,caipNetwork:r,provider:i,caipAddress:s}));return a==null?void 0:a.hash},parseUnits:(e,n)=>{const r=this.getAdapter(U.state.activeChain);return(r==null?void 0:r.parseUnits({value:e,decimals:n}))??0n},formatUnits:(e,n)=>{const r=this.getAdapter(U.state.activeChain);return(r==null?void 0:r.formatUnits({value:e,decimals:n}))??"0"},getCapabilities:async e=>{const n=this.getAdapter(U.state.activeChain);return await(n==null?void 0:n.getCapabilities(e))},grantPermissions:async e=>{const n=this.getAdapter(U.state.activeChain);return await(n==null?void 0:n.grantPermissions(e))},revokePermissions:async e=>{const n=this.getAdapter(U.state.activeChain);return n!=null&&n.revokePermissions?await n.revokePermissions(e):"0x"},walletGetAssets:async e=>{const n=this.getAdapter(U.state.activeChain);return await(n==null?void 0:n.walletGetAssets(e))??{}},updateBalance:e=>{const n=this.getCaipNetwork(e);!n||!_e.state.address||this.updateNativeBalance(_e.state.address,n==null?void 0:n.id,e)}},this.networkControllerClient={switchCaipNetwork:async e=>await this.switchCaipNetwork(e),getApprovedCaipNetworksData:async()=>this.getApprovedCaipNetworksData()},me.setClient(this.connectionControllerClient)}getApprovedCaipNetworksData(){var n,r,s,i,a;if(pt.getProviderId(U.state.activeChain)===vt.CONNECTOR_TYPE_WALLET_CONNECT){const o=(r=(n=this.universalProvider)==null?void 0:n.session)==null?void 0:r.namespaces;return{supportsAllNetworks:((a=(i=(s=this.universalProvider)==null?void 0:s.session)==null?void 0:i.peer)==null?void 0:a.metadata.name)==="MetaMask Wallet",approvedCaipNetworkIds:this.getChainsFromNamespaces(o)}}return{supportsAllNetworks:!0,approvedCaipNetworkIds:[]}}async switchCaipNetwork(e){if(!e)return;const n=e.chainNamespace;if(this.getAddressByChainNamespace(e.chainNamespace)){const s=pt.getProvider(n),i=pt.getProviderId(n);if(e.chainNamespace===U.state.activeChain){const a=this.getAdapter(n);await(a==null?void 0:a.switchNetwork({caipNetwork:e,provider:s,providerType:i}))}else if(this.setCaipNetwork(e),i===vt.CONNECTOR_TYPE_WALLET_CONNECT)this.syncWalletConnectAccount();else{const a=this.getAddressByChainNamespace(n);a&&this.syncAccount({address:a,chainId:e.id,chainNamespace:n})}}else this.setCaipNetwork(e)}getChainsFromNamespaces(e={}){return Object.values(e).flatMap(n=>{const r=n.chains||[],s=n.accounts.map(i=>{const{chainId:a,chainNamespace:o}=Wr.parseCaipAddress(i);return`${o}:${a}`});return Array.from(new Set([...r,...s]))})}createAdapters(e){return this.createClients(),this.chainNamespaces.reduce((n,r)=>{var i;const s=e==null?void 0:e.find(a=>a.namespace===r);return s?(s.construct({namespace:r,projectId:(i=this.options)==null?void 0:i.projectId,networks:this.getCaipNetworks()}),n[r]=s):n[r]=new T0e({namespace:r,networks:this.getCaipNetworks()}),n},{})}async initChainAdapter(e){var n;this.onConnectors(e),this.listenAdapter(e),await((n=this.chainAdapters)==null?void 0:n[e].syncConnectors(this.options,this)),await this.createUniversalProviderForAdapter(e)}async initChainAdapters(){await Promise.all(this.chainNamespaces.map(async e=>{await this.initChainAdapter(e)}))}onConnectors(e){const n=this.getAdapter(e);n==null||n.on("connectors",this.setConnectors.bind(this))}listenAdapter(e){const n=this.getAdapter(e);if(!n)return;const r=le.getConnectionStatus();te.state.enableReconnect===!1?this.setStatus("disconnected",e):r==="connected"?this.setStatus("connecting",e):r==="disconnected"?(le.clearAddressCache(),this.setStatus(r,e)):this.setStatus(r,e),n.on("switchNetwork",({address:s,chainId:i})=>{const a=this.getCaipNetworks().find(u=>u.id.toString()===i.toString()||u.caipNetworkId.toString()===i.toString()),o=U.state.activeChain===e,l=U.getAccountProp("address",e);if(a){const u=o&&s?s:l;u&&this.syncAccount({address:u,chainId:a.id,chainNamespace:e})}else this.setUnsupportedNetwork(i)}),n.on("disconnect",()=>{this.onDisconnectNamespace({chainNamespace:e})}),n.on("connections",s=>{this.setConnections(s,e)}),n.on("pendingTransactions",()=>{const s=_e.state.address,i=U.state.activeCaipNetwork;!s||!(i!=null&&i.id)||this.updateNativeBalance(s,i.id,i.chainNamespace)}),n.on("accountChanged",({address:s,chainId:i,connector:a})=>{var l,u;const o=U.state.activeChain===e;a!=null&&a.provider&&(this.syncProvider({id:a.id,type:a.type,provider:a.provider,chainNamespace:e}),this.syncConnectedWalletInfo(e)),o&&i?this.syncAccount({address:s,chainId:i,chainNamespace:e}):o&&((l=U.state.activeCaipNetwork)!=null&&l.id)?this.syncAccount({address:s,chainId:(u=U.state.activeCaipNetwork)==null?void 0:u.id,chainNamespace:e}):this.syncAccountInfo(s,i,e),le.addConnectedNamespace(e)})}async createUniversalProviderForAdapter(e){var n,r,s;await this.getUniversalProvider(),this.universalProvider&&await((s=(r=(n=this.chainAdapters)==null?void 0:n[e])==null?void 0:r.setUniversalProvider)==null?void 0:s.call(r,this.universalProvider))}async syncExistingConnection(){await Promise.allSettled(this.chainNamespaces.map(e=>this.syncNamespaceConnection(e)))}async unSyncExistingConnection(){try{await Promise.allSettled(this.chainNamespaces.map(e=>me.disconnect({namespace:e,initialDisconnect:!0})))}catch(e){console.error("Error disconnecting existing connections:",e)}}async syncNamespaceConnection(e){try{e===Y.CHAIN.EVM&&Ae.isSafeApp()&&pe.setConnectorId(Y.CONNECTOR_ID.SAFE,e);const n=pe.getConnectorId(e);switch(this.setStatus("connecting",e),n){case Y.CONNECTOR_ID.WALLET_CONNECT:await this.syncWalletConnectAccount();break;case Y.CONNECTOR_ID.AUTH:break;default:await this.syncAdapterConnection(e)}}catch(n){console.warn("AppKit couldn't sync existing connection",n),this.setStatus("disconnected",e)}}onDisconnectNamespace(e){const{chainNamespace:n,closeModal:r}=e||{};U.resetAccount(n),U.resetNetwork(n),pe.removeConnectorId(n),le.removeConnectedNamespace(n),pt.resetChain(n),this.setUser(void 0,n),this.setStatus("disconnected",n),this.setConnectedWalletInfo(void 0,n),r!==!1&&Ct.close()}async syncAdapterConnections(){await Promise.allSettled(this.chainNamespaces.map(e=>{var s;const n=this.getCaipAddress(e),r=this.getCaipNetwork(e);return(s=this.chainAdapters)==null?void 0:s[e].syncConnections({connectToFirstConnector:!n,caipNetwork:r,getConnectorStorageInfo(i){const o=le.getConnections()[e]??[];return{hasDisconnected:le.isConnectorDisconnected(i,e),hasConnected:o.some(l=>qn.isLowerCaseMatch(l.connectorId,i))}}})}))}async syncAdapterConnection(e){var o,l,u;const n=this.getAdapter(e),r=pe.getConnectorId(e),s=this.getCaipNetwork(e),a=pe.getConnectors(e).find(d=>d.id===r);try{if(!n||!a)throw new Error(`Adapter or connector not found for namespace ${e}`);if(!(s!=null&&s.id))throw new Error("CaipNetwork not found");const d=await(n==null?void 0:n.syncConnection({namespace:e,id:a.id,chainId:s.id,rpcUrl:(u=(l=(o=s==null?void 0:s.rpcUrls)==null?void 0:o.default)==null?void 0:l.http)==null?void 0:u[0]}));d?(this.syncProvider({...d,chainNamespace:e}),await this.syncAccount({...d,chainNamespace:e}),this.setStatus("connected",e)):this.setStatus("disconnected",e)}catch{this.onDisconnectNamespace({chainNamespace:e,closeModal:!1})}}async syncWalletConnectAccount(){var r,s;const e=Object.keys(((s=(r=this.universalProvider)==null?void 0:r.session)==null?void 0:s.namespaces)||{}),n=this.chainNamespaces.map(async i=>{var d,h,f,p,g;const a=this.getAdapter(i),o=((p=(f=(h=(d=this.universalProvider)==null?void 0:d.session)==null?void 0:h.namespaces)==null?void 0:f[i])==null?void 0:p.accounts)||[],l=(g=U.state.activeCaipNetwork)==null?void 0:g.id,u=o.find(m=>{const{chainId:y}=Wr.parseCaipAddress(m);return y===(l==null?void 0:l.toString())})||o[0];if(u){const m=Wr.validateCaipAddress(u),{chainId:y,address:b}=Wr.parseCaipAddress(m);if(pt.setProviderId(i,vt.CONNECTOR_TYPE_WALLET_CONNECT),this.caipNetworks&&U.state.activeCaipNetwork&&(a==null?void 0:a.namespace)!==Y.CHAIN.EVM){const w=a==null?void 0:a.getWalletConnectProvider({caipNetworks:this.getCaipNetworks(),provider:this.universalProvider,activeCaipNetwork:U.state.activeCaipNetwork});pt.setProvider(i,w)}else pt.setProvider(i,this.universalProvider);pe.setConnectorId(Y.CONNECTOR_ID.WALLET_CONNECT,i),le.addConnectedNamespace(i),await this.syncAccount({address:b,chainId:y,chainNamespace:i})}else e.includes(i)&&this.setStatus("disconnected",i);this.syncConnectedWalletInfo(i),await U.setApprovedCaipNetworksData(i)});await Promise.all(n)}syncProvider({type:e,provider:n,id:r,chainNamespace:s}){pt.setProviderId(s,e),pt.setProvider(s,n),pe.setConnectorId(r,s)}async syncAccount(e){var h,f;const n=e.chainNamespace===U.state.activeChain,r=U.getCaipNetworkByNamespace(e.chainNamespace,e.chainId),{address:s,chainId:i,chainNamespace:a}=e,{chainId:o}=le.getActiveNetworkProps(),l=i||o,u=((h=U.state.activeCaipNetwork)==null?void 0:h.name)===Y.UNSUPPORTED_NETWORK_NAME,d=U.getNetworkProp("supportsAllNetworks",a);if(this.setStatus("connected",a),!(u&&!d)&&l){let p=this.getCaipNetworks().find(y=>y.id.toString()===l.toString()),g=this.getCaipNetworks().find(y=>y.chainNamespace===a);if(!d&&!p&&!g){const y=this.getApprovedCaipNetworkIds()||[],b=y.find(x=>{var A;return((A=Wr.parseCaipNetworkId(x))==null?void 0:A.chainId)===l.toString()}),w=y.find(x=>{var A;return((A=Wr.parseCaipNetworkId(x))==null?void 0:A.chainNamespace)===a});p=this.getCaipNetworks().find(x=>x.caipNetworkId===b),g=this.getCaipNetworks().find(x=>x.caipNetworkId===w||"deprecatedCaipNetworkId"in x&&x.deprecatedCaipNetworkId===w)}const m=p||g;(m==null?void 0:m.chainNamespace)===U.state.activeChain?te.state.enableNetworkSwitch&&!te.state.allowUnsupportedChain&&((f=U.state.activeCaipNetwork)==null?void 0:f.name)===Y.UNSUPPORTED_NETWORK_NAME?U.showUnsupportedChainUI():this.setCaipNetwork(m):n||r&&this.setCaipNetworkOfNamespace(r,a),this.syncConnectedWalletInfo(a),qn.isLowerCaseMatch(s,_e.state.address)||this.syncAccountInfo(s,m==null?void 0:m.id,a),n?await this.syncBalance({address:s,chainId:m==null?void 0:m.id,chainNamespace:a}):await this.syncBalance({address:s,chainId:r==null?void 0:r.id,chainNamespace:a})}}async syncAccountInfo(e,n,r){const s=this.getCaipAddress(r),i=n||(s==null?void 0:s.split(":")[1]);if(!i)return;const a=`${r}:${i}:${e}`;this.setCaipAddress(a,r),await this.syncIdentity({address:e,chainId:i,chainNamespace:r})}async syncReownName(e,n){try{const r=await this.getReownName(e);if(r[0]){const s=r[0];this.setProfileName(s.name,n)}else this.setProfileName(null,n)}catch{this.setProfileName(null,n)}}syncConnectedWalletInfo(e){var s;const n=pe.getConnectorId(e),r=pt.getProviderId(e);if(r===vt.CONNECTOR_TYPE_ANNOUNCED||r===vt.CONNECTOR_TYPE_INJECTED){if(n){const i=this.getConnectors().find(a=>{var d,h;const o=a.id===n,l=((d=a.info)==null?void 0:d.rdns)===n,u=(h=a.connectors)==null?void 0:h.some(f=>{var p;return f.id===n||((p=f.info)==null?void 0:p.rdns)===n});return o||l||!!u});if(i){const{info:a,name:o,imageUrl:l}=i,u=l||this.getConnectorImage(i);this.setConnectedWalletInfo({name:o,icon:u,...a},e)}}}else if(r===vt.CONNECTOR_TYPE_WALLET_CONNECT){const i=pt.getProvider(e);i!=null&&i.session&&this.setConnectedWalletInfo({...i.session.peer.metadata,name:i.session.peer.metadata.name,icon:(s=i.session.peer.metadata.icons)==null?void 0:s[0]},e)}else if(n&&n===Y.CONNECTOR_ID.COINBASE){const i=this.getConnectors().find(a=>a.id===Y.CONNECTOR_ID.COINBASE);this.setConnectedWalletInfo({name:"Coinbase Wallet",icon:this.getConnectorImage(i)},e)}}async syncBalance(e){!_D.getNetworksByNamespace(this.getCaipNetworks(),e.chainNamespace).find(r=>{var s;return r.id.toString()===((s=e.chainId)==null?void 0:s.toString())})||!e.chainId||await this.updateNativeBalance(e.address,e.chainId,e.chainNamespace)}async ready(){await this.readyPromise}async updateNativeBalance(e,n,r){const s=this.getAdapter(r),i=U.getCaipNetworkByNamespace(r,n);if(s){const a=await s.getBalance({address:e,chainId:n,caipNetwork:i,tokens:this.options.tokens});return this.setBalance(a.balance,a.symbol,r),a}}async initializeUniversalAdapter(){var r,s,i,a,o,l,u,d,h,f;const e=Ope.createLogger((p,...g)=>{p&&this.handleAlertError(p),console.error(...g)}),n={projectId:(r=this.options)==null?void 0:r.projectId,metadata:{name:(s=this.options)!=null&&s.metadata?(i=this.options)==null?void 0:i.metadata.name:"",description:(a=this.options)!=null&&a.metadata?(o=this.options)==null?void 0:o.metadata.description:"",url:(l=this.options)!=null&&l.metadata?(u=this.options)==null?void 0:u.metadata.url:"",icons:(d=this.options)!=null&&d.metadata?(h=this.options)==null?void 0:h.metadata.icons:[""]},logger:e};te.setManualWCControl(!!((f=this.options)!=null&&f.manualWCControl)),this.universalProvider=this.options.universalProvider??await ppe.init(n),te.state.enableReconnect===!1&&this.universalProvider.session&&await this.universalProvider.disconnect(),this.listenWalletConnect()}listenWalletConnect(){this.universalProvider&&this.chainNamespaces.forEach(e=>{io.listenWcProvider({universalProvider:this.universalProvider,namespace:e,onDisplayUri:n=>{me.setUri(n)},onConnect:()=>{me.finalizeWcConnection()},onDisconnect:()=>{U.state.noAdapters&&this.resetAccount(e),me.resetWcConnection()},onChainChanged:n=>{const r=U.state.activeChain,s=pe.state.activeConnectorIds[r]===Y.CONNECTOR_ID.WALLET_CONNECT;if(r===e&&(U.state.noAdapters||s)){const i=this.getCaipNetworks().find(o=>o.id.toString()===n.toString()||o.caipNetworkId.toString()===n.toString()),a=this.getCaipNetwork();if(!i){this.setUnsupportedNetwork(n);return}(a==null?void 0:a.id.toString())!==(i==null?void 0:i.id.toString())&&(a==null?void 0:a.chainNamespace)===(i==null?void 0:i.chainNamespace)&&this.setCaipNetwork(i)}},onAccountsChanged:n=>{const r=U.state.activeChain,s=pe.state.activeConnectorIds[r]===Y.CONNECTOR_ID.WALLET_CONNECT;if(r===e&&(U.state.noAdapters||s)&&n.length>0){const i=n[0];this.syncAccount({address:i.address,chainId:i.chainId,chainNamespace:i.chainNamespace})}}})})}createUniversalProvider(){var e;return!this.universalProviderInitPromise&&Ae.isClient()&&((e=this.options)!=null&&e.projectId)&&(this.universalProviderInitPromise=this.initializeUniversalAdapter()),this.universalProviderInitPromise}async getUniversalProvider(){if(!this.universalProvider)try{await this.createUniversalProvider()}catch(e){Mt.sendEvent({type:"error",event:"INTERNAL_SDK_ERROR",properties:{errorType:"UniversalProviderInitError",errorMessage:e instanceof Error?e.message:"Unknown",uncaught:!1}}),console.error("AppKit:getUniversalProvider - Cannot create provider",e)}return this.universalProvider}handleAlertError(e){const n=Object.entries(Hr.UniversalProviderErrors).find(([,{message:o}])=>e.message.includes(o)),[r,s]=n??[],{message:i,alertErrorKey:a}=s??{};if(r&&i&&!this.reportedAlertErrors[r]){const o=Hr.ALERT_ERRORS[a];o&&(In.open(o,"error"),this.reportedAlertErrors[r]=!0)}}getAdapter(e){var n;if(e)return(n=this.chainAdapters)==null?void 0:n[e]}createAdapter(e){var s;if(!e)return;const n=e.namespace;if(!n)return;this.createClients();const r=e;r.namespace=n,r.construct({namespace:n,projectId:(s=this.options)==null?void 0:s.projectId,networks:this.getCaipNetworks()}),this.chainNamespaces.includes(n)||this.chainNamespaces.push(n),this.chainAdapters&&(this.chainAdapters[n]=r)}async open(e){if(await this.injectModalUi(),e!=null&&e.uri&&me.setUri(e.uri),e!=null&&e.arguments)switch(e==null?void 0:e.view){case"Swap":return Ct.open({...e,data:{swap:e.arguments}})}return Ct.open(e)}async close(){await this.injectModalUi(),Ct.close()}setLoading(e,n){Ct.setLoading(e,n)}async disconnect(e){await me.disconnect({namespace:e})}getSIWX(){return te.state.siwx}getError(){return""}getChainId(){var e;return(e=U.state.activeCaipNetwork)==null?void 0:e.id}async switchNetwork(e){const n=this.getCaipNetworks().find(r=>r.id===e.id);if(!n){In.open(Hr.ALERT_ERRORS.SWITCH_NETWORK_NOT_FOUND,"error");return}await U.switchActiveNetwork(n)}getWalletProvider(){return U.state.activeChain?pt.state.providers[U.state.activeChain]:null}getWalletProviderType(){return pt.getProviderId(U.state.activeChain)}subscribeProviders(e){return pt.subscribeProviders(e)}getThemeMode(){return ws.state.themeMode}getThemeVariables(){return ws.state.themeVariables}setThemeMode(e){ws.setThemeMode(e),TB(ws.state.themeMode)}setTermsConditionsUrl(e){te.setTermsConditionsUrl(e)}setPrivacyPolicyUrl(e){te.setPrivacyPolicyUrl(e)}setThemeVariables(e){ws.setThemeVariables(e),v0e(ws.state.themeVariables)}subscribeTheme(e){return ws.subscribe(e)}subscribeConnections(e){return this.remoteFeatures.multiWallet?me.subscribe(e):(In.open(Y.REMOTE_FEATURES_ALERTS.MULTI_WALLET_NOT_ENABLED.DEFAULT,"info"),()=>{})}getWalletInfo(e){return e?U.getAccountProp("connectedWalletInfo",e):_e.state.connectedWalletInfo}getAccount(e){const n=pe.getAuthConnector(e),r=U.getAccountData(e),s=U.state.activeChain,i=le.getConnectedConnectorId(e||s),o=me.getConnections(e).flatMap(l=>l.accounts.map(({address:u,type:d})=>Ae.createAccount(e,u,d||"eoa")));if(r)return{allAccounts:o,caipAddress:r.caipAddress,address:Ae.getPlainAddress(r.caipAddress),isConnected:!!r.caipAddress,status:r.status,embeddedWalletInfo:n&&i===Y.CONNECTOR_ID.AUTH?{user:r.user?{...r.user,username:le.getConnectedSocialUsername()}:void 0,authProvider:r.socialProvider||"email",accountType:ei(e||s),isSmartAccountDeployed:!!r.smartAccountDeployed}:void 0}}subscribeAccount(e,n){const r=()=>{const s=this.getAccount(n);s&&e(s)};n?U.subscribeChainProp("accountState",r,n):U.subscribe(r),pe.subscribe(r)}subscribeNetwork(e){return U.subscribe(({activeCaipNetwork:n})=>{e({caipNetwork:n,chainId:n==null?void 0:n.id,caipNetworkId:n==null?void 0:n.caipNetworkId})})}subscribeWalletInfo(e,n){return n?_e.subscribeKey("connectedWalletInfo",e,n):_e.subscribeKey("connectedWalletInfo",e)}subscribeShouldUpdateToAddress(e){_e.subscribeKey("shouldUpdateToAddress",e)}subscribeCaipNetworkChange(e){U.subscribeKey("activeCaipNetwork",e)}getState(){return no.state}getRemoteFeatures(){return te.state.remoteFeatures}subscribeState(e){return no.subscribe(e)}subscribeRemoteFeatures(e){return te.subscribeKey("remoteFeatures",e)}showErrorMessage(e){Ja.showError(e)}showSuccessMessage(e){Ja.showSuccess(e)}getEvent(){return{...Mt.state}}subscribeEvents(e){return Mt.subscribe(e)}replace(e){Ve.replace(e)}redirect(e){Ve.push(e)}popTransactionStack(e){Ve.popTransactionStack(e)}isOpen(){return Ct.state.open}isTransactionStackEmpty(){return Ve.state.transactionStack.length===0}static getInstance(){return this.instance}updateFeatures(e){te.setFeatures(e)}updateRemoteFeatures(e){te.setRemoteFeatures(e)}updateOptions(e){const r={...te.state||{},...e};te.setOptions(r)}setConnectMethodsOrder(e){te.setConnectMethodsOrder(e)}setWalletFeaturesOrder(e){te.setWalletFeaturesOrder(e)}setCollapseWallets(e){te.setCollapseWallets(e)}setSocialsOrder(e){te.setSocialsOrder(e)}getConnectMethodsOrder(){return sT.getConnectOrderMethod(te.state.features,pe.getConnectors())}addNetwork(e,n){if(this.chainAdapters&&!this.chainAdapters[e])throw new Error(`Adapter for namespace ${e} doesn't exist`);const r=this.extendCaipNetwork(n,this.options);this.getCaipNetworks().find(s=>s.id===r.id)||U.addNetwork(r)}removeNetwork(e,n){if(this.chainAdapters&&!this.chainAdapters[e])throw new Error(`Adapter for namespace ${e} doesn't exist`);this.getCaipNetworks().find(s=>s.id===n)&&U.removeNetwork(e,n)}}let wR=!1;class I0e extends _0e{async onAuthProviderConnected(e){e.message&&e.signature&&e.siwxMessage&&await Gs.addEmbeddedWalletSession({chainId:e.siwxMessage.chainId,accountAddress:e.address,notBefore:e.siwxMessage.notBefore,statement:e.siwxMessage.statement,resources:e.siwxMessage.resources,requestId:e.siwxMessage.requestId,issuedAt:e.siwxMessage.issuedAt,domain:e.siwxMessage.domain,uri:e.siwxMessage.uri,version:e.siwxMessage.version,nonce:e.siwxMessage.nonce},e.message,e.signature);const n=U.state.activeChain,r=n===Y.CHAIN.EVM?`eip155:${e.chainId}:${e.address}`:`${e.chainId}:${e.address}`,s=te.state.defaultAccountTypes[n],i=ei(n),a=e.preferredAccountType||i||s;qn.isLowerCaseMatch(e.address,_e.state.address)||this.syncIdentity({address:e.address,chainId:e.chainId,chainNamespace:n}),this.setCaipAddress(r,n);const{signature:o,siwxMessage:l,message:u,...d}=e;this.setUser({..._e.state.user||{},...d},n),this.setSmartAccountDeployed(!!e.smartAccountDeployed,n),this.setPreferredAccountType(a,n),this.setLoading(!1,n)}setupAuthConnectorListeners(e){e.onRpcRequest(n=>{Ys.checkIfRequestExists(n)?Ys.checkIfRequestIsSafe(n)||this.handleUnsafeRPCRequest():(this.open(),console.error(Mn.RPC_METHOD_NOT_ALLOWED_MESSAGE,{method:n.method}),setTimeout(()=>{this.showErrorMessage(Mn.RPC_METHOD_NOT_ALLOWED_UI_MESSAGE)},300),e.rejectRpcRequests())}),e.onRpcError(()=>{this.isOpen()&&(this.isTransactionStackEmpty()?this.close():this.popTransactionStack("error"))}),e.onRpcSuccess((n,r)=>{const s=Ys.checkIfRequestIsSafe(r),i=_e.state.address,a=U.state.activeCaipNetwork;s||(i&&(a!=null&&a.id)&&this.updateNativeBalance(i,a.id,a.chainNamespace),this.isTransactionStackEmpty()?this.close():this.popTransactionStack("success"))}),e.onNotConnected(()=>{const n=U.state.activeChain;pe.getConnectorId(n)===Y.CONNECTOR_ID.AUTH&&(this.setCaipAddress(void 0,n),this.setLoading(!1,n))}),e.onConnect(this.onAuthProviderConnected.bind(this)),e.onSocialConnected(this.onAuthProviderConnected.bind(this)),e.onSetPreferredAccount(({address:n,type:r})=>{n&&this.setPreferredAccountType(r,U.state.activeChain)})}async syncAuthConnectorTheme(e){if(!e)return;const n=ws.getSnapshot(),r=te.getSnapshot();await Promise.all([e.syncDappData({metadata:r.metadata,sdkVersion:r.sdkVersion,projectId:r.projectId,sdkType:r.sdkType}),e.syncTheme({themeMode:n.themeMode,themeVariables:n.themeVariables,w3mThemeVariables:Qo(n.themeVariables,n.themeMode)})])}async syncAuthConnector(e,n){var u,d,h,f;const r=Y.AUTH_CONNECTOR_SUPPORTED_CHAINS.includes(n),s=n===U.state.activeChain;if(!r)return;this.setLoading(!0,n);const i=e.getLoginEmailUsed();this.setLoading(i,n),i&&this.setStatus("connecting",n);const a=e.getEmail(),o=e.getUsername();this.setUser({...((u=_e.state)==null?void 0:u.user)||{},username:o,email:a},n),this.setupAuthConnectorListeners(e);const{isConnected:l}=await e.isConnected();if(await this.syncAuthConnectorTheme(e),n&&r&&s){const p=await e.getSmartAccountEnabledNetworks();U.setSmartAccountEnabledNetworks((p==null?void 0:p.smartAccountEnabledNetworks)||[],n),l&&((d=this.connectionControllerClient)!=null&&d.connectExternal)?(await((f=this.connectionControllerClient)==null?void 0:f.connectExternal({id:Y.CONNECTOR_ID.AUTH,info:{name:Y.CONNECTOR_ID.AUTH},type:vt.CONNECTOR_TYPE_AUTH,provider:e,chainId:(h=U.state.activeCaipNetwork)==null?void 0:h.id,chain:n})),this.setStatus("connected",n)):pe.getConnectorId(n)===Y.CONNECTOR_ID.AUTH&&(this.setStatus("disconnected",n),le.removeConnectedNamespace(n))}this.setLoading(!1,n)}async checkExistingTelegramSocialConnection(e){var n;try{if(!Ae.isTelegram())return;const r=le.getTelegramSocialProvider();if(!r||!Ae.isClient())return;const i=new URL(window.location.href).searchParams.get("result_uri");if(!i)return;_e.setSocialProvider(r,e),await((n=this.authProvider)==null?void 0:n.init());const a=pe.getAuthConnector();r&&a&&(this.setLoading(!0,e),await me.connectExternal({id:a.id,type:a.type,socialUri:i},a.chain),le.setConnectedSocialProvider(r),le.removeTelegramSocialProvider(),Mt.sendEvent({type:"track",event:"SOCIAL_LOGIN_SUCCESS",properties:{provider:r}}))}catch(r){this.setLoading(!1,e),console.error("checkExistingSTelegramocialConnection error",r)}try{const r=new URL(window.location.href);r.searchParams.delete("result_uri"),window.history.replaceState({},document.title,r.toString())}catch(r){console.error("tma social login failed",r)}}createAuthProvider(e){var u,d,h,f;if(!Y.AUTH_CONNECTOR_SUPPORTED_CHAINS.includes(e))return;const r=(u=this.remoteFeatures)==null?void 0:u.email,s=Array.isArray((d=this.remoteFeatures)==null?void 0:d.socials)&&this.remoteFeatures.socials.length>0,i=r||s,o=qn.getActiveNamespaceConnectedToAuth()||e;!this.authProvider&&((h=this.options)!=null&&h.projectId)&&i&&(this.authProvider=e0.getInstance({projectId:this.options.projectId,enableLogger:this.options.enableAuthLogger,chainId:(f=this.getCaipNetwork(o))==null?void 0:f.caipNetworkId,abortController:Hr.EmbeddedWalletAbortController,onTimeout:p=>{p==="iframe_load_failed"?In.open(Hr.ALERT_ERRORS.IFRAME_LOAD_FAILED,"error"):p==="iframe_request_timeout"?In.open(Hr.ALERT_ERRORS.IFRAME_REQUEST_TIMEOUT,"error"):p==="unverified_domain"&&In.open(Hr.ALERT_ERRORS.UNVERIFIED_DOMAIN,"error")},getActiveCaipNetwork:p=>U.getActiveCaipNetwork(p)}),no.subscribeOpen(p=>{var g;!p&&this.isTransactionStackEmpty()&&((g=this.authProvider)==null||g.rejectRpcRequests())}));const l=e===U.state.activeChain&&te.state.enableReconnect;te.state.enableReconnect===!1?this.syncAuthConnectorTheme(this.authProvider):this.authProvider&&l&&(this.syncAuthConnector(this.authProvider,e),this.checkExistingTelegramSocialConnection(e))}createAuthProviderForAdapter(e){var n,r,s;this.createAuthProvider(e),this.authProvider&&((s=(r=(n=this.chainAdapters)==null?void 0:n[e])==null?void 0:r.setAuthProvider)==null||s.call(r,this.authProvider))}initControllers(e){super.initControllers(e),this.options.excludeWalletIds&&Ue.initializeExcludedWallets({ids:this.options.excludeWalletIds})}async switchCaipNetwork(e){var a,o;if(!e)return;const n=U.state.activeChain,r=e.chainNamespace,s=this.getAddressByChainNamespace(r);if(r===n&&s){const l=this.getAdapter(r),u=pt.getProvider(r),d=pt.getProviderId(r);await(l==null?void 0:l.switchNetwork({caipNetwork:e,provider:u,providerType:d})),this.setCaipNetwork(e)}else{const u=pt.getProviderId(n)===vt.CONNECTOR_TYPE_AUTH,d=pt.getProviderId(r),h=d===vt.CONNECTOR_TYPE_AUTH,f=Y.AUTH_CONNECTOR_SUPPORTED_CHAINS.includes(r);if((u&&d===void 0||h)&&f)try{if(U.state.activeChain=e.chainNamespace,s){const p=this.getAdapter(r);await(p==null?void 0:p.switchNetwork({caipNetwork:e,provider:this.authProvider,providerType:d}))}else await((o=(a=this.connectionControllerClient)==null?void 0:a.connectExternal)==null?void 0:o.call(a,{id:Y.CONNECTOR_ID.AUTH,provider:this.authProvider,chain:r,chainId:e.id,type:vt.CONNECTOR_TYPE_AUTH,caipNetwork:e}));this.setCaipNetwork(e)}catch{const g=this.getAdapter(r);await(g==null?void 0:g.switchNetwork({caipNetwork:e,provider:this.authProvider,providerType:d}))}else if(d===vt.CONNECTOR_TYPE_WALLET_CONNECT){if(!U.state.noAdapters){const p=this.getAdapter(r),g=pt.getProvider(r),m=pt.getProviderId(r);await(p==null?void 0:p.switchNetwork({caipNetwork:e,provider:g,providerType:m}))}this.setCaipNetwork(e),this.syncWalletConnectAccount()}else this.setCaipNetwork(e),s&&this.syncAccount({address:s,chainId:e.id,chainNamespace:r})}}async initialize(e){var n;await super.initialize(e),(n=this.chainNamespaces)==null||n.forEach(r=>{this.createAuthProviderForAdapter(r)}),await this.injectModalUi(),no.set({initialized:!0})}async syncIdentity({address:e,chainId:n,chainNamespace:r}){var a;const s=`${r}:${n}`,i=(a=this.caipNetworks)==null?void 0:a.find(o=>o.caipNetworkId===s);if(r!==Y.CHAIN.EVM||i!=null&&i.testnet){this.setProfileName(null,r),this.setProfileImage(null,r);return}try{const{name:o,avatar:l}=await this.fetchIdentity({address:e,caipNetworkId:s});this.setProfileName(o,r),this.setProfileImage(l,r)}catch{await this.syncReownName(e,r),n!==1&&this.setProfileImage(null,r)}}syncConnectedWalletInfo(e){const n=pt.getProviderId(e);if(n===vt.CONNECTOR_TYPE_AUTH){const r=this.authProvider;if(r){const s=le.getConnectedSocialProvider()??"email",i=r.getEmail()??r.getUsername();this.setConnectedWalletInfo({name:n,identifier:i,social:s},e)}}else super.syncConnectedWalletInfo(e)}async injectModalUi(){if(Ae.isClient()&&!wR)try{const e={...It.DEFAULT_FEATURES,...this.options.features},n=this.remoteFeatures;if(await this.loadModalComponents(e,n),Ae.isClient()&&!document.querySelector("w3m-modal")){const s=document.createElement("w3m-modal");!te.state.disableAppend&&!te.state.enableEmbedded&&document.body.insertAdjacentElement("beforeend",s)}wR=!0}catch(e){console.error("Error injecting modal UI:",e)}}async loadModalComponents(e,n){if(!Ae.isClient())return;const r=[];(n.email||n.socials&&n.socials.length>0)&&r.push(Rn(()=>import("./embedded-wallet-BgK7AfOh.js"),__vite__mapDeps([2,3,4,5,6,7,8,9,10,11,12,13]))),n.email&&r.push(Rn(()=>import("./email-C7XoooS7.js"),__vite__mapDeps([14,3,13,7,12,6,11,15,8]))),n.socials&&r.push(Rn(()=>import("./socials-zNe22VqY.js"),__vite__mapDeps([16,3,17,6,18,19,12,20,11,7,13,21,5,22]))),n.swaps&&n.swaps.length>0&&r.push(Rn(()=>import("./swaps-Cp9h8kX1.js"),__vite__mapDeps([23,3,11,7,24,25,26,5,12,22,8,6]))),e.send&&r.push(Rn(()=>import("./send-DWuK9CrJ.js"),__vite__mapDeps([27,3,11,7,12,6,18,13,26,5,8,28,29]))),e.receive&&r.push(Rn(()=>import("./receive-BPQg1HGF.js"),__vite__mapDeps([30,3,31,5,21]))),n.onramp&&n.onramp.length>0&&r.push(Rn(()=>import("./onramp-CVFeakkK.js"),__vite__mapDeps([32,3,33,22,12,5,7,34,17,6,18,35,13,11,20,8]))),n.activity&&r.push(Rn(()=>import("./transactions-nBh1CwKf.js"),__vite__mapDeps([36,3,37,33,22,12,13,5]))),e.pay&&r.push(Rn(()=>import("./index-BgMcmGav.js"),__vite__mapDeps([38,3,11,7,39,5,12,9,34,29,20]))),await Promise.all([...r,Rn(()=>import("./index-Ci0R3DWb.js"),__vite__mapDeps([40,3,5,7,28,12,41,25,9,34,11,10,39,37,33,22,13,24,29,6,8,15,17,18,19,4,20,31,21,35])),Rn(()=>import("./w3m-modal-BVCCbSdR.js"),__vite__mapDeps([42,3,9,5,12,10,7,25,41]))])}}function P0e(t){const{providers:e,providerIds:n}=_v(pt.state),r=e[t],s=n[t];return{walletProvider:r,walletProviderType:s}}const R0e="1.7.12";function j0e(){const{caipNetwork:t,caipNetworkId:e,chainId:n}=Ipe();function r(s){}return{caipNetwork:t,caipNetworkId:e,chainId:n,switchNetwork:r}}function O0e(t){return new I0e({...t,sdkVersion:Ae.generateSdkVersion(t.adapters??[],"html",R0e)})}const mu={signMessage:async(t,e,n)=>{if(!e)throw new Error("signMessage - provider is undefined");const r=qt(t)?t:we(la(t));return await e.request({method:"personal_sign",params:[r,n]})},estimateGas:async(t,e,n,r)=>{if(!e)throw new Error("estimateGas - provider is undefined");if(!n)throw new Error("estimateGas - address is undefined");if(t.chainNamespace&&t.chainNamespace!=="eip155")throw new Error("estimateGas - chainNamespace is not eip155");const s={from:t.address,to:t.to,data:t.data,type:0},i=new xd(e,r);return await new If(i,n).estimateGas(s)},sendTransaction:async(t,e,n,r)=>{if(!e)throw new Error("sendTransaction - provider is undefined");if(!n)throw new Error("sendTransaction - address is undefined");if(t.chainNamespace&&t.chainNamespace!=="eip155")throw new Error("sendTransaction - chainNamespace is not eip155");const s={to:t.to,value:t.value,gasLimit:t.gas,gasPrice:t.gasPrice,data:t.data,type:0},i=new xd(e,r),l=await(await new If(i,n).sendTransaction(s)).wait();return(l==null?void 0:l.hash)||null},writeContract:async(t,e,n,r)=>{if(!e)throw new Error("writeContract - provider is undefined");if(!n)throw new Error("writeContract - address is undefined");const s=new xd(e,r),i=new If(s,n),a=new mn(t.tokenAddress,t.abi,i);if(!a||!t.method)throw new Error("Contract method is undefined");const o=a[t.method];if(o)return await o(...t.args);throw new Error("Contract method is undefined")},parseWalletCapabilities:t=>{try{return JSON.parse(t)}catch{throw new Error("Error parsing wallet capabilities")}},parseUnits:Ir,formatUnits:rt};class D0e extends _B{constructor(){super({adapterType:Y.ADAPTER_TYPES.ETHERS,namespace:Y.CHAIN.EVM}),this.balancePromises={}}async createEthersConfig(e){if(!e.metadata)return;let n;function r(){if(n)return n;if(!(typeof window>"u")&&window.ethereum)return n=window.ethereum,n}async function s(){const{SafeProvider:o}=await Rn(async()=>{const{SafeProvider:f}=await import("./SafeProvider-BbCM858c.js");return{SafeProvider:f}},__vite__mapDeps([43,44])),{default:l}=await Rn(async()=>{const{default:f}=await import("./index-BsPl9DEt.js").then(p=>p.e);return{default:f}},[]),u=new l,d=await u.safe.getInfo(),h=new o(d,u);return await h.connect().catch(f=>{console.info("Failed to auto-connect to Safe:",f)}),h}async function i(){var o,l,u;try{const{createCoinbaseWalletSDK:d}=await Rn(async()=>{const{createCoinbaseWalletSDK:f}=await import("./index-1R-463c5.js");return{createCoinbaseWalletSDK:f}},__vite__mapDeps([45,1]));return typeof window>"u"?void 0:d({appName:(o=e==null?void 0:e.metadata)==null?void 0:o.name,appLogoUrl:(l=e==null?void 0:e.metadata)==null?void 0:l.icons[0],appChainIds:((u=e.networks)==null?void 0:u.map(f=>f.id))||[1,84532],preference:{options:e.coinbasePreference??"all"}}).getProvider()}catch(d){console.error("Failed to import Coinbase Wallet SDK:",d);return}}const a={metadata:e.metadata};if(e.enableInjected!==!1&&(a.injected=r()),e.enableCoinbase!==!1){const o=await i();o&&(a.coinbase=o)}if(Ae.isSafeApp()){const o=await s();o&&(a.safe=o)}return a.EIP6963=e.enableEIP6963!==!1,a}async signMessage(e){const{message:n,address:r,provider:s}=e;if(!s)throw new Error("Provider is undefined");try{return{signature:await mu.signMessage(n,s,r)}}catch{throw new Error("EthersAdapter:signMessage - Sign message failed")}}async sendTransaction(e){var r;if(!e.provider)throw new Error("Provider is undefined");return{hash:await mu.sendTransaction({value:Number.isNaN(Number(e.value))?BigInt(0):BigInt(e.value),to:e.to,data:e.data?e.data:"0x",gas:e.gas?BigInt(e.gas):void 0,gasPrice:e.gasPrice?BigInt(e.gasPrice):void 0,address:_e.state.address},e.provider,_e.state.address,Number((r=e.caipNetwork)==null?void 0:r.id))}}async writeContract(e){var s;if(!e.provider)throw new Error("Provider is undefined");const{address:n}=Wr.parseCaipAddress(e.caipAddress);return{hash:await mu.writeContract(e,e.provider,n,Number((s=e.caipNetwork)==null?void 0:s.id))}}async estimateGas(e){const{provider:n,caipNetwork:r,address:s}=e;if(!n)throw new Error("Provider is undefined");try{return{gas:await mu.estimateGas({data:e.data,to:e.to,address:s},n,s,Number(r==null?void 0:r.id))}}catch{throw new Error("EthersAdapter:estimateGas - Estimate gas failed")}}parseUnits(e){return mu.parseUnits(e.value,e.decimals)}formatUnits(e){return mu.formatUnits(e.value,e.decimals)}async syncConnection(e){const{id:n,chainId:r}=e,s=this.connectors.find(l=>l.id===n),i=s==null?void 0:s.provider;if(!i)throw new Error("Provider not found");const a=await i.request({method:"eth_requestAccounts"}),o=await i.request({method:"eth_chainId"});if(this.listenProviderEvents(n,i),!a[0])throw new Error("No accounts found");if(!(s!=null&&s.type))throw new Error("Connector type not found");return{address:a[0],chainId:Number(o)||Number(r),provider:i,type:s.type,id:n}}async syncConnectors(e){var r;this.ethersConfig=await this.createEthersConfig(e),(r=this.ethersConfig)!=null&&r.EIP6963&&this.listenInjectedConnector(!0),Object.keys(this.ethersConfig||{}).filter(s=>s!=="metadata"&&s!=="EIP6963").forEach(s=>{var o,l;const i=s==="coinbase"?"coinbaseWalletSDK":s,a=s===Y.CONNECTOR_ID.INJECTED;this.namespace&&this.addConnector({id:i,explorerId:Ya.ConnectorExplorerIds[i],imageUrl:(o=e==null?void 0:e.connectorImages)==null?void 0:o[i],name:Ya.ConnectorNamesMap[i]||"Unknown",imageId:Ya.ConnectorImageIds[i],type:Ya.ConnectorTypesMap[i]??"EXTERNAL",info:a?void 0:{rdns:i},chain:this.namespace,chains:[],provider:(l=this.ethersConfig)==null?void 0:l[s]})})}async disconnectAll(){return{connections:await Promise.all(this.connections.map(async n=>{const r=this.connectors.find(s=>qn.isLowerCaseMatch(s.id,n.connectorId));if(!r)throw new Error("Connector not found");return await this.disconnect({id:r.id}),n}))}}async syncConnections({connectToFirstConnector:e,getConnectorStorageInfo:n}){var r;await((r=this.connectionManager)==null?void 0:r.syncConnections({connectors:this.connectors,caipNetworks:this.getCaipNetworks(),universalProvider:this.universalProvider,onConnection:this.addConnection.bind(this),onListenProvider:this.listenProviderEvents.bind(this),getConnectionStatusInfo(s){return n(s)}})),e&&this.emitFirstAvailableConnection()}async setUniversalProvider(e){this.universalProvider=e;const n=Y.CONNECTOR_ID.WALLET_CONNECT;return io.listenWcProvider({universalProvider:e,namespace:Y.CHAIN.EVM,onConnect:r=>this.onConnect(r,n),onDisconnect:()=>this.onDisconnect(n),onAccountsChanged:r=>this.onAccountsChanged(r,n,!1),onChainChanged:r=>this.onChainChanged(r,n)}),this.addConnector(new US({provider:e,caipNetworks:this.getCaipNetworks(),namespace:Y.CHAIN.EVM})),Promise.resolve()}eip6963EventHandler(e){var n;if(e.detail){const{info:r,provider:s}=e.detail;if(!((n=this.connectors)==null?void 0:n.find(a=>a.name===(r==null?void 0:r.name)))){const a=Ya.ConnectorTypesMap[Y.CONNECTOR_ID.EIP6963],o=(r==null?void 0:r.rdns)||(r==null?void 0:r.name)||(r==null?void 0:r.uuid);this.namespace&&o&&this.addConnector({id:o,type:a,imageUrl:r==null?void 0:r.icon,name:(r==null?void 0:r.name)||"Unknown",provider:s,info:r,chain:this.namespace,chains:[]})}}}listenInjectedConnector(e){if(typeof window<"u"&&e){const n=this.eip6963EventHandler.bind(this);window.addEventListener(vt.EIP6963_ANNOUNCE_EVENT,n),window.dispatchEvent(new Event(vt.EIP6963_REQUEST_EVENT))}}async connect({id:e,address:n,type:r,chainId:s,socialUri:i}){var h;const a=this.connectors.find(f=>qn.isLowerCaseMatch(f.id,e));if(!a)throw new Error("Connector not found");const o=(h=this.connectionManager)==null?void 0:h.getConnection({address:n,connectorId:e,connections:this.connections,connectors:this.connectors});if(o){const f=o.caipNetwork;if(!f)throw new Error("EthersAdapter:connect - could not find the caipNetwork to connect");if(o.account)return this.emit("accountChanged",{address:o.account.address,chainId:f.id,connector:a}),{address:o.account.address,chainId:f.id,provider:a.provider,type:a.type,id:e}}const l=a==null?void 0:a.provider;if(!l)throw new Error("Provider not found");let u=[],d;if(r===vt.CONNECTOR_TYPE_AUTH){const{address:f,accounts:p}=await Gs.authConnectorAuthenticate({authConnector:l,chainNamespace:Y.CHAIN.EVM,chainId:s,socialUri:i,preferredAccountType:ei("eip155")}),g=this.getCaipNetworks().find(m=>m.id.toString()===(s==null?void 0:s.toString()));u=[f],this.addConnection({connectorId:e,accounts:p?p.map(m=>({address:m.address})):u.map(m=>({address:m})),caipNetwork:g,auth:{name:le.getConnectedSocialProvider(),username:le.getConnectedSocialUsername()}}),this.emit("accountChanged",{address:u[0],chainId:Number(s),connector:a})}else{u=await l.request({method:"eth_requestAccounts"}),d=await l.request({method:"eth_chainId"});const f=this.getCaipNetworks().find(p=>p.id.toString()===(s==null?void 0:s.toString()));if(d!==s){if(!f)throw new Error("EthersAdapter:connect - could not find the caipNetwork to switch");try{await this.switchNetwork({caipNetwork:f,provider:l,providerType:r})}catch{throw new Error("EthersAdapter:connect - Switch network failed")}}this.emit("accountChanged",{address:u[0],chainId:Number(s),connector:a}),this.addConnection({connectorId:e,accounts:u.map(p=>({address:p})),caipNetwork:f}),a.id!==Y.CONNECTOR_ID.WALLET_CONNECT&&this.listenProviderEvents(e,l)}return{address:u[0],chainId:Number(s),provider:l,type:r,id:e}}async reconnect(e){const{id:n,chainId:r}=e,s=this.connectors.find(i=>i.id===n);s&&s.type==="AUTH"&&r&&await Gs.authConnectorAuthenticate({authConnector:s.provider,chainNamespace:Y.CHAIN.EVM,chainId:r,preferredAccountType:ei("eip155")})}async getAccounts(e){var a;const n=this.connectors.find(o=>o.id===e.id),r=n==null?void 0:n.provider;if(!r||!n)throw new Error("Provider not found");const s=(a=this.connectionManager)==null?void 0:a.getConnection({connectorId:e.id,connections:this.connections,connectors:this.connectors});if(s)return{accounts:s.accounts.map(({address:o})=>Ae.createAccount(Y.CHAIN.EVM,o,"eoa"))};if(e.id===Y.CONNECTOR_ID.AUTH){const o=n.provider;if(!o.user)return{accounts:[]};const{accounts:l,address:u}=o.user;return Promise.resolve({accounts:(l||[{address:u,type:"eoa"}]).map(d=>Ae.createAccount(Y.CHAIN.EVM,d.address,d.type))})}return{accounts:(await r.request({method:"eth_requestAccounts"})).map(o=>Ae.createAccount(Y.CHAIN.EVM,o,"eoa"))}}async disconnect(e){var n,r;if(e.id){const s=this.connectors.find(a=>qn.isLowerCaseMatch(a.id,e.id));if(!s)throw new Error("Connector not found");const i=(n=this.connectionManager)==null?void 0:n.getConnection({connectorId:e.id,connections:this.connections,connectors:this.connectors});switch(s.type){case vt.CONNECTOR_TYPE_WALLET_CONNECT:s.provider.session&&s.provider.disconnect();break;case vt.CONNECTOR_TYPE_AUTH:await((r=s.provider)==null?void 0:r.disconnect());break;case vt.CONNECTOR_TYPE_ANNOUNCED:case vt.CONNECTOR_TYPE_EXTERNAL:await this.revokeProviderPermissions(s.provider);break;default:throw new Error("Unsupported provider type")}return s.id&&(this.removeProviderListeners(s.id),this.deleteConnection(s.id)),this.connections.length===0?this.emit("disconnect"):this.emitFirstAvailableConnection(),{connections:i?[i]:[]}}return this.disconnectAll()}async getBalance(e){const n=e.address,r=this.getCaipNetworks().find(s=>{var i;return s.id.toString()===((i=e.chainId)==null?void 0:i.toString())});if(!n)return Promise.resolve({balance:"0.00",symbol:"ETH"});if(r&&r.chainNamespace===Y.CHAIN.EVM){const s=`${r.caipNetworkId}:${n}`,i=this.balancePromises[s];if(i)return i;const a=le.getNativeBalanceCacheForCaipAddress(s);if(a)return{balance:a.balance,symbol:a.symbol};const o=new AD(r.rpcUrls.default.http[0],{chainId:r.id,name:r.name});if(o)try{return this.balancePromises[s]=new Promise(async l=>{try{const u=await o.getBalance(n),d=Uu(u);le.updateNativeBalanceCache({caipAddress:s,balance:d,symbol:r.nativeCurrency.symbol,timestamp:Date.now()}),l({balance:d,symbol:r.nativeCurrency.symbol})}catch{l({balance:"0.00",symbol:"ETH"})}}).finally(()=>{delete this.balancePromises[s]}),this.balancePromises[s]||{balance:"0.00",symbol:"ETH"}}catch{return{balance:"0.00",symbol:"ETH"}}}return{balance:"0.00",symbol:"ETH"}}async switchNetwork(e){var i,a;const{caipNetwork:n,provider:r,providerType:s}=e;if(s==="AUTH"){await super.switchNetwork(e);return}try{await r.request({method:"wallet_switchEthereumChain",params:[{chainId:Uf.numberToHexString(n.id)}]})}catch(o){if(o.code===Jo.ERROR_CODE_UNRECOGNIZED_CHAIN_ID||o.code===Jo.ERROR_INVALID_CHAIN_ID||o.code===Jo.ERROR_CODE_DEFAULT||((a=(i=o==null?void 0:o.data)==null?void 0:i.originalError)==null?void 0:a.code)===Jo.ERROR_CODE_UNRECOGNIZED_CHAIN_ID)await Uf.addEthereumChain(r,n);else if(s==="ANNOUNCED"||s==="EXTERNAL"||s==="INJECTED")throw new Error("Chain is not supported")}}getWalletConnectProvider(){var e;return(e=this.connectors.find(n=>n.type==="WALLET_CONNECT"))==null?void 0:e.provider}async revokeProviderPermissions(e){try{(await e.request({method:"wallet_getPermissions"})).find(s=>s.parentCapability==="eth_accounts")&&await e.request({method:"wallet_revokePermissions",params:[{eth_accounts:{}}]})}catch(n){console.info("Could not revoke permissions from wallet. Disconnecting...",n)}}async getCapabilities(e){var s,i;const n=pt.getProvider(Y.CHAIN.EVM);if(!n)throw new Error("Provider is undefined");const r=(i=(s=n.session)==null?void 0:s.sessionProperties)==null?void 0:i.capabilities;if(r){const o=mu.parseWalletCapabilities(r)[e];if(o)return o}return await n.request({method:"wallet_getCapabilities",params:[e]})}async grantPermissions(e){const n=pt.getProvider(Y.CHAIN.EVM);if(!n)throw new Error("Provider is undefined");return await n.request({method:"wallet_grantPermissions",params:e})}async revokePermissions(e){const n=pt.getProvider(Y.CHAIN.EVM);if(!n)throw new Error("Provider is undefined");return await n.request({method:"wallet_revokePermissions",params:[e]})}async walletGetAssets(e){const n=pt.getProvider(Y.CHAIN.EVM);if(!n)throw new Error("Provider is undefined");return await n.request({method:"wallet_getAssets",params:[e]})}}const IB={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_API_BASE_URL:"http://localhost:3000/api",VITE_APP_ENVIRONMENT:"development",VITE_APP_NAME:"BlockCoop Sacco",VITE_APP_VERSION:"2.0.0",VITE_BLOCKCOOP_VERSION:"2",VITE_CHAIN_ID:"56",VITE_CHAIN_ID_MAINNET:"56",VITE_CHAIN_ID_TESTNET:"97",VITE_DIVIDEND_DISTRIBUTOR_ADDRESS:"",VITE_ENABLE_GASLESS_TRANSACTIONS:"true",VITE_ENABLE_RETRY_FAILED_TRANSACTIONS:"true",VITE_EXCHANGE_RATE_DECIMALS:"0",VITE_FACTORY_ADDRESS:"0xca143ce32fe78f1f7019d7d551a6402fc5350c73",VITE_FORWARDER_ADDRESS:"0x0000000000000000000000000000000000000000",VITE_FORWARDER_ADDRESS_TESTNET:"0x0000000000000000000000000000000000000000",VITE_GASLESS_PACKAGE_MANAGER_ADDRESS:"0x0000000000000000000000000000000000000000",VITE_GASLESS_PACKAGE_MANAGER_ADDRESS_TESTNET:"0x0000000000000000000000000000000000000000",VITE_GAS_LIMIT:"500000",VITE_LP_ADDRESS:"0x3Ab52592281e5E8f21819870820a46F57c2A08f0",VITE_MAX_RETRIES:"3",VITE_MPESA_API_URL:"https://api.blockcoopsacco.com/api",VITE_PACKAGE_MANAGER_ADDRESS:"0xBBC1De7F550c4d1D49A48d5E9F524817fCeB20dc",VITE_ROUTER_ADDRESS:"0x10ed43c718714eb63d5aa57b78b54704e256024e",VITE_RPC_URL:"https://bsc-dataseed1.binance.org/",VITE_RPC_URL_MAINNET:"https://bsc-dataseed1.binance.org/",VITE_RPC_URL_TESTNET:"https://data-seed-prebsc-1-s1.binance.org:8545/",VITE_SECONDARY_MARKET_ADDRESS:"0x02D855F16695f7937da07aA8E4bAB7298548650E",VITE_SHARE_ADDRESS:"0x292E1B8CBE91623E71D6532e6BE6B881Cc0a9c31",VITE_SHOW_TRANSACTION_HISTORY:"true",VITE_STAKING_ADDRESS:"0xf30c5bc030C31e28a56ea18F74c78718783d7e6e",VITE_STAKING_ENABLED:"true",VITE_TAX_ADDRESS:"0xCD8530cB44bF40e058D65f53AB9225BF745f6442",VITE_TRANSACTION_TIMEOUT:"300",VITE_TREASURY_ADDRESS:"0x842d803eB7d05D6Aa2DdB8c3Eb912e6d97ce31C4",VITE_USDT_ADDRESS:"0x55d398326f99059ff775485246999027b3197955",VITE_USDT_DECIMALS:"18",VITE_USER_NODE_ENV:"production",VITE_VAULT_ADDRESS:"0x662c77598491e91174506a4C1e7990825c3d7abA",VITE_WALLETCONNECT_PROJECT_ID:"42670d4e939c7f5815c735d9a45d0a6e"};function Br(t,e=!0){const n=IB[t];if(console.log(` getEnvVar(${t}, ${e}):`,{value:n,type:typeof n,truthy:!!n}),e&&!n)throw new Error(`Missing required environment variable: ${t}`);return n||""}const oT={chainId:97,name:"BSC Testnet",currency:"tBNB",explorerUrl:"https://testnet.bscscan.com",rpcUrl:"https://bsc-testnet.public.blastapi.io"},U0e={chainId:56,name:"BSC Mainnet",currency:"BNB",explorerUrl:"https://bscscan.com",rpcUrl:"https://bsc-dataseed2.binance.org",rpcUrls:["https://bsc-dataseed2.binance.org","https://bsc-dataseed3.binance.org","https://bsc-mainnet.nodereal.io/v1/64a9df0874fb4a93b9d0a3849de012d3","https://bsc-dataseed1.defibit.io","https://bsc-dataseed1.ninicoin.io"]},Fv=[97,56],gx=Br("VITE_STAKING_ADDRESS",!1);console.log(" AppKit Environment Debug:",{VITE_STAKING_ADDRESS:gx,VITE_STAKING_ENABLED:Br("VITE_STAKING_ENABLED",!1),stakingAddressLength:gx.length,stakingAddressTruthy:!!gx,allStakingVars:Object.keys(IB).filter(t=>t.includes("STAKING"))});function bR(){return(parseInt(Br("VITE_CHAIN_ID",!0))||oT.chainId)===56?U0e:oT}const ue={chainId:parseInt(Br("VITE_CHAIN_ID",!0))||oT.chainId,rpcUrl:Br("VITE_RPC_URL",!0)||bR().rpcUrl,walletConnectProjectId:Br("VITE_WALLETCONNECT_PROJECT_ID",!0)||"c4f79cc821944d9680842e34466bfbd",contracts:{usdt:Br("VITE_USDT_ADDRESS",!0),share:Br("VITE_SHARE_ADDRESS",!0),lp:Br("VITE_LP_ADDRESS",!0),vault:Br("VITE_VAULT_ADDRESS",!0),taxManager:Br("VITE_TAX_ADDRESS",!0),router:Br("VITE_ROUTER_ADDRESS",!0),factory:Br("VITE_FACTORY_ADDRESS",!0),packageManager:Br("VITE_PACKAGE_MANAGER_ADDRESS",!0),staking:gx,secondaryMarket:Br("VITE_SECONDARY_MARKET_ADDRESS",!1)},network:bR()};function PB(t){return/^[a-f0-9]{32}$/.test(t)}function cT(t){return/^0x[a-fA-F0-9]{40}$/.test(t)}function RB(){const t=[];return Fv.includes(ue.chainId)||t.push(`Invalid chain ID: ${ue.chainId}. Expected: ${Fv.join(" or ")} (BSC Testnet or Mainnet)`),ue.rpcUrl||t.push("RPC URL is not configured"),PB(ue.walletConnectProjectId)||t.push("Invalid or missing WalletConnect Project ID"),Object.entries(ue.contracts).forEach(([e,n])=>{cT(n)||t.push(`Invalid ${e} contract address: ${n}`)}),t}const Cy=ue.chainId,M0e="https://pancakeswap.finance";function yx(t,e,n,r){const s=M0e;switch(t){case"swap":if(!e||!n)throw new Error("Both inputCurrency and outputCurrency are required for swap URL");return`${s}/swap?inputCurrency=${e}&outputCurrency=${n}`;case"add":if(!e||!n)throw new Error("Both inputCurrency and outputCurrency are required for add liquidity URL");return`${s}/add/${e}/${n}`;case"info/pools":if(!r)throw new Error("LP token address is required for pool info URL");return`${s}/info/pools/${r}`;default:throw new Error(`Unsupported PancakeSwap URL type: ${t}`)}}const L0e=new D0e,B0e={name:"BlockCoop Sacco",description:"Sophisticated investment packages with advanced splitting mechanisms, vesting schedules, and secondary market integration on BSC.",url:"http://shares.blockcoopsacco.com/",icons:["https://blockcoop.com/icon.png"]};function jB(){return ue.chainId===56?SB:kB}const $0e={adapters:[L0e],networks:[kB,SB],defaultNetwork:jB(),projectId:ue.walletConnectProjectId,metadata:B0e,features:{analytics:!1,email:!0,socials:["google"],emailShowWallets:!0,onramp:!1,swaps:!1,history:!1},themeMode:"light",themeVariables:{"--w3m-color-mix":"#3b82f6","--w3m-color-mix-strength":20,"--w3m-accent":"#3b82f6","--w3m-border-radius-master":"8px"},enableWalletConnect:!0,enableInjected:!0,enableEIP6963:!0,enableCoinbase:!0,allowUnsupportedChain:!1,allWallets:"SHOW",includeWalletIds:[],excludeWalletIds:[],connectTimeout:6e4};let em;try{em=O0e($0e)}catch(t){throw console.error(" Failed to create AppKit:",t),t}async function OB(){try{const t=jB();return await em.switchNetwork(t),!0}catch(t){return console.error("Failed to switch network:",t),!1}}async function F0e(){try{return em.open(),!0}catch(t){return console.error("Failed to open wallet connection modal:",t),!1}}const H0e=[{inputs:[],name:"AccessControlBadConfirmation",type:"error"},{inputs:[{internalType:"address",name:"account",type:"address"},{internalType:"bytes32",name:"neededRole",type:"bytes32"}],name:"AccessControlUnauthorizedAccount",type:"error"},{inputs:[],name:"EnforcedPause",type:"error"},{inputs:[],name:"ExpectedPause",type:"error"},{inputs:[],name:"InvalidInitialization",type:"error"},{inputs:[],name:"NotInitializing",type:"error"},{inputs:[],name:"ReentrancyGuardReentrantCall",type:"error"},{inputs:[{internalType:"address",name:"token",type:"address"}],name:"SafeERC20FailedOperation",type:"error"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint256",name:"oldWindow",type:"uint256"},{indexed:!1,internalType:"uint256",name:"newWindow",type:"uint256"}],name:"DeadlineWindowUpdated",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint256",name:"oldGlobalTargetPrice",type:"uint256"},{indexed:!1,internalType:"uint256",name:"newGlobalTargetPrice",type:"uint256"}],name:"GlobalTargetPriceUpdated",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint64",name:"version",type:"uint64"}],name:"Initialized",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"user",type:"address"},{indexed:!0,internalType:"uint256",name:"packageId",type:"uint256"},{indexed:!1,internalType:"uint256",name:"shareTokenAmount",type:"uint256"},{indexed:!1,internalType:"uint256",name:"usdtAmount",type:"uint256"},{indexed:!1,internalType:"uint256",name:"liquidityTokens",type:"uint256"},{indexed:!1,internalType:"uint256",name:"actualShareToken",type:"uint256"},{indexed:!1,internalType:"uint256",name:"actualUSDT",type:"uint256"}],name:"LiquidityAdded",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"user",type:"address"},{indexed:!0,internalType:"uint256",name:"packageId",type:"uint256"},{indexed:!1,internalType:"uint256",name:"usdtAmount",type:"uint256"},{indexed:!1,internalType:"string",name:"reason",type:"string"}],name:"LiquidityAdditionFailed",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint16",name:"oldBps",type:"uint16"},{indexed:!1,internalType:"uint16",name:"newBps",type:"uint16"}],name:"LiquidityBpsUpdated",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"user",type:"address"},{indexed:!1,internalType:"uint256",name:"lpTokensBurned",type:"uint256"},{indexed:!1,internalType:"uint256",name:"liquidityRemoved",type:"uint256"},{indexed:!1,internalType:"uint256",name:"shareTokenReceived",type:"uint256"},{indexed:!1,internalType:"uint256",name:"usdtReceived",type:"uint256"}],name:"LiquidityRedeemed",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint256",name:"marketPrice",type:"uint256"},{indexed:!1,internalType:"uint256",name:"globalTargetPrice",type:"uint256"},{indexed:!1,internalType:"uint256",name:"priceDifference",type:"uint256"}],name:"MarketPriceUsed",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"id",type:"uint256"},{indexed:!1,internalType:"string",name:"name",type:"string"},{indexed:!1,internalType:"uint256",name:"entryUSDT",type:"uint256"},{indexed:!1,internalType:"uint256",name:"exchangeRate",type:"uint256"},{indexed:!1,internalType:"uint16",name:"vestBps",type:"uint16"},{indexed:!1,internalType:"uint64",name:"cliff",type:"uint64"},{indexed:!1,internalType:"uint64",name:"duration",type:"uint64"},{indexed:!1,internalType:"uint16",name:"referralBps",type:"uint16"}],name:"PackageAdded",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"id",type:"uint256"},{indexed:!1,internalType:"uint256",name:"oldExchangeRate",type:"uint256"},{indexed:!1,internalType:"uint256",name:"newExchangeRate",type:"uint256"}],name:"PackageExchangeRateUpdated",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"id",type:"uint256"},{indexed:!1,internalType:"bool",name:"active",type:"bool"}],name:"PackageToggled",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"address",name:"account",type:"address"}],name:"Paused",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"buyer",type:"address"},{indexed:!0,internalType:"uint256",name:"packageId",type:"uint256"},{indexed:!1,internalType:"uint256",name:"usdtAmount",type:"uint256"},{indexed:!1,internalType:"uint256",name:"totalTokens",type:"uint256"},{indexed:!1,internalType:"uint256",name:"vestTokens",type:"uint256"},{indexed:!1,internalType:"uint256",name:"poolTokens",type:"uint256"},{indexed:!1,internalType:"uint256",name:"lpTokens",type:"uint256"},{indexed:!0,internalType:"address",name:"referrer",type:"address"},{indexed:!1,internalType:"uint256",name:"referralReward",type:"uint256"}],name:"Purchased",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"user",type:"address"},{indexed:!1,internalType:"uint256",name:"lpAmount",type:"uint256"}],name:"Redeemed",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"referrer",type:"address"},{indexed:!0,internalType:"address",name:"buyer",type:"address"},{indexed:!1,internalType:"uint256",name:"reward",type:"uint256"}],name:"ReferralPaid",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"role",type:"bytes32"},{indexed:!0,internalType:"bytes32",name:"previousAdminRole",type:"bytes32"},{indexed:!0,internalType:"bytes32",name:"newAdminRole",type:"bytes32"}],name:"RoleAdminChanged",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"role",type:"bytes32"},{indexed:!0,internalType:"address",name:"account",type:"address"},{indexed:!0,internalType:"address",name:"sender",type:"address"}],name:"RoleGranted",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"role",type:"bytes32"},{indexed:!0,internalType:"address",name:"account",type:"address"},{indexed:!0,internalType:"address",name:"sender",type:"address"}],name:"RoleRevoked",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"user",type:"address"},{indexed:!0,internalType:"uint256",name:"packageId",type:"uint256"},{indexed:!1,internalType:"uint256",name:"requestedShareToken",type:"uint256"},{indexed:!1,internalType:"uint256",name:"requestedUSDT",type:"uint256"},{indexed:!1,internalType:"uint256",name:"minShareToken",type:"uint256"},{indexed:!1,internalType:"uint256",name:"minUSDT",type:"uint256"}],name:"SlippageProtectionTriggered",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint256",name:"oldTolerance",type:"uint256"},{indexed:!1,internalType:"uint256",name:"newTolerance",type:"uint256"}],name:"SlippageToleranceUpdated",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"taxKey",type:"bytes32"},{indexed:!1,internalType:"uint256",name:"amount",type:"uint256"},{indexed:!0,internalType:"address",name:"recipient",type:"address"}],name:"TaxApplied",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"buyer",type:"address"},{indexed:!0,internalType:"uint256",name:"packageId",type:"uint256"},{indexed:!1,internalType:"uint256",name:"amount",type:"uint256"}],name:"TreasuryBlocksAllocated",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"oldTreasury",type:"address"},{indexed:!0,internalType:"address",name:"newTreasury",type:"address"}],name:"TreasuryUpdated",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"address",name:"account",type:"address"}],name:"Unpaused",type:"event"},{inputs:[],name:"ADMIN_ROLE",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[],name:"DEFAULT_ADMIN_ROLE",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[],name:"PURCHASE_TAX_KEY",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[],name:"SERVER_ROLE",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[],name:"USDT_DEC",outputs:[{internalType:"uint8",name:"",type:"uint8"}],stateMutability:"view",type:"function"},{inputs:[],name:"USDT_SCALE",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"USDT_SCALE_UP",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"string",name:"name",type:"string"},{internalType:"uint256",name:"entryUSDT",type:"uint256"},{internalType:"uint256",name:"exchangeRate",type:"uint256"},{internalType:"uint16",name:"vestBps",type:"uint16"},{internalType:"uint64",name:"cliff",type:"uint64"},{internalType:"uint64",name:"duration",type:"uint64"},{internalType:"uint16",name:"referralBps",type:"uint16"}],name:"addPackage",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"deadlineWindow",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"factory",outputs:[{internalType:"contract IPancakeFactoryUpgradeable",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"getActivePackageIds",outputs:[{internalType:"uint256[]",name:"",type:"uint256[]"}],stateMutability:"view",type:"function"},{inputs:[],name:"getCurrentMarketPrice",outputs:[{internalType:"uint256",name:"marketPrice",type:"uint256"},{internalType:"bool",name:"hasLiquidity",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"id",type:"uint256"}],name:"getPackage",outputs:[{components:[{internalType:"uint256",name:"entryUSDT",type:"uint256"},{internalType:"uint256",name:"exchangeRate",type:"uint256"},{internalType:"uint64",name:"cliff",type:"uint64"},{internalType:"uint64",name:"duration",type:"uint64"},{internalType:"uint16",name:"vestBps",type:"uint16"},{internalType:"uint16",name:"referralBps",type:"uint16"},{internalType:"bool",name:"active",type:"bool"},{internalType:"bool",name:"exists",type:"bool"},{internalType:"string",name:"name",type:"string"}],internalType:"struct PackageManagerUpgradeable.Package",name:"",type:"tuple"}],stateMutability:"view",type:"function"},{inputs:[],name:"getPackageCount",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"getPackageIds",outputs:[{internalType:"uint256[]",name:"",type:"uint256[]"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"}],name:"getRoleAdmin",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"user",type:"address"}],name:"getUserPackageCount",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"user",type:"address"}],name:"getUserPackages",outputs:[{components:[{internalType:"uint256",name:"packageId",type:"uint256"},{internalType:"uint256",name:"usdtAmount",type:"uint256"},{internalType:"uint256",name:"totalTokens",type:"uint256"},{internalType:"uint256",name:"vestTokens",type:"uint256"},{internalType:"uint256",name:"poolTokens",type:"uint256"},{internalType:"uint256",name:"lpTokens",type:"uint256"},{internalType:"address",name:"referrer",type:"address"},{internalType:"uint256",name:"referralReward",type:"uint256"},{internalType:"uint256",name:"timestamp",type:"uint256"}],internalType:"struct PackageManagerUpgradeable.UserPurchase[]",name:"",type:"tuple[]"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"user",type:"address"},{internalType:"uint256",name:"index",type:"uint256"}],name:"getUserPurchase",outputs:[{components:[{internalType:"uint256",name:"packageId",type:"uint256"},{internalType:"uint256",name:"usdtAmount",type:"uint256"},{internalType:"uint256",name:"totalTokens",type:"uint256"},{internalType:"uint256",name:"vestTokens",type:"uint256"},{internalType:"uint256",name:"poolTokens",type:"uint256"},{internalType:"uint256",name:"lpTokens",type:"uint256"},{internalType:"address",name:"referrer",type:"address"},{internalType:"uint256",name:"referralReward",type:"uint256"},{internalType:"uint256",name:"timestamp",type:"uint256"}],internalType:"struct PackageManagerUpgradeable.UserPurchase",name:"",type:"tuple"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"user",type:"address"}],name:"getUserPurchaseCount",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"user",type:"address"}],name:"getUserPurchases",outputs:[{components:[{internalType:"uint256",name:"packageId",type:"uint256"},{internalType:"uint256",name:"usdtAmount",type:"uint256"},{internalType:"uint256",name:"totalTokens",type:"uint256"},{internalType:"uint256",name:"vestTokens",type:"uint256"},{internalType:"uint256",name:"poolTokens",type:"uint256"},{internalType:"uint256",name:"lpTokens",type:"uint256"},{internalType:"address",name:"referrer",type:"address"},{internalType:"uint256",name:"referralReward",type:"uint256"},{internalType:"uint256",name:"timestamp",type:"uint256"}],internalType:"struct PackageManagerUpgradeable.UserPurchase[]",name:"",type:"tuple[]"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"user",type:"address"}],name:"getUserRedemptionCount",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"user",type:"address"}],name:"getUserRedemptions",outputs:[{internalType:"uint256[]",name:"amounts",type:"uint256[]"},{internalType:"uint256[]",name:"timestamps",type:"uint256[]"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"user",type:"address"}],name:"getUserStats",outputs:[{components:[{internalType:"uint256",name:"totalInvested",type:"uint256"},{internalType:"uint256",name:"totalTokensReceived",type:"uint256"},{internalType:"uint256",name:"totalVestTokens",type:"uint256"},{internalType:"uint256",name:"totalPoolTokens",type:"uint256"},{internalType:"uint256",name:"totalLPTokens",type:"uint256"},{internalType:"uint256",name:"totalReferralRewards",type:"uint256"},{internalType:"uint256",name:"purchaseCount",type:"uint256"},{internalType:"uint256",name:"redemptionCount",type:"uint256"},{internalType:"uint256",name:"totalRedemptions",type:"uint256"}],internalType:"struct PackageManagerUpgradeable.UserStats",name:"",type:"tuple"}],stateMutability:"view",type:"function"},{inputs:[],name:"globalTargetPrice",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"grantRole",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"hasRole",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"initRouterAllowances",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"usdt_",type:"address"},{internalType:"address",name:"share_",type:"address"},{internalType:"address",name:"lp_",type:"address"},{internalType:"address",name:"vault_",type:"address"},{internalType:"address",name:"router_",type:"address"},{internalType:"address",name:"factory_",type:"address"},{internalType:"address",name:"treasury_",type:"address"},{internalType:"address",name:"tax_",type:"address"},{internalType:"address",name:"admin_",type:"address"},{internalType:"uint256",name:"initialGlobalTargetPrice_",type:"uint256"}],name:"initialize",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"liquidityBps",outputs:[{internalType:"uint16",name:"",type:"uint16"}],stateMutability:"view",type:"function"},{inputs:[],name:"lpToken",outputs:[{internalType:"contract IBLOCKS_LPUpgradeable",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"nextPackageId",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"pause",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"paused",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"id",type:"uint256"},{internalType:"address",name:"referrer",type:"address"}],name:"purchase",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"buyer",type:"address"},{internalType:"uint256",name:"id",type:"uint256"},{internalType:"address",name:"referrer",type:"address"}],name:"purchaseFor",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"lpAmount",type:"uint256"}],name:"redeem",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"callerConfirmation",type:"address"}],name:"renounceRole",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"revokeRole",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"router",outputs:[{internalType:"contract IPancakeRouterUpgradeable",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"newWindow",type:"uint256"}],name:"setDeadlineWindow",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"newPrice",type:"uint256"}],name:"setGlobalTargetPrice",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint16",name:"newBps",type:"uint16"}],name:"setLiquidityBps",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"id",type:"uint256"},{internalType:"uint256",name:"newExchangeRate",type:"uint256"}],name:"setPackageExchangeRate",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"newTolBps",type:"uint256"}],name:"setSlippageTolerance",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"newTreasury",type:"address"}],name:"setTreasury",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"shareToken",outputs:[{internalType:"contract IBLOCKSUpgradeable",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"slippageTolerance",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes4",name:"interfaceId",type:"bytes4"}],name:"supportsInterface",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"taxManager",outputs:[{internalType:"contract ISwapTaxManagerUpgradeable",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"id",type:"uint256"}],name:"togglePackage",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"treasury",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"unpause",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"usdt",outputs:[{internalType:"contract IERC20DecimalsUpgradeable",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"vestingVault",outputs:[{internalType:"contract IVestingVaultUpgradeable",name:"",type:"address"}],stateMutability:"view",type:"function"}],V0e={abi:H0e},z0e=[{inputs:[{internalType:"address",name:"shareToken_",type:"address"},{internalType:"address",name:"admin",type:"address"}],stateMutability:"nonpayable",type:"constructor"},{inputs:[],name:"AccessControlBadConfirmation",type:"error"},{inputs:[{internalType:"address",name:"account",type:"address"},{internalType:"bytes32",name:"neededRole",type:"bytes32"}],name:"AccessControlUnauthorizedAccount",type:"error"},{inputs:[],name:"ReentrancyGuardReentrantCall",type:"error"},{inputs:[{internalType:"address",name:"token",type:"address"}],name:"SafeERC20FailedOperation",type:"error"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"user",type:"address"},{indexed:!1,internalType:"uint256",name:"amount",type:"uint256"}],name:"Claimed",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"user",type:"address"},{indexed:!1,internalType:"uint256",name:"amount",type:"uint256"},{indexed:!1,internalType:"uint64",name:"cliff",type:"uint64"},{indexed:!1,internalType:"uint64",name:"duration",type:"uint64"}],name:"Locked",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"role",type:"bytes32"},{indexed:!0,internalType:"bytes32",name:"previousAdminRole",type:"bytes32"},{indexed:!0,internalType:"bytes32",name:"newAdminRole",type:"bytes32"}],name:"RoleAdminChanged",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"role",type:"bytes32"},{indexed:!0,internalType:"address",name:"account",type:"address"},{indexed:!0,internalType:"address",name:"sender",type:"address"}],name:"RoleGranted",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"role",type:"bytes32"},{indexed:!0,internalType:"address",name:"account",type:"address"},{indexed:!0,internalType:"address",name:"sender",type:"address"}],name:"RoleRevoked",type:"event"},{inputs:[],name:"DEFAULT_ADMIN_ROLE",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[],name:"LOCKER_ROLE",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[],name:"claim",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"}],name:"getRoleAdmin",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"grantRole",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"hasRole",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"user",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"},{internalType:"uint64",name:"cliff",type:"uint64"},{internalType:"uint64",name:"duration",type:"uint64"}],name:"lock",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"released",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"callerConfirmation",type:"address"}],name:"renounceRole",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"revokeRole",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"shareToken",outputs:[{internalType:"contract BLOCKS",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes4",name:"interfaceId",type:"bytes4"}],name:"supportsInterface",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"totalLocked",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"userSchedule",outputs:[{internalType:"uint64",name:"cliff",type:"uint64"},{internalType:"uint64",name:"duration",type:"uint64"},{internalType:"uint256",name:"start",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"user",type:"address"}],name:"vestedAmount",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"}],W0e={abi:z0e},q0e=[{inputs:[{internalType:"address",name:"admin",type:"address"}],stateMutability:"nonpayable",type:"constructor"},{inputs:[],name:"AccessControlBadConfirmation",type:"error"},{inputs:[{internalType:"address",name:"account",type:"address"},{internalType:"bytes32",name:"neededRole",type:"bytes32"}],name:"AccessControlUnauthorizedAccount",type:"error"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"key",type:"bytes32"},{indexed:!1,internalType:"uint16",name:"rateBps",type:"uint16"},{indexed:!1,internalType:"address",name:"recipient",type:"address"}],name:"BucketSet",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"role",type:"bytes32"},{indexed:!0,internalType:"bytes32",name:"previousAdminRole",type:"bytes32"},{indexed:!0,internalType:"bytes32",name:"newAdminRole",type:"bytes32"}],name:"RoleAdminChanged",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"role",type:"bytes32"},{indexed:!0,internalType:"address",name:"account",type:"address"},{indexed:!0,internalType:"address",name:"sender",type:"address"}],name:"RoleGranted",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"role",type:"bytes32"},{indexed:!0,internalType:"address",name:"account",type:"address"},{indexed:!0,internalType:"address",name:"sender",type:"address"}],name:"RoleRevoked",type:"event"},{inputs:[],name:"DEFAULT_ADMIN_ROLE",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[],name:"MANAGER_ROLE",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"",type:"bytes32"}],name:"buckets",outputs:[{internalType:"uint16",name:"rateBps",type:"uint16"},{internalType:"address",name:"recipient",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"}],name:"getRoleAdmin",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"key",type:"bytes32"}],name:"getTaxBucket",outputs:[{components:[{internalType:"uint16",name:"rateBps",type:"uint16"},{internalType:"address",name:"recipient",type:"address"}],internalType:"struct SwapTaxManager.TaxBucket",name:"",type:"tuple"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"grantRole",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"hasRole",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"callerConfirmation",type:"address"}],name:"renounceRole",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"revokeRole",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32",name:"key",type:"bytes32"},{internalType:"uint16",name:"rateBps",type:"uint16"},{internalType:"address",name:"recipient",type:"address"}],name:"setBucket",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes4",name:"interfaceId",type:"bytes4"}],name:"supportsInterface",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"}],K0e={abi:q0e},G0e=[{inputs:[{internalType:"string",name:"name",type:"string"},{internalType:"string",name:"symbol",type:"string"},{internalType:"address",name:"admin",type:"address"},{internalType:"address",name:"_swapTaxManager",type:"address"}],stateMutability:"nonpayable",type:"constructor"},{inputs:[],name:"AccessControlBadConfirmation",type:"error"},{inputs:[{internalType:"address",name:"account",type:"address"},{internalType:"bytes32",name:"neededRole",type:"bytes32"}],name:"AccessControlUnauthorizedAccount",type:"error"},{inputs:[{internalType:"address",name:"spender",type:"address"},{internalType:"uint256",name:"allowance",type:"uint256"},{internalType:"uint256",name:"needed",type:"uint256"}],name:"ERC20InsufficientAllowance",type:"error"},{inputs:[{internalType:"address",name:"sender",type:"address"},{internalType:"uint256",name:"balance",type:"uint256"},{internalType:"uint256",name:"needed",type:"uint256"}],name:"ERC20InsufficientBalance",type:"error"},{inputs:[{internalType:"address",name:"approver",type:"address"}],name:"ERC20InvalidApprover",type:"error"},{inputs:[{internalType:"address",name:"receiver",type:"address"}],name:"ERC20InvalidReceiver",type:"error"},{inputs:[{internalType:"address",name:"sender",type:"address"}],name:"ERC20InvalidSender",type:"error"},{inputs:[{internalType:"address",name:"spender",type:"address"}],name:"ERC20InvalidSpender",type:"error"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"pair",type:"address"},{indexed:!1,internalType:"bool",name:"isAMM",type:"bool"}],name:"AMMStatusUpdated",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!0,internalType:"address",name:"spender",type:"address"},{indexed:!1,internalType:"uint256",name:"value",type:"uint256"}],name:"Approval",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"role",type:"bytes32"},{indexed:!0,internalType:"bytes32",name:"previousAdminRole",type:"bytes32"},{indexed:!0,internalType:"bytes32",name:"newAdminRole",type:"bytes32"}],name:"RoleAdminChanged",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"role",type:"bytes32"},{indexed:!0,internalType:"address",name:"account",type:"address"},{indexed:!0,internalType:"address",name:"sender",type:"address"}],name:"RoleGranted",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"role",type:"bytes32"},{indexed:!0,internalType:"address",name:"account",type:"address"},{indexed:!0,internalType:"address",name:"sender",type:"address"}],name:"RoleRevoked",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"taxKey",type:"bytes32"},{indexed:!0,internalType:"address",name:"from",type:"address"},{indexed:!0,internalType:"address",name:"to",type:"address"},{indexed:!1,internalType:"uint256",name:"taxAmount",type:"uint256"}],name:"SwapTaxApplied",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"oldManager",type:"address"},{indexed:!0,internalType:"address",name:"newManager",type:"address"}],name:"SwapTaxManagerUpdated",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"from",type:"address"},{indexed:!0,internalType:"address",name:"to",type:"address"},{indexed:!1,internalType:"uint256",name:"value",type:"uint256"}],name:"Transfer",type:"event"},{inputs:[],name:"BUY_TAX_KEY",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[],name:"DEFAULT_ADMIN_ROLE",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[],name:"MINTER_ROLE",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[],name:"SELL_TAX_KEY",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[],name:"TAX_MANAGER_ROLE",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"},{internalType:"address",name:"spender",type:"address"}],name:"allowance",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"spender",type:"address"},{internalType:"uint256",name:"value",type:"uint256"}],name:"approve",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"account",type:"address"}],name:"balanceOf",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"decimals",outputs:[{internalType:"uint8",name:"",type:"uint8"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"}],name:"getRoleAdmin",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"grantRole",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"hasRole",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"isAMM",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"mint",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"name",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"callerConfirmation",type:"address"}],name:"renounceRole",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"revokeRole",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"pair",type:"address"},{internalType:"bool",name:"_isAMM",type:"bool"}],name:"setAMMStatus",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"_swapTaxManager",type:"address"}],name:"setSwapTaxManager",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes4",name:"interfaceId",type:"bytes4"}],name:"supportsInterface",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"swapTaxManager",outputs:[{internalType:"contract ISwapTaxManager",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"symbol",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"totalSupply",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"transfer",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"transferFrom",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"}],Y0e={abi:G0e},Q0e=[{inputs:[{internalType:"string",name:"name",type:"string"},{internalType:"string",name:"symbol",type:"string"},{internalType:"address",name:"admin",type:"address"}],stateMutability:"nonpayable",type:"constructor"},{inputs:[],name:"AccessControlBadConfirmation",type:"error"},{inputs:[{internalType:"address",name:"account",type:"address"},{internalType:"bytes32",name:"neededRole",type:"bytes32"}],name:"AccessControlUnauthorizedAccount",type:"error"},{inputs:[{internalType:"address",name:"spender",type:"address"},{internalType:"uint256",name:"allowance",type:"uint256"},{internalType:"uint256",name:"needed",type:"uint256"}],name:"ERC20InsufficientAllowance",type:"error"},{inputs:[{internalType:"address",name:"sender",type:"address"},{internalType:"uint256",name:"balance",type:"uint256"},{internalType:"uint256",name:"needed",type:"uint256"}],name:"ERC20InsufficientBalance",type:"error"},{inputs:[{internalType:"address",name:"approver",type:"address"}],name:"ERC20InvalidApprover",type:"error"},{inputs:[{internalType:"address",name:"receiver",type:"address"}],name:"ERC20InvalidReceiver",type:"error"},{inputs:[{internalType:"address",name:"sender",type:"address"}],name:"ERC20InvalidSender",type:"error"},{inputs:[{internalType:"address",name:"spender",type:"address"}],name:"ERC20InvalidSpender",type:"error"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!0,internalType:"address",name:"spender",type:"address"},{indexed:!1,internalType:"uint256",name:"value",type:"uint256"}],name:"Approval",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"role",type:"bytes32"},{indexed:!0,internalType:"bytes32",name:"previousAdminRole",type:"bytes32"},{indexed:!0,internalType:"bytes32",name:"newAdminRole",type:"bytes32"}],name:"RoleAdminChanged",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"role",type:"bytes32"},{indexed:!0,internalType:"address",name:"account",type:"address"},{indexed:!0,internalType:"address",name:"sender",type:"address"}],name:"RoleGranted",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"role",type:"bytes32"},{indexed:!0,internalType:"address",name:"account",type:"address"},{indexed:!0,internalType:"address",name:"sender",type:"address"}],name:"RoleRevoked",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"from",type:"address"},{indexed:!0,internalType:"address",name:"to",type:"address"},{indexed:!1,internalType:"uint256",name:"value",type:"uint256"}],name:"Transfer",type:"event"},{inputs:[],name:"BURNER_ROLE",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[],name:"DEFAULT_ADMIN_ROLE",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[],name:"MINTER_ROLE",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"},{internalType:"address",name:"spender",type:"address"}],name:"allowance",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"spender",type:"address"},{internalType:"uint256",name:"value",type:"uint256"}],name:"approve",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"account",type:"address"}],name:"balanceOf",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"burn",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"decimals",outputs:[{internalType:"uint8",name:"",type:"uint8"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"}],name:"getRoleAdmin",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"grantRole",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"hasRole",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"mint",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"name",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"callerConfirmation",type:"address"}],name:"renounceRole",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"revokeRole",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes4",name:"interfaceId",type:"bytes4"}],name:"supportsInterface",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"symbol",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"totalSupply",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"value",type:"uint256"}],name:"transfer",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"value",type:"uint256"}],name:"transferFrom",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"}],J0e={abi:Q0e},Z0e="hh-sol-artifact-1",X0e="BlockCoopTestTether",eye="contracts/src/BlockCoopTestTether.sol",tye=[{inputs:[],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!0,internalType:"address",name:"spender",type:"address"},{indexed:!1,internalType:"uint256",name:"value",type:"uint256"}],name:"Approval",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"previousOwner",type:"address"},{indexed:!0,internalType:"address",name:"newOwner",type:"address"}],name:"OwnershipTransferred",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"from",type:"address"},{indexed:!0,internalType:"address",name:"to",type:"address"},{indexed:!1,internalType:"uint256",name:"value",type:"uint256"}],name:"Transfer",type:"event"},{inputs:[{internalType:"address",name:"owner",type:"address"},{internalType:"address",name:"spender",type:"address"}],name:"allowance",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"spender",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"approve",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"account",type:"address"}],name:"balanceOf",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"decimals",outputs:[{internalType:"uint8",name:"",type:"uint8"}],stateMutability:"pure",type:"function"},{inputs:[{internalType:"address",name:"spender",type:"address"},{internalType:"uint256",name:"subtractedValue",type:"uint256"}],name:"decreaseAllowance",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"spender",type:"address"},{internalType:"uint256",name:"addedValue",type:"uint256"}],name:"increaseAllowance",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"logoURI",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"mint",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"name",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"owner",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"renounceOwnership",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"symbol",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"totalSupply",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"transfer",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"transferFrom",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"newOwner",type:"address"}],name:"transferOwnership",outputs:[],stateMutability:"nonpayable",type:"function"}],nye="0x60806040523480156200001157600080fd5b506040518060400160405280601581526020017f426c6f636b436f6f702054657374205465746865720000000000000000000000815250604051806040016040528060048152602001631554d11560e21b8152508160039081620000769190620002c1565b506004620000858282620002c1565b505050620000a26200009c620000fc60201b60201c565b62000100565b6040518060a00160405280607481526020016200109260749139600690620000cb9082620002c1565b50620000f633620000df6006600a620004a2565b620000f09064174876e800620004ba565b62000152565b620004ea565b3390565b600580546001600160a01b038381166001600160a01b0319831681179093556040519116919082907f8be0079c531659141344cd1fd0a4f28419497f9722a3daafe3b4186f6b6457e090600090a35050565b6001600160a01b038216620001ad5760405162461bcd60e51b815260206004820152601f60248201527f45524332303a206d696e7420746f20746865207a65726f206164647265737300604482015260640160405180910390fd5b8060026000828254620001c19190620004d4565b90915550506001600160a01b038216600081815260208181526040808320805486019055518481527fddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef910160405180910390a35050565b505050565b634e487b7160e01b600052604160045260246000fd5b600181811c908216806200024857607f821691505b6020821081036200026957634e487b7160e01b600052602260045260246000fd5b50919050565b601f8211156200021857600081815260208120601f850160051c81016020861015620002985750805b601f850160051c820191505b81811015620002b957828155600101620002a4565b505050505050565b81516001600160401b03811115620002dd57620002dd6200021d565b620002f581620002ee845462000233565b846200026f565b602080601f8311600181146200032d5760008415620003145750858301515b600019600386901b1c1916600185901b178555620002b9565b600085815260208120601f198616915b828110156200035e578886015182559484019460019091019084016200033d565b50858210156200037d5787850151600019600388901b60f8161c191681555b5050505050600190811b01905550565b634e487b7160e01b600052601160045260246000fd5b600181815b80851115620003e4578160001904821115620003c857620003c86200038d565b80851615620003d657918102915b93841c9390800290620003a8565b509250929050565b600082620003fd575060016200049c565b816200040c575060006200049c565b8160018114620004255760028114620004305762000450565b60019150506200049c565b60ff8411156200044457620004446200038d565b50506001821b6200049c565b5060208310610133831016604e8410600b841016171562000475575081810a6200049c565b620004818383620003a3565b80600019048211156200049857620004986200038d565b0290505b92915050565b6000620004b360ff841683620003ec565b9392505050565b80820281158282048414176200049c576200049c6200038d565b808201808211156200049c576200049c6200038d565b610b9880620004fa6000396000f3fe608060405234801561001057600080fd5b50600436106101005760003560e01c806370a0823111610097578063a457c2d711610066578063a457c2d7146101fe578063a9059cbb14610211578063dd62ed3e14610224578063f2fde38b1461023757600080fd5b806370a08231146101aa578063715018a6146101d35780638da5cb5b146101db57806395d89b41146101f657600080fd5b8063313ce567116100d3578063313ce5671461016b578063395093511461017a57806340c10f191461018d5780636bb38b28146101a257600080fd5b806306fdde0314610105578063095ea7b31461012357806318160ddd1461014657806323b872dd14610158575b600080fd5b61010d61024a565b60405161011a91906109e2565b60405180910390f35b610136610131366004610a4c565b6102dc565b604051901515815260200161011a565b6002545b60405190815260200161011a565b610136610166366004610a76565b6102f6565b6040516006815260200161011a565b610136610188366004610a4c565b61031a565b6101a061019b366004610a4c565b61033c565b005b61010d610352565b61014a6101b8366004610ab2565b6001600160a01b031660009081526020819052604090205490565b6101a06103e0565b6005546040516001600160a01b03909116815260200161011a565b61010d6103f4565b61013661020c366004610a4c565b610403565b61013661021f366004610a4c565b610483565b61014a610232366004610ad4565b610491565b6101a0610245366004610ab2565b6104bc565b60606003805461025990610b07565b80601f016020809104026020016040519081016040528092919081815260200182805461028590610b07565b80156102d25780601f106102a7576101008083540402835291602001916102d2565b820191906000526020600020905b8154815290600101906020018083116102b557829003601f168201915b5050505050905090565b6000336102ea818585610535565b60019150505b92915050565b600033610304858285610659565b61030f8585856106d3565b506001949350505050565b6000336102ea81858561032d8383610491565b6103379190610b41565b610535565b610344610877565b61034e82826108d1565b5050565b6006805461035f90610b07565b80601f016020809104026020016040519081016040528092919081815260200182805461038b90610b07565b80156103d85780601f106103ad576101008083540402835291602001916103d8565b820191906000526020600020905b8154815290600101906020018083116103bb57829003601f168201915b505050505081565b6103e8610877565b6103f26000610990565b565b60606004805461025990610b07565b600033816104118286610491565b9050838110156104765760405162461bcd60e51b815260206004820152602560248201527f45524332303a2064656372656173656420616c6c6f77616e63652062656c6f77604482015264207a65726f60d81b60648201526084015b60405180910390fd5b61030f8286868403610535565b6000336102ea8185856106d3565b6001600160a01b03918216600090815260016020908152604080832093909416825291909152205490565b6104c4610877565b6001600160a01b0381166105295760405162461bcd60e51b815260206004820152602660248201527f4f776e61626c653a206e6577206f776e657220697320746865207a65726f206160448201526564647265737360d01b606482015260840161046d565b61053281610990565b50565b6001600160a01b0383166105975760405162461bcd60e51b8152602060048201526024808201527f45524332303a20617070726f76652066726f6d20746865207a65726f206164646044820152637265737360e01b606482015260840161046d565b6001600160a01b0382166105f85760405162461bcd60e51b815260206004820152602260248201527f45524332303a20617070726f766520746f20746865207a65726f206164647265604482015261737360f01b606482015260840161046d565b6001600160a01b0383811660008181526001602090815260408083209487168084529482529182902085905590518481527f8c5be1e5ebec7d5bd14f71427d1e84f3dd0314c0f7b2291e5b200ac8c7c3b925910160405180910390a3505050565b60006106658484610491565b905060001981146106cd57818110156106c05760405162461bcd60e51b815260206004820152601d60248201527f45524332303a20696e73756666696369656e7420616c6c6f77616e6365000000604482015260640161046d565b6106cd8484848403610535565b50505050565b6001600160a01b0383166107375760405162461bcd60e51b815260206004820152602560248201527f45524332303a207472616e736665722066726f6d20746865207a65726f206164604482015264647265737360d81b606482015260840161046d565b6001600160a01b0382166107995760405162461bcd60e51b815260206004820152602360248201527f45524332303a207472616e7366657220746f20746865207a65726f206164647260448201526265737360e81b606482015260840161046d565b6001600160a01b038316600090815260208190526040902054818110156108115760405162461bcd60e51b815260206004820152602660248201527f45524332303a207472616e7366657220616d6f756e7420657863656564732062604482015265616c616e636560d01b606482015260840161046d565b6001600160a01b03848116600081815260208181526040808320878703905593871680835291849020805487019055925185815290927fddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef910160405180910390a36106cd565b6005546001600160a01b031633146103f25760405162461bcd60e51b815260206004820181905260248201527f4f776e61626c653a2063616c6c6572206973206e6f7420746865206f776e6572604482015260640161046d565b6001600160a01b0382166109275760405162461bcd60e51b815260206004820152601f60248201527f45524332303a206d696e7420746f20746865207a65726f206164647265737300604482015260640161046d565b80600260008282546109399190610b41565b90915550506001600160a01b038216600081815260208181526040808320805486019055518481527fddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef910160405180910390a35050565b600580546001600160a01b038381166001600160a01b0319831681179093556040519116919082907f8be0079c531659141344cd1fd0a4f28419497f9722a3daafe3b4186f6b6457e090600090a35050565b600060208083528351808285015260005b81811015610a0f578581018301518582016040015282016109f3565b506000604082860101526040601f19601f8301168501019250505092915050565b80356001600160a01b0381168114610a4757600080fd5b919050565b60008060408385031215610a5f57600080fd5b610a6883610a30565b946020939093013593505050565b600080600060608486031215610a8b57600080fd5b610a9484610a30565b9250610aa260208501610a30565b9150604084013590509250925092565b600060208284031215610ac457600080fd5b610acd82610a30565b9392505050565b60008060408385031215610ae757600080fd5b610af083610a30565b9150610afe60208401610a30565b90509250929050565b600181811c90821680610b1b57607f821691505b602082108103610b3b57634e487b7160e01b600052602260045260246000fd5b50919050565b808201808211156102f057634e487b7160e01b600052601160045260246000fdfea2646970667358221220950c0cdce11c6d59e69715d62a6c96b2de3eba8c4f1e218effdc7677441d362864736f6c6343000814003368747470733a2f2f616d6172616e74682d616363757365642d62757a7a6172642d3536342e6d7970696e6174612e636c6f75642f697066732f6261666b726569626e3479366c6c6c6575676874703570677533376c7665376d796d76636666706f3569326836697734743469776f367a356f6375",rye="0x608060405234801561001057600080fd5b50600436106101005760003560e01c806370a0823111610097578063a457c2d711610066578063a457c2d7146101fe578063a9059cbb14610211578063dd62ed3e14610224578063f2fde38b1461023757600080fd5b806370a08231146101aa578063715018a6146101d35780638da5cb5b146101db57806395d89b41146101f657600080fd5b8063313ce567116100d3578063313ce5671461016b578063395093511461017a57806340c10f191461018d5780636bb38b28146101a257600080fd5b806306fdde0314610105578063095ea7b31461012357806318160ddd1461014657806323b872dd14610158575b600080fd5b61010d61024a565b60405161011a91906109e2565b60405180910390f35b610136610131366004610a4c565b6102dc565b604051901515815260200161011a565b6002545b60405190815260200161011a565b610136610166366004610a76565b6102f6565b6040516006815260200161011a565b610136610188366004610a4c565b61031a565b6101a061019b366004610a4c565b61033c565b005b61010d610352565b61014a6101b8366004610ab2565b6001600160a01b031660009081526020819052604090205490565b6101a06103e0565b6005546040516001600160a01b03909116815260200161011a565b61010d6103f4565b61013661020c366004610a4c565b610403565b61013661021f366004610a4c565b610483565b61014a610232366004610ad4565b610491565b6101a0610245366004610ab2565b6104bc565b60606003805461025990610b07565b80601f016020809104026020016040519081016040528092919081815260200182805461028590610b07565b80156102d25780601f106102a7576101008083540402835291602001916102d2565b820191906000526020600020905b8154815290600101906020018083116102b557829003601f168201915b5050505050905090565b6000336102ea818585610535565b60019150505b92915050565b600033610304858285610659565b61030f8585856106d3565b506001949350505050565b6000336102ea81858561032d8383610491565b6103379190610b41565b610535565b610344610877565b61034e82826108d1565b5050565b6006805461035f90610b07565b80601f016020809104026020016040519081016040528092919081815260200182805461038b90610b07565b80156103d85780601f106103ad576101008083540402835291602001916103d8565b820191906000526020600020905b8154815290600101906020018083116103bb57829003601f168201915b505050505081565b6103e8610877565b6103f26000610990565b565b60606004805461025990610b07565b600033816104118286610491565b9050838110156104765760405162461bcd60e51b815260206004820152602560248201527f45524332303a2064656372656173656420616c6c6f77616e63652062656c6f77604482015264207a65726f60d81b60648201526084015b60405180910390fd5b61030f8286868403610535565b6000336102ea8185856106d3565b6001600160a01b03918216600090815260016020908152604080832093909416825291909152205490565b6104c4610877565b6001600160a01b0381166105295760405162461bcd60e51b815260206004820152602660248201527f4f776e61626c653a206e6577206f776e657220697320746865207a65726f206160448201526564647265737360d01b606482015260840161046d565b61053281610990565b50565b6001600160a01b0383166105975760405162461bcd60e51b8152602060048201526024808201527f45524332303a20617070726f76652066726f6d20746865207a65726f206164646044820152637265737360e01b606482015260840161046d565b6001600160a01b0382166105f85760405162461bcd60e51b815260206004820152602260248201527f45524332303a20617070726f766520746f20746865207a65726f206164647265604482015261737360f01b606482015260840161046d565b6001600160a01b0383811660008181526001602090815260408083209487168084529482529182902085905590518481527f8c5be1e5ebec7d5bd14f71427d1e84f3dd0314c0f7b2291e5b200ac8c7c3b925910160405180910390a3505050565b60006106658484610491565b905060001981146106cd57818110156106c05760405162461bcd60e51b815260206004820152601d60248201527f45524332303a20696e73756666696369656e7420616c6c6f77616e6365000000604482015260640161046d565b6106cd8484848403610535565b50505050565b6001600160a01b0383166107375760405162461bcd60e51b815260206004820152602560248201527f45524332303a207472616e736665722066726f6d20746865207a65726f206164604482015264647265737360d81b606482015260840161046d565b6001600160a01b0382166107995760405162461bcd60e51b815260206004820152602360248201527f45524332303a207472616e7366657220746f20746865207a65726f206164647260448201526265737360e81b606482015260840161046d565b6001600160a01b038316600090815260208190526040902054818110156108115760405162461bcd60e51b815260206004820152602660248201527f45524332303a207472616e7366657220616d6f756e7420657863656564732062604482015265616c616e636560d01b606482015260840161046d565b6001600160a01b03848116600081815260208181526040808320878703905593871680835291849020805487019055925185815290927fddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef910160405180910390a36106cd565b6005546001600160a01b031633146103f25760405162461bcd60e51b815260206004820181905260248201527f4f776e61626c653a2063616c6c6572206973206e6f7420746865206f776e6572604482015260640161046d565b6001600160a01b0382166109275760405162461bcd60e51b815260206004820152601f60248201527f45524332303a206d696e7420746f20746865207a65726f206164647265737300604482015260640161046d565b80600260008282546109399190610b41565b90915550506001600160a01b038216600081815260208181526040808320805486019055518481527fddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef910160405180910390a35050565b600580546001600160a01b038381166001600160a01b0319831681179093556040519116919082907f8be0079c531659141344cd1fd0a4f28419497f9722a3daafe3b4186f6b6457e090600090a35050565b600060208083528351808285015260005b81811015610a0f578581018301518582016040015282016109f3565b506000604082860101526040601f19601f8301168501019250505092915050565b80356001600160a01b0381168114610a4757600080fd5b919050565b60008060408385031215610a5f57600080fd5b610a6883610a30565b946020939093013593505050565b600080600060608486031215610a8b57600080fd5b610a9484610a30565b9250610aa260208501610a30565b9150604084013590509250925092565b600060208284031215610ac457600080fd5b610acd82610a30565b9392505050565b60008060408385031215610ae757600080fd5b610af083610a30565b9150610afe60208401610a30565b90509250929050565b600181811c90821680610b1b57607f821691505b602082108103610b3b57634e487b7160e01b600052602260045260246000fd5b50919050565b808201808211156102f057634e487b7160e01b600052601160045260246000fdfea2646970667358221220950c0cdce11c6d59e69715d62a6c96b2de3eba8c4f1e218effdc7677441d362864736f6c63430008140033",sye={},iye={},Hv={_format:Z0e,contractName:X0e,sourceName:eye,abi:tye,bytecode:nye,deployedBytecode:rye,linkReferences:sye,deployedLinkReferences:iye},aye="hh-sol-artifact-1",oye="IPancakeRouter",cye="contracts/src/BlockCoopV2.sol",lye=[{inputs:[],name:"factory",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"pure",type:"function"},{inputs:[],name:"WETH",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"pure",type:"function"},{inputs:[{internalType:"address",name:"tokenA",type:"address"},{internalType:"address",name:"tokenB",type:"address"},{internalType:"uint256",name:"amountADesired",type:"uint256"},{internalType:"uint256",name:"amountBDesired",type:"uint256"},{internalType:"uint256",name:"amountAMin",type:"uint256"},{internalType:"uint256",name:"amountBMin",type:"uint256"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"deadline",type:"uint256"}],name:"addLiquidity",outputs:[{internalType:"uint256",name:"amountA",type:"uint256"},{internalType:"uint256",name:"amountB",type:"uint256"},{internalType:"uint256",name:"liquidity",type:"uint256"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"token",type:"address"},{internalType:"uint256",name:"amountTokenDesired",type:"uint256"},{internalType:"uint256",name:"amountTokenMin",type:"uint256"},{internalType:"uint256",name:"amountETHMin",type:"uint256"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"deadline",type:"uint256"}],name:"addLiquidityETH",outputs:[{internalType:"uint256",name:"amountToken",type:"uint256"},{internalType:"uint256",name:"amountETH",type:"uint256"},{internalType:"uint256",name:"liquidity",type:"uint256"}],stateMutability:"payable",type:"function"},{inputs:[{internalType:"address",name:"tokenA",type:"address"},{internalType:"address",name:"tokenB",type:"address"},{internalType:"uint256",name:"liquidity",type:"uint256"},{internalType:"uint256",name:"amountAMin",type:"uint256"},{internalType:"uint256",name:"amountBMin",type:"uint256"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"deadline",type:"uint256"}],name:"removeLiquidity",outputs:[{internalType:"uint256",name:"amountA",type:"uint256"},{internalType:"uint256",name:"amountB",type:"uint256"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"token",type:"address"},{internalType:"uint256",name:"liquidity",type:"uint256"},{internalType:"uint256",name:"amountTokenMin",type:"uint256"},{internalType:"uint256",name:"amountETHMin",type:"uint256"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"deadline",type:"uint256"}],name:"removeLiquidityETH",outputs:[{internalType:"uint256",name:"amountToken",type:"uint256"},{internalType:"uint256",name:"amountETH",type:"uint256"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"token",type:"address"},{internalType:"uint256",name:"liquidity",type:"uint256"},{internalType:"uint256",name:"amountTokenMin",type:"uint256"},{internalType:"uint256",name:"amountETHMin",type:"uint256"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"deadline",type:"uint256"}],name:"removeLiquidityETHSupportingFeeOnTransferTokens",outputs:[{internalType:"uint256",name:"amountETH",type:"uint256"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"token",type:"address"},{internalType:"uint256",name:"liquidity",type:"uint256"},{internalType:"uint256",name:"amountTokenMin",type:"uint256"},{internalType:"uint256",name:"amountETHMin",type:"uint256"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"deadline",type:"uint256"},{internalType:"bool",name:"approveMax",type:"bool"},{internalType:"uint8",name:"v",type:"uint8"},{internalType:"bytes32",name:"r",type:"bytes32"},{internalType:"bytes32",name:"s",type:"bytes32"}],name:"removeLiquidityETHWithPermit",outputs:[{internalType:"uint256",name:"amountToken",type:"uint256"},{internalType:"uint256",name:"amountETH",type:"uint256"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"token",type:"address"},{internalType:"uint256",name:"liquidity",type:"uint256"},{internalType:"uint256",name:"amountTokenMin",type:"uint256"},{internalType:"uint256",name:"amountETHMin",type:"uint256"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"deadline",type:"uint256"},{internalType:"bool",name:"approveMax",type:"bool"},{internalType:"uint8",name:"v",type:"uint8"},{internalType:"bytes32",name:"r",type:"bytes32"},{internalType:"bytes32",name:"s",type:"bytes32"}],name:"removeLiquidityETHWithPermitSupportingFeeOnTransferTokens",outputs:[{internalType:"uint256",name:"amountETH",type:"uint256"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"tokenA",type:"address"},{internalType:"address",name:"tokenB",type:"address"},{internalType:"uint256",name:"liquidity",type:"uint256"},{internalType:"uint256",name:"amountAMin",type:"uint256"},{internalType:"uint256",name:"amountBMin",type:"uint256"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"deadline",type:"uint256"},{internalType:"bool",name:"approveMax",type:"bool"},{internalType:"uint8",name:"v",type:"uint8"},{internalType:"bytes32",name:"r",type:"bytes32"},{internalType:"bytes32",name:"s",type:"bytes32"}],name:"removeLiquidityWithPermit",outputs:[{internalType:"uint256",name:"amountA",type:"uint256"},{internalType:"uint256",name:"amountB",type:"uint256"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"amountOut",type:"uint256"},{internalType:"address[]",name:"path",type:"address[]"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"deadline",type:"uint256"}],name:"swapETHForExactTokens",outputs:[{internalType:"uint256[]",name:"amounts",type:"uint256[]"}],stateMutability:"payable",type:"function"},{inputs:[{internalType:"uint256",name:"amountOutMin",type:"uint256"},{internalType:"address[]",name:"path",type:"address[]"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"deadline",type:"uint256"}],name:"swapExactETHForTokens",outputs:[{internalType:"uint256[]",name:"amounts",type:"uint256[]"}],stateMutability:"payable",type:"function"},{inputs:[{internalType:"uint256",name:"amountOutMin",type:"uint256"},{internalType:"address[]",name:"path",type:"address[]"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"deadline",type:"uint256"}],name:"swapExactETHForTokensSupportingFeeOnTransferTokens",outputs:[],stateMutability:"payable",type:"function"},{inputs:[{internalType:"uint256",name:"amountIn",type:"uint256"},{internalType:"uint256",name:"amountOutMin",type:"uint256"},{internalType:"address[]",name:"path",type:"address[]"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"deadline",type:"uint256"}],name:"swapExactTokensForETH",outputs:[{internalType:"uint256[]",name:"amounts",type:"uint256[]"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"amountIn",type:"uint256"},{internalType:"uint256",name:"amountOutMin",type:"uint256"},{internalType:"address[]",name:"path",type:"address[]"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"deadline",type:"uint256"}],name:"swapExactTokensForETHSupportingFeeOnTransferTokens",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"amountIn",type:"uint256"},{internalType:"uint256",name:"amountOutMin",type:"uint256"},{internalType:"address[]",name:"path",type:"address[]"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"deadline",type:"uint256"}],name:"swapExactTokensForTokens",outputs:[{internalType:"uint256[]",name:"amounts",type:"uint256[]"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"amountIn",type:"uint256"},{internalType:"uint256",name:"amountOutMin",type:"uint256"},{internalType:"address[]",name:"path",type:"address[]"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"deadline",type:"uint256"}],name:"swapExactTokensForTokensSupportingFeeOnTransferTokens",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"amountOut",type:"uint256"},{internalType:"uint256",name:"amountInMax",type:"uint256"},{internalType:"address[]",name:"path",type:"address[]"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"deadline",type:"uint256"}],name:"swapTokensForExactETH",outputs:[{internalType:"uint256[]",name:"amounts",type:"uint256[]"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"amountOut",type:"uint256"},{internalType:"uint256",name:"amountInMax",type:"uint256"},{internalType:"address[]",name:"path",type:"address[]"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"deadline",type:"uint256"}],name:"swapTokensForExactTokens",outputs:[{internalType:"uint256[]",name:"amounts",type:"uint256[]"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"amountA",type:"uint256"},{internalType:"uint256",name:"reserveA",type:"uint256"},{internalType:"uint256",name:"reserveB",type:"uint256"}],name:"quote",outputs:[{internalType:"uint256",name:"amountB",type:"uint256"}],stateMutability:"pure",type:"function"},{inputs:[{internalType:"uint256",name:"amountIn",type:"uint256"},{internalType:"uint256",name:"reserveIn",type:"uint256"},{internalType:"uint256",name:"reserveOut",type:"uint256"}],name:"getAmountOut",outputs:[{internalType:"uint256",name:"amountOut",type:"uint256"}],stateMutability:"pure",type:"function"},{inputs:[{internalType:"uint256",name:"amountOut",type:"uint256"},{internalType:"uint256",name:"reserveIn",type:"uint256"},{internalType:"uint256",name:"reserveOut",type:"uint256"}],name:"getAmountIn",outputs:[{internalType:"uint256",name:"amountIn",type:"uint256"}],stateMutability:"pure",type:"function"},{inputs:[{internalType:"uint256",name:"amountIn",type:"uint256"},{internalType:"address[]",name:"path",type:"address[]"}],name:"getAmountsOut",outputs:[{internalType:"uint256[]",name:"amounts",type:"uint256[]"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"amountOut",type:"uint256"},{internalType:"address[]",name:"path",type:"address[]"}],name:"getAmountsIn",outputs:[{internalType:"uint256[]",name:"amounts",type:"uint256[]"}],stateMutability:"view",type:"function"}],uye="0x",dye="0x",hye={},fye={},DB={_format:aye,contractName:oye,sourceName:cye,abi:lye,bytecode:uye,deployedBytecode:dye,linkReferences:hye,deployedLinkReferences:fye},pye="hh-sol-artifact-1",mye="IPancakeFactory",gye="interfaces/IPancakeFactory.sol",yye=[{inputs:[{internalType:"address",name:"tokenA",type:"address"},{internalType:"address",name:"tokenB",type:"address"}],name:"getPair",outputs:[{internalType:"address",name:"pair",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"allPairsLength",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"}],wye="0x",bye="0x",xye={},vye={},UB={_format:pye,contractName:mye,sourceName:gye,abi:yye,bytecode:wye,deployedBytecode:bye,linkReferences:xye,deployedLinkReferences:vye},Eye=[{inputs:[{internalType:"address",name:"_blocksToken",type:"address"},{internalType:"address",name:"_dividendToken",type:"address"},{internalType:"address",name:"admin",type:"address"}],stateMutability:"nonpayable",type:"constructor"},{inputs:[],name:"AccessControlBadConfirmation",type:"error"},{inputs:[{internalType:"address",name:"account",type:"address"},{internalType:"bytes32",name:"neededRole",type:"bytes32"}],name:"AccessControlUnauthorizedAccount",type:"error"},{inputs:[],name:"EnforcedPause",type:"error"},{inputs:[],name:"ExpectedPause",type:"error"},{inputs:[],name:"ReentrancyGuardReentrantCall",type:"error"},{inputs:[{internalType:"address",name:"token",type:"address"}],name:"SafeERC20FailedOperation",type:"error"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"user",type:"address"},{indexed:!1,internalType:"uint256",name:"amount",type:"uint256"}],name:"DividendClaimed",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint256",name:"amount",type:"uint256"},{indexed:!1,internalType:"uint256",name:"totalSupply",type:"uint256"}],name:"DividendDistributed",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"address",name:"account",type:"address"}],name:"Paused",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"role",type:"bytes32"},{indexed:!0,internalType:"bytes32",name:"previousAdminRole",type:"bytes32"},{indexed:!0,internalType:"bytes32",name:"newAdminRole",type:"bytes32"}],name:"RoleAdminChanged",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"role",type:"bytes32"},{indexed:!0,internalType:"address",name:"account",type:"address"},{indexed:!0,internalType:"address",name:"sender",type:"address"}],name:"RoleGranted",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"role",type:"bytes32"},{indexed:!0,internalType:"address",name:"account",type:"address"},{indexed:!0,internalType:"address",name:"sender",type:"address"}],name:"RoleRevoked",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"address",name:"account",type:"address"}],name:"Unpaused",type:"event"},{inputs:[],name:"DEFAULT_ADMIN_ROLE",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[],name:"DISTRIBUTOR_ROLE",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[],name:"claimDividend",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"amount",type:"uint256"}],name:"distributeDividends",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"dividendToken",outputs:[{internalType:"contract IERC20",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"tokenAddress",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"emergencyWithdraw",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"getDividendStats",outputs:[{internalType:"uint256",name:"totalDistributed",type:"uint256"},{internalType:"uint256",name:"totalClaimed",type:"uint256"},{internalType:"uint256",name:"totalPending",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"user",type:"address"}],name:"getDividendsWithdrawn",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"user",type:"address"}],name:"getPendingDividends",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"}],name:"getRoleAdmin",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"user",type:"address"}],name:"getTotalDividendsEarned",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"grantRole",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"hasRole",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"pause",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"paused",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"callerConfirmation",type:"address"}],name:"renounceRole",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"revokeRole",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes4",name:"interfaceId",type:"bytes4"}],name:"supportsInterface",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"token",outputs:[{internalType:"contract IERC20",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"totalDividendsDistributed",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"unpause",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"user",type:"address"}],name:"updateDividendTracker",outputs:[],stateMutability:"nonpayable",type:"function"}],Nye={abi:Eye},Cye=[{inputs:[{internalType:"address",name:"_usdtToken",type:"address"},{internalType:"address",name:"_blocksToken",type:"address"},{internalType:"address",name:"_router",type:"address"},{internalType:"address",name:"_factory",type:"address"},{internalType:"address",name:"_feeRecipient",type:"address"},{internalType:"address",name:"admin",type:"address"},{internalType:"uint256",name:"_targetPrice",type:"uint256"}],stateMutability:"nonpayable",type:"constructor"},{inputs:[],name:"AccessControlBadConfirmation",type:"error"},{inputs:[{internalType:"address",name:"account",type:"address"},{internalType:"bytes32",name:"neededRole",type:"bytes32"}],name:"AccessControlUnauthorizedAccount",type:"error"},{inputs:[],name:"EnforcedPause",type:"error"},{inputs:[],name:"ExpectedPause",type:"error"},{inputs:[],name:"ReentrancyGuardReentrantCall",type:"error"},{inputs:[{internalType:"address",name:"token",type:"address"}],name:"SafeERC20FailedOperation",type:"error"},{anonymous:!1,inputs:[{indexed:!1,internalType:"address",name:"oldRecipient",type:"address"},{indexed:!1,internalType:"address",name:"newRecipient",type:"address"}],name:"FeeRecipientUpdated",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"address",name:"account",type:"address"}],name:"Paused",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"role",type:"bytes32"},{indexed:!0,internalType:"bytes32",name:"previousAdminRole",type:"bytes32"},{indexed:!0,internalType:"bytes32",name:"newAdminRole",type:"bytes32"}],name:"RoleAdminChanged",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"role",type:"bytes32"},{indexed:!0,internalType:"address",name:"account",type:"address"},{indexed:!0,internalType:"address",name:"sender",type:"address"}],name:"RoleGranted",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"role",type:"bytes32"},{indexed:!0,internalType:"address",name:"account",type:"address"},{indexed:!0,internalType:"address",name:"sender",type:"address"}],name:"RoleRevoked",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint256",name:"oldFee",type:"uint256"},{indexed:!1,internalType:"uint256",name:"newFee",type:"uint256"}],name:"SwapFeeUpdated",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint256",name:"oldPrice",type:"uint256"},{indexed:!1,internalType:"uint256",name:"newPrice",type:"uint256"}],name:"TargetPriceUpdated",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"user",type:"address"},{indexed:!1,internalType:"uint256",name:"blocksAmount",type:"uint256"},{indexed:!1,internalType:"uint256",name:"usdtAmount",type:"uint256"}],name:"TokensSwapped",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"address",name:"account",type:"address"}],name:"Unpaused",type:"event"},{inputs:[],name:"ADMIN_ROLE",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[],name:"DEFAULT_ADMIN_ROLE",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[],name:"OPERATOR_ROLE",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"tokenAddress",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"emergencyWithdraw",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"factory",outputs:[{internalType:"contract IPancakeFactory",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"feeRecipient",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"}],name:"getRoleAdmin",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"blocksAmount",type:"uint256"}],name:"getSwapQuote",outputs:[{internalType:"uint256",name:"usdtAmount",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"grantRole",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"hasRole",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"pause",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"paused",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"callerConfirmation",type:"address"}],name:"renounceRole",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"revokeRole",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"router",outputs:[{internalType:"contract IPancakeRouter",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes4",name:"interfaceId",type:"bytes4"}],name:"supportsInterface",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"blocksAmount",type:"uint256"},{internalType:"uint256",name:"minUsdtAmount",type:"uint256"}],name:"swapBLOCKSForUSDT",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"swapFee",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"usdtAmount",type:"uint256"},{internalType:"uint256",name:"minBlocksAmount",type:"uint256"}],name:"swapUSDTForBLOCKS",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"targetPrice",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"token",outputs:[{internalType:"contract IERC20",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"unpause",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"newFeeRecipient",type:"address"}],name:"updateFeeRecipient",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"newSwapFee",type:"uint256"}],name:"updateSwapFee",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"newTargetPrice",type:"uint256"}],name:"updateTargetPrice",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"usdtToken",outputs:[{internalType:"contract IERC20",name:"",type:"address"}],stateMutability:"view",type:"function"}],Aye={abi:Cye},Tye=[{inputs:[{internalType:"address",name:"_stakingToken",type:"address"},{internalType:"address",name:"_rewardToken",type:"address"},{internalType:"address",name:"admin",type:"address"}],stateMutability:"nonpayable",type:"constructor"},{inputs:[],name:"AccessControlBadConfirmation",type:"error"},{inputs:[{internalType:"address",name:"account",type:"address"},{internalType:"bytes32",name:"neededRole",type:"bytes32"}],name:"AccessControlUnauthorizedAccount",type:"error"},{inputs:[],name:"EnforcedPause",type:"error"},{inputs:[],name:"ExpectedPause",type:"error"},{inputs:[],name:"ReentrancyGuardReentrantCall",type:"error"},{inputs:[{internalType:"address",name:"token",type:"address"}],name:"SafeERC20FailedOperation",type:"error"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"user",type:"address"},{indexed:!0,internalType:"uint256",name:"poolId",type:"uint256"},{indexed:!1,internalType:"uint256",name:"amount",type:"uint256"},{indexed:!1,internalType:"uint256",name:"penalty",type:"uint256"}],name:"EmergencyUnstake",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"address",name:"account",type:"address"}],name:"Paused",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"poolId",type:"uint256"},{indexed:!1,internalType:"string",name:"name",type:"string"},{indexed:!1,internalType:"uint256",name:"lockPeriod",type:"uint256"},{indexed:!1,internalType:"uint256",name:"apyBasisPoints",type:"uint256"}],name:"PoolCreated",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"poolId",type:"uint256"},{indexed:!1,internalType:"uint256",name:"apyBasisPoints",type:"uint256"},{indexed:!1,internalType:"bool",name:"isActive",type:"bool"}],name:"PoolUpdated",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"user",type:"address"},{indexed:!0,internalType:"uint256",name:"poolId",type:"uint256"},{indexed:!1,internalType:"uint256",name:"amount",type:"uint256"}],name:"RewardsClaimed",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint256",name:"amount",type:"uint256"},{indexed:!1,internalType:"uint256",name:"newRewardRate",type:"uint256"}],name:"RewardsDistributed",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"role",type:"bytes32"},{indexed:!0,internalType:"bytes32",name:"previousAdminRole",type:"bytes32"},{indexed:!0,internalType:"bytes32",name:"newAdminRole",type:"bytes32"}],name:"RoleAdminChanged",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"role",type:"bytes32"},{indexed:!0,internalType:"address",name:"account",type:"address"},{indexed:!0,internalType:"address",name:"sender",type:"address"}],name:"RoleGranted",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"role",type:"bytes32"},{indexed:!0,internalType:"address",name:"account",type:"address"},{indexed:!0,internalType:"address",name:"sender",type:"address"}],name:"RoleRevoked",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"user",type:"address"},{indexed:!0,internalType:"uint256",name:"poolId",type:"uint256"},{indexed:!1,internalType:"uint256",name:"amount",type:"uint256"},{indexed:!1,internalType:"uint256",name:"lockEndTime",type:"uint256"}],name:"Staked",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"address",name:"account",type:"address"}],name:"Unpaused",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"user",type:"address"},{indexed:!0,internalType:"uint256",name:"poolId",type:"uint256"},{indexed:!1,internalType:"uint256",name:"amount",type:"uint256"},{indexed:!1,internalType:"uint256",name:"penalty",type:"uint256"}],name:"Unstaked",type:"event"},{inputs:[],name:"DEFAULT_ADMIN_ROLE",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[],name:"EMERGENCY_ROLE",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[],name:"POOL_MANAGER_ROLE",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[],name:"REWARD_DISTRIBUTOR_ROLE",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[],name:"claimAllRewards",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"poolId",type:"uint256"}],name:"claimRewards",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"string",name:"name",type:"string"},{internalType:"uint256",name:"lockPeriod",type:"uint256"},{internalType:"uint256",name:"apyBasisPoints",type:"uint256"},{internalType:"uint256",name:"minStake",type:"uint256"},{internalType:"uint256",name:"maxStake",type:"uint256"},{internalType:"uint256",name:"rewardMultiplier",type:"uint256"},{internalType:"uint256",name:"emergencyExitPenalty",type:"uint256"}],name:"createPool",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"amount",type:"uint256"}],name:"distributeRewards",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"poolId",type:"uint256"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"emergencyUnstake",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"token",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"emergencyWithdraw",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"getContractStats",outputs:[{internalType:"uint256",name:"_totalStaked",type:"uint256"},{internalType:"uint256",name:"_totalRewardsDistributed",type:"uint256"},{internalType:"uint256",name:"_poolCount",type:"uint256"},{internalType:"uint256",name:"_rewardTokenBalance",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"user",type:"address"},{internalType:"uint256",name:"poolId",type:"uint256"}],name:"getPendingRewards",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"}],name:"getRoleAdmin",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"user",type:"address"}],name:"getTotalPendingRewards",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"user",type:"address"}],name:"getUserPoolIds",outputs:[{internalType:"uint256[]",name:"",type:"uint256[]"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"user",type:"address"},{internalType:"uint256",name:"poolId",type:"uint256"}],name:"getUserStake",outputs:[{internalType:"uint256",name:"amount",type:"uint256"},{internalType:"uint256",name:"stakedAt",type:"uint256"},{internalType:"uint256",name:"lockEndTime",type:"uint256"},{internalType:"uint256",name:"pendingRewards",type:"uint256"},{internalType:"bool",name:"isLocked",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"globalRewardRate",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"grantRole",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"user",type:"address"},{internalType:"uint256",name:"poolId",type:"uint256"}],name:"hasActiveStake",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"hasRole",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"pause",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"paused",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"poolCount",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"poolLastUpdateTime",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"poolRewardPerTokenStored",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"callerConfirmation",type:"address"}],name:"renounceRole",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"revokeRole",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"rewardToken",outputs:[{internalType:"contract IERC20",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"poolId",type:"uint256"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"stake",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"stakingPools",outputs:[{internalType:"string",name:"name",type:"string"},{internalType:"uint256",name:"lockPeriod",type:"uint256"},{internalType:"uint256",name:"apyBasisPoints",type:"uint256"},{internalType:"uint256",name:"minStake",type:"uint256"},{internalType:"uint256",name:"maxStake",type:"uint256"},{internalType:"uint256",name:"totalStaked",type:"uint256"},{internalType:"uint256",name:"rewardMultiplier",type:"uint256"},{internalType:"bool",name:"isActive",type:"bool"},{internalType:"uint256",name:"emergencyExitPenalty",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"stakingToken",outputs:[{internalType:"contract IERC20",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes4",name:"interfaceId",type:"bytes4"}],name:"supportsInterface",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"totalRewardsDistributed",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"totalStaked",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"totalUserStaked",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"unpause",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"poolId",type:"uint256"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"unstake",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"poolId",type:"uint256"},{internalType:"uint256",name:"apyBasisPoints",type:"uint256"},{internalType:"uint256",name:"rewardMultiplier",type:"uint256"},{internalType:"bool",name:"isActive",type:"bool"}],name:"updatePool",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"},{internalType:"uint256",name:"",type:"uint256"}],name:"userPoolIds",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"},{internalType:"address",name:"",type:"address"}],name:"userRewardPerTokenPaid",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"},{internalType:"address",name:"",type:"address"}],name:"userStakes",outputs:[{internalType:"uint256",name:"amount",type:"uint256"},{internalType:"uint256",name:"stakedAt",type:"uint256"},{internalType:"uint256",name:"lockEndTime",type:"uint256"},{internalType:"uint256",name:"lastRewardClaim",type:"uint256"},{internalType:"uint256",name:"accumulatedRewards",type:"uint256"},{internalType:"bool",name:"isActive",type:"bool"}],stateMutability:"view",type:"function"}],Sye=[{inputs:[],name:"getReserves",outputs:[{internalType:"uint112",name:"reserve0",type:"uint112"},{internalType:"uint112",name:"reserve1",type:"uint112"},{internalType:"uint32",name:"blockTimestampLast",type:"uint32"}],stateMutability:"view",type:"function"},{inputs:[],name:"token0",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"token1",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"totalSupply",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"}],name:"balanceOf",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"}],xR={abi:Sye},wx={tolerance:.5,deadline:300},MB={enabled:!0,usePrivateMempool:!1,maxGasPrice:Ir("20","gwei"),priorityFee:Ir("2","gwei"),deadline:300,frontrunProtection:!0,sandwichProtection:!0,flashloanProtection:!0};class kye{constructor(e){W(this,"router");W(this,"factory");W(this,"signer");this.signer=e,this.router=new mn(ue.contracts.router,DB.abi,e),this.factory=new mn(ue.contracts.factory,UB.abi,e)}async getPairAddress(){const e=ue.contracts.share,n=ue.contracts.usdt,r=await this.factory.getPair(e,n);if(r===co)throw new Error("No liquidity pair found for ShareToken/USDT");return r}async getReserves(){const e=await this.getPairAddress(),n=new mn(e,xR.abi,this.signer),[r,s]=await n.getReserves(),i=await n.token0(),a=await n.token1(),o=ue.contracts.share;let l,u;return i.toLowerCase()===o.toLowerCase()?(l=r,u=s):(l=s,u=r),{reserveShare:l,reserveUSDT:u,token0:i,token1:a}}async calculateLiquidityRemoval(e,n=wx){const r=await this.getPairAddress(),s=new mn(r,xR.abi,this.signer),[i,a]=await Promise.all([s.totalSupply(),this.getReserves()]),o=e*10000n/i,l=a.reserveShare*o/10000n,u=a.reserveUSDT*o/10000n,d=BigInt(Math.floor(n.tolerance*100)),h=l-l*d/10000n,f=u-u*d/10000n,p=Number(o)/100;return{lpTokenAmount:e,expectedUSDT:u,expectedShareToken:l,minimumUSDT:f,minimumShareToken:h,priceImpact:p,slippageTolerance:n.tolerance}}async removeLiquidity(e,n=wx,r=MB){r.enabled||console.warn("MEV protection is disabled. Transaction may be vulnerable to MEV attacks.");const s=await this.calculateLiquidityRemoval(e,n),i=await this.signer.provider.getGasPrice();if(r.enabled&&i>r.maxGasPrice)throw new Error(`Gas price too high: ${rt(i,"gwei")} Gwei > ${rt(r.maxGasPrice,"gwei")} Gwei. Wait for lower gas prices or increase your maximum gas price limit.`);r.frontrunProtection&&await this.detectFrontrunning(e),r.sandwichProtection&&await this.detectSandwichAttack(s),r.flashloanProtection&&await this.monitorFlashloanActivity();const a=Math.floor(Date.now()/1e3)+r.deadline,o=await this.getPairAddress();await(await new mn(o,Hv.abi,this.signer).approve(this.router.target,e)).wait();const d={gasLimit:350000n};if(r.enabled)try{const f=await this.signer.provider.getFeeData();f.maxFeePerGas&&f.maxPriorityFeePerGas?(d.maxFeePerGas=r.maxGasPrice,d.maxPriorityFeePerGas=r.priorityFee):d.gasPrice=Math.min(Number(i),Number(r.maxGasPrice))}catch(f){console.warn("Failed to get fee data, using legacy gas pricing:",f),d.gasPrice=Math.min(Number(i),Number(r.maxGasPrice))}else d.gasPrice=i;if(r.enabled){const f=Math.floor(Math.random()*3e3)+1e3;await new Promise(p=>setTimeout(p,f))}return await this.router.removeLiquidity(ue.contracts.share,ue.contracts.usdt,e,s.minimumShareToken,s.minimumUSDT,await this.signer.getAddress(),a,d)}async getTokenPrices(){const e=await this.getReserves(),n=Number(e.reserveUSDT)/Number(e.reserveShare),r=Number(e.reserveShare)/Number(e.reserveUSDT);return{shareTokenPriceInUSDT:n,usdtPriceInShareToken:r}}async estimateRemovalGas(e,n=wx){const r=await this.calculateLiquidityRemoval(e,n),s=Math.floor(Date.now()/1e3)+n.deadline;try{const i=await this.router.removeLiquidity.estimateGas(ue.contracts.share,ue.contracts.usdt,e,r.minimumShareToken,r.minimumUSDT,await this.signer.getAddress(),s);return i+i*20n/100n}catch(i){return console.error("Gas estimation failed:",i),300000n}}async detectFrontrunning(e){try{const n=await this.signer.provider.getBlock("pending");n&&n.transactions.length>100&&console.warn("High mempool activity detected - potential frontrunning risk");const r=await this.getPairAddress()}catch(n){console.warn("Frontrun detection failed:",n)}}async detectSandwichAttack(e){try{const n=await this.getReserves(),r=Number(n.reserveUSDT)/Number(n.reserveShare);e.priceImpact>2&&console.warn("High price impact detected - potential sandwich attack risk")}catch(n){console.warn("Sandwich attack detection failed:",n)}}async monitorFlashloanActivity(){try{const e=await this.signer.provider.getBlock("latest");if(!e)return;e.transactions.length>200&&console.warn("High transaction volume detected - monitor for flashloan MEV activity")}catch(e){console.warn("Flashloan monitoring failed:",e)}}}function MS(t){return new kye(t)}function LB(t){const{entryUSDT:e,exchangeRate:n}=t;if(e==null)throw new Error("Package entryUSDT is required but undefined");if(n==null)throw new Error("Package exchangeRate is required but undefined");const r=BigInt(e),s=BigInt(n),i=3000n,a=s===0n?0n:r*10n**18n/s,o=r*i/10000n,l=r-o,u=a*i/10000n,d=a-u;return{totalTokens:a,vestTokens:d,poolTokens:u,lpTokens:u,usdtPool:o,usdtVault:l}}async function LS(t){try{const e=un();let n;try{n=BigInt(await e.packageManager.globalTargetPrice())}catch(f){console.warn("Unable to read globalTargetPrice from chain, using 1.0 fallback",f),n=1000000000000000000n}let r=3000n;try{r=BigInt(await e.packageManager.liquidityBps())}catch(f){console.warn("Unable to read liquidityBps; defaulting to 30%",f)}let s=n;try{const f=await e.packageManager.getCurrentMarketPrice(),p=BigInt(f[0]);s=!!f[1]&&p>0n?p:n}catch{console.warn("Unable to read market price; using target price")}const i=BigInt(t.entryUSDT),a=BigInt(t.exchangeRate);if(a===0n||s===0n)return console.warn("Invalid exchange rate or price; returning zeros"),{totalTokens:0n,vestTokens:0n,poolTokens:0n,lpTokens:0n,usdtPool:0n,usdtVault:0n};const o=i*10n**18n/a,l=i*r/10000n,u=i-l,d=l*10n**18n/s,h=o-d;return{totalTokens:o,vestTokens:h,poolTokens:d,lpTokens:d,usdtPool:l,usdtVault:u}}catch(e){return console.error("Error calculating splits with target price:",e),LB(t)}}function iE(){return new AD(ue.rpcUrl,{chainId:ue.chainId,name:ue.chainId===56?"BSC Mainnet":"BSC Testnet"})}async function BB(){if(console.warn("getSigner() is deprecated. Use useWeb3() hook to access signer from Web3Provider context."),typeof window<"u"&&window.ethereum)try{return await new xd(window.ethereum).getSigner()}catch(t){return console.error("Error getting signer:",t),null}return null}function $i(t,e,n){if(console.log(" Creating contract instance:",{address:t,isValidAddress:cT(t),abiType:typeof e,hasAbi:!!(e.abi||e),signerOrProviderType:n.constructor.name,contractType:t==="0x554a9631E00103cC97282D0BC27Ba0A9a4ab4A5E"?"STAKING":"OTHER"}),!cT(t))throw new Error(`Invalid contract address: ${t}`);const r=new mn(t,e.abi||e,n);return console.log(" Contract instance created:",{contractAddress:r.address,contractTarget:r.target,hasAddress:!!r.address}),r}function un(t){const e=t||iE();console.log(" getContracts called with:",{hasSigner:!!t,signerOrProviderType:e.constructor.name,appKitConfigExists:!!ue,contractsConfigExists:!!ue.contracts,contractAddresses:{packageManager:ue.contracts.packageManager,usdt:ue.contracts.usdt,vault:ue.contracts.vault,taxManager:ue.contracts.taxManager,share:ue.contracts.share,lp:ue.contracts.lp,router:ue.contracts.router},allContractAddressesValid:Object.values(ue.contracts).every(n=>!!n&&n!=="")});try{const n=$i(ue.contracts.packageManager,V0e,e);return console.log(" PackageManager contract created:",{address:n.address,hasAddress:!!n.address}),{packageManager:n,vestingVault:$i(ue.contracts.vault,W0e,e),taxManager:$i(ue.contracts.taxManager,K0e,e),shareToken:$i(ue.contracts.share,Y0e,e),lpToken:$i(ue.contracts.lp,J0e,e),router:$i(ue.contracts.router,DB,e),factory:$i(ue.contracts.factory,UB,e),usdtToken:$i(ue.contracts.usdt,Hv,e),dividendDistributor:ue.contracts.dividendDistributor?$i(ue.contracts.dividendDistributor,Nye,e):null,secondaryMarket:ue.contracts.secondaryMarket?$i(ue.contracts.secondaryMarket,Aye,e):null,staking:(()=>{var r;return console.log(" Staking contract creation check:",{stakingAddress:ue.contracts.staking,stakingAddressTruthy:!!ue.contracts.staking,stakingAddressType:typeof ue.contracts.staking,stakingAddressLength:((r=ue.contracts.staking)==null?void 0:r.length)||0}),ue.contracts.staking?$i(ue.contracts.staking,Tye,e):null})()}}catch(n){throw console.error(" Error creating contract instances:",n),console.error("Contract addresses being used:",ue.contracts),console.error("Staking contract specifically:",{stakingAddress:ue.contracts.staking,stakingEnabled:!!ue.contracts.staking}),n}}async function $B(t){try{const n=await un().packageManager.getPackage(t);return{...{entryUSDT:n.entryUSDT,exchangeRate:n.exchangeRate,cliff:Number(n.cliff),duration:Number(n.duration),vestBps:Number(n.vestBps),referralBps:Number(n.referralBps),active:n.active,exists:n.exists,name:n.name},id:t}}catch(e){return console.error("Error fetching package:",e),null}}async function aE(t,e){try{const n=iE();return await new mn(t,Hv.abi||Hv,n).balanceOf(e)}catch(n){return console.error("Error fetching token balance:",n),0n}}async function FB(t){return aE(ue.contracts.usdt,t)}async function HB(t){return aE(ue.contracts.share,t)}async function VB(t){return aE(ue.contracts.lp,t)}async function zB(t){try{const e=un(),[n,r,s,i]=await Promise.all([e.vestingVault.totalLocked(t),e.vestingVault.released(t),e.vestingVault.vestedAmount(t),e.vestingVault.userSchedule(t)]),a=s-r,o=n-r,l=i.start+i.cliff,u=i.start+i.duration,d=BigInt(Math.floor(Date.now()/1e3)),h=d>=l,f=d>=u;let p=0;if(i.duration>0n)if(d<=i.start)p=0;else if(d>=u)p=100;else{const g=d-i.start;p=Number(g*100n/i.duration)}return{totalVested:n,claimable:a,claimed:r,remaining:o,schedule:{cliff:i.cliff,duration:i.duration,start:i.start},cliffEndTime:l,vestingEndTime:u,isCliffPassed:h,isFullyVested:f,vestingProgress:p}}catch(e){return console.error("Error fetching vesting info:",e),{totalVested:0n,claimable:0n,claimed:0n,remaining:0n,schedule:{cliff:0n,duration:0n,start:0n},cliffEndTime:0n,vestingEndTime:0n,isCliffPassed:!1,isFullyVested:!1,vestingProgress:0}}}async function WB(t,e,n,r){return await MS(e).removeLiquidity(t,n,r)}async function qB(t,e,n,r,s){return await un(s).packageManager.redeemWithLiquidityRemoval(t,e,n,r)}async function KB(t,e){const n=un(e),[r,s,i]=await n.packageManager.getRedemptionPreview(t);return{expectedShare:r,expectedUSDT:s,liquidityToRemove:i}}async function GB(t,e,n){return await MS(e).calculateLiquidityRemoval(t,n)}async function YB(t){return await MS(t).getTokenPrices()}async function BS(t){try{const n=await un().packageManager.getUserStats(t);return{totalInvested:n.totalInvested,totalTokensReceived:n.totalTokensReceived,totalVestTokens:n.totalVestTokens,totalPoolTokens:n.totalPoolTokens,totalLPTokens:n.totalLPTokens,totalReferralRewards:n.totalReferralRewards,purchaseCount:n.purchaseCount,redemptionCount:n.redemptionCount,totalRedemptions:n.totalRedemptions}}catch(e){return console.error("Error fetching user portfolio stats:",e),null}}async function $S(t){try{const n=await un().packageManager.getUserPurchases(t),r=[];for(const s of n)try{const i=await $B(Number(s.packageId));r.push({packageId:Number(s.packageId),packageName:(i==null?void 0:i.name)||`Package ${s.packageId}`,usdtAmount:s.usdtAmount,totalTokens:s.totalTokens,vestTokens:s.vestTokens,poolTokens:s.poolTokens,lpTokens:s.lpTokens,referrer:s.referrer,referralReward:s.referralReward,timestamp:Number(s.timestamp),blockNumber:0,transactionHash:""})}catch(i){console.warn("Error processing purchase record:",i)}return r}catch(e){return console.error("Error fetching user purchase history:",e),[]}}async function QB(t){try{const e=un(),[n,r]=await e.packageManager.getUserRedemptions(t),s=[];for(let i=0;i<n.length;i++)s.push({lpAmount:n[i],timestamp:Number(r[i]),blockNumber:0,transactionHash:""});return s}catch(e){return console.error("Error fetching user redemption history:",e),[]}}async function FS(t){try{console.log(`Fetching referral data from API for ${t}...`);const n=await fetch(`https://api.blockcoopsacco.com/api/mpesa/referrals/${t}`);if(!n.ok)throw new Error(`API request failed: ${n.status}`);const r=await n.json();if(r.success)return console.log(`API referral data: ${r.referrals.length} referrals, ${r.stats.completedReferrals} completed`),r;throw new Error(r.error||"API request failed")}catch(e){return console.error("Error fetching referral data from API:",e),null}}async function JB(t){try{console.log(`Fetching referral stats from contract for ${t}...`);const e=un(),n=await e.packageManager.getUserStats(t),s=(await e.packageManager.getUserPurchases(t)).filter(i=>i.referralReward&&i.referralReward>0n).length;return console.log(`Contract stats: totalReferralRewards=${n.totalReferralRewards.toString()}, referralCount=${s}`),{totalReferralRewards:n.totalReferralRewards,referralCount:s}}catch(e){return console.error("Error fetching referral stats from contract:",e),null}}async function ZB(t){try{console.log(`Fetching referral history from contract for ${t}...`);const r=(await un().packageManager.getUserPurchases(t)).filter(s=>s.referralReward&&s.referralReward>0n).map(s=>({referrer:t,buyer:t,reward:s.referralReward,timestamp:Number(s.timestamp),blockNumber:0,transactionHash:""}));return console.log(`Found ${r.length} referral transactions from contract`),r.sort((s,i)=>i.timestamp-s.timestamp),r}catch(e){return console.error("Error fetching referral history from contract:",e),[]}}async function HS(t){try{console.log("Attempting backend API referral data fetch...");const e=await FS(t);if(e&&e.referrals.length>0){console.log("Successfully retrieved referral data from backend API");const a=e.referrals.map(u=>({referrer:u.referrerAddress,buyer:u.buyerAddress,reward:BigInt(Math.floor(u.usdtAmount*1e6)),timestamp:Math.floor(new Date(u.createdAt).getTime()/1e3),blockNumber:0,transactionHash:u.txHash||""})),o=t.toLowerCase(),l={data:a,timestamp:Date.now(),userAddress:t.toLowerCase()};Tb.set(o,l);try{const u=Oo(Sb)||{};u[o]=l,Tg(Sb,u)}catch(u){console.warn("Failed to save API referral data to localStorage:",u)}return a}console.log("No API data found, attempting direct contract-based referral data fetch...");const n=await ZB(t);if(n.length>0)return console.log("Successfully retrieved referral data from contract"),n;console.log("No contract referral data found, checking cache...");const r=t.toLowerCase(),s=Tb.get(r);if(s&&Vv(s))return console.log("Returning in-memory cached referral history for",t),s.data;const i=Oo(Sb);if(i&&i[r]){const a=i[r];if(Vv(a))return console.log("Returning localStorage cached referral history for",t),Tb.set(r,a),a.data}return console.log("No referral data available from any source"),[]}catch(e){console.error("Error fetching user referral history:",e);const n=t.toLowerCase(),r=Tb.get(n);if(r)return console.log("Returning expired cached referral data due to error"),r.data;try{const s=Oo(Sb);if(s&&s[n])return console.log("Returning expired localStorage referral data due to error"),s[n].data}catch(s){console.warn("Failed to load fallback referral data from localStorage:",s)}return[]}}async function XB(t){try{const e=t.toLowerCase(),n=gu.get(e);if(n&&Vv(n))return console.log("Returning in-memory cached referral stats for",t),n.data;const r=Oo(Sa);if(r&&r[e]){const u=r[e];if(Vv(u))return console.log("Returning localStorage cached referral stats for",t),gu.set(e,u),u.data}console.log(`Calculating referral stats for ${t}...`);const s=await FS(t);if(s){console.log("Using backend API stats for referral data");const u=BigInt(Math.floor(s.stats.totalReferralVolume*1e6)),d=s.stats.completedReferrals,h={totalRewards:u,referralCount:d,averageReward:d>0?u/BigInt(d):0n,lastReferralDate:s.stats.lastReferralDate?Math.floor(new Date(s.stats.lastReferralDate).getTime()/1e3):null,topReferralReward:u},f={data:h,timestamp:Date.now(),userAddress:t.toLowerCase()};gu.set(e,f);try{const p=Oo(Sa)||{};p[e]=f,Tg(Sa,p)}catch(p){console.warn("Failed to save referral stats to localStorage:",p)}return h}const i=await JB(t);if(i){console.log("Using direct contract stats for referral data");const u={totalRewards:i.totalReferralRewards,referralCount:i.referralCount,averageReward:i.referralCount>0?i.totalReferralRewards/BigInt(i.referralCount):0n,lastReferralDate:null,topReferralReward:i.totalReferralRewards},d={data:u,timestamp:Date.now(),userAddress:t.toLowerCase()};gu.set(e,d);try{const h=Oo(Sa)||{};h[e]=d,Tg(Sa,h)}catch(h){console.warn("Failed to save referral stats to localStorage:",h)}return u}console.log("Contract stats not available, using cached history data...");const a=await HS(t),o={totalRewards:0n,referralCount:0,averageReward:0n,lastReferralDate:null,topReferralReward:0n};if(a.length===0){const u={data:o,timestamp:Date.now(),userAddress:t.toLowerCase()};gu.set(e,u);try{const d=Oo(Sa)||{};d[e]=u,Tg(Sa,d)}catch(d){console.warn("Failed to save empty referral stats to localStorage:",d)}return o}o.totalRewards=a.reduce((u,d)=>u+d.reward,0n),o.referralCount=a.length,o.averageReward=o.totalRewards/BigInt(o.referralCount),o.lastReferralDate=a[0]?a[0].timestamp:null,o.topReferralReward=a.reduce((u,d)=>d.reward>u?d.reward:u,0n);const l={data:o,timestamp:Date.now(),userAddress:t.toLowerCase()};gu.set(e,l);try{const u=Oo(Sa)||{};u[e]=l,Tg(Sa,u)}catch(u){console.warn("Failed to save referral stats to localStorage:",u)}return o}catch(e){console.error("Error calculating referral stats:",e);const n=t.toLowerCase(),r=gu.get(n);if(r)return console.log("Returning expired cached referral stats due to error"),r.data;try{const s=Oo(Sa);if(s&&s[n])return console.log("Returning expired localStorage referral stats due to error"),s[n].data}catch(s){console.warn("Failed to load fallback referral stats from localStorage:",s)}return{totalRewards:0n,referralCount:0,averageReward:0n,lastReferralDate:null,topReferralReward:0n}}}const _ye=30*60*1e3,Tb=new Map,gu=new Map,Sb="blockcoop_referral_history",Sa="blockcoop_referral_stats";function Vv(t){return t?Date.now()-t.timestamp<_ye:!1}function Tg(t,e){try{const n=JSON.stringify(e,(r,s)=>typeof s=="bigint"?s.toString():s);localStorage.setItem(t,n)}catch(n){console.warn("Failed to save to localStorage:",n)}}function Oo(t){try{const e=localStorage.getItem(t);return e?JSON.parse(e,(n,r)=>{if(typeof r=="string"&&/^\d+$/.test(r)&&r.length>15)try{return BigInt(r)}catch{return r}return r}):null}catch(e){return console.warn("Failed to load from localStorage:",e),null}}function Oe(t,e=18,n=4){if(t==null)return"0.0000";try{return parseFloat(rt(t,e)).toFixed(n)}catch(r){return console.warn("Error formatting token amount:",r,"amount:",t),"0.0000"}}async function e$(t){try{const e=un(),n=iE(),r=await n.getBlockNumber(),s=Math.max(0,r-1e4),i=e.packageManager.filters.LiquidityAdded(t),a=await e.packageManager.queryFilter(i,s,r),o=[];for(const l of a)if(l.args){const u=await n.getBlock(l.blockNumber);o.push({user:l.args[0],packageId:l.args[1],shareTokenAmount:l.args[2],usdtAmount:l.args[3],liquidityTokens:l.args[4],actualShareToken:l.args[5],actualUSDT:l.args[6],blockNumber:l.blockNumber,transactionHash:l.transactionHash,timestamp:(u==null?void 0:u.timestamp)||0})}return o.sort((l,u)=>u.timestamp-l.timestamp)}catch(e){return console.error("Error fetching liquidity added events:",e),[]}}const Iye=Object.freeze(Object.defineProperty({__proto__:null,calculateSplits:LB,calculateSplitsWithTargetPrice:LS,formatTokenAmount:Oe,getContractRedemptionPreview:KB,getContracts:un,getLPTokenBalance:VB,getLiquidityAddedEvents:e$,getLiquidityRemovalPreview:GB,getPackageById:$B,getProvider:iE,getReferralStats:XB,getShareTokenBalance:HB,getSigner:BB,getTokenBalance:aE,getTokenPricesFromPool:YB,getUSDTBalance:FB,getUserPortfolioStats:BS,getUserPurchaseHistory:$S,getUserRedemptionHistory:QB,getUserReferralDataFromAPI:FS,getUserReferralHistory:HS,getUserReferralHistoryFromContract:ZB,getUserReferralStatsFromContract:JB,getVestingInfo:zB,redeemLPTokensWithContractLiquidityRemoval:qB,redeemLPTokensWithLiquidityRemoval:WB},Symbol.toStringTag,{value:"Module"})),t$=v.createContext(null);function Pye({children:t}){if(!em)return console.error(" AppKit not initialized! Cannot use Web3Provider."),c.jsx("div",{className:"flex items-center justify-center min-h-screen",children:c.jsxs("div",{className:"text-center",children:[c.jsx("h2",{className:"text-xl font-bold text-red-600 mb-2",children:"AppKit Initialization Error"}),c.jsx("p",{className:"text-gray-600",children:"AppKit failed to initialize. Please check the console for details."})]})});const{walletProvider:e}=P0e("eip155"),{address:n,isConnected:r}=Ppe(),{chainId:s}=j0e();v.useEffect(()=>{},[r,n,s,e]);const[i,a]=v.useState(!0),[o,l]=v.useState(null),[u,d]=v.useState(null),[h,f]=v.useState({packageManager:null,vestingVault:null,taxManager:null,shareToken:null,lpToken:null,usdtToken:null,router:null,factory:null,dividendDistributor:null,secondaryMarket:null}),[p,g]=v.useState(null),m=r,y=n,b=s?typeof s=="string"?parseInt(s):s:null,w=b?Fv.includes(b):!1,x=v.useCallback(async k=>{var R,O,F,z;try{if(console.log(" Initializing contracts with signer:",!!k),k){const N=un(k);console.log(" Contract instances created with signer:",{packageManager:!!N.packageManager,packageManagerAddress:(R=N.packageManager)==null?void 0:R.address,usdtToken:!!N.usdtToken,usdtTokenAddress:(O=N.usdtToken)==null?void 0:O.address,vestingVault:!!N.vestingVault,taxManager:!!N.taxManager,shareToken:!!N.shareToken,lpToken:!!N.lpToken,router:!!N.router}),f({packageManager:N.packageManager,vestingVault:N.vestingVault,taxManager:N.taxManager,shareToken:N.shareToken,lpToken:N.lpToken,usdtToken:N.usdtToken,router:N.router,factory:N.factory,dividendDistributor:N.dividendDistributor,secondaryMarket:N.secondaryMarket,staking:N.staking})}else{console.log(" Creating read-only contracts");const N=un();console.log(" Read-only contract instances created:",{packageManager:!!N.packageManager,packageManagerAddress:(F=N.packageManager)==null?void 0:F.address,usdtToken:!!N.usdtToken,usdtTokenAddress:(z=N.usdtToken)==null?void 0:z.address}),f({packageManager:N.packageManager,vestingVault:N.vestingVault,taxManager:N.taxManager,shareToken:N.shareToken,lpToken:N.lpToken,usdtToken:N.usdtToken,router:N.router,factory:N.factory,dividendDistributor:N.dividendDistributor,secondaryMarket:N.secondaryMarket,staking:N.staking})}}catch(N){console.error("Failed to initialize contracts:",N),g("Failed to initialize contracts")}},[]),A=v.useCallback(async()=>{try{if(m&&y){console.log(" Attempting Web3 connection:",{isConnected:m,account:y,chainId:b,hasWalletProvider:!!e,walletProviderType:typeof e});let k=null;if(e&&typeof e=="object"&&"request"in e?(k=e,console.log(" Using AppKit walletProvider")):typeof window<"u"&&window.ethereum&&(k=window.ethereum,console.log(" Falling back to window.ethereum")),!k){console.warn(" No valid wallet provider available"),g("No wallet provider available");return}const R=new xd(k),O=await R.getSigner();l(R),d(O),g(null),await x(O),console.log(" Web3 connection established:",{account:y,chainId:b,isCorrectNetwork:Fv.includes(b||0),networkName:b===56?"BSC Mainnet":b===97?"BSC Testnet":"Unknown",hasProvider:!0,hasSigner:!0,usedAppKitProvider:k===e})}else l(null),d(null),await x(null),console.log(" Web3 disconnected - missing requirements:",{isConnected:m,hasAccount:!!y,hasWalletProvider:!!e})}catch(k){console.error("Failed to update ethers state:",k);const R=k instanceof Error?k.message:"Unknown error";g(`Failed to update ethers state: ${R}`)}},[m,y,b,e,x]),T=v.useCallback(async()=>{try{g(null),await F0e()}catch(k){console.error("Failed to connect wallet:",k);const R=(k==null?void 0:k.message)||(k==null?void 0:k.toString())||"Unknown error";R.includes("timeout")||R.includes("timed out")?g("Connection timed out. Please check your internet connection and try again. If using social login, ensure popups are enabled."):R.includes("popup")||R.includes("blocked")?g("Popup blocked. Please disable popup blocker and try again."):R.includes("social login")?g("Social login failed. Please try again or use a different login method."):g("Failed to connect wallet. Please try again.")}},[]),j=v.useCallback(async()=>{try{g(null),await em.disconnect()}catch(k){console.error("Failed to disconnect wallet:",k),g("Failed to disconnect wallet")}},[]),P=v.useCallback(async()=>{try{return g(null),await OB()}catch(k){return console.error("Failed to switch network:",k),g("Failed to switch network"),!1}},[]),S=v.useCallback(async()=>{await A()},[A]);v.useEffect(()=>{let k=!0;return(async()=>{try{a(!0),await A(),k&&a(!1)}catch(O){console.error("Failed to initialize Web3:",O),k&&(g("Failed to initialize Web3"),a(!1))}})(),()=>{k=!1}},[A]),v.useEffect(()=>{A()},[A]);const E={isConnected:m,isInitializing:i,account:y||null,chainId:b,isCorrectNetwork:w,provider:o,signer:u,contracts:h,connectWallet:T,disconnectWallet:j,switchToCorrectNetwork:P,refreshConnection:S,error:p};return c.jsx(t$.Provider,{value:E,children:t})}function Rt(){const t=v.useContext(t$);if(!t)throw new Error("useWeb3 must be used within a Web3Provider");return t}const n$=v.createContext(null);function Rye({children:t}){const{contracts:e,account:n,isConnected:r}=Rt(),s=v.useCallback(async()=>{try{if(!e.packageManager){console.warn("Package manager contract not available");return}console.log(" Refreshing package data..."),window.dispatchEvent(new CustomEvent("refreshPackageData",{detail:{timestamp:Date.now()}})),console.log(" Package data refresh triggered")}catch(d){console.error("Failed to refresh package data:",d)}},[e.packageManager]),i=v.useCallback(async()=>{try{if(!e.vestingVault||!n){console.warn("Vesting vault contract or account not available");return}console.log(" Refreshing vesting data..."),window.dispatchEvent(new CustomEvent("refreshVestingData",{detail:{account:n,timestamp:Date.now()}})),console.log(" Vesting data refresh triggered")}catch(d){console.error("Failed to refresh vesting data:",d)}},[e.vestingVault,n]),a=v.useCallback(async()=>{try{if(!n||!r){console.warn("Account not available for balance refresh");return}console.log(" Refreshing balance data..."),window.dispatchEvent(new CustomEvent("refreshBalances",{detail:{account:n,timestamp:Date.now()}})),console.log(" Balance data refresh triggered")}catch(d){console.error("Failed to refresh balance data:",d)}},[n,r]),o=v.useCallback(async()=>{try{if(!n||!r){console.warn("Account or connection not available for purchase history refresh");return}console.log(" Refreshing purchase history data..."),window.dispatchEvent(new CustomEvent("refreshPurchaseHistory",{detail:{account:n,timestamp:Date.now()}})),console.log(" Purchase history data refresh triggered")}catch(d){console.error("Failed to refresh purchase history data:",d)}},[n,r]),l=v.useCallback(async()=>{console.log(" Refreshing all data..."),await Promise.all([s(),i(),a(),o()]),window.dispatchEvent(new CustomEvent("refreshAll",{detail:{timestamp:Date.now()}})),console.log(" All data refresh completed")},[s,i,a,o]),u={refreshPackageData:s,refreshVestingData:i,refreshBalances:a,refreshPurchaseHistory:o,refreshAll:l};return c.jsx(n$.Provider,{value:u,children:t})}function VS(){const t=v.useContext(n$);if(!t)throw new Error("useRefreshContext must be used within a RefreshProvider");return t}function pc(t,e){Ht.useEffect(()=>{const n=r=>{e(r.detail)};return window.addEventListener(t,n),()=>{window.removeEventListener(t,n)}},[t,e])}/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var jye={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oye=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),Re=(t,e)=>{const n=v.forwardRef(({color:r="currentColor",size:s=24,strokeWidth:i=2,absoluteStrokeWidth:a,className:o="",children:l,...u},d)=>v.createElement("svg",{ref:d,...jye,width:s,height:s,stroke:r,strokeWidth:a?Number(i)*24/Number(s):i,className:["lucide",`lucide-${Oye(t)}`,o].join(" "),...u},[...e.map(([h,f])=>v.createElement(h,f)),...Array.isArray(l)?l:[l]]));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r$=Re("Activity",[["path",{d:"M22 12h-4l-3 9L9 3l-3 9H2",key:"d5dnw9"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qr=Re("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dr=Re("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dye=Re("ArrowLeftRight",[["path",{d:"M8 3 4 7l4 4",key:"9rb6wj"}],["path",{d:"M4 7h16",key:"6tx8e3"}],["path",{d:"m16 21 4-4-4-4",key:"siv7j2"}],["path",{d:"M20 17H4",key:"h6l3hr"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sg=Re("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gf=Re("ArrowUpDown",[["path",{d:"m21 16-4 4-4-4",key:"f6ql7i"}],["path",{d:"M17 20V4",key:"1ejh1v"}],["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lT=Re("Award",[["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}],["path",{d:"M15.477 12.89 17 22l-5-3-5 3 1.523-9.11",key:"em7aur"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uye=Re("Banknote",[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"2",key:"9lu3g6"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}],["path",{d:"M6 12h.01M18 12h.01",key:"113zkx"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mye=Re("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lye=Re("BookOpen",[["path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z",key:"vv98re"}],["path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z",key:"1cyq3y"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bx=Re("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bye=Re("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sr=Re("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vR=Re("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ql=Re("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zS=Re("Coins",[["circle",{cx:"8",cy:"8",r:"6",key:"3yglwk"}],["path",{d:"M18.09 10.37A6 6 0 1 1 10.34 18",key:"t5s6rm"}],["path",{d:"M7 6h1v4",key:"1obek4"}],["path",{d:"m16.71 13.88.7.71-2.82 2.82",key:"1rbuyh"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ad=Re("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ts=Re("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ao=Re("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $ye=Re("Facebook",[["path",{d:"M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z",key:"1jg4f8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s$=Re("Gift",[["rect",{x:"3",y:"8",width:"18",height:"4",rx:"1",key:"bkv52"}],["path",{d:"M12 8v13",key:"1c76mn"}],["path",{d:"M19 12v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-7",key:"6wjy6b"}],["path",{d:"M7.5 8a2.5 2.5 0 0 1 0-5A4.8 8 0 0 1 12 8a4.8 8 0 0 1 4.5-5 2.5 2.5 0 0 1 0 5",key:"1ihvrl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mN=Re("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fye=Re("Handshake",[["path",{d:"m11 17 2 2a1 1 0 1 0 3-3",key:"efffak"}],["path",{d:"m14 14 2.5 2.5a1 1 0 1 0 3-3l-3.88-3.88a3 3 0 0 0-4.24 0l-.88.88a1 1 0 1 1-3-3l2.81-2.81a5.79 5.79 0 0 1 7.06-.87l.47.28a2 2 0 0 0 1.42.25L21 4",key:"9pr0kb"}],["path",{d:"m21 3 1 11h-2",key:"1tisrp"}],["path",{d:"M3 3 2 14l6.5 6.5a1 1 0 1 0 3-3",key:"1uvwmv"}],["path",{d:"M3 4h8",key:"1ep09j"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ni=Re("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hye=Re("Instagram",[["rect",{width:"20",height:"20",x:"2",y:"2",rx:"5",ry:"5",key:"2e1cvw"}],["path",{d:"M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z",key:"9exkf1"}],["line",{x1:"17.5",x2:"17.51",y1:"6.5",y2:"6.5",key:"r4j83e"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vye=Re("Link",[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vn=Re("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tm=Re("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zye=Re("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wye=Re("MessageCircle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ER=Re("Package2",[["path",{d:"M3 9h18v10a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V9Z",key:"1ront0"}],["path",{d:"m3 9 2.45-4.9A2 2 0 0 1 7.24 3h9.52a2 2 0 0 1 1.8 1.1L21 9",key:"19h2x1"}],["path",{d:"M12 3v6",key:"1holv5"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Za=Re("Package",[["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qye=Re("Pause",[["rect",{width:"4",height:"16",x:"6",y:"4",key:"iffhe4"}],["rect",{width:"4",height:"16",x:"14",y:"4",key:"sjin7j"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WS=Re("Percent",[["line",{x1:"19",x2:"5",y1:"5",y2:"19",key:"1x9vlm"}],["circle",{cx:"6.5",cy:"6.5",r:"2.5",key:"4mh3h7"}],["circle",{cx:"17.5",cy:"17.5",r:"2.5",key:"1mdrzq"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kye=Re("PiggyBank",[["path",{d:"M19 5c-1.5 0-2.8 1.4-3 2-3.5-1.5-11-.3-11 5 0 1.8 0 3 2 4.5V20h4v-2h3v2h4v-4c1-.5 1.7-1 2-2h2v-4h-2c0-1-.5-1.5-1-2h0V5z",key:"uf6l00"}],["path",{d:"M2 9v1c0 1.1.9 2 2 2h1",key:"nm575m"}],["path",{d:"M16 11h0",key:"k2aug8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gye=Re("Play",[["polygon",{points:"5 3 19 12 5 21 5 3",key:"191637"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ay=Re("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yye=Re("QrCode",[["rect",{width:"5",height:"5",x:"3",y:"3",rx:"1",key:"1tu5fj"}],["rect",{width:"5",height:"5",x:"16",y:"3",rx:"1",key:"1v8r4q"}],["rect",{width:"5",height:"5",x:"3",y:"16",rx:"1",key:"1x03jg"}],["path",{d:"M21 16h-3a2 2 0 0 0-2 2v3",key:"177gqh"}],["path",{d:"M21 21v.01",key:"ents32"}],["path",{d:"M12 7v3a2 2 0 0 1-2 2H7",key:"8crl2c"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M12 3h.01",key:"n36tog"}],["path",{d:"M12 16v.01",key:"133mhm"}],["path",{d:"M16 12h1",key:"1slzba"}],["path",{d:"M21 12v.01",key:"1lwtk9"}],["path",{d:"M12 21v-1",key:"1880an"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ts=Re("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qye=Re("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mc=Re("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i$=Re("Share2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aa=Re("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nm=Re("Smartphone",[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NR=Re("Sparkles",[["path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z",key:"17u4zn"}],["path",{d:"M5 3v4",key:"bklmnn"}],["path",{d:"M19 17v4",key:"iiml17"}],["path",{d:"M3 5h4",key:"nem4j1"}],["path",{d:"M17 19h4",key:"lbex7p"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a$=Re("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a2.121 2.121 0 1 1 3 3L12 15l-4 1 1-4Z",key:"1lpok0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qS=Re("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jye=Re("Timer",[["line",{x1:"10",x2:"14",y1:"2",y2:"2",key:"14vaq8"}],["line",{x1:"12",x2:"15",y1:"14",y2:"11",key:"17fdiu"}],["circle",{cx:"12",cy:"14",r:"8",key:"1e1u0o"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zye=Re("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ty=Re("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _r=Re("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xye=Re("Twitter",[["path",{d:"M22 4s-.7 2.1-2 3.4c1.6 10-9.4 17.3-18 11.6 2.2.1 4.4-.6 6-2C3 15.5.5 9.6 3 5c2.2 2.6 5.6 4.1 9 4-.9-4.2 4-6.6 7-3.8 1.1 0 3-1.2 3-1.2z",key:"pff0z6"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o$=Re("Unlock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 9.9-1",key:"1mm8w8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ewe=Re("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cr=Re("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qd=Re("Wallet",[["path",{d:"M21 12V7H5a2 2 0 0 1 0-4h14v4",key:"195gfw"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h16v-5",key:"195n9w"}],["path",{d:"M18 12a2 2 0 0 0 0 4h4v-4Z",key:"vllfpd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jd=Re("WifiOff",[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}],["path",{d:"M5 12.859a10 10 0 0 1 5.17-2.69",key:"1dl1wf"}],["path",{d:"M19 12.859a10 10 0 0 0-2.007-1.523",key:"4k23kn"}],["path",{d:"M2 8.82a15 15 0 0 1 4.177-2.643",key:"1grhjp"}],["path",{d:"M22 8.82a15 15 0 0 0-11.288-3.764",key:"z3jwby"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const twe=Re("Wifi",[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M2 8.82a15 15 0 0 1 20 0",key:"dnpr2z"}],["path",{d:"M5 12.859a10 10 0 0 1 14 0",key:"1x1e6c"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nwe=Re("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rm=Re("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fl=Re("Zap",[["polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2",key:"45s27k"}]]);function c$(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var s=t.length;for(e=0;e<s;e++)t[e]&&(n=c$(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function yw(){for(var t,e,n=0,r="",s=arguments.length;n<s;n++)(t=arguments[n])&&(e=c$(t))&&(r&&(r+=" "),r+=e);return r}function Oi(...t){return yw(t)}function rwe(){const t="18";{const e=parseInt(t);if(!isNaN(e)&&e>0)return e}return 18}function Al(t){try{const e=typeof t=="string"?BigInt(t):t,n=rwe(),r=rt(e,n);return parseFloat(r).toLocaleString("en-US",{minimumFractionDigits:0,maximumFractionDigits:2})}catch{return"0"}}function CR(t){try{const e=typeof t=="string"?BigInt(t):t;return(Number(e)/1e18).toLocaleString("en-US",{minimumFractionDigits:1,maximumFractionDigits:2})}catch(e){return console.error("formatExchangeRate error:",e),"0"}}function Nt(t){try{const e=typeof t=="string"?BigInt(t):t,n=rt(e,18);return parseFloat(n).toLocaleString("en-US",{minimumFractionDigits:0,maximumFractionDigits:4})}catch{return"0"}}function uT(t){return t?`${t.slice(0,6)}...${t.slice(-4)}`:""}function dT(t){const e=Math.floor(t/31536e3),n=Math.floor(t%(365*24*3600)/(30*24*3600));return e>0?n>0?`${e}y ${n}m`:`${e}y`:n>0?`${n}m`:"< 1m"}function Sy(t){return`${(t/1e4*100).toFixed(1)}%`}function gN(t){try{return fg(t||"0")}catch{return 0n}}function Je({className:t,variant:e="default",...n}){return c.jsx("span",{className:Oi("inline-flex items-center rounded-full px-2 py-1 text-xs font-medium",{"bg-gray-100 text-gray-800":e==="default","bg-success-100 text-success-800":e==="success","bg-warning-100 text-warning-800":e==="warning","bg-error-100 text-error-800":e==="error","bg-primary-100 text-primary-800":e==="info"},t),...n})}function KS(){const{chainId:t,isConnected:e,isCorrectNetwork:n}=Rt(),[r,s]=v.useState(!1),[i,a]=v.useState(0),o=Cy,l=t,u=v.useCallback(()=>{if(typeof window>"u")return!1;const f=window.ethereum;return!!(f&&f.request)},[]),d=v.useCallback(()=>e?r?{status:"switching",message:"Switching network...",chainId:l||void 0,targetChainId:o}:n?{status:"connected",message:`Connected to ${l===56?"BSC Mainnet":"BSC Testnet"}`,chainId:l||void 0,targetChainId:o}:{status:"wrong-network",message:`Connected to wrong network. Please switch to ${o===56?"BSC Mainnet":"BSC Testnet"} (Chain ID: ${o})`,chainId:l||void 0,targetChainId:o}:{status:"disconnected",message:"Wallet not connected",targetChainId:o},[e,n,r,l,o]),h=v.useCallback(async()=>{const f=Date.now();if(f-i<2e3)return console.log("Network switch attempt too soon, skipping"),!1;if(a(f),!u())return console.warn("Network switching not supported by current wallet"),!1;s(!0);try{const p=o===56?"BSC Mainnet":"BSC Testnet";return console.log(`Attempting to switch to ${p}...`),await OB()?(console.log(` Successfully switched to ${p}`),!0):(console.warn(" Failed to switch network"),!1)}catch(p){return console.error("Error switching network:",p),!1}finally{s(!1)}},[u,i,o]);return v.useEffect(()=>{n&&r&&s(!1)},[n,r]),{isCorrectNetwork:n,isConnected:e,currentChainId:l,targetChainId:o,isLoading:r,switchToBSCTestnet:h,switchToCorrectBSCNetwork:h,getNetworkStatus:d,canSwitch:u(),validateAndSwitchNetwork:h,isValidating:r}}const se=v.forwardRef(({className:t,variant:e="primary",size:n="md",loading:r,children:s,disabled:i,...a},o)=>c.jsxs("button",{className:Oi("inline-flex items-center justify-center rounded-lg font-medium transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-offset-2",{"bg-primary-600 hover:bg-primary-700 text-white focus:ring-primary-500":e==="primary","bg-gray-100 hover:bg-gray-200 text-gray-900 focus:ring-gray-500":e==="secondary","border border-gray-300 bg-white hover:bg-gray-50 text-gray-700 focus:ring-primary-500":e==="outline","hover:bg-gray-100 text-gray-700 focus:ring-gray-500":e==="ghost","bg-error-600 hover:bg-error-700 text-white focus:ring-error-500":e==="danger","bg-white/20 backdrop-blur-sm border-2 border-white text-white hover:bg-white hover:text-blue-600 focus:ring-white/50 font-semibold shadow-lg hover:shadow-xl transition-all duration-300":e==="cta-outline"},{"px-4 py-3 text-sm min-h-[44px]":n==="sm","px-6 py-3 text-sm min-h-[44px]":n==="md","px-8 py-4 text-base min-h-[48px]":n==="lg"},(i||r)&&"opacity-50 cursor-not-allowed",t),disabled:i||r,ref:o,...a,children:[r&&c.jsx(vn,{className:"w-4 h-4 mr-2 animate-spin"}),s]}));se.displayName="Button";function l$({showSwitchButton:t=!0,compact:e=!1,className:n=""}){const{isCorrectNetwork:r,isConnected:s,currentChainId:i,targetChainId:a,isLoading:o,switchToBSCTestnet:l,getNetworkStatus:u,canSwitch:d}=KS(),h=u();if(!s)return e?c.jsxs("div",{className:`flex items-center space-x-2 ${n}`,children:[c.jsx(Jd,{className:"h-4 w-4 text-gray-400"}),c.jsx("span",{className:"text-sm text-gray-500",children:"Not connected"})]}):null;const f=()=>{if(o)return c.jsx(vn,{className:"h-4 w-4 animate-spin"});switch(h.status){case"connected":return c.jsx(sr,{className:"h-4 w-4 text-green-500"});case"wrong-network":return c.jsx(dr,{className:"h-4 w-4 text-red-500"});case"switching":return c.jsx(vn,{className:"h-4 w-4 animate-spin text-yellow-500"});case"disconnected":default:return c.jsx(Jd,{className:"h-4 w-4 text-gray-400"})}},p=()=>{switch(h.status){case"connected":return"success";case"wrong-network":return"error";case"switching":return"warning";case"disconnected":default:return"default"}};return e?c.jsxs("div",{className:`flex items-center space-x-2 ${n}`,children:[f(),c.jsx(Je,{variant:p(),children:r?a===56?"BSC Mainnet":"BSC Testnet":`Chain ${i}`}),!r&&t&&d&&c.jsx(se,{size:"sm",variant:"outline",onClick:l,disabled:o,className:"text-xs",children:"Switch"})]}):c.jsxs("div",{className:`bg-white border rounded-lg p-4 ${n}`,children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{className:"flex items-center space-x-3",children:[f(),c.jsxs("div",{children:[c.jsx("h3",{className:"text-sm font-medium text-gray-900",children:"Network Status"}),c.jsx("p",{className:"text-sm text-gray-600",children:h.message})]})]}),!r&&t&&d&&c.jsx(se,{onClick:l,disabled:o,className:"ml-4",children:o?c.jsxs(c.Fragment,{children:[c.jsx(vn,{className:"h-4 w-4 animate-spin mr-2"}),"Switching..."]}):a===56?"Switch to BSC Mainnet":"Switch to BSC Testnet"})]}),!r&&c.jsx("div",{className:"mt-3 p-3 bg-yellow-50 border border-yellow-200 rounded-md",children:c.jsxs("div",{className:"flex",children:[c.jsx(dr,{className:"h-5 w-5 text-yellow-400 mr-2 flex-shrink-0"}),c.jsxs("div",{className:"text-sm",children:[c.jsx("p",{className:"text-yellow-800 font-medium",children:"Wrong Network Detected"}),c.jsxs("p",{className:"text-yellow-700 mt-1",children:["This DApp requires ",a===56?"BSC Mainnet":"BSC Testnet"," (Chain ID: ",a,").",d?" Please switch your network to continue using the application.":" Please manually switch your wallet to BSC Testnet."]}),!d&&c.jsxs("div",{className:"mt-2 text-xs text-yellow-600",children:[c.jsx("p",{children:c.jsx("strong",{children:"Manual Setup Instructions:"})}),c.jsxs("ul",{className:"list-disc list-inside mt-1 space-y-1",children:[c.jsxs("li",{children:["Network Name: ",a===56?"BSC Mainnet":"BSC Testnet"]}),c.jsxs("li",{children:["RPC URL: ",a===56?"https://bsc-dataseed1.binance.org/":"https://data-seed-prebsc-1-s1.binance.org:8545/"]}),c.jsxs("li",{children:["Chain ID: ",a]}),c.jsxs("li",{children:["Symbol: ",a===56?"BNB":"tBNB"]}),c.jsxs("li",{children:["Block Explorer: ",a===56?"https://bscscan.com":"https://testnet.bscscan.com"]})]})]})]})]})})]})}function AR({className:t=""}){return c.jsx(l$,{compact:!0,showSwitchButton:!1,className:t})}function swe({className:t=""}){const{isConnected:e,isLoading:n,getNetworkStatus:r}=KS(),s=r();if(!e)return c.jsx("div",{className:`flex items-center justify-center min-h-[44px] min-w-[44px] ${t}`,children:c.jsx(Jd,{className:"h-5 w-5 text-gray-400"})});const i=()=>{if(n)return c.jsx(vn,{className:"h-5 w-5 animate-spin text-yellow-500"});switch(s.status){case"connected":return c.jsx(sr,{className:"h-5 w-5 text-green-500"});case"wrong-network":return c.jsx(dr,{className:"h-5 w-5 text-red-500"});case"switching":return c.jsx(vn,{className:"h-5 w-5 animate-spin text-yellow-500"});case"disconnected":default:return c.jsx(Jd,{className:"h-5 w-5 text-gray-400"})}};return c.jsx("div",{className:`flex items-center justify-center min-h-[44px] min-w-[44px] ${t}`,title:s.message,children:i()})}function iwe({children:t,fallback:e}){const{isCorrectNetwork:n,isConnected:r}=KS();return r?n?c.jsx(c.Fragment,{children:t}):e||c.jsx(l$,{}):c.jsxs("div",{className:"text-center py-8",children:[c.jsx(Jd,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),c.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Wallet Not Connected"}),c.jsx("p",{className:"text-gray-600",children:"Please connect your wallet to use this feature."})]})}const awe=["0x842d803eB7d05D6Aa2DdB8c3Eb912e6d97ce31C4","0xfF81cBA6Da71c50cC3123b277e612C95895ABC67","0x0A1956562aB097cC90f3D1b005Ce50F2c90B80d8"];function owe(t){if(!t)return!1;const e=t.toLowerCase();return awe.some(n=>n.toLowerCase()===e)}function u$(t,e){return e&&owe(t)}function TR({className:t="",size:e="md",showFallback:n=!0}){const[r,s]=v.useState(!1),i={sm:"w-8 h-8",md:"w-12 h-12",lg:"w-16 h-16",xl:"w-24 h-24"},a={sm:"h-4 w-4",md:"h-6 w-6",lg:"h-8 w-8",xl:"h-12 w-12"},o=i[e],l=a[e];return r&&n?c.jsx("div",{className:`bg-gradient-to-br from-blue-600 to-purple-600 rounded-lg flex items-center justify-center ${o} ${t}`,children:c.jsx(bx,{className:`${l} text-white`})}):r&&!n?null:c.jsx("img",{src:"/Blockcooplogo.png",alt:"BlockCoop Sacco Logo",className:`${o} object-contain rounded-lg shadow-sm ${t}`,onError:()=>s(!0),onLoad:()=>s(!1)})}function cwe(){const t=Rt(),{isConnected:e,connectWallet:n,account:r,provider:s,signer:i,error:a,isInitializing:o,isCorrectNetwork:l}=t,u=cm(),d=RB(),h=PB(ue.walletConnectProjectId),[f,p]=v.useState(!1),g=v.useRef(null);v.useEffect(()=>{console.log("Header: Web3 state changed:",{isConnected:e,account:r?`${r.slice(0,6)}...${r.slice(-4)}`:null,hasValidProjectId:h,hasProvider:!!s,hasSigner:!!i,error:a,isInitializing:o,timestamp:new Date().toISOString()})},[e,r,h,s,i,a,o]);const m=A=>u.pathname===A,y=u.pathname.startsWith("/admin"),b=u$(r,e);v.useEffect(()=>{const A=j=>{g.current&&!g.current.contains(j.target)&&p(!1)},T=j=>{j.key==="Escape"&&f&&p(!1)};return f?(document.addEventListener("mousedown",A),document.addEventListener("keydown",T),document.body.style.overflow="hidden"):document.body.style.overflow="unset",()=>{document.removeEventListener("mousedown",A),document.removeEventListener("keydown",T),document.body.style.overflow="unset"}},[f]),v.useEffect(()=>{p(!1)},[u.pathname]);const w=()=>{p(!f)},x=()=>{p(!1)};return c.jsxs("header",{className:"bg-white border-b border-gray-200 sticky top-0 z-50",children:[c.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:c.jsxs("div",{className:"flex items-center justify-between h-16",children:[c.jsxs(Lr,{to:"/",className:"flex items-center space-x-2",children:[c.jsx(TR,{size:"md",showFallback:!0}),c.jsx("span",{className:"text-xl font-bold text-gray-900 hidden sm:block",children:"BlockCoop Sacco"}),c.jsx("span",{className:"text-lg font-bold text-gray-900 sm:hidden",children:"BlockCoop"})]}),c.jsxs("nav",{className:"hidden md:flex items-center space-x-8",children:[c.jsx(Lr,{to:"/",className:`text-sm font-medium transition-colors ${m("/")?"text-primary-600":"text-gray-600 hover:text-gray-900"}`,children:"Packages"}),c.jsx(Lr,{to:"/portfolio",className:`text-sm font-medium transition-colors ${m("/portfolio")?"text-primary-600":"text-gray-600 hover:text-gray-900"}`,children:"Portfolio"}),c.jsx(Lr,{to:"/referral",className:`text-sm font-medium transition-colors ${m("/referral")?"text-primary-600":"text-gray-600 hover:text-gray-900"}`,children:"Referrals"}),c.jsx(Lr,{to:"/trading",className:`text-sm font-medium transition-colors ${m("/trading")?"text-primary-600":"text-gray-600 hover:text-gray-900"}`,children:"Trading"}),c.jsx(Lr,{to:"/redeem",className:`text-sm font-medium transition-colors ${m("/redeem")?"text-primary-600":"text-gray-600 hover:text-gray-900"}`,children:"Redeem"}),b&&c.jsxs(Lr,{to:"/admin",className:`flex items-center space-x-1 text-sm font-medium transition-colors ${y?"text-primary-600":"text-gray-600 hover:text-gray-900"}`,children:[c.jsx(mc,{className:"h-4 w-4"}),c.jsx("span",{children:"Admin"})]})]}),c.jsxs("div",{className:"md:hidden flex items-center space-x-2",children:[h?c.jsx("button",{onClick:()=>n(),className:`px-3 py-2 rounded-lg text-xs font-medium transition-colors min-h-[44px] ${e?l?"bg-green-600 hover:bg-green-700 text-white":"bg-yellow-600 hover:bg-yellow-700 text-white":"bg-blue-600 hover:bg-blue-700 text-white"}`,children:e?l?"Connected":"Wrong Network":"Connect"}):null,e&&c.jsx(swe,{}),c.jsx("button",{onClick:w,className:"p-2 rounded-lg hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 min-h-[44px] min-w-[44px] flex items-center justify-center","aria-label":f?"Close mobile menu":"Open mobile menu","aria-expanded":f,children:f?c.jsx(rm,{className:"h-6 w-6 text-gray-600"}):c.jsx(zye,{className:"h-6 w-6 text-gray-600"})})]}),c.jsxs("div",{className:"hidden md:flex items-center space-x-4",children:[d.length>0&&c.jsxs("div",{className:"flex items-center space-x-2",children:[c.jsx(dr,{className:"h-4 w-4 text-warning-500"}),c.jsx(Je,{variant:"warning",className:"text-xs",children:"Config Issues"})]}),c.jsxs("div",{className:"flex items-center space-x-4",children:[c.jsx(AR,{}),h?c.jsx("button",{onClick:()=>n(),className:`px-4 py-3 rounded-lg text-sm font-medium transition-colors min-h-[44px] ${e?"bg-green-600 hover:bg-green-700 text-white":"bg-blue-600 hover:bg-blue-700 text-white"}`,children:e?c.jsxs(c.Fragment,{children:[c.jsxs("span",{className:"hidden lg:inline",children:["Connected",r?` (${r.slice(0,6)}...${r.slice(-4)})`:""]}),c.jsx("span",{className:"lg:hidden",children:"Connected"})]}):"Connect Wallet"}):c.jsx("div",{className:"px-4 py-3 bg-gray-100 text-gray-500 rounded-lg text-sm min-h-[44px] flex items-center",children:"Wallet Unavailable"})]})]})]})}),f&&c.jsxs("div",{ref:g,className:"md:hidden fixed inset-0 z-50 bg-white",role:"dialog","aria-modal":"true","aria-label":"Mobile navigation menu",children:[c.jsxs("div",{className:"flex items-center justify-between h-16 px-4 border-b border-gray-200",children:[c.jsxs(Lr,{to:"/",className:"flex items-center space-x-2",onClick:x,children:[c.jsx(TR,{size:"md",showFallback:!0}),c.jsx("span",{className:"text-lg font-bold text-gray-900",children:"BlockCoop"})]}),c.jsx("button",{onClick:w,className:"p-2 rounded-lg hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 min-h-[44px] min-w-[44px] flex items-center justify-center","aria-label":"Close mobile menu",children:c.jsx(rm,{className:"h-6 w-6 text-gray-600"})})]}),c.jsxs("div",{className:"px-4 py-6 space-y-6",children:[c.jsxs("nav",{className:"space-y-4",children:[c.jsx(Lr,{to:"/",onClick:x,className:`px-4 py-3 rounded-lg text-base font-medium transition-colors min-h-[44px] flex items-center ${m("/")?"bg-primary-100 text-primary-600":"text-gray-600 hover:bg-gray-100 hover:text-gray-900"}`,children:"Packages"}),c.jsx(Lr,{to:"/portfolio",onClick:x,className:`px-4 py-3 rounded-lg text-base font-medium transition-colors min-h-[44px] flex items-center ${m("/portfolio")?"bg-primary-100 text-primary-600":"text-gray-600 hover:bg-gray-100 hover:text-gray-900"}`,children:"Portfolio"}),c.jsx(Lr,{to:"/referral",onClick:x,className:`px-4 py-3 rounded-lg text-base font-medium transition-colors min-h-[44px] flex items-center ${m("/referral")?"bg-primary-100 text-primary-600":"text-gray-600 hover:bg-gray-100 hover:text-gray-900"}`,children:"Referrals"}),c.jsx(Lr,{to:"/trading",onClick:x,className:`px-4 py-3 rounded-lg text-base font-medium transition-colors min-h-[44px] flex items-center ${m("/trading")?"bg-primary-100 text-primary-600":"text-gray-600 hover:bg-gray-100 hover:text-gray-900"}`,children:"Trading"}),c.jsx(Lr,{to:"/redeem",onClick:x,className:`px-4 py-3 rounded-lg text-base font-medium transition-colors min-h-[44px] flex items-center ${m("/redeem")?"bg-primary-100 text-primary-600":"text-gray-600 hover:bg-gray-100 hover:text-gray-900"}`,children:"Redeem"}),b&&c.jsxs(Lr,{to:"/admin",onClick:x,className:`flex items-center space-x-2 px-4 py-3 rounded-lg text-base font-medium transition-colors min-h-[44px] ${y?"bg-primary-100 text-primary-600":"text-gray-600 hover:bg-gray-100 hover:text-gray-900"}`,children:[c.jsx(mc,{className:"h-5 w-5"}),c.jsx("span",{children:"Admin"})]})]}),c.jsx("div",{className:"border-t border-gray-200 pt-6",children:c.jsxs("div",{className:"space-y-4",children:[c.jsx("div",{className:"px-4",children:c.jsx(AR,{})}),d.length>0&&c.jsx("div",{className:"px-4",children:c.jsxs("div",{className:"flex items-center space-x-2 p-3 bg-warning-50 rounded-lg",children:[c.jsx(dr,{className:"h-4 w-4 text-warning-500"}),c.jsx(Je,{variant:"warning",className:"text-xs",children:"Config Issues"})]})}),h?c.jsx("div",{className:"px-4",children:c.jsx("button",{onClick:()=>{n(),x()},className:`w-full px-4 py-3 rounded-lg text-base font-medium transition-colors min-h-[44px] ${e?l?"bg-green-600 hover:bg-green-700 text-white":"bg-yellow-600 hover:bg-yellow-700 text-white":"bg-blue-600 hover:bg-blue-700 text-white"}`,children:e?c.jsxs("div",{className:"text-center",children:[c.jsx("div",{children:l?"Connected":"Wrong Network"}),r&&c.jsxs("div",{className:"text-sm opacity-90",children:[r.slice(0,6),"...",r.slice(-4)]})]}):"Connect Wallet"})}):c.jsx("div",{className:"px-4",children:c.jsx("div",{className:"w-full px-4 py-3 bg-gray-100 text-gray-500 rounded-lg text-base text-center min-h-[44px] flex items-center justify-center",children:"Wallet Unavailable"})})]})})]})]}),d.length>0&&c.jsx("div",{className:"bg-warning-50 border-b border-warning-200 px-4 py-2",children:c.jsx("div",{className:"max-w-7xl mx-auto",children:c.jsxs("div",{className:"flex items-center space-x-2",children:[c.jsx(dr,{className:"h-4 w-4 text-warning-600"}),c.jsx("span",{className:"text-sm text-warning-800",children:"Configuration issues detected. Some features may not work properly."}),c.jsx("button",{className:"text-xs text-warning-600 underline ml-2",onClick:()=>{console.log("Configuration Errors:",d),alert("Check the browser console for detailed configuration errors.")},children:"View Details"})]})})})]})}let lwe={data:""},uwe=t=>typeof window=="object"?((t?t.querySelector("#_goober"):window._goober)||Object.assign((t||document.head).appendChild(document.createElement("style")),{innerHTML:" ",id:"_goober"})).firstChild:t||lwe,dwe=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,hwe=/\/\*[^]*?\*\/|  +/g,SR=/\n+/g,tl=(t,e)=>{let n="",r="",s="";for(let i in t){let a=t[i];i[0]=="@"?i[1]=="i"?n=i+" "+a+";":r+=i[1]=="f"?tl(a,i):i+"{"+tl(a,i[1]=="k"?"":e)+"}":typeof a=="object"?r+=tl(a,e?e.replace(/([^,])+/g,o=>i.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,l=>/&/.test(l)?l.replace(/&/g,o):o?o+" "+l:l)):i):a!=null&&(i=/^--/.test(i)?i:i.replace(/[A-Z]/g,"-$&").toLowerCase(),s+=tl.p?tl.p(i,a):i+":"+a+";")}return n+(e&&s?e+"{"+s+"}":s)+r},Co={},d$=t=>{if(typeof t=="object"){let e="";for(let n in t)e+=n+d$(t[n]);return e}return t},fwe=(t,e,n,r,s)=>{let i=d$(t),a=Co[i]||(Co[i]=(l=>{let u=0,d=11;for(;u<l.length;)d=101*d+l.charCodeAt(u++)>>>0;return"go"+d})(i));if(!Co[a]){let l=i!==t?t:(u=>{let d,h,f=[{}];for(;d=dwe.exec(u.replace(hwe,""));)d[4]?f.shift():d[3]?(h=d[3].replace(SR," ").trim(),f.unshift(f[0][h]=f[0][h]||{})):f[0][d[1]]=d[2].replace(SR," ").trim();return f[0]})(t);Co[a]=tl(s?{["@keyframes "+a]:l}:l,n?"":"."+a)}let o=n&&Co.g?Co.g:null;return n&&(Co.g=Co[a]),((l,u,d,h)=>{h?u.data=u.data.replace(h,l):u.data.indexOf(l)===-1&&(u.data=d?l+u.data:u.data+l)})(Co[a],e,r,o),a},pwe=(t,e,n)=>t.reduce((r,s,i)=>{let a=e[i];if(a&&a.call){let o=a(n),l=o&&o.props&&o.props.className||/^go/.test(o)&&o;a=l?"."+l:o&&typeof o=="object"?o.props?"":tl(o,""):o===!1?"":o}return r+s+(a??"")},"");function oE(t){let e=this||{},n=t.call?t(e.p):t;return fwe(n.unshift?n.raw?pwe(n,[].slice.call(arguments,1),e.p):n.reduce((r,s)=>Object.assign(r,s&&s.call?s(e.p):s),{}):n,uwe(e.target),e.g,e.o,e.k)}let h$,hT,fT;oE.bind({g:1});let gc=oE.bind({k:1});function mwe(t,e,n,r){tl.p=e,h$=t,hT=n,fT=r}function iu(t,e){let n=this||{};return function(){let r=arguments;function s(i,a){let o=Object.assign({},i),l=o.className||s.className;n.p=Object.assign({theme:hT&&hT()},o),n.o=/ *go\d+/.test(l),o.className=oE.apply(n,r)+(l?" "+l:"");let u=t;return t[0]&&(u=o.as||t,delete o.as),fT&&u[0]&&fT(o),h$(u,o)}return s}}var gwe=t=>typeof t=="function",zv=(t,e)=>gwe(t)?t(e):t,ywe=(()=>{let t=0;return()=>(++t).toString()})(),f$=(()=>{let t;return()=>{if(t===void 0&&typeof window<"u"){let e=matchMedia("(prefers-reduced-motion: reduce)");t=!e||e.matches}return t}})(),wwe=20,p$=(t,e)=>{switch(e.type){case 0:return{...t,toasts:[e.toast,...t.toasts].slice(0,wwe)};case 1:return{...t,toasts:t.toasts.map(i=>i.id===e.toast.id?{...i,...e.toast}:i)};case 2:let{toast:n}=e;return p$(t,{type:t.toasts.find(i=>i.id===n.id)?1:0,toast:n});case 3:let{toastId:r}=e;return{...t,toasts:t.toasts.map(i=>i.id===r||r===void 0?{...i,dismissed:!0,visible:!1}:i)};case 4:return e.toastId===void 0?{...t,toasts:[]}:{...t,toasts:t.toasts.filter(i=>i.id!==e.toastId)};case 5:return{...t,pausedAt:e.time};case 6:let s=e.time-(t.pausedAt||0);return{...t,pausedAt:void 0,toasts:t.toasts.map(i=>({...i,pauseDuration:i.pauseDuration+s}))}}},xx=[],Ku={toasts:[],pausedAt:void 0},mh=t=>{Ku=p$(Ku,t),xx.forEach(e=>{e(Ku)})},bwe={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3},xwe=(t={})=>{let[e,n]=v.useState(Ku),r=v.useRef(Ku);v.useEffect(()=>(r.current!==Ku&&n(Ku),xx.push(n),()=>{let i=xx.indexOf(n);i>-1&&xx.splice(i,1)}),[]);let s=e.toasts.map(i=>{var a,o,l;return{...t,...t[i.type],...i,removeDelay:i.removeDelay||((a=t[i.type])==null?void 0:a.removeDelay)||(t==null?void 0:t.removeDelay),duration:i.duration||((o=t[i.type])==null?void 0:o.duration)||(t==null?void 0:t.duration)||bwe[i.type],style:{...t.style,...(l=t[i.type])==null?void 0:l.style,...i.style}}});return{...e,toasts:s}},vwe=(t,e="blank",n)=>({createdAt:Date.now(),visible:!0,dismissed:!1,type:e,ariaProps:{role:"status","aria-live":"polite"},message:t,pauseDuration:0,...n,id:(n==null?void 0:n.id)||ywe()}),ww=t=>(e,n)=>{let r=vwe(e,t,n);return mh({type:2,toast:r}),r.id},At=(t,e)=>ww("blank")(t,e);At.error=ww("error");At.success=ww("success");At.loading=ww("loading");At.custom=ww("custom");At.dismiss=t=>{mh({type:3,toastId:t})};At.remove=t=>mh({type:4,toastId:t});At.promise=(t,e,n)=>{let r=At.loading(e.loading,{...n,...n==null?void 0:n.loading});return typeof t=="function"&&(t=t()),t.then(s=>{let i=e.success?zv(e.success,s):void 0;return i?At.success(i,{id:r,...n,...n==null?void 0:n.success}):At.dismiss(r),s}).catch(s=>{let i=e.error?zv(e.error,s):void 0;i?At.error(i,{id:r,...n,...n==null?void 0:n.error}):At.dismiss(r)}),t};var Ewe=(t,e)=>{mh({type:1,toast:{id:t,height:e}})},Nwe=()=>{mh({type:5,time:Date.now()})},s0=new Map,Cwe=1e3,Awe=(t,e=Cwe)=>{if(s0.has(t))return;let n=setTimeout(()=>{s0.delete(t),mh({type:4,toastId:t})},e);s0.set(t,n)},Twe=t=>{let{toasts:e,pausedAt:n}=xwe(t);v.useEffect(()=>{if(n)return;let i=Date.now(),a=e.map(o=>{if(o.duration===1/0)return;let l=(o.duration||0)+o.pauseDuration-(i-o.createdAt);if(l<0){o.visible&&At.dismiss(o.id);return}return setTimeout(()=>At.dismiss(o.id),l)});return()=>{a.forEach(o=>o&&clearTimeout(o))}},[e,n]);let r=v.useCallback(()=>{n&&mh({type:6,time:Date.now()})},[n]),s=v.useCallback((i,a)=>{let{reverseOrder:o=!1,gutter:l=8,defaultPosition:u}=a||{},d=e.filter(p=>(p.position||u)===(i.position||u)&&p.height),h=d.findIndex(p=>p.id===i.id),f=d.filter((p,g)=>g<h&&p.visible).length;return d.filter(p=>p.visible).slice(...o?[f+1]:[0,f]).reduce((p,g)=>p+(g.height||0)+l,0)},[e]);return v.useEffect(()=>{e.forEach(i=>{if(i.dismissed)Awe(i.id,i.removeDelay);else{let a=s0.get(i.id);a&&(clearTimeout(a),s0.delete(i.id))}})},[e]),{toasts:e,handlers:{updateHeight:Ewe,startPause:Nwe,endPause:r,calculateOffset:s}}},Swe=gc`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
 transform: scale(1) rotate(45deg);
  opacity: 1;
}`,kwe=gc`
from {
  transform: scale(0);
  opacity: 0;
}
to {
  transform: scale(1);
  opacity: 1;
}`,_we=gc`
from {
  transform: scale(0) rotate(90deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(90deg);
	opacity: 1;
}`,Iwe=iu("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${t=>t.primary||"#ff4b4b"};
  position: relative;
  transform: rotate(45deg);

  animation: ${Swe} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;

  &:after,
  &:before {
    content: '';
    animation: ${kwe} 0.15s ease-out forwards;
    animation-delay: 150ms;
    position: absolute;
    border-radius: 3px;
    opacity: 0;
    background: ${t=>t.secondary||"#fff"};
    bottom: 9px;
    left: 4px;
    height: 2px;
    width: 12px;
  }

  &:before {
    animation: ${_we} 0.15s ease-out forwards;
    animation-delay: 180ms;
    transform: rotate(90deg);
  }
`,Pwe=gc`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,Rwe=iu("div")`
  width: 12px;
  height: 12px;
  box-sizing: border-box;
  border: 2px solid;
  border-radius: 100%;
  border-color: ${t=>t.secondary||"#e0e0e0"};
  border-right-color: ${t=>t.primary||"#616161"};
  animation: ${Pwe} 1s linear infinite;
`,jwe=gc`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(45deg);
	opacity: 1;
}`,Owe=gc`
0% {
	height: 0;
	width: 0;
	opacity: 0;
}
40% {
  height: 0;
	width: 6px;
	opacity: 1;
}
100% {
  opacity: 1;
  height: 10px;
}`,Dwe=iu("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${t=>t.primary||"#61d345"};
  position: relative;
  transform: rotate(45deg);

  animation: ${jwe} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;
  &:after {
    content: '';
    box-sizing: border-box;
    animation: ${Owe} 0.2s ease-out forwards;
    opacity: 0;
    animation-delay: 200ms;
    position: absolute;
    border-right: 2px solid;
    border-bottom: 2px solid;
    border-color: ${t=>t.secondary||"#fff"};
    bottom: 6px;
    left: 6px;
    height: 10px;
    width: 6px;
  }
`,Uwe=iu("div")`
  position: absolute;
`,Mwe=iu("div")`
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  min-width: 20px;
  min-height: 20px;
`,Lwe=gc`
from {
  transform: scale(0.6);
  opacity: 0.4;
}
to {
  transform: scale(1);
  opacity: 1;
}`,Bwe=iu("div")`
  position: relative;
  transform: scale(0.6);
  opacity: 0.4;
  min-width: 20px;
  animation: ${Lwe} 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
`,$we=({toast:t})=>{let{icon:e,type:n,iconTheme:r}=t;return e!==void 0?typeof e=="string"?v.createElement(Bwe,null,e):e:n==="blank"?null:v.createElement(Mwe,null,v.createElement(Rwe,{...r}),n!=="loading"&&v.createElement(Uwe,null,n==="error"?v.createElement(Iwe,{...r}):v.createElement(Dwe,{...r})))},Fwe=t=>`
0% {transform: translate3d(0,${t*-200}%,0) scale(.6); opacity:.5;}
100% {transform: translate3d(0,0,0) scale(1); opacity:1;}
`,Hwe=t=>`
0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}
100% {transform: translate3d(0,${t*-150}%,-1px) scale(.6); opacity:0;}
`,Vwe="0%{opacity:0;} 100%{opacity:1;}",zwe="0%{opacity:1;} 100%{opacity:0;}",Wwe=iu("div")`
  display: flex;
  align-items: center;
  background: #fff;
  color: #363636;
  line-height: 1.3;
  will-change: transform;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);
  max-width: 350px;
  pointer-events: auto;
  padding: 8px 10px;
  border-radius: 8px;
`,qwe=iu("div")`
  display: flex;
  justify-content: center;
  margin: 4px 10px;
  color: inherit;
  flex: 1 1 auto;
  white-space: pre-line;
`,Kwe=(t,e)=>{let n=t.includes("top")?1:-1,[r,s]=f$()?[Vwe,zwe]:[Fwe(n),Hwe(n)];return{animation:e?`${gc(r)} 0.35s cubic-bezier(.21,1.02,.73,1) forwards`:`${gc(s)} 0.4s forwards cubic-bezier(.06,.71,.55,1)`}},Gwe=v.memo(({toast:t,position:e,style:n,children:r})=>{let s=t.height?Kwe(t.position||e||"top-center",t.visible):{opacity:0},i=v.createElement($we,{toast:t}),a=v.createElement(qwe,{...t.ariaProps},zv(t.message,t));return v.createElement(Wwe,{className:t.className,style:{...s,...n,...t.style}},typeof r=="function"?r({icon:i,message:a}):v.createElement(v.Fragment,null,i,a))});mwe(v.createElement);var Ywe=({id:t,className:e,style:n,onHeightUpdate:r,children:s})=>{let i=v.useCallback(a=>{if(a){let o=()=>{let l=a.getBoundingClientRect().height;r(t,l)};o(),new MutationObserver(o).observe(a,{subtree:!0,childList:!0,characterData:!0})}},[t,r]);return v.createElement("div",{ref:i,className:e,style:n},s)},Qwe=(t,e)=>{let n=t.includes("top"),r=n?{top:0}:{bottom:0},s=t.includes("center")?{justifyContent:"center"}:t.includes("right")?{justifyContent:"flex-end"}:{};return{left:0,right:0,display:"flex",position:"absolute",transition:f$()?void 0:"all 230ms cubic-bezier(.21,1.02,.73,1)",transform:`translateY(${e*(n?1:-1)}px)`,...r,...s}},Jwe=oE`
  z-index: 9999;
  > * {
    pointer-events: auto;
  }
`,kb=16,Zwe=({reverseOrder:t,position:e="top-center",toastOptions:n,gutter:r,children:s,containerStyle:i,containerClassName:a})=>{let{toasts:o,handlers:l}=Twe(n);return v.createElement("div",{id:"_rht_toaster",style:{position:"fixed",zIndex:9999,top:kb,left:kb,right:kb,bottom:kb,pointerEvents:"none",...i},className:a,onMouseEnter:l.startPause,onMouseLeave:l.endPause},o.map(u=>{let d=u.position||e,h=l.calculateOffset(u,{reverseOrder:t,gutter:r,defaultPosition:e}),f=Qwe(d,h);return v.createElement(Ywe,{id:u.id,key:u.id,onHeightUpdate:l.updateHeight,className:u.visible?Jwe:"",style:f},u.type==="custom"?zv(u.message,u):s?s(u):v.createElement(Gwe,{toast:u,position:d}))}))},X=At;function Xwe({children:t}){const{account:e,isConnected:n,contracts:r}=Rt(),{refreshPackageData:s,refreshVestingData:i,refreshBalances:a}=VS(),o=v.useRef(null),l=v.useCallback(async u=>{o.current&&clearTimeout(o.current),o.current=setTimeout(async()=>{try{console.log(`Refreshing data after ${u} event...`),u==="purchase"?await Promise.all([s(),a(),i()]):u==="redeem"&&await Promise.all([a(),i()]),console.log(`Data refresh completed after ${u}`)}catch(d){console.error(`Error refreshing data after ${u}:`,d)}},1e3)},[s,i,a]);return v.useEffect(()=>{if(!n||!e)return;console.log("Setting up blockchain event listeners...");const u=(d,h,...f)=>{var p;try{console.log("Purchased event:",{buyer:d,packageId:(p=h==null?void 0:h.toString)==null?void 0:p.call(h),restCount:f==null?void 0:f.length}),d&&e&&d.toLowerCase()===e.toLowerCase()&&l("purchase")}catch(g){console.warn("Purchased event handler error:",g)}};if(r.packageManager)try{r.packageManager.on("Purchased",u),console.log("Successfully subscribed to Purchased events")}catch(d){console.warn("Failed to subscribe to Purchased events:",d)}return()=>{if(console.log("Cleaning up blockchain event listeners..."),r.packageManager)try{r.packageManager.removeListener("Purchased",u),console.log("Successfully cleaned up Purchased event listener")}catch(d){console.warn("Error cleaning up Purchased event listener:",d)}o.current&&clearTimeout(o.current)}},[n,e,r.packageManager,l]),c.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 via-blue-50 to-indigo-100",children:[c.jsx(cwe,{}),c.jsx("main",{className:"container mx-auto px-4 py-8",children:t}),c.jsx(Zwe,{position:"top-center",toastOptions:{duration:4e3,style:{background:"#363636",color:"#fff",fontSize:"14px",padding:"12px 16px",borderRadius:"8px",maxWidth:"90vw",wordBreak:"break-word"},className:"top-16 sm:top-4"},containerStyle:{top:"4rem"}})]})}function ne({className:t,...e}){return c.jsx("div",{className:Oi("bg-white/70 backdrop-blur-sm border border-gray-200/50 rounded-xl shadow-lg hover:shadow-xl transition-all duration-300",t),...e})}function Ze({className:t,...e}){return c.jsx("div",{className:Oi("p-6 pb-0",t),...e})}function re({className:t,...e}){return c.jsx("div",{className:Oi("p-6",t),...e})}function ebe({className:t,...e}){return c.jsx("div",{className:Oi("p-6 pt-0",t),...e})}function _b({children:t}){const e=cm(),n=[{name:"Packages",href:"/admin",icon:Za},{name:"Tax Buckets",href:"/admin/taxes",icon:WS},{name:"Secondary Market",href:"/admin/market",icon:_r}],r=s=>s==="/admin"?e.pathname==="/admin"||e.pathname==="/admin/packages":e.pathname===s;return c.jsxs("div",{className:"space-y-8",children:[c.jsxs("div",{className:"text-center space-y-4",children:[c.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[c.jsx(mc,{className:"h-8 w-8 text-primary-600"}),c.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Admin Dashboard"})]}),c.jsx("p",{className:"text-lg text-gray-600",children:"Manage packages, tax settings, and secondary market configuration"})]}),c.jsxs("div",{className:"flex flex-col lg:flex-row gap-8",children:[c.jsx("div",{className:"lg:w-64",children:c.jsx(ne,{children:c.jsx(re,{className:"p-4",children:c.jsx("nav",{className:"space-y-2",children:n.map(s=>{const i=s.icon;return c.jsxs(Lr,{to:s.href,className:Oi("flex items-center space-x-3 px-3 py-2 rounded-lg text-sm font-medium transition-colors",r(s.href)?"bg-primary-100 text-primary-700":"text-gray-600 hover:bg-gray-100 hover:text-gray-900"),children:[c.jsx(i,{className:"h-5 w-5"}),c.jsx("span",{children:s.name})]},s.name)})})})})}),c.jsx("div",{className:"flex-1",children:t})]})]})}class tbe extends v.Component{constructor(){super(...arguments);W(this,"state",{hasError:!1});W(this,"handleRetry",()=>{this.setState({hasError:!1,error:void 0,errorInfo:void 0})})}static getDerivedStateFromError(n){return{hasError:!0,error:n}}componentDidCatch(n,r){console.error("ErrorBoundary caught an error:",n,r),this.setState({error:n,errorInfo:r}),this.props.onError&&this.props.onError(n,r)}render(){return this.state.hasError?this.props.fallback?this.props.fallback:c.jsxs(ne,{className:"max-w-2xl mx-auto mt-8 border-red-200 bg-red-50",children:[c.jsxs(Ze,{className:"text-center",children:[c.jsx("div",{className:"flex items-center justify-center mb-4",children:c.jsx(dr,{className:"h-12 w-12 text-red-500"})}),c.jsx("h2",{className:"text-xl font-bold text-red-900",children:"Something went wrong"}),c.jsx("p",{className:"text-red-700 mt-2",children:"An error occurred while loading this component. This might be due to a contract configuration issue."})]}),c.jsxs(re,{className:"space-y-4",children:[this.state.error&&c.jsxs("div",{className:"bg-red-100 border border-red-300 rounded-lg p-4",children:[c.jsx("h3",{className:"font-semibold text-red-900 mb-2",children:"Error Details:"}),c.jsx("p",{className:"text-sm text-red-800 font-mono break-all",children:this.state.error.message}),this.state.error.message.includes("exchangeRate")&&c.jsxs("div",{className:"mt-3 p-3 bg-yellow-100 border border-yellow-300 rounded",children:[c.jsxs("p",{className:"text-sm text-yellow-800",children:[c.jsx("strong",{children:"Possible Solution:"})," This error suggests a contract ABI mismatch. The contract may not have the expected 'exchangeRate' field. Please verify:"]}),c.jsxs("ul",{className:"text-sm text-yellow-800 mt-2 list-disc list-inside",children:[c.jsx("li",{children:"Contract is deployed with dual pricing system"}),c.jsx("li",{children:"Frontend ABI matches deployed contract"}),c.jsx("li",{children:"Environment variables point to correct contract addresses"})]})]})]}),c.jsxs("div",{className:"flex justify-center space-x-4",children:[c.jsxs(se,{onClick:this.handleRetry,className:"flex items-center space-x-2",children:[c.jsx(ts,{className:"h-4 w-4"}),c.jsx("span",{children:"Try Again"})]}),c.jsx(se,{variant:"outline",onClick:()=>window.location.reload(),children:"Reload Page"})]})]})]}):this.props.children}}function nbe({package:t,onPurchase:e}){const[n,r]=v.useState({totalTokens:0n,vestTokens:0n,poolTokens:0n,usdtPool:0n,usdtVault:0n}),[s,i]=v.useState(!0);v.useEffect(()=>{t&&console.log(" [DEBUG] Raw Package Data:",{id:t.id,name:t.name,entryUSDT:Al(t.entryUSDT),exchangeRate:CR(t.exchangeRate),vestBps:t.vestBps,cliff:t.cliff,duration:t.duration,referralBps:t.referralBps,active:t.active,exists:t.exists})},[t]),v.useEffect(()=>{(async()=>{try{i(!0);const u=await LS(t);r(u)}catch(u){console.error("Error calculating splits for package:",t.name,u)}finally{i(!1)}})()},[t]);const a=100-t.vestBps/1e4*100,o=t.vestBps/1e4*100;return c.jsxs(ne,{className:"group hover:scale-[1.02] transition-all duration-300 animate-fade-in",children:[c.jsxs(re,{className:"p-6",children:[c.jsxs("div",{className:"flex items-start justify-between mb-4",children:[c.jsxs("div",{children:[c.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-1",children:t.name}),c.jsxs("div",{className:"flex items-center text-2xl font-bold text-primary-600",children:[c.jsx("span",{className:"text-sm text-gray-500 mr-1",children:"$"}),Al(t.entryUSDT),c.jsx("span",{className:"text-sm text-gray-500 ml-1",children:"USDT"})]})]}),c.jsxs(Je,{variant:"info",children:[c.jsx(_r,{className:"w-3 h-3 mr-1"}),t.active?"Active":"Inactive"]})]}),c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[c.jsxs("h4",{className:"font-semibold text-gray-900 mb-3 flex items-center",children:[c.jsx(WS,{className:"w-4 h-4 mr-2"}),"Token Distribution"]}),c.jsxs("div",{className:"space-y-3",children:[c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsx("span",{className:"text-sm text-gray-600",children:"USDT Split:"}),c.jsxs("div",{className:"text-sm font-medium",children:[c.jsxs("span",{className:"text-accent-600",children:[a,"% LP"]}),c.jsx("span",{className:"text-gray-400 mx-2",children:"|"}),c.jsxs("span",{className:"text-primary-600",children:[o,"% Treasury"]})]})]}),c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsx("span",{className:"text-sm text-gray-600",children:"SHARE Split:"}),c.jsxs("div",{className:"text-sm font-medium",children:[c.jsxs("span",{className:"text-accent-600",children:[a,"% LP"]}),c.jsx("span",{className:"text-gray-400 mx-2",children:"|"}),c.jsxs("span",{className:"text-primary-600",children:[o,"% Vest"]})]})]}),c.jsx("div",{className:"h-2 bg-gray-200 rounded-full overflow-hidden",children:c.jsxs("div",{className:"h-full flex",children:[c.jsx("div",{className:"bg-accent-500",style:{width:`${a}%`}}),c.jsx("div",{className:"bg-primary-500",style:{width:`${o}%`}})]})})]})]}),c.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[c.jsxs("div",{className:"flex items-center space-x-2",children:[c.jsx(Ql,{className:"w-4 h-4 text-gray-400"}),c.jsxs("div",{children:[c.jsx("p",{className:"text-xs text-gray-500",children:"Vesting"}),c.jsx("p",{className:"text-sm font-medium",children:dT(t.duration)})]})]}),c.jsxs("div",{className:"flex items-center space-x-2",children:[c.jsx(cr,{className:"w-4 h-4 text-gray-400"}),c.jsxs("div",{children:[c.jsx("p",{className:"text-xs text-gray-500",children:"Referral"}),c.jsx("p",{className:"text-sm font-medium",children:Sy(t.referralBps)})]})]}),c.jsxs("div",{className:"flex items-center space-x-2",children:[c.jsx(_r,{className:"w-4 h-4 text-gray-400"}),c.jsxs("div",{children:[c.jsx("p",{className:"text-xs text-gray-500",children:"Exchange Rate"}),c.jsxs("p",{className:"text-sm font-medium",children:[CR(t.exchangeRate)," USDT/BLOCKS"]})]})]})]}),c.jsx("div",{className:"border-t pt-4",children:s?c.jsxs("div",{className:"flex items-center justify-center py-4",children:[c.jsx(vn,{className:"h-4 w-4 animate-spin text-gray-400"}),c.jsx("span",{className:"ml-2 text-sm text-gray-500",children:"Calculating with current target price..."})]}):c.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[c.jsxs("div",{children:[c.jsx("p",{className:"text-gray-500",children:"LP Pool USDT"}),c.jsx("p",{className:"font-medium",children:Al(n.usdtPool)})]}),c.jsxs("div",{children:[c.jsx("p",{className:"text-gray-500",children:"Treasury USDT"}),c.jsx("p",{className:"font-medium",children:Al(n.usdtVault)})]}),c.jsxs("div",{children:[c.jsx("p",{className:"text-gray-500",children:"LP Pool BLOCKS"}),c.jsx("p",{className:"font-medium",children:Nt(n.poolTokens)})]}),c.jsxs("div",{children:[c.jsx("p",{className:"text-gray-500",children:"Vested BLOCKS"}),c.jsx("p",{className:"font-medium",children:Nt(n.vestTokens)})]})]})})]})]}),c.jsx(ebe,{className:"p-6 pt-0",children:c.jsx(se,{onClick:()=>e(t),className:"w-full group-hover:shadow-lg transition-all duration-300",size:"lg",children:"Purchase Package"})})]})}function rbe(t){return c.jsx(tbe,{fallback:c.jsx(ne,{className:"border-red-200 bg-red-50",children:c.jsxs(re,{className:"p-6 text-center",children:[c.jsx("div",{className:"text-red-600 mb-2",children:" Package Load Error"}),c.jsxs("p",{className:"text-sm text-red-700",children:['Unable to load package "',t.package.name,'". This may be due to missing contract data.']})]})}),children:c.jsx(nbe,{...t})})}var sbe=Object.defineProperty,ibe=(t,e,n)=>e in t?sbe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,yN=(t,e,n)=>(ibe(t,typeof e!="symbol"?e+"":e,n),n);let abe=class{constructor(){yN(this,"current",this.detect()),yN(this,"handoffState","pending"),yN(this,"currentId",0)}set(e){this.current!==e&&(this.handoffState="pending",this.currentId=0,this.current=e)}reset(){this.set(this.detect())}nextId(){return++this.currentId}get isServer(){return this.current==="server"}get isClient(){return this.current==="client"}detect(){return typeof window>"u"||typeof document>"u"?"server":"client"}handoff(){this.handoffState==="pending"&&(this.handoffState="complete")}get isHandoffComplete(){return this.handoffState==="complete"}},rc=new abe,yc=(t,e)=>{rc.isServer?v.useEffect(t,e):v.useLayoutEffect(t,e)};function cE(t){let e=v.useRef(t);return yc(()=>{e.current=t},[t]),e}let Rr=function(t){let e=cE(t);return Ht.useCallback((...n)=>e.current(...n),[e])};function lE(t){typeof queueMicrotask=="function"?queueMicrotask(t):Promise.resolve().then(t).catch(e=>setTimeout(()=>{throw e}))}function uE(){let t=[],e={addEventListener(n,r,s,i){return n.addEventListener(r,s,i),e.add(()=>n.removeEventListener(r,s,i))},requestAnimationFrame(...n){let r=requestAnimationFrame(...n);return e.add(()=>cancelAnimationFrame(r))},nextFrame(...n){return e.requestAnimationFrame(()=>e.requestAnimationFrame(...n))},setTimeout(...n){let r=setTimeout(...n);return e.add(()=>clearTimeout(r))},microTask(...n){let r={current:!0};return lE(()=>{r.current&&n[0]()}),e.add(()=>{r.current=!1})},style(n,r,s){let i=n.style.getPropertyValue(r);return Object.assign(n.style,{[r]:s}),this.add(()=>{Object.assign(n.style,{[r]:i})})},group(n){let r=uE();return n(r),this.add(()=>r.dispose())},add(n){return t.push(n),()=>{let r=t.indexOf(n);if(r>=0)for(let s of t.splice(r,1))s()}},dispose(){for(let n of t.splice(0))n()}};return e}function obe(){let[t]=v.useState(uE);return v.useEffect(()=>()=>t.dispose(),[t]),t}function cbe(){let t=typeof document>"u";return"useSyncExternalStore"in Ap?(e=>e.useSyncExternalStore)(Ap)(()=>()=>{},()=>!1,()=>!t):!1}function dE(){let t=cbe(),[e,n]=v.useState(rc.isHandoffComplete);return e&&rc.isHandoffComplete===!1&&n(!1),v.useEffect(()=>{e!==!0&&n(!0)},[e]),v.useEffect(()=>rc.handoff(),[]),t?!1:e}var kR;let vm=(kR=Ht.useId)!=null?kR:function(){let t=dE(),[e,n]=Ht.useState(t?()=>rc.nextId():null);return yc(()=>{e===null&&n(rc.nextId())},[e]),e!=null?""+e:void 0};function Jl(t,e,...n){if(t in e){let s=e[t];return typeof s=="function"?s(...n):s}let r=new Error(`Tried to handle "${t}" but there is no handler defined. Only defined handlers are: ${Object.keys(e).map(s=>`"${s}"`).join(", ")}.`);throw Error.captureStackTrace&&Error.captureStackTrace(r,Jl),r}function m$(t){return rc.isServer?null:t instanceof Node?t.ownerDocument:t!=null&&t.hasOwnProperty("current")&&t.current instanceof Node?t.current.ownerDocument:document}let pT=["[contentEditable=true]","[tabindex]","a[href]","area[href]","button:not([disabled])","iframe","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].map(t=>`${t}:not([tabindex='-1'])`).join(",");var ku=(t=>(t[t.First=1]="First",t[t.Previous=2]="Previous",t[t.Next=4]="Next",t[t.Last=8]="Last",t[t.WrapAround=16]="WrapAround",t[t.NoScroll=32]="NoScroll",t))(ku||{}),g$=(t=>(t[t.Error=0]="Error",t[t.Overflow=1]="Overflow",t[t.Success=2]="Success",t[t.Underflow=3]="Underflow",t))(g$||{}),lbe=(t=>(t[t.Previous=-1]="Previous",t[t.Next=1]="Next",t))(lbe||{});function ube(t=document.body){return t==null?[]:Array.from(t.querySelectorAll(pT)).sort((e,n)=>Math.sign((e.tabIndex||Number.MAX_SAFE_INTEGER)-(n.tabIndex||Number.MAX_SAFE_INTEGER)))}var y$=(t=>(t[t.Strict=0]="Strict",t[t.Loose=1]="Loose",t))(y$||{});function dbe(t,e=0){var n;return t===((n=m$(t))==null?void 0:n.body)?!1:Jl(e,{0(){return t.matches(pT)},1(){let r=t;for(;r!==null;){if(r.matches(pT))return!0;r=r.parentElement}return!1}})}var hbe=(t=>(t[t.Keyboard=0]="Keyboard",t[t.Mouse=1]="Mouse",t))(hbe||{});typeof window<"u"&&typeof document<"u"&&(document.addEventListener("keydown",t=>{t.metaKey||t.altKey||t.ctrlKey||(document.documentElement.dataset.headlessuiFocusVisible="")},!0),document.addEventListener("click",t=>{t.detail===1?delete document.documentElement.dataset.headlessuiFocusVisible:t.detail===0&&(document.documentElement.dataset.headlessuiFocusVisible="")},!0));function Td(t){t==null||t.focus({preventScroll:!0})}let fbe=["textarea","input"].join(",");function pbe(t){var e,n;return(n=(e=t==null?void 0:t.matches)==null?void 0:e.call(t,fbe))!=null?n:!1}function mbe(t,e=n=>n){return t.slice().sort((n,r)=>{let s=e(n),i=e(r);if(s===null||i===null)return 0;let a=s.compareDocumentPosition(i);return a&Node.DOCUMENT_POSITION_FOLLOWING?-1:a&Node.DOCUMENT_POSITION_PRECEDING?1:0})}function vx(t,e,{sorted:n=!0,relativeTo:r=null,skipElements:s=[]}={}){let i=Array.isArray(t)?t.length>0?t[0].ownerDocument:document:t.ownerDocument,a=Array.isArray(t)?n?mbe(t):t:ube(t);s.length>0&&a.length>1&&(a=a.filter(p=>!s.includes(p))),r=r??i.activeElement;let o=(()=>{if(e&5)return 1;if(e&10)return-1;throw new Error("Missing Focus.First, Focus.Previous, Focus.Next or Focus.Last")})(),l=(()=>{if(e&1)return 0;if(e&2)return Math.max(0,a.indexOf(r))-1;if(e&4)return Math.max(0,a.indexOf(r))+1;if(e&8)return a.length-1;throw new Error("Missing Focus.First, Focus.Previous, Focus.Next or Focus.Last")})(),u=e&32?{preventScroll:!0}:{},d=0,h=a.length,f;do{if(d>=h||d+h<=0)return 0;let p=l+d;if(e&16)p=(p+h)%h;else{if(p<0)return 3;if(p>=h)return 1}f=a[p],f==null||f.focus(u),d+=o}while(f!==i.activeElement);return e&6&&pbe(f)&&f.select(),2}function w$(){return/iPhone/gi.test(window.navigator.platform)||/Mac/gi.test(window.navigator.platform)&&window.navigator.maxTouchPoints>0}function gbe(){return/Android/gi.test(window.navigator.userAgent)}function ybe(){return w$()||gbe()}function Ib(t,e,n){let r=cE(e);v.useEffect(()=>{function s(i){r.current(i)}return document.addEventListener(t,s,n),()=>document.removeEventListener(t,s,n)},[t,n])}function b$(t,e,n){let r=cE(e);v.useEffect(()=>{function s(i){r.current(i)}return window.addEventListener(t,s,n),()=>window.removeEventListener(t,s,n)},[t,n])}function wbe(t,e,n=!0){let r=v.useRef(!1);v.useEffect(()=>{requestAnimationFrame(()=>{r.current=n})},[n]);function s(a,o){if(!r.current||a.defaultPrevented)return;let l=o(a);if(l===null||!l.getRootNode().contains(l)||!l.isConnected)return;let u=function d(h){return typeof h=="function"?d(h()):Array.isArray(h)||h instanceof Set?h:[h]}(t);for(let d of u){if(d===null)continue;let h=d instanceof HTMLElement?d:d.current;if(h!=null&&h.contains(l)||a.composed&&a.composedPath().includes(h))return}return!dbe(l,y$.Loose)&&l.tabIndex!==-1&&a.preventDefault(),e(a,l)}let i=v.useRef(null);Ib("pointerdown",a=>{var o,l;r.current&&(i.current=((l=(o=a.composedPath)==null?void 0:o.call(a))==null?void 0:l[0])||a.target)},!0),Ib("mousedown",a=>{var o,l;r.current&&(i.current=((l=(o=a.composedPath)==null?void 0:o.call(a))==null?void 0:l[0])||a.target)},!0),Ib("click",a=>{ybe()||i.current&&(s(a,()=>i.current),i.current=null)},!0),Ib("touchend",a=>s(a,()=>a.target instanceof HTMLElement?a.target:null),!0),b$("blur",a=>s(a,()=>window.document.activeElement instanceof HTMLIFrameElement?window.document.activeElement:null),!0)}function bw(...t){return v.useMemo(()=>m$(...t),[...t])}let x$=Symbol();function bbe(t,e=!0){return Object.assign(t,{[x$]:e})}function xc(...t){let e=v.useRef(t);v.useEffect(()=>{e.current=t},[t]);let n=Rr(r=>{for(let s of e.current)s!=null&&(typeof s=="function"?s(r):s.current=r)});return t.every(r=>r==null||(r==null?void 0:r[x$]))?void 0:n}function GS(t,e){let n=v.useRef([]),r=Rr(t);v.useEffect(()=>{let s=[...n.current];for(let[i,a]of e.entries())if(n.current[i]!==a){let o=r(e,s);return n.current=e,o}},[r,...e])}function _R(...t){return Array.from(new Set(t.flatMap(e=>typeof e=="string"?e.split(" "):[]))).filter(Boolean).join(" ")}var mT=(t=>(t[t.None=0]="None",t[t.RenderStrategy=1]="RenderStrategy",t[t.Static=2]="Static",t))(mT||{}),xbe=(t=>(t[t.Unmount=0]="Unmount",t[t.Hidden=1]="Hidden",t))(xbe||{});function fo({ourProps:t,theirProps:e,slot:n,defaultTag:r,features:s,visible:i=!0,name:a,mergeRefs:o}){o=o??vbe;let l=v$(e,t);if(i)return Pb(l,n,r,a,o);let u=s??0;if(u&2){let{static:d=!1,...h}=l;if(d)return Pb(h,n,r,a,o)}if(u&1){let{unmount:d=!0,...h}=l;return Jl(d?0:1,{0(){return null},1(){return Pb({...h,hidden:!0,style:{display:"none"}},n,r,a,o)}})}return Pb(l,n,r,a,o)}function Pb(t,e={},n,r,s){let{as:i=n,children:a,refName:o="ref",...l}=wN(t,["unmount","static"]),u=t.ref!==void 0?{[o]:t.ref}:{},d=typeof a=="function"?a(e):a;"className"in l&&l.className&&typeof l.className=="function"&&(l.className=l.className(e));let h={};if(e){let f=!1,p=[];for(let[g,m]of Object.entries(e))typeof m=="boolean"&&(f=!0),m===!0&&p.push(g);f&&(h["data-headlessui-state"]=p.join(" "))}if(i===v.Fragment&&Object.keys(IR(l)).length>0){if(!v.isValidElement(d)||Array.isArray(d)&&d.length>1)throw new Error(['Passing props on "Fragment"!',"",`The current component <${r} /> is rendering a "Fragment".`,"However we need to passthrough the following props:",Object.keys(l).map(m=>`  - ${m}`).join(`
`),"","You can apply a few solutions:",['Add an `as="..."` prop, to ensure that we render an actual element instead of a "Fragment".',"Render a single element as the child so that we can forward the props onto that element."].map(m=>`  - ${m}`).join(`
`)].join(`
`));let f=d.props,p=typeof(f==null?void 0:f.className)=="function"?(...m)=>_R(f==null?void 0:f.className(...m),l.className):_R(f==null?void 0:f.className,l.className),g=p?{className:p}:{};return v.cloneElement(d,Object.assign({},v$(d.props,IR(wN(l,["ref"]))),h,u,{ref:s(d.ref,u.ref)},g))}return v.createElement(i,Object.assign({},wN(l,["ref"]),i!==v.Fragment&&u,i!==v.Fragment&&h),d)}function vbe(...t){return t.every(e=>e==null)?void 0:e=>{for(let n of t)n!=null&&(typeof n=="function"?n(e):n.current=e)}}function v$(...t){if(t.length===0)return{};if(t.length===1)return t[0];let e={},n={};for(let r of t)for(let s in r)s.startsWith("on")&&typeof r[s]=="function"?(n[s]!=null||(n[s]=[]),n[s].push(r[s])):e[s]=r[s];if(e.disabled||e["aria-disabled"])return Object.assign(e,Object.fromEntries(Object.keys(n).map(r=>[r,void 0])));for(let r in n)Object.assign(e,{[r](s,...i){let a=n[r];for(let o of a){if((s instanceof Event||(s==null?void 0:s.nativeEvent)instanceof Event)&&s.defaultPrevented)return;o(s,...i)}}});return e}function po(t){var e;return Object.assign(v.forwardRef(t),{displayName:(e=t.displayName)!=null?e:t.name})}function IR(t){let e=Object.assign({},t);for(let n in e)e[n]===void 0&&delete e[n];return e}function wN(t,e=[]){let n=Object.assign({},t);for(let r of e)r in n&&delete n[r];return n}let Ebe="div";var Wv=(t=>(t[t.None=1]="None",t[t.Focusable=2]="Focusable",t[t.Hidden=4]="Hidden",t))(Wv||{});function Nbe(t,e){var n;let{features:r=1,...s}=t,i={ref:e,"aria-hidden":(r&2)===2?!0:(n=s["aria-hidden"])!=null?n:void 0,hidden:(r&4)===4?!0:void 0,style:{position:"fixed",top:1,left:1,width:1,height:0,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0",...(r&4)===4&&(r&2)!==2&&{display:"none"}}};return fo({ourProps:i,theirProps:s,slot:{},defaultTag:Ebe,name:"Hidden"})}let gT=po(Nbe),E$=v.createContext(null);E$.displayName="OpenClosedContext";var kg=(t=>(t[t.Open=1]="Open",t[t.Closed=2]="Closed",t[t.Closing=4]="Closing",t[t.Opening=8]="Opening",t))(kg||{});function Cbe(){return v.useContext(E$)}function Abe(t){function e(){document.readyState!=="loading"&&(t(),document.removeEventListener("DOMContentLoaded",e))}typeof window<"u"&&typeof document<"u"&&(document.addEventListener("DOMContentLoaded",e),e())}let nl=[];Abe(()=>{function t(e){e.target instanceof HTMLElement&&e.target!==document.body&&nl[0]!==e.target&&(nl.unshift(e.target),nl=nl.filter(n=>n!=null&&n.isConnected),nl.splice(10))}window.addEventListener("click",t,{capture:!0}),window.addEventListener("mousedown",t,{capture:!0}),window.addEventListener("focus",t,{capture:!0}),document.body.addEventListener("click",t,{capture:!0}),document.body.addEventListener("mousedown",t,{capture:!0}),document.body.addEventListener("focus",t,{capture:!0})});function Tbe(t){let e=t.parentElement,n=null;for(;e&&!(e instanceof HTMLFieldSetElement);)e instanceof HTMLLegendElement&&(n=e),e=e.parentElement;let r=(e==null?void 0:e.getAttribute("disabled"))==="";return r&&Sbe(n)?!1:r}function Sbe(t){if(!t)return!1;let e=t.previousElementSibling;for(;e!==null;){if(e instanceof HTMLLegendElement)return!1;e=e.previousElementSibling}return!0}var N$=(t=>(t.Space=" ",t.Enter="Enter",t.Escape="Escape",t.Backspace="Backspace",t.Delete="Delete",t.ArrowLeft="ArrowLeft",t.ArrowUp="ArrowUp",t.ArrowRight="ArrowRight",t.ArrowDown="ArrowDown",t.Home="Home",t.End="End",t.PageUp="PageUp",t.PageDown="PageDown",t.Tab="Tab",t))(N$||{});function C$(t,e,n,r){let s=cE(n);v.useEffect(()=>{t=t??window;function i(a){s.current(a)}return t.addEventListener(e,i,r),()=>t.removeEventListener(e,i,r)},[t,e,r])}function A$(){let t=v.useRef(!1);return yc(()=>(t.current=!0,()=>{t.current=!1}),[]),t}function T$(t){let e=Rr(t),n=v.useRef(!1);v.useEffect(()=>(n.current=!1,()=>{n.current=!0,lE(()=>{n.current&&e()})}),[e])}var _g=(t=>(t[t.Forwards=0]="Forwards",t[t.Backwards=1]="Backwards",t))(_g||{});function kbe(){let t=v.useRef(0);return b$("keydown",e=>{e.key==="Tab"&&(t.current=e.shiftKey?1:0)},!0),t}function S$(t){if(!t)return new Set;if(typeof t=="function")return new Set(t());let e=new Set;for(let n of t.current)n.current instanceof HTMLElement&&e.add(n.current);return e}let _be="div";var k$=(t=>(t[t.None=1]="None",t[t.InitialFocus=2]="InitialFocus",t[t.TabLock=4]="TabLock",t[t.FocusLock=8]="FocusLock",t[t.RestoreFocus=16]="RestoreFocus",t[t.All=30]="All",t))(k$||{});function Ibe(t,e){let n=v.useRef(null),r=xc(n,e),{initialFocus:s,containers:i,features:a=30,...o}=t;dE()||(a=1);let l=bw(n);jbe({ownerDocument:l},!!(a&16));let u=Obe({ownerDocument:l,container:n,initialFocus:s},!!(a&2));Dbe({ownerDocument:l,container:n,containers:i,previousActiveElement:u},!!(a&8));let d=kbe(),h=Rr(m=>{let y=n.current;y&&(b=>b())(()=>{Jl(d.current,{[_g.Forwards]:()=>{vx(y,ku.First,{skipElements:[m.relatedTarget]})},[_g.Backwards]:()=>{vx(y,ku.Last,{skipElements:[m.relatedTarget]})}})})}),f=obe(),p=v.useRef(!1),g={ref:r,onKeyDown(m){m.key=="Tab"&&(p.current=!0,f.requestAnimationFrame(()=>{p.current=!1}))},onBlur(m){let y=S$(i);n.current instanceof HTMLElement&&y.add(n.current);let b=m.relatedTarget;b instanceof HTMLElement&&b.dataset.headlessuiFocusGuard!=="true"&&(_$(y,b)||(p.current?vx(n.current,Jl(d.current,{[_g.Forwards]:()=>ku.Next,[_g.Backwards]:()=>ku.Previous})|ku.WrapAround,{relativeTo:m.target}):m.target instanceof HTMLElement&&Td(m.target)))}};return Ht.createElement(Ht.Fragment,null,!!(a&4)&&Ht.createElement(gT,{as:"button",type:"button","data-headlessui-focus-guard":!0,onFocus:h,features:Wv.Focusable}),fo({ourProps:g,theirProps:o,defaultTag:_be,name:"FocusTrap"}),!!(a&4)&&Ht.createElement(gT,{as:"button",type:"button","data-headlessui-focus-guard":!0,onFocus:h,features:Wv.Focusable}))}let Pbe=po(Ibe),ig=Object.assign(Pbe,{features:k$});function Rbe(t=!0){let e=v.useRef(nl.slice());return GS(([n],[r])=>{r===!0&&n===!1&&lE(()=>{e.current.splice(0)}),r===!1&&n===!0&&(e.current=nl.slice())},[t,nl,e]),Rr(()=>{var n;return(n=e.current.find(r=>r!=null&&r.isConnected))!=null?n:null})}function jbe({ownerDocument:t},e){let n=Rbe(e);GS(()=>{e||(t==null?void 0:t.activeElement)===(t==null?void 0:t.body)&&Td(n())},[e]),T$(()=>{e&&Td(n())})}function Obe({ownerDocument:t,container:e,initialFocus:n},r){let s=v.useRef(null),i=A$();return GS(()=>{if(!r)return;let a=e.current;a&&lE(()=>{if(!i.current)return;let o=t==null?void 0:t.activeElement;if(n!=null&&n.current){if((n==null?void 0:n.current)===o){s.current=o;return}}else if(a.contains(o)){s.current=o;return}n!=null&&n.current?Td(n.current):vx(a,ku.First)===g$.Error&&console.warn("There are no focusable elements inside the <FocusTrap />"),s.current=t==null?void 0:t.activeElement})},[r]),s}function Dbe({ownerDocument:t,container:e,containers:n,previousActiveElement:r},s){let i=A$();C$(t==null?void 0:t.defaultView,"focus",a=>{if(!s||!i.current)return;let o=S$(n);e.current instanceof HTMLElement&&o.add(e.current);let l=r.current;if(!l)return;let u=a.target;u&&u instanceof HTMLElement?_$(o,u)?(r.current=u,Td(u)):(a.preventDefault(),a.stopPropagation(),Td(l)):Td(r.current)},!0)}function _$(t,e){for(let n of t)if(n.contains(e))return!0;return!1}let I$=v.createContext(!1);function Ube(){return v.useContext(I$)}function yT(t){return Ht.createElement(I$.Provider,{value:t.force},t.children)}function Mbe(t){let e=Ube(),n=v.useContext(P$),r=bw(t),[s,i]=v.useState(()=>{if(!e&&n!==null||rc.isServer)return null;let a=r==null?void 0:r.getElementById("headlessui-portal-root");if(a)return a;if(r===null)return null;let o=r.createElement("div");return o.setAttribute("id","headlessui-portal-root"),r.body.appendChild(o)});return v.useEffect(()=>{s!==null&&(r!=null&&r.body.contains(s)||r==null||r.body.appendChild(s))},[s,r]),v.useEffect(()=>{e||n!==null&&i(n.current)},[n,i,e]),s}let Lbe=v.Fragment;function Bbe(t,e){let n=t,r=v.useRef(null),s=xc(bbe(d=>{r.current=d}),e),i=bw(r),a=Mbe(r),[o]=v.useState(()=>{var d;return rc.isServer?null:(d=i==null?void 0:i.createElement("div"))!=null?d:null}),l=v.useContext(wT),u=dE();return yc(()=>{!a||!o||a.contains(o)||(o.setAttribute("data-headlessui-portal",""),a.appendChild(o))},[a,o]),yc(()=>{if(o&&l)return l.register(o)},[l,o]),T$(()=>{var d;!a||!o||(o instanceof Node&&a.contains(o)&&a.removeChild(o),a.childNodes.length<=0&&((d=a.parentElement)==null||d.removeChild(a)))}),u?!a||!o?null:mO.createPortal(fo({ourProps:{ref:s},theirProps:n,defaultTag:Lbe,name:"Portal"}),o):null}let $be=v.Fragment,P$=v.createContext(null);function Fbe(t,e){let{target:n,...r}=t,s={ref:xc(e)};return Ht.createElement(P$.Provider,{value:n},fo({ourProps:s,theirProps:r,defaultTag:$be,name:"Popover.Group"}))}let wT=v.createContext(null);function Hbe(){let t=v.useContext(wT),e=v.useRef([]),n=Rr(i=>(e.current.push(i),t&&t.register(i),()=>r(i))),r=Rr(i=>{let a=e.current.indexOf(i);a!==-1&&e.current.splice(a,1),t&&t.unregister(i)}),s=v.useMemo(()=>({register:n,unregister:r,portals:e}),[n,r,e]);return[e,v.useMemo(()=>function({children:i}){return Ht.createElement(wT.Provider,{value:s},i)},[s])]}let Vbe=po(Bbe),zbe=po(Fbe),bT=Object.assign(Vbe,{Group:zbe});function Wbe(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}const qbe=typeof Object.is=="function"?Object.is:Wbe,{useState:Kbe,useEffect:Gbe,useLayoutEffect:Ybe,useDebugValue:Qbe}=Ap;function Jbe(t,e,n){const r=e(),[{inst:s},i]=Kbe({inst:{value:r,getSnapshot:e}});return Ybe(()=>{s.value=r,s.getSnapshot=e,bN(s)&&i({inst:s})},[t,r,e]),Gbe(()=>(bN(s)&&i({inst:s}),t(()=>{bN(s)&&i({inst:s})})),[t]),Qbe(r),r}function bN(t){const e=t.getSnapshot,n=t.value;try{const r=e();return!qbe(n,r)}catch{return!0}}function Zbe(t,e,n){return e()}const Xbe=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",exe=!Xbe,txe=exe?Zbe:Jbe,nxe="useSyncExternalStore"in Ap?(t=>t.useSyncExternalStore)(Ap):txe;function rxe(t){return nxe(t.subscribe,t.getSnapshot,t.getSnapshot)}function sxe(t,e){let n=t(),r=new Set;return{getSnapshot(){return n},subscribe(s){return r.add(s),()=>r.delete(s)},dispatch(s,...i){let a=e[s].call(n,...i);a&&(n=a,r.forEach(o=>o()))}}}function ixe(){let t;return{before({doc:e}){var n;let r=e.documentElement;t=((n=e.defaultView)!=null?n:window).innerWidth-r.clientWidth},after({doc:e,d:n}){let r=e.documentElement,s=r.clientWidth-r.offsetWidth,i=t-s;n.style(r,"paddingRight",`${i}px`)}}}function axe(){return w$()?{before({doc:t,d:e,meta:n}){function r(s){return n.containers.flatMap(i=>i()).some(i=>i.contains(s))}e.microTask(()=>{var s;if(window.getComputedStyle(t.documentElement).scrollBehavior!=="auto"){let o=uE();o.style(t.documentElement,"scrollBehavior","auto"),e.add(()=>e.microTask(()=>o.dispose()))}let i=(s=window.scrollY)!=null?s:window.pageYOffset,a=null;e.addEventListener(t,"click",o=>{if(o.target instanceof HTMLElement)try{let l=o.target.closest("a");if(!l)return;let{hash:u}=new URL(l.href),d=t.querySelector(u);d&&!r(d)&&(a=d)}catch{}},!0),e.addEventListener(t,"touchstart",o=>{if(o.target instanceof HTMLElement)if(r(o.target)){let l=o.target;for(;l.parentElement&&r(l.parentElement);)l=l.parentElement;e.style(l,"overscrollBehavior","contain")}else e.style(o.target,"touchAction","none")}),e.addEventListener(t,"touchmove",o=>{if(o.target instanceof HTMLElement)if(r(o.target)){let l=o.target;for(;l.parentElement&&l.dataset.headlessuiPortal!==""&&!(l.scrollHeight>l.clientHeight||l.scrollWidth>l.clientWidth);)l=l.parentElement;l.dataset.headlessuiPortal===""&&o.preventDefault()}else o.preventDefault()},{passive:!1}),e.add(()=>{var o;let l=(o=window.scrollY)!=null?o:window.pageYOffset;i!==l&&window.scrollTo(0,i),a&&a.isConnected&&(a.scrollIntoView({block:"nearest"}),a=null)})})}}:{}}function oxe(){return{before({doc:t,d:e}){e.style(t.documentElement,"overflow","hidden")}}}function cxe(t){let e={};for(let n of t)Object.assign(e,n(e));return e}let Gu=sxe(()=>new Map,{PUSH(t,e){var n;let r=(n=this.get(t))!=null?n:{doc:t,count:0,d:uE(),meta:new Set};return r.count++,r.meta.add(e),this.set(t,r),this},POP(t,e){let n=this.get(t);return n&&(n.count--,n.meta.delete(e)),this},SCROLL_PREVENT({doc:t,d:e,meta:n}){let r={doc:t,d:e,meta:cxe(n)},s=[axe(),ixe(),oxe()];s.forEach(({before:i})=>i==null?void 0:i(r)),s.forEach(({after:i})=>i==null?void 0:i(r))},SCROLL_ALLOW({d:t}){t.dispose()},TEARDOWN({doc:t}){this.delete(t)}});Gu.subscribe(()=>{let t=Gu.getSnapshot(),e=new Map;for(let[n]of t)e.set(n,n.documentElement.style.overflow);for(let n of t.values()){let r=e.get(n.doc)==="hidden",s=n.count!==0;(s&&!r||!s&&r)&&Gu.dispatch(n.count>0?"SCROLL_PREVENT":"SCROLL_ALLOW",n),n.count===0&&Gu.dispatch("TEARDOWN",n)}});function lxe(t,e,n){let r=rxe(Gu),s=t?r.get(t):void 0,i=s?s.count>0:!1;return yc(()=>{if(!(!t||!e))return Gu.dispatch("PUSH",t,n),()=>Gu.dispatch("POP",t,n)},[e,t]),i}let xN=new Map,ag=new Map;function PR(t,e=!0){yc(()=>{var n;if(!e)return;let r=typeof t=="function"?t():t.current;if(!r)return;function s(){var a;if(!r)return;let o=(a=ag.get(r))!=null?a:1;if(o===1?ag.delete(r):ag.set(r,o-1),o!==1)return;let l=xN.get(r);l&&(l["aria-hidden"]===null?r.removeAttribute("aria-hidden"):r.setAttribute("aria-hidden",l["aria-hidden"]),r.inert=l.inert,xN.delete(r))}let i=(n=ag.get(r))!=null?n:0;return ag.set(r,i+1),i!==0||(xN.set(r,{"aria-hidden":r.getAttribute("aria-hidden"),inert:r.inert}),r.setAttribute("aria-hidden","true"),r.inert=!0),s},[t,e])}function uxe({defaultContainers:t=[],portals:e,mainTreeNodeRef:n}={}){var r;let s=v.useRef((r=n==null?void 0:n.current)!=null?r:null),i=bw(s),a=Rr(()=>{var o,l,u;let d=[];for(let h of t)h!==null&&(h instanceof HTMLElement?d.push(h):"current"in h&&h.current instanceof HTMLElement&&d.push(h.current));if(e!=null&&e.current)for(let h of e.current)d.push(h);for(let h of(o=i==null?void 0:i.querySelectorAll("html > *, body > *"))!=null?o:[])h!==document.body&&h!==document.head&&h instanceof HTMLElement&&h.id!=="headlessui-portal-root"&&(h.contains(s.current)||h.contains((u=(l=s.current)==null?void 0:l.getRootNode())==null?void 0:u.host)||d.some(f=>h.contains(f))||d.push(h));return d});return{resolveContainers:a,contains:Rr(o=>a().some(l=>l.contains(o))),mainTreeNodeRef:s,MainTreeNode:v.useMemo(()=>function(){return n!=null?null:Ht.createElement(gT,{features:Wv.Hidden,ref:s})},[s,n])}}let YS=v.createContext(()=>{});YS.displayName="StackContext";var xT=(t=>(t[t.Add=0]="Add",t[t.Remove=1]="Remove",t))(xT||{});function dxe(){return v.useContext(YS)}function hxe({children:t,onUpdate:e,type:n,element:r,enabled:s}){let i=dxe(),a=Rr((...o)=>{e==null||e(...o),i(...o)});return yc(()=>{let o=s===void 0||s===!0;return o&&a(0,n,r),()=>{o&&a(1,n,r)}},[a,n,r,s]),Ht.createElement(YS.Provider,{value:a},t)}let R$=v.createContext(null);function j$(){let t=v.useContext(R$);if(t===null){let e=new Error("You used a <Description /> component, but it is not inside a relevant parent.");throw Error.captureStackTrace&&Error.captureStackTrace(e,j$),e}return t}function fxe(){let[t,e]=v.useState([]);return[t.length>0?t.join(" "):void 0,v.useMemo(()=>function(n){let r=Rr(i=>(e(a=>[...a,i]),()=>e(a=>{let o=a.slice(),l=o.indexOf(i);return l!==-1&&o.splice(l,1),o}))),s=v.useMemo(()=>({register:r,slot:n.slot,name:n.name,props:n.props}),[r,n.slot,n.name,n.props]);return Ht.createElement(R$.Provider,{value:s},n.children)},[e])]}let pxe="p";function mxe(t,e){let n=vm(),{id:r=`headlessui-description-${n}`,...s}=t,i=j$(),a=xc(e);yc(()=>i.register(r),[r,i.register]);let o={ref:a,...i.props,id:r};return fo({ourProps:o,theirProps:s,slot:i.slot||{},defaultTag:pxe,name:i.name||"Description"})}let gxe=po(mxe),yxe=Object.assign(gxe,{});var wxe=(t=>(t[t.Open=0]="Open",t[t.Closed=1]="Closed",t))(wxe||{}),bxe=(t=>(t[t.SetTitleId=0]="SetTitleId",t))(bxe||{});let xxe={0(t,e){return t.titleId===e.id?t:{...t,titleId:e.id}}},qv=v.createContext(null);qv.displayName="DialogContext";function xw(t){let e=v.useContext(qv);if(e===null){let n=new Error(`<${t} /> is missing a parent <Dialog /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(n,xw),n}return e}function vxe(t,e,n=()=>[document.body]){lxe(t,e,r=>{var s;return{containers:[...(s=r.containers)!=null?s:[],n]}})}function Exe(t,e){return Jl(e.type,xxe,t,e)}let Nxe="div",Cxe=mT.RenderStrategy|mT.Static;function Axe(t,e){let n=vm(),{id:r=`headlessui-dialog-${n}`,open:s,onClose:i,initialFocus:a,role:o="dialog",__demoMode:l=!1,...u}=t,[d,h]=v.useState(0),f=v.useRef(!1);o=function(){return o==="dialog"||o==="alertdialog"?o:(f.current||(f.current=!0,console.warn(`Invalid role [${o}] passed to <Dialog />. Only \`dialog\` and and \`alertdialog\` are supported. Using \`dialog\` instead.`)),"dialog")}();let p=Cbe();s===void 0&&p!==null&&(s=(p&kg.Open)===kg.Open);let g=v.useRef(null),m=xc(g,e),y=bw(g),b=t.hasOwnProperty("open")||p!==null,w=t.hasOwnProperty("onClose");if(!b&&!w)throw new Error("You have to provide an `open` and an `onClose` prop to the `Dialog` component.");if(!b)throw new Error("You provided an `onClose` prop to the `Dialog`, but forgot an `open` prop.");if(!w)throw new Error("You provided an `open` prop to the `Dialog`, but forgot an `onClose` prop.");if(typeof s!="boolean")throw new Error(`You provided an \`open\` prop to the \`Dialog\`, but the value is not a boolean. Received: ${s}`);if(typeof i!="function")throw new Error(`You provided an \`onClose\` prop to the \`Dialog\`, but the value is not a function. Received: ${i}`);let x=s?0:1,[A,T]=v.useReducer(Exe,{titleId:null,descriptionId:null,panelRef:v.createRef()}),j=Rr(()=>i(!1)),P=Rr(je=>T({type:0,id:je})),S=dE()?l?!1:x===0:!1,E=d>1,k=v.useContext(qv)!==null,[R,O]=Hbe(),F={get current(){var je;return(je=A.panelRef.current)!=null?je:g.current}},{resolveContainers:z,mainTreeNodeRef:N,MainTreeNode:I}=uxe({portals:R,defaultContainers:[F]}),M=E?"parent":"leaf",D=p!==null?(p&kg.Closing)===kg.Closing:!1,L=k||D?!1:S,$=v.useCallback(()=>{var je,kt;return(kt=Array.from((je=y==null?void 0:y.querySelectorAll("body > *"))!=null?je:[]).find(et=>et.id==="headlessui-portal-root"?!1:et.contains(N.current)&&et instanceof HTMLElement))!=null?kt:null},[N]);PR($,L);let V=E?!0:S,q=v.useCallback(()=>{var je,kt;return(kt=Array.from((je=y==null?void 0:y.querySelectorAll("[data-headlessui-portal]"))!=null?je:[]).find(et=>et.contains(N.current)&&et instanceof HTMLElement))!=null?kt:null},[N]);PR(q,V),wbe(z,je=>{je.preventDefault(),j()},!(!S||E));let Z=!(E||x!==0);C$(y==null?void 0:y.defaultView,"keydown",je=>{Z&&(je.defaultPrevented||je.key===N$.Escape&&(je.preventDefault(),je.stopPropagation(),j()))}),vxe(y,!(D||x!==0||k),z),v.useEffect(()=>{if(x!==0||!g.current)return;let je=new ResizeObserver(kt=>{for(let et of kt){let De=et.target.getBoundingClientRect();De.x===0&&De.y===0&&De.width===0&&De.height===0&&j()}});return je.observe(g.current),()=>je.disconnect()},[x,g,j]);let[xe,J]=fxe(),ve=v.useMemo(()=>[{dialogState:x,close:j,setTitleId:P},A],[x,A,j,P]),ge=v.useMemo(()=>({open:x===0}),[x]),Le={ref:m,id:r,role:o,"aria-modal":x===0?!0:void 0,"aria-labelledby":A.titleId,"aria-describedby":xe};return Ht.createElement(hxe,{type:"Dialog",enabled:x===0,element:g,onUpdate:Rr((je,kt)=>{kt==="Dialog"&&Jl(je,{[xT.Add]:()=>h(et=>et+1),[xT.Remove]:()=>h(et=>et-1)})})},Ht.createElement(yT,{force:!0},Ht.createElement(bT,null,Ht.createElement(qv.Provider,{value:ve},Ht.createElement(bT.Group,{target:g},Ht.createElement(yT,{force:!1},Ht.createElement(J,{slot:ge,name:"Dialog.Description"},Ht.createElement(ig,{initialFocus:a,containers:z,features:S?Jl(M,{parent:ig.features.RestoreFocus,leaf:ig.features.All&~ig.features.FocusLock}):ig.features.None},Ht.createElement(O,null,fo({ourProps:Le,theirProps:u,slot:ge,defaultTag:Nxe,features:Cxe,visible:x===0,name:"Dialog"}))))))))),Ht.createElement(I,null))}let Txe="div";function Sxe(t,e){let n=vm(),{id:r=`headlessui-dialog-overlay-${n}`,...s}=t,[{dialogState:i,close:a}]=xw("Dialog.Overlay"),o=xc(e),l=Rr(d=>{if(d.target===d.currentTarget){if(Tbe(d.currentTarget))return d.preventDefault();d.preventDefault(),d.stopPropagation(),a()}}),u=v.useMemo(()=>({open:i===0}),[i]);return fo({ourProps:{ref:o,id:r,"aria-hidden":!0,onClick:l},theirProps:s,slot:u,defaultTag:Txe,name:"Dialog.Overlay"})}let kxe="div";function _xe(t,e){let n=vm(),{id:r=`headlessui-dialog-backdrop-${n}`,...s}=t,[{dialogState:i},a]=xw("Dialog.Backdrop"),o=xc(e);v.useEffect(()=>{if(a.panelRef.current===null)throw new Error("A <Dialog.Backdrop /> component is being used, but a <Dialog.Panel /> component is missing.")},[a.panelRef]);let l=v.useMemo(()=>({open:i===0}),[i]);return Ht.createElement(yT,{force:!0},Ht.createElement(bT,null,fo({ourProps:{ref:o,id:r,"aria-hidden":!0},theirProps:s,slot:l,defaultTag:kxe,name:"Dialog.Backdrop"})))}let Ixe="div";function Pxe(t,e){let n=vm(),{id:r=`headlessui-dialog-panel-${n}`,...s}=t,[{dialogState:i},a]=xw("Dialog.Panel"),o=xc(e,a.panelRef),l=v.useMemo(()=>({open:i===0}),[i]),u=Rr(d=>{d.stopPropagation()});return fo({ourProps:{ref:o,id:r,onClick:u},theirProps:s,slot:l,defaultTag:Ixe,name:"Dialog.Panel"})}let Rxe="h2";function jxe(t,e){let n=vm(),{id:r=`headlessui-dialog-title-${n}`,...s}=t,[{dialogState:i,setTitleId:a}]=xw("Dialog.Title"),o=xc(e);v.useEffect(()=>(a(r),()=>a(null)),[r,a]);let l=v.useMemo(()=>({open:i===0}),[i]);return fo({ourProps:{ref:o,id:r},theirProps:s,slot:l,defaultTag:Rxe,name:"Dialog.Title"})}let Oxe=po(Axe),Dxe=po(_xe),Uxe=po(Pxe),Mxe=po(Sxe),Lxe=po(jxe),Mf=Object.assign(Oxe,{Backdrop:Dxe,Panel:Uxe,Overlay:Mxe,Title:Lxe,Description:yxe});function Bxe(t){const e=(t==null?void 0:t.message)||(t==null?void 0:t.toString())||"Unknown error",n=(t==null?void 0:t.code)||"UNKNOWN";if(n===4001||e.includes("User denied")||e.includes("user rejected"))return{code:"USER_REJECTED",message:e,userMessage:"Transaction was cancelled by user",isUserRejection:!0,isInsufficientFunds:!1,isNetworkError:!1};if(e.includes("insufficient funds")||e.includes("insufficient balance"))return{code:"INSUFFICIENT_FUNDS",message:e,userMessage:"Insufficient funds for transaction",isUserRejection:!1,isInsufficientFunds:!0,isNetworkError:!1};if(e.includes("gas")&&(e.includes("estimate")||e.includes("limit")))return{code:"GAS_ESTIMATION_FAILED",message:e,userMessage:"Transaction would fail. Please check your inputs and try again.",isUserRejection:!1,isInsufficientFunds:!1,isNetworkError:!1};if(e.includes("filter not found")||n===-32e3)return{code:"FILTER_ERROR",message:e,userMessage:"Event monitoring error. Transaction may still succeed - please check your wallet.",isUserRejection:!1,isInsufficientFunds:!1,isNetworkError:!0};if(e.includes("network")||e.includes("connection")||n==="NETWORK_ERROR")return{code:"NETWORK_ERROR",message:e,userMessage:"Network connection error. Please check your connection and try again.",isUserRejection:!1,isInsufficientFunds:!1,isNetworkError:!0};if(e.includes("revert")||e.includes("execution reverted")){let r="Transaction failed. ";return e.includes("Package not active")?r+="This package is not currently active.":e.includes("Invalid package")?r+="Package not found.":e.includes("insufficient")?r+="Insufficient balance or allowance.":e.includes("Cannot refer yourself")?r+="You cannot refer yourself.":e.includes("unknown custom error")?r+="Please check your balance, allowances, and package status.":r+="Please check your inputs and try again.",{code:"CONTRACT_REVERT",message:e,userMessage:r,isUserRejection:!1,isInsufficientFunds:!1,isNetworkError:!1}}return{code:"UNKNOWN_ERROR",message:e,userMessage:"Transaction failed. Please try again.",isUserRejection:!1,isInsufficientFunds:!1,isNetworkError:!1}}async function RR(t,e){const{onStart:n,onSuccess:r,onError:s,onFinally:i,successMessage:a="Transaction successful!",errorMessage:o,showToasts:l=!0}=e||{};try{n==null||n();const u=await t();return l&&X.success(a),r==null||r(u),{success:!0,result:u}}catch(u){const d=Bxe(u);return l&&!d.isUserRejection&&X.error(o||d.userMessage),s==null||s(d),console.error("Transaction failed:",d),{success:!1,error:d}}finally{i==null||i()}}function O$(t){return`${ue.network.explorerUrl}/tx/${t}`}function $xe(){var t;return typeof navigator<"u"&&"clipboard"in navigator&&typeof((t=navigator.clipboard)==null?void 0:t.writeText)=="function"&&window.isSecureContext}function Fxe(t){try{const e=document.createElement("textarea");e.value=t,e.style.position="fixed",e.style.left="-999999px",e.style.top="-999999px",e.style.opacity="0",e.style.pointerEvents="none",e.setAttribute("readonly",""),e.setAttribute("aria-hidden","true"),document.body.appendChild(e),e.focus(),e.select(),e.setSelectionRange(0,t.length);const n=document.execCommand("copy");return document.body.removeChild(e),n}catch(e){return console.error("Fallback copy failed:",e),!1}}async function D$(t){if(!t)return console.warn("Cannot copy empty text to clipboard"),!1;if($xe())try{return await navigator.clipboard.writeText(t),!0}catch(e){console.warn("Clipboard API failed, trying fallback:",e)}return typeof document<"u"&&document.execCommand&&Fxe(t)?!0:(console.error("All clipboard methods failed"),!1)}async function hE(t,e="Copied to clipboard!",n="Failed to copy to clipboard"){const r=await D$(t);return r?X.success(e):X.error(`${n}. Please manually copy: ${t.length>50?t.substring(0,50)+"...":t}`,{duration:8e3,style:{maxWidth:"500px"}}),r}const fE="ref";function U$(){const t={},e=new URLSearchParams(window.location.search);for(const[n,r]of e.entries())t[n]=r;return t}function M$(){try{const e=U$()[fE];if(!e||typeof e!="string")return null;const n=e.trim().toLowerCase();return Jy(n)?n:(console.warn("Invalid referrer address in URL:",e),null)}catch(t){return console.error("Error extracting referrer from URL:",t),null}}function L$(t){if(!t||typeof t!="string")return console.error("Invalid referrer address: must be a non-empty string"),null;if(!Jy(t))return console.error("Invalid referrer address: not a valid Ethereum address"),null;const e=t.toLowerCase();try{const r=`${window.location.origin}/?${fE}=${e}`,s=e.slice(2,8).toUpperCase();return{url:r,code:s,referrerAddress:e}}catch(n){return console.error("Failed to generate referral link:",n),null}}async function Kv(t){return pE(t)?await hE(t.url,"Referral link copied to clipboard!","Failed to copy referral link"):(console.error("Invalid referral link data:",t),X.error("Invalid referral link"),!1)}async function B$(t){return!t||typeof t!="string"||!/^[A-F0-9]{6}$/.test(t)?(console.error("Invalid referral code:",t),X.error("Invalid referral code"),!1):await hE(t,"Referral code copied to clipboard!","Failed to copy referral code")}function i0(t,e){return!(!t||typeof t!="string"||!Jy(t))}function pE(t){if(!t||typeof t!="object")return!1;const{url:e,code:n,referrerAddress:r}=t;if(!i0(r))return!1;try{const i=new URL(e).searchParams.get(fE);if((i==null?void 0:i.toLowerCase())!==r.toLowerCase())return!1}catch{return!1}return!(!n||!/^[A-F0-9]{6}$/.test(n))}function $$(t){return t?`${t.slice(0,6)}...${t.slice(-4)}`:""}async function F$(t){if(!pE(t))return console.error("Invalid referral link data for sharing:",t),X.error("Invalid referral link"),!1;const e={title:"Join BlockCoop SACCO",text:"Join BlockCoop SACCO using my referral link and start earning with blockchain-powered investments!",url:t.url};if(typeof navigator<"u"&&navigator.share&&navigator.canShare&&navigator.canShare(e))try{return await navigator.share(e),X.success("Referral link shared successfully!"),!0}catch(n){return console.log("Share cancelled or failed:",n),n instanceof Error&&n.name==="AbortError"?!1:(X.info("Sharing failed, copying to clipboard instead..."),await Kv(t))}else return await Kv(t)}function H$(t,e,n){return` My BlockCoop Referral Stats:
 Total Rewards: ${t} BLOCKS
 Referrals: ${e}
 Join using my link: ${n.url}

#BlockCoop #SACCO #DeFi #Referral`}const QS=Object.freeze(Object.defineProperty({__proto__:null,REFERRER_PARAM:fE,copyReferralCode:B$,copyReferralLink:Kv,copyToClipboard:D$,copyToClipboardWithFeedback:hE,formatReferrerAddress:$$,generateReferralLink:L$,generateReferralSummaryText:H$,getReferrerFromURL:M$,getURLParams:U$,isValidReferrer:i0,shareReferralLink:F$,validateReferralLink:pE},Symbol.toStringTag,{value:"Module"})),Et=v.forwardRef(({className:t,label:e,error:n,...r},s)=>c.jsxs("div",{className:"space-y-1",children:[e&&c.jsx("label",{className:"block text-sm font-medium text-gray-700",children:e}),c.jsx("input",{className:Oi("block w-full rounded-lg border border-gray-300 bg-white px-4 py-3 min-h-[44px] text-base md:text-sm placeholder-gray-400 shadow-sm transition-colors focus:border-primary-500 focus:outline-none focus:ring-2 focus:ring-primary-500",n&&"border-error-500 focus:border-error-500 focus:ring-error-500",t),ref:s,...r}),n&&c.jsx("p",{className:"text-sm text-error-600",children:n})]}));Et.displayName="Input";function Hxe({selectedMethod:t,onMethodChange:e,packageAmount:n,disabled:r=!1}){const s=Math.round(n*149.25),i=[{id:"wallet",name:"Crypto Wallet",description:"Pay with USDT from your connected wallet",icon:Qd,amount:`${n} USDT`,features:["Instant transaction","No additional fees","Blockchain secured"],recommended:!1},{id:"mpesa",name:"M-Pesa",description:"Pay with M-Pesa mobile money",icon:nm,amount:`KES ${s.toLocaleString()}`,features:["Mobile money payment","Widely accepted in Kenya","Secure STK Push"],recommended:!0}];return c.jsxs("div",{className:"space-y-4",children:[c.jsx("div",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Choose Payment Method"}),c.jsx("div",{className:"grid gap-3 sm:gap-4",children:i.map(a=>{const o=a.icon,l=t===a.id;return c.jsx(ne,{className:`cursor-pointer transition-all duration-200 ${l?"ring-2 ring-blue-500 border-blue-500 bg-blue-50 dark:bg-blue-900/20":"hover:border-gray-300 dark:hover:border-gray-600"} ${r?"opacity-50 cursor-not-allowed":""}`,onClick:()=>!r&&e(a.id),children:c.jsx(re,{className:"p-3 sm:p-4",children:c.jsxs("div",{className:"flex items-start space-x-3",children:[c.jsx("div",{className:`p-2 rounded-lg ${l?"bg-blue-100 text-blue-600 dark:bg-blue-800 dark:text-blue-300":"bg-gray-100 text-gray-600 dark:bg-gray-700 dark:text-gray-400"}`,children:c.jsx(o,{className:"h-5 w-5"})}),c.jsxs("div",{className:"flex-1 min-w-0",children:[c.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between space-y-1 sm:space-y-0",children:[c.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center space-y-1 sm:space-y-0 sm:space-x-2",children:[c.jsx("h3",{className:"text-sm font-medium text-gray-900 dark:text-white",children:a.name}),a.recommended&&c.jsx("span",{className:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-green-100 text-green-800 dark:bg-green-800 dark:text-green-100 self-start",children:"Recommended"})]}),c.jsx("div",{className:"text-sm font-semibold text-gray-900 dark:text-white",children:a.amount})]}),c.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:a.description}),c.jsx("div",{className:"flex flex-wrap gap-1 mt-2",children:a.features.map((u,d)=>c.jsx("span",{className:"inline-flex items-center px-2 py-0.5 rounded text-xs bg-gray-100 text-gray-700 dark:bg-gray-700 dark:text-gray-300",children:u},d))})]}),c.jsx("div",{className:`w-4 h-4 rounded-full border-2 flex items-center justify-center ${l?"border-blue-500 bg-blue-500":"border-gray-300 dark:border-gray-600"}`,children:l&&c.jsx("div",{className:"w-2 h-2 rounded-full bg-white"})})]})})},a.id)})}),t==="mpesa"&&c.jsx("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-3 sm:p-4",children:c.jsxs("div",{className:"flex items-start space-x-2 sm:space-x-3",children:[c.jsx(nm,{className:"h-4 w-4 text-blue-600 dark:text-blue-400 mt-0.5 flex-shrink-0"}),c.jsxs("div",{className:"text-xs sm:text-sm text-blue-700 dark:text-blue-300",children:[c.jsx("p",{className:"font-medium mb-2",children:"M-Pesa Payment Process:"}),c.jsxs("ol",{className:"list-decimal list-inside space-y-1",children:[c.jsx("li",{children:"Enter your M-Pesa phone number"}),c.jsx("li",{children:"You'll receive an STK push notification"}),c.jsx("li",{children:"Enter your M-Pesa PIN to complete payment"}),c.jsx("li",{children:"Your USDT package will be processed automatically"})]})]})]})})]})}function V$(t,e){return function(){return t.apply(e,arguments)}}const{toString:Vxe}=Object.prototype,{getPrototypeOf:JS}=Object,{iterator:mE,toStringTag:z$}=Symbol,gE=(t=>e=>{const n=Vxe.call(e);return t[n]||(t[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),ba=t=>(t=t.toLowerCase(),e=>gE(e)===t),yE=t=>e=>typeof e===t,{isArray:Em}=Array,ky=yE("undefined");function zxe(t){return t!==null&&!ky(t)&&t.constructor!==null&&!ky(t.constructor)&&Rs(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}const W$=ba("ArrayBuffer");function Wxe(t){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(t):e=t&&t.buffer&&W$(t.buffer),e}const qxe=yE("string"),Rs=yE("function"),q$=yE("number"),wE=t=>t!==null&&typeof t=="object",Kxe=t=>t===!0||t===!1,Ex=t=>{if(gE(t)!=="object")return!1;const e=JS(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(z$ in t)&&!(mE in t)},Gxe=ba("Date"),Yxe=ba("File"),Qxe=ba("Blob"),Jxe=ba("FileList"),Zxe=t=>wE(t)&&Rs(t.pipe),Xxe=t=>{let e;return t&&(typeof FormData=="function"&&t instanceof FormData||Rs(t.append)&&((e=gE(t))==="formdata"||e==="object"&&Rs(t.toString)&&t.toString()==="[object FormData]"))},eve=ba("URLSearchParams"),[tve,nve,rve,sve]=["ReadableStream","Request","Response","Headers"].map(ba),ive=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function vw(t,e,{allOwnKeys:n=!1}={}){if(t===null||typeof t>"u")return;let r,s;if(typeof t!="object"&&(t=[t]),Em(t))for(r=0,s=t.length;r<s;r++)e.call(null,t[r],r,t);else{const i=n?Object.getOwnPropertyNames(t):Object.keys(t),a=i.length;let o;for(r=0;r<a;r++)o=i[r],e.call(null,t[o],o,t)}}function K$(t,e){e=e.toLowerCase();const n=Object.keys(t);let r=n.length,s;for(;r-- >0;)if(s=n[r],e===s.toLowerCase())return s;return null}const Yu=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:globalThis,G$=t=>!ky(t)&&t!==Yu;function vT(){const{caseless:t}=G$(this)&&this||{},e={},n=(r,s)=>{const i=t&&K$(e,s)||s;Ex(e[i])&&Ex(r)?e[i]=vT(e[i],r):Ex(r)?e[i]=vT({},r):Em(r)?e[i]=r.slice():e[i]=r};for(let r=0,s=arguments.length;r<s;r++)arguments[r]&&vw(arguments[r],n);return e}const ave=(t,e,n,{allOwnKeys:r}={})=>(vw(e,(s,i)=>{n&&Rs(s)?t[i]=V$(s,n):t[i]=s},{allOwnKeys:r}),t),ove=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),cve=(t,e,n,r)=>{t.prototype=Object.create(e.prototype,r),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:e.prototype}),n&&Object.assign(t.prototype,n)},lve=(t,e,n,r)=>{let s,i,a;const o={};if(e=e||{},t==null)return e;do{for(s=Object.getOwnPropertyNames(t),i=s.length;i-- >0;)a=s[i],(!r||r(a,t,e))&&!o[a]&&(e[a]=t[a],o[a]=!0);t=n!==!1&&JS(t)}while(t&&(!n||n(t,e))&&t!==Object.prototype);return e},uve=(t,e,n)=>{t=String(t),(n===void 0||n>t.length)&&(n=t.length),n-=e.length;const r=t.indexOf(e,n);return r!==-1&&r===n},dve=t=>{if(!t)return null;if(Em(t))return t;let e=t.length;if(!q$(e))return null;const n=new Array(e);for(;e-- >0;)n[e]=t[e];return n},hve=(t=>e=>t&&e instanceof t)(typeof Uint8Array<"u"&&JS(Uint8Array)),fve=(t,e)=>{const r=(t&&t[mE]).call(t);let s;for(;(s=r.next())&&!s.done;){const i=s.value;e.call(t,i[0],i[1])}},pve=(t,e)=>{let n;const r=[];for(;(n=t.exec(e))!==null;)r.push(n);return r},mve=ba("HTMLFormElement"),gve=t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(n,r,s){return r.toUpperCase()+s}),jR=(({hasOwnProperty:t})=>(e,n)=>t.call(e,n))(Object.prototype),yve=ba("RegExp"),Y$=(t,e)=>{const n=Object.getOwnPropertyDescriptors(t),r={};vw(n,(s,i)=>{let a;(a=e(s,i,t))!==!1&&(r[i]=a||s)}),Object.defineProperties(t,r)},wve=t=>{Y$(t,(e,n)=>{if(Rs(t)&&["arguments","caller","callee"].indexOf(n)!==-1)return!1;const r=t[n];if(Rs(r)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},bve=(t,e)=>{const n={},r=s=>{s.forEach(i=>{n[i]=!0})};return Em(t)?r(t):r(String(t).split(e)),n},xve=()=>{},vve=(t,e)=>t!=null&&Number.isFinite(t=+t)?t:e;function Eve(t){return!!(t&&Rs(t.append)&&t[z$]==="FormData"&&t[mE])}const Nve=t=>{const e=new Array(10),n=(r,s)=>{if(wE(r)){if(e.indexOf(r)>=0)return;if(!("toJSON"in r)){e[s]=r;const i=Em(r)?[]:{};return vw(r,(a,o)=>{const l=n(a,s+1);!ky(l)&&(i[o]=l)}),e[s]=void 0,i}}return r};return n(t,0)},Cve=ba("AsyncFunction"),Ave=t=>t&&(wE(t)||Rs(t))&&Rs(t.then)&&Rs(t.catch),Q$=((t,e)=>t?setImmediate:e?((n,r)=>(Yu.addEventListener("message",({source:s,data:i})=>{s===Yu&&i===n&&r.length&&r.shift()()},!1),s=>{r.push(s),Yu.postMessage(n,"*")}))(`axios@${Math.random()}`,[]):n=>setTimeout(n))(typeof setImmediate=="function",Rs(Yu.postMessage)),Tve=typeof queueMicrotask<"u"?queueMicrotask.bind(Yu):typeof process<"u"&&process.nextTick||Q$,Sve=t=>t!=null&&Rs(t[mE]),Q={isArray:Em,isArrayBuffer:W$,isBuffer:zxe,isFormData:Xxe,isArrayBufferView:Wxe,isString:qxe,isNumber:q$,isBoolean:Kxe,isObject:wE,isPlainObject:Ex,isReadableStream:tve,isRequest:nve,isResponse:rve,isHeaders:sve,isUndefined:ky,isDate:Gxe,isFile:Yxe,isBlob:Qxe,isRegExp:yve,isFunction:Rs,isStream:Zxe,isURLSearchParams:eve,isTypedArray:hve,isFileList:Jxe,forEach:vw,merge:vT,extend:ave,trim:ive,stripBOM:ove,inherits:cve,toFlatObject:lve,kindOf:gE,kindOfTest:ba,endsWith:uve,toArray:dve,forEachEntry:fve,matchAll:pve,isHTMLForm:mve,hasOwnProperty:jR,hasOwnProp:jR,reduceDescriptors:Y$,freezeMethods:wve,toObjectSet:bve,toCamelCase:gve,noop:xve,toFiniteNumber:vve,findKey:K$,global:Yu,isContextDefined:G$,isSpecCompliantForm:Eve,toJSONObject:Nve,isAsyncFn:Cve,isThenable:Ave,setImmediate:Q$,asap:Tve,isIterable:Sve};function Ye(t,e,n,r,s){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=t,this.name="AxiosError",e&&(this.code=e),n&&(this.config=n),r&&(this.request=r),s&&(this.response=s,this.status=s.status?s.status:null)}Q.inherits(Ye,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:Q.toJSONObject(this.config),code:this.code,status:this.status}}});const J$=Ye.prototype,Z$={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(t=>{Z$[t]={value:t}});Object.defineProperties(Ye,Z$);Object.defineProperty(J$,"isAxiosError",{value:!0});Ye.from=(t,e,n,r,s,i)=>{const a=Object.create(J$);return Q.toFlatObject(t,a,function(l){return l!==Error.prototype},o=>o!=="isAxiosError"),Ye.call(a,t.message,e,n,r,s),a.cause=t,a.name=t.name,i&&Object.assign(a,i),a};const kve=null;function ET(t){return Q.isPlainObject(t)||Q.isArray(t)}function X$(t){return Q.endsWith(t,"[]")?t.slice(0,-2):t}function OR(t,e,n){return t?t.concat(e).map(function(s,i){return s=X$(s),!n&&i?"["+s+"]":s}).join(n?".":""):e}function _ve(t){return Q.isArray(t)&&!t.some(ET)}const Ive=Q.toFlatObject(Q,{},null,function(e){return/^is[A-Z]/.test(e)});function bE(t,e,n){if(!Q.isObject(t))throw new TypeError("target must be an object");e=e||new FormData,n=Q.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(m,y){return!Q.isUndefined(y[m])});const r=n.metaTokens,s=n.visitor||d,i=n.dots,a=n.indexes,l=(n.Blob||typeof Blob<"u"&&Blob)&&Q.isSpecCompliantForm(e);if(!Q.isFunction(s))throw new TypeError("visitor must be a function");function u(g){if(g===null)return"";if(Q.isDate(g))return g.toISOString();if(Q.isBoolean(g))return g.toString();if(!l&&Q.isBlob(g))throw new Ye("Blob is not supported. Use a Buffer instead.");return Q.isArrayBuffer(g)||Q.isTypedArray(g)?l&&typeof Blob=="function"?new Blob([g]):Buffer.from(g):g}function d(g,m,y){let b=g;if(g&&!y&&typeof g=="object"){if(Q.endsWith(m,"{}"))m=r?m:m.slice(0,-2),g=JSON.stringify(g);else if(Q.isArray(g)&&_ve(g)||(Q.isFileList(g)||Q.endsWith(m,"[]"))&&(b=Q.toArray(g)))return m=X$(m),b.forEach(function(x,A){!(Q.isUndefined(x)||x===null)&&e.append(a===!0?OR([m],A,i):a===null?m:m+"[]",u(x))}),!1}return ET(g)?!0:(e.append(OR(y,m,i),u(g)),!1)}const h=[],f=Object.assign(Ive,{defaultVisitor:d,convertValue:u,isVisitable:ET});function p(g,m){if(!Q.isUndefined(g)){if(h.indexOf(g)!==-1)throw Error("Circular reference detected in "+m.join("."));h.push(g),Q.forEach(g,function(b,w){(!(Q.isUndefined(b)||b===null)&&s.call(e,b,Q.isString(w)?w.trim():w,m,f))===!0&&p(b,m?m.concat(w):[w])}),h.pop()}}if(!Q.isObject(t))throw new TypeError("data must be an object");return p(t),e}function DR(t){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(r){return e[r]})}function ZS(t,e){this._pairs=[],t&&bE(t,this,e)}const e9=ZS.prototype;e9.append=function(e,n){this._pairs.push([e,n])};e9.toString=function(e){const n=e?function(r){return e.call(this,r,DR)}:DR;return this._pairs.map(function(s){return n(s[0])+"="+n(s[1])},"").join("&")};function Pve(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function t9(t,e,n){if(!e)return t;const r=n&&n.encode||Pve;Q.isFunction(n)&&(n={serialize:n});const s=n&&n.serialize;let i;if(s?i=s(e,n):i=Q.isURLSearchParams(e)?e.toString():new ZS(e,n).toString(r),i){const a=t.indexOf("#");a!==-1&&(t=t.slice(0,a)),t+=(t.indexOf("?")===-1?"?":"&")+i}return t}class UR{constructor(){this.handlers=[]}use(e,n,r){return this.handlers.push({fulfilled:e,rejected:n,synchronous:r?r.synchronous:!1,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){Q.forEach(this.handlers,function(r){r!==null&&e(r)})}}const n9={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},Rve=typeof URLSearchParams<"u"?URLSearchParams:ZS,jve=typeof FormData<"u"?FormData:null,Ove=typeof Blob<"u"?Blob:null,Dve={isBrowser:!0,classes:{URLSearchParams:Rve,FormData:jve,Blob:Ove},protocols:["http","https","file","blob","url","data"]},XS=typeof window<"u"&&typeof document<"u",NT=typeof navigator=="object"&&navigator||void 0,Uve=XS&&(!NT||["ReactNative","NativeScript","NS"].indexOf(NT.product)<0),Mve=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",Lve=XS&&window.location.href||"http://localhost",Bve=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:XS,hasStandardBrowserEnv:Uve,hasStandardBrowserWebWorkerEnv:Mve,navigator:NT,origin:Lve},Symbol.toStringTag,{value:"Module"})),kr={...Bve,...Dve};function $ve(t,e){return bE(t,new kr.classes.URLSearchParams,Object.assign({visitor:function(n,r,s,i){return kr.isNode&&Q.isBuffer(n)?(this.append(r,n.toString("base64")),!1):i.defaultVisitor.apply(this,arguments)}},e))}function Fve(t){return Q.matchAll(/\w+|\[(\w*)]/g,t).map(e=>e[0]==="[]"?"":e[1]||e[0])}function Hve(t){const e={},n=Object.keys(t);let r;const s=n.length;let i;for(r=0;r<s;r++)i=n[r],e[i]=t[i];return e}function r9(t){function e(n,r,s,i){let a=n[i++];if(a==="__proto__")return!0;const o=Number.isFinite(+a),l=i>=n.length;return a=!a&&Q.isArray(s)?s.length:a,l?(Q.hasOwnProp(s,a)?s[a]=[s[a],r]:s[a]=r,!o):((!s[a]||!Q.isObject(s[a]))&&(s[a]=[]),e(n,r,s[a],i)&&Q.isArray(s[a])&&(s[a]=Hve(s[a])),!o)}if(Q.isFormData(t)&&Q.isFunction(t.entries)){const n={};return Q.forEachEntry(t,(r,s)=>{e(Fve(r),s,n,0)}),n}return null}function Vve(t,e,n){if(Q.isString(t))try{return(e||JSON.parse)(t),Q.trim(t)}catch(r){if(r.name!=="SyntaxError")throw r}return(n||JSON.stringify)(t)}const Ew={transitional:n9,adapter:["xhr","http","fetch"],transformRequest:[function(e,n){const r=n.getContentType()||"",s=r.indexOf("application/json")>-1,i=Q.isObject(e);if(i&&Q.isHTMLForm(e)&&(e=new FormData(e)),Q.isFormData(e))return s?JSON.stringify(r9(e)):e;if(Q.isArrayBuffer(e)||Q.isBuffer(e)||Q.isStream(e)||Q.isFile(e)||Q.isBlob(e)||Q.isReadableStream(e))return e;if(Q.isArrayBufferView(e))return e.buffer;if(Q.isURLSearchParams(e))return n.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let o;if(i){if(r.indexOf("application/x-www-form-urlencoded")>-1)return $ve(e,this.formSerializer).toString();if((o=Q.isFileList(e))||r.indexOf("multipart/form-data")>-1){const l=this.env&&this.env.FormData;return bE(o?{"files[]":e}:e,l&&new l,this.formSerializer)}}return i||s?(n.setContentType("application/json",!1),Vve(e)):e}],transformResponse:[function(e){const n=this.transitional||Ew.transitional,r=n&&n.forcedJSONParsing,s=this.responseType==="json";if(Q.isResponse(e)||Q.isReadableStream(e))return e;if(e&&Q.isString(e)&&(r&&!this.responseType||s)){const a=!(n&&n.silentJSONParsing)&&s;try{return JSON.parse(e)}catch(o){if(a)throw o.name==="SyntaxError"?Ye.from(o,Ye.ERR_BAD_RESPONSE,this,null,this.response):o}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:kr.classes.FormData,Blob:kr.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};Q.forEach(["delete","get","head","post","put","patch"],t=>{Ew.headers[t]={}});const zve=Q.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),Wve=t=>{const e={};let n,r,s;return t&&t.split(`
`).forEach(function(a){s=a.indexOf(":"),n=a.substring(0,s).trim().toLowerCase(),r=a.substring(s+1).trim(),!(!n||e[n]&&zve[n])&&(n==="set-cookie"?e[n]?e[n].push(r):e[n]=[r]:e[n]=e[n]?e[n]+", "+r:r)}),e},MR=Symbol("internals");function og(t){return t&&String(t).trim().toLowerCase()}function Nx(t){return t===!1||t==null?t:Q.isArray(t)?t.map(Nx):String(t)}function qve(t){const e=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=n.exec(t);)e[r[1]]=r[2];return e}const Kve=t=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim());function vN(t,e,n,r,s){if(Q.isFunction(r))return r.call(this,e,n);if(s&&(e=n),!!Q.isString(e)){if(Q.isString(r))return e.indexOf(r)!==-1;if(Q.isRegExp(r))return r.test(e)}}function Gve(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,n,r)=>n.toUpperCase()+r)}function Yve(t,e){const n=Q.toCamelCase(" "+e);["get","set","has"].forEach(r=>{Object.defineProperty(t,r+n,{value:function(s,i,a){return this[r].call(this,e,s,i,a)},configurable:!0})})}let js=class{constructor(e){e&&this.set(e)}set(e,n,r){const s=this;function i(o,l,u){const d=og(l);if(!d)throw new Error("header name must be a non-empty string");const h=Q.findKey(s,d);(!h||s[h]===void 0||u===!0||u===void 0&&s[h]!==!1)&&(s[h||l]=Nx(o))}const a=(o,l)=>Q.forEach(o,(u,d)=>i(u,d,l));if(Q.isPlainObject(e)||e instanceof this.constructor)a(e,n);else if(Q.isString(e)&&(e=e.trim())&&!Kve(e))a(Wve(e),n);else if(Q.isObject(e)&&Q.isIterable(e)){let o={},l,u;for(const d of e){if(!Q.isArray(d))throw TypeError("Object iterator must return a key-value pair");o[u=d[0]]=(l=o[u])?Q.isArray(l)?[...l,d[1]]:[l,d[1]]:d[1]}a(o,n)}else e!=null&&i(n,e,r);return this}get(e,n){if(e=og(e),e){const r=Q.findKey(this,e);if(r){const s=this[r];if(!n)return s;if(n===!0)return qve(s);if(Q.isFunction(n))return n.call(this,s,r);if(Q.isRegExp(n))return n.exec(s);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,n){if(e=og(e),e){const r=Q.findKey(this,e);return!!(r&&this[r]!==void 0&&(!n||vN(this,this[r],r,n)))}return!1}delete(e,n){const r=this;let s=!1;function i(a){if(a=og(a),a){const o=Q.findKey(r,a);o&&(!n||vN(r,r[o],o,n))&&(delete r[o],s=!0)}}return Q.isArray(e)?e.forEach(i):i(e),s}clear(e){const n=Object.keys(this);let r=n.length,s=!1;for(;r--;){const i=n[r];(!e||vN(this,this[i],i,e,!0))&&(delete this[i],s=!0)}return s}normalize(e){const n=this,r={};return Q.forEach(this,(s,i)=>{const a=Q.findKey(r,i);if(a){n[a]=Nx(s),delete n[i];return}const o=e?Gve(i):String(i).trim();o!==i&&delete n[i],n[o]=Nx(s),r[o]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const n=Object.create(null);return Q.forEach(this,(r,s)=>{r!=null&&r!==!1&&(n[s]=e&&Q.isArray(r)?r.join(", "):r)}),n}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,n])=>e+": "+n).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...n){const r=new this(e);return n.forEach(s=>r.set(s)),r}static accessor(e){const r=(this[MR]=this[MR]={accessors:{}}).accessors,s=this.prototype;function i(a){const o=og(a);r[o]||(Yve(s,a),r[o]=!0)}return Q.isArray(e)?e.forEach(i):i(e),this}};js.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);Q.reduceDescriptors(js.prototype,({value:t},e)=>{let n=e[0].toUpperCase()+e.slice(1);return{get:()=>t,set(r){this[n]=r}}});Q.freezeMethods(js);function EN(t,e){const n=this||Ew,r=e||n,s=js.from(r.headers);let i=r.data;return Q.forEach(t,function(o){i=o.call(n,i,s.normalize(),e?e.status:void 0)}),s.normalize(),i}function s9(t){return!!(t&&t.__CANCEL__)}function Nm(t,e,n){Ye.call(this,t??"canceled",Ye.ERR_CANCELED,e,n),this.name="CanceledError"}Q.inherits(Nm,Ye,{__CANCEL__:!0});function i9(t,e,n){const r=n.config.validateStatus;!n.status||!r||r(n.status)?t(n):e(new Ye("Request failed with status code "+n.status,[Ye.ERR_BAD_REQUEST,Ye.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}function Qve(t){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return e&&e[1]||""}function Jve(t,e){t=t||10;const n=new Array(t),r=new Array(t);let s=0,i=0,a;return e=e!==void 0?e:1e3,function(l){const u=Date.now(),d=r[i];a||(a=u),n[s]=l,r[s]=u;let h=i,f=0;for(;h!==s;)f+=n[h++],h=h%t;if(s=(s+1)%t,s===i&&(i=(i+1)%t),u-a<e)return;const p=d&&u-d;return p?Math.round(f*1e3/p):void 0}}function Zve(t,e){let n=0,r=1e3/e,s,i;const a=(u,d=Date.now())=>{n=d,s=null,i&&(clearTimeout(i),i=null),t.apply(null,u)};return[(...u)=>{const d=Date.now(),h=d-n;h>=r?a(u,d):(s=u,i||(i=setTimeout(()=>{i=null,a(s)},r-h)))},()=>s&&a(s)]}const Gv=(t,e,n=3)=>{let r=0;const s=Jve(50,250);return Zve(i=>{const a=i.loaded,o=i.lengthComputable?i.total:void 0,l=a-r,u=s(l),d=a<=o;r=a;const h={loaded:a,total:o,progress:o?a/o:void 0,bytes:l,rate:u||void 0,estimated:u&&o&&d?(o-a)/u:void 0,event:i,lengthComputable:o!=null,[e?"download":"upload"]:!0};t(h)},n)},LR=(t,e)=>{const n=t!=null;return[r=>e[0]({lengthComputable:n,total:t,loaded:r}),e[1]]},BR=t=>(...e)=>Q.asap(()=>t(...e)),Xve=kr.hasStandardBrowserEnv?((t,e)=>n=>(n=new URL(n,kr.origin),t.protocol===n.protocol&&t.host===n.host&&(e||t.port===n.port)))(new URL(kr.origin),kr.navigator&&/(msie|trident)/i.test(kr.navigator.userAgent)):()=>!0,e1e=kr.hasStandardBrowserEnv?{write(t,e,n,r,s,i){const a=[t+"="+encodeURIComponent(e)];Q.isNumber(n)&&a.push("expires="+new Date(n).toGMTString()),Q.isString(r)&&a.push("path="+r),Q.isString(s)&&a.push("domain="+s),i===!0&&a.push("secure"),document.cookie=a.join("; ")},read(t){const e=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove(t){this.write(t,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function t1e(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function n1e(t,e){return e?t.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):t}function a9(t,e,n){let r=!t1e(e);return t&&(r||n==!1)?n1e(t,e):e}const $R=t=>t instanceof js?{...t}:t;function Zd(t,e){e=e||{};const n={};function r(u,d,h,f){return Q.isPlainObject(u)&&Q.isPlainObject(d)?Q.merge.call({caseless:f},u,d):Q.isPlainObject(d)?Q.merge({},d):Q.isArray(d)?d.slice():d}function s(u,d,h,f){if(Q.isUndefined(d)){if(!Q.isUndefined(u))return r(void 0,u,h,f)}else return r(u,d,h,f)}function i(u,d){if(!Q.isUndefined(d))return r(void 0,d)}function a(u,d){if(Q.isUndefined(d)){if(!Q.isUndefined(u))return r(void 0,u)}else return r(void 0,d)}function o(u,d,h){if(h in e)return r(u,d);if(h in t)return r(void 0,u)}const l={url:i,method:i,data:i,baseURL:a,transformRequest:a,transformResponse:a,paramsSerializer:a,timeout:a,timeoutMessage:a,withCredentials:a,withXSRFToken:a,adapter:a,responseType:a,xsrfCookieName:a,xsrfHeaderName:a,onUploadProgress:a,onDownloadProgress:a,decompress:a,maxContentLength:a,maxBodyLength:a,beforeRedirect:a,transport:a,httpAgent:a,httpsAgent:a,cancelToken:a,socketPath:a,responseEncoding:a,validateStatus:o,headers:(u,d,h)=>s($R(u),$R(d),h,!0)};return Q.forEach(Object.keys(Object.assign({},t,e)),function(d){const h=l[d]||s,f=h(t[d],e[d],d);Q.isUndefined(f)&&h!==o||(n[d]=f)}),n}const o9=t=>{const e=Zd({},t);let{data:n,withXSRFToken:r,xsrfHeaderName:s,xsrfCookieName:i,headers:a,auth:o}=e;e.headers=a=js.from(a),e.url=t9(a9(e.baseURL,e.url,e.allowAbsoluteUrls),t.params,t.paramsSerializer),o&&a.set("Authorization","Basic "+btoa((o.username||"")+":"+(o.password?unescape(encodeURIComponent(o.password)):"")));let l;if(Q.isFormData(n)){if(kr.hasStandardBrowserEnv||kr.hasStandardBrowserWebWorkerEnv)a.setContentType(void 0);else if((l=a.getContentType())!==!1){const[u,...d]=l?l.split(";").map(h=>h.trim()).filter(Boolean):[];a.setContentType([u||"multipart/form-data",...d].join("; "))}}if(kr.hasStandardBrowserEnv&&(r&&Q.isFunction(r)&&(r=r(e)),r||r!==!1&&Xve(e.url))){const u=s&&i&&e1e.read(i);u&&a.set(s,u)}return e},r1e=typeof XMLHttpRequest<"u",s1e=r1e&&function(t){return new Promise(function(n,r){const s=o9(t);let i=s.data;const a=js.from(s.headers).normalize();let{responseType:o,onUploadProgress:l,onDownloadProgress:u}=s,d,h,f,p,g;function m(){p&&p(),g&&g(),s.cancelToken&&s.cancelToken.unsubscribe(d),s.signal&&s.signal.removeEventListener("abort",d)}let y=new XMLHttpRequest;y.open(s.method.toUpperCase(),s.url,!0),y.timeout=s.timeout;function b(){if(!y)return;const x=js.from("getAllResponseHeaders"in y&&y.getAllResponseHeaders()),T={data:!o||o==="text"||o==="json"?y.responseText:y.response,status:y.status,statusText:y.statusText,headers:x,config:t,request:y};i9(function(P){n(P),m()},function(P){r(P),m()},T),y=null}"onloadend"in y?y.onloadend=b:y.onreadystatechange=function(){!y||y.readyState!==4||y.status===0&&!(y.responseURL&&y.responseURL.indexOf("file:")===0)||setTimeout(b)},y.onabort=function(){y&&(r(new Ye("Request aborted",Ye.ECONNABORTED,t,y)),y=null)},y.onerror=function(){r(new Ye("Network Error",Ye.ERR_NETWORK,t,y)),y=null},y.ontimeout=function(){let A=s.timeout?"timeout of "+s.timeout+"ms exceeded":"timeout exceeded";const T=s.transitional||n9;s.timeoutErrorMessage&&(A=s.timeoutErrorMessage),r(new Ye(A,T.clarifyTimeoutError?Ye.ETIMEDOUT:Ye.ECONNABORTED,t,y)),y=null},i===void 0&&a.setContentType(null),"setRequestHeader"in y&&Q.forEach(a.toJSON(),function(A,T){y.setRequestHeader(T,A)}),Q.isUndefined(s.withCredentials)||(y.withCredentials=!!s.withCredentials),o&&o!=="json"&&(y.responseType=s.responseType),u&&([f,g]=Gv(u,!0),y.addEventListener("progress",f)),l&&y.upload&&([h,p]=Gv(l),y.upload.addEventListener("progress",h),y.upload.addEventListener("loadend",p)),(s.cancelToken||s.signal)&&(d=x=>{y&&(r(!x||x.type?new Nm(null,t,y):x),y.abort(),y=null)},s.cancelToken&&s.cancelToken.subscribe(d),s.signal&&(s.signal.aborted?d():s.signal.addEventListener("abort",d)));const w=Qve(s.url);if(w&&kr.protocols.indexOf(w)===-1){r(new Ye("Unsupported protocol "+w+":",Ye.ERR_BAD_REQUEST,t));return}y.send(i||null)})},i1e=(t,e)=>{const{length:n}=t=t?t.filter(Boolean):[];if(e||n){let r=new AbortController,s;const i=function(u){if(!s){s=!0,o();const d=u instanceof Error?u:this.reason;r.abort(d instanceof Ye?d:new Nm(d instanceof Error?d.message:d))}};let a=e&&setTimeout(()=>{a=null,i(new Ye(`timeout ${e} of ms exceeded`,Ye.ETIMEDOUT))},e);const o=()=>{t&&(a&&clearTimeout(a),a=null,t.forEach(u=>{u.unsubscribe?u.unsubscribe(i):u.removeEventListener("abort",i)}),t=null)};t.forEach(u=>u.addEventListener("abort",i));const{signal:l}=r;return l.unsubscribe=()=>Q.asap(o),l}},a1e=function*(t,e){let n=t.byteLength;if(n<e){yield t;return}let r=0,s;for(;r<n;)s=r+e,yield t.slice(r,s),r=s},o1e=async function*(t,e){for await(const n of c1e(t))yield*a1e(n,e)},c1e=async function*(t){if(t[Symbol.asyncIterator]){yield*t;return}const e=t.getReader();try{for(;;){const{done:n,value:r}=await e.read();if(n)break;yield r}}finally{await e.cancel()}},FR=(t,e,n,r)=>{const s=o1e(t,e);let i=0,a,o=l=>{a||(a=!0,r&&r(l))};return new ReadableStream({async pull(l){try{const{done:u,value:d}=await s.next();if(u){o(),l.close();return}let h=d.byteLength;if(n){let f=i+=h;n(f)}l.enqueue(new Uint8Array(d))}catch(u){throw o(u),u}},cancel(l){return o(l),s.return()}},{highWaterMark:2})},xE=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",c9=xE&&typeof ReadableStream=="function",l1e=xE&&(typeof TextEncoder=="function"?(t=>e=>t.encode(e))(new TextEncoder):async t=>new Uint8Array(await new Response(t).arrayBuffer())),l9=(t,...e)=>{try{return!!t(...e)}catch{return!1}},u1e=c9&&l9(()=>{let t=!1;const e=new Request(kr.origin,{body:new ReadableStream,method:"POST",get duplex(){return t=!0,"half"}}).headers.has("Content-Type");return t&&!e}),HR=64*1024,CT=c9&&l9(()=>Q.isReadableStream(new Response("").body)),Yv={stream:CT&&(t=>t.body)};xE&&(t=>{["text","arrayBuffer","blob","formData","stream"].forEach(e=>{!Yv[e]&&(Yv[e]=Q.isFunction(t[e])?n=>n[e]():(n,r)=>{throw new Ye(`Response type '${e}' is not supported`,Ye.ERR_NOT_SUPPORT,r)})})})(new Response);const d1e=async t=>{if(t==null)return 0;if(Q.isBlob(t))return t.size;if(Q.isSpecCompliantForm(t))return(await new Request(kr.origin,{method:"POST",body:t}).arrayBuffer()).byteLength;if(Q.isArrayBufferView(t)||Q.isArrayBuffer(t))return t.byteLength;if(Q.isURLSearchParams(t)&&(t=t+""),Q.isString(t))return(await l1e(t)).byteLength},h1e=async(t,e)=>{const n=Q.toFiniteNumber(t.getContentLength());return n??d1e(e)},f1e=xE&&(async t=>{let{url:e,method:n,data:r,signal:s,cancelToken:i,timeout:a,onDownloadProgress:o,onUploadProgress:l,responseType:u,headers:d,withCredentials:h="same-origin",fetchOptions:f}=o9(t);u=u?(u+"").toLowerCase():"text";let p=i1e([s,i&&i.toAbortSignal()],a),g;const m=p&&p.unsubscribe&&(()=>{p.unsubscribe()});let y;try{if(l&&u1e&&n!=="get"&&n!=="head"&&(y=await h1e(d,r))!==0){let T=new Request(e,{method:"POST",body:r,duplex:"half"}),j;if(Q.isFormData(r)&&(j=T.headers.get("content-type"))&&d.setContentType(j),T.body){const[P,S]=LR(y,Gv(BR(l)));r=FR(T.body,HR,P,S)}}Q.isString(h)||(h=h?"include":"omit");const b="credentials"in Request.prototype;g=new Request(e,{...f,signal:p,method:n.toUpperCase(),headers:d.normalize().toJSON(),body:r,duplex:"half",credentials:b?h:void 0});let w=await fetch(g,f);const x=CT&&(u==="stream"||u==="response");if(CT&&(o||x&&m)){const T={};["status","statusText","headers"].forEach(E=>{T[E]=w[E]});const j=Q.toFiniteNumber(w.headers.get("content-length")),[P,S]=o&&LR(j,Gv(BR(o),!0))||[];w=new Response(FR(w.body,HR,P,()=>{S&&S(),m&&m()}),T)}u=u||"text";let A=await Yv[Q.findKey(Yv,u)||"text"](w,t);return!x&&m&&m(),await new Promise((T,j)=>{i9(T,j,{data:A,headers:js.from(w.headers),status:w.status,statusText:w.statusText,config:t,request:g})})}catch(b){throw m&&m(),b&&b.name==="TypeError"&&/Load failed|fetch/i.test(b.message)?Object.assign(new Ye("Network Error",Ye.ERR_NETWORK,t,g),{cause:b.cause||b}):Ye.from(b,b&&b.code,t,g)}}),AT={http:kve,xhr:s1e,fetch:f1e};Q.forEach(AT,(t,e)=>{if(t){try{Object.defineProperty(t,"name",{value:e})}catch{}Object.defineProperty(t,"adapterName",{value:e})}});const VR=t=>`- ${t}`,p1e=t=>Q.isFunction(t)||t===null||t===!1,u9={getAdapter:t=>{t=Q.isArray(t)?t:[t];const{length:e}=t;let n,r;const s={};for(let i=0;i<e;i++){n=t[i];let a;if(r=n,!p1e(n)&&(r=AT[(a=String(n)).toLowerCase()],r===void 0))throw new Ye(`Unknown adapter '${a}'`);if(r)break;s[a||"#"+i]=r}if(!r){const i=Object.entries(s).map(([o,l])=>`adapter ${o} `+(l===!1?"is not supported by the environment":"is not available in the build"));let a=e?i.length>1?`since :
`+i.map(VR).join(`
`):" "+VR(i[0]):"as no adapter specified";throw new Ye("There is no suitable adapter to dispatch the request "+a,"ERR_NOT_SUPPORT")}return r},adapters:AT};function NN(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new Nm(null,t)}function zR(t){return NN(t),t.headers=js.from(t.headers),t.data=EN.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),u9.getAdapter(t.adapter||Ew.adapter)(t).then(function(r){return NN(t),r.data=EN.call(t,t.transformResponse,r),r.headers=js.from(r.headers),r},function(r){return s9(r)||(NN(t),r&&r.response&&(r.response.data=EN.call(t,t.transformResponse,r.response),r.response.headers=js.from(r.response.headers))),Promise.reject(r)})}const d9="1.10.0",vE={};["object","boolean","number","function","string","symbol"].forEach((t,e)=>{vE[t]=function(r){return typeof r===t||"a"+(e<1?"n ":" ")+t}});const WR={};vE.transitional=function(e,n,r){function s(i,a){return"[Axios v"+d9+"] Transitional option '"+i+"'"+a+(r?". "+r:"")}return(i,a,o)=>{if(e===!1)throw new Ye(s(a," has been removed"+(n?" in "+n:"")),Ye.ERR_DEPRECATED);return n&&!WR[a]&&(WR[a]=!0,console.warn(s(a," has been deprecated since v"+n+" and will be removed in the near future"))),e?e(i,a,o):!0}};vE.spelling=function(e){return(n,r)=>(console.warn(`${r} is likely a misspelling of ${e}`),!0)};function m1e(t,e,n){if(typeof t!="object")throw new Ye("options must be an object",Ye.ERR_BAD_OPTION_VALUE);const r=Object.keys(t);let s=r.length;for(;s-- >0;){const i=r[s],a=e[i];if(a){const o=t[i],l=o===void 0||a(o,i,t);if(l!==!0)throw new Ye("option "+i+" must be "+l,Ye.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new Ye("Unknown option "+i,Ye.ERR_BAD_OPTION)}}const Cx={assertOptions:m1e,validators:vE},ka=Cx.validators;let Sd=class{constructor(e){this.defaults=e||{},this.interceptors={request:new UR,response:new UR}}async request(e,n){try{return await this._request(e,n)}catch(r){if(r instanceof Error){let s={};Error.captureStackTrace?Error.captureStackTrace(s):s=new Error;const i=s.stack?s.stack.replace(/^.+\n/,""):"";try{r.stack?i&&!String(r.stack).endsWith(i.replace(/^.+\n.+\n/,""))&&(r.stack+=`
`+i):r.stack=i}catch{}}throw r}}_request(e,n){typeof e=="string"?(n=n||{},n.url=e):n=e||{},n=Zd(this.defaults,n);const{transitional:r,paramsSerializer:s,headers:i}=n;r!==void 0&&Cx.assertOptions(r,{silentJSONParsing:ka.transitional(ka.boolean),forcedJSONParsing:ka.transitional(ka.boolean),clarifyTimeoutError:ka.transitional(ka.boolean)},!1),s!=null&&(Q.isFunction(s)?n.paramsSerializer={serialize:s}:Cx.assertOptions(s,{encode:ka.function,serialize:ka.function},!0)),n.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?n.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:n.allowAbsoluteUrls=!0),Cx.assertOptions(n,{baseUrl:ka.spelling("baseURL"),withXsrfToken:ka.spelling("withXSRFToken")},!0),n.method=(n.method||this.defaults.method||"get").toLowerCase();let a=i&&Q.merge(i.common,i[n.method]);i&&Q.forEach(["delete","get","head","post","put","patch","common"],g=>{delete i[g]}),n.headers=js.concat(a,i);const o=[];let l=!0;this.interceptors.request.forEach(function(m){typeof m.runWhen=="function"&&m.runWhen(n)===!1||(l=l&&m.synchronous,o.unshift(m.fulfilled,m.rejected))});const u=[];this.interceptors.response.forEach(function(m){u.push(m.fulfilled,m.rejected)});let d,h=0,f;if(!l){const g=[zR.bind(this),void 0];for(g.unshift.apply(g,o),g.push.apply(g,u),f=g.length,d=Promise.resolve(n);h<f;)d=d.then(g[h++],g[h++]);return d}f=o.length;let p=n;for(h=0;h<f;){const g=o[h++],m=o[h++];try{p=g(p)}catch(y){m.call(this,y);break}}try{d=zR.call(this,p)}catch(g){return Promise.reject(g)}for(h=0,f=u.length;h<f;)d=d.then(u[h++],u[h++]);return d}getUri(e){e=Zd(this.defaults,e);const n=a9(e.baseURL,e.url,e.allowAbsoluteUrls);return t9(n,e.params,e.paramsSerializer)}};Q.forEach(["delete","get","head","options"],function(e){Sd.prototype[e]=function(n,r){return this.request(Zd(r||{},{method:e,url:n,data:(r||{}).data}))}});Q.forEach(["post","put","patch"],function(e){function n(r){return function(i,a,o){return this.request(Zd(o||{},{method:e,headers:r?{"Content-Type":"multipart/form-data"}:{},url:i,data:a}))}}Sd.prototype[e]=n(),Sd.prototype[e+"Form"]=n(!0)});let g1e=class h9{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(i){n=i});const r=this;this.promise.then(s=>{if(!r._listeners)return;let i=r._listeners.length;for(;i-- >0;)r._listeners[i](s);r._listeners=null}),this.promise.then=s=>{let i;const a=new Promise(o=>{r.subscribe(o),i=o}).then(s);return a.cancel=function(){r.unsubscribe(i)},a},e(function(i,a,o){r.reason||(r.reason=new Nm(i,a,o),n(r.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const n=this._listeners.indexOf(e);n!==-1&&this._listeners.splice(n,1)}toAbortSignal(){const e=new AbortController,n=r=>{e.abort(r)};return this.subscribe(n),e.signal.unsubscribe=()=>this.unsubscribe(n),e.signal}static source(){let e;return{token:new h9(function(s){e=s}),cancel:e}}};function y1e(t){return function(n){return t.apply(null,n)}}function w1e(t){return Q.isObject(t)&&t.isAxiosError===!0}const TT={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(TT).forEach(([t,e])=>{TT[e]=t});function f9(t){const e=new Sd(t),n=V$(Sd.prototype.request,e);return Q.extend(n,Sd.prototype,e,{allOwnKeys:!0}),Q.extend(n,e,null,{allOwnKeys:!0}),n.create=function(s){return f9(Zd(t,s))},n}const En=f9(Ew);En.Axios=Sd;En.CanceledError=Nm;En.CancelToken=g1e;En.isCancel=s9;En.VERSION=d9;En.toFormData=bE;En.AxiosError=Ye;En.Cancel=En.CanceledError;En.all=function(e){return Promise.all(e)};En.spread=y1e;En.isAxiosError=w1e;En.mergeConfig=Zd;En.AxiosHeaders=js;En.formToJSON=t=>r9(Q.isHTMLForm(t)?new FormData(t):t);En.getAdapter=u9.getAdapter;En.HttpStatusCode=TT;En.default=En;const{Axios:Y2e,AxiosError:Q2e,CanceledError:J2e,isCancel:Z2e,CancelToken:X2e,VERSION:eNe,all:tNe,Cancel:nNe,isAxiosError:rNe,spread:sNe,toFormData:iNe,AxiosHeaders:aNe,HttpStatusCode:oNe,formToJSON:cNe,getAdapter:lNe,mergeConfig:uNe}=En,qR="https://api.blockcoopsacco.com/api";class b1e{constructor(){W(this,"apiClient",En.create({baseURL:qR,timeout:3e4,headers:{"Content-Type":"application/json"}}));this.apiClient.interceptors.request.use(e=>(console.log("M-Pesa API Request:",{method:e.method,url:e.url,data:e.data}),e),e=>(console.error("M-Pesa API Request Error:",e),Promise.reject(e))),this.apiClient.interceptors.response.use(e=>(console.log("M-Pesa API Response:",{status:e.status,data:e.data}),e),e=>{var n,r;return console.error("M-Pesa API Response Error:",{status:(n=e.response)==null?void 0:n.status,data:(r=e.response)==null?void 0:r.data,message:e.message}),Promise.reject(e)})}async initiatePayment(e){var n,r,s,i,a,o,l,u;try{console.log(" Sending M-Pesa payment request:",{url:`${qR}/mpesa/initiate-payment`,data:e,dataTypes:{walletAddress:typeof e.walletAddress,packageId:typeof e.packageId,phoneNumber:typeof e.phoneNumber,amount:typeof e.amount,referrerAddress:typeof e.referrerAddress}});const d=await this.apiClient.post("/mpesa/initiate-payment",e);return console.log(" M-Pesa payment response:",d.data),d.data}catch(d){console.error(" Error initiating M-Pesa payment:",d),console.error(" Error response:",(n=d.response)==null?void 0:n.data),console.error(" Error status:",(r=d.response)==null?void 0:r.status);let h="Failed to initiate payment";return d.code==="ERR_NETWORK"||d.code==="ECONNREFUSED"?h="Unable to connect to M-Pesa service. Please check your internet connection and try again.":d.code==="ENOTFOUND"?h="M-Pesa service is currently unavailable. Please try again later.":((s=d.response)==null?void 0:s.status)===400?h=((i=d.response.data)==null?void 0:i.error)||"Invalid payment details. Please check your information and try again.":((a=d.response)==null?void 0:a.status)===429?h="Too many payment requests. Please wait a moment and try again.":((o=d.response)==null?void 0:o.status)>=500?h="M-Pesa service is temporarily unavailable. Please try again in a few minutes.":(u=(l=d.response)==null?void 0:l.data)!=null&&u.error?h=d.response.data.error:d.message&&(h=d.message),{success:!1,error:h}}}async queryPaymentStatus(e){var n,r,s,i;try{return(await this.apiClient.get(`/mpesa/status/${e}`)).data}catch(a){console.error("Error querying payment status:",a);let o="Failed to query payment status";return a.code==="ERR_NETWORK"||a.code==="ECONNREFUSED"?o="Unable to connect to M-Pesa service. Please check your internet connection.":((n=a.response)==null?void 0:n.status)===404?o="Payment transaction not found. Please check the transaction ID.":((r=a.response)==null?void 0:r.status)>=500?o="M-Pesa service is temporarily unavailable. Please try again later.":(i=(s=a.response)==null?void 0:s.data)!=null&&i.error?o=a.response.data.error:a.message&&(o=a.message),{success:!1,error:o}}}async getTransactionHistory(e,n=50,r=0){var s,i;try{return(await this.apiClient.get(`/mpesa/transactions/${e}?limit=${n}&offset=${r}`)).data}catch(a){return console.error("Error getting transaction history:",a),{success:!1,error:((i=(s=a.response)==null?void 0:s.data)==null?void 0:i.error)||a.message||"Failed to get transaction history"}}}validatePhoneNumber(e){return/^254[0-9]{9}$/.test(e)}formatPhoneNumber(e){const n=e.replace(/\D/g,"");return n.startsWith("254")?n:n.startsWith("0")?"254"+n.substring(1):n.length===9?"254"+n:n}convertUsdToKes(e){return Math.round(e*149.25)}convertKesToUsd(e){return parseFloat((e*.0067).toFixed(4))}}const Qv=new b1e;function x1e({transactionId:t,checkoutRequestId:e,onStatusChange:n,autoRefresh:r=!0,refreshInterval:s=5}){const[i,a]=v.useState(null),[o,l]=v.useState(!1),[u,d]=v.useState(null),[h,f]=v.useState(null),p=async()=>{if(e){l(!0),d(null);try{const b=await Qv.queryPaymentStatus(e);b.success&&b.transaction?(a(b.transaction),f(new Date),n&&n(b.transaction.status)):d(b.error||"Failed to fetch payment status")}catch(b){d(b.message||"Failed to fetch payment status")}finally{l(!1)}}};v.useEffect(()=>{if(!r||!e)return;p();const b=setInterval(()=>{(i==null?void 0:i.status)==="pending"&&p()},s*1e3);return()=>clearInterval(b)},[e,r,s,i==null?void 0:i.status]);const g=b=>{switch(b){case"pending":return{icon:Ql,color:"text-yellow-600",bgColor:"bg-yellow-100",label:"Pending",description:"Waiting for M-Pesa confirmation"};case"completed":return{icon:sr,color:"text-green-600",bgColor:"bg-green-100",label:"Completed",description:"Payment successful"};case"failed":return{icon:rm,color:"text-red-600",bgColor:"bg-red-100",label:"Failed",description:"Payment failed"};case"cancelled":return{icon:rm,color:"text-gray-600",bgColor:"bg-gray-100",label:"Cancelled",description:"Payment cancelled by user"};case"timeout":return{icon:Qr,color:"text-orange-600",bgColor:"bg-orange-100",label:"Timeout",description:"Payment request timed out"};default:return{icon:Ql,color:"text-gray-600",bgColor:"bg-gray-100",label:"Unknown",description:"Unknown status"}}};if(!e)return c.jsx(ne,{children:c.jsx(re,{className:"p-4 text-center",children:c.jsx("p",{className:"text-gray-500",children:"No payment to track"})})});if(u&&!i)return c.jsx(ne,{children:c.jsxs(re,{className:"p-4",children:[c.jsxs("div",{className:"flex items-center space-x-2 text-red-600",children:[c.jsx(Qr,{className:"h-5 w-5"}),c.jsx("span",{className:"text-sm",children:u})]}),c.jsxs(se,{variant:"outline",size:"sm",onClick:p,className:"mt-2",disabled:o,children:[c.jsx(ts,{className:`h-4 w-4 mr-2 ${o?"animate-spin":""}`}),"Retry"]})]})});if(!i&&o)return c.jsx(ne,{children:c.jsx(re,{className:"p-4",children:c.jsxs("div",{className:"flex items-center space-x-2",children:[c.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-blue-600"}),c.jsx("span",{className:"text-sm text-gray-600",children:"Loading payment status..."})]})})});if(!i)return null;const m=g(i.status),y=m.icon;return c.jsx(ne,{children:c.jsx(re,{className:"p-4",children:c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{className:"flex items-center space-x-3",children:[c.jsx("div",{className:`p-2 rounded-full ${m.bgColor}`,children:c.jsx(y,{className:`h-5 w-5 ${m.color}`})}),c.jsxs("div",{children:[c.jsxs("div",{className:"flex items-center space-x-2",children:[c.jsx("h3",{className:"font-medium text-gray-900",children:"Payment Status"}),c.jsx(Je,{variant:i.status==="completed"?"default":"secondary",children:m.label})]}),c.jsx("p",{className:"text-sm text-gray-500",children:m.description})]})]}),c.jsx(se,{variant:"ghost",size:"sm",onClick:p,disabled:o,className:"text-gray-500 hover:text-gray-700",children:c.jsx(ts,{className:`h-4 w-4 ${o?"animate-spin":""}`})})]}),c.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[c.jsxs("div",{children:[c.jsx("p",{className:"text-gray-500",children:"Amount (USD)"}),c.jsxs("p",{className:"font-medium",children:["$",i.amount.usd]})]}),c.jsxs("div",{children:[c.jsx("p",{className:"text-gray-500",children:"Amount (KES)"}),c.jsxs("p",{className:"font-medium",children:["KES ",i.amount.kes.toLocaleString()]})]}),c.jsxs("div",{children:[c.jsx("p",{className:"text-gray-500",children:"Phone Number"}),c.jsx("p",{className:"font-medium",children:i.phoneNumber})]}),c.jsxs("div",{children:[c.jsx("p",{className:"text-gray-500",children:"Transaction ID"}),c.jsxs("p",{className:"font-medium text-xs",children:[i.id.slice(0,8),"..."]})]})]}),i.status==="completed"&&i.mpesaReceiptNumber&&c.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-lg p-3",children:[c.jsxs("div",{className:"flex items-center space-x-2",children:[c.jsx(nm,{className:"h-4 w-4 text-green-600"}),c.jsx("span",{className:"text-sm font-medium text-green-800",children:"M-Pesa Receipt"})]}),c.jsxs("p",{className:"text-sm text-green-700 mt-1",children:["Receipt: ",i.mpesaReceiptNumber]}),i.transactionDate&&c.jsxs("p",{className:"text-xs text-green-600 mt-1",children:["Completed: ",new Date(i.transactionDate).toLocaleString()]})]}),h&&c.jsxs("div",{className:"text-xs text-gray-400 text-center",children:["Last updated: ",h.toLocaleTimeString()]}),i.status==="pending"&&c.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3",children:c.jsxs("div",{className:"flex items-start space-x-2",children:[c.jsx(nm,{className:"h-4 w-4 text-blue-600 mt-0.5"}),c.jsxs("div",{className:"text-sm text-blue-700",children:[c.jsx("p",{className:"font-medium",children:"Waiting for payment confirmation"}),c.jsx("p",{className:"mt-1",children:"Please check your phone for the M-Pesa payment request and enter your PIN to complete the transaction."})]})]})}),(i.status==="failed"||i.status==="timeout")&&c.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-3",children:c.jsxs("div",{className:"flex items-start space-x-2",children:[c.jsx(Qr,{className:"h-4 w-4 text-red-600 mt-0.5"}),c.jsxs("div",{className:"text-sm text-red-700",children:[c.jsx("p",{className:"font-medium",children:i.status==="timeout"?"Payment Timeout":"Payment Failed"}),c.jsx("p",{className:"mt-1",children:i.status==="timeout"?"The payment request timed out. Please try again.":"The payment could not be completed. Please try again or contact support."})]})]})})]})})})}function v1e(){const{account:t}=Rt(),[e,n]=v.useState({status:"idle",transactionId:null,checkoutRequestId:null,error:null,amount:null,loading:!1}),r=v.useRef(null),s=v.useRef(null);v.useEffect(()=>()=>{l()},[]);const i=v.useCallback(async d=>{if(!t)return X.error("Please connect your wallet first"),!1;n(h=>({...h,status:"initiating",loading:!0,error:null}));try{const h={...d,walletAddress:t};console.log(" M-Pesa Payment Request Data:",{walletAddress:h.walletAddress,packageId:h.packageId,phoneNumber:h.phoneNumber,amount:h.amount,referrerAddress:h.referrerAddress,types:{walletAddress:typeof h.walletAddress,packageId:typeof h.packageId,phoneNumber:typeof h.phoneNumber,amount:typeof h.amount,referrerAddress:typeof h.referrerAddress}});const f=await Qv.initiatePayment(h);if(f.success&&f.transactionId&&f.checkoutRequestId)return n(p=>({...p,status:"pending",transactionId:f.transactionId,checkoutRequestId:f.checkoutRequestId,amount:f.amount||null,loading:!1})),X.success("Payment request sent to your phone. Please check your M-Pesa notifications."),o(f.checkoutRequestId),!0;{const p=f.error||"Failed to initiate payment";return n(g=>({...g,status:"failed",error:p,loading:!1})),p.includes("connect")||p.includes("network")?X.error("Connection issue. Please check your internet and try again."):p.includes("unavailable")?X.error("M-Pesa service is temporarily unavailable. Please try again later."):X.error(p),!1}}catch(h){const f=h.message||"Failed to initiate payment";return n(p=>({...p,status:"failed",error:f,loading:!1})),X.error(f),!1}},[t]),a=v.useCallback(async d=>{try{const h=await Qv.queryPaymentStatus(d);if(h.success&&h.transaction){const f=h.transaction;return n(p=>({...p,status:f.status,error:f.status==="failed"?"Payment failed":null})),h}return null}catch(h){return console.error("Error querying payment status:",h),null}},[]),o=v.useCallback(d=>{l();let h=0;const f=40,p=async()=>{h++;try{const g=await a(d);if(g!=null&&g.success&&g.transaction){const m=g.transaction.status;if(m==="completed"){l(),X.success("Payment completed successfully!");return}else if(m==="failed"||m==="cancelled"){l();const y=m==="cancelled"?"Payment was cancelled":"Payment failed";X.error(y);return}}h<f?r.current=setTimeout(p,3e3):(n(m=>({...m,status:"timeout",error:"Payment request timed out"})),X.error("Payment request timed out. Please try again."),l())}catch(g){console.error("Error during status polling:",g),h<f?r.current=setTimeout(p,3e3):l()}};r.current=setTimeout(p,3e3),s.current=setTimeout(()=>{n(g=>({...g,status:"timeout",error:"Payment request timed out"})),X.error("Payment request timed out. Please try again."),l()},15e4)},[a]),l=v.useCallback(()=>{r.current&&(clearTimeout(r.current),r.current=null),s.current&&(clearTimeout(s.current),s.current=null)},[]),u=v.useCallback(()=>{l(),n({status:"idle",transactionId:null,checkoutRequestId:null,error:null,amount:null,loading:!1})},[l]);return{paymentState:e,initiatePayment:i,queryPaymentStatus:a,resetPayment:u,startStatusPolling:o,stopStatusPolling:l}}function E1e({walletAddress:t,packageId:e,amount:n,referrerAddress:r,onSuccess:s,onCancel:i}){const[a,o]=v.useState(""),[l,u]=v.useState("input"),[d,h]=v.useState({status:"checking"}),[f,p]=v.useState(0),[g,m]=v.useState(null),{paymentState:y,initiatePayment:b,resetPayment:w}=v1e(),x=Math.round(n*149.25),A=v.useCallback(async()=>{try{h(N=>({...N,status:"checking"}));const z=await fetch("https://api.blockcoopsacco.com/api/health",{method:"GET",headers:{"Content-Type":"application/json"},signal:AbortSignal.timeout(1e4)});if(z.ok){const N=await z.json();h({status:"connected",lastChecked:new Date,error:void 0}),m(null)}else throw new Error(`Health check failed: ${z.status}`)}catch(O){console.error("Connection check failed:",O),h({status:"disconnected",lastChecked:new Date,error:O.message}),m(`Connection failed: ${O.message}`)}},[]);v.useEffect(()=>{A();const O=setInterval(A,3e4);return()=>clearInterval(O)},[A]),v.useEffect(()=>{switch(y.status){case"idle":u("input");break;case"initiating":u("processing");break;case"pending":u("waiting");break;case"completed":u("completed"),y.transactionId&&s(y.transactionId);break;case"failed":case"cancelled":case"timeout":u("failed");break}},[y.status,y.transactionId,s]);const T=O=>{const F=O.replace(/\D/g,"");let z=F;F.startsWith("254")?z=F:F.startsWith("0")?z="254"+F.substring(1):F.length<=9&&(z="254"+F),o(z)},j=Qv.validatePhoneNumber(a),P=async()=>{if(!j){X.error("Please enter a valid Kenyan phone number");return}if(d.status==="disconnected"){X.error("Unable to connect to payment service. Please check your connection and try again.");return}m(null),u("processing");try{await b({packageId:e,phoneNumber:a,amount:n,referrerAddress:r})?(u("waiting"),p(0),X.success("Payment request sent! Please check your phone for M-Pesa prompt.")):(u("failed"),p(F=>F+1))}catch(O){console.error("Payment initiation error:",O),m(O.message||"Failed to initiate payment"),u("failed"),p(F=>F+1),X.error(O.message||"Failed to initiate payment. Please try again.")}},S=async()=>{if(f>=3){X.error("Maximum retry attempts reached. Please try again later.");return}await A(),d.status==="connected"?await P():X.error("Please check your internet connection and try again.")},E=()=>{w(),i()},k=()=>d.status==="checking"?c.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600 dark:text-gray-400 mb-4",children:[c.jsx(Ql,{className:"w-4 h-4 animate-spin"}),c.jsx("span",{children:"Checking M-Pesa service connection..."})]}):d.status==="disconnected"?c.jsxs("div",{className:"space-y-2 mb-4",children:[c.jsxs("div",{className:"flex items-center gap-2 text-sm text-red-600 dark:text-red-400 p-3 bg-red-50 dark:bg-red-900/20 rounded-lg",children:[c.jsx(Jd,{className:"w-4 h-4"}),c.jsx("span",{children:"M-Pesa service is currently unavailable"})]}),d.error&&c.jsxs("div",{className:"text-xs text-red-500 dark:text-red-400 px-3",children:["Error: ",d.error]}),c.jsxs(se,{variant:"outline",size:"sm",onClick:A,className:"w-full",children:[c.jsx(ts,{className:"w-3 h-3 mr-2"}),"Retry Connection"]})]}):c.jsxs("div",{className:"flex items-center justify-between text-sm text-green-600 dark:text-green-400 mb-4 p-2 bg-green-50 dark:bg-green-900/20 rounded-lg",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(twe,{className:"w-4 h-4"}),c.jsx("span",{children:"M-Pesa service is connected"})]}),d.lastChecked&&c.jsxs("span",{className:"text-xs opacity-75",children:["Last checked: ",d.lastChecked.toLocaleTimeString()]})]}),R=()=>{switch(l){case"input":return c.jsxs("div",{className:"space-y-4",children:[k(),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"M-Pesa Phone Number"}),c.jsx(Et,{type:"tel",placeholder:"254712345678",value:a,onChange:N=>T(N.target.value),className:`${!j&&a?"border-red-500":""}`,maxLength:12}),a&&!j&&c.jsx("p",{className:"text-xs text-red-600 mt-1",children:"Please enter a valid Kenyan phone number (254XXXXXXXXX)"}),c.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Enter your M-Pesa registered phone number"})]}),c.jsxs("div",{className:"bg-gray-50 dark:bg-gray-800 rounded-lg p-3",children:[c.jsxs("div",{className:"flex justify-between items-center text-sm",children:[c.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Package Amount:"}),c.jsxs("span",{className:"font-medium",children:["$",n," USD"]})]}),c.jsxs("div",{className:"flex justify-between items-center text-sm mt-1",children:[c.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"M-Pesa Amount:"}),c.jsxs("span",{className:"font-medium",children:["KES ",x.toLocaleString()]})]})]}),c.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[c.jsxs(se,{onClick:P,disabled:!j||y.loading||d.status==="disconnected",loading:y.loading,className:"w-full sm:flex-1",size:"lg",children:[c.jsx(nm,{className:"h-4 w-4 mr-2"}),c.jsx("span",{className:"hidden sm:inline",children:d.status==="disconnected"?"Service Unavailable":"Send Payment Request"}),c.jsx("span",{className:"sm:hidden",children:d.status==="disconnected"?"Unavailable":"Send Request"})]}),c.jsx(se,{variant:"outline",onClick:E,className:"w-full sm:flex-1",size:"lg",children:"Cancel"})]})]});case"processing":return c.jsxs("div",{className:"text-center space-y-4",children:[c.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),c.jsxs("div",{children:[c.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white",children:"Initiating Payment"}),c.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Please wait while we process your request..."})]})]});case"waiting":return c.jsxs("div",{className:"space-y-4",children:[c.jsx(x1e,{checkoutRequestId:y.checkoutRequestId||void 0,onStatusChange:N=>{N==="completed"&&y.transactionId&&s(y.transactionId)},autoRefresh:!0}),c.jsx(se,{variant:"outline",onClick:E,className:"w-full",children:"Cancel Payment"})]});case"completed":return c.jsxs("div",{className:"text-center space-y-4",children:[c.jsx("div",{className:"flex justify-center",children:c.jsx(sr,{className:"h-16 w-16 text-green-600"})}),c.jsxs("div",{children:[c.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white",children:"Payment Successful!"}),c.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Your M-Pesa payment has been completed successfully"}),c.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:"Your USDT package is being processed..."})]}),y.transactionId&&c.jsx("div",{className:"bg-green-50 dark:bg-green-900/20 rounded-lg p-3",children:c.jsxs("p",{className:"text-xs text-green-700 dark:text-green-300",children:["Transaction ID: ",y.transactionId]})})]});case"failed":const O=y.error||g||"Something went wrong with your payment",F=O.includes("connect")||O.includes("network")||d.status==="disconnected",z=f<3;return c.jsxs("div",{className:"text-center space-y-4",children:[c.jsx("div",{className:"flex justify-center",children:F?c.jsx(Jd,{className:"h-16 w-16 text-red-600"}):c.jsx(Qr,{className:"h-16 w-16 text-red-600"})}),c.jsxs("div",{className:"space-y-2",children:[c.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white",children:"Payment Failed"}),c.jsx("p",{className:"text-sm text-red-600 dark:text-red-400",children:O}),f>0&&c.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:["Attempt ",f," of 3"]})]}),g&&g!==O&&c.jsx("div",{className:"bg-red-50 dark:bg-red-900/20 rounded-lg p-3",children:c.jsxs("p",{className:"text-xs text-red-700 dark:text-red-300",children:["Technical details: ",g]})}),c.jsx("div",{className:"bg-blue-50 dark:bg-blue-900/20 rounded-lg p-3 text-left",children:c.jsxs("div",{className:"flex items-start gap-2",children:[c.jsx(ni,{className:"w-4 h-4 text-blue-600 dark:text-blue-400 mt-0.5 flex-shrink-0"}),c.jsxs("div",{className:"text-xs text-blue-700 dark:text-blue-300",children:[c.jsx("p",{className:"font-medium mb-1",children:"Troubleshooting tips:"}),c.jsxs("ul",{className:"list-disc list-inside space-y-1",children:[c.jsx("li",{children:"Ensure you have sufficient M-Pesa balance"}),c.jsx("li",{children:"Check your phone number is correct"}),c.jsx("li",{children:"Make sure you have good network connection"}),F&&c.jsx("li",{children:"Try refreshing the page"})]})]})]})}),c.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[z&&c.jsxs(se,{onClick:S,disabled:d.status==="disconnected",className:"w-full sm:flex-1",size:"lg",children:[c.jsx(ts,{className:"h-4 w-4 mr-2"}),"Try Again (",3-f," attempts left)"]}),c.jsx(se,{variant:"outline",onClick:E,className:"w-full sm:flex-1",size:"lg",children:"Cancel"})]}),c.jsxs("div",{children:[c.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white",children:F?"Connection Error":"Payment Failed"}),c.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:O}),F&&c.jsxs("div",{className:"mt-3 p-3 bg-yellow-50 dark:bg-yellow-900/20 rounded-lg text-left",children:[c.jsx("p",{className:"text-xs text-yellow-700 dark:text-yellow-300 font-medium mb-2",children:"Troubleshooting steps:"}),c.jsxs("ul",{className:"text-xs text-yellow-600 dark:text-yellow-400 space-y-1",children:[c.jsx("li",{children:" Check your internet connection"}),c.jsx("li",{children:" Make sure the M-Pesa backend server is running"}),c.jsx("li",{children:" Try refreshing the page"}),c.jsx("li",{children:" Contact support if the issue persists"})]})]})]}),c.jsxs("div",{className:"flex space-x-3",children:[c.jsx(se,{onClick:()=>{w(),u("input")},className:"flex-1",children:"Try Again"}),c.jsx(se,{variant:"outline",onClick:E,className:"flex-1",children:"Cancel"})]})]});default:return null}};return c.jsx(ne,{children:c.jsxs(re,{className:"p-4 sm:p-6",children:[c.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center space-y-2 sm:space-y-0 sm:space-x-2 mb-4 sm:mb-6",children:[c.jsxs("div",{className:"flex items-center space-x-2",children:[c.jsx(nm,{className:"h-5 w-5 text-blue-600"}),c.jsx("h2",{className:"text-lg sm:text-xl font-semibold text-gray-900 dark:text-white",children:"M-Pesa Payment"})]}),c.jsx(Je,{variant:"secondary",className:"self-start sm:self-auto",children:"Mobile Money"})]}),R()]})})}function N1e({package:t,isOpen:e,onClose:n,onSuccess:r}){const{account:s,signer:i,isConnected:a,isCorrectNetwork:o,contracts:l}=Rt(),[u,d]=v.useState(""),[h,f]=v.useState(null),[p,g]=v.useState(!1),[m,y]=v.useState(!1),[b,w]=v.useState(0n),[x,A]=v.useState(0n),[T,j]=v.useState(18),[P,S]=v.useState("wallet"),[E,k]=v.useState(!1),[R,O]=v.useState({totalTokens:0n,vestTokens:0n,poolTokens:0n,usdtPool:0n,usdtVault:0n}),[F,z]=v.useState(!0),N=t.entryUSDT,I=t.entryUSDT,M=x<N;v.useEffect(()=>{if(e){const J=M$();J&&J!==s?(f(J),d(J),g(!0),console.log("Referrer detected from URL:",J)):(f(null),g(!1))}},[e,s]),v.useEffect(()=>{(async()=>{try{z(!0);const ve=await LS(t);O(ve)}catch(ve){console.error("Error calculating splits for package:",t.name,ve)}finally{z(!1)}})()},[t]);const D=J=>{try{const ve=rt(J,18);return parseFloat(ve).toLocaleString("en-US",{minimumFractionDigits:0,maximumFractionDigits:4})}catch{return"0"}},L=(J,ve)=>{const ge=O$(ve),Le=`${ve.slice(0,6)}...${ve.slice(-4)}`,je=async()=>{const{copyToClipboardWithFeedback:kt}=await Rn(async()=>{const{copyToClipboardWithFeedback:et}=await Promise.resolve().then(()=>QS);return{copyToClipboardWithFeedback:et}},void 0);await kt(ve,"Transaction hash copied!","Failed to copy transaction hash")};return c.jsxs("div",{className:"flex items-center justify-between space-x-3 min-w-0",children:[c.jsx("span",{className:"flex-shrink-0",children:J}),c.jsxs("div",{className:"flex items-center space-x-2 min-w-0",children:[c.jsx("span",{className:"text-xs text-gray-500 font-mono truncate",children:Le}),c.jsx("button",{onClick:je,className:"text-blue-500 hover:text-blue-700 flex-shrink-0",title:"Copy transaction hash",children:c.jsx(Ad,{className:"h-3 w-3"})}),c.jsx("a",{href:ge,target:"_blank",rel:"noopener noreferrer",className:"text-blue-500 hover:text-blue-700 flex-shrink-0",title:"View on block explorer",children:c.jsx(ao,{className:"h-3 w-3"})})]})]})};v.useEffect(()=>{var ve,ge,Le,je;let J=!0;return console.log("PurchaseModal: Address/isOpen/contracts changed:",{address:s,isOpen:e,isConnected:a,signer:!!i,hasContracts:!!l,hasUsdtToken:!!(l!=null&&l.usdtToken),hasPackageManager:!!(l!=null&&l.packageManager),contractsFromWeb3:l,usdtTokenAddress:(ve=l==null?void 0:l.usdtToken)==null?void 0:ve.address,packageManagerAddress:(ge=l==null?void 0:l.packageManager)==null?void 0:ge.address,usdtTokenTarget:(Le=l==null?void 0:l.usdtToken)==null?void 0:Le.target,packageManagerTarget:(je=l==null?void 0:l.packageManager)==null?void 0:je.target}),s&&e&&(l!=null&&l.usdtToken)&&(l!=null&&l.packageManager)?(console.log("PurchaseModal: Loading balances for address:",s),q(l,J)):console.log("PurchaseModal: Skipping loadBalances - requirements not met:",{hasAddress:!!s,isOpen:e,hasContracts:!!l,hasUsdtToken:!!(l!=null&&l.usdtToken),hasPackageManager:!!(l!=null&&l.packageManager)}),()=>{J=!1}},[s,e,l]),v.useEffect(()=>{e||(d(""),y(!1),S("wallet"),k(!1))},[e]);const $=J=>{X.success("M-Pesa payment completed! Your USDT package will be processed shortly."),r(),n()},V=J=>{S(J),k(J==="mpesa")},q=async(J,ve=!0)=>{var ge,Le,je,kt;try{if(!s){console.warn("loadBalances called with null/undefined address");return}if(console.log("loadBalances: Contract validation debug:",{contractInstances:J,hasUsdtToken:!!(J!=null&&J.usdtToken),hasPackageManager:!!(J!=null&&J.packageManager),usdtTokenType:typeof(J==null?void 0:J.usdtToken),packageManagerType:typeof(J==null?void 0:J.packageManager),usdtTokenKeys:J!=null&&J.usdtToken?Object.getOwnPropertyNames(J.usdtToken):[],packageManagerKeys:J!=null&&J.packageManager?Object.getOwnPropertyNames(J.packageManager):[],usdtTokenAddress:(ge=J==null?void 0:J.usdtToken)==null?void 0:ge.address,usdtTokenTarget:(Le=J==null?void 0:J.usdtToken)==null?void 0:Le.target,packageManagerAddress:(je=J==null?void 0:J.packageManager)==null?void 0:je.address,packageManagerTarget:(kt=J==null?void 0:J.packageManager)==null?void 0:kt.target}),!(J!=null&&J.usdtToken)||!(J!=null&&J.packageManager)){console.error("loadBalances called with invalid contracts");return}const et=J.usdtToken.target||J.usdtToken.address,De=J.packageManager.target||J.packageManager.address;if(!et||!De){console.error("Contract addresses are undefined:",{usdtAddress:et,packageManagerAddress:De,usdtTokenTarget:J.usdtToken.target,usdtTokenAddress:J.usdtToken.address,packageManagerTarget:J.packageManager.target,packageManagerAddressProperty:J.packageManager.address,usdtTokenContract:J.usdtToken,packageManagerContract:J.packageManager});return}console.log("loadBalances: Making contract calls with:",{address:s,usdtTokenAddress:et,packageManagerAddress:De});const{getUSDTBalance:Dt}=await Rn(async()=>{const{getUSDTBalance:vc}=await Promise.resolve().then(()=>Iye);return{getUSDTBalance:vc}},void 0);let Mr=0n,mo=0n;try{Mr=await Dt(s),console.log("loadBalances: Successfully got balance:",Mr.toString())}catch(vc){console.error("Error getting USDT balance:",vc),Mr=0n}try{mo=await J.usdtToken.allowance(s,De),console.log("loadBalances: Successfully got allowance:",mo.toString())}catch(vc){console.error("Error getting USDT allowance:",vc),console.error("Allowance call details:",{userAddress:s,spenderAddress:De,usdtTokenAddress:J.usdtToken.target||J.usdtToken.address}),mo=0n}const gh=18;console.log("loadBalances: Contract calls successful:",{balance:Mr.toString(),balanceFormatted18:rt(Mr,18),allowance:mo.toString(),allowanceFormatted18:rt(mo,18),usdtDecimals:gh.toString(),balanceFormattedActual:rt(Mr,gh),allowanceFormattedActual:rt(mo,gh)}),ve&&(console.log("loadBalances: Updating state with balance:",Mr.toString()),w(Mr),A(mo),j(Number(gh)),console.log("loadBalances: State update calls completed"))}catch(et){console.error("Error loading balances:",et),console.error("Address at time of error:",s),console.error("Contracts at time of error:",{usdtToken:J==null?void 0:J.usdtToken,packageManager:J==null?void 0:J.packageManager}),ve&&(console.log("loadBalances: Setting safe defaults due to error"),w(0n),A(0n),j(18))}},G=async()=>{if(!s){X.error("Please connect your wallet first");return}if(!o){X.error("Please switch to BSC Testnet");return}return(await RR(async()=>{if(!a)throw new Error("Please connect your wallet first");if(!i)throw new Error("No signer available - please ensure your wallet is connected");if(!(l!=null&&l.usdtToken)||!(l!=null&&l.packageManager))throw new Error("Contracts not properly initialized");const ve=l.packageManager.target||l.packageManager.address;console.log("handleApprove: Approving USDT for PackageManager:",{usdtTokenAddress:l.usdtToken.target||l.usdtToken.address,packageManagerAddress:ve,approvalAmount:Jk.toString(),userAddress:s});const ge=await l.usdtToken.approve(ve,Jk),Le=await ge.wait();return{tx:ge,receipt:Le}},{onStart:()=>{y(!0),X.loading("Approving USDT...",{id:"approve"})},onSuccess:async({tx:ve})=>{const ge=ve.hash;if(X.success(L("USDT approved successfully!",ge),{id:"approve",duration:8e3}),s&&(l!=null&&l.usdtToken)&&(l!=null&&l.packageManager)){await q(l);try{const Le=l.packageManager.target||l.packageManager.address,je=await l.usdtToken.allowance(s,Le);console.log("Approval verification:",{userAddress:s,packageManagerAddress:Le,newAllowance:je.toString(),newAllowanceFormatted:rt(je,T),packageCost:N.toString(),packageCostFormatted:rt(N,T),isAllowanceSufficient:je>=N}),je>=N?X.success("Approval verified - you can now purchase the package!",{duration:3e3}):X.error("Approval completed but allowance may be insufficient. Please try again.",{duration:5e3})}catch(Le){console.error("Error re-verifying allowance:",Le)}}},onError:ve=>{console.error("Approval error:",ve),ve.isUserRejection?X.error("Approval cancelled",{id:"approve"}):ve.isInsufficientFunds?X.error("Insufficient funds for gas fee",{id:"approve"}):ve.isNetworkError?X.error("Network error. Please check your connection and try again",{id:"approve"}):X.error(ve.userMessage,{id:"approve"})},onFinally:()=>{y(!1)}})).success},Z=async()=>{if(!(t!=null&&t.id)&&(t==null?void 0:t.id)!==0){X.error("Invalid package ID");return}if(!s){X.error("Please connect your wallet first");return}if(!o){X.error("Please switch to BSC Testnet");return}if(u.trim()&&!Jy(u.trim())){X.error("Invalid referrer address");return}if(u.trim()&&u.trim().toLowerCase()===s.toLowerCase()){X.error("You cannot refer yourself");return}const J=u.trim()||co;return(await RR(async()=>{if(!a)throw new Error("Please connect your wallet first");if(!i)throw new Error("No signer available - please ensure your wallet is connected");if(!(l!=null&&l.packageManager))throw new Error("Package manager contract not properly initialized");const ge=l.packageManager.target||l.packageManager.address;console.log("handlePurchase: Purchasing package from PackageManager:",{packageManagerAddress:ge,packageId:t.id,referrerAddress:J,userAddress:s,packageCost:t.entryUSDT.toString(),packageCostFormatted:rt(t.entryUSDT,18),currentAllowance:x.toString(),currentAllowanceFormatted:rt(x,18),isAllowanceSufficient:x>=N});const Le=await l.packageManager.purchase(t.id,J),je=await Le.wait();return{tx:Le,receipt:je}},{onStart:()=>{y(!0),X.loading("Processing purchase...",{id:"purchase"})},onSuccess:({tx:ge})=>{const Le=ge.hash;X.success(L("Package purchased successfully!",Le),{id:"purchase",duration:8e3}),oe()},onError:ge=>{console.error("Purchase error:",ge),ge.isUserRejection?X.error("Transaction cancelled",{id:"purchase"}):ge.isInsufficientFunds?X.error("Insufficient funds for this transaction",{id:"purchase"}):ge.isNetworkError?X.error("Network error. Please check your connection and try again",{id:"purchase"}):X.error(ge.userMessage,{id:"purchase"})},onFinally:()=>{y(!1)}})).success},oe=()=>{d(""),y(!1),setTimeout(()=>{n()},1e3),r()},xe=v.useMemo(()=>!a||!s?!0:l!=null&&l.usdtToken?b<I:!1,[b,I,a,s,l==null?void 0:l.usdtToken]);return console.log("PurchaseModal: Balance check (all values in USDT 18 decimals):",{usdtBalance:b.toString(),usdtBalanceFormatted:rt(b,18),usdtDecimals:18,packageCost:t.entryUSDT.toString(),packageCostFormatted:rt(t.entryUSDT,18),hasInsufficientBalance:xe,address:s,isConnected:a,allowance:x.toString(),allowanceFormatted:rt(x,18),needsApproval:M,contractsAvailable:!!l,contractsLoaded:!!(l!=null&&l.usdtToken)}),c.jsxs(Mf,{open:e,onClose:n,className:"relative z-50",children:[c.jsx("div",{className:"fixed inset-0 bg-black/25 backdrop-blur-sm"}),c.jsx("div",{className:"fixed inset-0 flex items-center justify-center p-3 sm:p-4",children:c.jsx(Mf.Panel,{className:"mx-auto w-full max-w-sm sm:max-w-md lg:max-w-2xl bg-white rounded-2xl shadow-2xl animate-slide-up max-h-[95vh] overflow-y-auto",children:c.jsxs("div",{className:"p-4 sm:p-6",children:[c.jsxs("div",{className:"flex items-center justify-between mb-4 sm:mb-6",children:[c.jsxs(Mf.Title,{className:"text-lg sm:text-xl lg:text-2xl font-bold text-gray-900 pr-2",children:["Purchase ",t.name]}),c.jsx("button",{onClick:n,className:"p-2 text-gray-400 hover:text-gray-600 transition-colors flex-shrink-0",children:c.jsx(rm,{className:"h-5 w-5 sm:h-6 sm:w-6"})})]}),c.jsxs("div",{className:"space-y-4 sm:space-y-6",children:[c.jsx(ne,{className:"border-primary-200 bg-primary-50/50",children:c.jsxs(re,{className:"p-3 sm:p-4",children:[c.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between mb-3 sm:mb-4",children:[c.jsx("h3",{className:"font-semibold text-gray-900 mb-2 sm:mb-0",children:"Package Summary"}),c.jsxs("div",{className:"text-xl sm:text-2xl font-bold text-primary-600",children:["$",Al(t.entryUSDT)," USDT"]})]}),F?c.jsxs("div",{className:"flex items-center justify-center py-6",children:[c.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-primary-600"}),c.jsx("span",{className:"ml-3 text-sm text-gray-500",children:"Calculating with current target price..."})]}):c.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[c.jsxs("div",{children:[c.jsx("p",{className:"text-gray-600",children:"LP Pool USDT"}),c.jsxs("p",{className:"font-medium",children:["$",Al(R.usdtPool)]})]}),c.jsxs("div",{children:[c.jsx("p",{className:"text-gray-600",children:"Treasury USDT"}),c.jsxs("p",{className:"font-medium",children:["$",Al(R.usdtVault)]})]}),c.jsxs("div",{children:[c.jsx("p",{className:"text-gray-600",children:"LP Pool BLOCKS"}),c.jsx("p",{className:"font-medium",children:Nt(R.poolTokens)})]}),c.jsxs("div",{children:[c.jsx("p",{className:"text-gray-600",children:"Vested BLOCKS"}),c.jsx("p",{className:"font-medium",children:Nt(R.vestTokens)})]})]})]})}),c.jsxs("div",{children:[c.jsxs("div",{className:"flex items-center justify-between mb-2",children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Referrer Address (Optional)"}),p&&c.jsxs(Je,{variant:"success",className:"flex items-center text-xs",children:[c.jsx(cr,{className:"h-3 w-3 mr-1"}),"Auto-detected"]})]}),c.jsx(Et,{placeholder:"0x...",value:u,onChange:J=>{d(J.target.value),p&&J.target.value!==h&&g(!1)},disabled:m,className:p?"border-green-300 bg-green-50":""}),c.jsxs("div",{className:"mt-2 space-y-1",children:[p&&h&&c.jsxs("div",{className:"flex items-center text-sm text-green-600",children:[c.jsx(cr,{className:"h-4 w-4 mr-1"}),"Referrer detected from link: ",$$(h)]}),u&&!i0(u)&&c.jsxs("div",{className:"flex items-center text-sm text-red-600",children:[c.jsx(Qr,{className:"h-4 w-4 mr-1"}),"Invalid referrer address format"]}),u&&i0(u)&&u===s&&c.jsxs("div",{className:"flex items-center text-sm text-orange-600",children:[c.jsx(Qr,{className:"h-4 w-4 mr-1"}),"You cannot refer yourself"]}),t.referralBps>0&&u&&i0(u)&&u!==s&&c.jsxs("div",{className:"flex items-center text-sm text-accent-600",children:[c.jsx(ni,{className:"h-4 w-4 mr-1"}),"Referrer will receive ",Sy(t.referralBps)," BLOCKS bonus"]}),t.referralBps>0&&!u&&c.jsxs("div",{className:"flex items-center text-sm text-gray-500",children:[c.jsx(ni,{className:"h-4 w-4 mr-1"}),"Enter a referrer address to give them ",Sy(t.referralBps)," bonus"]})]})]}),c.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[c.jsxs("div",{className:"flex items-center justify-between text-sm",children:[c.jsx("span",{className:"text-gray-600",children:"Your USDT Balance:"}),l!=null&&l.usdtToken?c.jsxs("span",{className:`font-medium ${xe?"text-error-600":"text-gray-900"}`,children:["$",D(b)]}):c.jsx("span",{className:"font-medium text-gray-500",children:"Loading..."})]}),xe&&(l==null?void 0:l.usdtToken)&&c.jsx("p",{className:"text-error-600 text-sm mt-2",children:"Insufficient USDT balance for this purchase"}),!(l!=null&&l.usdtToken)&&c.jsx("p",{className:"text-gray-500 text-sm mt-2",children:"Loading balance information..."})]}),!E&&c.jsx(Hxe,{selectedMethod:P,onMethodChange:V,packageAmount:parseFloat(rt(t.entryUSDT,18)),disabled:m}),E&&s&&c.jsx(E1e,{walletAddress:s,packageId:t.id,amount:parseFloat(rt(t.entryUSDT,18)),referrerAddress:u||void 0,onSuccess:$,onCancel:()=>k(!1)}),!E&&c.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[M?c.jsx(se,{onClick:G,loading:m,disabled:m||!a||!i||xe||!o,className:"w-full sm:flex-1",size:"lg",children:"Approve USDT"}):c.jsxs(se,{onClick:Z,loading:m,disabled:m||!a||!i||xe||!o,className:"w-full sm:flex-1",size:"lg",children:[c.jsx(_r,{className:"h-4 w-4 mr-2"}),c.jsx("span",{className:"hidden sm:inline",children:"Purchase Package"}),c.jsx("span",{className:"sm:hidden",children:"Purchase"})]}),c.jsx(se,{variant:"outline",onClick:n,className:"w-full sm:flex-1",size:"lg",children:"Cancel"})]})]})]})})})]})}function C1e(){const{isConnected:t}=Rt(),[e,n]=v.useState([]),[r,s]=v.useState(!0),[i,a]=v.useState(null),[o,l]=v.useState(null);v.useEffect(()=>{const h=RB();if(h.length>0){l(h.join(". ")),s(!1);return}u()},[]);const u=async()=>{try{s(!0),l(null);const h=un(),f=await h.packageManager.nextPackageId();console.log(` Total packages: ${f}`);const p=Array.from({length:Number(f)},(b,w)=>w);console.log(" Package IDs to fetch:",p);const g=p.map(async b=>{var A,T,j,P,S,E;const w=await h.packageManager.getPackage(b);console.log(` Raw package data for ID ${b}:`,w),console.log(" Is array:",Array.isArray(w)),console.log(" Package keys:",Object.keys(w));let x;return Array.isArray(w)?(x={entryUSDT:w[0],exchangeRate:w[1],cliff:w[2],duration:w[3],vestBps:w[4],referralBps:w[5],active:w[6],exists:w[7],name:w[8]},console.log(" Converted array to object:",x)):(x={name:w.name,entryUSDT:w.entryUSDT,exchangeRate:w.exchangeRate,vestBps:w.vestBps,cliff:w.cliff,duration:w.duration,referralBps:w.referralBps,active:w.active,exists:w.exists},console.log(" Using object format:",x)),console.log(" Final package data:",{name:x.name,entryUSDT:(A=x.entryUSDT)==null?void 0:A.toString(),exchangeRate:(T=x.exchangeRate)==null?void 0:T.toString(),vestBps:(j=x.vestBps)==null?void 0:j.toString(),cliff:(P=x.cliff)==null?void 0:P.toString(),duration:(S=x.duration)==null?void 0:S.toString(),referralBps:(E=x.referralBps)==null?void 0:E.toString(),active:x.active,exists:x.exists}),{id:Number(b),name:x.name,entryUSDT:x.entryUSDT,exchangeRate:x.exchangeRate,vestBps:Number(x.vestBps),cliff:Number(x.cliff),duration:Number(x.duration),referralBps:Number(x.referralBps),active:x.active,exists:x.exists}}),y=(await Promise.all(g)).filter(b=>b.exists&&b.active);n(y)}catch(h){console.error("Error loading packages:",h),h.code==="CALL_EXCEPTION"?l("Contract not found. Please ensure the Package Manager contract is deployed and the address is correct in your .env file."):X.error("Failed to load packages")}finally{s(!1)}},d=h=>{if(!t){X.error("Please connect your wallet first");return}a(h)};return o?c.jsx(ne,{className:"border-error-200 bg-error-50",children:c.jsxs(re,{className:"p-8 text-center",children:[c.jsx(dr,{className:"h-12 w-12 text-error-500 mx-auto mb-4"}),c.jsx("h3",{className:"text-lg font-medium text-error-900 mb-2",children:"Configuration Error"}),c.jsx("p",{className:"text-error-700 mb-4",children:o}),c.jsxs("div",{className:"text-sm text-error-600",children:[c.jsx("p",{children:"Please check your .env file and ensure:"}),c.jsxs("ul",{className:"list-disc list-inside mt-2 space-y-1",children:[c.jsx("li",{children:"All contract addresses are valid and deployed"}),c.jsx("li",{children:"WalletConnect Project ID is obtained from cloud.walletconnect.com"})]})]})]})}):r?c.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:c.jsxs("div",{className:"text-center",children:[c.jsx(vn,{className:"h-8 w-8 animate-spin text-primary-600 mx-auto mb-4"}),c.jsx("p",{className:"text-gray-600",children:"Loading packages..."})]})}):e.length===0?c.jsx(ne,{children:c.jsxs(re,{className:"p-12 text-center",children:[c.jsx(ER,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),c.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No packages available"}),c.jsx("p",{className:"text-gray-600",children:"Check back later for new investment packages."})]})}):c.jsxs(iwe,{children:[c.jsxs("div",{className:"space-y-6",children:[c.jsxs(ne,{className:"bg-gradient-to-r from-blue-50 to-indigo-50 border-blue-200",children:[c.jsx(Ze,{className:"pb-3",children:c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{className:"flex items-center space-x-2",children:[c.jsx(ER,{className:"h-5 w-5 text-blue-600"}),c.jsx("h3",{className:"text-lg font-semibold text-blue-900",children:"Investment Packages"})]}),c.jsxs("div",{className:"flex items-center space-x-1 text-blue-600",children:[c.jsx(ni,{className:"h-4 w-4"}),c.jsx("span",{className:"text-sm",children:"Per-Package Rates"})]})]})}),c.jsx(re,{className:"pt-0",children:c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{children:[c.jsx("p",{className:"text-lg font-semibold text-blue-900",children:"Stable LP Pricing with Target Prices"}),c.jsx("p",{className:"text-sm text-blue-700 mt-1",children:"Each package maintains consistent USDT/BLOCKS ratios in LP pools"})]}),c.jsxs("div",{className:"text-right",children:[c.jsx("p",{className:"text-sm text-blue-600 font-medium",children:"Token Distribution"}),c.jsx("p",{className:"text-xs text-blue-500",children:"Dynamic vesting  Stable LP pricing"})]})]})})]}),c.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:e.map(h=>c.jsx(rbe,{package:h,onPurchase:d},h.id))})]}),i&&c.jsx(N1e,{package:i,isOpen:!0,onClose:()=>a(null),onSuccess:()=>{a(null),u()}})]})}function A1e({className:t="",size:e="md",showFallback:n=!0,animated:r=!1,sophisticated:s=!1}){const[i,a]=v.useState(!1),o={sm:"w-8 h-8",md:"w-12 h-12",lg:"w-16 h-16",xl:"w-24 h-24",xxl:"w-32 h-32",mega:"w-48 h-48",giant:"w-64 h-64"},l={sm:"h-4 w-4",md:"h-6 w-6",lg:"h-8 w-8",xl:"h-12 w-12",xxl:"h-16 w-16",mega:"h-24 w-24",giant:"h-32 w-32"},u=o[e],d=l[e],p=s?s?"animate-float animate-pulse-glow animate-shimmer motion-reduce:animate-pulse motion-reduce:duration-[3s]":"":r?"animate-float motion-reduce:animate-pulse motion-reduce:duration-[3s]":"",g=s?"bg-gradient-to-br from-blue-500/10 via-purple-500/10 to-teal-500/10 backdrop-blur-sm border-2 border-white/30":"bg-transparent backdrop-blur-sm border border-white/20";return i&&n?c.jsx("div",{className:`${g} rounded-full flex items-center justify-center ${u} ${p} ${t} shadow-lg`,children:c.jsx(zS,{className:`${d} text-purple-600`})}):i&&!n?null:c.jsxs("div",{className:"relative",children:[s&&c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:c.jsx("div",{className:"w-2 h-2 bg-blue-400 rounded-full animate-orbit opacity-60",children:c.jsx(NR,{className:"w-2 h-2 text-blue-400 animate-sparkle"})})}),c.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:c.jsx("div",{className:"w-1.5 h-1.5 bg-purple-400 rounded-full animate-counter-orbit opacity-40",children:c.jsx(NR,{className:"w-1.5 h-1.5 text-purple-400 animate-sparkle"})})})]}),c.jsxs("div",{className:`${g} rounded-full p-2 ${u} ${p} ${t} shadow-lg flex items-center justify-center relative overflow-hidden`,children:[s&&c.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/20 to-transparent animate-shimmer rounded-full"}),c.jsx("img",{src:"/assets/BlocksToken.png",alt:"BLOCKS Token Logo",className:"w-full h-full object-contain relative z-10",onError:()=>a(!0),onLoad:()=>a(!1)})]})]})}function T1e(){const t=()=>{const n=document.getElementById("packages-section");n&&n.scrollIntoView({behavior:"smooth"})},e=()=>{const n=document.getElementById("how-it-works-section");n&&n.scrollIntoView({behavior:"smooth"})};return c.jsxs("div",{className:"space-y-16",children:[c.jsxs("div",{className:"relative bg-gradient-to-br from-blue-50 via-purple-50 to-teal-50 rounded-3xl p-8 md:p-16 overflow-hidden",children:[c.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-blue-600/5 to-purple-600/5 rounded-3xl animate-gradient-shift"}),c.jsxs("div",{className:"absolute inset-0 overflow-hidden hidden md:block",children:[c.jsx("div",{className:"absolute top-20 left-20 w-2 h-2 bg-blue-400/30 rounded-full animate-float",style:{animationDelay:"0s"}}),c.jsx("div",{className:"absolute top-40 right-32 w-1.5 h-1.5 bg-purple-400/40 rounded-full animate-float",style:{animationDelay:"1s"}}),c.jsx("div",{className:"absolute bottom-32 left-32 w-1 h-1 bg-teal-400/50 rounded-full animate-float",style:{animationDelay:"2s"}}),c.jsx("div",{className:"absolute bottom-20 right-20 w-2.5 h-2.5 bg-indigo-400/20 rounded-full animate-float",style:{animationDelay:"3s"}})]}),c.jsxs("div",{className:"relative grid grid-cols-1 lg:grid-cols-5 gap-8 items-center min-h-[700px]",children:[c.jsxs("div",{className:"lg:col-span-3 space-y-8 flex flex-col justify-center h-full",children:[c.jsxs("div",{className:"space-y-6 animate-fade-in-up",children:[c.jsxs("h1",{className:"text-4xl md:text-6xl font-bold text-gray-900 leading-tight animate-text-glow",children:["$BLOCKS Token: The Future of",c.jsx("span",{className:"bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent block animate-gradient-shift",children:"Financial Freedom is Here"})]}),c.jsx("p",{className:"text-xl text-gray-600 leading-relaxed",children:"Your 100x Investment Backed by the #1 Blockchain SACCO in Africa"})]}),c.jsxs("div",{className:"flex flex-wrap gap-3 text-sm text-gray-600 animate-slide-in-left",children:[c.jsxs("div",{className:"flex items-center space-x-2 bg-white/70 backdrop-blur-sm px-3 py-2 rounded-full hover:bg-white/90 hover:scale-105 transition-all duration-300 cursor-pointer group animate-scale-in",style:{animationDelay:"0.1s"},children:[c.jsx(Fl,{className:"h-4 w-4 text-blue-600 group-hover:animate-pulse"}),c.jsx("span",{className:"group-hover:text-blue-700 transition-colors",children:"Daily Yields"})]}),c.jsxs("div",{className:"flex items-center space-x-2 bg-white/70 backdrop-blur-sm px-3 py-2 rounded-full hover:bg-white/90 hover:scale-105 transition-all duration-300 cursor-pointer group animate-scale-in",style:{animationDelay:"0.2s"},children:[c.jsx(Ts,{className:"h-4 w-4 text-green-600 group-hover:animate-pulse"}),c.jsx("span",{className:"group-hover:text-green-700 transition-colors",children:"Annual Dividends"})]}),c.jsxs("div",{className:"flex items-center space-x-2 bg-white/70 backdrop-blur-sm px-3 py-2 rounded-full hover:bg-white/90 hover:scale-105 transition-all duration-300 cursor-pointer group animate-scale-in",style:{animationDelay:"0.3s"},children:[c.jsx(_r,{className:"h-4 w-4 text-purple-600 group-hover:animate-pulse"}),c.jsx("span",{className:"group-hover:text-purple-700 transition-colors",children:"100x Potential"})]}),c.jsxs("div",{className:"flex items-center space-x-2 bg-white/70 backdrop-blur-sm px-3 py-2 rounded-full hover:bg-white/90 hover:scale-105 transition-all duration-300 cursor-pointer group animate-scale-in",style:{animationDelay:"0.4s"},children:[c.jsx(bx,{className:"h-4 w-4 text-orange-600 group-hover:animate-pulse"}),c.jsx("span",{className:"group-hover:text-orange-700 transition-colors",children:"Real-World Assets"})]}),c.jsxs("div",{className:"flex items-center space-x-2 bg-white/70 backdrop-blur-sm px-3 py-2 rounded-full hover:bg-white/90 hover:scale-105 transition-all duration-300 cursor-pointer group animate-scale-in",style:{animationDelay:"0.5s"},children:[c.jsx(cr,{className:"h-4 w-4 text-teal-600 group-hover:animate-pulse"}),c.jsx("span",{className:"group-hover:text-teal-700 transition-colors",children:"Community Impact"})]})]}),c.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 pt-4 animate-fade-in-up",style:{animationDelay:"0.6s"},children:[c.jsxs(se,{size:"lg",className:"px-8 py-4 bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700 text-white shadow-lg hover:shadow-xl transition-all duration-300 font-semibold focus:ring-4 focus:ring-blue-300 group relative overflow-hidden animate-scale-in",onClick:t,"aria-label":"Start investing in BlockCoop packages today",style:{animationDelay:"0.7s"},children:[c.jsxs("span",{className:"relative z-10 flex items-center",children:[" Buy $BLOCKS Now",c.jsx(Sg,{className:"ml-2 h-5 w-5 group-hover:translate-x-1 transition-transform","aria-hidden":"true"})]}),c.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/20 to-transparent -translate-x-full group-hover:translate-x-full transition-transform duration-700"})]}),c.jsx(se,{variant:"outline",size:"lg",className:"px-8 py-4 bg-white/90 backdrop-blur-sm border-2 border-blue-600 text-blue-700 hover:bg-blue-600 hover:text-white shadow-lg hover:shadow-xl transition-all duration-300 font-semibold focus:ring-4 focus:ring-blue-300 group animate-scale-in",onClick:()=>window.location.href="/trading","aria-label":"Go to trading page",style:{animationDelay:"0.8s"},children:" Trade on PancakeSwap"})]})]}),c.jsx("div",{className:"lg:col-span-2 flex justify-center lg:justify-end items-center h-full animate-slide-in-right",children:c.jsxs("div",{className:"flex items-center justify-center w-full h-full relative",children:[c.jsx(A1e,{size:"giant",animated:!0,sophisticated:!0,className:"hover:scale-110 transition-all duration-500 ease-out transform hover:rotate-3 hover:shadow-2xl animate-scale-in",style:{animationDelay:"0.9s"}}),c.jsx("div",{className:"absolute -top-4 -right-4 w-8 h-8 bg-gradient-to-r from-blue-400 to-purple-400 rounded-full opacity-20 animate-pulse animate-scale-in hidden md:block",style:{animationDelay:"1s"}}),c.jsx("div",{className:"absolute -bottom-4 -left-4 w-6 h-6 bg-gradient-to-r from-purple-400 to-teal-400 rounded-full opacity-30 animate-pulse animate-scale-in hidden md:block",style:{animationDelay:"1.1s"}})]})})]})]}),c.jsx("div",{className:"bg-gradient-to-br from-indigo-50 via-purple-50 to-blue-50 rounded-3xl p-8 md:p-12 space-y-8",children:c.jsxs("div",{className:"text-center space-y-4",children:[c.jsx("h2",{className:"text-3xl md:text-4xl font-bold text-gray-900",children:" The Mission"}),c.jsxs("p",{className:"text-lg text-gray-600 max-w-4xl mx-auto leading-relaxed",children:["BlockCoop SACCO is building a financial revolution in Africa and other emerging markets. Our goal is simple but powerful:",c.jsx("span",{className:"block mt-4 font-semibold text-gray-800",children:"Use blockchain technology and digital assets to create financial freedom and wealth for the underserved"})]}),c.jsx("p",{className:"text-lg text-gray-600 max-w-3xl mx-auto",children:"We invest in high-yielding real-world assets giving you stable returns and sustainable impact"})]})}),c.jsxs("div",{className:"space-y-12",children:[c.jsxs("div",{className:"text-center space-y-4",children:[c.jsx("h2",{className:"text-3xl md:text-4xl font-bold text-gray-900",children:" Why Buy $BLOCKS Token?"}),c.jsxs("p",{className:"text-lg text-gray-600 max-w-4xl mx-auto leading-relaxed",children:["When you hold $BLOCKS, you don't just own a token.",c.jsx("span",{className:"block mt-2 font-semibold text-gray-800",children:"You own a share of Africa's first blockchain-powered SACCO."})]})]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[c.jsx(ne,{className:"text-center group hover:shadow-xl transition-all duration-300 border-0 bg-gradient-to-br from-blue-50 to-blue-100",children:c.jsxs(re,{className:"p-6 space-y-4",children:[c.jsx("div",{className:"w-16 h-16 bg-blue-600 rounded-full flex items-center justify-center mx-auto group-hover:scale-110 transition-transform duration-300",children:c.jsx(Fl,{className:"h-8 w-8 text-white"})}),c.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:" Daily Yields"}),c.jsx("p",{className:"text-gray-600 text-sm",children:"Earn daily returns through staking fees and transaction taxes from the BLOCKS ecosystem"})]})}),c.jsx(ne,{className:"text-center group hover:shadow-xl transition-all duration-300 border-0 bg-gradient-to-br from-purple-50 to-purple-100",children:c.jsxs(re,{className:"p-6 space-y-4",children:[c.jsx("div",{className:"w-16 h-16 bg-purple-600 rounded-full flex items-center justify-center mx-auto group-hover:scale-110 transition-transform duration-300",children:c.jsx(Ts,{className:"h-8 w-8 text-white"})}),c.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:" Annual Dividends"}),c.jsx("p",{className:"text-gray-600 text-sm",children:"Enjoy share-like dividends as BlockCoop SACCO grows and profits from its asset base"})]})}),c.jsx(ne,{className:"text-center group hover:shadow-xl transition-all duration-300 border-0 bg-gradient-to-br from-green-50 to-green-100",children:c.jsxs(re,{className:"p-6 space-y-4",children:[c.jsx("div",{className:"w-16 h-16 bg-green-600 rounded-full flex items-center justify-center mx-auto group-hover:scale-110 transition-transform duration-300",children:c.jsx(_r,{className:"h-8 w-8 text-white"})}),c.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:" 100x Potential"}),c.jsx("p",{className:"text-gray-600 text-sm",children:"As adoption grows across Africa, your early entry can deliver massive capital gains"})]})}),c.jsx(ne,{className:"text-center group hover:shadow-xl transition-all duration-300 border-0 bg-gradient-to-br from-orange-50 to-orange-100",children:c.jsxs(re,{className:"p-6 space-y-4",children:[c.jsx("div",{className:"w-16 h-16 bg-orange-600 rounded-full flex items-center justify-center mx-auto group-hover:scale-110 transition-transform duration-300",children:c.jsx(Za,{className:"h-8 w-8 text-white"})}),c.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:" Liquidity Options"}),c.jsx("p",{className:"text-gray-600 text-sm",children:"Trade on PancakeSwap or exit through our liquidity packages with flexible option."})]})}),c.jsx(ne,{className:"text-center group hover:shadow-xl transition-all duration-300 border-0 bg-gradient-to-br from-teal-50 to-teal-100",children:c.jsxs(re,{className:"p-6 space-y-4",children:[c.jsx("div",{className:"w-16 h-16 bg-teal-600 rounded-full flex items-center justify-center mx-auto group-hover:scale-110 transition-transform duration-300",children:c.jsx(bx,{className:"h-8 w-8 text-white"})}),c.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:" Real World Backing"}),c.jsx("p",{className:"text-gray-600 text-sm",children:"Funds invested in assets that matter housing, trade, digital infrastructure, and productive credit"})]})}),c.jsx(ne,{className:"text-center group hover:shadow-xl transition-all duration-300 border-0 bg-gradient-to-br from-indigo-50 to-indigo-100",children:c.jsxs(re,{className:"p-6 space-y-4",children:[c.jsx("div",{className:"w-16 h-16 bg-indigo-600 rounded-full flex items-center justify-center mx-auto group-hover:scale-110 transition-transform duration-300",children:c.jsx(cr,{className:"h-8 w-8 text-white"})}),c.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:" Community Empowerment"}),c.jsx("p",{className:"text-gray-600 text-sm",children:"Every purchase supports financial inclusion across Africa and emerging markets"})]})})]})]}),c.jsxs("div",{className:"space-y-12",children:[c.jsxs("div",{className:"text-center space-y-4",children:[c.jsx("h2",{className:"text-3xl md:text-4xl font-bold text-gray-900",children:" Two Ways to Buy $BLOCKS"}),c.jsx("p",{className:"text-lg text-gray-600 max-w-3xl mx-auto",children:"Choose the method that best fits your investment strategy and trading preferences"})]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[c.jsx(ne,{className:"group hover:shadow-xl transition-all duration-300 border-0 bg-gradient-to-br from-blue-50 to-purple-50",children:c.jsxs(re,{className:"p-8 space-y-6",children:[c.jsxs("div",{className:"text-center",children:[c.jsx("div",{className:"w-20 h-20 bg-gradient-to-br from-blue-600 to-purple-600 rounded-full flex items-center justify-center mx-auto group-hover:scale-110 transition-transform duration-300",children:c.jsx(Za,{className:"h-10 w-10 text-white"})}),c.jsx("h3",{className:"text-2xl font-bold text-gray-900 mt-4",children:" 1. Buy Token Packages"}),c.jsx("p",{className:"text-gray-600 mt-2",children:"Purchase directly from our treasury and get:"})]}),c.jsxs("div",{className:"space-y-3",children:[c.jsxs("div",{className:"flex items-center space-x-3",children:[c.jsx(sr,{className:"h-5 w-5 text-green-600 flex-shrink-0"}),c.jsx("span",{className:"text-gray-700",children:"Best price per token"})]}),c.jsxs("div",{className:"flex items-center space-x-3",children:[c.jsx(sr,{className:"h-5 w-5 text-green-600 flex-shrink-0"}),c.jsx("span",{className:"text-gray-700",children:"Daily liquidity taxes"})]}),c.jsxs("div",{className:"flex items-center space-x-3",children:[c.jsx(sr,{className:"h-5 w-5 text-green-600 flex-shrink-0"}),c.jsx("span",{className:"text-gray-700",children:"Eligibility for annual dividend pool"})]}),c.jsxs("div",{className:"flex items-center space-x-3",children:[c.jsx(sr,{className:"h-5 w-5 text-green-600 flex-shrink-0"}),c.jsx("span",{className:"text-gray-700",children:"Up to 15% discount on packages more than $1000"})]}),c.jsxs("div",{className:"flex items-center space-x-3",children:[c.jsx(sr,{className:"h-5 w-5 text-green-600 flex-shrink-0"}),c.jsx("span",{className:"text-gray-700",children:"No trading fees"})]})]}),c.jsx("div",{className:"bg-green-50 p-4 rounded-lg",children:c.jsx("p",{className:"text-green-800 text-sm font-medium",children:" Great for long-term holders and impact investors"})}),c.jsxs(se,{size:"lg",className:"w-full px-8 py-4 bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700 text-white shadow-lg hover:shadow-xl transition-all duration-300 font-semibold",onClick:t,children:[" Buy Packages Now",c.jsx(Sg,{className:"ml-2 h-5 w-5"})]})]})}),c.jsx(ne,{className:"group hover:shadow-xl transition-all duration-300 border-0 bg-gradient-to-br from-orange-50 to-yellow-50",children:c.jsxs(re,{className:"p-8 space-y-6",children:[c.jsxs("div",{className:"text-center",children:[c.jsx("div",{className:"w-20 h-20 bg-gradient-to-br from-orange-600 to-yellow-600 rounded-full flex items-center justify-center mx-auto group-hover:scale-110 transition-transform duration-300",children:c.jsx(_r,{className:"h-10 w-10 text-white"})}),c.jsx("h3",{className:"text-2xl font-bold text-gray-900 mt-4",children:" 2. Buy from PancakeSwap (DEX)"}),c.jsx("p",{className:"text-gray-600 mt-2",children:"Prefer flexible trading and fast exit? Use PancakeSwap:"})]}),c.jsxs("div",{className:"space-y-3",children:[c.jsxs("div",{className:"flex items-center space-x-3",children:[c.jsx(sr,{className:"h-5 w-5 text-orange-600 flex-shrink-0"}),c.jsx("span",{className:"text-gray-700",children:"Daily staking taxes earn you rewards"})]}),c.jsxs("div",{className:"flex items-center space-x-3",children:[c.jsx(sr,{className:"h-5 w-5 text-orange-600 flex-shrink-0"}),c.jsx("span",{className:"text-gray-700",children:"Open-market pricing"})]}),c.jsxs("div",{className:"flex items-center space-x-3",children:[c.jsx(sr,{className:"h-5 w-5 text-orange-600 flex-shrink-0"}),c.jsx("span",{className:"text-gray-700",children:"Instant liquidity"})]}),c.jsxs("div",{className:"flex items-center space-x-3",children:[c.jsx(sr,{className:"h-5 w-5 text-orange-600 flex-shrink-0"}),c.jsx("span",{className:"text-gray-700",children:"24/7 trading availability"})]}),c.jsxs("div",{className:"flex items-center space-x-3",children:[c.jsx(sr,{className:"h-5 w-5 text-orange-600 flex-shrink-0"}),c.jsx("span",{className:"text-gray-700",children:"Ideal for active traders"})]})]}),c.jsx("div",{className:"bg-orange-50 p-4 rounded-lg",children:c.jsx("p",{className:"text-orange-800 text-sm font-medium",children:" Perfect for traders who want immediate market access."})}),c.jsxs(se,{size:"lg",variant:"outline",className:"w-full px-8 py-4 bg-gradient-to-r from-orange-600 to-yellow-600 hover:from-orange-700 hover:to-yellow-700 text-white border-0 shadow-lg hover:shadow-xl transition-all duration-300 font-semibold",onClick:()=>window.open("https://pancakeswap.finance","_blank"),children:[" Trade on PancakeSwap",c.jsx(Sg,{className:"ml-2 h-5 w-5"})]})]})})]})]}),c.jsxs("div",{id:"packages-section",className:"space-y-8",children:[c.jsxs("div",{className:"text-center",children:[c.jsx("h2",{className:"text-3xl font-bold text-gray-900 mb-4",children:"Investment Packages"}),c.jsx("p",{className:"text-lg text-gray-600 max-w-2xl mx-auto",children:"Choose from our carefully crafted investment packages, each designed with unique split ratios and vesting schedules"})]}),c.jsx(C1e,{})]}),c.jsxs("div",{id:"how-it-works-section",className:"space-y-12",children:[c.jsxs("div",{className:"text-center space-y-4",children:[c.jsx("h2",{className:"text-3xl md:text-4xl font-bold text-gray-900",children:"How It Works"}),c.jsx("p",{className:"text-lg text-gray-600 max-w-3xl mx-auto",children:"Simple, transparent, and automated - get started in three easy steps"})]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:[c.jsxs("div",{className:"text-center space-y-6",children:[c.jsxs("div",{className:"relative",children:[c.jsx("div",{className:"w-20 h-20 bg-gradient-to-br from-blue-600 to-purple-600 rounded-full flex items-center justify-center mx-auto shadow-lg",children:c.jsx(Za,{className:"h-10 w-10 text-white"})}),c.jsx("div",{className:"absolute -top-2 -right-2 w-8 h-8 bg-gradient-to-r from-orange-500 to-yellow-500 rounded-full flex items-center justify-center shadow-md",children:c.jsx("span",{className:"text-white font-bold text-sm",children:"1"})})]}),c.jsxs("div",{className:"space-y-3",children:[c.jsx("h3",{className:"text-xl font-semibold text-gray-900",children:"Purchase Investment Package"}),c.jsx("p",{className:"text-gray-600",children:"Select and purchase an investment package using USDT. Each package is designed with specific token distribution ratios and dividend earning potential."})]})]}),c.jsxs("div",{className:"text-center space-y-6",children:[c.jsxs("div",{className:"relative",children:[c.jsx("div",{className:"w-20 h-20 bg-gradient-to-br from-purple-600 to-teal-600 rounded-full flex items-center justify-center mx-auto shadow-lg",children:c.jsx(zS,{className:"h-10 w-10 text-white"})}),c.jsx("div",{className:"absolute -top-2 -right-2 w-8 h-8 bg-gradient-to-r from-orange-500 to-yellow-500 rounded-full flex items-center justify-center shadow-md",children:c.jsx("span",{className:"text-white font-bold text-sm",children:"2"})})]}),c.jsxs("div",{className:"space-y-3",children:[c.jsx("h3",{className:"text-xl font-semibold text-gray-900",children:"Receive BLOCKS Tokens"}),c.jsx("p",{className:"text-gray-600",children:"Automatically receive BLOCKS tokens distributed through vesting schedules and liquidity pools. Your tokens immediately start earning dividend eligibility."})]})]}),c.jsxs("div",{className:"text-center space-y-6",children:[c.jsxs("div",{className:"relative",children:[c.jsx("div",{className:"w-20 h-20 bg-gradient-to-br from-teal-600 to-green-600 rounded-full flex items-center justify-center mx-auto shadow-lg",children:c.jsx(Ts,{className:"h-10 w-10 text-white"})}),c.jsx("div",{className:"absolute -top-2 -right-2 w-8 h-8 bg-gradient-to-r from-orange-500 to-yellow-500 rounded-full flex items-center justify-center shadow-md",children:c.jsx("span",{className:"text-white font-bold text-sm",children:"3"})})]}),c.jsxs("div",{className:"space-y-3",children:[c.jsx("h3",{className:"text-xl font-semibold text-gray-900",children:"Earn Annual Dividends"}),c.jsx("p",{className:"text-gray-600",children:"Receive annual dividend payments based on your BLOCKS token holdings. Trade tokens on secondary markets while maintaining dividend eligibility."})]})]})]})]}),c.jsxs("div",{id:"benefits-section",className:"space-y-12",children:[c.jsxs("div",{className:"text-center space-y-4",children:[c.jsx("h2",{className:"text-3xl md:text-4xl font-bold text-gray-900",children:"Benefits of Holding $BLOCKS"}),c.jsx("p",{className:"text-lg text-gray-600 max-w-3xl mx-auto",children:"Unlock multiple benefits and opportunities with your BLOCKS token holdings"})]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[c.jsx(ne,{className:"group hover:shadow-xl transition-all duration-300 border-0 bg-gradient-to-br from-blue-50 to-blue-100",children:c.jsxs(re,{className:"p-6 space-y-4",children:[c.jsx("div",{className:"w-12 h-12 bg-blue-600 rounded-lg flex items-center justify-center group-hover:scale-110 transition-transform duration-300",children:c.jsx(bx,{className:"h-6 w-6 text-white"})}),c.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Ownership Rights"}),c.jsx("p",{className:"text-gray-600 text-sm",children:"Hold ownership stakes in the SACCO with voting rights on key decisions and governance proposals"})]})}),c.jsx(ne,{className:"group hover:shadow-xl transition-all duration-300 border-0 bg-gradient-to-br from-green-50 to-green-100",children:c.jsxs(re,{className:"p-6 space-y-4",children:[c.jsx("div",{className:"w-12 h-12 bg-green-600 rounded-lg flex items-center justify-center group-hover:scale-110 transition-transform duration-300",children:c.jsx(Ts,{className:"h-6 w-6 text-white"})}),c.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Annual Dividends"}),c.jsx("p",{className:"text-gray-600 text-sm",children:"Receive proportional dividend payments from SACCO profits distributed annually to token holders"})]})}),c.jsx(ne,{className:"group hover:shadow-xl transition-all duration-300 border-0 bg-gradient-to-br from-purple-50 to-purple-100",children:c.jsxs(re,{className:"p-6 space-y-4",children:[c.jsx("div",{className:"w-12 h-12 bg-purple-600 rounded-lg flex items-center justify-center group-hover:scale-110 transition-transform duration-300",children:c.jsx(tm,{className:"h-6 w-6 text-white"})}),c.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Staking Rewards"}),c.jsx("p",{className:"text-gray-600 text-sm",children:"Stake your BLOCKS tokens to earn additional rewards and participate in enhanced dividend pools."})]})}),c.jsx(ne,{className:"group hover:shadow-xl transition-all duration-300 border-0 bg-gradient-to-br from-orange-50 to-orange-100",children:c.jsxs(re,{className:"p-6 space-y-4",children:[c.jsx("div",{className:"w-12 h-12 bg-orange-600 rounded-lg flex items-center justify-center group-hover:scale-110 transition-transform duration-300",children:c.jsx(_r,{className:"h-6 w-6 text-white"})}),c.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Trading Opportunities"}),c.jsx("p",{className:"text-gray-600 text-sm",children:"Trade BLOCKS tokens on secondary markets for immediate liquidity while maintaining dividend eligibility"})]})}),c.jsx(ne,{className:"group hover:shadow-xl transition-all duration-300 border-0 bg-gradient-to-br from-teal-50 to-teal-100",children:c.jsxs(re,{className:"p-6 space-y-4",children:[c.jsx("div",{className:"w-12 h-12 bg-teal-600 rounded-lg flex items-center justify-center group-hover:scale-110 transition-transform duration-300",children:c.jsx(Uye,{className:"h-6 w-6 text-white"})}),c.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Loan Collateral"}),c.jsx("p",{className:"text-gray-600 text-sm",children:"Use BLOCKS tokens as collateral for loans within the SACCO ecosystem at preferential rates."})]})}),c.jsx(ne,{className:"group hover:shadow-xl transition-all duration-300 border-0 bg-gradient-to-br from-indigo-50 to-indigo-100",children:c.jsxs(re,{className:"p-6 space-y-4",children:[c.jsx("div",{className:"w-12 h-12 bg-indigo-600 rounded-lg flex items-center justify-center group-hover:scale-110 transition-transform duration-300",children:c.jsx(Lye,{className:"h-6 w-6 text-white"})}),c.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Financial Education"}),c.jsx("p",{className:"text-gray-600 text-sm",children:"Access exclusive educational resources, workshops, and financial literacy programs for token holders"})]})}),c.jsx(ne,{className:"group hover:shadow-xl transition-all duration-300 border-0 bg-gradient-to-br from-pink-50 to-pink-100",children:c.jsxs(re,{className:"p-6 space-y-4",children:[c.jsx("div",{className:"w-12 h-12 bg-pink-600 rounded-lg flex items-center justify-center group-hover:scale-110 transition-transform duration-300",children:c.jsx(mN,{className:"h-6 w-6 text-white"})}),c.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Global Access"}),c.jsx("p",{className:"text-gray-600 text-sm",children:"Access your investments and dividends from anywhere in the world with blockchain transparency"})]})}),c.jsx(ne,{className:"group hover:shadow-xl transition-all duration-300 border-0 bg-gradient-to-br from-yellow-50 to-yellow-100",children:c.jsxs(re,{className:"p-6 space-y-4",children:[c.jsx("div",{className:"w-12 h-12 bg-yellow-600 rounded-lg flex items-center justify-center group-hover:scale-110 transition-transform duration-300",children:c.jsx(Kye,{className:"h-6 w-6 text-white"})}),c.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Retirement Planning"}),c.jsx("p",{className:"text-gray-600 text-sm",children:"Build long-term wealth through vesting schedules and compound dividend growth for retirement security."})]})}),c.jsx(ne,{className:"group hover:shadow-xl transition-all duration-300 border-0 bg-gradient-to-br from-red-50 to-red-100",children:c.jsxs(re,{className:"p-6 space-y-4",children:[c.jsx("div",{className:"w-12 h-12 bg-red-600 rounded-lg flex items-center justify-center group-hover:scale-110 transition-transform duration-300",children:c.jsx(ewe,{className:"h-6 w-6 text-white"})}),c.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Referral Rewards"}),c.jsx("p",{className:"text-gray-600 text-sm",children:"Earn additional BLOCKS tokens by referring new members to the SACCO community and ecosystem"})]})})]})]}),c.jsxs("div",{className:"space-y-12",children:[c.jsxs("div",{className:"text-center space-y-4",children:[c.jsx("h2",{className:"text-3xl md:text-4xl font-bold text-gray-900",children:"Perfect for Every Investor"}),c.jsx("p",{className:"text-lg text-gray-600 max-w-3xl mx-auto",children:"Whether you're new to DeFi or a seasoned investor, BlockCoop has something for you"})]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:[c.jsx(ne,{className:"group hover:shadow-xl transition-all duration-300 border-0 bg-gradient-to-br from-blue-50 to-purple-50",children:c.jsxs(re,{className:"p-8 text-center space-y-6",children:[c.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-blue-600 to-purple-600 rounded-full flex items-center justify-center mx-auto group-hover:scale-110 transition-transform duration-300",children:c.jsx(qS,{className:"h-8 w-8 text-white"})}),c.jsxs("div",{className:"space-y-3",children:[c.jsx("h3",{className:"text-xl font-semibold text-gray-900",children:"DeFi Enthusiasts"}),c.jsx("p",{className:"text-gray-600",children:"Explore advanced token distribution mechanisms, automated dividend systems, and yield optimization strategies in a secure, audited environment with transparent smart contracts"})]}),c.jsxs("div",{className:"flex flex-wrap gap-2 justify-center",children:[c.jsx("span",{className:"px-3 py-1 bg-blue-100 text-blue-700 rounded-full text-xs font-medium",children:"Advanced Features"}),c.jsx("span",{className:"px-3 py-1 bg-purple-100 text-purple-700 rounded-full text-xs font-medium",children:"High Yields"}),c.jsx("span",{className:"px-3 py-1 bg-teal-100 text-teal-700 rounded-full text-xs font-medium",children:"Smart Contracts"})]})]})}),c.jsx(ne,{className:"group hover:shadow-xl transition-all duration-300 border-0 bg-gradient-to-br from-green-50 to-teal-50",children:c.jsxs(re,{className:"p-8 text-center space-y-6",children:[c.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-green-600 to-teal-600 rounded-full flex items-center justify-center mx-auto group-hover:scale-110 transition-transform duration-300",children:c.jsx(Fye,{className:"h-8 w-8 text-white"})}),c.jsxs("div",{className:"space-y-3",children:[c.jsx("h3",{className:"text-xl font-semibold text-gray-900",children:"Traditional Investors"}),c.jsx("p",{className:"text-gray-600",children:"Experience familiar SACCO investment principles enhanced with blockchain transparency, security, and global accessibility. Earn dividends like traditional investments."})]}),c.jsxs("div",{className:"flex flex-wrap gap-2 justify-center",children:[c.jsx("span",{className:"px-3 py-1 bg-green-100 text-green-700 rounded-full text-xs font-medium",children:"Familiar Concepts"}),c.jsx("span",{className:"px-3 py-1 bg-teal-100 text-teal-700 rounded-full text-xs font-medium",children:"Enhanced Security"}),c.jsx("span",{className:"px-3 py-1 bg-blue-100 text-blue-700 rounded-full text-xs font-medium",children:"Annual Dividends"})]})]})}),c.jsx(ne,{className:"group hover:shadow-xl transition-all duration-300 border-0 bg-gradient-to-br from-orange-50 to-yellow-50",children:c.jsxs(re,{className:"p-8 text-center space-y-6",children:[c.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-orange-600 to-yellow-600 rounded-full flex items-center justify-center mx-auto group-hover:scale-110 transition-transform duration-300",children:c.jsx(cr,{className:"h-8 w-8 text-white"})}),c.jsxs("div",{className:"space-y-3",children:[c.jsx("h3",{className:"text-xl font-semibold text-gray-900",children:"SACCO Members"}),c.jsx("p",{className:"text-gray-600",children:"Modernize your cooperative investments with blockchain technology while maintaining the community-driven values, mutual support, and shared prosperity you know and trust."})]}),c.jsxs("div",{className:"flex flex-wrap gap-2 justify-center",children:[c.jsx("span",{className:"px-3 py-1 bg-orange-100 text-orange-700 rounded-full text-xs font-medium",children:"Community Focus"}),c.jsx("span",{className:"px-3 py-1 bg-yellow-100 text-yellow-700 rounded-full text-xs font-medium",children:"Modern Tools"}),c.jsx("span",{className:"px-3 py-1 bg-red-100 text-red-700 rounded-full text-xs font-medium",children:"Shared Prosperity"})]})]})})]})]}),c.jsx("div",{className:"bg-gradient-to-r from-purple-600 via-blue-600 to-green-600 rounded-3xl p-8 md:p-12 text-center text-white",children:c.jsxs("div",{className:"space-y-6",children:[c.jsx("h2",{className:"text-3xl md:text-4xl font-bold",children:"Ready to Start Your Investment Journey?"}),c.jsx("p",{className:"text-xl opacity-90 max-w-3xl mx-auto",children:"Join thousands of investors who are already benefiting from blockchain-powered SACCO investments. Start with any package and experience the future of cooperative finance."}),c.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center items-center",children:[c.jsxs(se,{size:"lg",className:"px-8 py-4 bg-white text-purple-950 hover:bg-purple-50 hover:text-purple-900 shadow-lg hover:shadow-xl transition-all duration-300 font-semibold border-2 border-blue-400 focus:ring-4 focus:ring-white/50",onClick:t,"aria-label":"View all available investment packages",children:["View All Packages",c.jsx(Sg,{className:"ml-2 h-5 w-5","aria-hidden":"true"})]}),c.jsx(se,{size:"lg",variant:"outline",className:"px-8 py-4 bg-white/20 backdrop-blur-sm border-2 border-blue-400 text-white hover:bg-white hover:text-purple-600 shadow-lg hover:shadow-xl transition-all duration-300 font-semibold focus:ring-4 focus:ring-white/50",onClick:e,"aria-label":"Learn more about how BlockCoop works",children:"Learn More"})]})]})}),c.jsxs("div",{className:"space-y-12",children:[c.jsxs("div",{className:"text-center space-y-4",children:[c.jsx("h2",{className:"text-3xl md:text-4xl font-bold text-gray-900",children:"Trusted by the Community"}),c.jsx("p",{className:"text-lg text-gray-600 max-w-3xl mx-auto",children:"Built on proven technology with transparent operations and community-first principles"})]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[c.jsx(ne,{className:"text-center space-y-4 border-0 bg-gradient-to-br from-green-50 to-green-100",children:c.jsxs(re,{className:"p-6",children:[c.jsx("div",{className:"w-12 h-12 bg-green-600 rounded-lg flex items-center justify-center mx-auto",children:c.jsx(sr,{className:"h-6 w-6 text-white"})}),c.jsx("h4",{className:"font-semibold text-gray-900",children:"Smart Contract Audited"}),c.jsx("p",{className:"text-gray-600 text-sm",children:"Comprehensive security audit completed by blockchain experts"})]})}),c.jsx(ne,{className:"text-center space-y-4 border-0 bg-gradient-to-br from-blue-50 to-blue-100",children:c.jsxs(re,{className:"p-6",children:[c.jsx("div",{className:"w-12 h-12 bg-blue-600 rounded-lg flex items-center justify-center mx-auto",children:c.jsx(tm,{className:"h-6 w-6 text-white"})}),c.jsx("h4",{className:"font-semibold text-gray-900",children:"Secure Vesting"}),c.jsx("p",{className:"text-gray-600 text-sm",children:"Time-locked smart contracts protect your long-term investments"})]})}),c.jsx(ne,{className:"text-center space-y-4 border-0 bg-gradient-to-br from-purple-50 to-purple-100",children:c.jsxs(re,{className:"p-6",children:[c.jsx("div",{className:"w-12 h-12 bg-purple-600 rounded-lg flex items-center justify-center mx-auto",children:c.jsx(mN,{className:"h-6 w-6 text-white"})}),c.jsx("h4",{className:"font-semibold text-gray-900",children:"BSC Network"}),c.jsx("p",{className:"text-gray-600 text-sm",children:"Built on proven Binance Smart Chain infrastructure"})]})}),c.jsx(ne,{className:"text-center space-y-4 border-0 bg-gradient-to-br from-orange-50 to-orange-100",children:c.jsxs(re,{className:"p-6",children:[c.jsx("div",{className:"w-12 h-12 bg-orange-600 rounded-lg flex items-center justify-center mx-auto",children:c.jsx(aa,{className:"h-6 w-6 text-white"})}),c.jsx("h4",{className:"font-semibold text-gray-900",children:"Transparent Operations"}),c.jsx("p",{className:"text-gray-600 text-sm",children:"All transactions visible and verifiable on blockchain"})]})})]})]}),c.jsx("div",{className:"bg-gradient-to-br from-gray-50 to-blue-50 rounded-3xl p-8 md:p-12",children:c.jsxs("div",{className:"space-y-8",children:[c.jsxs("div",{className:"text-center space-y-4",children:[c.jsx("h2",{className:"text-3xl md:text-4xl font-bold text-gray-900",children:"Why Trade with BlockCoop?"}),c.jsx("p",{className:"text-lg text-gray-600 max-w-3xl mx-auto",children:"Experience the advantages of blockchain-powered SACCO investments"})]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[c.jsxs("div",{className:"flex items-start space-x-4",children:[c.jsx("div",{className:"w-12 h-12 bg-blue-600 rounded-lg flex items-center justify-center flex-shrink-0",children:c.jsx(aa,{className:"h-6 w-6 text-white"})}),c.jsxs("div",{children:[c.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:"Transparent & Secure"}),c.jsx("p",{className:"text-gray-600 text-sm",children:"All transactions are recorded on the blockchain, ensuring complete transparency and security for your investments."})]})]}),c.jsxs("div",{className:"flex items-start space-x-4",children:[c.jsx("div",{className:"w-12 h-12 bg-green-600 rounded-lg flex items-center justify-center flex-shrink-0",children:c.jsx(mN,{className:"h-6 w-6 text-white"})}),c.jsxs("div",{children:[c.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:"Global Accessibility"}),c.jsx("p",{className:"text-gray-600 text-sm",children:"Access your investments 24/7 from anywhere in the world with just an internet connection and wallet."})]})]}),c.jsxs("div",{className:"flex items-start space-x-4",children:[c.jsx("div",{className:"w-12 h-12 bg-orange-600 rounded-lg flex items-center justify-center flex-shrink-0",children:c.jsx(Fl,{className:"h-6 w-6 text-white"})}),c.jsxs("div",{children:[c.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:"Instant Settlements"}),c.jsx("p",{className:"text-gray-600 text-sm",children:"No waiting for bank transfers or clearing houses - transactions settle instantly on the blockchain."})]})]}),c.jsxs("div",{className:"flex items-start space-x-4",children:[c.jsx("div",{className:"w-12 h-12 bg-purple-600 rounded-lg flex items-center justify-center flex-shrink-0",children:c.jsx(Mye,{className:"h-6 w-6 text-white"})}),c.jsxs("div",{children:[c.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:"Flexible Investment Options"}),c.jsx("p",{className:"text-gray-600 text-sm",children:"Choose from multiple packages with different risk profiles, vesting periods, and liquidity options."})]})]}),c.jsxs("div",{className:"flex items-start space-x-4",children:[c.jsx("div",{className:"w-12 h-12 bg-teal-600 rounded-lg flex items-center justify-center flex-shrink-0",children:c.jsx(cr,{className:"h-6 w-6 text-white"})}),c.jsxs("div",{children:[c.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:"Community-Driven"}),c.jsx("p",{className:"text-gray-600 text-sm",children:"Built on SACCO principles of mutual cooperation and shared prosperity within a decentralized framework."})]})]}),c.jsxs("div",{className:"flex items-start space-x-4",children:[c.jsx("div",{className:"w-12 h-12 bg-indigo-600 rounded-lg flex items-center justify-center flex-shrink-0",children:c.jsx(lT,{className:"h-6 w-6 text-white"})}),c.jsxs("div",{children:[c.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:"Proven Technology"}),c.jsx("p",{className:"text-gray-600 text-sm",children:"Built on Binance Smart Chain with battle-tested smart contracts and comprehensive security audits."})]})]})]})]})}),c.jsx("div",{className:"bg-gradient-to-r from-green-600 via-teal-600 to-blue-600 rounded-3xl p-8 md:p-12 text-center text-white",children:c.jsxs("div",{className:"space-y-6",children:[c.jsx("h2",{className:"text-3xl md:text-4xl font-bold",children:" Join the Movement"}),c.jsxs("div",{className:"max-w-4xl mx-auto space-y-4",children:[c.jsxs("p",{className:"text-xl opacity-90",children:["By owning $BLOCKS, you're investing in more than profits",c.jsx("span",{className:"block font-semibold",children:"you're investing in people, progress, and possibilities."})]}),c.jsx("p",{className:"text-lg opacity-80",children:"Be among the pioneers shaping the future of African finance."}),c.jsx("p",{className:"text-xl font-semibold",children:"Empower a continent. Earn real returns. That's the $BLOCKS promise."})]}),c.jsxs("div",{className:"mt-8 pt-6 border-t border-white/20",children:[c.jsx("p",{className:"text-sm opacity-75 mb-6",children:"Connect with us on social media:"}),c.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-4 mb-6",children:[c.jsxs("a",{href:"https://x.com/BlockCoopSACCO",target:"_blank",rel:"noopener noreferrer",className:"flex items-center justify-center space-x-2 bg-white/20 backdrop-blur-sm px-4 py-3 rounded-full hover:bg-white/30 transition-all duration-300",children:[c.jsx(Xye,{className:"h-5 w-5"}),c.jsx("span",{className:"text-sm font-medium",children:"Twitter"})]}),c.jsxs("a",{href:"https://api.whatsapp.com/send?phone=254798087598",target:"_blank",rel:"noopener noreferrer",className:"flex items-center justify-center space-x-2 bg-white/20 backdrop-blur-sm px-4 py-3 rounded-full hover:bg-white/30 transition-all duration-300",children:[c.jsx(Wye,{className:"h-5 w-5"}),c.jsx("span",{className:"text-sm font-medium",children:"WhatsApp"})]}),c.jsxs("a",{href:"https://t.me/+4DC0cy18OLdmYmQ8",target:"_blank",rel:"noopener noreferrer",className:"flex items-center justify-center space-x-2 bg-white/20 backdrop-blur-sm px-4 py-3 rounded-full hover:bg-white/30 transition-all duration-300",children:[c.jsx(Qye,{className:"h-5 w-5"}),c.jsx("span",{className:"text-sm font-medium",children:"Telegram"})]}),c.jsxs("a",{href:"https://www.instagram.com/blockcoop_sacco/",target:"_blank",rel:"noopener noreferrer",className:"flex items-center justify-center space-x-2 bg-white/20 backdrop-blur-sm px-4 py-3 rounded-full hover:bg-white/30 transition-all duration-300",children:[c.jsx(Hye,{className:"h-5 w-5"}),c.jsx("span",{className:"text-sm font-medium",children:"Instagram"})]}),c.jsxs("a",{href:"https://web.facebook.com/people/BlockCoop-SACCO/61572959396535/",target:"_blank",rel:"noopener noreferrer",className:"flex items-center justify-center space-x-2 bg-white/20 backdrop-blur-sm px-4 py-3 rounded-full hover:bg-white/30 transition-all duration-300",children:[c.jsx($ye,{className:"h-5 w-5"}),c.jsx("span",{className:"text-sm font-medium",children:"Facebook"})]})]}),c.jsx("div",{className:"flex flex-col sm:flex-row gap-4 justify-center items-center text-sm",children:c.jsxs("a",{href:"https://play.google.com/store/apps/details?id=com.app.sortika",target:"_blank",rel:"noopener noreferrer",className:"flex items-center space-x-2 bg-white/20 backdrop-blur-sm px-4 py-2 rounded-full hover:bg-white/30 transition-all duration-300",children:[c.jsx(Za,{className:"h-4 w-4"}),c.jsx("span",{children:" Download Sortika App"})]})})]})]})}),c.jsx("div",{className:"border-t border-gray-200 pt-8",children:c.jsx("div",{className:"text-center text-gray-500 text-sm",children:c.jsx("p",{children:"BlockCoop is a decentralized platform. Always do your own research and invest responsibly. Past performance does not guarantee future results."})})})]})}const S1e=new Date("2025-07-10T23:42:09.537Z").getTime()/1e3;new Date("2025-07-12T19:09:58.081Z").getTime()/1e3;const Ig=.95;function p9(t){return t<S1e}function m9(t,e){const n=e>10000n*10n**18n,r=e>1000000000000n*10n**18n;return n||r}function kd(t){const e=parseFloat(rt(t,18));return!isFinite(e)||e<0?1:e>1e14?(console.warn(" Applying extreme correction for hundred-trillion-scale value:",e.toLocaleString()),1e-13):e>1e12?(console.warn(" Applying strong correction for trillion-scale value:",e.toLocaleString()),50/e):e>1e11?(console.warn(" Applying strong correction for hundred-billion-scale value:",e.toLocaleString()),1e-8):e>1e10?(console.warn(" Applying moderate correction for ten-billion-scale value:",e.toLocaleString()),1e-7):e>1e9?(console.warn(" Applying light correction for billion-scale value:",e.toLocaleString()),1e-6):e>1e8?(console.log(" Applying moderate correction for hundred-million-scale value:",e.toLocaleString()),1e-6):e>1e7?(console.log(" Applying moderate correction for ten-million-scale value:",e.toLocaleString()),1e-6):e>1e6?(console.log(" Applying light correction for million-scale value:",e.toLocaleString()),1e-5):e>1e5?.001:e>1e4?.01:e>1e3?.1:1}function Rb(t,e){return t*BigInt(Math.floor(Ig*1e4))/BigInt(1e4)}function k1e(t,e){if(!t||!e||e.length===0)return{...t,correctionApplied:!1,correctedPurchases:0,totalPurchases:0,correctionDetails:{originalTotalTokens:(t==null?void 0:t.totalTokensReceived)||0n,correctedTotalTokens:(t==null?void 0:t.totalTokensReceived)||0n,correctionAmount:0n}};let n=0n,r=0n,s=0n,i=0n,a=0;for(const l of e){const u=p9(l.timestamp),d=m9(l.timestamp,l.totalTokens);if((u||d)&&a++,d){const f=kd(l.totalTokens);n+=BigInt(Math.floor(Number(l.totalTokens)*f)),r+=BigInt(Math.floor(Number(l.vestTokens)*f)),s+=BigInt(Math.floor(Number(l.poolTokens)*f)),i+=BigInt(Math.floor(Number(l.lpTokens)*f))}else u?(n+=Rb(l.totalTokens),r+=Rb(l.vestTokens),s+=Rb(l.poolTokens),i+=Rb(l.lpTokens)):(n+=l.totalTokens,r+=l.vestTokens,s+=l.poolTokens,i+=l.lpTokens)}const o=t.totalTokensReceived-n;return{...t,totalTokensReceived:n,totalVestTokens:r,totalPoolTokens:s,totalLPTokens:i,correctionApplied:a>0,correctedPurchases:a,totalPurchases:e.length,correctionDetails:{originalTotalTokens:t.totalTokensReceived,correctedTotalTokens:n,correctionAmount:o}}}function _1e(t){const{correctionDetails:e,correctedPurchases:n,totalPurchases:r}=t,s=e.originalTotalTokens>0n?(Number(e.correctionAmount)/Number(e.originalTotalTokens)*100).toFixed(2):"0";return{correctionSummary:`Removed ${(Number(e.correctionAmount)/1e18).toFixed(2)} BLOCKS from inflated historical data`,correctionPercentage:`${s}% reduction applied`,affectedPurchases:`${n} of ${r} purchases corrected`}}function I1e(t){if(!t.correctionApplied)return{show:!1,title:"",message:"",type:"info"};const{correctionSummary:e,affectedPurchases:n}=_1e(t),s=Number(t.correctionDetails.correctionAmount)/1e18>1e6;return{show:!0,title:s?"Portfolio Values Corrected (Exchange Rate Issue)":"Portfolio Metrics Corrected",message:s?`Your portfolio values have been corrected due to an exchange rate configuration issue. The displayed values now reflect realistic token amounts. ${n}.`:`Your portfolio values have been corrected to remove inflated historical data. ${e}. ${n}.`,type:s?"warning":"info"}}function P1e(t){const e=p9(t.timestamp),n=m9(t.timestamp,t.totalTokens);if(!e&&!n)return t;if(n){const r=kd(t.totalTokens);return{...t,totalTokens:BigInt(Math.floor(Number(t.totalTokens)*r)),vestTokens:BigInt(Math.floor(Number(t.vestTokens)*r)),poolTokens:BigInt(Math.floor(Number(t.poolTokens)*r)),lpTokens:BigInt(Math.floor(Number(t.lpTokens)*r))}}else return{...t,totalTokens:BigInt(Math.floor(Number(t.totalTokens)*Ig)),vestTokens:BigInt(Math.floor(Number(t.vestTokens)*Ig)),poolTokens:BigInt(Math.floor(Number(t.poolTokens)*Ig)),lpTokens:BigInt(Math.floor(Number(t.lpTokens)*Ig))}}function R1e(){const{account:t,contracts:e,isConnected:n}=Rt(),[r,s]=v.useState({usdt:0n,share:0n,lp:0n,native:0n}),[i,a]=v.useState(!1),[o,l]=v.useState(null),u=v.useCallback(async()=>{var h;if(!t||!n){s({usdt:0n,share:0n,lp:0n,native:0n});return}a(!0),l(null);try{const[f,p,g]=await Promise.all([FB(t),HB(t),VB(t)]);let m=0n;if((h=e.packageManager)!=null&&h.provider)try{m=await e.packageManager.provider.getBalance(t)}catch(b){console.warn("Could not fetch native balance:",b)}const y={usdt:f,share:p,lp:g,native:m};return s(y),y}catch(f){const p=f instanceof Error?f.message:"Failed to fetch balances";l(p),console.error("Error fetching balances:",f)}finally{a(!1)}},[t,n,e.packageManager]);pc("refreshBalances",u),v.useEffect(()=>{u()},[t,n,u]);const d={usdt:Oe(r.usdt||0n,18,2),share:Oe(r.share||0n,18,4),lp:Oe(r.lp||0n,18,4),native:Oe(r.native||0n,18,4)};return{balances:r,formattedBalances:d,loading:i,error:o,fetchBalances:u,refetch:u}}function KR(t,e){if(e>=1)return t;const n=1e12,r=BigInt(Math.floor(e*n));return t*r/BigInt(n)}function Nw(){const{balances:t,formattedBalances:e,loading:n,error:r,refetch:s}=R1e(),{stats:i,loading:a,error:o}=g9(),{correctedStats:l,formattedCorrectedStats:u}=Cw(),d=(g,m)=>{if(m==="usdt")return Oe(g,18,2);if(g>0n){const y=kd(g);if(y<1){console.log(` Applying wallet balance correction for ${m}:`,{original:g.toString(),correctionFactor:y,corrected:KR(g,y).toString()});const b=KR(g,y);return Oe(b,18,4)}}return Oe(g,18,m==="usdt"?2:4)},h=t.share>0n&&kd(t.share)<1||t.lp>0n&&kd(t.lp)<1,f=(l==null?void 0:l.totalTokensReceived)||(i==null?void 0:i.totalTokensReceived)||0n;l!=null&&l.totalLPTokens||i!=null&&i.totalLPTokens;const p={...e,share:d(t.share,"share"),usdt:d(t.usdt,"usdt"),lp:d(t.lp,"lp"),shareTotal:Oe(f,18,4),shareWallet:d(t.share,"share")};return{balances:t,formattedBalances:p,loading:n||a,error:r||o,refetch:s,correctionApplied:h||(u==null?void 0:u.correctionApplied)||!1}}function j1e(){const{account:t,contracts:e,signer:n,isConnected:r}=Rt(),[s,i]=v.useState({totalVested:0n,claimable:0n,claimed:0n,remaining:0n,schedule:{cliff:0n,duration:0n,start:0n},cliffEndTime:0n,vestingEndTime:0n,isCliffPassed:!1,isFullyVested:!1,vestingProgress:0}),[a,o]=v.useState(!1),[l,u]=v.useState(null),d=v.useCallback(async()=>{if(!t||!e.vestingVault){i({totalVested:0n,claimable:0n,claimed:0n,remaining:0n,schedule:{cliff:0n,duration:0n,start:0n},cliffEndTime:0n,vestingEndTime:0n,isCliffPassed:!1,isFullyVested:!1,vestingProgress:0});return}o(!0),u(null);try{const p=await zB(t);return i(p),p}catch(p){const g=p instanceof Error?p.message:"Failed to fetch vesting info";u(g),console.error("Error fetching vesting info:",p)}finally{o(!1)}},[t,e.vestingVault]),h=v.useCallback(async()=>{if(!n||!e.vestingVault)throw new Error("Wallet not connected or contract not available");try{return await e.vestingVault.connect(n).claim()}catch(p){throw console.error("Error claiming vested tokens:",p),p}},[n,e.vestingVault]);pc("refreshVestingData",d),v.useEffect(()=>{d()},[t,r,d]);const f={totalVested:Oe(s.totalVested||0n,18,4),claimable:Oe(s.claimable||0n,18,4),claimed:Oe(s.claimed||0n,18,4),remaining:Oe(s.remaining||0n,18,4),cliffEndDate:s.cliffEndTime>0n?new Date(Number(s.cliffEndTime)*1e3):null,vestingEndDate:s.vestingEndTime>0n?new Date(Number(s.vestingEndTime)*1e3):null,startDate:s.schedule.start>0n?new Date(Number(s.schedule.start)*1e3):null,cliffDuration:s.schedule.cliff>0n?Number(s.schedule.cliff)/(24*60*60):0,totalDuration:s.schedule.duration>0n?Number(s.schedule.duration)/(24*60*60):0,vestingProgress:s.vestingProgress,isCliffPassed:s.isCliffPassed,isFullyVested:s.isFullyVested};return{vestingInfo:s,formattedVestingInfo:f,loading:a,error:l,fetchVestingInfo:d,claimVested:h,refetch:d}}function O1e(){const{vestingInfo:t,formattedVestingInfo:e,loading:n,error:r,fetchVestingInfo:s,claimVested:i,refetch:a}=j1e();Cw();const o=v.useMemo(()=>{if(!(parseFloat(rt(t.totalVested,18))>1e12))return t;const f=kd(t.totalVested);return{...t,totalVested:BigInt(Math.floor(Number(t.totalVested)*f)),claimable:BigInt(Math.floor(Number(t.claimable)*f)),claimed:BigInt(Math.floor(Number(t.claimed)*f)),remaining:BigInt(Math.floor(Number(t.remaining)*f))}},[t]),l=v.useMemo(()=>!o||!o.schedule?e:{totalVested:Oe(o.totalVested,18,4),claimable:Oe(o.claimable,18,4),claimed:Oe(o.claimed,18,4),remaining:Oe(o.remaining,18,4),cliffEndDate:o.cliffEndTime>0n?new Date(Number(o.cliffEndTime)*1e3):null,vestingEndDate:o.vestingEndTime>0n?new Date(Number(o.vestingEndTime)*1e3):null,startDate:o.schedule.start>0n?new Date(Number(o.schedule.start)*1e3):null,cliffDuration:o.schedule.cliff>0n?Number(o.schedule.cliff)/(24*60*60):0,totalDuration:o.schedule.duration>0n?Number(o.schedule.duration)/(24*60*60):0,vestingProgress:o.vestingProgress||0,isCliffPassed:o.isCliffPassed||!1,isFullyVested:o.isFullyVested||!1},[o,e]),u=v.useMemo(()=>parseFloat(rt(t.totalVested,18))>1e12,[t.totalVested]);return{vestingInfo:o,formattedVestingInfo:l,loading:n,error:r,fetchVestingInfo:s,claimVested:i,refetch:a,correctionApplied:u,originalVestingInfo:t}}function e5(){const{contracts:t,isConnected:e}=Rt(),[n,r]=v.useState(null),[s,i]=v.useState(!1),[a,o]=v.useState(null),l=v.useCallback(async()=>{if(!e||!t){r(null);return}i(!0),o(null);try{const[u,d]=await t.packageManager.getCurrentMarketPrice();r(u);const h=Oe(u,18,4);console.log("Market price fetch result:",{price:h,hasLiquidity:d,priceRaw:u.toString(),source:d?"AMM":"Global Target Price"}),d||console.warn("No AMM liquidity found, using global target price")}catch(u){const d=u instanceof Error?u.message:"Failed to fetch market price";o(d),console.error("Error fetching market price:",u)}finally{i(!1)}},[t,e]);return pc("refreshMarketPrice",l),v.useEffect(()=>{l()},[l]),{marketPrice:n,loading:s,error:a,refetch:l}}function D1e(){const{account:t,contracts:e,isConnected:n}=Rt(),{marketPrice:r}=e5(),[s,i]=v.useState([]),[a,o]=v.useState([]),[l,u]=v.useState(!1),[d,h]=v.useState(null),f=v.useCallback(async()=>{if(!t||!n){i([]),o([]);return}u(!0),h(null);try{console.log("Fetching purchase and redemption history...");const[w,x]=await Promise.allSettled([$S(t),QB(t)]);let A=[];w.status==="fulfilled"?(A=w.value,console.log(`Successfully fetched ${A.length} purchase records`)):console.error("Failed to fetch purchase history:",w.reason);let T=[];x.status==="fulfilled"?(T=x.value,console.log(`Successfully fetched ${T.length} redemption records`)):console.error("Failed to fetch redemption history:",x.reason);const j=A.map(P1e);return i(j),o(T),w.status==="rejected"&&x.status==="rejected"?h("Failed to fetch transaction history. Please try again later."):w.status==="rejected"?h("Failed to fetch purchase history. Redemption history loaded successfully."):x.status==="rejected"&&h("Failed to fetch redemption history. Purchase history loaded successfully."),{purchases:j,redemptions:T}}catch(w){const x=w instanceof Error?w.message:"Failed to fetch transaction history";h(x),console.error("Error fetching purchase history:",w),i([]),o([])}finally{u(!1)}},[t,n]);pc("refreshPurchaseHistory",f),v.useEffect(()=>{f()},[t,n,f]);const p=v.useMemo(()=>{const w=s.reduce((k,R)=>k+R.usdtAmount,0n),x=s.reduce((k,R)=>k+R.totalTokens,0n),A=s.reduce((k,R)=>k+R.vestTokens,0n),T=s.reduce((k,R)=>k+R.poolTokens,0n),j=s.reduce((k,R)=>k+R.lpTokens,0n),P=a.reduce((k,R)=>k+R.lpAmount,0n),S=j-P;let E=0;if(w>0n&&x>0n&&r){const k=Number(w)/1e18,R=Number(x)/1e18,O=Number(r)/1e18,F=R*O;k>0&&(E=(F-k)/k*100)}return{totalInvested:w,totalTokensReceived:x,totalVestTokens:A,totalPoolTokens:T,totalLPTokens:j,totalRedemptions:P,currentLPTokens:S,purchaseCount:s.length,redemptionCount:a.length,roi:E}},[s,a]),m=18,y={totalInvested:Oe(p.totalInvested,m,2),totalTokensReceived:Oe(p.totalTokensReceived,18,4),totalVestTokens:Oe(p.totalVestTokens,18,4),totalPoolTokens:Oe(p.totalPoolTokens,18,4),totalLPTokens:Oe(p.totalLPTokens,18,4),totalRedemptions:Oe(p.totalRedemptions,18,4),currentLPTokens:Oe(p.currentLPTokens,18,4),purchaseCount:p.purchaseCount,redemptionCount:p.redemptionCount,roi:p.roi},b=a.map(w=>({...w,formattedAmount:Oe(w.lpAmount,18,4),date:new Date(w.timestamp*1e3)}));return{purchases:s,redemptions:a,formattedRedemptions:b,summary:p,formattedSummary:y,loading:l,error:d,fetchPurchaseHistory:f,refetch:f}}function g9(){const{account:t,isConnected:e}=Rt(),[n,r]=v.useState(null),[s,i]=v.useState(!1),[a,o]=v.useState(null),l=v.useCallback(async()=>{if(!t||!e){r(null);return}i(!0),o(null);try{console.log("Fetching user portfolio stats from smart contract...");const d=await BS(t);d?(r(d),console.log("Successfully fetched user portfolio stats")):o("Failed to fetch portfolio stats")}catch(d){const h=d instanceof Error?d.message:"Failed to fetch portfolio stats";o(h),console.error("Error fetching portfolio stats:",d),r(null)}finally{i(!1)}},[t,e]);pc("refreshPortfolioStats",l),v.useEffect(()=>{l()},[t,e,l]);const u=v.useMemo(()=>n?{totalInvested:Oe(n.totalInvested||0n,18,2),totalTokensReceived:Oe(n.totalTokensReceived||0n,18,4),totalVestTokens:Oe(n.totalVestTokens||0n,18,4),totalPoolTokens:Oe(n.totalPoolTokens||0n,18,4),totalLPTokens:Oe(n.totalLPTokens||0n,18,4),totalReferralRewards:Oe(n.totalReferralRewards||0n,18,4),totalRedemptions:Oe(n.totalRedemptions||0n,18,4),purchaseCount:Number(n.purchaseCount||0n),redemptionCount:Number(n.redemptionCount||0n)}:null,[n]);return{stats:n,formattedStats:u,loading:s,error:a,fetchStats:l,refetch:l}}function Cw(){const{account:t,isConnected:e}=Rt(),[n,r]=v.useState(null),[s,i]=v.useState(!1),[a,o]=v.useState(null),l=v.useCallback(async()=>{if(!t||!e){r(null);return}i(!0),o(null);try{console.log("Fetching corrected user portfolio stats...");const[h,f]=await Promise.all([BS(t),$S(t)]);if(h){const p=k1e(h,f);r(p),p.correctionApplied?console.log(`Portfolio correction applied: ${p.correctedPurchases} purchases corrected`):console.log("No portfolio correction needed")}else o("Failed to fetch portfolio stats")}catch(h){const f=h instanceof Error?h.message:"Failed to fetch corrected portfolio stats";o(f),console.error("Error fetching corrected portfolio stats:",h),r(null)}finally{i(!1)}},[t,e]);pc("refreshPortfolioStats",l),pc("refreshPurchaseHistory",l),v.useEffect(()=>{l()},[t,e,l]);const u=v.useMemo(()=>n?{totalInvested:Oe(n.totalInvested||0n,18,2),totalTokensReceived:Oe(n.totalTokensReceived||0n,18,4),totalVestTokens:Oe(n.totalVestTokens||0n,18,4),totalPoolTokens:Oe(n.totalPoolTokens||0n,18,4),totalLPTokens:Oe(n.totalLPTokens||0n,18,4),totalReferralRewards:Oe(n.totalReferralRewards||0n,18,4),totalRedemptions:Oe(n.totalRedemptions||0n,18,4),purchaseCount:Number(n.purchaseCount),redemptionCount:Number(n.redemptionCount),correctionApplied:n.correctionApplied,correctedPurchases:n.correctedPurchases,totalPurchases:n.totalPurchases,originalTotalTokens:Oe(n.correctionDetails.originalTotalTokens,18,4),correctionAmount:Oe(n.correctionDetails.correctionAmount,18,4)}:null,[n]),d=v.useMemo(()=>n?I1e(n):null,[n]);return{correctedStats:n,formattedCorrectedStats:u,correctionNotice:d,loading:s,error:a,fetchCorrectedStats:l,refetch:l}}const Jr=v.forwardRef(({className:t,...e},n)=>c.jsx("label",{ref:n,className:Oi("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",t),...e}));Jr.displayName="Label";const ns=v.forwardRef(({className:t,variant:e="default",...n},r)=>{const s={default:"bg-blue-50 border-blue-200 text-blue-800",destructive:"bg-red-50 border-red-200 text-red-800"};return c.jsx("div",{ref:r,role:"alert",className:Oi("relative w-full rounded-lg border p-4",s[e],t),...n})});ns.displayName="Alert";const rs=v.forwardRef(({className:t,...e},n)=>c.jsx("div",{ref:n,className:Oi("text-sm [&_p]:leading-relaxed",t),...e}));rs.displayName="AlertDescription";const U1e=t=>({enabled:t.enabled,usePrivateMempool:t.usePrivateMempool,maxGasPrice:t.maxGasPrice,priorityFee:t.priorityFee,deadline:t.deadline*60,frontrunProtection:t.frontrunProtection,sandwichProtection:t.sandwichProtection,flashloanProtection:t.flashloanProtection});function M1e(){const{signer:t,isConnected:e}=Rt(),[n,r]=v.useState({preview:null,tokenPrices:null,loading:!1,error:null}),[s,i]=v.useState({slippage:wx,mevProtection:MB}),a=v.useCallback(g=>{i(m=>({...m,slippage:{...m.slippage,...g}}))},[]),o=v.useCallback(g=>{i(m=>({...m,mevProtection:{...m.mevProtection,...g}}))},[]),l=v.useCallback(g=>{const m=U1e(g);i(y=>({...y,mevProtection:m}))},[]),u=v.useCallback(async g=>{if(!t||!e||g<=0n)return null;r(m=>({...m,loading:!0,error:null}));try{const m=await KB(g,t),y={lpTokenAmount:g,expectedUSDT:m.expectedUSDT,expectedShareToken:m.expectedShare,minimumUSDT:m.expectedUSDT-m.expectedUSDT*BigInt(Math.floor(s.slippage.tolerance*100))/10000n,minimumShareToken:m.expectedShare-m.expectedShare*BigInt(Math.floor(s.slippage.tolerance*100))/10000n,priceImpact:Number(m.liquidityToRemove)/Number(g)*.1,slippageTolerance:s.slippage.tolerance};return r(b=>({...b,preview:y,loading:!1})),y}catch(m){console.error("Failed to get contract preview, falling back to client-side calculation:",m);try{const y=await GB(g,t,s.slippage);return r(b=>({...b,preview:y,loading:!1})),y}catch(y){return console.error("Failed to get liquidity removal preview:",y),r(b=>({...b,error:y.message||"Failed to get preview",loading:!1})),null}}},[t,e,s.slippage]),d=v.useCallback(async g=>{if(!t||!e)throw new Error("Wallet not connected");if(!n.preview)throw new Error("No preview available. Please get a preview first.");r(m=>({...m,loading:!0,error:null}));try{const m=Math.floor(Date.now()/1e3)+s.slippage.deadline*60,y=await qB(g,n.preview.minimumShareToken,n.preview.minimumUSDT,m,t);return r(b=>({...b,loading:!1})),y}catch(m){console.error("Failed to execute contract liquidity removal, trying fallback:",m);try{const y=await WB(g,t,s.slippage,s.mevProtection);return r(b=>({...b,loading:!1})),y}catch(y){throw console.error("Failed to execute liquidity removal:",y),r(b=>({...b,error:y.message||"Failed to remove liquidity",loading:!1})),y}}},[t,e,s,n.preview]),h=v.useCallback(async()=>{if(!(!t||!e))try{const g=await YB(t);r(m=>({...m,tokenPrices:g}))}catch(g){console.error("Failed to fetch token prices:",g)}},[t,e]),f=v.useCallback(()=>{r(g=>({...g,preview:null,error:null}))},[]),p=v.useCallback(()=>{r(g=>({...g,error:null}))},[]);return pc("refreshTokenPrices",h),v.useEffect(()=>{e&&t&&h()},[e,t,h]),{preview:n.preview,tokenPrices:n.tokenPrices,loading:n.loading,error:n.error,config:s,getPreview:u,executeLiquidityRemoval:d,fetchTokenPrices:h,clearPreview:f,clearError:p,updateSlippageConfig:a,updateMEVProtection:o,updateMEVProtectionFromConfig:l,hasPreview:n.preview!==null,canExecute:n.preview!==null&&!n.loading&&!n.error}}function L1e(t=.5){const[e,n]=v.useState(t),r=v.useCallback(i=>{const a=Math.max(.1,Math.min(50,i));n(a)},[]),s=v.useCallback((i=300)=>({tolerance:e,deadline:i}),[e]);return{tolerance:e,updateTolerance:r,getSlippageConfig:s,isHighSlippage:e>5,isVeryHighSlippage:e>15}}function B1e(){const t=v.useCallback((s,i=18)=>parseFloat(rt(s,i)).toFixed(6),[]),e=v.useCallback(s=>parseFloat(rt(s,18)).toFixed(2),[]),n=v.useCallback(s=>`${s.toFixed(2)}%`,[]),r=v.useCallback(s=>{const i=n(s);let a="text-green-600";return s>.1&&(a="text-yellow-600"),s>1&&(a="text-orange-600"),s>3&&(a="text-red-600"),{text:i,color:a}},[n]);return{formatTokenAmount:t,formatUSDTAmount:e,formatPercentage:n,formatPriceImpact:r}}const $1e=[.1,.5,1,2],F1e=[5,10,20,30];function H1e({settings:t,onSettingsChange:e,expectedPriceImpact:n=0,liquidityDepth:r}){const[s,i]=v.useState(t.tolerance.toString()),[a,o]=v.useState(t.deadline.toString()),[l,u]=v.useState(!1),h=(()=>{let w=.5;if(n>1&&(w=Math.max(w,n*1.5)),r){const x=Number(r.usdt)/1e6;x<1e4?w+=1:x<5e4&&(w+=.5)}return Math.min(w,15)})();v.useEffect(()=>{if(t.autoSlippage){const w=h;w!==t.tolerance&&(e({...t,tolerance:w}),i(w.toString()))}},[h,t.autoSlippage]);const f=w=>{const x=Math.max(.01,Math.min(50,w));i(x.toString()),e({...t,tolerance:x,autoSlippage:!1})},p=w=>{const x=Math.max(1,Math.min(60,w));o(x.toString()),e({...t,deadline:x})},g=()=>{const w=!t.autoSlippage;e({...t,autoSlippage:w}),w&&f(h)},m=w=>w<=.5?"text-green-600":w<=1?"text-yellow-600":w<=3?"text-orange-600":"text-red-600",b=(w=>w>15?"Extremely high slippage! You may lose significant value.":w>5?"Very high slippage tolerance may result in unfavorable rates.":w>1?"High slippage tolerance detected.":w<.1?"Very low slippage may cause transaction failures.":null)(t.tolerance);return c.jsxs(ne,{className:"w-full",children:[c.jsx(Ze,{children:c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{className:"flex items-center space-x-2",children:[c.jsx(aa,{className:"h-5 w-5 text-blue-600"}),c.jsx("span",{className:"font-medium",children:"Slippage Protection"})]}),c.jsx(se,{variant:"ghost",size:"sm",onClick:()=>u(!l),children:c.jsx(mc,{className:"h-4 w-4"})})]})}),c.jsxs(re,{className:"space-y-4",children:[c.jsxs("div",{className:"flex items-center justify-between p-3 bg-blue-50 rounded-lg",children:[c.jsxs("div",{className:"flex items-center space-x-2",children:[c.jsx(Fl,{className:"h-4 w-4 text-blue-600"}),c.jsx("span",{className:"text-sm font-medium",children:"Auto Slippage"}),t.autoSlippage&&c.jsxs(Je,{variant:"secondary",className:"text-xs",children:[h.toFixed(2),"%"]})]}),c.jsx(se,{variant:t.autoSlippage?"default":"outline",size:"sm",onClick:g,children:t.autoSlippage?"ON":"OFF"})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx(Jr,{children:"Slippage Tolerance"}),c.jsxs("div",{className:"flex flex-wrap gap-2",children:[$1e.map(w=>c.jsxs(se,{variant:Math.abs(t.tolerance-w)<.01?"default":"outline",size:"sm",onClick:()=>f(w),disabled:t.autoSlippage,children:[w,"%"]},w)),c.jsxs("div",{className:"flex items-center space-x-1",children:[c.jsx(Et,{type:"number",placeholder:"Custom",value:s,onChange:w=>{i(w.target.value);const x=parseFloat(w.target.value);isNaN(x)||f(x)},className:"w-20 text-sm",step:"0.1",min:"0.01",max:"50",disabled:t.autoSlippage}),c.jsx("span",{className:"text-sm text-gray-500",children:"%"})]})]}),c.jsxs("div",{className:"flex items-center justify-between text-sm",children:[c.jsxs("span",{className:m(t.tolerance),children:["Current: ",t.tolerance.toFixed(2),"%"]}),!t.autoSlippage&&c.jsxs("span",{className:"text-gray-500",children:["Recommended: ",h.toFixed(2),"%"]})]})]}),b&&c.jsxs(ns,{variant:t.tolerance>5?"destructive":"default",children:[c.jsx(dr,{className:"h-4 w-4"}),c.jsx(rs,{children:b})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx(Jr,{children:"Transaction Deadline"}),c.jsxs("div",{className:"flex flex-wrap gap-2",children:[F1e.map(w=>c.jsxs(se,{variant:t.deadline===w?"default":"outline",size:"sm",onClick:()=>p(w),children:[w,"m"]},w)),c.jsxs("div",{className:"flex items-center space-x-1",children:[c.jsx(Et,{type:"number",value:a,onChange:w=>{o(w.target.value);const x=parseInt(w.target.value);isNaN(x)||p(x)},className:"w-16 text-sm",min:"1",max:"60"}),c.jsx("span",{className:"text-sm text-gray-500",children:"min"})]})]})]}),l&&c.jsxs("div",{className:"space-y-4 p-4 bg-gray-50 rounded-lg",children:[c.jsxs("div",{className:"flex items-center space-x-2",children:[c.jsx(mc,{className:"h-4 w-4"}),c.jsx("span",{className:"font-medium",children:"Advanced Protection"})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx(Jr,{children:"Maximum Slippage (Safety Limit)"}),c.jsx(Et,{type:"number",value:t.maxSlippage,onChange:w=>{const x=parseFloat(w.target.value)||15;e({...t,maxSlippage:Math.max(t.tolerance,Math.min(50,x))})},className:"w-24",step:"0.5",min:t.tolerance,max:"50"}),c.jsx("p",{className:"text-xs text-gray-500",children:"Transactions will fail if slippage exceeds this limit"})]}),r&&c.jsxs("div",{className:"space-y-2",children:[c.jsx(Jr,{children:"Market Conditions"}),c.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[c.jsxs("div",{className:"flex items-center space-x-2",children:[c.jsx(_r,{className:"h-4 w-4 text-green-600"}),c.jsxs("span",{children:["USDT Liquidity: $",(Number(r.usdt)/1e6).toLocaleString()]})]}),c.jsxs("div",{className:"flex items-center space-x-2",children:[c.jsx(Ty,{className:"h-4 w-4 text-blue-600"}),c.jsxs("span",{children:["BLOCKS Liquidity: ",(Number(r.shareToken)/1e18).toLocaleString()]})]})]}),c.jsxs("div",{className:"flex items-center space-x-2 text-sm",children:[c.jsx(ni,{className:"h-4 w-4 text-gray-500"}),c.jsxs("span",{className:m(n),children:["Expected Price Impact: ",n.toFixed(3),"%"]})]})]})]}),c.jsxs("div",{className:"p-3 bg-green-50 rounded-lg",children:[c.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[c.jsx(aa,{className:"h-4 w-4 text-green-600"}),c.jsx("span",{className:"text-sm font-medium text-green-800",children:"Protection Active"})]}),c.jsxs("div",{className:"text-xs text-green-700 space-y-1",children:[c.jsxs("div",{children:[" Slippage limited to ",t.tolerance.toFixed(2),"%"]}),c.jsxs("div",{children:[" Transaction expires in ",t.deadline," minutes"]}),c.jsx("div",{children:" MEV protection enabled"}),t.autoSlippage&&c.jsx("div",{children:" Auto-adjustment based on market conditions"})]})]})]})]})}const Ax=v.forwardRef(({className:t,orientation:e="horizontal",...n},r)=>c.jsx("div",{ref:r,className:Oi("shrink-0 bg-border",e==="horizontal"?"h-[1px] w-full":"h-full w-[1px]",t),...n}));Ax.displayName="Separator";function V1e({preview:t,loading:e,tokenPrices:n,onRefresh:r,autoRefresh:s=!0,refreshInterval:i=30}){const[a,o]=v.useState(null),[l,u]=v.useState(i);v.useEffect(()=>{if(!s||!r)return;const x=setInterval(()=>{u(A=>A<=1?(r(),o(new Date),i):A-1)},1e3);return()=>clearInterval(x)},[s,r,i]),v.useEffect(()=>{t&&(o(new Date),u(i))},[t,i]);const d=(x,A=18)=>parseFloat(rt(x,A)).toFixed(6),h=x=>parseFloat(rt(x,18)).toFixed(2),f=x=>`${x.toFixed(2)}%`,p=x=>x<.1?"text-green-600":x<1?"text-yellow-600":x<3?"text-orange-600":"text-red-600",g=x=>x<.1?c.jsx(sr,{className:"h-4 w-4 text-green-600"}):x<3?c.jsx(dr,{className:"h-4 w-4 text-yellow-600"}):c.jsx(dr,{className:"h-4 w-4 text-red-600"}),m=()=>{if(!t||!n)return 0;const x=Number(h(t.expectedUSDT)),A=Number(d(t.expectedShareToken))*n.shareTokenPriceInUSDT;return x+A},y=()=>{if(!t)return 0;const x=Number(h(t.expectedUSDT)),A=Number(h(t.minimumUSDT)),T=Number(d(t.expectedShareToken)),j=Number(d(t.minimumShareToken)),P=x-A,S=T-j;return P+S*((n==null?void 0:n.shareTokenPriceInUSDT)||1)};if(e)return c.jsx(ne,{className:"w-full",children:c.jsx(re,{className:"p-6",children:c.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[c.jsx(ts,{className:"h-5 w-5 animate-spin text-blue-600"}),c.jsx("span",{className:"text-gray-600",children:"Calculating preview..."})]})})});if(!t)return c.jsx(ne,{className:"w-full",children:c.jsx(re,{className:"p-6",children:c.jsxs("div",{className:"text-center text-gray-500",children:[c.jsx(ni,{className:"h-8 w-8 mx-auto mb-2 text-gray-400"}),c.jsx("p",{children:"Enter an LP token amount to see preview"})]})})});const b=m(),w=y();return c.jsxs(ne,{className:"w-full",children:[c.jsx(Ze,{children:c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{className:"flex items-center space-x-2",children:[c.jsx(r$,{className:"h-5 w-5 text-blue-600"}),c.jsx("span",{className:"font-medium",children:"Redemption Preview"})]}),c.jsxs("div",{className:"flex items-center space-x-2",children:[s&&c.jsxs(Je,{variant:"secondary",className:"text-xs",children:[c.jsx(Ql,{className:"h-3 w-3 mr-1"}),l,"s"]}),a&&c.jsxs("span",{className:"text-xs text-gray-500",children:["Updated ",a.toLocaleTimeString()]})]})]})}),c.jsxs(re,{className:"space-y-4",children:[c.jsxs("div",{className:"space-y-3",children:[c.jsxs("h4",{className:"font-medium text-gray-900 flex items-center space-x-2",children:[c.jsx(_r,{className:"h-4 w-4 text-green-600"}),c.jsx("span",{children:"Expected Returns"})]}),c.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[c.jsxs("div",{className:"p-3 bg-green-50 rounded-lg",children:[c.jsxs("div",{className:"flex items-center space-x-2 mb-1",children:[c.jsx(Ts,{className:"h-4 w-4 text-green-600"}),c.jsx("span",{className:"text-sm font-medium text-green-800",children:"USDT"})]}),c.jsxs("div",{className:"text-lg font-bold text-green-900",children:["$",h(t.expectedUSDT)]})]}),c.jsxs("div",{className:"p-3 bg-blue-50 rounded-lg",children:[c.jsxs("div",{className:"flex items-center space-x-2 mb-1",children:[c.jsx(zS,{className:"h-4 w-4 text-blue-600"}),c.jsx("span",{className:"text-sm font-medium text-blue-800",children:"BLOCKS"})]}),c.jsx("div",{className:"text-lg font-bold text-blue-900",children:d(t.expectedShareToken)}),n&&c.jsxs("div",{className:"text-xs text-blue-700",children:[" $",(Number(d(t.expectedShareToken))*n.shareTokenPriceInUSDT).toFixed(2)]})]})]}),n&&c.jsx("div",{className:"p-3 bg-gray-50 rounded-lg",children:c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsx("span",{className:"text-sm text-gray-600",children:"Total Value:"}),c.jsxs("span",{className:"font-bold text-gray-900",children:["$",b.toFixed(2)]})]})})]}),c.jsx(Ax,{}),c.jsxs("div",{className:"space-y-3",children:[c.jsxs("h4",{className:"font-medium text-gray-900 flex items-center space-x-2",children:[c.jsx(Ty,{className:"h-4 w-4 text-orange-600"}),c.jsx("span",{children:"Minimum Guaranteed (After Slippage)"})]}),c.jsxs("div",{className:"space-y-2 text-sm",children:[c.jsxs("div",{className:"flex justify-between",children:[c.jsx("span",{className:"text-gray-600",children:"Minimum USDT:"}),c.jsxs("span",{className:"font-medium",children:["$",h(t.minimumUSDT)]})]}),c.jsxs("div",{className:"flex justify-between",children:[c.jsx("span",{className:"text-gray-600",children:"Minimum SHARE:"}),c.jsx("span",{className:"font-medium",children:d(t.minimumShareToken)})]}),c.jsxs("div",{className:"flex justify-between",children:[c.jsx("span",{className:"text-gray-600",children:"Slippage Tolerance:"}),c.jsx("span",{className:"font-medium",children:f(t.slippageTolerance)})]}),w>0&&c.jsxs("div",{className:"flex justify-between",children:[c.jsx("span",{className:"text-gray-600",children:"Max Slippage Loss:"}),c.jsxs("span",{className:"font-medium text-orange-600",children:["$",w.toFixed(2)]})]})]})]}),c.jsx(Ax,{}),c.jsxs("div",{className:"space-y-3",children:[c.jsxs("h4",{className:"font-medium text-gray-900 flex items-center space-x-2",children:[g(t.priceImpact),c.jsx("span",{children:"Market Impact"})]}),c.jsxs("div",{className:"space-y-2 text-sm",children:[c.jsxs("div",{className:"flex justify-between",children:[c.jsx("span",{className:"text-gray-600",children:"Price Impact:"}),c.jsx("span",{className:`font-medium ${p(t.priceImpact)}`,children:f(t.priceImpact)})]}),c.jsxs("div",{className:"flex justify-between",children:[c.jsx("span",{className:"text-gray-600",children:"LP Tokens to Redeem:"}),c.jsx("span",{className:"font-medium",children:d(t.lpTokenAmount)})]})]}),t.priceImpact>1&&c.jsxs(ns,{variant:t.priceImpact>3?"destructive":"default",children:[c.jsx(dr,{className:"h-4 w-4"}),c.jsx(rs,{children:t.priceImpact>3?"High price impact! This transaction may significantly affect the token price.":"Moderate price impact detected. Consider splitting into smaller transactions."})]})]}),n&&c.jsxs(c.Fragment,{children:[c.jsx(Ax,{}),c.jsxs("div",{className:"space-y-2",children:[c.jsx("h4",{className:"font-medium text-gray-900 text-sm",children:"Current Market Prices"}),c.jsxs("div",{className:"grid grid-cols-2 gap-4 text-xs",children:[c.jsxs("div",{className:"text-gray-600",children:["1 BLOCKS = $",n.shareTokenPriceInUSDT.toFixed(4)," USDT"]}),c.jsxs("div",{className:"text-gray-600",children:["1 USDT = ",n.usdtPriceInShareToken.toFixed(4)," BLOCKS"]})]})]})]})]})]})}const z1e={enabled:!0,maxGasPrice:Ir("20","gwei"),priorityFee:Ir("2","gwei"),deadline:5,usePrivateMempool:!1,frontrunProtection:!0,sandwichProtection:!0,flashloanProtection:!0};function W1e({config:t,onConfigChange:e,currentGasPrice:n,networkCongestion:r="medium"}){const{provider:s}=Rt(),[i,a]=v.useState(null),[o,l]=v.useState(!1);v.useEffect(()=>{const x=async()=>{if(s)try{const T=await s.getGasPrice();a(T)}catch(T){console.error("Failed to fetch gas price:",T)}};x();const A=setInterval(x,3e4);return()=>clearInterval(A)},[s]);const u=n||i,d=()=>{if(!u)return Ir("20","gwei");const x=u*50n/100n;return u+x},h=x=>{switch(x){case"low":return"text-green-600";case"medium":return"text-yellow-600";case"high":return"text-red-600";default:return"text-gray-600"}},f=x=>{switch(x){case"low":return c.jsx(sr,{className:"h-4 w-4 text-green-600"});case"medium":return c.jsx(dr,{className:"h-4 w-4 text-yellow-600"});case"high":return c.jsx(dr,{className:"h-4 w-4 text-red-600"});default:return c.jsx(r$,{className:"h-4 w-4 text-gray-600"})}},p=x=>parseFloat(rt(x,"gwei")).toFixed(2),g=x=>{try{const A=Ir(x,"gwei");e({...t,maxGasPrice:A})}catch(A){console.error("Invalid gas price:",A)}},m=x=>{try{const A=Ir(x,"gwei");e({...t,priorityFee:A})}catch(A){console.error("Invalid priority fee:",A)}},y=x=>{e({...t,[x]:!t[x]})},b=()=>{e(z1e)},w=u&&u>t.maxGasPrice;return c.jsxs(ne,{className:"w-full",children:[c.jsx(Ze,{children:c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{className:"flex items-center space-x-2",children:[c.jsx(aa,{className:"h-5 w-5 text-purple-600"}),c.jsx("span",{className:"font-medium",children:"MEV Protection"}),t.enabled?c.jsxs(Je,{variant:"default",className:"bg-green-100 text-green-800",children:[c.jsx(tm,{className:"h-3 w-3 mr-1"}),"ACTIVE"]}):c.jsxs(Je,{variant:"secondary",className:"bg-red-100 text-red-800",children:[c.jsx(o$,{className:"h-3 w-3 mr-1"}),"DISABLED"]})]}),c.jsx(se,{variant:"ghost",size:"sm",onClick:()=>l(!o),children:"Advanced"})]})}),c.jsxs(re,{className:"space-y-4",children:[c.jsxs("div",{className:"flex items-center justify-between p-3 bg-purple-50 rounded-lg",children:[c.jsxs("div",{className:"flex items-center space-x-2",children:[c.jsx(aa,{className:"h-4 w-4 text-purple-600"}),c.jsx("span",{className:"text-sm font-medium",children:"Enable MEV Protection"})]}),c.jsx(se,{variant:t.enabled?"default":"outline",size:"sm",onClick:()=>y("enabled"),children:t.enabled?"ON":"OFF"})]}),t.enabled&&c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"p-3 bg-gray-50 rounded-lg",children:[c.jsxs("div",{className:"flex items-center justify-between mb-2",children:[c.jsx("span",{className:"text-sm font-medium",children:"Network Status"}),c.jsxs("div",{className:"flex items-center space-x-1",children:[f(r),c.jsx("span",{className:`text-sm ${h(r)}`,children:r.toUpperCase()})]})]}),u&&c.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[c.jsxs("div",{children:[c.jsx("span",{className:"text-gray-600",children:"Current Gas:"}),c.jsxs("span",{className:"ml-2 font-medium",children:[p(u)," Gwei"]})]}),c.jsxs("div",{children:[c.jsx("span",{className:"text-gray-600",children:"Max Gas:"}),c.jsxs("span",{className:"ml-2 font-medium",children:[p(t.maxGasPrice)," Gwei"]})]})]})]}),w&&c.jsxs(ns,{variant:"destructive",children:[c.jsx(dr,{className:"h-4 w-4"}),c.jsxs(rs,{children:["Current gas price (",p(u)," Gwei) exceeds your maximum limit (",p(t.maxGasPrice)," Gwei). Transaction may fail or be delayed."]})]}),c.jsxs("div",{className:"space-y-3",children:[c.jsx(Jr,{children:"Gas Price Limits"}),c.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[c.jsxs("div",{className:"space-y-1",children:[c.jsx(Jr,{className:"text-xs",children:"Max Gas Price (Gwei)"}),c.jsx(Et,{type:"number",value:p(t.maxGasPrice),onChange:x=>g(x.target.value),className:"text-sm",step:"0.1",min:"1"})]}),c.jsxs("div",{className:"space-y-1",children:[c.jsx(Jr,{className:"text-xs",children:"Priority Fee (Gwei)"}),c.jsx(Et,{type:"number",value:p(t.priorityFee),onChange:x=>m(x.target.value),className:"text-sm",step:"0.1",min:"0"})]})]}),c.jsxs("div",{className:"flex space-x-2",children:[c.jsx(se,{variant:"outline",size:"sm",onClick:()=>g(p(d())),children:"Use Recommended"}),c.jsx(se,{variant:"outline",size:"sm",onClick:b,children:"Reset Defaults"})]})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx(Jr,{children:"Transaction Deadline"}),c.jsxs("div",{className:"flex items-center space-x-2",children:[c.jsx(Et,{type:"number",value:t.deadline,onChange:x=>e({...t,deadline:parseInt(x.target.value)||5}),className:"w-20",min:"1",max:"60"}),c.jsx("span",{className:"text-sm text-gray-600",children:"minutes"})]}),c.jsx("p",{className:"text-xs text-gray-500",children:"Shorter deadlines reduce MEV risk but may cause failures during network congestion"})]}),o&&c.jsxs("div",{className:"space-y-4 p-4 bg-gray-50 rounded-lg",children:[c.jsxs("div",{className:"flex items-center space-x-2",children:[c.jsx(Fl,{className:"h-4 w-4"}),c.jsx("span",{className:"font-medium",children:"Advanced Protection"})]}),c.jsxs("div",{className:"space-y-3",children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{children:[c.jsx("span",{className:"text-sm font-medium",children:"Private Mempool"}),c.jsx("p",{className:"text-xs text-gray-500",children:"Route through private mempool (when available)"})]}),c.jsx(se,{variant:t.usePrivateMempool?"default":"outline",size:"sm",onClick:()=>y("usePrivateMempool"),children:t.usePrivateMempool?"ON":"OFF"})]}),c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{children:[c.jsx("span",{className:"text-sm font-medium",children:"Frontrun Protection"}),c.jsx("p",{className:"text-xs text-gray-500",children:"Detect and prevent frontrunning attacks"})]}),c.jsx(se,{variant:t.frontrunProtection?"default":"outline",size:"sm",onClick:()=>y("frontrunProtection"),children:t.frontrunProtection?"ON":"OFF"})]}),c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{children:[c.jsx("span",{className:"text-sm font-medium",children:"Sandwich Protection"}),c.jsx("p",{className:"text-xs text-gray-500",children:"Prevent sandwich attacks on your transaction"})]}),c.jsx(se,{variant:t.sandwichProtection?"default":"outline",size:"sm",onClick:()=>y("sandwichProtection"),children:t.sandwichProtection?"ON":"OFF"})]}),c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{children:[c.jsx("span",{className:"text-sm font-medium",children:"Flashloan Protection"}),c.jsx("p",{className:"text-xs text-gray-500",children:"Monitor for flashloan-based MEV attacks"})]}),c.jsx(se,{variant:t.flashloanProtection?"default":"outline",size:"sm",onClick:()=>y("flashloanProtection"),children:t.flashloanProtection?"ON":"OFF"})]})]})]}),c.jsxs("div",{className:"p-3 bg-green-50 rounded-lg",children:[c.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[c.jsx(aa,{className:"h-4 w-4 text-green-600"}),c.jsx("span",{className:"text-sm font-medium text-green-800",children:"Active Protections"})]}),c.jsxs("div",{className:"text-xs text-green-700 space-y-1",children:[c.jsxs("div",{children:[" Gas price limited to ",p(t.maxGasPrice)," Gwei"]}),c.jsxs("div",{children:[" Transaction expires in ",t.deadline," minutes"]}),t.frontrunProtection&&c.jsx("div",{children:" Frontrun protection enabled"}),t.sandwichProtection&&c.jsx("div",{children:" Sandwich attack protection enabled"}),t.flashloanProtection&&c.jsx("div",{children:" Flashloan attack monitoring enabled"}),t.usePrivateMempool&&c.jsx("div",{children:" Private mempool routing enabled"})]})]})]}),!t.enabled&&c.jsxs(ns,{children:[c.jsx(ni,{className:"h-4 w-4"}),c.jsx(rs,{children:"MEV protection is disabled. Your transactions may be vulnerable to frontrunning, sandwich attacks, and other MEV exploitation."})]})]})]})}function q1e({onRedemptionComplete:t}){const{isConnected:e,isCorrectNetwork:n}=Rt(),{balances:r,formattedBalances:s,loading:i,correctionApplied:a}=Nw(),{correctedStats:o,formattedCorrectedStats:l}=Cw(),{preview:u,tokenPrices:d,loading:h,error:f,getPreview:p,executeLiquidityRemoval:g,clearPreview:m,clearError:y,updateSlippageConfig:b,updateMEVProtectionFromConfig:w}=M1e();L1e();const{formatPriceImpact:x}=B1e(),[A,T]=v.useState(""),[j,P]=v.useState(!1),[S,E]=v.useState(!1),[k,R]=v.useState(!1),[O,F]=v.useState({tolerance:.5,deadline:5,autoSlippage:!0,maxSlippage:15}),[z,N]=v.useState({enabled:!0,maxGasPrice:Ir("20","gwei"),priorityFee:Ir("2","gwei"),deadline:5,usePrivateMempool:!1,frontrunProtection:!0,sandwichProtection:!0,flashloanProtection:!0});v.useEffect(()=>{b({tolerance:O.tolerance,deadline:O.deadline*60})},[O,b]),v.useEffect(()=>{w(z)},[z,w]),v.useEffect(()=>{if(A&&parseFloat(A)>0){const D=fg(A),L=(o==null?void 0:o.totalLPTokens)||0n,$=L>0n&&r.lp>0n?D*r.lp/L:D;$<=r.lp?p($):m()}else m()},[A,r.lp,o==null?void 0:o.totalLPTokens,p,m]);const I=async()=>{if(!e||!n){At.error("Please connect your wallet and switch to BSC Testnet");return}if(!A||parseFloat(A)<=0){At.error("Please enter a valid LP token amount");return}const D=fg(A),L=(o==null?void 0:o.totalLPTokens)||0n,$=L>0n&&r.lp>0n?D*r.lp/L:D;if($>r.lp){At.error("Insufficient LP token balance");return}try{At.loading("Removing liquidity from PancakeSwap...",{id:"liquidity-removal"});const V=await g($);At.loading("Waiting for confirmation...",{id:"liquidity-removal"}),await V.wait(),At.success("Liquidity removed successfully!",{id:"liquidity-removal"}),T(""),m(),t==null||t()}catch(V){console.error("Liquidity removal error:",V),At.error(V.message||"Failed to remove liquidity",{id:"liquidity-removal"})}},M=()=>{if(r.lp>0n){const D=(o==null?void 0:o.totalLPTokens)||0n,L=D>0n?D:r.lp;T(rt(L,18))}};return u&&x(u.priceImpact),c.jsxs(ne,{className:"w-full max-w-md mx-auto",children:[c.jsx(Ze,{children:c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{className:"flex items-center space-x-3",children:[c.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:c.jsx(Ty,{className:"h-6 w-6 text-blue-600"})}),c.jsxs("div",{children:[c.jsx("h3",{className:"text-lg font-semibold",children:"Remove Liquidity"}),c.jsx("p",{className:"text-sm text-gray-600",children:"Redeem BLOCKS-LP tokens for USDT + BLOCKS"})]})]}),c.jsx(se,{variant:"ghost",size:"sm",onClick:()=>P(!j),children:c.jsx(mc,{className:"h-4 w-4"})})]})}),c.jsxs(re,{className:"space-y-4",children:[f&&c.jsxs(ns,{variant:"destructive",children:[c.jsx(nwe,{className:"h-4 w-4"}),c.jsxs(rs,{children:[f,c.jsx(se,{variant:"ghost",size:"sm",onClick:y,className:"ml-2",children:"Dismiss"})]})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx(Jr,{htmlFor:"lp-amount",children:"BLOCKS-LP Token Amount"}),c.jsxs("div",{className:"relative",children:[c.jsx(Et,{id:"lp-amount",type:"number",placeholder:"0.0",value:A,onChange:D=>T(D.target.value),className:"pr-16"}),c.jsx(se,{variant:"ghost",size:"sm",onClick:M,className:"absolute right-2 top-1/2 transform -translate-y-1/2 text-xs",disabled:i,children:"MAX"})]}),c.jsxs("div",{className:"flex justify-between text-sm text-gray-600",children:[c.jsxs("div",{className:"flex items-center space-x-2",children:[c.jsxs("span",{children:["Balance: ",(l==null?void 0:l.totalLPTokens)||s.lp," BLOCKS-LP"]}),(l==null?void 0:l.correctionApplied)&&c.jsx(Je,{variant:"secondary",className:"text-xs",children:"Corrected"})]}),d&&c.jsxs("span",{children:["1 BLOCKS = $",d.shareTokenPriceInUSDT.toFixed(4)," USDT"]})]})]}),a&&r.lp>0n&&kd(r.lp)<1&&c.jsxs(ns,{className:"border-yellow-200 bg-yellow-50",children:[c.jsx(dr,{className:"h-4 w-4 text-yellow-600"}),c.jsxs(rs,{className:"text-yellow-700 text-xs",children:[c.jsx("strong",{children:"LP Token Inflation Notice:"})," Your BLOCKS-LP tokens have inflated values. The displayed amounts are corrected for better UX. Redemption will work normally with the corrected amounts."]})]}),c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{className:"space-y-2",children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx(Jr,{children:"Slippage Protection"}),c.jsxs(se,{variant:"ghost",size:"sm",onClick:()=>E(!S),children:[c.jsx(aa,{className:"h-4 w-4 mr-1"}),O.tolerance.toFixed(2),"%"]})]}),S&&c.jsx(H1e,{settings:O,onSettingsChange:F,expectedPriceImpact:(u==null?void 0:u.priceImpact)||0,liquidityDepth:u?{shareToken:u.expectedShareToken,usdt:u.expectedUSDT}:void 0})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx(Jr,{children:"MEV Protection"}),c.jsxs(se,{variant:"ghost",size:"sm",onClick:()=>R(!k),children:[c.jsx(aa,{className:"h-4 w-4 mr-1"}),z.enabled?"ACTIVE":"DISABLED"]})]}),k&&c.jsx(W1e,{config:z,onConfigChange:N,networkCongestion:"medium"})]})]}),c.jsx(V1e,{preview:u,loading:h,tokenPrices:d,onRefresh:()=>{if(A&&parseFloat(A)>0){const D=fg(A);D<=r.lp&&p(D)}},autoRefresh:!0,refreshInterval:30}),c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{className:"flex items-center space-x-4",children:[c.jsxs("div",{className:"flex items-center space-x-2",children:[c.jsx(aa,{className:`h-4 w-4 ${z.enabled?"text-green-600":"text-gray-400"}`}),c.jsxs("span",{className:`text-sm ${z.enabled?"text-green-600":"text-gray-400"}`,children:["MEV Protection ",z.enabled?"Enabled":"Disabled"]})]}),c.jsxs("div",{className:"flex items-center space-x-2",children:[c.jsx(aa,{className:"h-4 w-4 text-blue-600"}),c.jsxs("span",{className:"text-sm text-blue-600",children:["Slippage: ",O.tolerance.toFixed(2),"%"]})]})]}),c.jsx(Je,{variant:"secondary",children:"BSC Testnet"})]}),c.jsx(se,{onClick:I,disabled:!e||!n||!A||parseFloat(A)<=0||(()=>{const D=fg(A),L=(o==null?void 0:o.totalLPTokens)||0n;return(L>0n&&r.lp>0n?D*r.lp/L:D)>r.lp})()||h||!u,className:"w-full",size:"lg",children:h?c.jsxs(c.Fragment,{children:[c.jsx(vn,{className:"h-4 w-4 mr-2 animate-spin"}),"Removing Liquidity..."]}):c.jsxs(c.Fragment,{children:[c.jsx(Ty,{className:"h-4 w-4 mr-2"}),"Remove Liquidity"]})}),c.jsx("p",{className:"text-xs text-gray-500 text-center",children:"This will remove your liquidity from the PancakeSwap USDT/BLOCKS pool and return the underlying tokens to your wallet."})]})]})}function K1e(){const{account:t,isConnected:e,isCorrectNetwork:n,signer:r}=Rt(),{balances:s,formattedBalances:i}=Nw(),{correctedStats:a,formattedCorrectedStats:o}=Cw(),[l,u]=v.useState(""),[d,h]=v.useState(!1),[f,p]=v.useState(0n),[g,m]=v.useState(0n),[y,b]=v.useState(null),[w,x]=v.useState(null),[A,T]=v.useState(!1),j=()=>{const M=(a==null?void 0:a.totalLPTokens)||0n;return M>0n?M:s.lp},P=()=>(o==null?void 0:o.totalLPTokens)||i.lp;v.useEffect(()=>{t&&e&&S()},[t,e]);const S=async()=>{if(t)try{const M=un(),[D,L]=await Promise.all([M.vestingVault.vestedAmount(t),M.vestingVault.released(t)]);p(D),m(L)}catch(M){console.error("Error loading balances:",M)}},E=async()=>{await S()},k=(M,D)=>({vestedAmount:M,releasedAmount:D,claimableAmount:M-D,timestamp:Date.now()}),R=()=>{b(null),x(null),T(!1)},O=async()=>{try{if(h(!0),R(),!e||!n){X.error("Connect your wallet and switch to BSC Testnet");return}if(!r){X.error("No signer available");return}const M=un(r),D=gN(l),L=(a==null?void 0:a.totalLPTokens)||0n,$=L>0n&&s.lp>0n?D*s.lp/L:D;if(D<=0n)throw new Error("Please enter a valid amount");if($>s.lp)throw new Error("Insufficient BLOCKS-LP token balance");const V=k(f,g);b(V);const q=await M.packageManager.redeem($);X.loading("Processing redemption...",{id:"redeem"}),await q.wait();const[G,Z]=await Promise.all([M.vestingVault.vestedAmount(t),M.vestingVault.released(t)]),oe=k(G,Z);x(oe),oe.claimableAmount!==V.claimableAmount&&T(!0),X.success("BLOCKS-LP tokens redeemed successfully!",{id:"redeem"}),u(""),await E()}catch(M){console.error("Redeem error:",M),X.error(M.message||"Failed to redeem BLOCKS-LP tokens",{id:"redeem"}),R()}finally{h(!1)}},F=async()=>{try{if(h(!0),!e||!n){X.error("Connect your wallet and switch to BSC Testnet");return}if(!r){X.error("No signer available");return}const M=un(r);if(f-g<=0n)throw new Error("No tokens available to claim");const L=await M.vestingVault.claim();X.loading("Claiming vested tokens...",{id:"claim"}),await L.wait(),X.success("Vested tokens claimed successfully!",{id:"claim"}),await E()}catch(M){console.error("Claim error:",M),X.error(M.message||"Failed to claim vested tokens",{id:"claim"})}finally{h(!1)}},z=f-g,N=z>0n,I=()=>{if(!A||!y||!w)return null;const M=w.claimableAmount-y.claimableAmount,D=M>0n;return c.jsxs(ne,{className:"animate-fade-in border-green-200 bg-green-50",children:[c.jsx(Ze,{children:c.jsx("h3",{className:"text-lg font-semibold text-green-800",children:"Redemption Complete - Vesting Status Updated"})}),c.jsxs(re,{className:"space-y-4",children:[c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[c.jsxs("div",{className:"bg-white rounded-lg p-4 border",children:[c.jsx("h4",{className:"font-medium text-gray-700 mb-3",children:"Before Redemption"}),c.jsxs("div",{className:"space-y-2 text-sm",children:[c.jsxs("div",{className:"flex justify-between",children:[c.jsx("span",{className:"text-gray-600",children:"Total Vested:"}),c.jsxs("span",{className:"font-medium",children:[Nt(y.vestedAmount)," BLOCKS"]})]}),c.jsxs("div",{className:"flex justify-between",children:[c.jsx("span",{className:"text-gray-600",children:"Released:"}),c.jsxs("span",{className:"font-medium",children:[Nt(y.releasedAmount)," BLOCKS"]})]}),c.jsxs("div",{className:"flex justify-between border-t pt-2",children:[c.jsx("span",{className:"text-gray-700 font-medium",children:"Claimable:"}),c.jsxs("span",{className:"font-bold",children:[Nt(y.claimableAmount)," BLOCKS"]})]})]})]}),c.jsx("div",{className:"flex items-center justify-center",children:c.jsx(Sg,{className:"h-8 w-8 text-green-600"})}),c.jsxs("div",{className:"bg-white rounded-lg p-4 border border-green-300",children:[c.jsx("h4",{className:"font-medium text-green-700 mb-3",children:"After Redemption"}),c.jsxs("div",{className:"space-y-2 text-sm",children:[c.jsxs("div",{className:"flex justify-between",children:[c.jsx("span",{className:"text-gray-600",children:"Total Vested:"}),c.jsxs("span",{className:"font-medium",children:[Nt(w.vestedAmount)," BLOCKS"]})]}),c.jsxs("div",{className:"flex justify-between",children:[c.jsx("span",{className:"text-gray-600",children:"Released:"}),c.jsxs("span",{className:"font-medium",children:[Nt(w.releasedAmount)," BLOCKS"]})]}),c.jsxs("div",{className:"flex justify-between border-t pt-2",children:[c.jsx("span",{className:"text-gray-700 font-medium",children:"Claimable:"}),c.jsxs("span",{className:"font-bold text-green-700",children:[Nt(w.claimableAmount)," BLOCKS"]})]})]})]})]}),D&&c.jsx("div",{className:"bg-green-100 rounded-lg p-3 text-center",children:c.jsxs("p",{className:"text-green-800 font-medium",children:[" Your claimable balance increased by ",Nt(M)," BLOCKS!"]})}),c.jsx("div",{className:"flex justify-center",children:c.jsx(se,{variant:"outline",size:"sm",onClick:R,children:"Dismiss"})})]})]})};return e?c.jsxs("div",{className:"max-w-4xl mx-auto space-y-8",children:[c.jsxs("div",{className:"text-center space-y-4",children:[c.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Redeem & Claim"}),c.jsx("p",{className:"text-lg text-gray-600 max-w-2xl mx-auto",children:"Redeem your BLOCKS-LP tokens for underlying assets or claim your vested BLOCKS tokens."})]}),c.jsx(I,{}),c.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[c.jsxs(ne,{className:"animate-fade-in border-purple-200 bg-purple-50",children:[c.jsx(Ze,{children:c.jsxs("div",{className:"flex items-center space-x-3",children:[c.jsx("div",{className:"p-2 bg-purple-100 rounded-lg",children:c.jsx(Fl,{className:"h-6 w-6 text-purple-600"})}),c.jsxs("div",{children:[c.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Enhanced LP Redemption"}),c.jsx("p",{className:"text-sm text-gray-600",children:"Remove liquidity directly from PancakeSwap with slippage protection"})]})]})}),c.jsxs(re,{children:[c.jsx("div",{className:"mb-4 p-4 bg-purple-100 rounded-lg",children:c.jsxs("div",{className:"flex items-start space-x-3",children:[c.jsx(Fl,{className:"h-5 w-5 text-purple-600 mt-0.5"}),c.jsxs("div",{children:[c.jsx("h4",{className:"font-medium text-purple-900 mb-1",children:"Recommended Redemption Method"}),c.jsx("p",{className:"text-sm text-purple-700",children:"This enhanced redemption method actually removes your liquidity from the PancakeSwap pool, returning both USDT and BLOCKS to your wallet with configurable slippage protection and MEV resistance."}),c.jsxs("div",{className:"mt-2 text-xs text-purple-600",children:[" Real liquidity removal from PancakeSwap",c.jsx("br",{})," Slippage protection",c.jsx("br",{})," MEV protection",c.jsx("br",{})," Real-time price preview"]})]})]})}),c.jsx(q1e,{onRedemptionComplete:E})]})]}),c.jsxs(ne,{className:"animate-fade-in",children:[c.jsx(Ze,{children:c.jsxs("div",{className:"flex items-center space-x-3",children:[c.jsx("div",{className:"p-2 bg-primary-100 rounded-lg",children:c.jsx(Dye,{className:"h-6 w-6 text-primary-600"})}),c.jsxs("div",{children:[c.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Basic Redemption"}),c.jsx("p",{className:"text-sm text-gray-600",children:"Simple exchange via smart contract (fallback method)"})]})]})}),c.jsxs(re,{className:"space-y-6",children:[c.jsx("div",{className:"bg-gray-50 rounded-lg p-4",children:c.jsxs("div",{className:"flex items-center justify-between text-sm",children:[c.jsx("span",{className:"text-gray-600",children:"Your LP Balance:"}),c.jsxs("div",{className:"flex items-center space-x-2",children:[c.jsxs("span",{className:"font-medium",children:[P()," BLOCKS-LP"]}),(o==null?void 0:o.correctionApplied)&&c.jsx(Je,{variant:"secondary",className:"text-xs",children:"Corrected"})]})]})}),c.jsxs("div",{className:"space-y-4",children:[c.jsx(Et,{label:"Amount to Redeem",type:"number",placeholder:"0.0",value:l,onChange:M=>u(M.target.value)}),c.jsxs("div",{className:"flex space-x-2",children:[c.jsx(se,{variant:"outline",size:"sm",onClick:()=>{const M=j();u(Uu(M/4n))},children:"25%"}),c.jsx(se,{variant:"outline",size:"sm",onClick:()=>{const M=j();u(Uu(M/2n))},children:"50%"}),c.jsx(se,{variant:"outline",size:"sm",onClick:()=>{const M=j();u(Uu(M*3n/4n))},children:"75%"}),c.jsx(se,{variant:"outline",size:"sm",onClick:()=>{const M=j();u(Uu(M))},children:"Max"})]})]}),c.jsxs(se,{onClick:O,loading:d,disabled:!l||gN(l)<=0n||(()=>{const M=gN(l),D=(a==null?void 0:a.totalLPTokens)||0n;return(D>0n&&s.lp>0n?M*s.lp/D:M)>s.lp})(),className:"w-full",size:"lg",children:[c.jsx(Ty,{className:"h-4 w-4 mr-2"}),"Redeem BLOCKS-LP Tokens"]})]})]}),c.jsxs(ne,{className:"animate-fade-in",children:[c.jsx(Ze,{children:c.jsxs("div",{className:"flex items-center space-x-3",children:[c.jsx("div",{className:"p-2 bg-accent-100 rounded-lg",children:c.jsx(Qd,{className:"h-6 w-6 text-accent-600"})}),c.jsxs("div",{children:[c.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Claim Vested Tokens"}),c.jsx("p",{className:"text-sm text-gray-600",children:"Claim your unlocked BLOCKS tokens"})]})]})}),c.jsxs(re,{className:"space-y-6",children:[c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 space-y-3",children:[c.jsxs("div",{className:"flex items-center justify-between text-sm",children:[c.jsx("span",{className:"text-gray-600",children:"Total Vested:"}),c.jsxs("span",{className:"font-medium",children:[Nt(f)," BLOCKS"]})]}),c.jsxs("div",{className:"flex items-center justify-between text-sm",children:[c.jsx("span",{className:"text-gray-600",children:"Already Released:"}),c.jsxs("span",{className:"font-medium",children:[Nt(g)," BLOCKS"]})]}),c.jsx("div",{className:"border-t pt-3",children:c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx("span",{className:"text-gray-900 font-medium",children:"Available to Claim:"}),c.jsxs("div",{className:"flex items-center space-x-2",children:[c.jsxs("span",{className:"font-bold text-lg",children:[Nt(z)," BLOCKS"]}),N&&c.jsx(Je,{variant:"success",children:"Ready"})]})]})})]}),!N&&c.jsxs("div",{className:"text-center py-8",children:[c.jsx("div",{className:"text-gray-400 mb-2",children:"No tokens ready to claim"}),c.jsx("div",{className:"text-sm text-gray-500",children:"Tokens will unlock according to your vesting schedule"})]})]}),c.jsx(se,{onClick:F,loading:d,disabled:!N,className:"w-full",size:"lg",children:"Claim Vested Tokens"})]})]})]})]}):c.jsx("div",{className:"max-w-2xl mx-auto",children:c.jsx(ne,{children:c.jsxs(re,{className:"p-12 text-center",children:[c.jsx(Qd,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),c.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Wallet Not Connected"}),c.jsx("p",{className:"text-gray-600",children:"Please connect your wallet to redeem BLOCKS-LP tokens and claim vested rewards."})]})})})}function y9(){const{account:t,isConnected:e}=Rt(),[n,r]=v.useState([]),[s,i]=v.useState(null),[a,o]=v.useState(!1),[l,u]=v.useState(!1),[d,h]=v.useState(!1),[f,p]=v.useState(null),g=v.useCallback(async()=>{var T,j;if(!t||!e){r([]);return}u(!0),p(null);try{console.log("Fetching referral history for:",t);const P=await HS(t);r(P),console.log("Referral history fetched:",P.length,"transactions")}catch(P){console.error("Error fetching referral history:",P),(P==null?void 0:P.code)===-32005||(T=P==null?void 0:P.message)!=null&&T.includes("rate limit")||(j=P==null?void 0:P.message)!=null&&j.includes("limit exceeded")?p("Loading referral data... Please wait, this may take a moment due to network limits."):p("Failed to load referral history. Please try refreshing the page."),r([])}finally{u(!1)}},[t,e]),m=v.useCallback(async()=>{var T,j;if(!t||!e){i(null);return}h(!0),p(null);try{console.log("Fetching referral stats for:",t);const P=await XB(t);i(P),console.log("Referral stats fetched:",P)}catch(P){console.error("Error fetching referral stats:",P),(P==null?void 0:P.code)===-32005||(T=P==null?void 0:P.message)!=null&&T.includes("rate limit")||(j=P==null?void 0:P.message)!=null&&j.includes("limit exceeded")?p("Loading referral statistics... Please wait, this may take a moment due to network limits."):p("Failed to load referral statistics. Please try refreshing the page."),i(null)}finally{h(!1)}},[t,e]),y=v.useCallback(async()=>{if(!t||!e){r([]),i(null);return}o(!0),p(null);try{await g(),await new Promise(T=>setTimeout(T,3e3)),await m()}catch(T){console.error("Error fetching referral data:",T),p("Failed to load referral data")}finally{o(!1)}},[t,e,g,m]),b=s?{totalRewards:Nt(s.totalRewards),referralCount:s.referralCount,averageReward:Nt(s.averageReward),lastReferralDate:s.lastReferralDate,topReferralReward:Nt(s.topReferralReward)}:null;v.useEffect(()=>{e&&t?y():(r([]),i(null),p(null))},[t,e,y]);const w=v.useCallback(async()=>{await y()},[y]),x=v.useCallback(async()=>{await g()},[g]),A=v.useCallback(async()=>{await m()},[m]);return{referralHistory:n,referralStats:s,formattedStats:b,loading:a||l&&d,historyLoading:l,statsLoading:d,error:f,refetch:w,refetchHistory:x,refetchStats:A}}function G1e(){const{isConnected:t,account:e,isCorrectNetwork:n,switchToCorrectNetwork:r}=Rt(),{formattedBalances:s,loading:i,correctionApplied:a}=Nw(),{vestingInfo:o,formattedVestingInfo:l,loading:u,claimVested:d,correctionApplied:h,originalVestingInfo:f}=O1e(),{purchases:p,formattedRedemptions:g,formattedSummary:m,loading:y,error:b,refetch:w}=D1e(),{formattedStats:x,loading:A,error:T,refetch:j}=g9(),{formattedStats:P,loading:S}=y9(),{formattedCorrectedStats:E,correctionNotice:k}=Cw(),{marketPrice:R}=e5(),{refreshAll:O}=VS(),[F,z]=v.useState(!1),[N,I]=v.useState([]);v.useEffect(()=>{(async()=>{try{if(!e)return;const G=await e$(e);I(G||[])}catch(G){console.warn("Failed to load AMM liquidity events:",G),I([])}})()},[e]);const M=(q,G)=>{if(!N||N.length===0)return null;const Z=600;let oe=null,xe=1/0;for(const J of N){if(Number(J.packageId)!==q)continue;const ve=Math.abs((J.timestamp||0)-(G||0));ve<xe&&(oe=J,xe=ve)}return oe&&xe<=Z?oe:null},D=async()=>{var q;if(!t||!n){X.error("Please connect your wallet and switch to BSC Testnet");return}if(o.claimable===0n){X.error("No tokens available to claim");return}z(!0);try{X.loading("Submitting claim transaction...",{id:"claim-tx"});const G=await d();G&&(X.success("Claim transaction submitted!",{id:"claim-tx"}),X.loading("Waiting for confirmation...",{id:"claim-confirm"}),await G.wait(),X.success("Tokens claimed successfully!",{id:"claim-confirm"}),await O())}catch(G){console.error("Error claiming tokens:",G);let Z="Failed to claim tokens";(G==null?void 0:G.code)==="ACTION_REJECTED"||(G==null?void 0:G.code)===4001?Z="Transaction was rejected by user":(G==null?void 0:G.code)==="INSUFFICIENT_FUNDS"?Z="Insufficient funds for transaction":(G==null?void 0:G.code)==="NETWORK_ERROR"?Z="Network error. Please try again":(q=G==null?void 0:G.message)!=null&&q.includes("execution reverted")&&(Z="Transaction failed: "+(G.reason||"Contract execution reverted")),X.error(Z,{id:"claim-tx"}),X.dismiss("claim-confirm")}finally{z(!1)}},L=yx("swap",ue.contracts.share,ue.contracts.usdt);if(!t)return c.jsx("div",{className:"max-w-2xl mx-auto",children:c.jsx(ne,{children:c.jsxs(re,{className:"p-12 text-center",children:[c.jsx(Qd,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),c.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Connect Your Wallet"}),c.jsx("p",{className:"text-gray-600",children:"Please connect your wallet to view your portfolio."})]})})});if(!n)return c.jsx("div",{className:"max-w-2xl mx-auto",children:c.jsx(ne,{children:c.jsxs(re,{className:"p-12 text-center",children:[c.jsx(_r,{className:"h-12 w-12 text-warning-500 mx-auto mb-4"}),c.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Wrong Network"}),c.jsx("p",{className:"text-gray-600 mb-4",children:"Please switch to BSC Testnet to view your portfolio."}),c.jsx(se,{onClick:r,children:"Switch Network"})]})})});const $=i||u||A||!x&&y,V=E||x;return c.jsxs("div",{className:"max-w-4xl mx-auto space-y-6",children:[c.jsxs("div",{className:"text-center",children:[c.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Portfolio"}),c.jsx("p",{className:"text-gray-600",children:"Track your investments and manage your assets"})]}),c.jsxs(ne,{children:[c.jsx(Ze,{children:c.jsx("h2",{className:"text-xl font-semibold",children:"Account Overview"})}),c.jsx(re,{children:c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{children:[c.jsx("p",{className:"text-sm text-gray-600",children:"Connected Account"}),c.jsx("p",{className:"font-mono text-sm",children:e})]}),c.jsx(Je,{variant:"success",children:"Connected"})]})})]}),(k==null?void 0:k.show)&&c.jsx(ne,{className:"border-blue-200 bg-blue-50",children:c.jsx(re,{className:"pt-6",children:c.jsxs("div",{className:"flex items-start space-x-3",children:[c.jsx(Qr,{className:"h-5 w-5 text-blue-600 mt-0.5"}),c.jsxs("div",{children:[c.jsx("h3",{className:"font-medium text-blue-900",children:k.title}),c.jsx("p",{className:"text-sm text-blue-700 mt-1",children:k.message}),(E==null?void 0:E.correctionApplied)&&c.jsxs("div",{className:"mt-2 text-xs text-blue-600",children:[c.jsxs("p",{children:[" Corrected ",E.correctedPurchases," of ",E.totalPurchases," purchases"]}),c.jsxs("p",{children:[" Removed ",E.correctionAmount," BLOCKS from inflated data"]})]})]})]})})}),c.jsxs(ne,{children:[c.jsxs(Ze,{className:"flex flex-row items-center justify-between",children:[c.jsxs("h2",{className:"text-xl font-semibold flex items-center",children:[c.jsx(Ts,{className:"h-5 w-5 mr-2"}),"Investment Summary"]}),V&&c.jsxs("div",{className:"flex items-center space-x-2",children:[c.jsx(Je,{variant:"success",className:"text-xs",children:" Instant Load"}),(E==null?void 0:E.correctionApplied)&&c.jsx(Je,{variant:"outline",className:"text-xs",children:" Corrected"})]})]}),c.jsx(re,{children:$?c.jsxs("div",{className:"flex items-center justify-center py-8",children:[c.jsx(vn,{className:"h-6 w-6 animate-spin"}),c.jsx("span",{className:"ml-2",children:"Loading investment data..."})]}):b?c.jsxs("div",{className:"flex flex-col items-center justify-center py-8",children:[c.jsx(Qr,{className:"h-12 w-12 text-orange-400 mb-4"}),c.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Data Loading Issue"}),c.jsx("p",{className:"text-gray-600 text-center mb-4",children:b}),c.jsxs(se,{onClick:w,variant:"outline",className:"flex items-center",children:[c.jsx(ts,{className:"h-4 w-4 mr-2"}),"Retry Loading"]})]}):c.jsxs("div",{className:"space-y-6",children:[A?c.jsxs("div",{className:"flex items-center justify-center py-8",children:[c.jsx(vn,{className:"h-6 w-6 animate-spin mr-2"}),c.jsx("span",{children:"Loading portfolio stats..."})]}):T?c.jsxs("div",{className:"text-center py-8",children:[c.jsx(Qr,{className:"h-12 w-12 text-red-400 mx-auto mb-4"}),c.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Error Loading Stats"}),c.jsx("p",{className:"text-gray-600 mb-4",children:"Failed to load portfolio statistics. Falling back to transaction history."}),c.jsxs(se,{onClick:j,variant:"outline",className:"flex items-center",children:[c.jsx(ts,{className:"h-4 w-4 mr-2"}),"Retry"]})]}):c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[c.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg",children:[c.jsx("p",{className:"text-sm text-blue-600",children:"Total Invested"}),c.jsx("p",{className:"text-lg font-semibold text-blue-700",children:V?`${V.totalInvested} USDT`:`${m.totalInvested} USDT`})]}),c.jsxs("div",{className:"bg-green-50 p-4 rounded-lg",children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx("p",{className:"text-sm text-green-600",children:"Total Tokens Received"}),(E==null?void 0:E.correctionApplied)&&c.jsx(Je,{variant:"outline",className:"text-xs",children:"Corrected"})]}),c.jsx("p",{className:"text-lg font-semibold text-green-700",children:V?V.totalTokensReceived:m.totalTokensReceived}),(E==null?void 0:E.correctionApplied)&&c.jsxs("p",{className:"text-xs text-green-600 mt-1",children:["Previously: ",E.originalTotalTokens]})]}),c.jsxs("div",{className:"bg-purple-50 p-4 rounded-lg",children:[c.jsx("p",{className:"text-sm text-purple-600",children:"Packages Purchased"}),c.jsx("p",{className:"text-lg font-semibold text-purple-700",children:V?V.purchaseCount:m.purchaseCount})]}),c.jsxs("div",{className:"bg-orange-50 p-4 rounded-lg",children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx("p",{className:"text-sm text-orange-600",children:"BLOCKS-LP Received"}),(E==null?void 0:E.correctionApplied)&&c.jsx(Je,{variant:"outline",className:"text-xs",children:"Corrected"})]}),c.jsx("p",{className:"text-lg font-semibold text-orange-700",children:V?V.totalLPTokens:m.currentLPTokens})]})]}),R&&c.jsx("div",{className:"bg-gradient-to-r from-blue-50 to-purple-50 p-4 rounded-lg mb-4",children:c.jsxs("div",{className:"text-center",children:[c.jsx("p",{className:"text-sm text-blue-600",children:"Current BLOCKS Price"}),c.jsxs("p",{className:"text-2xl font-bold text-blue-700",children:["$",Oe(R,18,4)]}),c.jsx("div",{className:"mt-2 text-xs text-gray-600",children:"Price determined by AMM mechanics on PancakeSwap"})]})}),m.purchaseCount>0&&c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[c.jsxs("div",{className:"bg-gradient-to-r from-indigo-50 to-blue-50 p-4 rounded-lg",children:[c.jsx("p",{className:"text-sm text-indigo-600",children:"Portfolio ROI"}),c.jsxs("p",{className:`text-lg font-semibold ${m.roi>=0?"text-green-700":"text-red-700"}`,children:[m.roi>=0?"+":"",m.roi.toFixed(2),"%"]}),c.jsx("p",{className:"text-xs text-indigo-500 mt-1",children:R?`Based on current price: $${Oe(R,18,4)}`:"Based on current market price"})]}),c.jsxs("div",{className:"bg-gradient-to-r from-teal-50 to-green-50 p-4 rounded-lg",children:[c.jsx("p",{className:"text-sm text-teal-600",children:"Vesting Tokens"}),c.jsx("p",{className:"text-lg font-semibold text-teal-700",children:m.totalVestTokens}),c.jsx("p",{className:"text-xs text-teal-500 mt-1",children:"Locked in vesting"})]}),c.jsxs("div",{className:"bg-gradient-to-r from-amber-50 to-orange-50 p-4 rounded-lg",children:[c.jsx("p",{className:"text-sm text-amber-600",children:"Pool Tokens"}),c.jsx("p",{className:"text-lg font-semibold text-amber-700",children:m.totalPoolTokens}),c.jsx("p",{className:"text-xs text-amber-500 mt-1",children:"Added to liquidity"})]})]}),(E==null?void 0:E.correctionApplied)&&c.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:c.jsxs("div",{className:"flex items-start",children:[c.jsx(ni,{className:"h-5 w-5 text-blue-500 mt-0.5 mr-3 flex-shrink-0"}),c.jsxs("div",{children:[c.jsx("h3",{className:"text-sm font-medium text-blue-800 mb-2",children:"Portfolio Data Corrections Applied"}),c.jsxs("div",{className:"text-sm text-blue-700 space-y-2",children:[c.jsx("p",{children:"Your portfolio includes purchases made before our exchange rate fix was deployed. We've automatically corrected the inflated token amounts to show realistic values."}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mt-3 text-xs",children:[c.jsxs("div",{children:[c.jsx("p",{className:"font-medium",children:"Corrections Applied:"}),c.jsxs("ul",{className:"list-disc list-inside mt-1 space-y-1",children:[c.jsx("li",{children:"Exchange rate inflation fix (historical purchases)"}),c.jsx("li",{children:"Treasury allocation adjustment (portfolio metrics fix)"})]})]}),c.jsxs("div",{children:[c.jsx("p",{className:"font-medium",children:"What This Means:"}),c.jsxs("ul",{className:"list-disc list-inside mt-1 space-y-1",children:[c.jsx("li",{children:"Token amounts now show realistic values"}),c.jsx("li",{children:"ROI calculations are accurate"}),c.jsx("li",{children:"New purchases use corrected amounts"})]})]})]}),c.jsxs("p",{className:"text-xs mt-3 pt-2 border-t border-blue-200",children:[c.jsx("strong",{children:"Note:"})," These corrections only affect the display of historical data. Your actual token holdings and vesting schedules remain unchanged."]})]})]})]})})]})})]}),((P==null?void 0:P.referralCount)>0||!S)&&c.jsxs(ne,{children:[c.jsx(Ze,{children:c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(cr,{className:"h-5 w-5 text-purple-600"}),c.jsx("h2",{className:"text-xl font-semibold",children:"Referral Performance"})]}),(P==null?void 0:P.referralCount)>0&&c.jsxs(Je,{variant:"success",className:"flex items-center",children:[c.jsx(Ts,{className:"h-3 w-3 mr-1"}),"Active Referrer"]})]})}),c.jsx(re,{children:S?c.jsx("div",{className:"animate-pulse space-y-4",children:c.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[...Array(3)].map((q,G)=>c.jsxs("div",{className:"bg-gray-100 p-4 rounded-lg",children:[c.jsx("div",{className:"h-4 bg-gray-200 rounded mb-2"}),c.jsx("div",{className:"h-6 bg-gray-200 rounded"})]},G))})}):(P==null?void 0:P.referralCount)>0?c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[c.jsx("div",{className:"bg-gradient-to-r from-purple-50 to-violet-50 p-4 rounded-lg",children:c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{children:[c.jsx("p",{className:"text-sm text-purple-600",children:"Total Rewards"}),c.jsxs("p",{className:"text-lg font-semibold text-purple-700",children:[P.totalRewards," BLOCKS"]})]}),c.jsx("div",{className:"p-2 bg-purple-100 rounded-lg",children:c.jsx(Ts,{className:"h-5 w-5 text-purple-600"})})]})}),c.jsx("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 p-4 rounded-lg",children:c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{children:[c.jsx("p",{className:"text-sm text-blue-600",children:"Total Referrals"}),c.jsx("p",{className:"text-lg font-semibold text-blue-700",children:P.referralCount})]}),c.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:c.jsx(cr,{className:"h-5 w-5 text-blue-600"})})]})}),c.jsx("div",{className:"bg-gradient-to-r from-green-50 to-emerald-50 p-4 rounded-lg",children:c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{children:[c.jsx("p",{className:"text-sm text-green-600",children:"Average Reward"}),c.jsxs("p",{className:"text-lg font-semibold text-green-700",children:[P.averageReward," BLOCKS"]})]}),c.jsx("div",{className:"p-2 bg-green-100 rounded-lg",children:c.jsx(_r,{className:"h-5 w-5 text-green-600"})})]})})]}),c.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 pt-4 border-t border-gray-200",children:[c.jsxs(se,{onClick:()=>window.location.href="/referral",className:"flex items-center justify-center gap-2",children:[c.jsx(cr,{className:"h-4 w-4"}),"View Referral Dashboard"]}),c.jsxs(se,{variant:"outline",onClick:async()=>{const{copyToClipboardWithFeedback:q}=await Rn(async()=>{const{copyToClipboardWithFeedback:Z}=await Promise.resolve().then(()=>QS);return{copyToClipboardWithFeedback:Z}},void 0),G=`${window.location.origin}/?ref=${e}`;await q(G,"Referral link copied to clipboard!","Failed to copy referral link")},className:"flex items-center justify-center gap-2",children:[c.jsx(Ad,{className:"h-4 w-4"}),"Copy Referral Link"]})]})]}):c.jsxs("div",{className:"text-center py-8",children:[c.jsx(cr,{className:"h-12 w-12 text-gray-300 mx-auto mb-4"}),c.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Start Earning Referral Rewards"}),c.jsx("p",{className:"text-gray-600 mb-4",children:"Share your referral link and earn BLOCKS rewards when others join BlockCoop!"}),c.jsx("div",{className:"flex flex-col sm:flex-row gap-3 justify-center",children:c.jsxs(se,{onClick:()=>window.location.href="/referral",className:"flex items-center justify-center gap-2",children:[c.jsx(cr,{className:"h-4 w-4"}),"Get Your Referral Link"]})})]})})]}),c.jsxs(ne,{children:[c.jsx(Ze,{children:c.jsxs("h2",{className:"text-xl font-semibold flex items-center",children:[c.jsx(Za,{className:"h-5 w-5 mr-2"}),"Purchased Packages"]})}),c.jsx(re,{children:$?c.jsxs("div",{className:"flex items-center justify-center py-8",children:[c.jsx(vn,{className:"h-6 w-6 animate-spin"}),c.jsx("span",{className:"ml-2",children:"Loading purchase history..."})]}):b&&p.length===0?c.jsxs("div",{className:"flex flex-col items-center justify-center py-8",children:[c.jsx(Qr,{className:"h-12 w-12 text-orange-400 mb-4"}),c.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Unable to Load Purchase History"}),c.jsx("p",{className:"text-gray-600 text-center mb-4",children:"There was an issue loading your purchase history. This might be due to network congestion."}),c.jsxs(se,{onClick:w,variant:"outline",className:"flex items-center",children:[c.jsx(ts,{className:"h-4 w-4 mr-2"}),"Try Again"]})]}):p.length===0?c.jsxs("div",{className:"text-center py-8",children:[c.jsx(Za,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),c.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No Packages Purchased"}),c.jsx("p",{className:"text-gray-600",children:"You haven't purchased any investment packages yet."})]}):c.jsx("div",{className:"space-y-4",children:p.map((q,G)=>c.jsx("div",{className:"border rounded-lg p-4 hover:bg-gray-50 transition-colors",children:c.jsxs("div",{className:"flex items-start justify-between",children:[c.jsxs("div",{className:"flex-1",children:[c.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[c.jsx("h3",{className:"font-semibold text-lg",children:q.packageName}),c.jsxs(Je,{variant:"info",children:["Package #",q.packageId]})]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-sm",children:[c.jsxs("div",{children:[c.jsx("p",{className:"text-gray-600",children:"Investment Amount"}),c.jsxs("p",{className:"font-semibold",children:[Oe(q.usdtAmount,18,2)," USDT"]})]}),c.jsxs("div",{children:[c.jsx("p",{className:"text-gray-600",children:"Tokens Received"}),c.jsx("p",{className:"font-semibold",children:Oe(q.totalTokens,18,4)})]}),c.jsxs("div",{children:[c.jsx("p",{className:"text-gray-600",children:"Vesting Tokens"}),c.jsx("p",{className:"font-semibold",children:Oe(q.vestTokens,18,4)})]})]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-sm mt-2",children:[c.jsxs("div",{children:[c.jsx("p",{className:"text-gray-600",children:"Pool Tokens (allocation)"}),c.jsx("p",{className:"font-semibold",children:Oe(q.poolTokens,18,4)})]}),c.jsxs("div",{children:[c.jsx("p",{className:"text-gray-600",children:"AMM Pool Tokens (actual)"}),c.jsx("p",{className:"font-semibold",children:(()=>{const Z=M(Number(q.packageId),Number(q.timestamp));return Z?Oe(Z.actualShareToken,18,4):""})()})]}),c.jsxs("div",{children:[c.jsx("p",{className:"text-gray-600",children:"Effective Vesting (est.)"}),c.jsx("p",{className:"font-semibold",children:(()=>{const Z=M(Number(q.packageId),Number(q.timestamp));if(!Z)return"";const oe=(q.totalTokens||0n)-(Z.actualShareToken||0n);return Oe(oe,18,4)})()})]}),c.jsxs("div",{children:[c.jsx("p",{className:"text-gray-600",children:"BLOCKS-LP"}),c.jsx("p",{className:"font-semibold",children:Oe(q.lpTokens,18,4)})]}),c.jsxs("div",{children:[c.jsx("p",{className:"text-gray-600",children:"Purchase Date"}),c.jsx("p",{className:"font-semibold",children:new Date(q.timestamp*1e3).toLocaleDateString()})]})]})]}),c.jsx("div",{className:"ml-4",children:c.jsxs("a",{href:`https://testnet.bscscan.com/tx/${q.transactionHash}`,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center text-sm text-blue-600 hover:text-blue-800",children:[c.jsx(ao,{className:"h-4 w-4 mr-1"}),"View TX"]})})]})},`${q.transactionHash}-${G}`))})})]}),g.length>0&&c.jsxs(ne,{children:[c.jsx(Ze,{children:c.jsxs("h2",{className:"text-xl font-semibold flex items-center",children:[c.jsx(_r,{className:"h-5 w-5 mr-2"}),"BLOCKS-LP Token Redemptions"]})}),c.jsx(re,{children:c.jsx("div",{className:"space-y-4",children:g.map((q,G)=>c.jsx("div",{className:"border rounded-lg p-4 hover:bg-gray-50 transition-colors",children:c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx("div",{className:"flex-1",children:c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-sm",children:[c.jsxs("div",{children:[c.jsx("p",{className:"text-gray-600",children:"BLOCKS-LP Redeemed"}),c.jsx("p",{className:"font-semibold",children:q.formattedAmount})]}),c.jsxs("div",{children:[c.jsx("p",{className:"text-gray-600",children:"Redemption Date"}),c.jsx("p",{className:"font-semibold",children:q.date.toLocaleDateString()})]}),c.jsxs("div",{children:[c.jsx("p",{className:"text-gray-600",children:"Block Number"}),c.jsxs("p",{className:"font-semibold",children:["#",q.blockNumber]})]})]})}),c.jsx("div",{className:"ml-4",children:c.jsxs("a",{href:`https://testnet.bscscan.com/tx/${q.transactionHash}`,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center text-sm text-blue-600 hover:text-blue-800",children:[c.jsx(ao,{className:"h-4 w-4 mr-1"}),"View TX"]})})]})},`${q.transactionHash}-${G}`))})})]}),c.jsxs(ne,{children:[c.jsx(Ze,{children:c.jsx("h2",{className:"text-xl font-semibold",children:"Token Balances"})}),c.jsx(re,{children:$?c.jsxs("div",{className:"flex items-center justify-center py-8",children:[c.jsx(vn,{className:"h-6 w-6 animate-spin"}),c.jsx("span",{className:"ml-2",children:"Loading balances..."})]}):c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[c.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[c.jsx("p",{className:"text-sm text-gray-600",children:"USDT Balance"}),c.jsx("p",{className:"text-lg font-semibold",children:s.usdt})]}),c.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx("p",{className:"text-sm text-gray-600",children:"BLOCKS Tokens"}),a&&c.jsx(Je,{variant:"outline",className:"text-xs",children:"Corrected"})]}),c.jsx("p",{className:"text-lg font-semibold",children:s.shareTotal}),c.jsx("p",{className:"text-xs text-gray-500",children:"Total received (matches BLOCKS-LP)"})]}),c.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx("p",{className:"text-sm text-gray-600",children:"BLOCKS-LP"}),(E==null?void 0:E.correctionApplied)&&c.jsx(Je,{variant:"outline",className:"text-xs",children:"Corrected"})]}),c.jsx("p",{className:"text-lg font-semibold",children:(E==null?void 0:E.totalLPTokens)||s.lp})]}),c.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[c.jsx("p",{className:"text-sm text-gray-600",children:"BNB Balance"}),c.jsx("p",{className:"text-lg font-semibold",children:s.native})]})]})})]}),c.jsxs(ne,{children:[c.jsx(Ze,{children:c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("h2",{className:"text-xl font-semibold flex items-center",children:[c.jsx(Ql,{className:"h-5 w-5 mr-2"}),"Vesting Schedule"]}),h&&c.jsx(Je,{variant:"outline",className:"text-xs",children:"Corrected"})]})}),c.jsx(re,{children:$?c.jsxs("div",{className:"flex items-center justify-center py-8",children:[c.jsx(vn,{className:"h-6 w-6 animate-spin"}),c.jsx("span",{className:"ml-2",children:"Loading vesting info..."})]}):c.jsxs("div",{className:"space-y-6",children:[l.totalVested!=="0.0000"&&c.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-purple-50 p-4 rounded-lg",children:[c.jsxs("div",{className:"flex items-center justify-between mb-2",children:[c.jsx("h3",{className:"font-semibold text-gray-900",children:"Vesting Progress"}),c.jsxs("span",{className:"text-sm font-medium text-gray-600",children:[(l.vestingProgress||0).toFixed(1),"%"]})]}),c.jsx("div",{className:"w-full bg-gray-200 rounded-full h-3 mb-2",children:c.jsx("div",{className:"bg-gradient-to-r from-blue-500 to-purple-500 h-3 rounded-full transition-all duration-300",style:{width:`${Math.min(l.vestingProgress||0,100)}%`}})}),c.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-600",children:[c.jsx("span",{children:l.isCliffPassed?l.isFullyVested?"Fully Vested":"Vesting Active":"Cliff Period"}),l.vestingEndDate&&c.jsxs("span",{children:["Ends: ",l.vestingEndDate.toLocaleDateString()]})]})]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[c.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx("p",{className:"text-sm text-gray-600",children:"Total Vested"}),h&&c.jsx(Je,{variant:"outline",className:"text-xs",children:"Corrected"})]}),c.jsx("p",{className:"text-lg font-semibold",children:l.totalVested}),h&&f&&c.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Previously: ",Oe(f.totalVested,18,4)]})]}),c.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[c.jsx("p",{className:"text-sm text-gray-600",children:"Already Claimed"}),c.jsx("p",{className:"text-lg font-semibold",children:l.claimed})]}),c.jsxs("div",{className:"bg-green-50 p-4 rounded-lg",children:[c.jsx("p",{className:"text-sm text-green-600",children:"Available to Claim"}),c.jsx("p",{className:"text-lg font-semibold text-green-700",children:l.claimable})]})]}),l.totalVested!=="0.0000"&&c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[c.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg",children:[c.jsx("h4",{className:"font-semibold text-blue-900 mb-2",children:"Schedule Details"}),c.jsxs("div",{className:"space-y-1 text-sm",children:[l.startDate&&c.jsxs("div",{className:"flex justify-between",children:[c.jsx("span",{className:"text-blue-600",children:"Start Date:"}),c.jsx("span",{className:"font-medium",children:l.startDate.toLocaleDateString()})]}),c.jsxs("div",{className:"flex justify-between",children:[c.jsx("span",{className:"text-blue-600",children:"Cliff Period:"}),c.jsxs("span",{className:"font-medium",children:[(l.cliffDuration||0).toFixed(0)," days"]})]}),c.jsxs("div",{className:"flex justify-between",children:[c.jsx("span",{className:"text-blue-600",children:"Total Duration:"}),c.jsxs("span",{className:"font-medium",children:[(l.totalDuration||0).toFixed(0)," days"]})]})]})]}),c.jsxs("div",{className:"bg-purple-50 p-4 rounded-lg",children:[c.jsx("h4",{className:"font-semibold text-purple-900 mb-2",children:"Status"}),c.jsxs("div",{className:"space-y-2",children:[c.jsxs("div",{className:"flex items-center",children:[c.jsx("div",{className:`w-2 h-2 rounded-full mr-2 ${l.isCliffPassed?"bg-green-500":"bg-yellow-500"}`}),c.jsxs("span",{className:"text-sm",children:["Cliff ",l.isCliffPassed?"Passed":"Active"]})]}),c.jsxs("div",{className:"flex items-center",children:[c.jsx("div",{className:`w-2 h-2 rounded-full mr-2 ${l.isFullyVested?"bg-green-500":"bg-blue-500"}`}),c.jsx("span",{className:"text-sm",children:l.isFullyVested?"Fully Vested":"Vesting in Progress"})]}),l.cliffEndDate&&!l.isCliffPassed&&c.jsxs("div",{className:"text-xs text-purple-600 mt-2",children:["Cliff ends: ",l.cliffEndDate.toLocaleDateString()]})]})]})]}),o.claimable>0n&&c.jsx("div",{className:"pt-4",children:c.jsx(se,{onClick:D,disabled:F||$||!t||!n,className:"w-full md:w-auto",children:F?c.jsxs(c.Fragment,{children:[c.jsx(vn,{className:"h-4 w-4 animate-spin mr-2"}),"Claiming..."]}):"Claim Vested Tokens"})}),l.totalVested==="0.0000"&&c.jsxs("div",{className:"text-center py-8",children:[c.jsx(Ql,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),c.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No Vesting Schedule"}),c.jsx("p",{className:"text-gray-600",children:"You don't have any tokens in vesting yet. Purchase a package to start earning vested tokens."})]})]})})]}),c.jsxs(ne,{children:[c.jsx(Ze,{children:c.jsx("h2",{className:"text-xl font-semibold",children:"Trading"})}),c.jsx(re,{children:c.jsxs("div",{className:"space-y-4",children:[c.jsx("p",{className:"text-gray-600",children:"Trade your BLOCKS tokens on PancakeSwap"}),c.jsxs("a",{href:L,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center px-4 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 transition-colors",children:[c.jsx(ao,{className:"h-4 w-4 mr-2"}),"Trade on PancakeSwap"]})]})})]})]})}function Y1e({totalRewards:t,referralCount:e,averageReward:n,lastReferralDate:r,topReferralReward:s,loading:i=!1}){const a=l=>l?new Date(l*1e3).toLocaleDateString():"Never",o=l=>{if(!l)return"Never";const d=Date.now()-l*1e3,h=Math.floor(d/(1e3*60*60*24));return h===0?"Today":h===1?"1 day ago":h<30?`${h} days ago`:h<365?`${Math.floor(h/30)} months ago`:`${Math.floor(h/365)} years ago`};return i?c.jsxs(ne,{children:[c.jsx(Ze,{children:c.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Referral Performance"})}),c.jsx(re,{children:c.jsx("div",{className:"animate-pulse space-y-4",children:c.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[...Array(6)].map((l,u)=>c.jsxs("div",{className:"bg-gray-100 p-4 rounded-lg",children:[c.jsx("div",{className:"h-4 bg-gray-200 rounded mb-2"}),c.jsx("div",{className:"h-6 bg-gray-200 rounded"})]},u))})})})]}):c.jsxs(ne,{children:[c.jsx(Ze,{children:c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Referral Performance"}),e>0&&c.jsxs(Je,{variant:"success",className:"flex items-center",children:[c.jsx(lT,{className:"h-3 w-3 mr-1"}),"Active Referrer"]})]})}),c.jsxs(re,{children:[c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[c.jsx("div",{className:"bg-gradient-to-r from-green-50 to-emerald-50 p-4 rounded-lg",children:c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{children:[c.jsx("p",{className:"text-sm text-green-600",children:"Total Rewards"}),c.jsxs("p",{className:"text-lg font-semibold text-green-700",children:[Nt(t)," BLOCKS"]})]}),c.jsx("div",{className:"p-2 bg-green-100 rounded-lg",children:c.jsx(Ts,{className:"h-5 w-5 text-green-600"})})]})}),c.jsx("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 p-4 rounded-lg",children:c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{children:[c.jsx("p",{className:"text-sm text-blue-600",children:"Total Referrals"}),c.jsx("p",{className:"text-lg font-semibold text-blue-700",children:e})]}),c.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:c.jsx(cr,{className:"h-5 w-5 text-blue-600"})})]})}),c.jsx("div",{className:"bg-gradient-to-r from-purple-50 to-violet-50 p-4 rounded-lg",children:c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{children:[c.jsx("p",{className:"text-sm text-purple-600",children:"Average Reward"}),c.jsxs("p",{className:"text-lg font-semibold text-purple-700",children:[e>0?Nt(n):"0"," BLOCKS"]})]}),c.jsx("div",{className:"p-2 bg-purple-100 rounded-lg",children:c.jsx(_r,{className:"h-5 w-5 text-purple-600"})})]})}),c.jsx("div",{className:"bg-gradient-to-r from-orange-50 to-amber-50 p-4 rounded-lg",children:c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{children:[c.jsx("p",{className:"text-sm text-orange-600",children:"Highest Reward"}),c.jsxs("p",{className:"text-lg font-semibold text-orange-700",children:[Nt(s)," BLOCKS"]})]}),c.jsx("div",{className:"p-2 bg-orange-100 rounded-lg",children:c.jsx(qS,{className:"h-5 w-5 text-orange-600"})})]})}),c.jsx("div",{className:"bg-gradient-to-r from-teal-50 to-cyan-50 p-4 rounded-lg",children:c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{children:[c.jsx("p",{className:"text-sm text-teal-600",children:"Last Referral"}),c.jsx("p",{className:"text-lg font-semibold text-teal-700",children:o(r)}),r&&c.jsx("p",{className:"text-xs text-teal-500 mt-1",children:a(r)})]}),c.jsx("div",{className:"p-2 bg-teal-100 rounded-lg",children:c.jsx(Bye,{className:"h-5 w-5 text-teal-600"})})]})}),c.jsx("div",{className:"bg-gradient-to-r from-gray-50 to-slate-50 p-4 rounded-lg",children:c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{children:[c.jsx("p",{className:"text-sm text-gray-600",children:"Status"}),c.jsx("p",{className:"text-lg font-semibold text-gray-700",children:e===0?"Getting Started":e<5?"Building Network":e<20?"Active Referrer":"Top Performer"})]}),c.jsx("div",{className:"p-2 bg-gray-100 rounded-lg",children:c.jsx(lT,{className:"h-5 w-5 text-gray-600"})})]})})]}),e>0&&c.jsxs("div",{className:"mt-6 p-4 bg-gradient-to-r from-indigo-50 to-blue-50 rounded-lg",children:[c.jsx("h4",{className:"text-sm font-medium text-indigo-700 mb-2",children:"Performance Insights"}),c.jsxs("div",{className:"space-y-1 text-sm text-indigo-600",children:[e>=10&&c.jsxs("p",{children:[" Great job! You've referred ",e," users to BlockCoop."]}),t>0n&&c.jsxs("p",{children:[" You've earned ",Nt(t)," BLOCKS in referral rewards."]}),e<5&&c.jsx("p",{children:" Refer more users to increase your rewards and build your network!"})]})]})]})]})}function Q1e({userAddress:t,totalRewards:e,referralCount:n}){const[r,s]=v.useState(null),[i,a]=v.useState(!1),[o,l]=v.useState(!1),[u,d]=v.useState(!1);v.useEffect(()=>{if(t){const m=L$(t);m&&pE(m)?s(m):(console.error("Failed to generate valid referral link for:",t),X.error("Failed to generate referral link"))}},[t]);const h=async()=>{if(!r)return;await Kv(r)&&(a(!0),setTimeout(()=>a(!1),2e3))},f=async()=>{if(!r)return;await B$(r.code)&&(l(!0),setTimeout(()=>l(!1),2e3))},p=async()=>{if(r){d(!0);try{await F$(r)}catch(m){console.error("Share failed:",m)}finally{d(!1)}}},g=async()=>{if(!r)return;const m=H$(Nt(e),n,r);await hE(m,"Referral stats copied to clipboard!","Failed to copy referral stats")};return r?c.jsxs(ne,{children:[c.jsxs(Ze,{children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Your Referral Link"}),c.jsxs(Je,{variant:"outline",className:"flex items-center",children:[c.jsx(Vye,{className:"h-3 w-3 mr-1"}),"Code: ",r.code]})]}),c.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Share your unique referral link to earn rewards when others join BlockCoop"})]}),c.jsxs(re,{className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Referral Link"}),c.jsxs("div",{className:"flex gap-2",children:[c.jsx(Et,{value:r.url,readOnly:!0,className:"flex-1 font-mono text-sm",onClick:m=>m.currentTarget.select()}),c.jsxs(se,{variant:"outline",size:"sm",onClick:h,className:"flex items-center gap-1",children:[i?c.jsx(vR,{className:"h-4 w-4 text-green-600"}):c.jsx(Ad,{className:"h-4 w-4"}),i?"Copied!":"Copy"]})]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Referral Code"}),c.jsxs("div",{className:"flex gap-2",children:[c.jsx(Et,{value:r.code,readOnly:!0,className:"flex-1 font-mono text-lg font-bold text-center",onClick:m=>m.currentTarget.select()}),c.jsxs(se,{variant:"outline",size:"sm",onClick:f,className:"flex items-center gap-1",children:[o?c.jsx(vR,{className:"h-4 w-4 text-green-600"}):c.jsx(Ad,{className:"h-4 w-4"}),o?"Copied!":"Copy"]})]})]}),c.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 pt-4 border-t border-gray-200",children:[c.jsxs(se,{onClick:p,disabled:u,className:"flex items-center justify-center gap-2",children:[c.jsx(i$,{className:"h-4 w-4"}),u?"Sharing...":"Share Link"]}),c.jsxs(se,{variant:"outline",onClick:g,className:"flex items-center justify-center gap-2",children:[c.jsx(ao,{className:"h-4 w-4"}),"Share Stats"]})]}),c.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 p-4 rounded-lg",children:[c.jsx("h4",{className:"text-sm font-medium text-blue-700 mb-2",children:"Referral Benefits"}),c.jsxs("div",{className:"space-y-1 text-sm text-blue-600",children:[c.jsx("p",{children:" Earn 2.5% - 5% BLOCKS rewards for each referral"}),c.jsx("p",{children:" Rewards are paid instantly from treasury"}),c.jsx("p",{children:" No limit on the number of referrals"}),c.jsx("p",{children:" Help grow the BlockCoop community"})]})]}),c.jsxs("div",{className:"bg-gradient-to-r from-green-50 to-emerald-50 p-4 rounded-lg",children:[c.jsx("h4",{className:"text-sm font-medium text-green-700 mb-2",children:"How It Works"}),c.jsxs("div",{className:"space-y-1 text-sm text-green-600",children:[c.jsx("p",{children:"1. Share your referral link with friends"}),c.jsx("p",{children:"2. They visit BlockCoop using your link"}),c.jsx("p",{children:"3. When they purchase a package, you earn rewards"}),c.jsx("p",{children:"4. Rewards are automatically sent to your wallet"})]})]}),c.jsx("div",{className:"text-center pt-2",children:c.jsxs(se,{variant:"ghost",size:"sm",className:"text-gray-500 hover:text-gray-700",onClick:()=>X.info("QR Code feature coming soon!"),children:[c.jsx(Yye,{className:"h-4 w-4 mr-1"}),"Generate QR Code"]})})]})]}):c.jsxs(ne,{children:[c.jsx(Ze,{children:c.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Referral Link"})}),c.jsx(re,{children:c.jsxs("div",{className:"animate-pulse space-y-4",children:[c.jsx("div",{className:"h-4 bg-gray-200 rounded"}),c.jsx("div",{className:"h-10 bg-gray-200 rounded"}),c.jsx("div",{className:"h-10 bg-gray-200 rounded"})]})})]})}function J1e({transactions:t,loading:e=!1,onRefresh:n}){const[r,s]=v.useState(null),i=u=>new Date(u*1e3).toLocaleString(),a=u=>{const h=Date.now()-u*1e3,f=Math.floor(h/(1e3*60)),p=Math.floor(h/(1e3*60*60)),g=Math.floor(h/(1e3*60*60*24));return f<60?`${f}m ago`:p<24?`${p}h ago`:`${g}d ago`},o=async u=>{const{copyToClipboardWithFeedback:d}=await Rn(async()=>{const{copyToClipboardWithFeedback:f}=await Promise.resolve().then(()=>QS);return{copyToClipboardWithFeedback:f}},void 0);await d(u,"Transaction hash copied!","Failed to copy transaction hash")&&(s(u),setTimeout(()=>s(null),2e3))},l=u=>{const d=O$(u);window.open(d,"_blank","noopener,noreferrer")};return e?c.jsxs(ne,{children:[c.jsx(Ze,{children:c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Referral History"}),c.jsx(ts,{className:"h-4 w-4 animate-spin text-gray-400"})]})}),c.jsx(re,{children:c.jsx("div",{className:"animate-pulse space-y-4",children:[...Array(5)].map((u,d)=>c.jsxs("div",{className:"flex items-center space-x-4 p-4 border border-gray-200 rounded-lg",children:[c.jsx("div",{className:"h-4 bg-gray-200 rounded flex-1"}),c.jsx("div",{className:"h-4 bg-gray-200 rounded w-20"}),c.jsx("div",{className:"h-4 bg-gray-200 rounded w-16"})]},d))})})]}):c.jsxs(ne,{children:[c.jsx(Ze,{children:c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{children:[c.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Referral History"}),c.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Track all your referral rewards and transactions"})]}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsxs(Je,{variant:"outline",className:"flex items-center",children:[c.jsx(cr,{className:"h-3 w-3 mr-1"}),t.length," Referrals"]}),n&&c.jsxs(se,{variant:"ghost",size:"sm",onClick:n,className:"flex items-center gap-1",children:[c.jsx(ts,{className:"h-4 w-4"}),"Refresh"]})]})]})}),c.jsx(re,{children:t.length===0?c.jsxs("div",{className:"text-center py-12",children:[c.jsx(cr,{className:"h-12 w-12 text-gray-300 mx-auto mb-4"}),c.jsx("h4",{className:"text-lg font-medium text-gray-900 mb-2",children:"No Referrals Yet"}),c.jsx("p",{className:"text-gray-600 mb-4",children:"Start sharing your referral link to earn rewards when others join BlockCoop!"}),c.jsx("div",{className:"bg-blue-50 p-4 rounded-lg max-w-md mx-auto",children:c.jsxs("p",{className:"text-sm text-blue-700",children:[" ",c.jsx("strong",{children:"Tip:"})," Share your referral link on social media, with friends, or in crypto communities to maximize your earnings."]})})]}):c.jsxs("div",{className:"space-y-3",children:[c.jsx("div",{className:"hidden md:block overflow-x-auto",children:c.jsxs("table",{className:"w-full",children:[c.jsx("thead",{children:c.jsxs("tr",{className:"border-b border-gray-200",children:[c.jsx("th",{className:"text-left py-3 px-4 font-medium text-gray-700",children:"Buyer"}),c.jsx("th",{className:"text-left py-3 px-4 font-medium text-gray-700",children:"Reward"}),c.jsx("th",{className:"text-left py-3 px-4 font-medium text-gray-700",children:"Date"}),c.jsx("th",{className:"text-left py-3 px-4 font-medium text-gray-700",children:"Transaction"})]})}),c.jsx("tbody",{children:t.map((u,d)=>c.jsxs("tr",{className:"border-b border-gray-100 hover:bg-gray-50",children:[c.jsx("td",{className:"py-3 px-4",children:c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("span",{className:"font-mono text-sm",children:uT(u.buyer)}),c.jsx(se,{variant:"ghost",size:"sm",onClick:()=>o(u.buyer),className:"h-6 w-6 p-0",children:c.jsx(Ad,{className:"h-3 w-3"})})]})}),c.jsx("td",{className:"py-3 px-4",children:c.jsxs("div",{className:"flex items-center gap-1",children:[c.jsx(Ts,{className:"h-4 w-4 text-green-600"}),c.jsxs("span",{className:"font-semibold text-green-700",children:[Nt(u.reward)," BLOCKS"]})]})}),c.jsx("td",{className:"py-3 px-4",children:c.jsxs("div",{className:"flex flex-col",children:[c.jsx("span",{className:"text-sm",children:a(u.timestamp)}),c.jsx("span",{className:"text-xs text-gray-500",children:i(u.timestamp)})]})}),c.jsx("td",{className:"py-3 px-4",children:c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsxs("span",{className:"font-mono text-xs text-gray-600",children:[u.transactionHash.slice(0,8),"..."]}),c.jsx(se,{variant:"ghost",size:"sm",onClick:()=>o(u.transactionHash),className:"h-6 w-6 p-0",children:r===u.transactionHash?c.jsx("span",{className:"text-green-600 text-xs",children:""}):c.jsx(Ad,{className:"h-3 w-3"})}),c.jsx(se,{variant:"ghost",size:"sm",onClick:()=>l(u.transactionHash),className:"h-6 w-6 p-0",children:c.jsx(ao,{className:"h-3 w-3"})})]})})]},`${u.transactionHash}-${d}`))})]})}),c.jsx("div",{className:"md:hidden space-y-3",children:t.map((u,d)=>c.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[c.jsxs("div",{className:"flex items-center justify-between mb-3",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(Ts,{className:"h-4 w-4 text-green-600"}),c.jsxs("span",{className:"font-semibold text-green-700",children:[Nt(u.reward)," BLOCKS"]})]}),c.jsx("span",{className:"text-sm text-gray-500",children:a(u.timestamp)})]}),c.jsxs("div",{className:"space-y-2 text-sm",children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx("span",{className:"text-gray-600",children:"Buyer:"}),c.jsx("span",{className:"font-mono",children:uT(u.buyer)})]}),c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx("span",{className:"text-gray-600",children:"Date:"}),c.jsx("span",{children:i(u.timestamp)})]})]}),c.jsxs("div",{className:"flex items-center justify-between mt-3 pt-3 border-t border-gray-100",children:[c.jsxs("span",{className:"font-mono text-xs text-gray-600",children:[u.transactionHash.slice(0,12),"..."]}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(se,{variant:"ghost",size:"sm",onClick:()=>o(u.transactionHash),className:"h-8 w-8 p-0",children:r===u.transactionHash?c.jsx("span",{className:"text-green-600 text-xs",children:""}):c.jsx(Ad,{className:"h-3 w-3"})}),c.jsx(se,{variant:"ghost",size:"sm",onClick:()=>l(u.transactionHash),className:"h-8 w-8 p-0",children:c.jsx(ao,{className:"h-3 w-3"})})]})]})]},`${u.transactionHash}-${d}`))})]})})]})}function Z1e(){const{isConnected:t,account:e,isCorrectNetwork:n,switchToCorrectNetwork:r}=Rt(),{referralHistory:s,referralStats:i,formattedStats:a,loading:o,error:l,refetch:u}=y9();return t?n?c.jsxs("div",{className:"max-w-6xl mx-auto space-y-6",children:[c.jsxs("div",{className:"text-center",children:[c.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Referral Dashboard"}),c.jsx("p",{className:"text-gray-600",children:"Earn BLOCKS rewards by referring others to BlockCoop SACCO"})]}),c.jsxs(ne,{children:[c.jsx(Ze,{children:c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx("h2",{className:"text-xl font-semibold",children:"Account Overview"}),o&&c.jsx(ts,{className:"h-4 w-4 animate-spin text-gray-400"})]})}),c.jsx(re,{children:c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{children:[c.jsx("p",{className:"text-sm text-gray-600",children:"Connected Account"}),c.jsx("p",{className:"font-mono text-sm",children:e})]}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(Je,{variant:"success",children:"Connected"}),a&&a.referralCount>0&&c.jsxs(Je,{variant:"outline",className:"flex items-center",children:[c.jsx(cr,{className:"h-3 w-3 mr-1"}),a.referralCount," Referrals"]})]})]})})]}),l&&c.jsx(ne,{className:"border-red-200 bg-red-50",children:c.jsx(re,{className:"py-4",children:c.jsxs("div",{className:"flex items-center gap-2 text-red-700",children:[c.jsx(Qr,{className:"h-4 w-4"}),c.jsx("span",{className:"text-sm",children:l}),c.jsxs(se,{variant:"ghost",size:"sm",onClick:u,className:"ml-auto text-red-700 hover:text-red-800",children:[c.jsx(ts,{className:"h-4 w-4 mr-1"}),"Retry"]})]})})}),c.jsx(Y1e,{totalRewards:(i==null?void 0:i.totalRewards)||0n,referralCount:(i==null?void 0:i.referralCount)||0,averageReward:(i==null?void 0:i.averageReward)||0n,lastReferralDate:(i==null?void 0:i.lastReferralDate)||null,topReferralReward:(i==null?void 0:i.topReferralReward)||0n,loading:o}),c.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[c.jsx(Q1e,{userAddress:e||"",totalRewards:(i==null?void 0:i.totalRewards)||0n,referralCount:(i==null?void 0:i.referralCount)||0}),c.jsxs(ne,{children:[c.jsx(Ze,{children:c.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"How Referrals Work"})}),c.jsxs(re,{className:"space-y-4",children:[c.jsxs("div",{className:"space-y-3",children:[c.jsxs("div",{className:"flex items-start gap-3",children:[c.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:c.jsx(i$,{className:"h-4 w-4 text-blue-600"})}),c.jsxs("div",{children:[c.jsx("h4",{className:"font-medium text-gray-900",children:"Share Your Link"}),c.jsx("p",{className:"text-sm text-gray-600",children:"Share your unique referral link with friends and family"})]})]}),c.jsxs("div",{className:"flex items-start gap-3",children:[c.jsx("div",{className:"p-2 bg-green-100 rounded-lg",children:c.jsx(cr,{className:"h-4 w-4 text-green-600"})}),c.jsxs("div",{children:[c.jsx("h4",{className:"font-medium text-gray-900",children:"They Join & Invest"}),c.jsx("p",{className:"text-sm text-gray-600",children:"When someone uses your link and purchases a package"})]})]}),c.jsxs("div",{className:"flex items-start gap-3",children:[c.jsx("div",{className:"p-2 bg-purple-100 rounded-lg",children:c.jsx(s$,{className:"h-4 w-4 text-purple-600"})}),c.jsxs("div",{children:[c.jsx("h4",{className:"font-medium text-gray-900",children:"Earn Rewards"}),c.jsx("p",{className:"text-sm text-gray-600",children:"Receive 2.5% - 5% BLOCKS rewards instantly"})]})]})]}),c.jsxs("div",{className:"bg-gradient-to-r from-indigo-50 to-blue-50 p-4 rounded-lg",children:[c.jsx("h4",{className:"text-sm font-medium text-indigo-700 mb-2",children:"Reward Rates"}),c.jsxs("div",{className:"space-y-1 text-sm text-indigo-600",children:[c.jsx("p",{children:" Starter Package: 2.5% reward"}),c.jsx("p",{children:" Growth Package: 5% reward"}),c.jsx("p",{children:" Premium Package: 5% reward"})]})]}),c.jsxs("div",{className:"bg-gradient-to-r from-green-50 to-emerald-50 p-4 rounded-lg",children:[c.jsx("h4",{className:"text-sm font-medium text-green-700 mb-2",children:"Benefits"}),c.jsxs("div",{className:"space-y-1 text-sm text-green-600",children:[c.jsx("p",{children:" Instant reward payments"}),c.jsx("p",{children:" No referral limits"}),c.jsx("p",{children:" Transparent tracking"}),c.jsx("p",{children:" Help grow the community"})]})]})]})]})]}),c.jsx(J1e,{transactions:s,loading:o,onRefresh:u}),(!i||i.referralCount===0)&&c.jsxs(ne,{className:"bg-gradient-to-r from-blue-50 to-indigo-50",children:[c.jsx(Ze,{children:c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(qS,{className:"h-5 w-5 text-blue-600"}),c.jsx("h3",{className:"text-lg font-semibold text-blue-900",children:"Getting Started"})]})}),c.jsx(re,{children:c.jsxs("div",{className:"space-y-4",children:[c.jsx("p",{className:"text-blue-800",children:"Ready to start earning referral rewards? Follow these simple steps:"}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[c.jsxs("div",{className:"bg-white p-4 rounded-lg",children:[c.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[c.jsx("span",{className:"bg-blue-100 text-blue-600 text-sm font-bold px-2 py-1 rounded",children:"1"}),c.jsx("h4",{className:"font-medium",children:"Copy Your Link"})]}),c.jsx("p",{className:"text-sm text-gray-600",children:"Use the referral link card above to copy your unique link"})]}),c.jsxs("div",{className:"bg-white p-4 rounded-lg",children:[c.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[c.jsx("span",{className:"bg-blue-100 text-blue-600 text-sm font-bold px-2 py-1 rounded",children:"2"}),c.jsx("h4",{className:"font-medium",children:"Share Everywhere"})]}),c.jsx("p",{className:"text-sm text-gray-600",children:"Share on social media, with friends, or in crypto communities"})]}),c.jsxs("div",{className:"bg-white p-4 rounded-lg",children:[c.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[c.jsx("span",{className:"bg-blue-100 text-blue-600 text-sm font-bold px-2 py-1 rounded",children:"3"}),c.jsx("h4",{className:"font-medium",children:"Earn Rewards"})]}),c.jsx("p",{className:"text-sm text-gray-600",children:"Watch your rewards grow as people join using your link"})]})]})]})})]})]}):c.jsxs("div",{className:"max-w-4xl mx-auto space-y-6",children:[c.jsxs("div",{className:"text-center",children:[c.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Referral Dashboard"}),c.jsx("p",{className:"text-gray-600",children:"Earn rewards by referring others to BlockCoop"})]}),c.jsx(ne,{children:c.jsxs(re,{className:"text-center py-12",children:[c.jsx(Qr,{className:"h-16 w-16 text-orange-300 mx-auto mb-4"}),c.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Wrong Network"}),c.jsx("p",{className:"text-gray-600 mb-6",children:"Please switch to BSC Testnet to access your referral dashboard."}),c.jsx(se,{onClick:r,children:"Switch to BSC Testnet"})]})})]}):c.jsxs("div",{className:"max-w-4xl mx-auto space-y-6",children:[c.jsxs("div",{className:"text-center",children:[c.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Referral Dashboard"}),c.jsx("p",{className:"text-gray-600",children:"Earn rewards by referring others to BlockCoop"})]}),c.jsx(ne,{children:c.jsxs(re,{className:"text-center py-12",children:[c.jsx(Qd,{className:"h-16 w-16 text-gray-300 mx-auto mb-4"}),c.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Connect Your Wallet"}),c.jsx("p",{className:"text-gray-600 mb-6",children:"Connect your wallet to view your referral dashboard and start earning rewards."}),c.jsx("w3m-button",{})]})})]})}const X1e={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_API_BASE_URL:"http://localhost:3000/api",VITE_APP_ENVIRONMENT:"development",VITE_APP_NAME:"BlockCoop Sacco",VITE_APP_VERSION:"2.0.0",VITE_BLOCKCOOP_VERSION:"2",VITE_CHAIN_ID:"56",VITE_CHAIN_ID_MAINNET:"56",VITE_CHAIN_ID_TESTNET:"97",VITE_DIVIDEND_DISTRIBUTOR_ADDRESS:"",VITE_ENABLE_GASLESS_TRANSACTIONS:"true",VITE_ENABLE_RETRY_FAILED_TRANSACTIONS:"true",VITE_EXCHANGE_RATE_DECIMALS:"0",VITE_FACTORY_ADDRESS:"0xca143ce32fe78f1f7019d7d551a6402fc5350c73",VITE_FORWARDER_ADDRESS:"0x0000000000000000000000000000000000000000",VITE_FORWARDER_ADDRESS_TESTNET:"0x0000000000000000000000000000000000000000",VITE_GASLESS_PACKAGE_MANAGER_ADDRESS:"0x0000000000000000000000000000000000000000",VITE_GASLESS_PACKAGE_MANAGER_ADDRESS_TESTNET:"0x0000000000000000000000000000000000000000",VITE_GAS_LIMIT:"500000",VITE_LP_ADDRESS:"0x3Ab52592281e5E8f21819870820a46F57c2A08f0",VITE_MAX_RETRIES:"3",VITE_MPESA_API_URL:"https://api.blockcoopsacco.com/api",VITE_PACKAGE_MANAGER_ADDRESS:"0xBBC1De7F550c4d1D49A48d5E9F524817fCeB20dc",VITE_ROUTER_ADDRESS:"0x10ed43c718714eb63d5aa57b78b54704e256024e",VITE_RPC_URL:"https://bsc-dataseed1.binance.org/",VITE_RPC_URL_MAINNET:"https://bsc-dataseed1.binance.org/",VITE_RPC_URL_TESTNET:"https://data-seed-prebsc-1-s1.binance.org:8545/",VITE_SECONDARY_MARKET_ADDRESS:"0x02D855F16695f7937da07aA8E4bAB7298548650E",VITE_SHARE_ADDRESS:"0x292E1B8CBE91623E71D6532e6BE6B881Cc0a9c31",VITE_SHOW_TRANSACTION_HISTORY:"true",VITE_STAKING_ADDRESS:"0xf30c5bc030C31e28a56ea18F74c78718783d7e6e",VITE_STAKING_ENABLED:"true",VITE_TAX_ADDRESS:"0xCD8530cB44bF40e058D65f53AB9225BF745f6442",VITE_TRANSACTION_TIMEOUT:"300",VITE_TREASURY_ADDRESS:"0x842d803eB7d05D6Aa2DdB8c3Eb912e6d97ce31C4",VITE_USDT_ADDRESS:"0x55d398326f99059ff775485246999027b3197955",VITE_USDT_DECIMALS:"18",VITE_USER_NODE_ENV:"production",VITE_VAULT_ADDRESS:"0x662c77598491e91174506a4C1e7990825c3d7abA",VITE_WALLETCONNECT_PROJECT_ID:"42670d4e939c7f5815c735d9a45d0a6e"};function eEe(){var P;const{account:t,contracts:e,isConnected:n}=Rt(),[r,s]=v.useState([]),[i,a]=v.useState([]),[o,l]=v.useState(null),[u,d]=v.useState(!1),[h,f]=v.useState(null),p=!0,g=(e==null?void 0:e.staking)!==null&&(e==null?void 0:e.staking)!==void 0,m=g;console.log(" Staking Debug Info:",{stakingEnabledEnv:p,hasStakingContract:g,isStakingEnabled:m,stakingContractAddress:(P=e==null?void 0:e.staking)==null?void 0:P.address}),console.log(" Environment Variables Test:",{VITE_STAKING_ADDRESS:"0xf30c5bc030C31e28a56ea18F74c78718783d7e6e",VITE_STAKING_ENABLED:"true",VITE_SHARE_ADDRESS:"0x292E1B8CBE91623E71D6532e6BE6B881Cc0a9c31",allViteVars:Object.keys(X1e).filter(S=>S.startsWith("VITE_"))});const y=v.useCallback(async()=>{if(!m||!(e!=null&&e.staking)){console.log(" Staking not enabled or contract not available"),g||f("Staking contract not found. Deploy the staking contract and set VITE_STAKING_ADDRESS.");return}try{f(null);const S=e.staking,E=await S.poolCount(),k=[];console.log(` Fetching ${E.toString()} staking pools...`);for(let R=0;R<Number(E);R++){const O=await S.stakingPools(R);k.push({id:R,name:O.name,lockPeriod:Number(O.lockPeriod),apyBasisPoints:Number(O.apyBasisPoints),minStake:O.minStake,maxStake:O.maxStake,totalStaked:O.totalStaked,isActive:O.isActive,rewardToken:O.rewardToken})}s(k),console.log(" Successfully fetched staking pools:",k.length)}catch(S){console.error("Error fetching staking pools:",S),f("Failed to fetch staking pools: "+(S instanceof Error?S.message:"Unknown error"))}},[m,e==null?void 0:e.staking,p,g]),b=v.useCallback(async()=>{if(!t||!n||!(e!=null&&e.staking)){a([]);return}try{f(null);const S=e.staking,E=await S.poolCount(),k=[];for(let R=0;R<Number(E);R++){const O=await S.userStakes(R,t),[F,z,N,I,M,D]=O;if(F>0n&&D){const L=Math.floor(Date.now()/1e3),$=Number(N)>L;k.push({poolId:R,amount:F,stakedAt:Number(z),lockEndTime:Number(N),pendingRewards:M,isLocked:$})}}a(k),console.log(" Successfully fetched user stakes:",k.length)}catch(S){console.error("Error fetching user stakes:",S),f("Failed to fetch user stakes")}},[t,n,e==null?void 0:e.staking]),w=v.useCallback(async()=>{if(!t||!n||!(e!=null&&e.staking)){l(null);return}try{f(null);const S=e.staking,E=await S.totalRewardsDistributed(),k=await S.totalUserStaked(t),R=await S.getTotalPendingRewards(t),O=await S.totalStaked();l({totalRewardPool:E,totalStakedAcrossAllPools:O,userTotalStaked:k,userTotalRewards:R,userActiveStakes:i.length}),console.log(" Successfully fetched staking stats:",{totalRewardsDistributed:E.toString(),totalStakedAcrossAllPools:O.toString(),userTotalStaked:k.toString(),userTotalRewards:R.toString(),userActiveStakes:i.length})}catch(S){console.error("Error fetching staking stats:",S),f("Failed to fetch staking stats")}},[t,n,e==null?void 0:e.staking,i.length]),x=v.useCallback(async(S,E)=>{if(!t||!n||!(e!=null&&e.staking)||!(e!=null&&e.shareToken))throw new Error("Wallet not connected or contracts not available");try{const k=e.staking,R=e.shareToken;await R.allowance(t,k.target)<E&&(console.log("Approving BLOCKS tokens for staking..."),await(await R.approve(k.target,E)).wait(),X.success("BLOCKS tokens approved for staking")),console.log("Executing stake transaction..."),await(await k.stake(S,E)).wait(),X.success(`Successfully staked ${Oe(E,18,4)} BLOCKS`),await Promise.all([b(),w(),y()])}catch(k){throw console.error("Staking error:",k),X.error(k.message||"Failed to stake tokens"),k}},[t,n,e,b,w,y]),A=v.useCallback(async(S,E)=>{if(!t||!n||!(e!=null&&e.staking))throw new Error("Wallet not connected or staking contract not available");try{const k=e.staking;console.log("Executing unstake transaction..."),await(await k.unstake(S,E)).wait(),X.success(`Successfully unstaked ${Oe(E,18,4)} BLOCKS`),await Promise.all([b(),w(),y()])}catch(k){throw console.error("Unstaking error:",k),X.error(k.message||"Failed to unstake tokens"),k}},[t,n,e,b,w,y]),T=v.useCallback(async S=>{if(!t||!n||!(e!=null&&e.staking))throw new Error("Wallet not connected or staking contract not available");try{const E=e.staking;console.log("Executing claim rewards transaction..."),await(await E.claimRewards(S)).wait(),X.success("Successfully claimed rewards"),await Promise.all([b(),w()])}catch(E){throw console.error("Claim rewards error:",E),X.error(E.message||"Failed to claim rewards"),E}},[t,n,e,b,w]),j=v.useCallback(async S=>{if(!t||!n||!(e!=null&&e.staking))throw new Error("Wallet not connected or staking contract not available");try{const E=e.staking;console.log("Executing emergency unstake transaction..."),await(await E.emergencyUnstake(S)).wait(),X.success("Successfully executed emergency unstake"),await Promise.all([b(),w(),y()])}catch(E){throw console.error("Emergency unstake error:",E),X.error(E.message||"Failed to execute emergency unstake"),E}},[t,n,e,b,w,y]);return v.useEffect(()=>{m&&(d(!0),y().finally(()=>d(!1)))},[m,y]),v.useEffect(()=>{m&&t&&n&&(d(!0),Promise.all([b(),w()]).finally(()=>d(!1)))},[m,t,n,b,w]),{pools:r,userStakes:i,stats:o,loading:u,error:h,isStakingEnabled:m,stake:x,unstake:A,claimRewards:T,emergencyUnstake:j,refreshPools:y,refreshUserStakes:b,refreshStats:w}}const tEe={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_API_BASE_URL:"http://localhost:3000/api",VITE_APP_ENVIRONMENT:"development",VITE_APP_NAME:"BlockCoop Sacco",VITE_APP_VERSION:"2.0.0",VITE_BLOCKCOOP_VERSION:"2",VITE_CHAIN_ID:"56",VITE_CHAIN_ID_MAINNET:"56",VITE_CHAIN_ID_TESTNET:"97",VITE_DIVIDEND_DISTRIBUTOR_ADDRESS:"",VITE_ENABLE_GASLESS_TRANSACTIONS:"true",VITE_ENABLE_RETRY_FAILED_TRANSACTIONS:"true",VITE_EXCHANGE_RATE_DECIMALS:"0",VITE_FACTORY_ADDRESS:"0xca143ce32fe78f1f7019d7d551a6402fc5350c73",VITE_FORWARDER_ADDRESS:"0x0000000000000000000000000000000000000000",VITE_FORWARDER_ADDRESS_TESTNET:"0x0000000000000000000000000000000000000000",VITE_GASLESS_PACKAGE_MANAGER_ADDRESS:"0x0000000000000000000000000000000000000000",VITE_GASLESS_PACKAGE_MANAGER_ADDRESS_TESTNET:"0x0000000000000000000000000000000000000000",VITE_GAS_LIMIT:"500000",VITE_LP_ADDRESS:"0x3Ab52592281e5E8f21819870820a46F57c2A08f0",VITE_MAX_RETRIES:"3",VITE_MPESA_API_URL:"https://api.blockcoopsacco.com/api",VITE_PACKAGE_MANAGER_ADDRESS:"0xBBC1De7F550c4d1D49A48d5E9F524817fCeB20dc",VITE_ROUTER_ADDRESS:"0x10ed43c718714eb63d5aa57b78b54704e256024e",VITE_RPC_URL:"https://bsc-dataseed1.binance.org/",VITE_RPC_URL_MAINNET:"https://bsc-dataseed1.binance.org/",VITE_RPC_URL_TESTNET:"https://data-seed-prebsc-1-s1.binance.org:8545/",VITE_SECONDARY_MARKET_ADDRESS:"0x02D855F16695f7937da07aA8E4bAB7298548650E",VITE_SHARE_ADDRESS:"0x292E1B8CBE91623E71D6532e6BE6B881Cc0a9c31",VITE_SHOW_TRANSACTION_HISTORY:"true",VITE_STAKING_ADDRESS:"0xf30c5bc030C31e28a56ea18F74c78718783d7e6e",VITE_STAKING_ENABLED:"true",VITE_TAX_ADDRESS:"0xCD8530cB44bF40e058D65f53AB9225BF745f6442",VITE_TRANSACTION_TIMEOUT:"300",VITE_TREASURY_ADDRESS:"0x842d803eB7d05D6Aa2DdB8c3Eb912e6d97ce31C4",VITE_USDT_ADDRESS:"0x55d398326f99059ff775485246999027b3197955",VITE_USDT_DECIMALS:"18",VITE_USER_NODE_ENV:"production",VITE_VAULT_ADDRESS:"0x662c77598491e91174506a4C1e7990825c3d7abA",VITE_WALLETCONNECT_PROJECT_ID:"42670d4e939c7f5815c735d9a45d0a6e"},nEe=[{id:0,name:"Flexible Staking",description:"No lock period, withdraw anytime",icon:o$,color:"bg-green-100 text-green-600",badgeColor:"bg-green-500"},{id:1,name:"30-Day Lock",description:"Higher rewards with 30-day commitment",icon:Ql,color:"bg-blue-100 text-blue-600",badgeColor:"bg-blue-500"},{id:2,name:"90-Day Lock",description:"Better rewards with 90-day commitment",icon:Jye,color:"bg-purple-100 text-purple-600",badgeColor:"bg-purple-500"},{id:3,name:"1-Year Lock",description:"Maximum rewards with 1-year commitment",icon:tm,color:"bg-orange-100 text-orange-600",badgeColor:"bg-orange-500"}];function rEe(){const{isConnected:t,account:e,isCorrectNetwork:n}=Rt(),{balances:r,loading:s}=Nw(),{pools:i,userStakes:a,stats:o,loading:l,error:u,isStakingEnabled:d,stake:h,claimRewards:f}=eEe(),[p,g]=v.useState(0),[m,y]=v.useState(""),[b,w]=v.useState(!1),[x,A]=v.useState(!1),[T,j]=v.useState(!1);console.log(" Environment Variables Test:",{VITE_STAKING_ADDRESS:"0xf30c5bc030C31e28a56ea18F74c78718783d7e6e",VITE_STAKING_ENABLED:"true",VITE_SHARE_ADDRESS:"0x292E1B8CBE91623E71D6532e6BE6B881Cc0a9c31",allViteVars:Object.keys(tEe).filter(O=>O.startsWith("VITE_"))});const P=i.map(O=>({...O,...nEe.find(F=>F.id===O.id)})),S=P.find(O=>O.id===p),E=a.reduce((O,F)=>O+F.pendingRewards,0n),k=async()=>{if(!S||!m){X.error("Please select a pool and enter an amount");return}try{const O=BigInt(parseFloat(m)*1e18);if(O<S.minStake){X.error(`Minimum stake is ${Nt(S.minStake)} BLOCKS`);return}if(O>r.share){X.error("Insufficient BLOCKS balance");return}w(!0),await h(S.id,O),y("")}catch(O){console.error("Staking error:",O)}finally{w(!1)}},R=async O=>{try{j(!0),await f(O)}catch(F){console.error("Claim rewards error:",F)}finally{j(!1)}};return l||s?c.jsx(ne,{children:c.jsx(re,{className:"p-6",children:c.jsxs("div",{className:"flex items-center justify-center",children:[c.jsx(vn,{className:"h-6 w-6 animate-spin mr-2"}),c.jsx("span",{children:"Loading staking data..."})]})})}):u?c.jsx(ne,{children:c.jsx(re,{className:"p-6",children:c.jsx(ns,{children:c.jsxs(rs,{children:["Error loading staking data: ",u]})})})}):d?!t||!n?c.jsx(ne,{children:c.jsx(re,{className:"p-6",children:c.jsxs(ns,{children:[c.jsx(ni,{className:"h-4 w-4"}),c.jsx(rs,{children:"Please connect your wallet and switch to BSC Testnet to access staking features."})]})})}):c.jsxs("div",{className:"space-y-6",children:[c.jsxs(ne,{children:[c.jsx(Ze,{children:c.jsxs("div",{className:"flex items-center space-x-3",children:[c.jsx("div",{className:"p-2 bg-purple-100 rounded-lg",children:c.jsx(_r,{className:"h-6 w-6 text-purple-600"})}),c.jsxs("div",{children:[c.jsx("h3",{className:"text-lg font-semibold",children:"BLOCKS Token Staking"}),c.jsx("p",{className:"text-sm text-gray-600",children:"Earn rewards by staking your BLOCKS tokens"})]})]})}),c.jsxs(re,{children:[c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[c.jsxs("div",{children:[c.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-3",children:"Your Balance"}),c.jsx("div",{className:"bg-gradient-to-r from-purple-50 to-purple-100 p-4 rounded-lg",children:c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{children:[c.jsx("p",{className:"text-sm text-purple-600 font-medium",children:"Available Balance"}),c.jsx("p",{className:"text-xl font-bold text-purple-900",children:s?"...":Nt(r.share)})]}),c.jsx(Ts,{className:"h-8 w-8 text-purple-600"})]})})]}),c.jsxs("div",{children:[c.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-3",children:"Your Staking"}),c.jsxs("div",{className:"space-y-2",children:[c.jsxs("div",{className:"flex justify-between",children:[c.jsx("span",{className:"text-sm text-gray-600",children:"Total Staked:"}),c.jsxs("span",{className:"text-sm font-medium",children:[o?Nt(o.userTotalStaked):"0"," BLOCKS"]})]}),c.jsxs("div",{className:"flex justify-between",children:[c.jsx("span",{className:"text-sm text-gray-600",children:"Pending Rewards:"}),c.jsxs("span",{className:"text-sm font-medium text-green-600",children:[Nt(E)," BLOCKS"]})]}),c.jsxs("div",{className:"flex justify-between",children:[c.jsx("span",{className:"text-sm text-gray-600",children:"Active Stakes:"}),c.jsx("span",{className:"text-sm font-medium",children:a.length})]})]})]})]}),E>BigInt(0)&&c.jsx("div",{className:"flex justify-center",children:c.jsx(se,{onClick:()=>R(0),disabled:T,className:"mt-4",children:T?c.jsxs(c.Fragment,{children:[c.jsx(vn,{className:"h-4 w-4 animate-spin mr-2"}),"Claiming..."]}):c.jsxs(c.Fragment,{children:[c.jsx(s$,{className:"h-4 w-4 mr-2"}),"Claim All Rewards (",Nt(E)," BLOCKS)"]})})})]})]}),c.jsxs(ne,{children:[c.jsxs(Ze,{children:[c.jsx("h3",{className:"text-lg font-semibold",children:"Available Staking Pools"}),c.jsx("p",{className:"text-sm text-gray-600",children:"Choose a pool that fits your investment strategy"})]}),c.jsxs(re,{children:[c.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-6",children:P.map(O=>{const F=O.icon||tm,z=p===O.id;return c.jsxs("div",{className:`p-4 border-2 rounded-lg cursor-pointer transition-all ${z?"border-primary-500 bg-primary-50":"border-gray-200 hover:border-gray-300"}`,onClick:()=>g(O.id),children:[c.jsxs("div",{className:"flex items-start justify-between mb-3",children:[c.jsxs("div",{className:"flex items-center space-x-3",children:[c.jsx("div",{className:`p-2 rounded-lg ${O.color}`,children:c.jsx(F,{className:"h-5 w-5"})}),c.jsxs("div",{children:[c.jsx("h4",{className:"font-medium",children:O.name}),c.jsx("p",{className:"text-xs text-gray-600",children:O.description})]})]}),c.jsxs(Je,{className:`${O.badgeColor} text-white`,children:[(O.apyBasisPoints/100).toFixed(1),"% APY"]})]}),c.jsxs("div",{className:"space-y-1 text-xs text-gray-600",children:[c.jsxs("div",{className:"flex justify-between",children:[c.jsx("span",{children:"Min Stake:"}),c.jsxs("span",{children:[Nt(O.minStake)," BLOCKS"]})]}),c.jsxs("div",{className:"flex justify-between",children:[c.jsx("span",{children:"Lock Period:"}),c.jsx("span",{children:O.lockPeriod===0?"Flexible":`${Math.floor(O.lockPeriod/86400)} days`})]}),c.jsxs("div",{className:"flex justify-between",children:[c.jsx("span",{children:"Total Staked:"}),c.jsxs("span",{children:[Nt(O.totalStaked)," BLOCKS"]})]})]})]},O.id)})}),S&&c.jsxs("div",{className:"border-t pt-6",children:[c.jsxs("h4",{className:"font-medium mb-4",children:["Stake in ",S.name]}),c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{className:"flex items-center justify-between mb-2",children:[c.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Amount to Stake"}),c.jsxs("button",{onClick:()=>y(Oe(r.share,18,6)),className:"text-xs text-primary-600 hover:text-primary-700",children:["Max: ",Nt(r.share)]})]}),c.jsxs("div",{className:"relative",children:[c.jsx(Et,{type:"number",placeholder:"0.0",value:m,onChange:O=>y(O.target.value),className:"pr-16"}),c.jsx("div",{className:"absolute inset-y-0 right-0 flex items-center pr-3",children:c.jsx("span",{className:"text-sm text-gray-500",children:"BLOCKS"})})]}),c.jsx(se,{onClick:k,disabled:b||!m||parseFloat(m)<=0,className:"w-full",children:b?c.jsxs(c.Fragment,{children:[c.jsx(vn,{className:"h-4 w-4 animate-spin mr-2"}),"Staking..."]}):c.jsxs(c.Fragment,{children:[c.jsx(Ay,{className:"h-4 w-4 mr-2"}),"Stake BLOCKS"]})})]})]})]})]})]}):c.jsx(ne,{children:c.jsx(re,{className:"p-6",children:c.jsxs(ns,{children:[c.jsx(ni,{className:"h-4 w-4"}),c.jsx(rs,{children:"Staking is currently not available. Please check back later."})]})})})}const GR=["function getSwapQuote(uint256 blocksAmount) external view returns (uint256 usdtAmount)","function targetPrice() external view returns (uint256)","function swapFee() external view returns (uint256)","function paused() external view returns (bool)","function factory() external view returns (address)","function router() external view returns (address)","function token() external view returns (address)","function usdtToken() external view returns (address)","function feeRecipient() external view returns (address)","function swapUSDTForBLOCKS(uint256 usdtAmount, uint256 minBlocksAmount) external","function swapBLOCKSForUSDT(uint256 blocksAmount, uint256 minUsdtAmount) external","event TokensSwapped(address indexed user, uint256 blocksAmount, uint256 usdtAmount)"],jb=["function balanceOf(address owner) external view returns (uint256)","function allowance(address owner, address spender) external view returns (uint256)","function approve(address spender, uint256 amount) external returns (bool)","function decimals() external view returns (uint8)","function symbol() external view returns (string)","function name() external view returns (string)"];function w9(){const{provider:t,signer:e,account:n,isConnected:r,isCorrectNetwork:s}=Rt(),[i,a]=v.useState(!1),[o,l]=v.useState(null),[u,d]=v.useState(null),[h,f]=v.useState(null),[p,g]=v.useState(null),m=!!ue.contracts.secondaryMarket,y=v.useCallback(()=>{if(!t||!m)return null;const S=new mn(ue.contracts.secondaryMarket,GR,t),E=new mn(ue.contracts.usdt,jb,t),k=new mn(ue.contracts.share,jb,t);return{secondaryMarket:S,usdtToken:E,blocksToken:k}},[t,m]),b=v.useCallback(()=>{if(!e||!m)return null;const S=new mn(ue.contracts.secondaryMarket,GR,e),E=new mn(ue.contracts.usdt,jb,e),k=new mn(ue.contracts.share,jb,e);return{secondaryMarket:S,usdtToken:E,blocksToken:k}},[e,m]),w=v.useCallback(async()=>{if(!m)return;const S=y();if(S)try{a(!0);const[E,k,R]=await Promise.all([S.secondaryMarket.targetPrice(),S.secondaryMarket.swapFee(),S.secondaryMarket.paused()]);d({targetPrice:E,tradingFee:Number(k),slippageTolerance:100,marketMakingEnabled:!R})}catch(E){console.error("Error fetching market stats:",E),l(E.message||"Failed to fetch market statistics")}finally{a(!1)}},[y,m]),x=v.useCallback(async()=>{if(!n||!m)return;const S=y();if(S)try{a(!0);const[E,k,R,O,F]=await Promise.all([S.usdtToken.symbol(),S.usdtToken.name(),S.usdtToken.decimals(),S.usdtToken.balanceOf(n),S.usdtToken.allowance(n,ue.contracts.secondaryMarket)]);f({address:ue.contracts.usdt,symbol:E,name:k,decimals:Number(R),balance:O,allowance:F});const[z,N,I,M,D]=await Promise.all([S.blocksToken.symbol(),S.blocksToken.name(),S.blocksToken.decimals(),S.blocksToken.balanceOf(n),S.blocksToken.allowance(n,ue.contracts.secondaryMarket)]);g({address:ue.contracts.share,symbol:z,name:N,decimals:Number(I),balance:M,allowance:D})}catch(E){console.error("Error fetching token info:",E),l(E.message||"Failed to fetch token information")}finally{a(!1)}},[n,y,m]),A=v.useCallback(async(S,E,k=1)=>{if(!m||E===0n)return null;const R=y();if(!R)return null;try{let O;if(S==="USDT"){if(!(u!=null&&u.targetPrice))throw new Error("Target price not available");O=E*BigInt(1e18)/u.targetPrice}else O=await R.secondaryMarket.getSwapQuote(E);const F=E*BigInt((u==null?void 0:u.tradingFee)||100)/10000n,z=BigInt(Math.floor(k*100)),N=O*(10000n-z)/10000n,I=S==="USDT"?Number(O)/Number(E):Number(E)/Number(O);return{inputAmount:E,outputAmount:O,priceImpact:.1,minimumOutput:N,tradingFee:F,exchangeRate:I}}catch(O){return console.error("Error getting swap quote:",O),l(O.message||"Failed to get swap quote"),null}},[y,m,u]),T=v.useCallback(async(S,E)=>{const k=b();if(!k||!n)return!1;try{a(!0);const R=S==="USDT"?k.usdtToken:k.blocksToken;return At.loading("Approving token...",{id:"token-approval"}),await(await R.approve(ue.contracts.secondaryMarket,E)).wait(),At.success("Token approved successfully",{id:"token-approval"}),await x(),!0}catch(R){return console.error("Error approving token:",R),At.error(R.message||"Failed to approve token",{id:"token-approval"}),!1}finally{a(!1)}},[b,n,x]),j=v.useCallback(async(S,E,k)=>{const R=b();if(!R||!n)return!1;try{a(!0),At.loading("Executing swap...",{id:"swap-execution"});let O;return S==="USDT"?O=await R.secondaryMarket.swapUSDTForBLOCKS(E,k):O=await R.secondaryMarket.swapBLOCKSForUSDT(E,k),await O.wait(),At.success("Swap completed successfully!",{id:"swap-execution"}),await Promise.all([x(),w()]),!0}catch(O){return console.error("Error executing swap:",O),At.error(O.message||"Failed to execute swap",{id:"swap-execution"}),!1}finally{a(!1)}},[b,n,x,w]);v.useEffect(()=>{r&&s&&m&&(w(),x())},[r,s,m,w,x]),pc("refreshSecondaryMarket",()=>{w(),x()});const P=v.useCallback(()=>l(null),[]);return{loading:i,error:o,marketStats:u,usdtInfo:h,blocksInfo:p,isSecondaryMarketEnabled:m,getSwapQuote:A,approveToken:T,executeSwap:j,fetchMarketStats:w,fetchTokenInfo:x,clearError:P}}function sEe({onSwapComplete:t}){const{account:e,isConnected:n,isCorrectNetwork:r}=Rt(),{refreshBalances:s}=VS(),{loading:i,error:a,marketStats:o,usdtInfo:l,blocksInfo:u,isSecondaryMarketEnabled:d,getSwapQuote:h,approveToken:f,executeSwap:p,clearError:g,fetchTokenInfo:m}=w9(),[y,b]=v.useState("USDT"),[w,x]=v.useState(""),[A,T]=v.useState(""),[j,P]=v.useState(5),[S,E]=v.useState(!1),[k,R]=v.useState(!1),[O,F]=v.useState(!1),[z,N]=v.useState(null),[I,M]=v.useState(!1),[D,L]=v.useState(null),$=y==="USDT"?l:u,V=y==="USDT"?u:l,q=y==="USDT"?"BLOCKS":"USDT",G=v.useCallback((De,Dt,Mr=4)=>De===0n?"0":Number(rt(De,Dt)).toFixed(Mr),[]),Z=v.useCallback((De,Dt)=>{if(!De||De==="")return 0n;try{return Ir(De,Dt)}catch{return 0n}},[]),oe=v.useCallback(async()=>{if(!w||!$||!d){N(null),T(""),L(null);return}const De=Z(w,$.decimals);if(De===0n){N(null),T(""),L(null);return}M(!0),L(null);try{const Dt=await h(y,De,j);Dt&&V?(N(Dt),T(G(Dt.outputAmount,V.decimals,6)),console.log(" Quote updated:",{inputAmount:w,outputAmount:G(Dt.outputAmount,V.decimals,6),exchangeRate:Dt.exchangeRate})):(N(null),T(""),L("Unable to get quote for this amount"))}catch(Dt){console.error("Error getting quote:",Dt),N(null),T(""),L(Dt.message||"Failed to get quote")}finally{M(!1)}},[w,y,$,V,j,h,Z,G,d]);v.useEffect(()=>{const De=setTimeout(oe,500);return()=>clearTimeout(De)},[oe]);const xe=v.useCallback(()=>{b(y==="USDT"?"BLOCKS":"USDT"),x(A),T(""),N(null)},[y,A]),J=v.useCallback(()=>{if($){const De=G($.balance,$.decimals,6);x(De)}},[$,G]),ve=v.useCallback(async()=>{try{await Promise.all([m(),s()]),w&&await oe(),At.success("Data refreshed successfully")}catch(De){console.error("Error refreshing data:",De),At.error("Failed to refresh data")}},[m,s,w,oe]),ge=v.useMemo(()=>!$||!w?!1:Z(w,$.decimals)>$.allowance,[$,w,Z]),Le=v.useCallback(async()=>{if(!$||!w)return;const De=Z(w,$.decimals);if(De!==0n){F(!0),L(null);try{await f(y,De)?(At.success(`${y} approved successfully!`),await m()):L("Approval failed. Please try again.")}catch(Dt){console.error("Error approving token:",Dt),L(Dt.message||"Failed to approve token")}finally{F(!1)}}},[$,w,y,Z,f,m]),je=v.useCallback(async()=>{if(!z||!$||!V||!w)return;const De=Z(w,$.decimals);if(De!==0n){R(!0),L(null);try{await p(y,De,z.minimumOutput)?(At.success("Swap completed successfully!"),x(""),T(""),N(null),await Promise.all([m(),s()]),t==null||t()):L("Swap failed. Please try again.")}catch(Dt){console.error("Error executing swap:",Dt),L(Dt.message||"Failed to execute swap")}finally{R(!1)}}},[z,$,V,w,y,Z,p,m,s,t]),kt=v.useMemo(()=>!!(n&&r&&d&&w&&z&&$&&V&&!ge),[n,r,d,w,z,$,V,ge]),et=D||a;return!n||!e?c.jsx(ne,{children:c.jsxs(re,{className:"p-6 text-center",children:[c.jsx("div",{className:"p-4 bg-blue-100 rounded-full w-16 h-16 mx-auto mb-4",children:c.jsx(gf,{className:"h-8 w-8 text-blue-600 mx-auto mt-2"})}),c.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Connect Your Wallet"}),c.jsx("p",{className:"text-gray-600 mb-4",children:"Connect your wallet to start trading"}),c.jsx("w3m-button",{})]})}):r?d?c.jsxs(ne,{className:"w-full max-w-md mx-auto",children:[c.jsx(Ze,{className:"pb-4",children:c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(gf,{className:"h-5 w-5 text-blue-600"}),c.jsx("h3",{className:"text-lg font-semibold",children:"Swap Tokens"})]}),c.jsxs("div",{className:"flex items-center gap-1 sm:gap-2",children:[c.jsx(se,{variant:"ghost",size:"sm",onClick:()=>E(!S),className:"p-2",children:c.jsx(mc,{className:"h-4 w-4"})}),c.jsx(se,{variant:"ghost",size:"sm",onClick:ve,disabled:I||i,className:"p-2",title:"Refresh balances and quote",children:c.jsx(ts,{className:`h-4 w-4 ${I||i?"animate-spin":""}`})})]})]})}),c.jsxs(re,{className:"space-y-4",children:[(D||a)&&c.jsxs(ns,{variant:"destructive",children:[c.jsx(dr,{className:"h-4 w-4"}),c.jsxs(rs,{className:"flex items-center justify-between",children:[c.jsx("span",{className:"text-sm",children:D||a}),c.jsx(se,{variant:"ghost",size:"sm",onClick:()=>{g(),L(null)},className:"p-1",children:""})]})]}),S&&c.jsx("div",{className:"p-4 bg-gray-50 rounded-lg space-y-3",children:c.jsxs("div",{children:[c.jsx(Jr,{className:"text-sm font-medium",children:"Slippage Tolerance"}),c.jsxs("div",{className:"flex flex-wrap items-center gap-2 mt-1",children:[[.5,1,2,5].map(De=>c.jsxs(se,{variant:j===De?"default":"outline",size:"sm",onClick:()=>P(De),className:"text-xs px-2 py-1",children:[De,"%"]},De)),c.jsx(Et,{type:"number",value:j,onChange:De=>P(Number(De.target.value)),className:"w-16 sm:w-20 text-sm",min:"0.1",max:"50",step:"0.1"})]})]})}),c.jsxs("div",{className:"space-y-2",children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx(Jr,{children:"From"}),$&&c.jsxs("div",{className:"text-xs sm:text-sm text-gray-600 truncate",children:["Balance: ",G($.balance,$.decimals,4)," ",$.symbol]})]}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("div",{className:"flex-1",children:c.jsx(Et,{type:"number",value:w,onChange:De=>x(De.target.value),placeholder:"0.0",className:"text-base sm:text-lg"})}),c.jsxs("div",{className:"flex items-center gap-1 sm:gap-2",children:[c.jsx(se,{variant:"outline",size:"sm",onClick:J,disabled:!$,className:"text-xs px-2 py-1",children:"MAX"}),c.jsx(Je,{variant:"secondary",className:"px-2 sm:px-3 py-1 text-xs",children:y})]})]})]}),c.jsx("div",{className:"flex justify-center",children:c.jsx(se,{variant:"outline",size:"sm",onClick:xe,className:"rounded-full p-2",children:c.jsx(gf,{className:"h-4 w-4"})})}),c.jsxs("div",{className:"space-y-2",children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx(Jr,{children:"To"}),V&&c.jsxs("div",{className:"text-xs sm:text-sm text-gray-600 truncate",children:["Balance: ",G(V.balance,V.decimals,4)," ",V.symbol]})]}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("div",{className:"flex-1",children:c.jsx(Et,{type:"number",value:A,placeholder:"0.0",className:"text-base sm:text-lg",readOnly:!0})}),c.jsx(Je,{variant:"secondary",className:"px-2 sm:px-3 py-1 text-xs",children:q})]})]}),z&&c.jsxs("div",{className:"p-3 bg-blue-50 rounded-lg space-y-2 text-sm",children:[c.jsxs("div",{className:"flex justify-between",children:[c.jsx("span",{children:"Exchange Rate:"}),c.jsxs("span",{children:["1 ",y," = ",z.exchangeRate.toFixed(6)," ",q]})]}),c.jsxs("div",{className:"flex justify-between",children:[c.jsx("span",{children:"Trading Fee:"}),c.jsxs("span",{children:[G(z.tradingFee,($==null?void 0:$.decimals)||18,4)," ",y]})]}),c.jsxs("div",{className:"flex justify-between",children:[c.jsx("span",{children:"Minimum Received:"}),c.jsxs("span",{children:[G(z.minimumOutput,(V==null?void 0:V.decimals)||18,4)," ",q]})]}),c.jsxs("div",{className:"flex justify-between",children:[c.jsx("span",{children:"Price Impact:"}),c.jsxs("span",{className:z.priceImpact>5?"text-red-600":"text-green-600",children:[z.priceImpact.toFixed(2),"%"]})]})]}),c.jsxs("div",{className:"space-y-2",children:[ge?c.jsxs(se,{onClick:Le,disabled:O||i||!w||!!et,className:"w-full",children:[O?c.jsx(vn,{className:"h-4 w-4 animate-spin mr-2"}):c.jsx(Fl,{className:"h-4 w-4 mr-2"}),O?`Approving ${y}...`:`Approve ${y}`]}):c.jsxs(se,{onClick:je,disabled:!kt||k||I||!!et,className:"w-full",children:[k?c.jsx(vn,{className:"h-4 w-4 animate-spin mr-2"}):I?c.jsx(vn,{className:"h-4 w-4 animate-spin mr-2"}):c.jsx(gf,{className:"h-4 w-4 mr-2"}),k?"Swapping...":I?"Getting Quote...":"Swap"]}),!n&&c.jsx("p",{className:"text-xs text-gray-500 text-center",children:"Connect your wallet to start trading"}),n&&!r&&c.jsx("p",{className:"text-xs text-red-500 text-center",children:"Switch to BSC Testnet to trade"}),n&&r&&!d&&c.jsx("p",{className:"text-xs text-orange-500 text-center",children:"Secondary market not available"})]}),o&&c.jsx("div",{className:"pt-4 border-t space-y-2 text-xs text-gray-600",children:c.jsxs("div",{className:"flex justify-between",children:[c.jsx("span",{children:"Trading Fee:"}),c.jsxs("span",{children:[(o.tradingFee/100).toFixed(2),"%"]})]})})]})]}):c.jsx(ne,{children:c.jsx(re,{className:"p-6",children:c.jsxs(ns,{children:[c.jsx(ni,{className:"h-4 w-4"}),c.jsx(rs,{children:"Secondary market trading is not available. The SecondaryMarket contract needs to be deployed."})]})})}):c.jsx(ne,{children:c.jsx(re,{className:"p-6",children:c.jsxs(ns,{variant:"destructive",children:[c.jsx(Qr,{className:"h-4 w-4"}),c.jsx(rs,{children:"Please switch to BSC Testnet to access trading features"})]})})})}const iEe=["function getReserves() external view returns (uint112 reserve0, uint112 reserve1, uint32 blockTimestampLast)","function totalSupply() external view returns (uint256)","function token0() external view returns (address)","function token1() external view returns (address)","function kLast() external view returns (uint256)"],aEe=["function getPair(address tokenA, address tokenB) external view returns (address pair)"];function oEe(){const{provider:t,account:e,isConnected:n,isCorrectNetwork:r}=Rt(),[s,i]=v.useState({totalLiquidity:"0",shareTokenReserves:"0",usdtReserves:"0",shareTokenPrice:"0",totalValueLocked:"0",poolShare:"0",loading:!1,error:null}),a=v.useCallback(async()=>{if(!(!t||!n||!r))try{i(k=>({...k,loading:!0,error:null}));const u=await new mn(ue.contracts.factory,aEe,t).getPair(ue.contracts.share,ue.contracts.usdt);if(u===co)throw new Error("Liquidity pair not found");const d=new mn(u,iEe,t),[h,f,p]=await Promise.all([d.getReserves(),d.totalSupply(),d.token0()]),g=ue.contracts.share,m=p.toLowerCase()===g.toLowerCase(),y=m?h[0]:h[1],b=m?h[1]:h[0],w=rt(f,18),x=y,A=b,T=Number(rt(A,18)),j=Number(rt(x,18)),P=j>0?T/j:0,S=T+j*P;let E="0";if(e)try{const k=new mn(ue.contracts.lp,["function balanceOf(address) external view returns (uint256)","function totalSupply() external view returns (uint256)"],t),[R,O]=await Promise.all([k.balanceOf(e),k.totalSupply()]);if(R>0n&&O>0n){const F=Number(R)/Number(O)*100;E=Math.min(F,100).toFixed(3)}}catch(k){console.warn("Could not fetch user LP balance:",k)}i({totalLiquidity:Number(w).toFixed(3),shareTokenReserves:Number(rt(x,18)).toFixed(3),usdtReserves:Number(rt(A,18)).toFixed(3),shareTokenPrice:P.toFixed(3),totalValueLocked:S.toFixed(3),poolShare:Number(E).toFixed(3),loading:!1,error:null})}catch(l){console.error("Error fetching liquidity pool info:",l),i(u=>({...u,loading:!1,error:l.message||"Failed to fetch pool information"}))}},[t,n,r,e]);v.useEffect(()=>{a()},[a]);const o=v.useCallback(()=>{a()},[a]);return{...s,refresh:o}}const b9=v.createContext(void 0),x9=()=>{const t=v.useContext(b9);if(!t)throw new Error("Tabs components must be used within a Tabs provider");return t};function cEe({value:t,onValueChange:e,children:n,className:r}){return c.jsx(b9.Provider,{value:{value:t,onValueChange:e},children:c.jsx("div",{className:yw("w-full",r),children:n})})}function lEe({children:t,className:e}){return c.jsx("div",{className:yw("inline-flex h-10 items-center justify-center rounded-md bg-gray-100 p-1 text-gray-500",e),children:t})}function YR({value:t,children:e,className:n,disabled:r=!1}){const{value:s,onValueChange:i}=x9(),a=s===t;return c.jsx("button",{type:"button",disabled:r,onClick:()=>!r&&i(t),className:yw("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-white transition-all","focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-blue-500 focus-visible:ring-offset-2","disabled:pointer-events-none disabled:opacity-50",a?"bg-white text-gray-950 shadow-sm":"text-gray-600 hover:text-gray-900 hover:bg-gray-50",n),children:e})}function QR({value:t,children:e,className:n}){const{value:r}=x9();return r!==t?null:c.jsx("div",{className:yw("mt-2 ring-offset-white focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-blue-500 focus-visible:ring-offset-2",n),children:e})}function uEe(){const{isConnected:t,account:e,isCorrectNetwork:n,switchToCorrectNetwork:r}=Rt(),{formattedBalances:s}=Nw(),{marketPrice:i,refetch:a}=e5(),{marketStats:o,usdtInfo:l,isSecondaryMarketEnabled:u,error:d,fetchMarketStats:h,fetchTokenInfo:f,clearError:p}=w9(),{totalLiquidity:g,shareTokenReserves:m,usdtReserves:y,shareTokenPrice:b,totalValueLocked:w,poolShare:x,loading:A,error:T,refresh:j}=oEe(),[P,S]=v.useState("trading");u$(e,t),i&&Oe(i,18,4);const E=()=>{h(),f(),j(),a()};return!t||!e?c.jsxs("div",{className:"max-w-4xl mx-auto",children:[c.jsxs("div",{className:"text-center mb-8",children:[c.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-4",children:"Secondary Market Trading"}),c.jsx("p",{className:"text-lg text-gray-600",children:"Trade BLOCKS tokens and manage liquidity positions"})]}),c.jsx(ne,{className:"max-w-md mx-auto",children:c.jsxs(re,{className:"p-8 text-center",children:[c.jsx("div",{className:"p-4 bg-blue-100 rounded-full w-16 h-16 mx-auto mb-4",children:c.jsx(Qd,{className:"h-8 w-8 text-blue-600 mx-auto mt-2"})}),c.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Connect Your Wallet"}),c.jsx("p",{className:"text-gray-600 mb-6",children:"Connect your wallet to access secondary market trading features"}),c.jsx("w3m-button",{})]})})]}):n?c.jsxs("div",{className:"max-w-7xl mx-auto",children:[c.jsxs("div",{className:"text-center mb-8",children:[c.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-4",children:"Trading & Staking Hub"}),c.jsx("p",{className:"text-lg text-gray-600",children:"Trade BLOCKS tokens on the secondary market and earn rewards through staking"})]}),t&&n&&c.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 mb-8",children:[c.jsx(ne,{children:c.jsx(re,{className:"p-4",children:c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("div",{className:"p-2 bg-green-100 rounded-lg",children:c.jsx(Ts,{className:"h-5 w-5 text-green-600"})}),c.jsxs("div",{children:[c.jsx("p",{className:"text-sm text-gray-600",children:"USDT Balance"}),c.jsxs("p",{className:"text-lg font-semibold text-green-600",children:[l?Oe(l.balance,l.decimals,4):"0.0000"," USDT"]})]})]})})}),c.jsx(ne,{children:c.jsx(re,{className:"p-4",children:c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("div",{className:"p-2 bg-orange-100 rounded-lg",children:c.jsx(gf,{className:"h-5 w-5 text-orange-600"})}),c.jsxs("div",{children:[c.jsx("p",{className:"text-sm text-gray-600",children:"Trading Status"}),c.jsx("div",{className:"flex items-center gap-2",children:c.jsx(Je,{variant:u?"default":"secondary",children:u?"Active":"Inactive"})})]})]})})})]}),d&&c.jsxs(ns,{variant:"destructive",className:"mb-6",children:[c.jsx(Qr,{className:"h-4 w-4"}),c.jsxs(rs,{className:"flex items-center justify-between",children:[c.jsx("span",{children:d}),c.jsx(se,{variant:"ghost",size:"sm",onClick:p,children:""})]})]}),c.jsxs(cEe,{value:P,onValueChange:S,className:"w-full",children:[c.jsxs(lEe,{className:"grid w-full grid-cols-2 mb-8",children:[c.jsxs(YR,{value:"trading",className:"flex items-center gap-2",children:[c.jsx(gf,{className:"h-4 w-4"}),"Trading"]}),c.jsxs(YR,{value:"staking",className:"flex items-center gap-2",children:[c.jsx(tm,{className:"h-4 w-4"}),"Staking"]})]}),c.jsx(QR,{value:"trading",className:"space-y-6",children:c.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[c.jsx("div",{className:"lg:col-span-1",children:c.jsx(sEe,{onSwapComplete:E})}),c.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[c.jsxs(ne,{children:[c.jsx(Ze,{children:c.jsx("h3",{className:"text-lg font-semibold",children:"BLOCKS Balance"})}),c.jsx(re,{children:c.jsxs("div",{className:"text-center space-y-2",children:[c.jsx("p",{className:"text-3xl font-bold text-blue-600",children:(s==null?void 0:s.shareTotal)||"0.0000"}),c.jsx("p",{className:"text-sm text-gray-600",children:"BLOCKS Tokens"}),c.jsx("p",{className:"text-xs text-gray-500",children:"Total received (matches BLOCKS-LP)"})]})})]}),c.jsxs(ne,{children:[c.jsx(Ze,{children:c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx("h3",{className:"text-lg font-semibold",children:"Liquidity Pool Information"}),c.jsx(se,{variant:"outline",size:"sm",onClick:j,disabled:A,className:"h-8 px-3",children:c.jsx(ts,{className:`h-4 w-4 ${A?"animate-spin":""}`})})]})}),c.jsx(re,{children:T?c.jsx("div",{className:"text-center text-red-600 text-sm",children:T}):A?c.jsx("div",{className:"text-center text-gray-600 text-sm",children:"Loading pool data..."}):c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"text-xs text-gray-500 mb-2",children:"Source: AMM pair reserves"}),c.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:[c.jsxs("div",{className:"text-center space-y-2",children:[c.jsx("p",{className:"text-sm text-gray-600",children:"Total Value Locked"}),c.jsxs("p",{className:"text-xl font-bold text-green-600",children:["$",w]})]}),c.jsxs("div",{className:"text-center space-y-2",children:[c.jsx("p",{className:"text-sm text-gray-600",children:"BLOCKS Reserves"}),c.jsx("p",{className:"text-lg font-bold text-blue-600",children:m})]}),c.jsxs("div",{className:"text-center space-y-2",children:[c.jsx("p",{className:"text-sm text-gray-600",children:"USDT Reserves"}),c.jsx("p",{className:"text-lg font-bold text-green-600",children:y})]}),c.jsxs("div",{className:"text-center space-y-2",children:[c.jsx("p",{className:"text-sm text-gray-600",children:"Total Liquidity"}),c.jsx("p",{className:"text-lg font-bold text-purple-600",children:g})]}),c.jsxs("div",{className:"text-center space-y-2",children:[c.jsx("p",{className:"text-sm text-gray-600",children:"BLOCKS Price"}),c.jsx("p",{className:"text-lg font-bold text-orange-600",children:i?`$${Oe(i,18,4)}`:`$${b}`})]}),c.jsxs("div",{className:"text-center space-y-2",children:[c.jsx("p",{className:"text-sm text-gray-600",children:"Your Pool Share"}),c.jsxs("p",{className:"text-lg font-bold text-indigo-600",children:[x,"%"]})]})]})]})})]}),c.jsxs(ne,{children:[c.jsx(Ze,{children:c.jsx("h3",{className:"text-lg font-semibold",children:"Trading Information"})}),c.jsx(re,{children:c.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-6",children:[c.jsxs("div",{className:"text-center space-y-2",children:[c.jsx("p",{className:"text-sm text-gray-600",children:"Trading Fee"}),c.jsx("p",{className:"text-2xl font-bold text-blue-600",children:o?`${(o.tradingFee/100).toFixed(2)}%`:"Loading..."})]}),c.jsxs("div",{className:"text-center space-y-2",children:[c.jsx("p",{className:"text-sm text-gray-600",children:"Slippage Tolerance"}),c.jsx("p",{className:"text-2xl font-bold text-orange-600",children:o?`${(o.slippageTolerance/100).toFixed(2)}%`:"Loading..."})]})]})})]})]})]})}),c.jsx(QR,{value:"staking",className:"space-y-6",children:c.jsx("div",{className:"max-w-4xl mx-auto",children:c.jsx(rEe,{})})})]})]}):c.jsxs("div",{className:"max-w-4xl mx-auto",children:[c.jsxs("div",{className:"text-center mb-8",children:[c.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-4",children:"Secondary Market Trading"}),c.jsx("p",{className:"text-lg text-gray-600",children:"Trade BLOCKS tokens and manage liquidity positions"})]}),c.jsxs(ns,{variant:"destructive",className:"max-w-md mx-auto",children:[c.jsx(Qr,{className:"h-4 w-4"}),c.jsxs(rs,{className:"flex items-center justify-between",children:[c.jsx("span",{children:"Please switch to BSC Testnet to access trading"}),c.jsx(se,{variant:"outline",size:"sm",onClick:r,className:"ml-4",children:"Switch Network"})]})]})]})}async function ST(t,e,n,r){const s=[],i=[];if(!t||!e)return s.push("Wallet not connected"),{isValid:!1,errors:s,warnings:i,canProceed:!1};(!n||n!==Cy)&&s.push(`Wrong network. Please switch to ${ue.network.name} (Chain ID: ${Cy})`);try{(await t.getAddress()).toLowerCase()!==e.toLowerCase()&&s.push("Signer address mismatch")}catch{s.push("Failed to verify signer")}try{if(t.provider){const a=await t.provider.getGasPrice(),o=rt(a,"gwei");parseFloat(o)>20&&i.push(`High gas price detected: ${o} Gwei`)}}catch{i.push("Could not check gas price")}return{isValid:s.length===0,errors:s,warnings:i,canProceed:s.length===0}}async function v9(t,e,n,r){let s=null;if(e&&e.provider)try{const a=await e.provider.getBalance(await e.getAddress());s=Uu(a)}catch(a){console.warn("Could not fetch balance:",a)}const i={isConnected:!!n&&!!e,account:n,chainId:r,isCorrectNetwork:r===Cy,hasSigner:!!e,hasProvider:!!t,balance:s};return console.log(" Wallet Debug State:",{...i,expectedChainId:Cy,networkName:ue.network.name,timestamp:new Date().toISOString()}),i}function t5(t,e,n,r){if(!t||n&&e)return!1;const s=Date.now();return!(r&&s-r<5e3)}function E9(){const{refreshConnection:t,isConnected:e,account:n,signer:r,provider:s,chainId:i,error:a}=Rt(),o=v.useRef(!1),l=v.useRef(null);return{refreshWallet:v.useCallback(async()=>{if(o.current)return console.log(" Wallet refresh already in progress, skipping..."),!1;if(!t5(e,n,r,l.current))return console.log(" Wallet refresh not needed or too frequent, skipping..."),!1;o.current=!0,l.current=Date.now();try{return console.log(" Attempting wallet refresh..."),await v9(s,r,n,i),await t(),await new Promise(d=>setTimeout(d,1e3)),console.log(" Wallet refresh completed"),!0}catch(d){return console.error(" Wallet refresh failed:",d),!1}finally{o.current=!1}},[e,n,r,s,i,t]),isRefreshing:o.current,lastRefreshAttempt:l.current}}const JR=t=>(t/100).toString(),Ob=t=>Math.round(parseFloat(t||"0")*100),dEe=t=>rt(t,18),ZR=t=>Ir(t||"0",18),XR=t=>{const e=Math.floor(t/86400),n=Math.floor(e/365),r=e%365,s=Math.floor(r/30),i=r%30;return{years:n.toString(),months:s.toString(),days:i.toString()}},Vh=(t,e,n)=>{const r=parseInt(t||"0"),s=parseInt(e||"0"),i=parseInt(n||"0");return(r*365+s*30+i)*24*3600};function hEe({package:t,isOpen:e,onClose:n,onSuccess:r}){const{provider:s,signer:i,isConnected:a,account:o,isCorrectNetwork:l,chainId:u,connectWallet:d,switchToCorrectNetwork:h}=Rt(),{refreshWallet:f}=E9(),[p,g]=v.useState({name:"",entryUSDT:"",exchangeRate:"",vestPercentage:"",cliffYears:"",cliffMonths:"",cliffDays:"",durationYears:"",durationMonths:"",durationDays:"",referralPercentage:""}),[m,y]=v.useState(!1),[b,w]=v.useState(!1),[x,A]=v.useState(null);v.useEffect(()=>{(async()=>{if(!t&&e)try{const E=await un().packageManager.nextPackageId();A(Number(E))}catch(S){console.error("Error fetching next package ID:",S),A(null)}})()},[t,e]),v.useEffect(()=>{if(t){const S=t.entryUSDT>1000000000000000n?Uu(t.entryUSDT):rt(t.entryUSDT,6),E=XR(t.cliff),k=XR(t.duration);g({name:t.name,entryUSDT:S,exchangeRate:dEe(t.exchangeRate),vestPercentage:JR(t.vestBps),cliffYears:E.years,cliffMonths:E.months,cliffDays:E.days,durationYears:k.years,durationMonths:k.months,durationDays:k.days,referralPercentage:JR(t.referralBps)})}else g({name:"",entryUSDT:"",vestPercentage:"70",cliffYears:"1",cliffMonths:"0",cliffDays:"0",durationYears:"5",durationMonths:"0",durationDays:"0",referralPercentage:"2"})},[t]);const T=async()=>{if(!o){X.error("No account connected");return}w(!0);try{console.log("PackageForm: Manual wallet refresh triggered");const P=await f(o,{showToasts:!0});P.success?X.success("Wallet connection refreshed successfully"):X.error(`Failed to refresh wallet: ${P.error}`)}catch(P){console.error("Manual wallet refresh error:",P),X.error("Error refreshing wallet connection")}finally{w(!1)}},j=async P=>{P.preventDefault();try{if(y(!0),console.log("PackageForm: Starting wallet validation..."),await v9(s,i,o,u),t5(a,o,i,null)){console.log("PackageForm: Attempting wallet refresh due to missing signer..."),X.loading("Refreshing wallet connection...",{id:"wallet-refresh"});try{const G=await f(o,{showToasts:!1});if(G.success&&G.signer){console.log("PackageForm: Wallet refresh successful, using refreshed signer"),X.success("Wallet connection refreshed",{id:"wallet-refresh"});const Z=un(G.signer),oe={name:p.name,entryUSDT:Ir(p.entryUSDT,6),exchangeRate:ZR(p.exchangeRate),vestBps:Ob(p.vestPercentage),cliff:Vh(p.cliffYears,p.cliffMonths,p.cliffDays),duration:Vh(p.durationYears,p.durationMonths,p.durationDays),referralBps:Ob(p.referralPercentage)},xe=await Z.packageManager.addPackage(oe.name,oe.entryUSDT,oe.exchangeRate,oe.vestBps,oe.cliff,oe.duration,oe.referralBps);X.loading(t?"Updating package...":"Creating package...",{id:"package"}),await xe.wait(),X.success(t?"Package updated successfully!":"Package created successfully!",{id:"package"}),r();return}else console.warn("PackageForm: Wallet refresh failed:",G.error),X.error("Failed to refresh wallet connection",{id:"wallet-refresh"})}catch(G){console.error("PackageForm: Wallet refresh error:",G),X.error("Error refreshing wallet connection",{id:"wallet-refresh"})}}const S=await ST(i,o,u);if(!S.isValid){if(!a||!o){console.log("PackageForm: Wallet not connected, opening connection modal..."),await d();return}if(!l){if(console.log("PackageForm: Wrong network, attempting to switch..."),!await h())throw new Error("Please switch to BSC Testnet to continue");return}const G=S.errors.length>0?S.errors[0]:"Wallet validation failed";throw new Error(G)}if(!p.name.trim())throw new Error("Package name is required");if(!p.entryUSDT||parseFloat(p.entryUSDT)<=0)throw new Error("Entry USDT amount must be greater than 0");const E=parseFloat(p.exchangeRate||"0");if(isNaN(E)||E<.01)throw new Error("Exchange rate must be at least 0.01 USDT per 1 BLOCKS");const k=parseFloat(p.vestPercentage||"0");if(isNaN(k)||k<0||k>100)throw new Error("Vest percentage must be between 0 and 100%");const R=parseFloat(p.referralPercentage||"0");if(isNaN(R)||R<0||R>10)throw new Error("Referral percentage must be between 0 and 10%");const O=parseInt(p.cliffYears||"0"),F=parseInt(p.cliffMonths||"0"),z=parseInt(p.cliffDays||"0");if(isNaN(O)||isNaN(F)||isNaN(z))throw new Error("Cliff period values must be valid numbers");if(F>11)throw new Error("Cliff months must be between 0 and 11");if(z>29)throw new Error("Cliff days must be between 0 and 29");const N=parseInt(p.durationYears||"0"),I=parseInt(p.durationMonths||"0"),M=parseInt(p.durationDays||"0");if(isNaN(N)||isNaN(I)||isNaN(M))throw new Error("Vesting duration values must be valid numbers");if(I>11)throw new Error("Duration months must be between 0 and 11");if(M>29)throw new Error("Duration days must be between 0 and 29");const D=Vh(p.durationYears,p.durationMonths,p.durationDays);if(D<=0)throw new Error("Vesting duration must be greater than 0");if(Vh(p.cliffYears,p.cliffMonths,p.cliffDays)>=D)throw new Error("Cliff period cannot be longer than or equal to vesting duration");const $=un(i),V={name:p.name.trim(),entryUSDT:Ir(p.entryUSDT,18),exchangeRate:ZR(p.exchangeRate),vestBps:Ob(p.vestPercentage),cliff:Vh(p.cliffYears,p.cliffMonths,p.cliffDays),duration:Vh(p.durationYears,p.durationMonths,p.durationDays),referralBps:Ob(p.referralPercentage)},q=await $.packageManager.addPackage(V.name,V.entryUSDT,V.exchangeRate,V.vestBps,V.cliff,V.duration,V.referralBps);X.loading(t?"Updating package...":"Creating package...",{id:"package"}),await q.wait(),X.success(t?"Package updated successfully!":"Package created successfully!",{id:"package"}),r()}catch(S){console.error("Package form error:",S),X.error(S.message||"Failed to save package",{id:"package"})}finally{y(!1)}};return c.jsxs(Mf,{open:e,onClose:n,className:"relative z-50",children:[c.jsx("div",{className:"fixed inset-0 bg-black/25 backdrop-blur-sm"}),c.jsx("div",{className:"fixed inset-0 flex items-center justify-center p-4",children:c.jsxs(Mf.Panel,{className:"mx-auto max-w-4xl w-full bg-white rounded-2xl shadow-2xl animate-slide-up flex flex-col max-h-[90vh]",children:[c.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 flex-shrink-0",children:[c.jsx(Mf.Title,{className:"text-2xl font-bold text-gray-900",children:t?"Edit Package":"Create Package"}),c.jsx("button",{onClick:n,className:"p-2 text-gray-400 hover:text-gray-600 transition-colors rounded-lg hover:bg-gray-100",children:c.jsx(rm,{className:"h-6 w-6"})})]}),c.jsx("div",{className:"flex-1 overflow-y-auto p-6 custom-scrollbar",children:c.jsx("form",{id:"package-form",onSubmit:j,className:"h-full flex flex-col",children:c.jsxs("div",{className:"space-y-6 flex-1",children:[c.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:!t&&x!==null&&c.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3",children:c.jsxs("div",{className:"flex items-center space-x-2",children:[c.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full flex-shrink-0"}),c.jsxs("span",{className:"text-sm font-medium text-blue-800",children:["Next ID: ",x]})]})})}),c.jsxs("div",{className:"space-y-4",children:[c.jsx("h3",{className:"text-lg font-semibold text-gray-900 border-b border-gray-200 pb-2",children:"Package Details"}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[c.jsx(Et,{label:"Package Name",value:p.name,onChange:P=>g(S=>({...S,name:P.target.value})),placeholder:"e.g., Starter Package",required:!0}),c.jsx(Et,{label:"Entry Cost (USDT)",type:"number",step:"0.01",value:p.entryUSDT,onChange:P=>g(S=>({...S,entryUSDT:P.target.value})),placeholder:"1000",required:!0}),c.jsxs("div",{children:[c.jsx(Et,{label:"Exchange Rate (USDT per 1 BLOCKS)",type:"number",step:"0.01",min:"0.01",max:"100",value:p.exchangeRate,onChange:P=>g(S=>({...S,exchangeRate:P.target.value})),placeholder:"2.0",required:!0}),c.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Exchange rate for user token allocation (e.g., 2.0 = 2.0 USDT per 1 BLOCKS). This determines how many BLOCKS tokens users receive."})]}),c.jsxs("div",{children:[c.jsx(Et,{label:"Vest Percentage (%)",type:"number",step:"0.1",min:"0",max:"100",value:p.vestPercentage,onChange:P=>g(S=>({...S,vestPercentage:P.target.value})),placeholder:"70",required:!0}),c.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Tokens vested (locked). Rest goes to liquidity."})]}),c.jsxs("div",{children:[c.jsx(Et,{label:"Referral Bonus (%)",type:"number",step:"0.1",min:"0",max:"10",value:p.referralPercentage,onChange:P=>g(S=>({...S,referralPercentage:P.target.value})),placeholder:"2",required:!0}),c.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Bonus for referrers. Max 10%."})]})]})]}),c.jsxs("div",{className:"space-y-4",children:[c.jsx("h3",{className:"text-lg font-semibold text-gray-900 border-b border-gray-200 pb-2",children:"Vesting Schedule"}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[c.jsxs("div",{className:"space-y-3",children:[c.jsxs("div",{children:[c.jsx("h4",{className:"font-medium text-gray-900",children:"Cliff Period"}),c.jsx("p",{className:"text-xs text-gray-600",children:"Lock time before vesting starts"})]}),c.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[c.jsx(Et,{label:"Years",type:"number",min:"0",value:p.cliffYears,onChange:P=>g(S=>({...S,cliffYears:P.target.value})),placeholder:"1"}),c.jsx(Et,{label:"Months",type:"number",min:"0",max:"11",value:p.cliffMonths,onChange:P=>g(S=>({...S,cliffMonths:P.target.value})),placeholder:"0"}),c.jsx(Et,{label:"Days",type:"number",min:"0",max:"29",value:p.cliffDays,onChange:P=>g(S=>({...S,cliffDays:P.target.value})),placeholder:"0"})]})]}),c.jsxs("div",{className:"space-y-3",children:[c.jsxs("div",{children:[c.jsx("h4",{className:"font-medium text-gray-900",children:"Vesting Duration"}),c.jsx("p",{className:"text-xs text-gray-600",children:"Time for gradual token release"})]}),c.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[c.jsx(Et,{label:"Years",type:"number",min:"0",value:p.durationYears,onChange:P=>g(S=>({...S,durationYears:P.target.value})),placeholder:"5",required:!0}),c.jsx(Et,{label:"Months",type:"number",min:"0",max:"11",value:p.durationMonths,onChange:P=>g(S=>({...S,durationMonths:P.target.value})),placeholder:"0"}),c.jsx(Et,{label:"Days",type:"number",min:"0",max:"29",value:p.durationDays,onChange:P=>g(S=>({...S,durationDays:P.target.value})),placeholder:"0"})]})]})]})]}),c.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[c.jsx("h4",{className:"font-medium text-gray-900 mb-3",children:"Package Preview"}),c.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-3 text-sm",children:[c.jsxs("div",{className:"flex justify-between",children:[c.jsx("span",{className:"text-gray-600",children:"Vest:"}),c.jsxs("span",{className:"font-medium",children:[parseFloat(p.vestPercentage||"0").toFixed(1),"%"]})]}),c.jsxs("div",{className:"flex justify-between",children:[c.jsx("span",{className:"text-gray-600",children:"LP:"}),c.jsxs("span",{className:"font-medium",children:[(100-parseFloat(p.vestPercentage||"0")).toFixed(1),"%"]})]}),c.jsxs("div",{className:"flex justify-between",children:[c.jsx("span",{className:"text-gray-600",children:"Referral:"}),c.jsxs("span",{className:"font-medium",children:[parseFloat(p.referralPercentage||"0").toFixed(1),"%"]})]}),c.jsxs("div",{className:"flex justify-between",children:[c.jsx("span",{className:"text-gray-600",children:"Cliff:"}),c.jsxs("span",{className:"font-medium",children:[p.cliffYears,"y ",p.cliffMonths,"m ",p.cliffDays,"d"]})]}),c.jsxs("div",{className:"flex justify-between md:col-span-2",children:[c.jsx("span",{className:"text-gray-600",children:"Duration:"}),c.jsxs("span",{className:"font-medium",children:[p.durationYears,"y ",p.durationMonths,"m ",p.durationDays,"d"]})]})]})]}),c.jsxs("div",{className:"space-y-3",children:[!a&&c.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-3",children:c.jsxs("div",{className:"flex items-center space-x-2",children:[c.jsx("div",{className:"w-2 h-2 bg-yellow-500 rounded-full flex-shrink-0"}),c.jsx("span",{className:"text-sm font-medium text-yellow-800",children:"Wallet not connected"})]})}),a&&!l&&c.jsx("div",{className:"bg-orange-50 border border-orange-200 rounded-lg p-3",children:c.jsxs("div",{className:"flex items-center space-x-2",children:[c.jsx("div",{className:"w-2 h-2 bg-orange-500 rounded-full flex-shrink-0"}),c.jsx("span",{className:"text-sm font-medium text-orange-800",children:"Wrong network - Switch to BSC Testnet"})]})}),a&&l&&o&&!i&&c.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-3",children:c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{className:"flex items-center space-x-2",children:[c.jsx("div",{className:"w-2 h-2 bg-yellow-500 rounded-full flex-shrink-0"}),c.jsx("span",{className:"text-sm font-medium text-yellow-800",children:"Signer not available"})]}),c.jsx(se,{variant:"outline",size:"sm",onClick:T,loading:b,children:"Refresh"})]})}),a&&l&&o&&i&&c.jsx("div",{className:"bg-green-50 border border-green-200 rounded-lg p-3",children:c.jsxs("div",{className:"flex items-center space-x-2",children:[c.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full flex-shrink-0"}),c.jsxs("span",{className:"text-sm font-medium text-green-800",children:["Ready - ",o.slice(0,6),"...",o.slice(-4)]})]})})]})]})})}),c.jsx("div",{className:"flex-shrink-0 border-t border-gray-200 p-6",children:c.jsxs("div",{className:"flex space-x-3",children:[c.jsx(se,{type:"submit",form:"package-form",loading:m,disabled:!a||!l||!i,className:"flex-1",children:t?"Update Package":"Create Package"}),c.jsx(se,{variant:"outline",onClick:n,className:"flex-1",children:"Cancel"})]})})]})})]})}function fEe({onSuccess:t}){const{isConnected:e,account:n,signer:r,chainId:s,contracts:i}=Rt(),{refreshWallet:a}=E9(),[o,l]=v.useState(""),[u,d]=v.useState(""),[h,f]=v.useState(!1),[p,g]=v.useState(!0),m=w=>rt(w,18),y=w=>Ir(w||"0",18);v.useEffect(()=>{(async()=>{try{g(!0);const x=i.packageManager||un().packageManager;if(!x){console.error("PackageManager contract not available"),X.error("PackageManager contract not available");return}const A=await x.globalTargetPrice(),T=m(A);l(T)}catch(x){console.error("Error loading global target price:",x),X.error("Failed to load current global target price")}finally{g(!1)}})()},[i.packageManager]);const b=async()=>{var w,x;if(!e||!n){X.error("Please connect your wallet");return}if(!r){X.error("Wallet signer not available. Please reconnect your wallet.");return}if(!u||parseFloat(u)<=0){X.error("Please enter a valid global target price");return}try{f(!0);const A=await ST(r,n,s);if(!A.isValid)if(t5(e,n,r,null))if(await a()){await new Promise(k=>setTimeout(k,1e3));const E=await ST(r,n,s);if(!E.isValid){X.error(`Wallet validation failed: ${E.errors.join(", ")}`);return}}else{X.error("Failed to refresh wallet connection");return}else{X.error(`Wallet validation failed: ${A.errors.join(", ")}`);return}const T=i.packageManager||un(r).packageManager;if(!T){X.error("PackageManager contract not available");return}const j=y(u),P=await T.setGlobalTargetPrice(j);X.loading("Updating global target price...",{id:"global-target-price"}),await P.wait(),X.success("Global target price updated successfully!",{id:"global-target-price"}),l(u),d(""),t&&t()}catch(A){if(console.error("Error updating global target price:",A),A.code==="ACTION_REJECTED")X.error("Transaction was rejected by user",{id:"global-target-price"});else if((w=A.message)!=null&&w.includes("revert")){const T=((x=A.message.split("revert ")[1])==null?void 0:x.split('"')[0])||"Unknown error";X.error(`Transaction failed: ${T}`,{id:"global-target-price"})}else X.error("Failed to update global target price",{id:"global-target-price"})}finally{f(!1)}};return e?c.jsxs(ne,{children:[c.jsxs(Ze,{className:"pb-4",children:[c.jsxs("div",{className:"flex items-center space-x-2",children:[c.jsx(Ts,{className:"h-5 w-5 text-blue-600"}),c.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Global Target Price Management"})]}),c.jsxs("div",{className:"flex items-start space-x-2 mt-2",children:[c.jsx(ni,{className:"h-4 w-4 text-blue-500 mt-0.5 flex-shrink-0"}),c.jsx("p",{className:"text-sm text-blue-700",children:"The global target price is used exclusively for liquidity pool operations. It does not affect user-facing exchange rates, which are set per package."})]})]}),c.jsxs(re,{className:"space-y-6",children:[c.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[c.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-2",children:"Current Global Target Price"}),p?c.jsx("div",{className:"animate-pulse",children:c.jsx("div",{className:"h-6 bg-gray-200 rounded w-24"})}):c.jsxs("p",{className:"text-2xl font-bold text-gray-900",children:[o," ",c.jsx("span",{className:"text-sm font-normal text-gray-600",children:"USDT per BLOCKS"})]})]}),c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx(Et,{label:"New Global Target Price (USDT per 1 BLOCKS)",type:"number",step:"0.01",min:"0.01",max:"100",value:u,onChange:w=>d(w.target.value),placeholder:"2.0",disabled:h}),c.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"This price is used for liquidity pool operations only. It does not affect user token allocations."})]}),c.jsx(se,{onClick:b,disabled:h||!u||parseFloat(u)<=0,className:"w-full",children:h?"Updating...":"Update Global Target Price"})]})]})]}):c.jsx(ne,{children:c.jsxs(re,{className:"p-6 text-center",children:[c.jsx(mc,{className:"h-8 w-8 text-gray-400 mx-auto mb-4"}),c.jsx("p",{className:"text-gray-600",children:"Please connect your wallet to manage global target price"})]})})}function e4(){const{isConnected:t,contracts:e}=Rt(),[n,r]=v.useState([]),[s,i]=v.useState(!0),[a,o]=v.useState(!1),[l,u]=v.useState(null),[d,h]=v.useState(null);v.useEffect(()=>{f()},[]);const f=async()=>{try{if(i(!0),!e.packageManager){console.error("Package manager contract not available"),X.error("Package manager contract not available");return}const y=await e.packageManager.nextPackageId(),w=Array.from({length:Number(y)},(A,T)=>T).map(async A=>{const T=await e.packageManager.getPackage(A);let j;return Array.isArray(T)?j={entryUSDT:T[0],exchangeRate:T[1],cliff:T[2],duration:T[3],vestBps:T[4],referralBps:T[5],active:T[6],exists:T[7],name:T[8]}:j={name:T.name,entryUSDT:T.entryUSDT,exchangeRate:T.exchangeRate,vestBps:T.vestBps,cliff:T.cliff,duration:T.duration,referralBps:T.referralBps,active:T.active,exists:T.exists},{id:Number(A),name:j.name,entryUSDT:j.entryUSDT,exchangeRate:j.exchangeRate,vestBps:Number(j.vestBps),cliff:Number(j.cliff),duration:Number(j.duration),referralBps:Number(j.referralBps),active:j.active,exists:j.exists}}),x=await Promise.all(w);r(x)}catch(y){console.error("Error loading packages:",y),X.error("Failed to load packages")}finally{i(!1)}},p=y=>{u(y),o(!0)},g=async y=>{if(!e.packageManager){X.error("Package manager contract not available");return}try{h(y.id);const b=await BB();await(await e.packageManager.connect(b).togglePackage(y.id)).wait(),X.success(`Package "${y.name}" ${y.active?"paused":"activated"} successfully!`),f()}catch(b){console.error("Error toggling package:",b),X.error(`Failed to ${y.active?"pause":"activate"} package "${y.name}"`)}finally{h(null)}},m=()=>{o(!1),u(null),f()};return t?c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Package Management"}),c.jsxs(se,{onClick:()=>o(!0),children:[c.jsx(Ay,{className:"h-4 w-4 mr-2"}),"Add Package"]})]}),c.jsxs(ne,{className:"bg-gradient-to-r from-blue-50 to-indigo-50 border-blue-200",children:[c.jsx(Ze,{className:"pb-3",children:c.jsxs("div",{className:"flex items-center space-x-2",children:[c.jsx(Za,{className:"h-5 w-5 text-blue-600"}),c.jsx("h3",{className:"text-lg font-semibold text-blue-900",children:"Dual Pricing System"})]})}),c.jsxs(re,{className:"pt-0",children:[c.jsxs("p",{className:"text-blue-800",children:["This system uses separate pricing mechanisms: ",c.jsx("strong",{children:"Exchange Rates"})," (set per package for user token allocations) and ",c.jsx("strong",{children:"Global Target Price"})," (used exclusively for liquidity pool operations)."]}),c.jsx("p",{className:"text-sm text-blue-700 mt-2",children:"Users see exchange rates when purchasing packages, while the global target price ensures consistent LP pricing across all operations."})]})]}),c.jsx(fEe,{onSuccess:()=>{X.success("Global target price updated successfully!")}}),s?c.jsxs("div",{className:"text-center py-12",children:[c.jsx("div",{className:"animate-spin h-8 w-8 border-4 border-primary-500 border-t-transparent rounded-full mx-auto mb-4"}),c.jsx("p",{className:"text-gray-600",children:"Loading packages..."})]}):n.length===0?c.jsx(ne,{children:c.jsxs(re,{className:"p-12 text-center",children:[c.jsx(Za,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),c.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No packages found"}),c.jsx("p",{className:"text-gray-600 mb-4",children:"Create your first investment package to get started."}),c.jsxs(se,{onClick:()=>o(!0),children:[c.jsx(Ay,{className:"h-4 w-4 mr-2"}),"Add Package"]})]})}):c.jsxs(ne,{children:[c.jsxs(Ze,{children:[c.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"All Packages"}),c.jsx("p",{className:"text-sm text-gray-600",children:"Manage all packages including active and inactive ones"})]}),c.jsx(re,{className:"p-0",children:c.jsx("div",{className:"overflow-x-auto",children:c.jsxs("table",{className:"w-full",children:[c.jsx("thead",{className:"bg-gray-50 border-b",children:c.jsxs("tr",{children:[c.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Package"}),c.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),c.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Entry Cost"}),c.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Vest %"}),c.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Duration"}),c.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Referral"}),c.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),c.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:n.map(y=>c.jsxs("tr",{className:`hover:bg-gray-50 ${y.active?"":"bg-gray-50"}`,children:[c.jsx("td",{className:"px-6 py-4",children:c.jsxs("div",{children:[c.jsx("div",{className:`font-medium ${y.active?"text-gray-900":"text-gray-500"}`,children:y.name}),c.jsxs("div",{className:"text-sm text-gray-500",children:["ID: ",y.id]})]})}),c.jsx("td",{className:"px-6 py-4",children:c.jsx(Je,{variant:y.active?"success":"default",children:y.active?"Active":"Inactive"})}),c.jsxs("td",{className:"px-6 py-4",children:[c.jsxs("span",{className:`font-medium ${y.active?"":"text-gray-500"}`,children:["$",Al(y.entryUSDT)]}),c.jsx("div",{className:"text-sm text-gray-500",children:"USDT"})]}),c.jsx("td",{className:"px-6 py-4",children:c.jsx(Je,{variant:"info",children:Sy(y.vestBps)})}),c.jsxs("td",{className:"px-6 py-4",children:[c.jsx("span",{className:`text-sm ${y.active?"":"text-gray-500"}`,children:dT(y.duration)}),y.cliff>0&&c.jsxs("div",{className:"text-xs text-gray-500",children:["Cliff: ",dT(y.cliff)]})]}),c.jsx("td",{className:"px-6 py-4",children:c.jsx(Je,{variant:"success",children:Sy(y.referralBps)})}),c.jsx("td",{className:"px-6 py-4 text-right",children:c.jsxs("div",{className:"flex items-center justify-end space-x-2",children:[c.jsxs(se,{variant:y.active?"outline":"default",size:"sm",onClick:()=>g(y),disabled:d===y.id,className:y.active?"text-orange-600 border-orange-600 hover:bg-orange-50":"text-green-600 bg-green-600 hover:bg-green-700",children:[d===y.id?c.jsx("div",{className:"animate-spin h-3 w-3 border-2 border-current border-t-transparent rounded-full"}):y.active?c.jsx(qye,{className:"h-3 w-3"}):c.jsx(Gye,{className:"h-3 w-3"}),y.active?"Pause":"Activate"]}),c.jsx(se,{variant:"outline",size:"sm",onClick:()=>p(y),children:c.jsx(a$,{className:"h-3 w-3"})})]})})]},y.id))})]})})})]}),a&&c.jsx(hEe,{package:l,isOpen:a,onClose:()=>{o(!1),u(null)},onSuccess:m})]}):c.jsx(ne,{children:c.jsxs(re,{className:"p-12 text-center",children:[c.jsx(Za,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),c.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Wallet Not Connected"}),c.jsx("p",{className:"text-gray-600",children:"Please connect your wallet to manage packages."})]})})}function pEe(){const{account:t,signer:e,isConnected:n,isCorrectNetwork:r,contracts:s}=Rt(),[i,a]=v.useState([]),[o,l]=v.useState(!1),[u,d]=v.useState(null),[h,f]=v.useState({key:"",rateBps:"",recipient:""}),[p,g]=v.useState(!1),[m,y]=v.useState(!1),b=["buy","sell","transfer","marketing","development","treasury"];v.useEffect(()=>{t&&n&&w()},[t,n]);const w=async()=>{try{y(!0);const S=b.map(async k=>{try{const R=u2(k),O=await s.taxManager.buckets(R);return Number(O.rateBps)>0||O.recipient!==co?{key:k,rateBps:Number(O.rateBps),recipient:O.recipient}:null}catch(R){return console.error(`Error loading bucket ${k}:`,R),null}}),E=(await Promise.all(S)).filter(Boolean);a(E)}catch(S){console.error("Error loading tax buckets:",S),X.error("Failed to load tax buckets")}finally{y(!1)}},x=()=>{if(!h.key.trim())throw new Error("Bucket key is required");const S=parseInt(h.rateBps);if(isNaN(S)||S<0||S>1e4)throw new Error("Tax rate must be between 0 and 10000 basis points (0-100%)");if(!Jy(h.recipient))throw new Error("Invalid recipient address");return{rateBps:S}},A=()=>{f({key:"",rateBps:"",recipient:""}),d(null),l(!1)},T=S=>{d(S),f({key:S.key,rateBps:S.rateBps.toString(),recipient:S.recipient}),l(!0)},j=async S=>{S.preventDefault();try{g(!0);const{rateBps:E}=x();if(!n)throw new Error("Please connect your wallet first");if(!e)throw new Error("No signer available - please ensure your wallet is connected");if(!r)throw new Error("Wrong network. Please switch to BSC Testnet");if(!(s!=null&&s.taxManager))throw new Error("Tax manager contract not properly initialized");const k=u2(h.key),R=await s.taxManager.setBucket(k,E,h.recipient),O=u?"Updating":"Setting";X.loading(`${O} tax bucket...`,{id:"tax"}),await R.wait(),X.success(`Tax bucket ${u?"updated":"configured"} successfully!`,{id:"tax"}),await w(),A()}catch(E){console.error("Tax bucket error:",E),X.error(E.message||"Failed to set tax bucket",{id:"tax"})}finally{g(!1)}},P=async S=>{if(confirm(`Are you sure you want to remove the "${S.key}" tax bucket?`))try{if(g(!0),!n)throw new Error("Please connect your wallet first");if(!e)throw new Error("No signer available - please ensure your wallet is connected");if(!r)throw new Error("Wrong network. Please switch to BSC Testnet");if(!(s!=null&&s.taxManager))throw new Error("Tax manager contract not properly initialized");const E=u2(S.key),k=await s.taxManager.setBucket(E,0,co);X.loading("Removing tax bucket...",{id:"tax-remove"}),await k.wait(),X.success("Tax bucket removed successfully!",{id:"tax-remove"}),await w()}catch(E){console.error("Remove tax bucket error:",E),X.error(E.message||"Failed to remove tax bucket",{id:"tax-remove"})}finally{g(!1)}};return n?c.jsxs("div",{className:"max-w-6xl mx-auto space-y-8",children:[c.jsxs("div",{className:"text-center space-y-4",children:[c.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Tax Bucket Management"}),c.jsx("p",{className:"text-lg text-gray-600 max-w-2xl mx-auto",children:"Configure and manage tax buckets for swap fees and distributions across different transaction types."})]}),c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{className:"flex items-center space-x-4",children:[c.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Tax Buckets"}),m&&c.jsxs("div",{className:"flex items-center text-sm text-gray-500",children:[c.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-primary-600 mr-2"}),"Loading buckets..."]})]}),c.jsxs(se,{onClick:()=>l(!0),disabled:p,children:[c.jsx(Ay,{className:"h-4 w-4 mr-2"}),"Add Tax Bucket"]})]}),o&&c.jsxs(ne,{children:[c.jsx(Ze,{children:c.jsxs("h3",{className:"text-lg font-semibold text-gray-900 flex items-center",children:[c.jsx(mc,{className:"h-5 w-5 mr-2"}),u?"Edit Tax Bucket":"Configure Tax Bucket"]})}),c.jsx(re,{children:c.jsxs("form",{onSubmit:j,className:"space-y-6",children:[c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[c.jsxs("div",{children:[c.jsx(Et,{label:"Bucket Key",value:h.key,onChange:S=>f(E=>({...E,key:S.target.value})),placeholder:"e.g., buy, sell, marketing",required:!0,disabled:!!u}),c.jsxs("div",{className:"mt-2",children:[c.jsx("p",{className:"text-xs text-gray-500 mb-2",children:"Common keys:"}),c.jsx("div",{className:"flex flex-wrap gap-1",children:b.map(S=>c.jsx("button",{type:"button",onClick:()=>f(E=>({...E,key:S})),className:"px-2 py-1 text-xs bg-gray-100 hover:bg-gray-200 rounded transition-colors",disabled:!!u,children:S},S))})]})]}),c.jsxs("div",{children:[c.jsx(Et,{label:"Tax Rate (Basis Points)",type:"number",value:h.rateBps,onChange:S=>f(E=>({...E,rateBps:S.target.value})),placeholder:"500",min:"0",max:"10000",required:!0}),c.jsx("p",{className:"text-xs text-gray-500 mt-1",children:h.rateBps?`${(parseInt(h.rateBps)/100).toFixed(1)}%`:"0-10000 BPS (0-100%)"})]}),c.jsxs("div",{children:[c.jsx(Et,{label:"Recipient Address",value:h.recipient,onChange:S=>f(E=>({...E,recipient:S.target.value})),placeholder:"0x...",required:!0}),c.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Address that will receive the tax fees"})]})]}),c.jsxs("div",{className:"flex space-x-3",children:[c.jsxs(se,{type:"submit",loading:p,children:[u?"Update":"Set"," Tax Bucket"]}),c.jsx(se,{variant:"outline",onClick:A,disabled:p,children:"Cancel"})]})]})})]}),i.length>0?c.jsxs(ne,{children:[c.jsx(Ze,{children:c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Active Tax Buckets"}),c.jsxs(Je,{variant:"info",children:[i.length," bucket",i.length!==1?"s":""]})]})}),c.jsx(re,{className:"p-0",children:c.jsx("div",{className:"overflow-x-auto",children:c.jsxs("table",{className:"w-full",children:[c.jsx("thead",{className:"bg-gray-50 border-b",children:c.jsxs("tr",{children:[c.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Bucket Key"}),c.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Tax Rate"}),c.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Recipient Address"}),c.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),c.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:i.map(S=>c.jsxs("tr",{className:"hover:bg-gray-50",children:[c.jsx("td",{className:"px-6 py-4",children:c.jsxs("div",{children:[c.jsx("span",{className:"font-medium text-gray-900",children:S.key}),c.jsxs("div",{className:"text-sm text-gray-500 capitalize",children:[S.key.replace(/([A-Z])/g," $1").trim()," transactions"]})]})}),c.jsx("td",{className:"px-6 py-4",children:c.jsxs("div",{className:"flex items-center space-x-2",children:[c.jsxs(Je,{variant:"info",children:[(S.rateBps/100).toFixed(1),"%"]}),c.jsxs("span",{className:"text-xs text-gray-500",children:["(",S.rateBps," BPS)"]})]})}),c.jsx("td",{className:"px-6 py-4",children:c.jsxs("div",{children:[c.jsx("span",{className:"text-sm font-mono text-gray-900",children:uT(S.recipient)}),c.jsx("div",{className:"text-xs text-gray-500",children:"Fee recipient wallet"})]})}),c.jsx("td",{className:"px-6 py-4 text-right",children:c.jsxs("div",{className:"flex items-center justify-end space-x-2",children:[c.jsx(se,{variant:"outline",size:"sm",onClick:()=>T(S),disabled:p,children:c.jsx(a$,{className:"h-3 w-3"})}),c.jsx(se,{variant:"outline",size:"sm",onClick:()=>P(S),disabled:p,className:"text-red-600 hover:text-red-700 hover:border-red-300",children:c.jsx(Zye,{className:"h-3 w-3"})})]})})]},S.key))})]})})})]}):m?null:c.jsx(ne,{children:c.jsxs(re,{className:"p-12 text-center",children:[c.jsx(WS,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),c.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No tax buckets configured"}),c.jsx("p",{className:"text-gray-600 mb-4",children:"Set up tax buckets to manage swap fees and distributions across different transaction types."}),c.jsxs(se,{onClick:()=>l(!0),variant:"outline",children:[c.jsx(Ay,{className:"h-4 w-4 mr-2"}),"Configure First Bucket"]})]})})]}):c.jsx("div",{className:"max-w-4xl mx-auto",children:c.jsx(ne,{children:c.jsxs(re,{className:"p-12 text-center",children:[c.jsx(Qd,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),c.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Wallet Not Connected"}),c.jsx("p",{className:"text-gray-600",children:"Please connect your wallet to manage tax buckets."})]})})})}function mEe(){const t=yx("swap",ue.contracts.share,ue.contracts.usdt),e=yx("add",ue.contracts.share,ue.contracts.usdt),n=yx("info/pools",void 0,void 0,ue.contracts.lp);return c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{children:[c.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Secondary Market"}),c.jsx("p",{className:"text-gray-600",children:"Manage and monitor secondary market integration with PancakeSwap."})]}),c.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[c.jsxs(ne,{children:[c.jsx(Ze,{children:c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("h3",{className:"text-lg font-semibold text-gray-900 flex items-center",children:[c.jsx(_r,{className:"h-5 w-5 mr-2 text-primary-600"}),"Trading Interface"]}),c.jsx(Je,{variant:"success",children:"Live"})]})}),c.jsxs(re,{className:"space-y-4",children:[c.jsx("p",{className:"text-gray-600 text-sm",children:"Direct integration with PancakeSwap for SHARE/USDT trading pair."}),c.jsxs("div",{className:"space-y-3",children:[c.jsx("a",{href:t,target:"_blank",rel:"noopener noreferrer",className:"w-full",children:c.jsxs(se,{className:"w-full justify-between",children:[c.jsx("span",{children:"Open PancakeSwap"}),c.jsx(ao,{className:"h-4 w-4"})]})}),c.jsx("a",{href:e,target:"_blank",rel:"noopener noreferrer",className:"w-full",children:c.jsxs(se,{variant:"outline",className:"w-full justify-between",children:[c.jsx("span",{children:"Add Liquidity"}),c.jsx(ao,{className:"h-4 w-4"})]})})]})]})]}),c.jsxs(ne,{children:[c.jsx(Ze,{children:c.jsxs("h3",{className:"text-lg font-semibold text-gray-900 flex items-center",children:[c.jsx(ni,{className:"h-5 w-5 mr-2 text-accent-600"}),"Pool Information"]})}),c.jsxs(re,{className:"space-y-4",children:[c.jsxs("div",{className:"space-y-3",children:[c.jsxs("div",{className:"flex justify-between items-center text-sm",children:[c.jsx("span",{className:"text-gray-600",children:"Trading Pair:"}),c.jsx("span",{className:"font-medium",children:"SHARE/USDT"})]}),c.jsxs("div",{className:"flex justify-between items-center text-sm",children:[c.jsx("span",{className:"text-gray-600",children:"Pool Address:"}),c.jsxs("span",{className:"font-mono text-xs bg-gray-100 px-2 py-1 rounded",children:[ue.contracts.lp.slice(0,8),"...",ue.contracts.lp.slice(-6)]})]}),c.jsxs("div",{className:"flex justify-between items-center text-sm",children:[c.jsx("span",{className:"text-gray-600",children:"DEX:"}),c.jsx("span",{className:"font-medium",children:"PancakeSwap V2"})]})]}),c.jsx("div",{className:"pt-4 border-t",children:c.jsx("a",{href:n,target:"_blank",rel:"noopener noreferrer",className:"w-full",children:c.jsxs(se,{variant:"outline",className:"w-full justify-between",children:[c.jsx("span",{children:"View Analytics"}),c.jsx(ao,{className:"h-4 w-4"})]})})})]})]})]}),c.jsxs(ne,{children:[c.jsx(Ze,{children:c.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Contract Addresses"})}),c.jsx(re,{children:c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[c.jsxs("div",{className:"space-y-3",children:[c.jsxs("div",{children:[c.jsx("label",{className:"text-sm font-medium text-gray-700",children:"SHARE Token"}),c.jsx("div",{className:"mt-1 p-3 bg-gray-50 rounded-lg",children:c.jsx("code",{className:"text-sm text-gray-900 break-all",children:ue.contracts.share})})]}),c.jsxs("div",{children:[c.jsx("label",{className:"text-sm font-medium text-gray-700",children:"USDT Token"}),c.jsx("div",{className:"mt-1 p-3 bg-gray-50 rounded-lg",children:c.jsx("code",{className:"text-sm text-gray-900 break-all",children:ue.contracts.usdt})})]})]}),c.jsxs("div",{className:"space-y-3",children:[c.jsxs("div",{children:[c.jsx("label",{className:"text-sm font-medium text-gray-700",children:"LP Token"}),c.jsx("div",{className:"mt-1 p-3 bg-gray-50 rounded-lg",children:c.jsx("code",{className:"text-sm text-gray-900 break-all",children:ue.contracts.lp})})]}),c.jsxs("div",{children:[c.jsx("label",{className:"text-sm font-medium text-gray-700",children:"PancakeSwap Router"}),c.jsx("div",{className:"mt-1 p-3 bg-gray-50 rounded-lg",children:c.jsx("code",{className:"text-sm text-gray-900 break-all",children:ue.contracts.router})})]})]})]})})]})]})}if(!em)throw new Error("AppKit failed to initialize. Check configuration and console for errors.");function gEe(){return c.jsx(Pye,{children:c.jsx(Rye,{children:c.jsx(eV,{future:{v7_startTransition:!0,v7_relativeSplatPath:!0},children:c.jsx(Xwe,{children:c.jsxs(KH,{children:[c.jsx(_a,{path:"/",element:c.jsx(T1e,{})}),c.jsx(_a,{path:"/redeem",element:c.jsx(K1e,{})}),c.jsx(_a,{path:"/portfolio",element:c.jsx(G1e,{})}),c.jsx(_a,{path:"/referral",element:c.jsx(Z1e,{})}),c.jsx(_a,{path:"/trading",element:c.jsx(uEe,{})}),c.jsx(_a,{path:"/admin",element:c.jsx(_b,{children:c.jsx(e4,{})})}),c.jsx(_a,{path:"/admin/packages",element:c.jsx(_b,{children:c.jsx(e4,{})})}),c.jsx(_a,{path:"/admin/taxes",element:c.jsx(_b,{children:c.jsx(pEe,{})})}),c.jsx(_a,{path:"/admin/market",element:c.jsx(_b,{children:c.jsx(mEe,{})})})]})})})})})}gO(document.getElementById("root")).render(c.jsx(gEe,{}));export{jD as $,_e as A,ya as B,pe as C,U as D,zg as E,Mt as F,ei as G,Ja as H,BG as I,z2e as J,Ys as K,AY as L,Ct as M,me as N,te as O,vt as P,n0e as Q,Ve as R,vEe as S,ws as T,In as U,r0e as V,Mn as W,le as X,Hr as Y,eG as Z,_t as _,$D as a,ii as a0,tn as a1,$e as a2,RG as a3,G6 as a4,DD as a5,Dr as a6,Qn as a7,Ue as a8,oA as a9,pv as aA,IEe as aB,_Ee as aC,TEe as aD,ZG as aE,oY as aF,SEe as aG,xg as aa,na as ab,Wr as ac,sG as ad,pt as ae,fx as af,fv as ag,qn as ah,W2e as ai,sT as aj,Yh as ak,WY as al,Gs as am,D2e as an,Wn as ao,H2e as ap,wB as aq,iT as ar,Zp as as,Rn as at,aY as au,AEe as av,W6 as aw,VD as ax,J_ as ay,Vp as az,MG as b,HG as c,HD as d,Pi as e,vd as f,I9 as g,FD as h,UG as i,wEe as j,YD as k,PEe as l,Fy as m,VG as n,kEe as o,z6 as p,Of as q,mx as r,G_ as s,Y_ as t,Qo as u,It as v,V2e as w,O2e as x,Y as y,Ae as z};
